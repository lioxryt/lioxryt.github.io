(self.webpackChunkgeforce=self.webpackChunkgeforce||[]).push([[179],{36371:(He,de,e)=>{"use strict";e.d(de,{t:()=>Q,w:()=>k});var n=e(2316),i=e(97175),D=e(79441),m=e(80226),y=e(61486),T=e(82516),r=e(81134),a=e(6484),s=e(22573),p=e(22663),l=e(53466),t=e(9170),w=e(15643),h=e(61180),u=e(22213),o=e(58283),f=e(52349),c=e(54364),g=e(30582),I=e(8869),G=e(52529),x=e(98012),E=e(89460),P=e(70781),v=e(50298),O=e(80221);const C=["activecolor"],_=["defaultcolor"],F=["container"],V=["menuButton"],b=function(oe){return{"flip-rtl-element":oe}};function B(oe,N){if(1&oe){const q=n.EpF();n.TgZ(0,"button",16,17),n.NdJ("click",function(){n.CHM(q);const xe=n.oxw(2);return xe.navClicked(xe.navButton.id)})("keydown.escape",function(){n.CHM(q);const xe=n.oxw(2);return xe.onEscapeNavButton(xe.navButton.id)}),n.ALo(2,"translate"),n._UZ(3,"mat-icon",18),n.qZA()}if(2&oe){const q=n.oxw(2);n.s9C("matTooltip",n.lcZ(2,4,q.navButton.tooltip)),n.Q6J("matTooltipDisabled",q.mobileMode),n.xp6(3),n.Q6J("svgIcon",q.navButton.id)("ngClass",n.VKq(6,b,"arrow_left"===q.navButton.id))}}function U(oe,N){if(1&oe){const q=n.EpF();n.TgZ(0,"button",20),n.NdJ("click",function(){n.CHM(q);const xe=n.oxw().$implicit;return n.oxw(2).iconClicked(xe)}),n.ALo(1,"translate"),n._UZ(2,"mat-icon",21),n.qZA()}if(2&oe){const q=n.oxw().$implicit,Me=n.oxw(2);n.Q6J("@icon",void 0)("matTooltipDisabled",!q.tooltip||Me.mobileMode)("matTooltip",n.lcZ(1,4,q.tooltip)),n.xp6(2),n.Q6J("svgIcon",q.icon)}}function A(oe,N){if(1&oe&&(n.ynx(0),n.YNc(1,U,3,6,"button",19),n.BQk()),2&oe){const q=N.$implicit;n.xp6(1),n.Q6J("ngIf",q.icon&&!q.end&&!q.loginData)}}function S(oe,N){if(1&oe&&n._UZ(0,"mat-icon",21),2&oe){const q=n.oxw(2).$implicit;n.Q6J("svgIcon",q.icon)}}const Y=function(oe){return{"app-bar-padding":oe}};function se(oe,N){if(1&oe&&(n.TgZ(0,"span",30),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&oe){const q=n.oxw(2).$implicit;n.Q6J("ngClass",n.VKq(4,Y,void 0===q.button)),n.xp6(1),n.Oqu(n.lcZ(2,2,q.text))}}const fe=function(oe,N){return{"app-bar-item-with-text":oe,"font-button2 mat-flat-button mat-accent app-bar-button-end":N}};function $(oe,N){if(1&oe){const q=n.EpF();n.TgZ(0,"button",27),n.NdJ("click",function(){n.CHM(q);const xe=n.oxw().$implicit;return n.oxw(2).iconClicked(xe)}),n.ALo(1,"translate"),n.YNc(2,S,1,1,"mat-icon",28),n.YNc(3,se,3,6,"span",29),n.qZA()}if(2&oe){const q=n.oxw().$implicit,Me=n.oxw(2);n.Q6J("@icon",void 0)("matTooltipDisabled",!q.tooltip||Me.mobileMode)("matTooltip",n.lcZ(1,7,q.tooltip))("ngClass",n.WLB(9,fe,void 0!==q.text,q.button))("disabled",q.disabled),n.xp6(2),n.Q6J("ngIf",q.icon),n.xp6(1),n.Q6J("ngIf",q.text)}}function ae(oe,N){if(1&oe&&n._UZ(0,"img",39),2&oe){const q=n.oxw(2).$implicit;n.Q6J("src",q.loginData.avatar,n.LSH)}}function me(oe,N){if(1&oe&&n._UZ(0,"mat-icon",40),2&oe){const q=n.oxw(2).$implicit;n.Q6J("svgIcon",q.loginData.avatarSvg)}}function ye(oe,N){if(1&oe&&(n.TgZ(0,"span",41),n._uU(1),n.qZA()),2&oe){const q=n.oxw(2).$implicit;n.xp6(1),n.Oqu(q.loginData.currentPlanShortName)}}function ue(oe,N){if(1&oe&&(n.TgZ(0,"button",31),n.ALo(1,"translate"),n.TgZ(2,"div",32),n.YNc(3,ae,1,1,"img",33),n.YNc(4,me,1,1,"mat-icon",34),n.TgZ(5,"div",35),n.TgZ(6,"span",36),n._uU(7),n.qZA(),n.YNc(8,ye,2,1,"span",37),n.qZA(),n.TgZ(9,"mat-icon",38),n._uU(10,"arrow_drop_down"),n.qZA(),n.qZA(),n.qZA()),2&oe){const q=n.oxw().$implicit,Me=n.MAs(4),xe=n.oxw(2);n.s9C("matTooltip",n.lcZ(1,7,q.tooltip)),n.Q6J("matMenuTriggerFor",Me)("matTooltipDisabled",!q.tooltip||xe.mobileMode),n.xp6(3),n.Q6J("ngIf",q.loginData.avatar),n.xp6(1),n.Q6J("ngIf",q.loginData.avatarSvg),n.xp6(3),n.Oqu(q.loginData.username),n.xp6(1),n.Q6J("ngIf",q.loginData.currentPlanShortName)}}function X(oe,N){if(1&oe){const q=n.EpF();n.ynx(0),n.TgZ(1,"button",42),n.NdJ("click",function(){const ct=n.CHM(q).$implicit;return n.oxw(3).iconMenuClicked(ct.id)}),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.BQk()}if(2&oe){const q=N.$implicit;n.xp6(2),n.hij(" ",n.lcZ(3,1,q.item)," ")}}function j(oe,N){if(1&oe&&(n.ynx(0),n.YNc(1,$,4,12,"button",22),n.YNc(2,ue,11,9,"button",23),n.TgZ(3,"mat-menu",24,25),n.YNc(5,X,4,3,"ng-container",26),n.qZA(),n.BQk()),2&oe){const q=N.$implicit;n.xp6(1),n.Q6J("ngIf",(q.icon&&q.end||q.button)&&!q.loginData),n.xp6(1),n.Q6J("ngIf",q.loginData),n.xp6(3),n.Q6J("ngForOf",q.menu)}}const K=function(oe,N){return{active_color:oe,default_color:N}},Z=function(oe,N){return{value:oe,params:N}},L=function(oe,N){return{translate3d_value:oe,opacity_value:N}};function W(oe,N){if(1&oe){const q=n.EpF();n.TgZ(0,"div",5),n.TgZ(1,"div",6),n.TgZ(2,"mat-icon",7),n.NdJ("@logoSlide.done",function(xe){return n.CHM(q),n.oxw().onLogoSlide(xe)}),n.qZA(),n.qZA(),n.TgZ(3,"div",8,9),n.TgZ(5,"nv-product-tour-step",10),n.YNc(6,B,4,8,"button",11),n.qZA(),n.TgZ(7,"div",12),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.YNc(10,A,2,1,"ng-container",13),n._UZ(11,"div",14),n.TgZ(12,"div",15),n._uU(13),n.ALo(14,"translate"),n.qZA(),n.qZA(),n.Hsn(15),n.YNc(16,j,6,3,"ng-container",13),n.qZA()}if(2&oe){const q=n.oxw();n.ekj("active",q.active),n.Q6J("@active",n.WLB(23,Z,q.active,n.WLB(20,K,q.activeColor,q.defaultColor))),n.xp6(2),n.Q6J("@logoSlide",n.WLB(29,Z,q.logoState,n.WLB(26,L,q.logoSlideTranslate3dValue,q.logoSlideOpacity))),n.xp6(1),n.ekj("shrink-navigation",q.shrinkNavigation),n.xp6(3),n.Q6J("ngIf",null==q.navButton?null:q.navButton.id),n.xp6(1),n.Q6J("fxHide",q.shrinkNavigation),n.xp6(1),n.hij(" ",n.xi3(9,14,q.title,q.titleParams)," "),n.xp6(2),n.Q6J("ngForOf",q.icons)("ngForTrackBy",q.iconTrack),n.xp6(3),n.Oqu(n.xi3(14,17,q.info,q.infoParams)),n.xp6(3),n.Q6J("ngForOf",q.icons)("ngForTrackBy",q.iconTrack)}}const te=["*"];var ie=(()=>{return(oe=ie||(ie={})).InInitial="IN_INITIAL",oe.In="IN",oe.Out="OUT",ie;var oe})(),Q=(()=>{return(oe=Q||(Q={})).ShowInitialReveal="showInitialReveal",oe.ShowWhenNoNavButton="showWhenNoNavButton",oe.NoShow="noShow",Q;var oe})();let k=(()=>{class oe{constructor(q,Me,xe,ct,Se,Ge,St,Tt,Te,Je,xt){this.ngZone=xe,this.appBarService=ct,this.matDialogService=Se,this.productTourService=Ge,this.translateService=St,this.localeService=Tt,this.systemInfoService=Te,this.spatialNavigationService=Je,this.projectInterfaceService=xt,this.destroy$=new D.xQ,this.isTVOS$=new m.t(1),this.skipTour=!1,this.icons=[{},{},{},{},{}],this.title="",this.titleParams={},this.info="",this.infoParams={},this.navButton={},this.show=!0,this.shrinkNavigation=!1,this.template={},this.activeColor="",this.defaultColor="",this.logoSlideTranslate3dValue="",this.logoSlideOpacity=1,this.mobileMode=!1,this.logger=Me.getLogger("AppBar"),this.mobileMode=!!(null==q?void 0:q.mobileMode)}setupListeners(){this.appBarService.icons$.pipe((0,p.R)(this.destroy$)).subscribe(Me=>{let xe=4;for(Me.forEach(ct=>{xe>=0&&(this.icons[xe--]=ct)});xe>=0;)this.icons[xe--]={}}),this.appBarService.title$.pipe((0,p.R)(this.destroy$)).subscribe(Me=>{this.title=Me.entry,this.titleParams=Me.params}),this.appBarService.info$.pipe((0,p.R)(this.destroy$)).subscribe(Me=>{this.info=Me.entry,this.infoParams=Me.params}),this.appBarService.navButton$.pipe((0,p.R)(this.destroy$)).subscribe(Me=>{var xe;this.navButton=Me,this.logoBehavior===Q.ShowWhenNoNavButton&&(this.logoState=(null===(xe=this.navButton)||void 0===xe?void 0:xe.id)?ie.Out:ie.In)}),this.appBarService.active$.pipe((0,p.R)(this.destroy$)).subscribe(Me=>{this.active=Me}),this.appBarService.visible$.pipe((0,p.R)(this.destroy$)).subscribe(Me=>{this.show=Me}),this.appBarService.template$.pipe((0,p.R)(this.destroy$)).subscribe(Me=>{this.template=Me});const q=this.localeService.layoutDirectionUpdated$.pipe((0,l.q)(1));(0,y.aj)([q,this.appBarService.logoRevealed$]).pipe((0,p.R)(this.destroy$)).subscribe(([Me,xe])=>{this.logoSlideTranslate3dValue=this.localeService.isRTLLayoutEnabled?"translate3d(101%, 0, 0)":"translate3d(-101%, 0, 0)",xe&&this.logoState===ie.InInitial&&(this.logoState=ie.Out)}),this.appBarService.shrinkNavigation$.pipe((0,p.R)(this.destroy$)).subscribe(Me=>{this.shrinkNavigation=Me})}ngOnInit(){switch(this.logoBehavior){case Q.NoShow:this.logoState=ie.Out;break;case Q.ShowInitialReveal:this.logoState=ie.InInitial;break;case Q.ShowWhenNoNavButton:this.logoState=ie.In}this.systemInfoService.getDeviceOSType().pipe((0,l.q)(1),(0,p.R)(this.destroy$)).subscribe(q=>{q===a.wi.IOS&&(this.logoSlideOpacity=0)}),this.systemInfoService.getDeviceType().pipe((0,l.q)(1),(0,p.R)(this.destroy$)).subscribe({next:q=>{this.isTVOS$.next(q===a.z7.TV)},error:q=>{this.isTVOS$.next(!1),this.logger.error("failed to get deviceType ",q)}}),this.productTourService.onTourEnd.pipe((0,p.R)(this.destroy$)).subscribe(q=>{this.spatialNavigationService.focusFirstChild(this.container.nativeElement)})}ngAfterViewInit(){setTimeout(()=>{this.activeColor=getComputedStyle(this.activeElement.nativeElement).backgroundColor,this.defaultColor=getComputedStyle(this.defaultElement.nativeElement).backgroundColor,this.setupListeners()},0),this.ngZone.runOutsideAngular(()=>{(0,T.R)(document,"keydown").pipe((0,t.h)(q=>"Escape"===q.key),(0,p.R)(this.destroy$)).subscribe(q=>{var Me;0!==this.matDialogService.openDialogs.length||!(null===(Me=this.navButton)||void 0===Me?void 0:Me.id)||("menu"===this.navButton.id?this.spatialNavigationService.focusViaLastOrigin(this.menuButton.nativeElement):this.appBarService.clickIcon(this.navButton.id))})})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}navClicked(q){this.appBarService.clickNav(q)}iconClicked(q){this.appBarService.clickIcon(q.id)}iconMenuClicked(q){this.appBarService.clickIcon(q)}iconTrack(q,Me){return q}onLogoSlide(q){if((null==q?void 0:q.fromState)===ie.InInitial&&(null==q?void 0:q.toState)===ie.Out){if(this.logger.info("Initial logo reveal complete"),this.skipTour)return;const Me=a.ng.isBrowserPlatform()?this.projectInterfaceService.gfnUnsupportedDialogCloseState:(0,r.of)(!0);(0,y.aj)([this.translateService.get(["toolbar","productTour"]),this.isTVOS$.asObservable(),Me]).pipe((0,l.q)(1),(0,p.R)(this.destroy$)).subscribe(([xe,ct,Se])=>{this.productTourService.initializeTourService([{anchorId:"menu",title:xe.toolbar.menu,content:a.ng.isBrowserPlatform()?xe.productTour.menu.browser:xe.productTour.menu.desktop,placement:w.AP.BottomRight},{anchorId:this.searchAnchor,title:xe.productTour.browseSearch.title,content:ct?xe.productTour.browseSearch.tvContent:xe.productTour.browseSearch.content,placement:w.AP.BottomCenter}]),document.activeElement===document.body&&this.menuButton&&(this.spatialNavigationService.isDefaultFocusRequired()?this.spatialNavigationService.focusViaLastOrigin(this.menuButton.nativeElement):this.spatialNavigationService.setStartingPoint(this.menuButton.nativeElement))})}}onEscapeNavButton(q){this.appBarService.escapeNavButton(q)}}return oe.\u0275fac=function(q){return new(q||oe)(n.Y36(s.iN,8),n.Y36(a.ed),n.Y36(n.R0b),n.Y36(h.ad),n.Y36(u.uw),n.Y36(w.Q3),n.Y36(o.sK),n.Y36(a.OL),n.Y36(a.Ob),n.Y36(s.jr),n.Y36(f.m3))},oe.\u0275cmp=n.Xpm({type:oe,selectors:[["nv-app-bar"]],viewQuery:function(q,Me){if(1&q&&(n.Gf(C,7),n.Gf(_,7),n.Gf(F,5,n.SBq),n.Gf(V,5,n.SBq)),2&q){let xe;n.iGM(xe=n.CRH())&&(Me.activeElement=xe.first),n.iGM(xe=n.CRH())&&(Me.defaultElement=xe.first),n.iGM(xe=n.CRH())&&(Me.container=xe.first),n.iGM(xe=n.CRH())&&(Me.menuButton=xe.first)}},inputs:{logoBehavior:"logoBehavior",searchAnchor:"searchAnchor",skipTour:"skipTour"},ngContentSelectors:te,decls:5,vars:1,consts:[[1,"dummy-color-getter"],["activecolor",""],[1,"default-color"],["defaultcolor",""],["fxLayout","row","fxLayoutAlign","start center","class","appbar default-color mat-elevation-z4","nvFocusBackToFirstChild","",3,"active",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","nvFocusBackToFirstChild","",1,"appbar","default-color","mat-elevation-z4"],["fxFlex","row","fxLayoutAlign","start center",1,"nv-branding"],["svgIcon","gfnBranding","tabindex","-1","fxFlex","",1,"nv-branding","nv-branding-icon"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 1 auto",1,"nav-container"],["container",""],["anchorId","menu"],["mat-button","","matTooltipClass","mat-tooltip-font-body3","class","nav-button item-empty hig-button-icon font-body1","fxLayout","row","fxLayoutAlign","center center","cdkFocusInitial","",3,"matTooltipDisabled","matTooltip","click","keydown.escape",4,"ngIf"],["fxFlex","",1,"title","font-body1","toolbar-title-text",3,"fxHide"],[4,"ngFor","ngForOf","ngForTrackBy"],["fxFlex",""],[1,"title","font-body1"],["mat-button","","matTooltipClass","mat-tooltip-font-body3","fxLayout","row","fxLayoutAlign","center center","cdkFocusInitial","",1,"nav-button","item-empty","hig-button-icon","font-body1",3,"matTooltipDisabled","matTooltip","click","keydown.escape"],["menuButton",""],[3,"svgIcon","ngClass"],["mat-button","","matTooltipClass","nv-oogg oogg-tooltip","class","app-bar-icons-left font-body1 hig-button-icon","fxLayout","row","fxLayoutAlign","center center","fxFlex","none",3,"matTooltipDisabled","matTooltip","click",4,"ngIf"],["mat-button","","matTooltipClass","nv-oogg oogg-tooltip","fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"app-bar-icons-left","font-body1","hig-button-icon",3,"matTooltipDisabled","matTooltip","click"],[3,"svgIcon"],["mat-button","","matTooltipClass","nv-oogg oogg-tooltip","class","app-bar-icons font-body2 hig-button-icon","fxLayout","row","fxLayoutAlign","center center","fxFlex","none",3,"matTooltipDisabled","matTooltip","ngClass","disabled","click",4,"ngIf"],["mat-button","","class","app-bar-icons font-body1 hig-button-icon app-bar-item-with-text","matTooltipClass","nv-oogg oogg-tooltip",3,"matMenuTriggerFor","matTooltipDisabled","matTooltip",4,"ngIf"],["overlapTrigger","false"],["menu","matMenu"],[4,"ngFor","ngForOf"],["mat-button","","matTooltipClass","nv-oogg oogg-tooltip","fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"app-bar-icons","font-body2","hig-button-icon",3,"matTooltipDisabled","matTooltip","ngClass","disabled","click"],[3,"svgIcon",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["mat-button","","matTooltipClass","nv-oogg oogg-tooltip",1,"app-bar-icons","font-body1","hig-button-icon","app-bar-item-with-text",3,"matMenuTriggerFor","matTooltipDisabled","matTooltip"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center"],["class","avatar-img",3,"src",4,"ngIf"],["class","avatar-img",3,"svgIcon",4,"ngIf"],["fxLayout","column",1,"display-name"],[1,"username","font-body2"],["class","font-body3",4,"ngIf"],[1,"material-icons"],[1,"avatar-img",3,"src"],[1,"avatar-img",3,"svgIcon"],[1,"font-body3"],["mat-menu-item","",1,"font-body2",3,"click"]],template:function(q,Me){1&q&&(n.F$t(),n._UZ(0,"div",0,1),n._UZ(2,"div",2,3),n.YNc(4,W,17,32,"div",4)),2&q&&(n.xp6(4),n.Q6J("ngIf",Me.show))},directives:[c.O5,g.xw,g.Wh,I.s,g.yH,G.Hw,x.b,E.b8,c.sg,P.lW,v.gM,c.mk,E.oO,O.VK,O.p6,O.OP],pipes:[o.X$],styles:["[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{min-width:40px;min-height:40px;max-height:40px}.isLtr[_nghost-%COMP%]   .nv-item-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{padding-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{--dummy1: 0;padding-left:8px}.isRtl[_nghost-%COMP%]   .nv-item-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{padding-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{--dummy1: 0;padding-right:8px}.isLtr[_nghost-%COMP%]   .nv-item-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{padding-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{--dummy2: 0;padding-right:8px}.isRtl[_nghost-%COMP%]   .nv-item-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{padding-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{--dummy2: 0;padding-left:8px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}.isRtl[_nghost-%COMP%]   .flip-rtl-element[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .flip-rtl-element[_ngcontent-%COMP%]{transform:scaleX(-1)}html[dir=rtl][_ngcontent-%COMP%]   .flip-rtl-element[_ngcontent-%COMP%]{--dummy: 0;transform:scaleX(-1)}.appbar[_ngcontent-%COMP%]{transition:background-color .15s linear;height:56px}.dummy-color-getter[_ngcontent-%COMP%]{background:#76b900}.default-color[_ngcontent-%COMP%]{background:#393939}.item-empty[_ngcontent-%COMP%]{width:0;max-width:40px}.app-bar-icons[_ngcontent-%COMP%]{margin:0 8px}.isLtr[_nghost-%COMP%]   .app-bar-icons-left[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .app-bar-icons-left[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .app-bar-icons-left[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .app-bar-icons-left[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .app-bar-icons-left[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .app-bar-icons-left[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.app-bar-item-with-text[_ngcontent-%COMP%]{width:unset!important}.app-bar-padding[_ngcontent-%COMP%]{padding:4px 4px 0}.app-bar-button-end[_ngcontent-%COMP%]{padding:0 8px}.appbar.active[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#fff}.nv-branding[_ngcontent-%COMP%]{height:56px;position:absolute;z-index:15}.isLtr[_nghost-%COMP%]   .nv-branding[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-branding[_ngcontent-%COMP%]{left:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-branding[_ngcontent-%COMP%]{--dummy5: 0;left:0}.isRtl[_nghost-%COMP%]   .nv-branding[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-branding[_ngcontent-%COMP%]{right:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-branding[_ngcontent-%COMP%]{--dummy5: 0;right:0}.nv-branding-icon[_ngcontent-%COMP%]{width:210px;height:inherit;pointer-events:none}.avatar-img[_ngcontent-%COMP%]{width:24px;height:24px;margin:0 8px;align-self:center}.isLtr[_nghost-%COMP%]   .display-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .display-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:left}html[dir=ltr][_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{--dummy0: 0;text-align:left}.isRtl[_nghost-%COMP%]   .display-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .display-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:right}html[dir=rtl][_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{--dummy0: 0;text-align:right}.display-name[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:64px;max-width:144px}.toolbar-title-text[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;max-width:264px;min-width:150px}.isLtr[_nghost-%COMP%]   .toolbar-title-text[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .toolbar-title-text[_ngcontent-%COMP%]{padding-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .toolbar-title-text[_ngcontent-%COMP%]{--dummy1: 0;padding-left:16px}.isRtl[_nghost-%COMP%]   .toolbar-title-text[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .toolbar-title-text[_ngcontent-%COMP%]{padding-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .toolbar-title-text[_ngcontent-%COMP%]{--dummy1: 0;padding-right:16px}.mat-button[_ngcontent-%COMP%]{background:transparent;border:none;padding:0}.nav-container[_ngcontent-%COMP%]{min-width:210px}.isLtr[_nghost-%COMP%]   .nav-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nav-container[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nav-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nav-container[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait){.nav-container[_ngcontent-%COMP%]{min-width:auto}}.nav-container.shrink-navigation[_ngcontent-%COMP%]{min-width:0}"],data:{animation:[(0,i.X$)("logoSlide",[(0,i.SB)(ie.InInitial,(0,i.oB)({transform:"translate3d(0, 0, 0)"})),(0,i.SB)(ie.In,(0,i.oB)({transform:"translate3d(0, 0, 0)"})),(0,i.SB)(ie.Out,(0,i.oB)({transform:"{{ translate3d_value }}",opacity:"{{ opacity_value }}"}),{params:{translate3d_value:"translate3d(-101%, 0, 0)",opacity_value:1}}),(0,i.eR)(ie.InInitial+" => "+ie.Out,(0,i.jt)("200ms 1500ms ease")),(0,i.eR)(ie.In+" => "+ie.Out,(0,i.jt)("400ms ease")),(0,i.eR)(ie.Out+" => "+ie.In,(0,i.jt)("650ms ease"))]),(0,i.X$)("navButton",[(0,i.SB)("true",(0,i.oB)({"flex-basis":"36px",opacity:1})),(0,i.SB)("false",(0,i.oB)({"flex-basis":"0","margin-right":0,opacity:0})),(0,i.eR)("true <=> false",(0,i.jt)(150))]),(0,i.X$)("icon",[(0,i.eR)(":enter",[(0,i.oB)({opacity:0}),(0,i.jt)(150,(0,i.oB)({opacity:1}))]),(0,i.eR)(":leave",[(0,i.jt)(150,(0,i.oB)({opacity:0}))])]),(0,i.X$)("active",[(0,i.SB)("true",(0,i.oB)({"background-color":"{{active_color}}"}),{params:{active_color:"transparent"}}),(0,i.SB)("false",(0,i.oB)({"background-color":"{{default_color}}"}),{params:{default_color:"transparent"}}),(0,i.eR)("true <=> false",[(0,i.ru)([(0,i.IO)("@*",[(0,i.pV)()]),(0,i.jt)(150)])])])]}}),oe})()},61180:(He,de,e)=>{"use strict";e.d(de,{ad:()=>l});var n=e(79441),i=e(76491),D=e(2316),m=e(6484);let l=(()=>{class t{constructor(h){this.loggingService=h,this.actionClicked=new n.xQ,this.escapeNavClicked=new n.xQ,this.iconsChanged=new i.X([]),this.titleChanged=new i.X({entry:"",params:{}}),this.infoChanged=new i.X({entry:"",params:{}}),this.navButtonChanged=new i.X({}),this.activeChanged=new i.X(!1),this.appBarState=new i.X(!0),this.templateChanged=new i.X({id:"",params:{}}),this.logoRevealed=new i.X(!1),this.shrinkNavigation=new i.X(!1),this.iconList=[],this.defaultNavButton={},this.actionClicked$=this.actionClicked.asObservable(),this.icons$=this.iconsChanged.asObservable(),this.title$=this.titleChanged.asObservable(),this.info$=this.infoChanged.asObservable(),this.navButton$=this.navButtonChanged.asObservable(),this.active$=this.activeChanged.asObservable(),this.visible$=this.appBarState.asObservable(),this.template$=this.templateChanged.asObservable(),this.logoRevealed$=this.logoRevealed.asObservable(),this.shrinkNavigation$=this.shrinkNavigation.asObservable(),this.escapeNavButton$=this.escapeNavClicked.asObservable(),this.loggedIn=!1,this.logger=this.loggingService.getLogger("AppBar"),this.logger.info("AppBarService started")}reset(){this.titleChanged.next({entry:"",params:{}}),this.infoChanged.next({entry:"",params:{}}),this.iconsChanged.next([]),this.navButtonChanged.next({}),this.activeChanged.next(!1),this.templateChanged.next({id:"",params:{}})}setTitle(h){this.titleChanged.next({entry:h.entry,params:h.params})}setInfo(h){this.infoChanged.next({entry:h.entry,params:h.params})}setDefaultNavButton(h){this.defaultNavButton=h}setNavButton(h){this.navButtonChanged.next(h)}setNavButtonMenu(h){this.setNavButton({id:"menu",tooltip:h})}setNavButtonArrow(h){this.setNavButton({id:"arrow_left",tooltip:h})}setNavButtonClose(h){this.setNavButton({id:"close",tooltip:h})}setNavButtonToDefault(){this.setNavButton(this.defaultNavButton)}setNavButtonEmpty(){this.setNavButton({})}setActive(h){this.activeChanged.next(h)}addIcon(h){this.iconList.push(h),this.iconsChanged.next(this.iconList)}deleteIcon(h){const u=this.iconList.findIndex(o=>o.id===h);-1!==u&&(this.iconList.splice(u,1),this.iconsChanged.next(this.iconList))}setIcons(h){this.iconList=h.slice(),this.iconsChanged.next(this.iconList)}setTemplate(h){this.templateChanged.next(h)}setShrinkNavigation(h){this.shrinkNavigation.next(h)}revealLogo(){this.logoRevealed.next(!0)}setAll(h){var u;this.reset(),h.title&&this.setTitle(h.title),h.info&&this.setInfo(h.info),this.setActive(h.active),this.setIcons(h.icons),this.setTemplate(void 0!==h.template?h.template:{id:""}),h.defaultNavButton&&this.setDefaultNavButton(h.defaultNavButton),(null===(u=h.navButton)||void 0===u?void 0:u.id)?this.setNavButton(h.navButton):h.navButtonMenu?this.setNavButtonMenu():h.navButtonArrow?this.setNavButtonArrow():h.navButtonClose?this.setNavButtonClose():h.navButtonSetToDefault&&this.setNavButtonToDefault()}clearIcons(){this.iconList=[],this.iconsChanged.next(this.iconList)}getIcons(){return this.iconList}clickIcon(h){"closeIgo"===h&&this.closeIgo(),this.actionClicked.next(h)}clickNav(h){this.clickIcon(h)}closeIgo(){}setAppBarState(h){this.appBarState.next(h)}escapeNavButton(h){this.escapeNavClicked.next(h)}}return t.\u0275fac=function(h){return new(h||t)(D.LFG(m.ed))},t.\u0275prov=D.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},74984:(He,de,e)=>{"use strict";e.d(de,{tc:()=>o.t,ip:()=>u,ad:()=>f.ad});var n=e(54364),i=e(66660),D=e(2316),m=e(58283),y=e(80221),T=e(52529),r=e(70781),a=e(50298),s=e(15643),p=e(71570),l=e(22573);let h={provide:D.ip1,useFactory:function(c,g){return()=>function(c,g){return c.addSvgIcon("gfnBranding",g.bypassSecurityTrustResourceUrl("./assets/img/nv-gfn-logo.svg")),Promise.resolve()}(c,g)},deps:[T.jv,p.H7],multi:!0},u=(()=>{class c{}return c.\u0275fac=function(I){return new(I||c)},c.\u0275mod=D.oAB({type:c}),c.\u0275inj=D.cJS({providers:[h],imports:[[n.ez,i.o9,T.Ps,r.ot,y.Tx,a.AV,s._F,m.aw,l.hp]]}),c})();var o=e(36371),f=e(61180)},71906:(He,de,e)=>{"use strict";e.d(de,{XL:()=>o,tj:()=>c,_c:()=>u,W4:()=>I});var n=e(53882),i=e(80226),D=e(81134),m=e(61486),y=e(90490),T=e(98636),r=e(53466),a=e(33927),s=e(85816),p=e(18293),l=e(48326),t=e(6484),w=e(202),h=e(2316);let u=(()=>{class G{}return G.\u0275fac=function(E){return new(E||G)},G.\u0275prov=h.Yz7({token:G,factory:G.\u0275fac}),G})(),o=(()=>{class G{constructor(E,P,v,O){this.httpBackend=E,this.params=v,this.systemInfoService=O,this.configFetchedSubject=new i.t(1),this.getConfigFromHttp=()=>this.http.get(this.params.filePath).pipe((0,T.b)(C=>(this.logger.info("Successfully read application config file",C.build),C),C=>{this.logger.error(`Configuration file ${this.params.filePath} could not be read. Error: ${C}`)})),this.getConfig=()=>{const C=document.getElementsByTagName("gfn-app-config")[0],_=null==C?void 0:C.getAttribute("data-value");null==C||C.remove();const F=this.parseEncodedConfig(_);return F?(0,D.of)(F):this.getConfigFromHttp()},this.logger=P.getLogger("app.config"),this.http=new n.eN(this.httpBackend),this.browserStaticSystemInfo$=t.ng.isBrowserPlatform()?(0,m.aj)([this.systemInfoService.getOsInformation(),this.systemInfoService.getDeviceType()]).pipe((0,r.q)(1),(0,a.U)(([C,_])=>({OSName:C.OSName,DeviceType:_}))):(0,D.of)(null)}get configFetched$(){return this.configFetchedSubject.asObservable()}mergeRemoteOverridesFromGXT(E){var P;try{return null===(P=Object.keys(this.rcParamNameToConfigKeyPathMapping))||void 0===P||P.forEach(v=>{var O,C;const _=this.rcParamNameToConfigKeyPathMapping[v],F=null===(C=null===(O=this.remoteOverridesFromGXT)||void 0===O?void 0:O.params)||void 0===C?void 0:C.find(V=>V.name===v);if(F){let V=F.value;if((0,w.isObject)(V)){const b=(0,w.get)(E,_,{});V=(0,l.Z)(b,V)}(0,w.set)(E,_,V)}}),E}catch(v){return this.logger.info("error in mergeRemoteOverridesFromGXT",v),E}}get(){var E,P;const v=this.overrides||{};let O={};if("dev"===(null===(P=null===(E=this.config)||void 0===E?void 0:E.build)||void 0===P?void 0:P.type)&&(O=this.variant||{}),this.remoteOverridesFromGXT){const C=(0,l.Z)(this.config,O),_=this.mergeRemoteOverridesFromGXT(C);return(0,l.Z)(_,v)}{const C=this.remoteOverrides||{};return(0,l.Z)((0,l.Z)((0,l.Z)(this.config,O),C),v)}}setOverrides(E){this.overrides=E}setRemoteOverrides(E){this.remoteOverrides=E}setRemoteOverridesFromGXT(E,P){this.rcParamNameToConfigKeyPathMapping=P,this.remoteOverridesFromGXT=E}parseEncodedConfig(E){if(E&&""!==E.trim())try{return JSON.parse(atob(E))}catch(P){return null}return null}load(){return this.params.config?(this.logger.info("Initializing config with provided data"),this.config=this.params.config,(0,D.of)(this.config)):this.params.filePath?(this.logger.info(`Attempting to read application config file ${this.params.filePath}`),(0,y.$R)(this.getConfig(),this.browserStaticSystemInfo$).pipe((0,T.b)(E=>{this.config=E[0]},E=>{this.logger.error(`Some problem while executing getConfig function. Error: ${E}`)}),(0,T.b)(([E,P])=>{if(this.config&&P){const v=P.DeviceType,O=P.OSName;this.logger.info(`DeviceType: ${v}, DeviceOSType: ${O}`);const C=B=>{B&&(this.config=(0,l.Z)(this.config,B))};C(this.get().browserConfig);const _=v===t.z7.Phone||v===t.z7.Tablet,V=v===t.z7.TV,b=v===t.z7.Console&&O!==t.wi.SteamOS;(O===t.wi.IOS||O===t.wi.IPadOS)&&C(this.get().iOSConfig),_?C(this.get().mobileConfig):V?C(this.get().tvConfig):b&&C(this.get().consoleConfig)}}),(0,s.zg)(E=>this.loadVariant(E[0])),(0,a.U)(()=>{const E=this.get();return this.logger.info("appConfig loaded"),this.configFetchedSubject.next(E),E}))):(this.logger.error("No valid data source specified in the AppConfigParameters"),(0,D.of)(void 0))}loadVariant(E){var P,v;const O=null===(P=null==E?void 0:E.build)||void 0===P?void 0:P.variant,C=null===(v=null==E?void 0:E.build)||void 0===v?void 0:v.type;if(!O||"dev"!==C)return(0,D.of)(E);const _=this.params.filePath.replace(/\.[^/\\.]+$/,".")+O+"."+this.params.filePath.split(".").pop();return this.http.get(_).pipe((0,T.b)(F=>{this.logger.info(`Successfully read ${O} variant config`),this.variant=F}),(0,p.K)(()=>(0,D.of)(E)))}}return G.\u0275fac=function(E){return new(E||G)(h.LFG(n.jN),h.LFG(t.ed),h.LFG(u),h.LFG(t.Ob))},G.\u0275prov=h.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"}),G})();const c={provide:h.ip1,useFactory:function(G){return()=>G.load().toPromise()},multi:!0,deps:[o]};function g(G){return G.get()}function I(G){return{provide:G,useFactory:g,deps:[o]}}},87335:(He,de,e)=>{"use strict";e.d(de,{Ll:()=>h,ld:()=>p});var w,n=e(82516),i=e(81134),D=e(90490),m=e(61786),y=e(18293),T=e(202),r=e(2984),a=r.Yk.Common.Applicationinfo.ApplicationLifetimeEventType,s=r.Yk.Common.Applicationinfo.ShutdownReason,p=(()=>{return(u=p||(p={})).ApplicationRequestedExit="APPLICATION_REQUESTED_EXIT",u.IpcRequestedExit="IPC_REQUESTED_EXIT",p;var u})(),l=e(2316),t=e(6484);class h{constructor(o,f){this.bridgeService=f,this.isShuttingDown=!1,this.systemShutdownReasons=[s.UserClosedWindow,s.UserQuitWithShortcut,s.UserLoggedOut,s.Relaunch],this.unInterruptableShutdownReasons=[s.UserLoggedOut,p.IpcRequestedExit,s.SelfUpdate,s.Relaunch,s.BrowserExit,s.ForceShutdown],this.logger=o.getLogger("libraries/application-lifetime.service"),this.logger.info("applicationLifetimeService created"),this.preSleepFunctions=new Map,this.onShutdownRequestedFunctions=new Map,this.onShutdownFunctions=new Map,f.executeCommand(r.Gh.Common.Applicationinfo.RegisterAppLifetimeEventsCallback).subscribe(c=>{this.handleBridgeEvent(c)}),(0,n.R)(window,"unload").subscribe(c=>{})}get isAppShuttingDown(){return this.isShuttingDown}sleepApplication(){this.preSleepFunctions.size>0?(this.logger.info("executing pre-sleep functions"),this.preSleepFunctions.forEach(o=>{try{o()}catch(f){this.logger.error("Caught error while executing pre sleep function: ",f)}})):this.logger.info("no pre-sleep work")}shutdownApplication(o){this.systemShutdownReasons.some(f=>f===o)?this.logger.error("Cannot supply a system reason for shutting down from the application layer"):this.performShutdown(o)}addWorkOnSleep(o){return this.addWork(this.preSleepFunctions,o)}addWorkOnShutdownRequested(o){return this.addWork(this.onShutdownRequestedFunctions,o)}addWorkOnShutdown(o){return this.addWork(this.onShutdownFunctions,o)}removeWork(o){if(this.preSleepFunctions.has(o))this.preSleepFunctions.delete(o);else if(this.onShutdownFunctions.has(o))this.onShutdownFunctions.delete(o);else{if(!this.onShutdownRequestedFunctions.has(o)){const f=`Id (${o}) not contained in any registered work map, cannot remove`;throw this.logger.error(f),new Error(f)}this.onShutdownRequestedFunctions.delete(o)}}enumHasValue(o,f){return Object.values(o).includes(f)}handleBridgeEvent(o){if((0,T.isNil)(o)||(0,T.isNil)(o.type))this.logger.error("Nil event or event.type raised from bridge: ",o);else if(this.enumHasValue(a,o.type))if(o.type===a.SystemSuspend)this.sleepApplication();else{if(!this.enumHasValue(p,o.reason)&&!this.enumHasValue(s,o.reason))return void this.logger.info("Shutdown reason",o.reason,"not recognized, not handling");this.performShutdown(o.reason)}else this.logger.info("Event type",o.type,"not recognized, not handling")}isShutdownReasonInterruptable(o){return-1===this.unInterruptableShutdownReasons.indexOf(o)}addWork(o,f){const c=new h.RegisteredApplicationLifetimeHandle(this),g=c.getId();if(this.onShutdownFunctions.has(g)||this.onShutdownRequestedFunctions.has(g)||this.preSleepFunctions.has(g))throw new Error("Dupliate work id found");return o.set(g,f),c}closeWindow(){this.isShuttingDown=!1,this.bridgeService.executeCommand(r.Gh.Common.Windowcontrol.Close).subscribe(()=>{})}combineAndExecuteFunctions(o){const f=[];return o.forEach(c=>{let g;try{g=c().pipe((0,y.K)(I=>(this.logger.error("Failed to execute scheduled func: ",I),(0,i.of)(void 0))))}catch(I){this.logger.error(`Caught error ${I} from registered handler, not blocking shutdown`),g=(0,i.of)(void 0)}f.push(g)}),(0,D.$R)(...f)}performShutdown(o){if(this.isShuttingDown)return void this.logger.info("performShutdown already called, ignoring");if(this.isShuttingDown=!0,0===this.onShutdownRequestedFunctions.size&&0===this.onShutdownFunctions.size)return this.logger.info("no pre-shutdown work, closing immediately"),void this.closeWindow();const f=this.isShutdownReasonInterruptable(o);this.logger.info("starting pre-shutdown promises. shutdown ",f?"is":"isn't"," interruptable"),new m.y(g=>{f&&this.onShutdownRequestedFunctions.size>0?this.combineAndExecuteFunctions(this.onShutdownRequestedFunctions).subscribe({next:G=>{g.next(G.some(x=>!0===x)),g.complete()},error:G=>{this.logger.error("OnShutdown work, error: ",G),g.next(!1),g.complete()}}):(g.next(!1),g.complete())}).subscribe({next:g=>{g?(this.logger.info("shutdown was interrupted during onShutdownRequested"),this.isShuttingDown=!1):0===this.onShutdownFunctions.size?(this.logger.info("no OnShutdown work, closing"),this.closeWindow()):this.combineAndExecuteFunctions(this.onShutdownFunctions).subscribe({next:function(G){this.logger.info("OnShutdown work completed, closing"),this.closeWindow()}.bind(this),error:function(G){this.logger.error("OnShutdown work, error: ",G),this.closeWindow()}.bind(this)})}})}}h.RegisteredApplicationLifetimeHandle=((w=class{constructor(u){this.parent=u,this.handleId=h.RegisteredApplicationLifetimeHandle.nextHandleId++}getId(){return this.handleId}remove(){this.parent.removeWork(this.handleId)}}).nextHandleId=0,w),h.\u0275fac=function(o){return new(o||h)(l.LFG(t.ed),l.LFG(t.dF))},h.\u0275prov=l.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})},54433:(He,de,e)=>{"use strict";e.d(de,{B:()=>D});const D={ReadTicket:{legacyCommand:"QUERY_READ_UPDATE_TICKET",system:"CrimsonNative",module:"Update",method:"ReadTicket",persistent:!1},GfnUpdate:{legacyCommand:"QUERY_GFN_UPDATE_APP",system:"CrimsonNative",module:"Update",method:"GfnUpdate",persistent:!1}}},84239:(He,de,e)=>{"use strict";e.d(de,{e:()=>Ce});const Ce={SetCaptureSupported:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetCaptureSupported",persistent:!1},RegisterHotkeyNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"RegisterHotkeyNotifications",persistent:!0},RegisterGeneralNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"RegisterGeneralNotifications",persistent:!0},RegisterCaptureStateChangeNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"RegisterCaptureStateChangeNotifications",persistent:!0},RegisterWindowStateChangeNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"RegisterWindowStateChangeNotifications",persistent:!0},RegisterBroadcastSessionNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"RegisterBroadcastSessionNotifications",persistent:!0},CaptureSavedNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"CaptureSavedNotification",persistent:!0},HighlightSavedNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"HighlightSavedNotification",persistent:!0},HighlightCaptureFailureNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"HighlightCaptureFailureNotification",persistent:!0},RegisterSDKNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"RegisterSDKNotifications",persistent:!0},RegisterAppNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"RegisterAppNotifications",persistent:!0},GetInitData:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetInitData",persistent:!1},GetMainView:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetMainView",persistent:!1},OpenOsc:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"OpenOsc",persistent:!1},Launch:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"Launch",persistent:!1},GetShadowPlaySupported:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetShadowPlaySupported",persistent:!1},GetShadowPlayStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetShadowPlayStatus",persistent:!1},Get4KSupport:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"Get4KSupport",persistent:!1},GetSupportedBitrates:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetSupportedBitrates",persistent:!1},GetSupportedResolutions:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetSupportedResolutions",persistent:!1},GetSupportedFramerates:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetSupportedFramerates",persistent:!1},GetQualityDefaultData:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetQualityDefaultData",persistent:!1},GetCaptureState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetCaptureState",persistent:!1},GetCaptureProcessInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetCaptureProcessInfo",persistent:!1},GetCaptureControlPIDMode:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetCaptureControlPIDMode",persistent:!1},GetScreenshotSupport:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetScreenshotSupport",persistent:!1},CaptureScreenshot:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"CaptureScreenshot",persistent:!1},CaptureCustomScreenshot:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"CaptureCustomScreenshot",persistent:!1},CustomScreenshotNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"CustomScreenshotNotifications",persistent:!0},GetFreestylePreviewBasePath:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetFreestylePreviewBasePath",persistent:!1},StartDiskCapture:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"StartDiskCapture",persistent:!1},StopAndSaveDiskCapture:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"StopAndSaveDiskCapture",persistent:!1},StartBufferedCapture:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"StartBufferedCapture",persistent:!1},StopBufferedCapture:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"StopBufferedCapture",persistent:!1},SaveBufferedCaptureClip:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SaveBufferedCaptureClip",persistent:!1},EDGEEvent:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"EDGEEvent",persistent:!1},GetInstantReplayEnableStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetInstantReplayEnableStatus",persistent:!1},GetInstantReplayRunningStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetInstantReplayRunningStatus",persistent:!1},GetInstantReplaySettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetInstantReplaySettings",persistent:!1},SetInstantReplaySettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetInstantReplaySettings",persistent:!1},EnableInstantReplay:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"EnableInstantReplay",persistent:!1},SaveInstantReplay:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SaveInstantReplay",persistent:!1},GetLastInstantReplayLength:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetLastInstantReplayLength",persistent:!1},GetInstantReplayCustomizeData:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetInstantReplayCustomizeData",persistent:!1},GetRecordEnableStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetRecordEnableStatus",persistent:!1},GetRecordRunningStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetRecordRunningStatus",persistent:!1},EnableRecord:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"EnableRecord",persistent:!1},GetRecordSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetRecordSettings",persistent:!1},SetRecordSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetRecordSettings",persistent:!1},GetRecordCustomizeData:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetRecordCustomizeData",persistent:!1},EnableBroadcast:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"EnableBroadcast",persistent:!1},PauseBroadcast:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"PauseBroadcast",persistent:!1},GetBroadcastEnableStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetBroadcastEnableStatus",persistent:!1},GetBroadcastRunningStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetBroadcastRunningStatus",persistent:!1},GetBroadcastSupported:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetBroadcastSupported",persistent:!1},GetBroadcastSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetBroadcastSettings",persistent:!1},SetBroadcastSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetBroadcastSettings",persistent:!1},SetBroadcastSession:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetBroadcastSession",persistent:!1},GetBroadcastPreferredProviderSetting:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetBroadcastPreferredProviderSetting",persistent:!1},SetBroadcastPreferredProviderSetting:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetBroadcastPreferredProviderSetting",persistent:!1},GetBroadcastLastProvider:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetBroadcastLastProvider",persistent:!1},SetBroadcastLastProvider:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetBroadcastLastProvider",persistent:!1},GetBroadcastTitle:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetBroadcastTitle",persistent:!1},GetBroadcast2K:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetBroadcast2K",persistent:!1},GetBroadcastFacebookLiveSupport:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetBroadcastFacebookLiveSupport",persistent:!1},GetBroadcastIngestServer:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetBroadcastIngestServer",persistent:!1},SetBroadcastIngestServer:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetBroadcastIngestServer",persistent:!1},SetBroadcastViewerCountImage:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetBroadcastViewerCountImage",persistent:!1},SetBroadcastViewerMax:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetBroadcastViewerMax",persistent:!1},GetRecordBroadcastConcurrencySupport:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetRecordBroadcastConcurrencySupport",persistent:!1},GetRecordGamestreamConcurrencySupport:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetRecordGamestreamConcurrencySupport",persistent:!1},GetDesktopCaptureEnabled:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetDesktopCaptureEnabled",persistent:!1},SetDesktopCaptureEnabled:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetDesktopCaptureEnabled",persistent:!1},GetDesktopCaptureSupported:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetDesktopCaptureSupported",persistent:!1},GetDesktopCaptureSupportReason:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetDesktopCaptureSupportReason",persistent:!1},GetAudioMode:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetAudioMode",persistent:!1},SetAudioMode:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetAudioMode",persistent:!1},GetAudioSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetAudioSettings",persistent:!1},SetAudioSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetAudioSettings",persistent:!1},GetMicCount:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetMicCount",persistent:!1},GetMicMode:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetMicMode",persistent:!1},SetMicMode:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetMicMode",persistent:!1},GetMicSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetMicSettings",persistent:!1},SetMicSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetMicSettings",persistent:!1},MicPTTMode:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"MicPTTMode",persistent:!1},EnableWebcam:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"EnableWebcam",persistent:!1},ToggleWebcam:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"ToggleWebcam",persistent:!1},GetWebcamEnable:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetWebcamEnable",persistent:!1},GetWebcamShown:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetWebcamShown",persistent:!1},GetWebcamPresent:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetWebcamPresent",persistent:!1},GetWebcamPreviewState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetWebcamPreviewState",persistent:!1},EnableWebcamPreview:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"EnableWebcamPreview",persistent:!1},GetHighlightsActive:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetHighlightsActive",persistent:!1},GetHighlightsEnable:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetHighlightsEnable",persistent:!1},SetHighlightsEnable:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetHighlightsEnable",persistent:!1},GetSDKInstanceActive:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetSDKInstanceActive",persistent:!1},GetSDKPermissions:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetSDKPermissions",persistent:!1},SetSDKPermissions:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetSDKPermissions",persistent:!1},NotifyAppOverlayState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"NotifyAppOverlayState",persistent:!1},GetHighlightsConfig:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetHighlightsConfig",persistent:!1},SetHighlightsConfig:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetHighlightsConfig",persistent:!1},GetApplicationConfigs:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetApplicationConfigs",persistent:!1},GetHotkeyShortcut:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetHotkeyShortcut",persistent:!1},SetHotkeyShortcut:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetHotkeyShortcut",persistent:!1},ResetHotkeysToDefault:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"ResetHotkeysToDefault",persistent:!1},GetHotkeyMonitoring:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetHotkeyMonitoring",persistent:!1},InitOsInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"InitOsInfo",persistent:!1},SetHotkeyMonitoring:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetHotkeyMonitoring",persistent:!1},SetHotkeyDynamicEnable:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetHotkeyDynamicEnable",persistent:!1},GetIndicatorSupported:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetIndicatorSupported",persistent:!1},GetIndicatorOverlaySettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetIndicatorOverlaySettings",persistent:!1},SetIndicatorOverlaySettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetIndicatorOverlaySettings",persistent:!1},GetCustomOverlayDefaultPath:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetCustomOverlayDefaultPath",persistent:!1},GetCustomOverlaySupport:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetCustomOverlaySupport",persistent:!1},GetCustomOverlayPath:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetCustomOverlayPath",persistent:!1},SetCustomOverlayPath:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetCustomOverlayPath",persistent:!1},GetCustomOverlayEnable:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetCustomOverlayEnable",persistent:!1},SetCustomOverlayEnable:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SetCustomOverlayEnable",persistent:!1},GetCustomOverlayDisplay:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"GetCustomOverlayDisplay",persistent:!1},SelectCustomOverlay:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"SelectCustomOverlay",persistent:!1},EnableCustomOverlay:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"EnableCustomOverlay",persistent:!1},ToggleAutoHighlight:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"ToggleAutoHighlight",persistent:!1},DisableRecordSpecialCase:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServer",method:"DisableRecordSpecialCase",persistent:!1},GetIf4KRecordingFallbackAvailable:{legacyCommand:"QUERY_IS_4K_RECORDING_FALLBACK_AVAILABLE",system:"CrimsonNative",module:"ShareServer",method:"GetIf4KRecordingFallbackAvailable",persistent:!1}}},2984:(He,de,e)=>{"use strict";var n;e.d(de,{Iq:()=>n,Gh:()=>ml,Yk:()=>ps}),function(we){function On(mn,Kn,We,li){return{legacyCommand:mn,system:void 0,module:Kn,method:We,persistent:li}}we.BridgeCommand=On,we.GenericCommand=function(mn,Kn,We,li){return On(mn,Kn,We,li)}}(n||(n={}));const A={Forager:{CopyConfigTemplate:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Forager",method:"CopyConfigTemplate",persistent:!1},ExtractFrames:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Forager",method:"ExtractFrames",persistent:!1},GetAppInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Forager",method:"GetAppInfo",persistent:!1},LaunchWithNativeApp:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Forager",method:"LaunchWithNativeApp",persistent:!1},ReadWorkspace:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Forager",method:"ReadWorkspace",persistent:!1},ReadFile:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Forager",method:"ReadFile",persistent:!1},SaveWorkspace:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Forager",method:"SaveWorkspace",persistent:!1},TrimVideo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Forager",method:"TrimVideo",persistent:!1},WriteFile:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Forager",method:"WriteFile",persistent:!1}},Gear:{GetPreviewOutputInformation:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GEAR",method:"GetPreviewOutputInformation",persistent:!1},Start:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GEAR",method:"Start",persistent:!1},StartPreview:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GEAR",method:"StartPreview",persistent:!1},GetStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GEAR",method:"GetStatus",persistent:!1},Stop:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GEAR",method:"Stop",persistent:!1}},Osc:{OpenWindow:{legacyCommand:"QUERY_WIN_OPEN_OSC",system:"CrimsonNative",module:"osc",method:"OpenWindow",persistent:!1},CloseWindow:{legacyCommand:"QUERY_WIN_CLOSE_OSC",system:"CrimsonNative",module:"osc",method:"CloseWindow",persistent:!1},IsDisplayInDesktopMode:{legacyCommand:"QUERY_OSC_DISPLAY_IS_DESKTOP_MODE",system:"CrimsonNative",module:"osc",method:"IsDisplayInDesktopMode",persistent:!1},FullscreenState:{legacyCommand:"QUERY_FULLSCREEN_STATE",system:"CrimsonNative",module:"osc",method:"FullscreenState",persistent:!1},SetPainting:{legacyCommand:"QUERY_OSC_SET_PAINTING",system:"CrimsonNative",module:"osc",method:"SetPainting",persistent:!1},DropUrl:{legacyCommand:"QUERY_OSC_DROP_URL",system:"CrimsonNative",module:"osc",method:"DropUrl",persistent:!1},GenerateKeyboardMessage:{legacyCommand:"QUERY_WIN_KB_MESSAGE",system:"CrimsonNative",module:"osc",method:"GenerateKeyboardMessage",persistent:!1},RegisterCloseCommand:{legacyCommand:"QUERY_OSC_REGISTER_CLOSE_EVENT",system:"CrimsonNative",module:"osc",method:"RegisterCloseCommand",persistent:!0},SetDisplayRects:{legacyCommand:"QUERY_OSC_SET_DISPLAY_RECTS",system:"CrimsonNative",module:"osc",method:"SetDisplayRects",persistent:!1}},Sdk:{},Shareserver:e(84239).e,Shareserverlite:{Launch:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServerLite",method:"Launch",persistent:!1},GetShadowPlaySupported:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServerLite",method:"GetShadowPlaySupported",persistent:!1},GetShadowPlayStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ShareServerLite",method:"GetShadowPlayStatus",persistent:!1}}},ml={Common:{Applicationcontrol:{DeleteCookies:{legacyCommand:"QUERY_DELETE_COOKIES",system:"CrimsonNative",module:"ApplicationControl",method:"DeleteCookies",persistent:!1},SetTaskbarProgress:{legacyCommand:"QUERY_WIN_TASKBAR_PROGRESS",system:"CrimsonNative",module:"ApplicationControl",method:"SetTaskbarProgress",persistent:!1},LoadStringTable:{legacyCommand:"QUERY_LOAD_STRING_TABLE",system:"CrimsonNative",module:"ApplicationControl",method:"LoadStringTable",persistent:!1},ReadConfig:{legacyCommand:"QUERY_READ_CONFIG",system:"CrimsonNative",module:"ApplicationControl",method:"ReadConfig",persistent:!1},WriteConfig:{legacyCommand:"QUERY_WRITE_CONFIG",system:"CrimsonNative",module:"ApplicationControl",method:"WriteConfig",persistent:!1},AllowSetForegroundWindow:{legacyCommand:"QUERY_WIN_ALLOW_SET_FOREGROUND",system:"CrimsonNative",module:"ApplicationControl",method:"AllowSetForegroundWindow",persistent:!1},CopyToClipboard:{legacyCommand:"QUERY_WIN_COPY_TO_CLIPBOARD",system:"CrimsonNative",module:"ApplicationControl",method:"CopyToClipboard",persistent:!1},GetNotificationData:{legacyCommand:"QUERY_NOTIFICATION_DATA",system:"CrimsonNative",module:"ApplicationControl",method:"GetNotificationData",persistent:!1},AnimateAppWindow:{legacyCommand:"QUERY_WIN_ANIMATE_ACTIONS",system:"CrimsonNative",module:"ApplicationControl",method:"AnimateAppWindow",persistent:!1},GetLanguageCode:{legacyCommand:"QUERY_WIN_LANG_CODE",system:"CrimsonNative",module:"ApplicationControl",method:"GetLanguageCode",persistent:!1},LaunchApp:{legacyCommand:"QUERY_LAUNCH_COMPANION_APP",system:"CrimsonNative",module:"ApplicationControl",method:"LaunchApp",persistent:!1},Restart:{legacyCommand:"QUERY_RESTART_APP",system:"CrimsonNative",module:"ApplicationControl",method:"Restart",persistent:!1},RestartBackgroundAgent:{legacyCommand:"QUERY_RESTART_BGA_APP",system:"CrimsonNative",module:"ApplicationControl",method:"RestartBackgroundAgent",persistent:!1},IsCefGpuModeSupported:{legacyCommand:"QUERY_IS_CEF_GPU_MODE_SUPPORTED",system:"CrimsonNative",module:"ApplicationControl",method:"IsCefGpuModeSupported",persistent:!1}},Applicationinfo:{IsApplicationRunning:{legacyCommand:"QUERY_IS_APPLICATION_RUNNING",system:"CrimsonNative",module:"ApplicationInfo",method:"IsApplicationRunning",persistent:!1},IsApplicationInstalled:{legacyCommand:"QUERY_IS_APPLICATION_INSTALLED",system:"CrimsonNative",module:"ApplicationInfo",method:"IsApplicationInstalled",persistent:!1},GetIsUIRefreshed:{legacyCommand:"QUERY_IS_UI_REFRESHED",system:"CrimsonNative",module:"ApplicationInfo",method:"GetIsUIRefreshed",persistent:!1},RegisterAppLifetimeEventsCallback:{legacyCommand:"QUERY_REGISTER_APPLICATION_LIFETIME_EVENTS_CALLBACK",system:"CrimsonNative",module:"ApplicationInfo",method:"RegisterAppLifetimeEventsCallback",persistent:!0},ListenToLoadEvents:{legacyCommand:"QUERY_LISTEN_TO_LOAD_EVENTS",system:"CrimsonNative",module:"ApplicationInfo",method:"ListenToLoadEvents",persistent:!0},OpenFileDialog:{legacyCommand:"QUERY_WIN_DIR_INFO",system:"CrimsonNative",module:"ApplicationInfo",method:"OpenFileDialog",persistent:!1},OpenDirectoryBrowser:{legacyCommand:"QUERY_BROWSE_DIRECTORY",system:"CrimsonNative",module:"ApplicationInfo",method:"OpenDirectoryBrowser",persistent:!1},GetApplicationTimeInfo:{legacyCommand:"QUERY_TIME_INFO",system:"CrimsonNative",module:"ApplicationInfo",method:"GetApplicationTimeInfo",persistent:!1}},Bot:{ProcessIntent:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Chatbot",method:"ProcessIntent",persistent:!1}},Clientnotification:{ShowClientNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ClientNotification",method:"ShowClientNotifications",persistent:!1},ClearNotificationsQueue:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ClientNotification",method:"ClearNotificationsQueue",persistent:!1},DeleteNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"ClientNotification",method:"DeleteNotification",persistent:!1}},Companiontool:{Load:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"CompanionTool",method:"Load",persistent:!1},Save:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"CompanionTool",method:"Save",persistent:!1},Reset:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"CompanionTool",method:"Reset",persistent:!1},Run_Log_Collector:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"CompanionTool",method:"Run_Log_Collector",persistent:!1}},Desktopnotification:{ShowDesktopNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DesktopNotification",method:"ShowDesktopNotification",persistent:!1},ClearDesktopNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DesktopNotification",method:"ClearDesktopNotification",persistent:!1},IsValidDesktopNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DesktopNotification",method:"IsValidDesktopNotification",persistent:!1},DesktopNotificationsAllowed:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DesktopNotification",method:"DesktopNotificationsAllowed",persistent:!1},DesktopNotificationActivated:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DesktopNotification",method:"DesktopNotificationActivated",persistent:!0},DesktopNotificationDismissed:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DesktopNotification",method:"DesktopNotificationDismissed",persistent:!0}},Discord:{UpdatePresence:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Discord",method:"UpdatePresence",persistent:!1},ClearPresence:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Discord",method:"ClearPresence",persistent:!1}},Downloader:{CheckForUpdate:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"CheckForUpdate",persistent:!1},GetTaskDownloadStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"GetTaskDownloadStatus",persistent:!1},GetDownloadStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"GetDownloadStatus",persistent:!1},StartDownload:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"StartDownload",persistent:!1},StartDownloadAndPostProcess:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"StartDownloadAndPostProcess",persistent:!1},ScheduleDownloadAndPostProcess:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"ScheduleDownloadAndPostProcess",persistent:!1},PauseDownload:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"PauseDownload",persistent:!1},ResumeDownload:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"ResumeDownload",persistent:!1},ResumeDownloadAndPostProcess:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"ResumeDownloadAndPostProcess",persistent:!1},StopDownload:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"StopDownload",persistent:!1},GetPostProcessingStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"GetPostProcessingStatus",persistent:!1},StartPostProcessing:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"StartPostProcessing",persistent:!1},TriggerAutoUpdate:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"TriggerAutoUpdate",persistent:!1},RegisterCheckForUpdateProgress:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"RegisterCheckForUpdateProgress",persistent:!0},RegisterDownloadProgress:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"RegisterDownloadProgress",persistent:!0},RegisterPostProcessingProgress:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"RegisterPostProcessingProgress",persistent:!0},RegisterAutoUpdateProgress:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Downloader",method:"RegisterAutoUpdateProgress",persistent:!0}},Gallery:{GalleryNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GalleryNotifications",persistent:!0},MontageNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"MontageNotification",persistent:!0},PathChangeNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"PathChangeNotification",persistent:!0},TempFolderChangeNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"TempFolderChangeNotification",persistent:!0},GalleryCapStateChangeNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GalleryCapStateChangeNotification",persistent:!0},GalleryUpdatedNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GalleryUpdatedNotification",persistent:!0},GetFolderListing:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetFolderListing",persistent:!1},GetAppStats:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetAppStats",persistent:!1},GetAppUGC:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetAppUGC",persistent:!1},RemoveGalleryItem:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"RemoveGalleryItem",persistent:!1},EnumerateDrives:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"EnumerateDrives",persistent:!1},GetFileMetadata:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetFileMetadata",persistent:!1},GetEventData:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetEventData",persistent:!1},GetThumbnail:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetThumbnail",persistent:!1},GetFolderCRC:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetFolderCRC",persistent:!1},GetImageFileDimensions:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetImageFileDimensions",persistent:!1},CopyFile:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"CopyFile",persistent:!1},MoveFile:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"MoveFile",persistent:!1},IsDirectoryWriteable:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"IsDirectoryWriteable",persistent:!1},GetSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetSettings",persistent:!1},SetSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"SetSettings",persistent:!1},GetDriveInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetDriveInfo",persistent:!1},CancelPathUpdate:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"CancelPathUpdate",persistent:!1},GetRecentUGC:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetRecentUGC",persistent:!1},CheckDiskSpace:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"CheckDiskSpace",persistent:!1},EnqueuePendingHighlight:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"EnqueuePendingHighlight",persistent:!1},OpenHighlightsGroupSummary:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"OpenHighlightsGroupSummary",persistent:!1},GetHighlightsCount:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetHighlightsCount",persistent:!1},DeleteGroupHighlights:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"DeleteGroupHighlights",persistent:!1},WriteEncryptedBitmap:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"WriteEncryptedBitmap",persistent:!1},TranscodeMediaFile:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"TranscodeMediaFile",persistent:!1},CreateMontage:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"CreateMontage",persistent:!1},CreateMontageFromRecipe:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"CreateMontageFromRecipe",persistent:!1},CancelMontage:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"CancelMontage",persistent:!1},UpdateMontageProgress:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"UpdateMontageProgress",persistent:!1},Trim:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"Trim",persistent:!1},AddMeme:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"AddMeme",persistent:!1},EngraveMP4:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"EngraveMP4",persistent:!1},DeletePreview:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"DeletePreview",persistent:!1},PreviewPathInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"PreviewPathInfo",persistent:!1},GetMontageCloudConfig:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gallery",method:"GetMontageCloudConfig",persistent:!1}},Gameshare:{CreateSession:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GameShare",method:"CreateSession",persistent:!1},DeleteSession:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GameShare",method:"DeleteSession",persistent:!1},ModifySession:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GameShare",method:"ModifySession",persistent:!1},ConfigureControllerMapping:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GameShare",method:"ConfigureControllerMapping",persistent:!1},GetFullScreenProcessId:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GameShare",method:"GetFullScreenProcessId",persistent:!1},CreateSessionNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GameShare",method:"CreateSessionNotification",persistent:!0},SessionStatusUpdateNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GameShare",method:"SessionStatusUpdateNotification",persistent:!0},AudioDeviceChangeNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GameShare",method:"AudioDeviceChangeNotification",persistent:!0}},Gamestream:{GetServerStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gamestream",method:"GetServerStatus",persistent:!1},SetServerStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gamestream",method:"SetServerStatus",persistent:!1},GetPairedDevices:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gamestream",method:"GetPairedDevices",persistent:!1},RemovePairedDevices:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gamestream",method:"RemovePairedDevices",persistent:!1},RegisterPairedDeviceNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gamestream",method:"RegisterPairedDeviceNotification",persistent:!0},RegisterShieldDeviceNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gamestream",method:"RegisterShieldDeviceNotification",persistent:!0},RespondToUpdateNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gamestream",method:"RespondToUpdateNotification",persistent:!1},GetAppsList:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gamestream",method:"GetAppsList",persistent:!1},AddAppCollectorItem:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gamestream",method:"AddAppCollectorItem",persistent:!1},RemoveAppCollectorItem:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gamestream",method:"RemoveAppCollectorItem",persistent:!1},EditAppCollectorItem:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Gamestream",method:"EditAppCollectorItem",persistent:!1}},Httpserver:{StartHttpServer:{legacyCommand:"QUERY_HTTPSERVER_START",system:"CrimsonNative",module:"Httpserver",method:"StartHttpServer",persistent:!0},StopHttpServer:{legacyCommand:"QUERY_HTTPSERVER_STOP",system:"CrimsonNative",module:"Httpserver",method:"StopHttpServer",persistent:!1},SendRedirectResponse:{legacyCommand:"QUERY_HTTPSERVER_REDIRECTRESPONSE",system:"CrimsonNative",module:"Httpserver",method:"SendRedirectResponse",persistent:!1}},Ipc:{Pop:{legacyCommand:"QUERY_IPC_POP_MESSAGE",system:"CrimsonNative",module:"Ipc",method:"Pop",persistent:!1},Push:{legacyCommand:"QUERY_IPC_PUSH_MESSAGE",system:"CrimsonNative",module:"Ipc",method:"Push",persistent:!1},LoginStatus:{legacyCommand:"QUERY_GFN_LOGIN_STATUS",system:"CrimsonNative",module:"Ipc",method:"LoginStatus",persistent:!1}},Jarvis:{MonitorLoginStatus:{legacyCommand:"JARVIS_MONITOR_LOGIN_STATUS",system:"CrimsonNative",module:"Jarvis",method:"MonitorLoginStatus",persistent:!0},Login:{legacyCommand:"JARVIS_LOGIN",system:"CrimsonNative",module:"Jarvis",method:"Login",persistent:!1},Logout:{legacyCommand:"JARVIS_LOGOUT",system:"CrimsonNative",module:"Jarvis",method:"Logout",persistent:!1},QueryToken:{legacyCommand:"QUERY_TOKEN",system:"CrimsonNative",module:"Jarvis",method:"QueryToken",persistent:!1}},Nvcamera:{NvCameraResponseNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"NvCameraResponseNotification",persistent:!0},NvCameraFilterResponseNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"NvCameraFilterResponseNotification",persistent:!0},NvCameraUIControlNotificationData:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"NvCameraUIControlNotificationData",persistent:!0},NgxAIUpResNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"NgxAIUpResNotifications",persistent:!0},SetAnselEnable:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"SetAnselEnable",persistent:!1},GetFeatureSet:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetFeatureSet",persistent:!1},GetProcessInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetProcessInfo",persistent:!1},GetNvCameraConfig:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetNvCameraConfig",persistent:!1},GetVersion:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetVersion",persistent:!1},AnselUIReady:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"AnselUIReady",persistent:!1},GetAnselCaptureTypes:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetAnselCaptureTypes",persistent:!1},GetAnselEnabledStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetAnselEnabledStatus",persistent:!1},SetLanguage:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"SetLanguage",persistent:!1},SetNvCameraConfig:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"SetNvCameraConfig",persistent:!1},CaptureScreenshot:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"CaptureScreenshot",persistent:!1},GetCaptureResolutions:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetCaptureResolutions",persistent:!1},SetFilter:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"SetFilter",persistent:!1},GetCurrentFilterInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetCurrentFilterInfo",persistent:!1},ResetFilter:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"ResetFilter",persistent:!1},InsertFilter:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"InsertFilter",persistent:!1},RemoveFilter:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"RemoveFilter",persistent:!1},MoveFilter:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"MoveFilter",persistent:!1},GetFilterStackInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetFilterStackInfo",persistent:!1},ResetFilterStack:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"ResetFilterStack",persistent:!1},SetFilterAttribute:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"SetFilterAttribute",persistent:!1},SetFilterAndAttributes:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"SetFilterAndAttributes",persistent:!1},CancelCapture:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"CancelCapture",persistent:!1},SetCameraControlFovRoll:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"SetCameraControlFovRoll",persistent:!1},GetCameraControlFov:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetCameraControlFov",persistent:!1},GetCameraRangeFovRoll:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetCameraRangeFovRoll",persistent:!1},SetCameraGridOfThirds:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"SetCameraGridOfThirds",persistent:!1},SetAnselRedirection:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"SetAnselRedirection",persistent:!1},SendEnableRedirectionToSP:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"SendEnableRedirectionToSP",persistent:!0},MouseEventToNvcamera:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"MouseEventToNvcamera",persistent:!1},KeyboardEventToNvcamera:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"KeyboardEventToNvcamera",persistent:!1},GetFreestyleWhitelisted:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetFreestyleWhitelisted",persistent:!1},GetNvCameraOnBusStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"GetNvCameraOnBusStatus",persistent:!1},StartNgxAIUpRes:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"StartNgxAIUpRes",persistent:!1},CancelNgxAIUpRes:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"CancelNgxAIUpRes",persistent:!1},AnselShotSavedNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"AnselShotSavedNotification",persistent:!0},SetCMSInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCamera",method:"SetCMSInfo",persistent:!1}},Sharedstorage:{Read:{legacyCommand:"QUERY_READ_SHARED_STORAGE",system:"CrimsonNative",module:"SharedStorage",method:"Read",persistent:!1},Write:{legacyCommand:"QUERY_WRITE_SHARED_STORAGE",system:"CrimsonNative",module:"SharedStorage",method:"Write",persistent:!1},Remove:{legacyCommand:"QUERY_REMOVE_FROM_SHARED_STORAGE",system:"CrimsonNative",module:"SharedStorage",method:"Remove",persistent:!1},Cache:{legacyCommand:"QUERY_CACHE_SHARED_STORAGE",system:"CrimsonNative",module:"SharedStorage",method:"Cache",persistent:!1}},Systeminfo:{GetSystemInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"SystemInfo",method:"GetSystemInfo",persistent:!1},GetDeviceId:{legacyCommand:"QUERY_DEVICE_ID",system:"CrimsonNative",module:"SystemInfo",method:"GetDeviceId",persistent:!1},GetGPUInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"SystemInfo",method:"GetGPUInfo",persistent:!1},GetBrowserInfo:{legacyCommand:"QUERY_BROWSER_INFO",system:"CrimsonNative",module:"SystemInfo",method:"GetBrowserInfo",persistent:!1},GetGenericInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"SystemInfo",method:"GetGenericInfo",persistent:!1},DNSLookup:{legacyCommand:"QUERY_DNS",system:"CrimsonNative",module:"SystemInfo",method:"DNSLookup",persistent:!1}},Update:e(54433).B,Windowcontrol:{Maximize:{legacyCommand:"QUERY_WIN_MAXIMIZE",system:"CrimsonNative",module:"WindowControl",method:"Maximize",persistent:!1},Minimize:{legacyCommand:"QUERY_WIN_MINIMIZE",system:"CrimsonNative",module:"WindowControl",method:"Minimize",persistent:!1},Restore:{legacyCommand:"QUERY_WIN_RESTORE",system:"CrimsonNative",module:"WindowControl",method:"Restore",persistent:!1},RestoreFromFullScreen:{legacyCommand:"QUERY_WIN_RESTORE_FROM_FULLSCREEN",system:"CrimsonNative",module:"WindowControl",method:"RestoreFromFullScreen",persistent:!1},Resize:{legacyCommand:"QUERY_WIN_RECT",system:"CrimsonNative",module:"WindowControl",method:"Resize",persistent:!1},Close:{legacyCommand:"QUERY_WIN_CLOSE",system:"CrimsonNative",module:"WindowControl",method:"Close",persistent:!1},Focus:{legacyCommand:"QUERY_WIN_FOCUS",system:"CrimsonNative",module:"WindowControl",method:"Focus",persistent:!1},RequestUserAttention:{legacyCommand:"QUERY_REQUEST_USER_ATTENTION",system:"CrimsonNative",module:"WindowControl",method:"RequestUserAttention",persistent:!1},EnableCloseButton:{legacyCommand:"QUERY_WIN_ALLOW_CLOSE",system:"CrimsonNative",module:"WindowControl",method:"EnableCloseButton",persistent:!1}},Windowevents:{RegisterWindowEventsCallback:{legacyCommand:"QUERY_REGISTER_WINDOW_EVENTS_CALLBACK",system:"CrimsonNative",module:"WindowEvents",method:"RegisterWindowEventsCallback",persistent:!0}}},Gfe:{Driverinstall:{InstallAsync:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverInstall",method:"InstallAsync",persistent:!1},SetState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverInstall",method:"SetState",persistent:!1},GetState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverInstall",method:"GetState",persistent:!1},RegisterProgressNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverInstall",method:"RegisterProgressNotification",persistent:!0},RegisterFormNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverInstall",method:"RegisterFormNotification",persistent:!0}},Driverupdaterecommendation:{GetDriverUpdateRecommendation:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"GetDriverUpdateRecommendation",persistent:!1},GetUserDriverTypePreference:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"GetUserDriverTypePreference",persistent:!1},SetUserDriverTypePreference:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"SetUserDriverTypePreference",persistent:!1},GetAutomaticDriverDownloadEnabled:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"GetAutomaticDriverDownloadEnabled",persistent:!1},SetAutomaticDriverDownloadEnabled:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"SetAutomaticDriverDownloadEnabled",persistent:!1},StartDriverUpdateCheck:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"StartDriverUpdateCheck",persistent:!1},RegisterDriverUpdateCheckProgressNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"RegisterDriverUpdateCheckProgressNotifications",persistent:!0},GetGRDEditorPreviewMode:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"GetGRDEditorPreviewMode",persistent:!1},GetDriverUpdateNotificationEnabled:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"GetDriverUpdateNotificationEnabled",persistent:!1},SetDriverUpdateNotificationEnabled:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"SetDriverUpdateNotificationEnabled",persistent:!1}},Gfnsdk:{Initialize:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GfnSdk",method:"Initialize",persistent:!1},StartStreaming:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GfnSdk",method:"StartStreaming",persistent:!1}},Localgames:{GetApplications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetApplications",persistent:!1},RegisterApplicationChangedNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"RegisterApplicationChangedNotifications",persistent:!0},RegisterApplicationRemovedNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"RegisterApplicationRemovedNotifications",persistent:!0},StartApplicationScan:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"StartApplicationScan",persistent:!1},RegisterApplicationScanProgressNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"RegisterApplicationScanProgressNotifications",persistent:!0},GetLastApplicationScanTime:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetLastApplicationScanTime",persistent:!1},LaunchApplication:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"LaunchApplication",persistent:!1},GetLauncherPID:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetLauncherPID",persistent:!1},GetApplicationSearchPaths:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetApplicationSearchPaths",persistent:!1},AddApplicationSearchPath:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"AddApplicationSearchPath",persistent:!1},RemoveApplicationSearchPath:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"RemoveApplicationSearchPath",persistent:!1},GetVOPSStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetVOPSStatus",persistent:!1},GetVOPSSettingsInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetVOPSSettingsInfo",persistent:!1},RegisterVOPSReadyNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"RegisterVOPSReadyNotifications",persistent:!0},GetBatteryBoostState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetBatteryBoostState",persistent:!1},SetBatteryBoostState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"SetBatteryBoostState",persistent:!1},GetBatteryBoostSupportState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetBatteryBoostSupportState",persistent:!1},GetWhisperModeState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetWhisperModeState",persistent:!1},SetWhisperModeState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"SetWhisperModeState",persistent:!1},RegisterWhisperModeStateNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"RegisterWhisperModeStateNotifications",persistent:!0},GetWhisperModeSupportState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetWhisperModeSupportState",persistent:!1},RegisterWhisperModeSupportStateNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"RegisterWhisperModeSupportStateNotifications",persistent:!0},GetSettingsTranslations:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetSettingsTranslations",persistent:!1},GetSettingsSpace:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetSettingsSpace",persistent:!1},SetTargetSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"SetTargetSettings",persistent:!1},GetApplicationState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"GetApplicationState",persistent:!1},RegisterApplicationStateChangedNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"LocalGames",method:"RegisterApplicationStateChangedNotifications",persistent:!0}}},Gfn:{Gfnbroadcast:{GfnBroadcastResponseNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GfnBroadcast",method:"GfnBroadcastResponseNotification",persistent:!0},BroadcastConnect:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GfnBroadcast",method:"BroadcastConnect",persistent:!1},BroadcastDisconnect:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GfnBroadcast",method:"BroadcastDisconnect",persistent:!1},ValidateRtspServer:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GfnBroadcast",method:"ValidateRtspServer",persistent:!1},ClientWebcamStart:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GfnBroadcast",method:"ClientWebcamStart",persistent:!1},ClientWebcamStop:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GfnBroadcast",method:"ClientWebcamStop",persistent:!1}},Gfnsdkhost:{UpdateStreamerStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"GfnSdkHost",method:"UpdateStreamerStatus",persistent:!1}},Networktest:{Start:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NetworkTest",method:"Start",persistent:!1},AuthTokenRequest:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NetworkTest",method:"AuthTokenRequest",persistent:!0},UpdateAuthToken:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NetworkTest",method:"UpdateAuthToken",persistent:!1},ConfigureNetworkTestSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NetworkTest",method:"ConfigureNetworkTestSettings",persistent:!1},RegisterCallback:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NetworkTest",method:"RegisterCallback",persistent:!1}},Nvaccount:{Command1:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvAccount",method:"Command1",persistent:!1}},Nvlogreporter:{Start:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvLogReporter",method:"Start",persistent:!1}},Serverrouting:{PerformRouting:{legacyCommand:"QUERY_GFN_LATENCY_BASED_ROUTING",system:"CrimsonNative",module:"ServerRouting",method:"PerformRouting",persistent:!1}},Streamer:{Launch:{legacyCommand:"QUERY_STREAMER_LAUNCH",system:"CrimsonNative",module:"Streamer",method:"Launch",persistent:!1},AddDesktopShortcut:{legacyCommand:"QUERY_STREAMER_INSTALL",system:"CrimsonNative",module:"Streamer",method:"AddDesktopShortcut",persistent:!1}},Streaming:{Start:{legacyCommand:"QUERY_GFN_START",system:"CrimsonNative",module:"Streaming",method:"Start",persistent:!1},Prepare:{legacyCommand:"QUERY_GFN_PREPARE",system:"CrimsonNative",module:"Streaming",method:"Prepare",persistent:!1},SetAuthInfo:{legacyCommand:"QUERY_GFN_SET_AUTH_INFO",system:"CrimsonNative",module:"Streaming",method:"SetAuthInfo",persistent:!1},SetAuthToken:{legacyCommand:"QUERY_GFN_SET_AUTH_TOKEN",system:"CrimsonNative",module:"Streaming",method:"SetAuthToken",persistent:!1},Stop:{legacyCommand:"QUERY_GFN_STOP",system:"CrimsonNative",module:"Streaming",method:"Stop",persistent:!1},Cleanup:{legacyCommand:"QUERY_GFN_CLEANUP",system:"CrimsonNative",module:"Streaming",method:"Cleanup",persistent:!1},GetActiveSessions:{legacyCommand:"QUERY_GFN_GET_ACTIVE_SESSIONS",system:"CrimsonNative",module:"Streaming",method:"GetActiveSessions",persistent:!1},GetSessionInfo:{legacyCommand:"QUERY_GFN_GET_SESSION_INFO",system:"CrimsonNative",module:"Streaming",method:"GetSessionInfo",persistent:!1},VsyncToggle:{legacyCommand:"QUERY_GFN_IS_VSYNC_TOGGLE_SUPPORTED",system:"CrimsonNative",module:"Streaming",method:"VsyncToggle",persistent:!1},Cancel:{legacyCommand:"QUERY_GFN_CANCEL",system:"CrimsonNative",module:"Streaming",method:"Cancel",persistent:!1},Resume:{legacyCommand:"QUERY_GFN_RESUME",system:"CrimsonNative",module:"Streaming",method:"Resume",persistent:!1},PauseStreaming:{legacyCommand:"QUERY_GFN_PAUSE_STREAMING",system:"CrimsonNative",module:"Streaming",method:"PauseStreaming",persistent:!1},UpdateRemoteConfig:{legacyCommand:"QUERY_GFN_UPDATE_REMOTE_CONFIG",system:"CrimsonNative",module:"Streaming",method:"UpdateRemoteConfig",persistent:!1},RegisterCallback:{legacyCommand:"QUERY_GFN_REGISTER_CALLBACK",system:"CrimsonNative",module:"Streaming",method:"RegisterCallback",persistent:!0},OpenOsr:{legacyCommand:"QUERY_WIN_OPEN_OSR",system:"CrimsonNative",module:"Streaming",method:"OpenOsr",persistent:!1},CloseOsr:{legacyCommand:"QUERY_WIN_CLOSE_OSR",system:"CrimsonNative",module:"Streaming",method:"CloseOsr",persistent:!1},OsrRegisterCustomKeyPress:{legacyCommand:"QUERY_OSR_REGISTER_KEYPRESS",system:"CrimsonNative",module:"Streaming",method:"OsrRegisterCustomKeyPress",persistent:!1},OsrUnregisterCustomKeyPress:{legacyCommand:"QUERY_OSR_UNREGISTER_KEYPRESS",system:"CrimsonNative",module:"Streaming",method:"OsrUnregisterCustomKeyPress",persistent:!1},OsrCheckKeyPressCombination:{legacyCommand:"QUERY_OSR_CHECK_KEYPRESS_COMBINATION",system:"CrimsonNative",module:"Streaming",method:"OsrCheckKeyPressCombination",persistent:!1},OsrRegisterKeyPressCallback:{legacyCommand:"QUERY_OSR_REGISTER_KEYPRESS_CALLBACK",system:"CrimsonNative",module:"Streaming",method:"OsrRegisterKeyPressCallback",persistent:!0},OsrSetOverlayResolution:{legacyCommand:"QUERY_OSR_SET_OVERLAY_RESOLUTION",system:"CrimsonNative",module:"Streaming",method:"OsrSetOverlayResolution",persistent:!1},GetStreamVolume:{legacyCommand:"QUERY_GFN_GET_STREAM_VOLUME",system:"CrimsonNative",module:"Streaming",method:"GetStreamVolume",persistent:!1},GetStreamStats:{legacyCommand:"QUERY_GFN_GET_STREAM_STATS",system:"CrimsonNative",module:"Streaming",method:"GetStreamStats",persistent:!1},SetStreamVolume:{legacyCommand:"QUERY_GFN_SET_STREAM_VOLUME",system:"CrimsonNative",module:"Streaming",method:"SetStreamVolume",persistent:!1},SetMagnificationFilter:{legacyCommand:"QUERY_GFN_SET_MAG_FILTER",system:"CrimsonNative",module:"Streaming",method:"SetMagnificationFilter",persistent:!1},GetMagnificationFilterSupport:{legacyCommand:"QUERY_GFN_GET_MAG_FILTER_SUPPORT",system:"CrimsonNative",module:"Streaming",method:"GetMagnificationFilterSupport",persistent:!1},GetMagnificationFilterSupportList:{legacyCommand:"QUERY_GFN_GET_MAG_FILTER_SUPPORT_LIST",system:"CrimsonNative",module:"Streaming",method:"GetMagnificationFilterSupportList",persistent:!1},SetMagnificationFilterSharpness:{legacyCommand:"QUERY_GFN_SET_MAG_FILTER_SHARPNESS",system:"CrimsonNative",module:"Streaming",method:"SetMagnificationFilterSharpness",persistent:!1},ToggleOnScreenStats:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Streaming",method:"ToggleOnScreenStats",persistent:!1},ToggleUserInput:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Streaming",method:"ToggleUserInput",persistent:!1},ToggleJoystickMouse:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Streaming",method:"ToggleJoystickMouse",persistent:!1},SetVirtualKeyboardState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Streaming",method:"SetVirtualKeyboardState",persistent:!1},SetVideoTransforms:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Streaming",method:"SetVideoTransforms",persistent:!1},RegisterMicCallback:{legacyCommand:"QUERY_GFN_REGISTER_MIC_CALLBACK",system:"CrimsonNative",module:"Streaming",method:"RegisterMicCallback",persistent:!0},ShouldDefaultEnableMic:{legacyCommand:"QUERY_SHOULD_DEFAULT_ENABLE_MIC",system:"CrimsonNative",module:"Streaming",method:"ShouldDefaultEnableMic",persistent:!1},GetMicState:{legacyCommand:"QUERY_GFN_GET_MIC_STATE",system:"CrimsonNative",module:"Streaming",method:"GetMicState",persistent:!1},SetMicState:{legacyCommand:"QUERY_GFN_SET_MIC_STATE",system:"CrimsonNative",module:"Streaming",method:"SetMicState",persistent:!1},GetKeyboardLayout:{legacyCommand:"QUERY_GFN_GET_KEYBOARD_LAYOUT",system:"CrimsonNative",module:"Streaming",method:"GetKeyboardLayout",persistent:!1},SetKeyboardLayout:{legacyCommand:"QUERY_GFN_SET_KEYBOARD_LAYOUT",system:"CrimsonNative",module:"Streaming",method:"SetKeyboardLayout",persistent:!1},ConfigureStreamingSettings:{legacyCommand:"QUERY_GFN_UPDATE_STREAMING_SETTINGS",system:"CrimsonNative",module:"Streaming",method:"ConfigureStreamingSettings",persistent:!1},SendUnicode:{legacyCommand:"QUERY_GFN_SEND_UNICODE",system:"CrimsonNative",module:"Streaming",method:"SendUnicode",persistent:!1},OnKBLayoutChange:{legacyCommand:"QUERY_GFN_REGISTER_ON_KEYBOARD_LAYOUT_CHANGED",system:"CrimsonNative",module:"Streaming",method:"OnKBLayoutChange",persistent:!0},GetUnifiedAPIVersion:{legacyCommand:"QUERY_GFN_GET_UNIFIED_API_VERSION",system:"CrimsonNative",module:"Streaming",method:"GetUnifiedAPIVersion",persistent:!1},OnIMEWindowClosed:{legacyCommand:"QUERY_GFN_REGISTER_ON_IME_WINDOW_CLOSED",system:"CrimsonNative",module:"Streaming",method:"OnIMEWindowClosed",persistent:!0},OnIMEWindowOpened:{legacyCommand:"QUERY_GFN_REGISTER_ON_IME_WINDOW_OPENED",system:"CrimsonNative",module:"Streaming",method:"OnIMEWindowOpened",persistent:!0},GetDisplayMode:{legacyCommand:"QUERY_GFN_GET_DISPLAY_MODE",system:"CrimsonNative",module:"Streaming",method:"GetDisplayMode",persistent:!1},GetVSyncAutoDisableThresholdStreamingFPS:{legacyCommand:"QUERY_GFN_GET_VSYNC_AUTO_DISABLE_THRESHOLD_FPS",system:"CrimsonNative",module:"Streaming",method:"GetVSyncAutoDisableThresholdStreamingFPS",persistent:!1},GetVSyncAutoDisableThresholdDisplayHz:{legacyCommand:"QUERY_GFN_GET_VSYNC_AUTO_DISABLE_THRESHOLD_DISPLAY_HZ",system:"CrimsonNative",module:"Streaming",method:"GetVSyncAutoDisableThresholdDisplayHz",persistent:!1},SetVsyncEnabled:{legacyCommand:"QUERY_GFN_SET_VSYNC_ENABLED",system:"CrimsonNative",module:"Streaming",method:"SetVsyncEnabled",persistent:!1},SetAdaptiveFramePacingEnabled:{legacyCommand:"QUERY_GFN_SET_ADAPTIVE_FRAME_PACING_ENABLED",system:"CrimsonNative",module:"Streaming",method:"SetAdaptiveFramePacingEnabled",persistent:!1},SetDrcDfcState:{legacyCommand:"QUERY_GFN_SET_DRC_DFC_STATE",system:"CrimsonNative",module:"Streaming",method:"SetDrcDfcState",persistent:!1},SetStreamingMaxBitrate:{legacyCommand:"QUERY_GFN_SET_STREAMING_MAX_BITRATE",system:"CrimsonNative",module:"Streaming",method:"SetStreamingMaxBitrate",persistent:!1},UpdateEventInfoGuids:{legacyCommand:"QUERY_GFN_UPDATE_EVENT_INFO_GUIDS",system:"CrimsonNative",module:"Streaming",method:"UpdateEventInfoGuids",persistent:!1},UpdateEventDataElements:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"Streaming",method:"UpdateEventDataElements",persistent:!1},SendClipboardUpdate:{legacyCommand:"QUERY_GFN_SEND_CLIPBOARD_UPDATE",system:"CrimsonNative",module:"Streaming",method:"SendClipboardUpdate",persistent:!1},IsPlatformSupportsUHD:{legacyCommand:"QUERY_GFN_IS_PLATFORM_SUPPORTS_UHD",system:"CrimsonNative",module:"Streaming",method:"IsPlatformSupportsUHD",persistent:!1},AuthorizeAVDevices:{legacyCommand:"QUERY_GFN_AUTH_AV_DEVICES",system:"CrimsonNative",module:"Streaming",method:"AuthorizeAVDevices",persistent:!1},PlatformGetMaxBitRateForArray:{legacyCommand:"QUERY_GFN_PLATFORM_GET_MAXBITRATE_ARRAY",system:"CrimsonNative",module:"Streaming",method:"PlatformGetMaxBitRateForArray",persistent:!1},SendKeyEvent:{legacyCommand:"QUERY_GFN_SEND_KEY_EVENT_TO_STREAMER",system:"CrimsonNative",module:"Streaming",method:"SendKeyEvent",persistent:!1},IsPlatformSupportsHDRDecode:{legacyCommand:"QUERY_GFN_IS_PLATFORM_SUPPORTS_HDR_DECODE",system:"CrimsonNative",module:"Streaming",method:"IsPlatformSupportsHDRDecode",persistent:!1},IsPlatformSupportsHDRRendering:{legacyCommand:"QUERY_GFN_IS_PLATFORM_SUPPORTS_HDR_RENDERING",system:"CrimsonNative",module:"Streaming",method:"IsPlatformSupportsHDRRendering",persistent:!1}}},Nvapp:{Appdiscovery:{AppActionNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"AppDiscovery",method:"AppActionNotification",persistent:!0},InstallApp:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"AppDiscovery",method:"InstallApp",persistent:!1},UninstallApp:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"AppDiscovery",method:"UninstallApp",persistent:!1},GetAppStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"AppDiscovery",method:"GetAppStatus",persistent:!1},GetAppsStatus:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"AppDiscovery",method:"GetAppsStatus",persistent:!1},LaunchApp:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"AppDiscovery",method:"LaunchApp",persistent:!1}},Driverinstall:{InstallAsync:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverInstall",method:"InstallAsync",persistent:!1},SetState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverInstall",method:"SetState",persistent:!1},GetState:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverInstall",method:"GetState",persistent:!1},RegisterProgressNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverInstall",method:"RegisterProgressNotification",persistent:!0},RegisterFormNotification:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverInstall",method:"RegisterFormNotification",persistent:!0}},Driverupdaterecommendation:{GetDriverUpdateRecommendation:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"GetDriverUpdateRecommendation",persistent:!1},GetUserDriverTypePreference:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"GetUserDriverTypePreference",persistent:!1},SetUserDriverTypePreference:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"SetUserDriverTypePreference",persistent:!1},GetAutomaticDriverDownloadEnabled:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"GetAutomaticDriverDownloadEnabled",persistent:!1},SetAutomaticDriverDownloadEnabled:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"SetAutomaticDriverDownloadEnabled",persistent:!1},StartDriverUpdateCheck:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"StartDriverUpdateCheck",persistent:!1},RegisterDriverUpdateCheckProgressNotifications:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"RegisterDriverUpdateCheckProgressNotifications",persistent:!0},GetGRDEditorPreviewMode:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"GetGRDEditorPreviewMode",persistent:!1},GetDriverUpdateNotificationEnabled:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"GetDriverUpdateNotificationEnabled",persistent:!1},SetDriverUpdateNotificationEnabled:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverUpdateRecommendation",method:"SetDriverUpdateNotificationEnabled",persistent:!1}},Nvcplplugin:{LaunchApplication:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"LaunchApplication",persistent:!1},GetNvCplSystemInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetNvCplSystemInfo",persistent:!1},GetDriverInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetDriverInfo",persistent:!1},GetPhysicalGPUCount:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetPhysicalGPUCount",persistent:!1},GetOSName:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetOSName",persistent:!1},GetDXVersionInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetDXVersionInfo",persistent:!1},GetFeatureLevel:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetFeatureLevel",persistent:!1},GetProfileSettingsInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProfileSettingsInfo",persistent:!1},GetProfileSettingValue:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProfileSettingValue",persistent:!1},GetProfileSettingDefaultValue:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProfileSettingDefaultValue",persistent:!1},SetProfileSettingValue:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"SetProfileSettingValue",persistent:!1},ApplyProfileSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"ApplyProfileSettings",persistent:!1},GetProfileStringSettingPossibleValues:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProfileStringSettingPossibleValues",persistent:!1},GetProfileScalarSettingPossibleValues:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProfileScalarSettingPossibleValues",persistent:!1},RestoreDefaultForProfile:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"RestoreDefaultForProfile",persistent:!1},RestoreDefaultForAllProfiles:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"RestoreDefaultForAllProfiles",persistent:!1},GetProgramProfileNames:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProgramProfileNames",persistent:!1},GetProfilesAndApplicationsInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProfilesAndApplicationsInfo",persistent:!1}}},Nvcpl:{Nvcplplugin:{LaunchApplication:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"LaunchApplication",persistent:!1},GetNvCplSystemInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetNvCplSystemInfo",persistent:!1},GetDriverInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetDriverInfo",persistent:!1},GetPhysicalGPUCount:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetPhysicalGPUCount",persistent:!1},GetOSName:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetOSName",persistent:!1},GetDXVersionInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetDXVersionInfo",persistent:!1},GetFeatureLevel:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetFeatureLevel",persistent:!1},GetProfileSettingsInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProfileSettingsInfo",persistent:!1},GetProfileSettingValue:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProfileSettingValue",persistent:!1},GetProfileSettingDefaultValue:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProfileSettingDefaultValue",persistent:!1},SetProfileSettingValue:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"SetProfileSettingValue",persistent:!1},ApplyProfileSettings:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"ApplyProfileSettings",persistent:!1},GetProfileStringSettingPossibleValues:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProfileStringSettingPossibleValues",persistent:!1},GetProfileScalarSettingPossibleValues:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProfileScalarSettingPossibleValues",persistent:!1},RestoreDefaultForProfile:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"RestoreDefaultForProfile",persistent:!1},RestoreDefaultForAllProfiles:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"RestoreDefaultForAllProfiles",persistent:!1},GetProgramProfileNames:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProgramProfileNames",persistent:!1},GetProfilesAndApplicationsInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"NvCplPlugin",method:"GetProfilesAndApplicationsInfo",persistent:!1}}},Qxp:{Driverrollback:{Rollback:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverRollback",method:"Rollback",persistent:!1},RollbackInfo:{legacyCommand:"QUERY_IPC_EXTENSION_MESSAGE",system:"CrimsonNative",module:"DriverRollback",method:"RollbackInfo",persistent:!1}}},Share:A};var Gs,Bs,Vs;!function(we){let On;var on;(on=On=we.Format||(we.Format={})).text="text",on.base64="base64"}(Gs||(Gs={})),function(we){let On;var on;(on=On=we.MediaType||(we.MediaType={})).video="video",on.image="image",on.filmstrip="filmstrip"}(Bs||(Bs={})),function(we){let On;var Qe;let on,mn,Kn,We,li,Dn,Di,Ni,It,To,Ao,rn,Cr,Sr,Pr,Or,Mr,yr,br,xr,Er;(Qe=On=we.Quality||(we.Quality={})).UltraGood="UltraGood",Qe.VeryGood="VeryGood",Qe.Good="Good",Qe.Average="Average",Qe.Custom="Custom",Qe.GamecastYTLUltraGood="GamecastYTLUltraGood",Qe.GamecastYTLVeryGood="GamecastYTLVeryGood",Qe.GamecastYTLGood="GamecastYTLGood",Qe.GamecastYTLAverage="GamecastYTLAverage",Qe.GamecastUltraGood="GamecastUltraGood",Qe.GamecastVeryGood="GamecastVeryGood",Qe.GamecastGood="GamecastGood",Qe.GamecastAverage="GamecastAverage",Qe.GamecastFBLVeryGood="GamecastFBLVeryGood",Qe.GamecastFBLGood="GamecastFBLGood",Qe.GamecastFBLAverage="GamecastFBLAverage",function(Qe){Qe.In_game="In-game",Qe.Resolution_2160p_4K="2160p 4K",Qe.Resolution_1440p_HD="1440p HD",Qe.Resolution_1080p_HD="1080p HD",Qe.Resolution_720p_HD="720p HD",Qe.Resolution_480p="480p",Qe.Resolution_360p="360p",Qe.Resolution_240p="240p",Qe.Exact="Exact"}(on=we.Resolution||(we.Resolution={})),function(Qe){Qe.instantReplay="instantReplay",Qe.manualRecord="manualRecord",Qe.highlights="highlights",Qe.gear="gear"}(mn=we.SessionIds||(we.SessionIds={})),function(Qe){Qe.Always_Ask="Always Ask",Qe.Twitch="Twitch",Qe.YouTube_Live="YouTube Live",Qe.Facebook_Live="Facebook Live",Qe.Do_Not_Broadcast="Do Not Broadcast"}(Kn=we.Provider||(we.Provider={})),function(Qe){Qe.highlights="highlights",Qe.highlightsRecordVideo="highlightsRecordVideo",Qe.highlightsRecordScreenshot="highlightsRecordScreenshot"}(We=we.SdkScopeType||(we.SdkScopeType={})),function(Qe){Qe.granted="granted",Qe.mustAsk="mustAsk",Qe.denied="denied"}(li=we.SdkPermissions||(we.SdkPermissions={})),function(Qe){Qe.screenshot="screenshot",Qe.video="video"}(Dn=we.Type||(we.Type={})),function(Qe){Qe.OpenIGO="OpenIGO",Qe.OpenFreestyle="OpenFreestyle",Qe.OpenAnsel="OpenAnsel",Qe.PTT="PTT",Qe.FPS="FPS",Qe.Screenshot="Screenshot",Qe.DVRSave="DVRSave",Qe.RecordToggle="RecordToggle",Qe.BroadcastToggle="BroadcastToggle",Qe.BroadcastPauseToggle="BroadcastPauseToggle",Qe.CameraToggle="CameraToggle",Qe.OverlayToggle="OverlayToggle",Qe.CustomOverlayA="CustomOverlayA",Qe.CustomOverlayB="CustomOverlayB",Qe.CustomOverlayC="CustomOverlayC",Qe.CommentsToggle="CommentsToggle",Qe.MicToggle="MicToggle",Qe.DVRToggle="DVRToggle",Qe.FreestyleToggle="FreestyleToggle",Qe.FreestylePresentCycle="FreestylePresentCycle",Qe.FreeStyleToggleStyle1="FreeStyleToggleStyle1",Qe.FreeStyleToggleStyle2="FreeStyleToggleStyle2",Qe.FreeStyleToggleStyle3="FreeStyleToggleStyle3",Qe.NativeKeyboardInputDialog="NativeKeyboardInputDialog",Qe.ConnectGfnBroadcastToggle="ConnectGfnBroadcastToggle",Qe.StatisticsToggle="StatisticsToggle",Qe.QuitGame="QuitGame"}(Di=we.HotkeyEnum||(we.HotkeyEnum={})),function(Qe){Qe.custom="custom",Qe.customA="customA",Qe.customB="customB",Qe.customC="customC"}(Ni=we.CustomOverlayTypeEnum||(we.CustomOverlayTypeEnum={})),function(Qe){Qe.record="record",Qe.gamecast="gamecast",Qe.fps="fps",Qe.viewer="viewer",Qe.rig="rig",Qe.webcam="webcam",Qe.comments="comments"}(It=we.IndicatorEnum||(we.IndicatorEnum={})),function(Qe){Qe.small="small",Qe.medium="medium",Qe.large="large"}(To=we.OverlaySizeEnum||(we.OverlaySizeEnum={})),function(Qe){Qe.leftTop="leftTop",Qe.leftCenter="leftCenter",Qe.leftBottom="leftBottom",Qe.rightTop="rightTop",Qe.rightCenter="rightCenter",Qe.rightBottom="rightBottom",Qe.centerTop="centerTop",Qe.centerCenter="centerCenter",Qe.centerBottom="centerBottom",Qe.floatingRandom="floatingRandom",Qe.floatingBorder="floatingBorder",Qe.none="none"}(Ao=we.OverlayPositionEnum||(we.OverlayPositionEnum={})),function(Qe){Qe.on="on",Qe.off="off",Qe.alwayson="alwayson",Qe.ptt="ptt"}(rn=we.MicModeEnum||(we.MicModeEnum={})),function(Qe){Qe.manual="manual",Qe.dvr="dvr",Qe.gameCast="gameCast",Qe.highlight="highlight",Qe.gearRecord="gearRecord",Qe.gearHighlight="gearHighlight",Qe.lastMode="lastMode",Qe.screenshot="screenshot"}(Cr=we.CaptureModeEnum||(we.CaptureModeEnum={})),function(Qe){Qe[Qe.GXP_Success_Ok=0]="GXP_Success_Ok",Qe[Qe.GXP_Success_NoError=1]="GXP_Success_NoError",Qe[Qe.GXP_Error_NotImplemented=-2147467263]="GXP_Error_NotImplemented",Qe[Qe.GXP_Error_NoInterface=-2147467262]="GXP_Error_NoInterface",Qe[Qe.GXP_Error_InvalidPointer=-2147467261]="GXP_Error_InvalidPointer",Qe[Qe.GXP_Error_Abort=-2147467260]="GXP_Error_Abort",Qe[Qe.GXP_Error_Fail=-2147467259]="GXP_Error_Fail",Qe[Qe.GXP_Error_Unexpected=-2147468113]="GXP_Error_Unexpected",Qe[Qe.GXP_Error_FileNotFound=-2147024894]="GXP_Error_FileNotFound",Qe[Qe.GXP_Error_PathNotFound=-2147024893]="GXP_Error_PathNotFound",Qe[Qe.GXP_Error_InvalidHandle=-2147024890]="GXP_Error_InvalidHandle",Qe[Qe.GXP_Error_InvalidData=-2147024883]="GXP_Error_InvalidData",Qe[Qe.GXP_Error_OutOfMemory=-2147024882]="GXP_Error_OutOfMemory",Qe[Qe.GXP_Error_InvalidArg=-2147024809]="GXP_Error_InvalidArg",Qe[Qe.GXP_Error_TimeOut=-2147023436]="GXP_Error_TimeOut",Qe[Qe.GXP_Error_FileTooLarge=-2147024673]="GXP_Error_FileTooLarge",Qe[Qe.GXP_Error_MaxStartAttempts=-2146959359]="GXP_Error_MaxStartAttempts",Qe[Qe.ShadowPlay_OSC_ERR_GENERIC=-1]="ShadowPlay_OSC_ERR_GENERIC",Qe[Qe.ShadowPlay_OSC_ERR_INVALID_VER=-2]="ShadowPlay_OSC_ERR_INVALID_VER",Qe[Qe.ShadowPlay_OSC_ERR_CLIENT_UNINITIALIZED=-3]="ShadowPlay_OSC_ERR_CLIENT_UNINITIALIZED",Qe[Qe.ShadowPlay_OSC_ERR_SERVER_NOT_CONNECTED=-4]="ShadowPlay_OSC_ERR_SERVER_NOT_CONNECTED",Qe[Qe.ShadowPlay_OSC_ERR_SERVER_TIME_OUT=-5]="ShadowPlay_OSC_ERR_SERVER_TIME_OUT",Qe[Qe.ShadowPlay_OSC_ERR_SERVER_CANNOT_CONNECT=-6]="ShadowPlay_OSC_ERR_SERVER_CANNOT_CONNECT",Qe[Qe.ShadowPlay_OSC_ERR_STREAM_NOT_FOUND=-7]="ShadowPlay_OSC_ERR_STREAM_NOT_FOUND",Qe[Qe.ShadowPlay_OSC_ERR_INVALID_FORMAT=-8]="ShadowPlay_OSC_ERR_INVALID_FORMAT",Qe[Qe.ShadowPlay_OSC_ERR_INVALID_PARAMETERS=-9]="ShadowPlay_OSC_ERR_INVALID_PARAMETERS",Qe[Qe.ShadowPlay_OSC_ERR_DX=-10]="ShadowPlay_OSC_ERR_DX",Qe[Qe.ShadowPlay_OSC_ERR_MMF=-11]="ShadowPlay_OSC_ERR_MMF",Qe[Qe.ShadowPlay_OSC_ERR_INSUFFICIENT_BUFFER=-12]="ShadowPlay_OSC_ERR_INSUFFICIENT_BUFFER",Qe[Qe.ShadowPlay_OSC_ERR_NO_IMPLEMENTATION=-13]="ShadowPlay_OSC_ERR_NO_IMPLEMENTATION",Qe[Qe.ShadowPlay_OSC_ERR_STREAM_LOCKED=-14]="ShadowPlay_OSC_ERR_STREAM_LOCKED",Qe[Qe.ShadowPlay_OSC_ERR_ALREADY_REGISTERED=-15]="ShadowPlay_OSC_ERR_ALREADY_REGISTERED",Qe[Qe.ShadowPlay_OSC_ERR_ALREADY_CREATED=-16]="ShadowPlay_OSC_ERR_ALREADY_CREATED",Qe[Qe.ShadowPlay_OSC_ERR_PROTOBUF=-17]="ShadowPlay_OSC_ERR_PROTOBUF",Qe[Qe.ShadowPlay_OSC_ERR_NOTAVAILABLE=-18]="ShadowPlay_OSC_ERR_NOTAVAILABLE",Qe[Qe.ShadowPlay_OSC_ERR_OUT_OF_MEMORY=-19]="ShadowPlay_OSC_ERR_OUT_OF_MEMORY",Qe[Qe.ShadowPlay_OSC_ERR_ABANDONED=-20]="ShadowPlay_OSC_ERR_ABANDONED",Qe[Qe.ShadowPlay_OSC_ERR_INVALID_CALL=-21]="ShadowPlay_OSC_ERR_INVALID_CALL",Qe[Qe.ShadowPlay_OSC_ERR_NO_VALID_GAME_RUNNING=-22]="ShadowPlay_OSC_ERR_NO_VALID_GAME_RUNNING",Qe[Qe.ShadowPlay_E_SERVER_NOT_RUNNING=-2147220959]="ShadowPlay_E_SERVER_NOT_RUNNING",Qe[Qe.ShadowPlay_E_UNKNOWN_PROP_NAME=-2147220958]="ShadowPlay_E_UNKNOWN_PROP_NAME",Qe[Qe.ShadowPlay_E_INVALID_PROP_FORMAT=-2147220957]="ShadowPlay_E_INVALID_PROP_FORMAT",Qe[Qe.ShadowPlay_E_INVALID_PROP_VALUE=-2147220956]="ShadowPlay_E_INVALID_PROP_VALUE",Qe[Qe.ShadowPlay_E_UNKNOWN_CMD_NAME=-2147220955]="ShadowPlay_E_UNKNOWN_CMD_NAME",Qe[Qe.ShadowPlay_E_INVALID_CMD_FORMAT=-2147220954]="ShadowPlay_E_INVALID_CMD_FORMAT",Qe[Qe.ShadowPlay_E_INVALID_CMD_VERSION=-2147220953]="ShadowPlay_E_INVALID_CMD_VERSION",Qe[Qe.ShadowPlay_E_NOT_READY=-2147220952]="ShadowPlay_E_NOT_READY",Qe[Qe.ShadowPlay_E_SERVER_IN_EXCLUSIVE_MODE=-2147220951]="ShadowPlay_E_SERVER_IN_EXCLUSIVE_MODE",Qe[Qe.ShadowPlay_E_SERVER_IN_GAMECAST_MODE=-2147220950]="ShadowPlay_E_SERVER_IN_GAMECAST_MODE",Qe[Qe.ShadowPlay_E_CANNOT_CLAIM_H264_LICENSE=-2147220949]="ShadowPlay_E_CANNOT_CLAIM_H264_LICENSE",Qe[Qe.ShadowPlay_E_FAIL_SYSTEM_REQUIREMENTS_OS=-2147220948]="ShadowPlay_E_FAIL_SYSTEM_REQUIREMENTS_OS",Qe[Qe.ShadowPlay_E_FAIL_SYSTEM_REQUIREMENTS_RAM=-2147220947]="ShadowPlay_E_FAIL_SYSTEM_REQUIREMENTS_RAM",Qe[Qe.ShadowPlay_E_FAIL_SYSTEM_REQUIREMENTS_GPU=-2147220946]="ShadowPlay_E_FAIL_SYSTEM_REQUIREMENTS_GPU",Qe[Qe.ShadowPlay_E_FAIL_ENABLE_SHADOWPLAY=-2147220945]="ShadowPlay_E_FAIL_ENABLE_SHADOWPLAY",Qe[Qe.ShadowPlayE_FAIL_ENABLE_NVFBC=-2147220944]="ShadowPlayE_FAIL_ENABLE_NVFBC",Qe[Qe.ShadowPlay_E_FAIL_SYSTEM_REQUIREMENTS_DRIVER=-2147220943]="ShadowPlay_E_FAIL_SYSTEM_REQUIREMENTS_DRIVER",Qe[Qe.ShadowPlay_E_FAIL_ENABLE_NVFBC_TIMEOUT=-2147220942]="ShadowPlay_E_FAIL_ENABLE_NVFBC_TIMEOUT",Qe[Qe.ShadowPlay_E_FAIL_ENABLE_OSC=-2147220941]="ShadowPlay_E_FAIL_ENABLE_OSC",Qe[Qe.ShadowPlay_E_FAIL_ENABLE_HELPER=-2147220940]="ShadowPlay_E_FAIL_ENABLE_HELPER",Qe[Qe.ShadowPlay_E_FAIL_NO_GALLERY_SPACE=-2147220926]="ShadowPlay_E_FAIL_NO_GALLERY_SPACE",Qe[Qe.ShadowPlay_E_FAIL_NO_DISC_SPACE=-2147220938]="ShadowPlay_E_FAIL_NO_DISC_SPACE",Qe[Qe.ShadowPlay_E_FAIL_CAPTURE_DISABLED=-2147220937]="ShadowPlay_E_FAIL_CAPTURE_DISABLED",Qe[Qe.ShadowPlay_E_BOUNDS=-2147483637]="ShadowPlay_E_BOUNDS",Qe[Qe.ShadowPlay_E_NOT_VALID_STATE=-2147019873]="ShadowPlay_E_NOT_VALID_STATE",Qe[Qe.ShadowPlay_E_UNEXPECTED=-2147418113]="ShadowPlay_E_UNEXPECTED",Qe[Qe.GXP_Error_HotkeyInUse=-2146897916]="GXP_Error_HotkeyInUse"}(Sr=we.InternalErrorCodeEnum||(we.InternalErrorCodeEnum={})),function(Qe){Qe.mic="mic",Qe.webcam="webcam"}(Pr=we.DeviceTypeEnum||(we.DeviceTypeEnum={})),function(Qe){Qe.plugged_in="plugged_in",Qe.plugged_out="plugged_out",Qe.enabled="enabled",Qe.disabled="disabled"}(Or=we.DeviceStateTypeEnum||(we.DeviceStateTypeEnum={})),function(Qe){Qe.available="available",Qe.started="started",Qe.auto_pause="auto_pause",Qe.user_pause="user_pause",Qe.user_pause_auto_pause="user_pause_auto_pause",Qe.last="last",Qe.error="error",Qe.saved="saved",Qe.restarted_notifier="restarted_notifier",Qe.resumed_notifier="resumed_notifier",Qe.notifier_none="notifier_none",Qe.invalid="invalid",Qe.enabled="enabled",Qe.disabled="disabled"}(Mr=we.RecordingState||(we.RecordingState={})),function(Qe){Qe.capture="capture",Qe.in_focus="in-focus"}(yr=we.AppType||(we.AppType={})),function(Qe){Qe.off="off",Qe.game="game",Qe.mic="mic",Qe.both="both"}(br=we.Mode||(we.Mode={})),function(Qe){Qe.main="main",Qe.permission="permission",Qe.highlightsSummary="highlightsSummary"}(xr=we.State||(we.State={})),function(Qe){Qe.none="none",Qe.single="single",Qe.multiple="multiple"}(Er=we.SupportType||(we.SupportType={}))}(Vs||(Vs={}));var Hs,ls=(()=>{return(we=ls||(ls={})).Forager=Gs,we.Gear=Bs,we.Shareserver=Vs,ls;var we})();!function(we){let On;var on;(on=On=we.RollbackOptionsEnum||(we.RollbackOptionsEnum={}))[on.Unknown=0]="Unknown",on[on.NoUI=1]="NoUI",on[on.RollbackUI=2]="RollbackUI"}(Hs||(Hs={}));var Zs,cs=(()=>((cs||(cs={})).Driverrollback=Hs,cs))();!function(we){let On;var ee;let on,mn,Kn,We,li,Dn,Di,Ni,It,To,Ao,rn,Cr,Sr,Pr,Or,Mr,yr,br,xr,Er,Qe,la,ca,da,ga,ha,ua,ma,pa,fa,va,_a;(ee=On=we.BusType||(we.BusType={}))[ee.Bus_Unknown=0]="Bus_Unknown",ee[ee.Bus_AGP=1]="Bus_AGP",ee[ee.Bus_PCI=2]="Bus_PCI",ee[ee.Bus_FPCI=3]="Bus_FPCI",ee[ee.Bus_PCI_EXPRESS=4]="Bus_PCI_EXPRESS",ee[ee.Bus_PCI_EXPRESS_GEN2=5]="Bus_PCI_EXPRESS_GEN2",ee[ee.Bus_PCI_EXPRESS_GEN3=6]="Bus_PCI_EXPRESS_GEN3",ee[ee.Bus_AXI=7]="Bus_AXI",function(ee){ee[ee.Unknown=0]="Unknown",ee[ee.SDRAM=1]="SDRAM",ee[ee.DDR1=2]="DDR1",ee[ee.DDR2=3]="DDR2",ee[ee.GDDR2=4]="GDDR2",ee[ee.GDDR3=5]="GDDR3",ee[ee.GDDR4=6]="GDDR4",ee[ee.DDR3=7]="DDR3",ee[ee.GDDR5=8]="GDDR5",ee[ee.GDDR5X=9]="GDDR5X",ee[ee.HBM1=10]="HBM1",ee[ee.HBM2=11]="HBM2",ee[ee.SDDR4=12]="SDDR4",ee[ee.GDDR6=14]="GDDR6"}(on=we.RamType||(we.RamType={})),function(ee){ee[ee.NVCPLAPI_INSTALLED_DRIVERTYPE_INVALID=-1]="NVCPLAPI_INSTALLED_DRIVERTYPE_INVALID",ee[ee.NVCPLAPI_INSTALLED_DRIVERTYPE_CRD=0]="NVCPLAPI_INSTALLED_DRIVERTYPE_CRD",ee[ee.NVCPLAPI_INSTALLED_DRIVERTYPE_GRD=1]="NVCPLAPI_INSTALLED_DRIVERTYPE_GRD",ee[ee.NVCPLAPI_INSTALLED_DRIVERTYPE_QNF=2]="NVCPLAPI_INSTALLED_DRIVERTYPE_QNF",ee[ee.NVCPLAPI_INSTALLED_DRIVERTYPE_QOD=3]="NVCPLAPI_INSTALLED_DRIVERTYPE_QOD"}(mn=we.DriverBrandType||(we.DriverBrandType={})),function(ee){ee[ee.type_invalid=-1]="type_invalid",ee[ee.type_integer=0]="type_integer",ee[ee.type_string=1]="type_string",ee[ee.type_boolean=2]="type_boolean"}(Kn=we.ProfileSettingType||(we.ProfileSettingType={})),function(ee){ee[ee.NVCPLAPI_VALUE_ANIS_APP_CONTROLLED=1048576]="NVCPLAPI_VALUE_ANIS_APP_CONTROLLED",ee[ee.NVCPLAPI_VALUE_ANIS_OFF=1]="NVCPLAPI_VALUE_ANIS_OFF",ee[ee.NVCPLAPI_VALUE_ANIS_2=2]="NVCPLAPI_VALUE_ANIS_2",ee[ee.NVCPLAPI_VALUE_ANIS_4=4]="NVCPLAPI_VALUE_ANIS_4",ee[ee.NVCPLAPI_VALUE_ANIS_8=8]="NVCPLAPI_VALUE_ANIS_8",ee[ee.NVCPLAPI_VALUE_ANIS_16=16]="NVCPLAPI_VALUE_ANIS_16"}(We=we.AnisoTropicFilteringValue||(we.AnisoTropicFilteringValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_PERFORMANCE_HIQUAL=0]="NVCPLAPI_VALUE_PERFORMANCE_HIQUAL",ee[ee.NVCPLAPI_VALUE_PERFORMANCE_QUAL=1]="NVCPLAPI_VALUE_PERFORMANCE_QUAL",ee[ee.NVCPLAPI_VALUE_PERFORMANCE_PERF=2]="NVCPLAPI_VALUE_PERFORMANCE_PERF",ee[ee.NVCPLAPI_VALUE_PERFORMANCE_HIPERF=3]="NVCPLAPI_VALUE_PERFORMANCE_HIPERF"}(li=we.TextureFilteringQualityValue||(we.TextureFilteringQualityValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_TRI_OPT_ON=0]="NVCPLAPI_VALUE_TRI_OPT_ON",ee[ee.NVCPLAPI_VALUE_TRI_OPT_OFF=1]="NVCPLAPI_VALUE_TRI_OPT_OFF"}(Dn=we.TextureFilteringTrilinearValue||(we.TextureFilteringTrilinearValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_VSYNC_APPCONTROLLED=0]="NVCPLAPI_VALUE_VSYNC_APPCONTROLLED",ee[ee.NVCPLAPI_VALUE_VSYNC_FORCEOFF=1]="NVCPLAPI_VALUE_VSYNC_FORCEOFF",ee[ee.NVCPLAPI_VALUE_VSYNC_FORCEON=2]="NVCPLAPI_VALUE_VSYNC_FORCEON",ee[ee.NVCPLAPI_VALUE_VSYNC_FORCEON_INTERVAL2=3]="NVCPLAPI_VALUE_VSYNC_FORCEON_INTERVAL2",ee[ee.NVCPLAPI_VALUE_VSYNC_AUTO=4]="NVCPLAPI_VALUE_VSYNC_AUTO",ee[ee.NVCPLAPI_VALUE_VSYNC_AUTO_INTERVAL2=5]="NVCPLAPI_VALUE_VSYNC_AUTO_INTERVAL2",ee[ee.NVCPLAPI_VALUE_VSYNC_SMOOTH=6]="NVCPLAPI_VALUE_VSYNC_SMOOTH",ee[ee.NVCPLAPI_VALUE_VSYNC_VRR_ENABLE=8]="NVCPLAPI_VALUE_VSYNC_VRR_ENABLE",ee[ee.NVCPLAPI_VALUE_VSYNC_VRR_NONE=9]="NVCPLAPI_VALUE_VSYNC_VRR_NONE",ee[ee.NVCPLAPI_VALUE_VSYNC_VIRTUAL=10]="NVCPLAPI_VALUE_VSYNC_VIRTUAL"}(Di=we.VerticalSyncValue||(we.VerticalSyncValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_OGL_THREADING_AUTO=0]="NVCPLAPI_VALUE_OGL_THREADING_AUTO",ee[ee.NVCPLAPI_VALUE_OGL_THREADING_ON=1]="NVCPLAPI_VALUE_OGL_THREADING_ON",ee[ee.NVCPLAPI_VALUE_OGL_THREADING_OFF=2]="NVCPLAPI_VALUE_OGL_THREADING_OFF"}(Ni=we.ThreadedOptimizationValue||(we.ThreadedOptimizationValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_OGL_OVERLAY_SUPPORT_OFF=0]="NVCPLAPI_VALUE_OGL_OVERLAY_SUPPORT_OFF",ee[ee.NVCPLAPI_VALUE_OGL_OVERLAY_SUPPORT_ON=1]="NVCPLAPI_VALUE_OGL_OVERLAY_SUPPORT_ON"}(It=we.EnableOverlayValue||(we.EnableOverlayValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_OGL_OVERLAY_NONE=0]="NVCPLAPI_VALUE_OGL_OVERLAY_NONE",ee[ee.NVCPLAPI_VALUE_OGL_OVERLAY_CI=1]="NVCPLAPI_VALUE_OGL_OVERLAY_CI",ee[ee.NVCPLAPI_VALUE_OGL_OVERLAY_RGBA=2]="NVCPLAPI_VALUE_OGL_OVERLAY_RGBA",ee[ee.NVCPLAPI_VALUE_OGL_OVERLAY_CI_AND_RGBA=3]="NVCPLAPI_VALUE_OGL_OVERLAY_CI_AND_RGBA"}(To=we.ExportedpixeltypesValue||(we.ExportedpixeltypesValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_SHADERDISKCACHE_OFF=0]="NVCPLAPI_VALUE_SHADERDISKCACHE_OFF",ee[ee.NVCPLAPI_VALUE_SHADERDISKCACHE_ON=1]="NVCPLAPI_VALUE_SHADERDISKCACHE_ON"}(Ao=we.ShaderCacheValue||(we.ShaderCacheValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_PREFERRED_REFRATE_APP_CONTROL=0]="NVCPLAPI_VALUE_PREFERRED_REFRATE_APP_CONTROL",ee[ee.NVCPLAPI_VALUE_PREFERRED_REFRATE_OVERRIDE=1]="NVCPLAPI_VALUE_PREFERRED_REFRATE_OVERRIDE"}(rn=we.PreferredRefreshRateValue||(we.PreferredRefreshRateValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_POWER_MGMT_MODE_ADAPTIVE=0]="NVCPLAPI_VALUE_POWER_MGMT_MODE_ADAPTIVE",ee[ee.NVCPLAPI_VALUE_POWER_MGMT_MODE_MAX=1]="NVCPLAPI_VALUE_POWER_MGMT_MODE_MAX",ee[ee.NVCPLAPI_VALUE_POWER_MGMT_MODE_DRIVER_CONTROLLED=2]="NVCPLAPI_VALUE_POWER_MGMT_MODE_DRIVER_CONTROLLED",ee[ee.NVCPLAPI_VALUE_POWER_MGMT_MODE_PREFER_CONSISTENT_PERFORMANCE=3]="NVCPLAPI_VALUE_POWER_MGMT_MODE_PREFER_CONSISTENT_PERFORMANCE",ee[ee.NVCPLAPI_VALUE_POWER_MGMT_MODE_OPTIMAL_POWER=5]="NVCPLAPI_VALUE_POWER_MGMT_MODE_OPTIMAL_POWER"}(Cr=we.PowerManagementModeValue||(we.PowerManagementModeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_SHARPENING_TOGGLE_DISABLED=0]="NVCPLAPI_VALUE_SHARPENING_TOGGLE_DISABLED",ee[ee.NVCPLAPI_VALUE_SHARPENING_TOGGLE_ENABLED=1]="NVCPLAPI_VALUE_SHARPENING_TOGGLE_ENABLED"}(Sr=we.ImageSharpeningToggleValue||(we.ImageSharpeningToggleValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_QUIET_MODE_FPS_OFF=0]="NVCPLAPI_VALUE_QUIET_MODE_FPS_OFF",ee[ee.NVCPLAPI_VALUE_QUIET_MODE_FPS_ON=1]="NVCPLAPI_VALUE_QUIET_MODE_FPS_ON"}(Pr=we.WhisperModeProgramValue||(we.WhisperModeProgramValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_D3D_SHIM_RENDERING_MODE_INTEGRATED=0]="NVCPLAPI_VALUE_D3D_SHIM_RENDERING_MODE_INTEGRATED",ee[ee.NVCPLAPI_VALUE_D3D_SHIM_RENDERING_MODE_GPLEX=1]="NVCPLAPI_VALUE_D3D_SHIM_RENDERING_MODE_GPLEX",ee[ee.NVCPLAPI_VALUE_D3D_SHIM_RENDERING_MODE_AUTO=16]="NVCPLAPI_VALUE_D3D_SHIM_RENDERING_MODE_AUTO"}(Or=we.PreferredGraphicsProcessorValue||(we.PreferredGraphicsProcessorValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_SILK_SMOOTHNESS_LOW=0]="NVCPLAPI_VALUE_SILK_SMOOTHNESS_LOW",ee[ee.NVCPLAPI_VALUE_SILK_SMOOTHNESS_MEDIUM=1]="NVCPLAPI_VALUE_SILK_SMOOTHNESS_MEDIUM",ee[ee.NVCPLAPI_VALUE_SILK_SMOOTHNESS_HIGH=2]="NVCPLAPI_VALUE_SILK_SMOOTHNESS_HIGH",ee[ee.NVCPLAPI_VALUE_SILK_SMOOTHNESS_ULTRA=3]="NVCPLAPI_VALUE_SILK_SMOOTHNESS_ULTRA",ee[ee.NVCPLAPI_VALUE_SILK_SMOOTHNESS_OFF=4]="NVCPLAPI_VALUE_SILK_SMOOTHNESS_OFF"}(Mr=we.SilkSmoothnessValue||(we.SilkSmoothnessValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_LATENCY_BEST_PERFORMANCE=0]="NVCPLAPI_VALUE_LATENCY_BEST_PERFORMANCE",ee[ee.NVCPLAPI_VALUE_LATENCY_LOW_LATENCY=1]="NVCPLAPI_VALUE_LATENCY_LOW_LATENCY",ee[ee.NVCPLAPI_VALUE_LATENCY_LOWEST_LATENCY=2]="NVCPLAPI_VALUE_LATENCY_LOWEST_LATENCY"}(yr=we.LowLatencyModeValue||(we.LowLatencyModeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_AUTOVRS_OFF=0]="NVCPLAPI_VALUE_AUTOVRS_OFF",ee[ee.NVCPLAPI_VALUE_AUTOVRS_FORCED=1]="NVCPLAPI_VALUE_AUTOVRS_FORCED",ee[ee.NVCPLAPI_VALUE_AUTOVRS_ADAPTIVE=2]="NVCPLAPI_VALUE_AUTOVRS_ADAPTIVE"}(br=we.VirtualRealityVrssValue||(we.VirtualRealityVrssValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_AUTOFL_OFF=0]="NVCPLAPI_VALUE_AUTOFL_OFF",ee[ee.NVCPLAPI_VALUE_AUTOFL_ON=1]="NVCPLAPI_VALUE_AUTOFL_ON"}(xr=we.MaxqDynamicBoostValue||(we.MaxqDynamicBoostValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_DISPLAYMUX_INDICATOR_OFF=0]="NVCPLAPI_VALUE_DISPLAYMUX_INDICATOR_OFF",ee[ee.NVCPLAPI_VALUE_DISPLAYMUX_INDICATOR_ON=1]="NVCPLAPI_VALUE_DISPLAYMUX_INDICATOR_ON"}(Er=we.AutoDisplaySwitchingValue||(we.AutoDisplaySwitchingValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_QUIET_MODE_ALLOW_DISABLED=0]="NVCPLAPI_VALUE_QUIET_MODE_ALLOW_DISABLED",ee[ee.NVCPLAPI_VALUE_QUIET_MODE_ALLOW_ENABLED=1]="NVCPLAPI_VALUE_QUIET_MODE_ALLOW_ENABLED"}(Qe=we.WhisperModeGlobalValue||(we.WhisperModeGlobalValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_GSYNC_ON=0]="NVCPLAPI_VALUE_GSYNC_ON",ee[ee.NVCPLAPI_VALUE_GSYNC_FORCE_OFF=1]="NVCPLAPI_VALUE_GSYNC_FORCE_OFF",ee[ee.NVCPLAPI_VALUE_VRR_OFF=2]="NVCPLAPI_VALUE_VRR_OFF",ee[ee.NVCPLAPI_VALUE_ULMB_ON=3]="NVCPLAPI_VALUE_ULMB_ON",ee[ee.NVCPLAPI_VALUE_FIXED_REFRESH=4]="NVCPLAPI_VALUE_FIXED_REFRESH"}(la=we.MonitorTechnologyValue||(we.MonitorTechnologyValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_POWER_MGMT_PANEL_OFF=0]="NVCPLAPI_VALUE_POWER_MGMT_PANEL_OFF",ee[ee.NVCPLAPI_VALUE_POWER_MGMT_PANEL_SELF_REFRESH_MODE=1]="NVCPLAPI_VALUE_POWER_MGMT_PANEL_SELF_REFRESH_MODE"}(ca=we.PowerManagementPanelValue||(we.PowerManagementPanelValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_ENABLE_OGL_STEREO_OFF=0]="NVCPLAPI_VALUE_ENABLE_OGL_STEREO_OFF",ee[ee.NVCPLAPI_VALUE_ENABLE_OGL_STEREO_ON=1]="NVCPLAPI_VALUE_ENABLE_OGL_STEREO_ON"}(da=we.StereoEnableValue||(we.StereoEnableValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_MODE_DIN=1]="NVCPLAPI_VALUE_STEREO_DISPLAY_MODE_DIN",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_MODE_DIN_NV_IR=2]="NVCPLAPI_VALUE_STEREO_DISPLAY_MODE_DIN_NV_IR",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_MODE_DP_INBAND=3]="NVCPLAPI_VALUE_STEREO_DISPLAY_MODE_DP_INBAND",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_GENERIC=4]="NVCPLAPI_VALUE_STEREO_DISPLAY_GENERIC",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_GENERIC_NV_IR=5]="NVCPLAPI_VALUE_STEREO_DISPLAY_GENERIC_NV_IR",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_DDC_GLASSES=6]="NVCPLAPI_VALUE_STEREO_DISPLAY_DDC_GLASSES",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_NV_CLONE=7]="NVCPLAPI_VALUE_STEREO_DISPLAY_NV_CLONE",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_NV_CLONE_DLP=8]="NVCPLAPI_VALUE_STEREO_DISPLAY_NV_CLONE_DLP",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_BLUELINE=9]="NVCPLAPI_VALUE_STEREO_DISPLAY_BLUELINE",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_VERTICAL_INTERLACE=10]="NVCPLAPI_VALUE_STEREO_DISPLAY_VERTICAL_INTERLACE",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_COLOR_INTERLEAVE=11]="NVCPLAPI_VALUE_STEREO_DISPLAY_COLOR_INTERLEAVE",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_HORIZONTAL_INTERLACE=12]="NVCPLAPI_VALUE_STEREO_DISPLAY_HORIZONTAL_INTERLACE",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_SUBFIELD=13]="NVCPLAPI_VALUE_STEREO_DISPLAY_SUBFIELD",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_SIDEFIELD=14]="NVCPLAPI_VALUE_STEREO_DISPLAY_SIDEFIELD",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_SEEFRONT=15]="NVCPLAPI_VALUE_STEREO_DISPLAY_SEEFRONT",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP=16]="NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP_NV_IR=17]="NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP_NV_IR",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP_INV=18]="NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP_INV",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP_INV_NV_IR=19]="NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP_INV_NV_IR",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_TRIDELITY_SL_SV=20]="NVCPLAPI_VALUE_STEREO_DISPLAY_TRIDELITY_SL_SV",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_TRIDELITY_MV=21]="NVCPLAPI_VALUE_STEREO_DISPLAY_TRIDELITY_MV",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_PLANAR_MIRROR=22]="NVCPLAPI_VALUE_STEREO_DISPLAY_PLANAR_MIRROR"}(ga=we.StereoDisplayModeValue||(we.StereoDisplayModeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_ENABLE_OGL_SWAP_EYES_OFF=0]="NVCPLAPI_VALUE_ENABLE_OGL_SWAP_EYES_OFF",ee[ee.NVCPLAPI_VALUE_ENABLE_OGL_SWAP_EYES_ON=1]="NVCPLAPI_VALUE_ENABLE_OGL_SWAP_EYES_ON"}(ha=we.StereoSwapEyeValue||(we.StereoSwapEyeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_STEREO_SWAP_MODE_APPLICATION_CONTROL=0]="NVCPLAPI_VALUE_STEREO_SWAP_MODE_APPLICATION_CONTROL",ee[ee.NVCPLAPI_VALUE_PER_EYE=1]="NVCPLAPI_VALUE_PER_EYE",ee[ee.NVCPLAPI_VALUE_PER_EYE_PAIR=2]="NVCPLAPI_VALUE_PER_EYE_PAIR"}(ua=we.StereoSwapModeValue||(we.StereoSwapModeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_AA_APPCONTROL_OFF=0]="NVCPLAPI_VALUE_AA_APPCONTROL_OFF",ee[ee.NVCPLAPI_VALUE_AA_APPCONTROL_ON=1]="NVCPLAPI_VALUE_AA_APPCONTROL_ON",ee[ee.NVCPLAPI_VALUE_AA_APPCONTROL_ENHANCE=2]="NVCPLAPI_VALUE_AA_APPCONTROL_ENHANCE",ee[ee.NVCPLAPI_VALUE_AA_APPCONTROL_FORCE_OFF=3]="NVCPLAPI_VALUE_AA_APPCONTROL_FORCE_OFF"}(ma=we.AntialiasingModeValue||(we.AntialiasingModeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_MGPU_AUTORENDER=0]="NVCPLAPI_VALUE_MGPU_AUTORENDER",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_AFR_SFR=1]="NVCPLAPI_VALUE_MGPU_FORCE_AFR_SFR",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_SFR=2]="NVCPLAPI_VALUE_MGPU_FORCE_SFR",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_2_AFR=3]="NVCPLAPI_VALUE_MGPU_FORCE_2_AFR",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_SINGLE=4]="NVCPLAPI_VALUE_MGPU_FORCE_SINGLE",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_4_AFR=5]="NVCPLAPI_VALUE_MGPU_FORCE_4_AFR",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_3_AFR=6]="NVCPLAPI_VALUE_MGPU_FORCE_3_AFR",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_2_AFR2=61443]="NVCPLAPI_VALUE_MGPU_FORCE_2_AFR2",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_3_AFR2=61445]="NVCPLAPI_VALUE_MGPU_FORCE_3_AFR2",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_4_AFR2=61446]="NVCPLAPI_VALUE_MGPU_FORCE_4_AFR2"}(pa=we.SliMultiGpuRenderingModeValue||(we.SliMultiGpuRenderingModeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_OGL_DEEP_COLOR_DISABLE=0]="NVCPLAPI_VALUE_OGL_DEEP_COLOR_DISABLE",ee[ee.NVCPLAPI_VALUE_OGL_DEEP_COLOR_ENABLE=1]="NVCPLAPI_VALUE_OGL_DEEP_COLOR_ENABLE"}(fa=we.DeepColorFor3DApplicationsValue||(we.DeepColorFor3DApplicationsValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_AA_METHOD_NONE=0]="NVCPLAPI_VALUE_AA_METHOD_NONE",ee[ee.NVCPLAPI_VALUE_AA_METHOD_APP_CONTROLLED=1048576]="NVCPLAPI_VALUE_AA_METHOD_APP_CONTROLLED",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MULTISAMPLE_2X_DIAGONAL=14]="NVCPLAPI_VALUE_AA_METHOD_MULTISAMPLE_2X_DIAGONAL",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MULTISAMPLE_4X=16]="NVCPLAPI_VALUE_AA_METHOD_MULTISAMPLE_4X",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_8SX=24]="NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_8SX",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MULTISAMPLE_8X=25]="NVCPLAPI_VALUE_AA_METHOD_MULTISAMPLE_8X",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_16X=26]="NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_16X",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_32X=41]="NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_32X",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_64X=42]="NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_64X",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_128X=43]="NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_128X"}(va=we.AntialiasingSettingValue||(we.AntialiasingSettingValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_OFF=0]="NVCPLAPI_VALUE_TRANSPARENCY_AA_OFF",ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_MULTI_SAMPLING=3]="NVCPLAPI_VALUE_TRANSPARENCY_AA_MULTI_SAMPLING",ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_SUPER_SAMPLING=5]="NVCPLAPI_VALUE_TRANSPARENCY_AA_SUPER_SAMPLING",ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_1X=1]="NVCPLAPI_VALUE_TRANSPARENCY_AA_1X",ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_2X=2]="NVCPLAPI_VALUE_TRANSPARENCY_AA_2X",ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_4X=4]="NVCPLAPI_VALUE_TRANSPARENCY_AA_4X",ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_8X=8]="NVCPLAPI_VALUE_TRANSPARENCY_AA_8X"}(_a=we.AntialiasingTransparencyValue||(we.AntialiasingTransparencyValue={}))}(Zs||(Zs={}));var Ws,zs,Ks,$s,ds=(()=>((ds||(ds={})).Nvcplplugin=Zs,ds))();!function(we){let On;var We;let on,mn,Kn;(We=On=we.ActionStatusEnum||(we.ActionStatusEnum={}))[We.ActionStarted=0]="ActionStarted",We[We.ActionRunning=1]="ActionRunning",We[We.ActionSuccess=2]="ActionSuccess",We[We.ActionFailure=3]="ActionFailure",We[We.ActionUnknown=4]="ActionUnknown",function(We){We[We.Success=0]="Success",We[We.Failure=1]="Failure",We[We.Unknown=2]="Unknown"}(on=we.ExeLaunchStatusEnum||(we.ExeLaunchStatusEnum={})),function(We){We[We.NotInstalled=0]="NotInstalled",We[We.Installed=1]="Installed"}(mn=we.Status||(we.Status={})),function(We){We[We.Install=0]="Install",We[We.Uninstall=1]="Uninstall"}(Kn=we.Action||(we.Action={}))}(Ws||(Ws={})),function(we){let On;var We;let on,mn,Kn;(We=On=we.ErrorCodeEnum||(we.ErrorCodeEnum={}))[We.NoError=0]="NoError",We[We.GeneralError=-505409537]="GeneralError",We[We.InvalidObject=-505413631]="InvalidObject",We[We.InsufficientArguments=-505413630]="InsufficientArguments",We[We.InvalidParameters=-505413629]="InvalidParameters",We[We.PropertyMissing=-505413628]="PropertyMissing",We[We.InvalidFormat=-505413627]="InvalidFormat",We[We.EmptyValue=-505413626]="EmptyValue",We[We.FileNotFound=-505413622]="FileNotFound",We[We.PathNotFound=-505413621]="PathNotFound",We[We.ProcessingPreviousCall=505413620]="ProcessingPreviousCall",We[We.InstallerAlreadyRunning=-505413619]="InstallerAlreadyRunning",We[We.MessagingChannel=-505413618]="MessagingChannel",We[We.ExtractedNotFound=-505413610]="ExtractedNotFound",We[We.InstallerExeNotFound=-505413608]="InstallerExeNotFound",We[We.GfeExperienceKeyNotFound=-505413607]="GfeExperienceKeyNotFound",We[We.GfeExperiencePathEmpty=-505413606]="GfeExperiencePathEmpty",We[We.SignatureInvalid=-505413605]="SignatureInvalid",We[We.UacCancelled=-505413600]="UacCancelled",We[We.MsgArrivedEventCreate=-505413599]="MsgArrivedEventCreate",We[We.MsgArrivedEventSignal=-505413598]="MsgArrivedEventSignal",We[We.ResumePathNotFound=-505413597]="ResumePathNotFound",We[We.ResumePathEmpty=-505413596]="ResumePathEmpty",We[We.ResumePathInvalid=-505413595]="ResumePathInvalid",We[We.MsgChannelInit=-505413584]="MsgChannelInit",We[We.MsgShowFormSet=-505413583]="MsgShowFormSet",We[We.MsgProgressUpdateSet=-505413582]="MsgProgressUpdateSet",We[We.MsgListen=-505413581]="MsgListen",function(We){We[We.NotSet=0]="NotSet",We[We.ShowForm=1]="ShowForm",We[We.ProgressUpdate=2]="ProgressUpdate"}(on=we.MethodEnum||(we.MethodEnum={})),function(We){We[We.NotSet=0]="NotSet",We[We.InstallInitial=1]="InstallInitial",We[We.InstallChecking=2]="InstallChecking",We[We.InstallCheckWarnings=3]="InstallCheckWarnings",We[We.InstallCheckFailed=4]="InstallCheckFailed",We[We.InstallCheckWait=5]="InstallCheckWait",We[We.Eula=6]="Eula",We[We.InstallSelect=7]="InstallSelect",We[We.InstallSelectCustom=8]="InstallSelectCustom",We[We.InstallSelectInstallPath=9]="InstallSelectInstallPath",We[We.PreInstallCheck=10]="PreInstallCheck",We[We.PreInstallCheckRetry=11]="PreInstallCheckRetry",We[We.PreInstallCheckWait=12]="PreInstallCheckWait",We[We.PreRebootInstall=13]="PreRebootInstall",We[We.PackageDownloadProgress=14]="PackageDownloadProgress",We[We.ProcessDownloadedPackage=15]="ProcessDownloadedPackage",We[We.PackageDownloadFailed=16]="PackageDownloadFailed",We[We.InstallProgress=17]="InstallProgress",We[We.InstallRemoveProgress=18]="InstallRemoveProgress",We[We.InstallFinished=19]="InstallFinished",We[We.InstallFinishedNoSummary=20]="InstallFinishedNoSummary",We[We.InstallFinishedLaunch=21]="InstallFinishedLaunch",We[We.InstallFinishedNoSummaryLaunch=22]="InstallFinishedNoSummaryLaunch",We[We.InstallFinishedOptions=23]="InstallFinishedOptions",We[We.InstallFinishedNoSummaryOptions=24]="InstallFinishedNoSummaryOptions",We[We.InstallReboot=25]="InstallReboot",We[We.InstallRebootOptions=26]="InstallRebootOptions",We[We.InstallRebootNoSummary=27]="InstallRebootNoSummary",We[We.InstallRebootNoSummaryOptions=28]="InstallRebootNoSummaryOptions",We[We.InstallRemoveReboot=29]="InstallRemoveReboot",We[We.InstallFailed=30]="InstallFailed",We[We.WaitingOnUac=31]="WaitingOnUac"}(mn=we.FormEnum||(we.FormEnum={})),function(We){We[We.Next=0]="Next",We[We.Close=1]="Close"}(Kn=we.NextActionEnum||(we.NextActionEnum={}))}(zs||(zs={})),function(we){let On;var mn;let on;(mn=On=we.DriverTypeEnum||(we.DriverTypeEnum={}))[mn.GameReadyDriver=0]="GameReadyDriver",mn[mn.CreatorReadyDriver=1]="CreatorReadyDriver",function(mn){mn.started="started",mn.finished="finished",mn.failed="failed",mn.cancelled="cancelled"}(on=we.DriverUpdateCheckProgress||(we.DriverUpdateCheckProgress={}))}(Ks||(Ks={})),function(we){let On;var ee;let on,mn,Kn,We,li,Dn,Di,Ni,It,To,Ao,rn,Cr,Sr,Pr,Or,Mr,yr,br,xr,Er,Qe,la,ca,da,ga,ha,ua,ma,pa,fa,va,_a;(ee=On=we.BusType||(we.BusType={}))[ee.Bus_Unknown=0]="Bus_Unknown",ee[ee.Bus_AGP=1]="Bus_AGP",ee[ee.Bus_PCI=2]="Bus_PCI",ee[ee.Bus_FPCI=3]="Bus_FPCI",ee[ee.Bus_PCI_EXPRESS=4]="Bus_PCI_EXPRESS",ee[ee.Bus_PCI_EXPRESS_GEN2=5]="Bus_PCI_EXPRESS_GEN2",ee[ee.Bus_PCI_EXPRESS_GEN3=6]="Bus_PCI_EXPRESS_GEN3",ee[ee.Bus_AXI=7]="Bus_AXI",function(ee){ee[ee.Unknown=0]="Unknown",ee[ee.SDRAM=1]="SDRAM",ee[ee.DDR1=2]="DDR1",ee[ee.DDR2=3]="DDR2",ee[ee.GDDR2=4]="GDDR2",ee[ee.GDDR3=5]="GDDR3",ee[ee.GDDR4=6]="GDDR4",ee[ee.DDR3=7]="DDR3",ee[ee.GDDR5=8]="GDDR5",ee[ee.GDDR5X=9]="GDDR5X",ee[ee.HBM1=10]="HBM1",ee[ee.HBM2=11]="HBM2",ee[ee.SDDR4=12]="SDDR4",ee[ee.GDDR6=14]="GDDR6"}(on=we.RamType||(we.RamType={})),function(ee){ee[ee.NVCPLAPI_INSTALLED_DRIVERTYPE_INVALID=-1]="NVCPLAPI_INSTALLED_DRIVERTYPE_INVALID",ee[ee.NVCPLAPI_INSTALLED_DRIVERTYPE_CRD=0]="NVCPLAPI_INSTALLED_DRIVERTYPE_CRD",ee[ee.NVCPLAPI_INSTALLED_DRIVERTYPE_GRD=1]="NVCPLAPI_INSTALLED_DRIVERTYPE_GRD",ee[ee.NVCPLAPI_INSTALLED_DRIVERTYPE_QNF=2]="NVCPLAPI_INSTALLED_DRIVERTYPE_QNF",ee[ee.NVCPLAPI_INSTALLED_DRIVERTYPE_QOD=3]="NVCPLAPI_INSTALLED_DRIVERTYPE_QOD"}(mn=we.DriverBrandType||(we.DriverBrandType={})),function(ee){ee[ee.type_invalid=-1]="type_invalid",ee[ee.type_integer=0]="type_integer",ee[ee.type_string=1]="type_string",ee[ee.type_boolean=2]="type_boolean"}(Kn=we.ProfileSettingType||(we.ProfileSettingType={})),function(ee){ee[ee.NVCPLAPI_VALUE_ANIS_APP_CONTROLLED=1048576]="NVCPLAPI_VALUE_ANIS_APP_CONTROLLED",ee[ee.NVCPLAPI_VALUE_ANIS_OFF=1]="NVCPLAPI_VALUE_ANIS_OFF",ee[ee.NVCPLAPI_VALUE_ANIS_2=2]="NVCPLAPI_VALUE_ANIS_2",ee[ee.NVCPLAPI_VALUE_ANIS_4=4]="NVCPLAPI_VALUE_ANIS_4",ee[ee.NVCPLAPI_VALUE_ANIS_8=8]="NVCPLAPI_VALUE_ANIS_8",ee[ee.NVCPLAPI_VALUE_ANIS_16=16]="NVCPLAPI_VALUE_ANIS_16"}(We=we.AnisoTropicFilteringValue||(we.AnisoTropicFilteringValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_PERFORMANCE_HIQUAL=0]="NVCPLAPI_VALUE_PERFORMANCE_HIQUAL",ee[ee.NVCPLAPI_VALUE_PERFORMANCE_QUAL=1]="NVCPLAPI_VALUE_PERFORMANCE_QUAL",ee[ee.NVCPLAPI_VALUE_PERFORMANCE_PERF=2]="NVCPLAPI_VALUE_PERFORMANCE_PERF",ee[ee.NVCPLAPI_VALUE_PERFORMANCE_HIPERF=3]="NVCPLAPI_VALUE_PERFORMANCE_HIPERF"}(li=we.TextureFilteringQualityValue||(we.TextureFilteringQualityValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_TRI_OPT_ON=0]="NVCPLAPI_VALUE_TRI_OPT_ON",ee[ee.NVCPLAPI_VALUE_TRI_OPT_OFF=1]="NVCPLAPI_VALUE_TRI_OPT_OFF"}(Dn=we.TextureFilteringTrilinearValue||(we.TextureFilteringTrilinearValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_VSYNC_APPCONTROLLED=0]="NVCPLAPI_VALUE_VSYNC_APPCONTROLLED",ee[ee.NVCPLAPI_VALUE_VSYNC_FORCEOFF=1]="NVCPLAPI_VALUE_VSYNC_FORCEOFF",ee[ee.NVCPLAPI_VALUE_VSYNC_FORCEON=2]="NVCPLAPI_VALUE_VSYNC_FORCEON",ee[ee.NVCPLAPI_VALUE_VSYNC_FORCEON_INTERVAL2=3]="NVCPLAPI_VALUE_VSYNC_FORCEON_INTERVAL2",ee[ee.NVCPLAPI_VALUE_VSYNC_AUTO=4]="NVCPLAPI_VALUE_VSYNC_AUTO",ee[ee.NVCPLAPI_VALUE_VSYNC_AUTO_INTERVAL2=5]="NVCPLAPI_VALUE_VSYNC_AUTO_INTERVAL2",ee[ee.NVCPLAPI_VALUE_VSYNC_SMOOTH=6]="NVCPLAPI_VALUE_VSYNC_SMOOTH",ee[ee.NVCPLAPI_VALUE_VSYNC_VRR_ENABLE=8]="NVCPLAPI_VALUE_VSYNC_VRR_ENABLE",ee[ee.NVCPLAPI_VALUE_VSYNC_VRR_NONE=9]="NVCPLAPI_VALUE_VSYNC_VRR_NONE",ee[ee.NVCPLAPI_VALUE_VSYNC_VIRTUAL=10]="NVCPLAPI_VALUE_VSYNC_VIRTUAL"}(Di=we.VerticalSyncValue||(we.VerticalSyncValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_OGL_THREADING_AUTO=0]="NVCPLAPI_VALUE_OGL_THREADING_AUTO",ee[ee.NVCPLAPI_VALUE_OGL_THREADING_ON=1]="NVCPLAPI_VALUE_OGL_THREADING_ON",ee[ee.NVCPLAPI_VALUE_OGL_THREADING_OFF=2]="NVCPLAPI_VALUE_OGL_THREADING_OFF"}(Ni=we.ThreadedOptimizationValue||(we.ThreadedOptimizationValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_OGL_OVERLAY_SUPPORT_OFF=0]="NVCPLAPI_VALUE_OGL_OVERLAY_SUPPORT_OFF",ee[ee.NVCPLAPI_VALUE_OGL_OVERLAY_SUPPORT_ON=1]="NVCPLAPI_VALUE_OGL_OVERLAY_SUPPORT_ON"}(It=we.EnableOverlayValue||(we.EnableOverlayValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_OGL_OVERLAY_NONE=0]="NVCPLAPI_VALUE_OGL_OVERLAY_NONE",ee[ee.NVCPLAPI_VALUE_OGL_OVERLAY_CI=1]="NVCPLAPI_VALUE_OGL_OVERLAY_CI",ee[ee.NVCPLAPI_VALUE_OGL_OVERLAY_RGBA=2]="NVCPLAPI_VALUE_OGL_OVERLAY_RGBA",ee[ee.NVCPLAPI_VALUE_OGL_OVERLAY_CI_AND_RGBA=3]="NVCPLAPI_VALUE_OGL_OVERLAY_CI_AND_RGBA"}(To=we.ExportedpixeltypesValue||(we.ExportedpixeltypesValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_SHADERDISKCACHE_OFF=0]="NVCPLAPI_VALUE_SHADERDISKCACHE_OFF",ee[ee.NVCPLAPI_VALUE_SHADERDISKCACHE_ON=1]="NVCPLAPI_VALUE_SHADERDISKCACHE_ON"}(Ao=we.ShaderCacheValue||(we.ShaderCacheValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_PREFERRED_REFRATE_APP_CONTROL=0]="NVCPLAPI_VALUE_PREFERRED_REFRATE_APP_CONTROL",ee[ee.NVCPLAPI_VALUE_PREFERRED_REFRATE_OVERRIDE=1]="NVCPLAPI_VALUE_PREFERRED_REFRATE_OVERRIDE"}(rn=we.PreferredRefreshRateValue||(we.PreferredRefreshRateValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_POWER_MGMT_MODE_ADAPTIVE=0]="NVCPLAPI_VALUE_POWER_MGMT_MODE_ADAPTIVE",ee[ee.NVCPLAPI_VALUE_POWER_MGMT_MODE_MAX=1]="NVCPLAPI_VALUE_POWER_MGMT_MODE_MAX",ee[ee.NVCPLAPI_VALUE_POWER_MGMT_MODE_DRIVER_CONTROLLED=2]="NVCPLAPI_VALUE_POWER_MGMT_MODE_DRIVER_CONTROLLED",ee[ee.NVCPLAPI_VALUE_POWER_MGMT_MODE_PREFER_CONSISTENT_PERFORMANCE=3]="NVCPLAPI_VALUE_POWER_MGMT_MODE_PREFER_CONSISTENT_PERFORMANCE",ee[ee.NVCPLAPI_VALUE_POWER_MGMT_MODE_OPTIMAL_POWER=5]="NVCPLAPI_VALUE_POWER_MGMT_MODE_OPTIMAL_POWER"}(Cr=we.PowerManagementModeValue||(we.PowerManagementModeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_SHARPENING_TOGGLE_DISABLED=0]="NVCPLAPI_VALUE_SHARPENING_TOGGLE_DISABLED",ee[ee.NVCPLAPI_VALUE_SHARPENING_TOGGLE_ENABLED=1]="NVCPLAPI_VALUE_SHARPENING_TOGGLE_ENABLED"}(Sr=we.ImageSharpeningToggleValue||(we.ImageSharpeningToggleValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_QUIET_MODE_FPS_OFF=0]="NVCPLAPI_VALUE_QUIET_MODE_FPS_OFF",ee[ee.NVCPLAPI_VALUE_QUIET_MODE_FPS_ON=1]="NVCPLAPI_VALUE_QUIET_MODE_FPS_ON"}(Pr=we.WhisperModeProgramValue||(we.WhisperModeProgramValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_D3D_SHIM_RENDERING_MODE_INTEGRATED=0]="NVCPLAPI_VALUE_D3D_SHIM_RENDERING_MODE_INTEGRATED",ee[ee.NVCPLAPI_VALUE_D3D_SHIM_RENDERING_MODE_GPLEX=1]="NVCPLAPI_VALUE_D3D_SHIM_RENDERING_MODE_GPLEX",ee[ee.NVCPLAPI_VALUE_D3D_SHIM_RENDERING_MODE_AUTO=16]="NVCPLAPI_VALUE_D3D_SHIM_RENDERING_MODE_AUTO"}(Or=we.PreferredGraphicsProcessorValue||(we.PreferredGraphicsProcessorValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_SILK_SMOOTHNESS_LOW=0]="NVCPLAPI_VALUE_SILK_SMOOTHNESS_LOW",ee[ee.NVCPLAPI_VALUE_SILK_SMOOTHNESS_MEDIUM=1]="NVCPLAPI_VALUE_SILK_SMOOTHNESS_MEDIUM",ee[ee.NVCPLAPI_VALUE_SILK_SMOOTHNESS_HIGH=2]="NVCPLAPI_VALUE_SILK_SMOOTHNESS_HIGH",ee[ee.NVCPLAPI_VALUE_SILK_SMOOTHNESS_ULTRA=3]="NVCPLAPI_VALUE_SILK_SMOOTHNESS_ULTRA",ee[ee.NVCPLAPI_VALUE_SILK_SMOOTHNESS_OFF=4]="NVCPLAPI_VALUE_SILK_SMOOTHNESS_OFF"}(Mr=we.SilkSmoothnessValue||(we.SilkSmoothnessValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_LATENCY_BEST_PERFORMANCE=0]="NVCPLAPI_VALUE_LATENCY_BEST_PERFORMANCE",ee[ee.NVCPLAPI_VALUE_LATENCY_LOW_LATENCY=1]="NVCPLAPI_VALUE_LATENCY_LOW_LATENCY",ee[ee.NVCPLAPI_VALUE_LATENCY_LOWEST_LATENCY=2]="NVCPLAPI_VALUE_LATENCY_LOWEST_LATENCY"}(yr=we.LowLatencyModeValue||(we.LowLatencyModeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_AUTOVRS_OFF=0]="NVCPLAPI_VALUE_AUTOVRS_OFF",ee[ee.NVCPLAPI_VALUE_AUTOVRS_FORCED=1]="NVCPLAPI_VALUE_AUTOVRS_FORCED",ee[ee.NVCPLAPI_VALUE_AUTOVRS_ADAPTIVE=2]="NVCPLAPI_VALUE_AUTOVRS_ADAPTIVE"}(br=we.VirtualRealityVrssValue||(we.VirtualRealityVrssValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_AUTOFL_OFF=0]="NVCPLAPI_VALUE_AUTOFL_OFF",ee[ee.NVCPLAPI_VALUE_AUTOFL_ON=1]="NVCPLAPI_VALUE_AUTOFL_ON"}(xr=we.MaxqDynamicBoostValue||(we.MaxqDynamicBoostValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_DISPLAYMUX_INDICATOR_OFF=0]="NVCPLAPI_VALUE_DISPLAYMUX_INDICATOR_OFF",ee[ee.NVCPLAPI_VALUE_DISPLAYMUX_INDICATOR_ON=1]="NVCPLAPI_VALUE_DISPLAYMUX_INDICATOR_ON"}(Er=we.AutoDisplaySwitchingValue||(we.AutoDisplaySwitchingValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_QUIET_MODE_ALLOW_DISABLED=0]="NVCPLAPI_VALUE_QUIET_MODE_ALLOW_DISABLED",ee[ee.NVCPLAPI_VALUE_QUIET_MODE_ALLOW_ENABLED=1]="NVCPLAPI_VALUE_QUIET_MODE_ALLOW_ENABLED"}(Qe=we.WhisperModeGlobalValue||(we.WhisperModeGlobalValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_GSYNC_ON=0]="NVCPLAPI_VALUE_GSYNC_ON",ee[ee.NVCPLAPI_VALUE_GSYNC_FORCE_OFF=1]="NVCPLAPI_VALUE_GSYNC_FORCE_OFF",ee[ee.NVCPLAPI_VALUE_VRR_OFF=2]="NVCPLAPI_VALUE_VRR_OFF",ee[ee.NVCPLAPI_VALUE_ULMB_ON=3]="NVCPLAPI_VALUE_ULMB_ON",ee[ee.NVCPLAPI_VALUE_FIXED_REFRESH=4]="NVCPLAPI_VALUE_FIXED_REFRESH"}(la=we.MonitorTechnologyValue||(we.MonitorTechnologyValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_POWER_MGMT_PANEL_OFF=0]="NVCPLAPI_VALUE_POWER_MGMT_PANEL_OFF",ee[ee.NVCPLAPI_VALUE_POWER_MGMT_PANEL_SELF_REFRESH_MODE=1]="NVCPLAPI_VALUE_POWER_MGMT_PANEL_SELF_REFRESH_MODE"}(ca=we.PowerManagementPanelValue||(we.PowerManagementPanelValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_ENABLE_OGL_STEREO_OFF=0]="NVCPLAPI_VALUE_ENABLE_OGL_STEREO_OFF",ee[ee.NVCPLAPI_VALUE_ENABLE_OGL_STEREO_ON=1]="NVCPLAPI_VALUE_ENABLE_OGL_STEREO_ON"}(da=we.StereoEnableValue||(we.StereoEnableValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_MODE_DIN=1]="NVCPLAPI_VALUE_STEREO_DISPLAY_MODE_DIN",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_MODE_DIN_NV_IR=2]="NVCPLAPI_VALUE_STEREO_DISPLAY_MODE_DIN_NV_IR",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_MODE_DP_INBAND=3]="NVCPLAPI_VALUE_STEREO_DISPLAY_MODE_DP_INBAND",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_GENERIC=4]="NVCPLAPI_VALUE_STEREO_DISPLAY_GENERIC",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_GENERIC_NV_IR=5]="NVCPLAPI_VALUE_STEREO_DISPLAY_GENERIC_NV_IR",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_DDC_GLASSES=6]="NVCPLAPI_VALUE_STEREO_DISPLAY_DDC_GLASSES",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_NV_CLONE=7]="NVCPLAPI_VALUE_STEREO_DISPLAY_NV_CLONE",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_NV_CLONE_DLP=8]="NVCPLAPI_VALUE_STEREO_DISPLAY_NV_CLONE_DLP",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_BLUELINE=9]="NVCPLAPI_VALUE_STEREO_DISPLAY_BLUELINE",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_VERTICAL_INTERLACE=10]="NVCPLAPI_VALUE_STEREO_DISPLAY_VERTICAL_INTERLACE",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_COLOR_INTERLEAVE=11]="NVCPLAPI_VALUE_STEREO_DISPLAY_COLOR_INTERLEAVE",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_HORIZONTAL_INTERLACE=12]="NVCPLAPI_VALUE_STEREO_DISPLAY_HORIZONTAL_INTERLACE",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_SUBFIELD=13]="NVCPLAPI_VALUE_STEREO_DISPLAY_SUBFIELD",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_SIDEFIELD=14]="NVCPLAPI_VALUE_STEREO_DISPLAY_SIDEFIELD",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_SEEFRONT=15]="NVCPLAPI_VALUE_STEREO_DISPLAY_SEEFRONT",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP=16]="NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP_NV_IR=17]="NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP_NV_IR",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP_INV=18]="NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP_INV",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP_INV_NV_IR=19]="NVCPLAPI_VALUE_STEREO_DISPLAY_3D_DLP_INV_NV_IR",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_TRIDELITY_SL_SV=20]="NVCPLAPI_VALUE_STEREO_DISPLAY_TRIDELITY_SL_SV",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_TRIDELITY_MV=21]="NVCPLAPI_VALUE_STEREO_DISPLAY_TRIDELITY_MV",ee[ee.NVCPLAPI_VALUE_STEREO_DISPLAY_PLANAR_MIRROR=22]="NVCPLAPI_VALUE_STEREO_DISPLAY_PLANAR_MIRROR"}(ga=we.StereoDisplayModeValue||(we.StereoDisplayModeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_ENABLE_OGL_SWAP_EYES_OFF=0]="NVCPLAPI_VALUE_ENABLE_OGL_SWAP_EYES_OFF",ee[ee.NVCPLAPI_VALUE_ENABLE_OGL_SWAP_EYES_ON=1]="NVCPLAPI_VALUE_ENABLE_OGL_SWAP_EYES_ON"}(ha=we.StereoSwapEyeValue||(we.StereoSwapEyeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_STEREO_SWAP_MODE_APPLICATION_CONTROL=0]="NVCPLAPI_VALUE_STEREO_SWAP_MODE_APPLICATION_CONTROL",ee[ee.NVCPLAPI_VALUE_PER_EYE=1]="NVCPLAPI_VALUE_PER_EYE",ee[ee.NVCPLAPI_VALUE_PER_EYE_PAIR=2]="NVCPLAPI_VALUE_PER_EYE_PAIR"}(ua=we.StereoSwapModeValue||(we.StereoSwapModeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_AA_APPCONTROL_OFF=0]="NVCPLAPI_VALUE_AA_APPCONTROL_OFF",ee[ee.NVCPLAPI_VALUE_AA_APPCONTROL_ON=1]="NVCPLAPI_VALUE_AA_APPCONTROL_ON",ee[ee.NVCPLAPI_VALUE_AA_APPCONTROL_ENHANCE=2]="NVCPLAPI_VALUE_AA_APPCONTROL_ENHANCE",ee[ee.NVCPLAPI_VALUE_AA_APPCONTROL_FORCE_OFF=3]="NVCPLAPI_VALUE_AA_APPCONTROL_FORCE_OFF"}(ma=we.AntialiasingModeValue||(we.AntialiasingModeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_MGPU_AUTORENDER=0]="NVCPLAPI_VALUE_MGPU_AUTORENDER",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_AFR_SFR=1]="NVCPLAPI_VALUE_MGPU_FORCE_AFR_SFR",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_SFR=2]="NVCPLAPI_VALUE_MGPU_FORCE_SFR",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_2_AFR=3]="NVCPLAPI_VALUE_MGPU_FORCE_2_AFR",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_SINGLE=4]="NVCPLAPI_VALUE_MGPU_FORCE_SINGLE",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_4_AFR=5]="NVCPLAPI_VALUE_MGPU_FORCE_4_AFR",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_3_AFR=6]="NVCPLAPI_VALUE_MGPU_FORCE_3_AFR",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_2_AFR2=61443]="NVCPLAPI_VALUE_MGPU_FORCE_2_AFR2",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_3_AFR2=61445]="NVCPLAPI_VALUE_MGPU_FORCE_3_AFR2",ee[ee.NVCPLAPI_VALUE_MGPU_FORCE_4_AFR2=61446]="NVCPLAPI_VALUE_MGPU_FORCE_4_AFR2"}(pa=we.SliMultiGpuRenderingModeValue||(we.SliMultiGpuRenderingModeValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_OGL_DEEP_COLOR_DISABLE=0]="NVCPLAPI_VALUE_OGL_DEEP_COLOR_DISABLE",ee[ee.NVCPLAPI_VALUE_OGL_DEEP_COLOR_ENABLE=1]="NVCPLAPI_VALUE_OGL_DEEP_COLOR_ENABLE"}(fa=we.DeepColorFor3DApplicationsValue||(we.DeepColorFor3DApplicationsValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_AA_METHOD_NONE=0]="NVCPLAPI_VALUE_AA_METHOD_NONE",ee[ee.NVCPLAPI_VALUE_AA_METHOD_APP_CONTROLLED=1048576]="NVCPLAPI_VALUE_AA_METHOD_APP_CONTROLLED",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MULTISAMPLE_2X_DIAGONAL=14]="NVCPLAPI_VALUE_AA_METHOD_MULTISAMPLE_2X_DIAGONAL",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MULTISAMPLE_4X=16]="NVCPLAPI_VALUE_AA_METHOD_MULTISAMPLE_4X",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_8SX=24]="NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_8SX",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MULTISAMPLE_8X=25]="NVCPLAPI_VALUE_AA_METHOD_MULTISAMPLE_8X",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_16X=26]="NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_16X",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_32X=41]="NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_32X",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_64X=42]="NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_64X",ee[ee.NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_128X=43]="NVCPLAPI_VALUE_AA_METHOD_MIXEDSAMPLE_128X"}(va=we.AntialiasingSettingValue||(we.AntialiasingSettingValue={})),function(ee){ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_OFF=0]="NVCPLAPI_VALUE_TRANSPARENCY_AA_OFF",ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_MULTI_SAMPLING=3]="NVCPLAPI_VALUE_TRANSPARENCY_AA_MULTI_SAMPLING",ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_SUPER_SAMPLING=5]="NVCPLAPI_VALUE_TRANSPARENCY_AA_SUPER_SAMPLING",ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_1X=1]="NVCPLAPI_VALUE_TRANSPARENCY_AA_1X",ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_2X=2]="NVCPLAPI_VALUE_TRANSPARENCY_AA_2X",ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_4X=4]="NVCPLAPI_VALUE_TRANSPARENCY_AA_4X",ee[ee.NVCPLAPI_VALUE_TRANSPARENCY_AA_8X=8]="NVCPLAPI_VALUE_TRANSPARENCY_AA_8X"}(_a=we.AntialiasingTransparencyValue||(we.AntialiasingTransparencyValue={}))}($s||($s={}));var Ys,gs=(()=>{return(we=gs||(gs={})).Appdiscovery=Ws,we.Driverinstall=zs,we.Driverupdaterecommendation=Ks,we.Nvcplplugin=$s,gs;var we})();!function(we){let On;var on;(on=On=we.EnableStatus||(we.EnableStatus={})).success="success",on.genericFailure="genericFailure"}(Ys||(Ys={}));var Qs,Js,js,hs=(()=>((hs||(hs={})).Gfnbroadcast=Ys,hs))();!function(we){let On;var We;let on,mn,Kn;(We=On=we.ErrorCodeEnum||(we.ErrorCodeEnum={}))[We.NoError=0]="NoError",We[We.GeneralError=-505409537]="GeneralError",We[We.InvalidObject=-505413631]="InvalidObject",We[We.InsufficientArguments=-505413630]="InsufficientArguments",We[We.InvalidParameters=-505413629]="InvalidParameters",We[We.PropertyMissing=-505413628]="PropertyMissing",We[We.InvalidFormat=-505413627]="InvalidFormat",We[We.EmptyValue=-505413626]="EmptyValue",We[We.FileNotFound=-505413622]="FileNotFound",We[We.PathNotFound=-505413621]="PathNotFound",We[We.ProcessingPreviousCall=505413620]="ProcessingPreviousCall",We[We.InstallerAlreadyRunning=-505413619]="InstallerAlreadyRunning",We[We.MessagingChannel=-505413618]="MessagingChannel",We[We.ExtractedNotFound=-505413610]="ExtractedNotFound",We[We.InstallerExeNotFound=-505413608]="InstallerExeNotFound",We[We.GfeExperienceKeyNotFound=-505413607]="GfeExperienceKeyNotFound",We[We.GfeExperiencePathEmpty=-505413606]="GfeExperiencePathEmpty",We[We.SignatureInvalid=-505413605]="SignatureInvalid",We[We.UacCancelled=-505413600]="UacCancelled",We[We.MsgArrivedEventCreate=-505413599]="MsgArrivedEventCreate",We[We.MsgArrivedEventSignal=-505413598]="MsgArrivedEventSignal",We[We.ResumePathNotFound=-505413597]="ResumePathNotFound",We[We.ResumePathEmpty=-505413596]="ResumePathEmpty",We[We.ResumePathInvalid=-505413595]="ResumePathInvalid",We[We.MsgChannelInit=-505413584]="MsgChannelInit",We[We.MsgShowFormSet=-505413583]="MsgShowFormSet",We[We.MsgProgressUpdateSet=-505413582]="MsgProgressUpdateSet",We[We.MsgListen=-505413581]="MsgListen",function(We){We[We.NotSet=0]="NotSet",We[We.ShowForm=1]="ShowForm",We[We.ProgressUpdate=2]="ProgressUpdate"}(on=we.MethodEnum||(we.MethodEnum={})),function(We){We[We.NotSet=0]="NotSet",We[We.InstallInitial=1]="InstallInitial",We[We.InstallChecking=2]="InstallChecking",We[We.InstallCheckWarnings=3]="InstallCheckWarnings",We[We.InstallCheckFailed=4]="InstallCheckFailed",We[We.InstallCheckWait=5]="InstallCheckWait",We[We.Eula=6]="Eula",We[We.InstallSelect=7]="InstallSelect",We[We.InstallSelectCustom=8]="InstallSelectCustom",We[We.InstallSelectInstallPath=9]="InstallSelectInstallPath",We[We.PreInstallCheck=10]="PreInstallCheck",We[We.PreInstallCheckRetry=11]="PreInstallCheckRetry",We[We.PreInstallCheckWait=12]="PreInstallCheckWait",We[We.PreRebootInstall=13]="PreRebootInstall",We[We.PackageDownloadProgress=14]="PackageDownloadProgress",We[We.ProcessDownloadedPackage=15]="ProcessDownloadedPackage",We[We.PackageDownloadFailed=16]="PackageDownloadFailed",We[We.InstallProgress=17]="InstallProgress",We[We.InstallRemoveProgress=18]="InstallRemoveProgress",We[We.InstallFinished=19]="InstallFinished",We[We.InstallFinishedNoSummary=20]="InstallFinishedNoSummary",We[We.InstallFinishedLaunch=21]="InstallFinishedLaunch",We[We.InstallFinishedNoSummaryLaunch=22]="InstallFinishedNoSummaryLaunch",We[We.InstallFinishedOptions=23]="InstallFinishedOptions",We[We.InstallFinishedNoSummaryOptions=24]="InstallFinishedNoSummaryOptions",We[We.InstallReboot=25]="InstallReboot",We[We.InstallRebootOptions=26]="InstallRebootOptions",We[We.InstallRebootNoSummary=27]="InstallRebootNoSummary",We[We.InstallRebootNoSummaryOptions=28]="InstallRebootNoSummaryOptions",We[We.InstallRemoveReboot=29]="InstallRemoveReboot",We[We.InstallFailed=30]="InstallFailed",We[We.WaitingOnUac=31]="WaitingOnUac"}(mn=we.FormEnum||(we.FormEnum={})),function(We){We[We.Next=0]="Next",We[We.Close=1]="Close"}(Kn=we.NextActionEnum||(we.NextActionEnum={}))}(Qs||(Qs={})),function(we){let On;var mn;let on;(mn=On=we.DriverTypeEnum||(we.DriverTypeEnum={}))[mn.GameReadyDriver=0]="GameReadyDriver",mn[mn.CreatorReadyDriver=1]="CreatorReadyDriver",function(mn){mn.started="started",mn.finished="finished",mn.failed="failed",mn.cancelled="cancelled"}(on=we.DriverUpdateCheckProgress||(we.DriverUpdateCheckProgress={}))}(Js||(Js={})),function(we){let On;var Dn;let on,mn,Kn,We,li;(Dn=On=we.ApplicationScanType||(we.ApplicationScanType={})).fast="fast",Dn.traditional="traditional",function(Dn){Dn.Unknown="Unknown",Dn.NotAvailable="NotAvailable",Dn.NotReady="NotReady",Dn.Ready="Ready"}(on=we.VopsStatus||(we.VopsStatus={})),function(Dn){Dn.STRING="STRING",Dn.INT="INT",Dn.FLOAT="FLOAT",Dn.ENUM="ENUM",Dn.BOOL="BOOL",Dn.DRIVER_ENUM="DRIVER_ENUM"}(mn=we.Type||(we.Type={})),function(Dn){Dn.AC="AC",Dn.DC="DC"}(Kn=we.ApplicationPowerMode||(we.ApplicationPowerMode={})),function(Dn){Dn.DISABLED="DISABLED",Dn.UNOPTIMIZED="UNOPTIMIZED",Dn.CUSTOMIZED="CUSTOMIZED",Dn.OPTIMIZED="OPTIMIZED"}(We=we.OptimizationState||(we.OptimizationState={})),function(Dn){Dn.started="started",Dn.finished="finished",Dn.failed="failed",Dn.progress="progress"}(li=we.Status||(we.Status={}))}(js||(js={}));var Xs,qs,ea,ta,na,ia,oa,ra,sa,aa,us=(()=>{return(we=us||(us={})).Driverinstall=Qs,we.Driverupdaterecommendation=Js,we.Localgames=js,us;var we})();!function(we){let On;var on;(on=On=we.State||(we.State={})).percentage="percentage",on.indeterminate="indeterminate",on.pause="pause",on.complete="complete"}(Xs||(Xs={})),function(we){let On;var We;let on,mn,Kn;(We=On=we.ApplicationLifetimeEventType||(we.ApplicationLifetimeEventType={})).ApplicationExit="APPLICATION_EXIT",We.SystemLogout="SYSTEM_LOGOUT",We.SystemSuspend="SYSTEM_SUSPEND",function(We){We.UserClosedWindow="USER_CLOSED_WINDOW",We.UserQuitWithShortcut="USER_QUIT_WITH_SHORTCUT",We.UserLoggedOut="USER_LOGGED_OUT",We.SelfUpdate="SELF_UPDATE",We.Relaunch="RELAUNCH",We.BrowserExit="BROWSER_EXIT",We.ForceShutdown="FORCE_SHUTDOWN"}(on=we.ShutdownReason||(we.ShutdownReason={})),function(We){We.Launch="launch"}(mn=we.ApplicationTimeType||(we.ApplicationTimeType={})),function(We){We.LaunchSiteTime="LAUNCH_SITE_TIME",We.LaunchCefSiteTime="LAUNCH_CEF_SITE_TIME"}(Kn=we.ApplicationStartTimeType||(we.ApplicationStartTimeType={}))}(qs||(qs={})),function(we){let On;var mn;let on;(mn=On=we.ConversationIntent||(we.ConversationIntent={})).Support="Support",mn.Recommendation="Recommendation",function(mn){mn.Installer="Installer",mn.Game="Game",mn.Share="Share",mn.GameStream="GameStream"}(on=we.Component||(we.Component={}))}(ea||(ea={})),function(we){let On;var on;(on=On=we.InternalErrorCodeEnum||(we.InternalErrorCodeEnum={}))[on.Success=0]="Success",on[on.Error=1]="Error",on[on.Error_PermissionNotGiven=2]="Error_PermissionNotGiven",on[on.Error_NotFullScreen=3]="Error_NotFullScreen"}(ta||(ta={})),function(we){let On;(On=we.DiscordAsset||(we.DiscordAsset={})).Large="large_asset"}(na||(na={})),function(we){let On;var It;let on,mn,Kn,We,li,Dn,Di,Ni;(It=On=we.DownloadStatus||(we.DownloadStatus={}))[It.Undefined=-1]="Undefined",It[It.DownloadTriggered=0]="DownloadTriggered",It[It.Downloading=1]="Downloading",It[It.Paused=2]="Paused",It[It.Cancelled=3]="Cancelled",It[It.NetworkErrorRetrying=4]="NetworkErrorRetrying",It[It.NetworkErrorRetryPaused=5]="NetworkErrorRetryPaused",It[It.Finished=6]="Finished",It[It.ChecksumVerificationFailed=7]="ChecksumVerificationFailed",It[It.SignatureVerificationFailed=8]="SignatureVerificationFailed",It[It.DiskWriteFail=9]="DiskWriteFail",It[It.Error=10]="Error",It[It.NotAllowedNow=11]="NotAllowedNow",It[It.Prohibited=12]="Prohibited",function(It){It[It.Official=0]="Official",It[It.Beta=1]="Beta",It[It.iBeta=2]="iBeta",It[It.Unknown=-1]="Unknown"}(on=we.UpdateChannel||(we.UpdateChannel={})),function(It){It[It.Full=0]="Full",It[It.Diff=1]="Diff",It[It.Unknown=-1]="Unknown"}(mn=we.UpdateType||(we.UpdateType={})),function(It){It[It.Auto=0]="Auto",It[It.Manual=1]="Manual",It[It.Unknown=-1]="Unknown"}(Kn=we.InvokeType||(we.InvokeType={})),function(It){It[It.Started=0]="Started",It[It.Retrying=1]="Retrying",It[It.RetryStopped=2]="RetryStopped",It[It.Finished=3]="Finished",It[It.Failed=4]="Failed"}(We=we.ProgressStatus||(we.ProgressStatus={})),function(It){It[It.Undefined=-1]="Undefined",It[It.Ready=0]="Ready",It[It.Executing=1]="Executing",It[It.Completed=2]="Completed",It[It.CouldNotRun=3]="CouldNotRun",It[It.FailedRetryPending=4]="FailedRetryPending",It[It.Failed=5]="Failed"}(li=we.ActionStatus||(we.ActionStatus={})),function(It){It[It.Undefined=-1]="Undefined",It[It.ExecutingActions=0]="ExecutingActions",It[It.Completed=1]="Completed",It[It.Failed=2]="Failed"}(Dn=we.PostProcessingStatus||(we.PostProcessingStatus={})),function(It){It[It.Unknown=-1]="Unknown",It[It.UpdateInProgress=0]="UpdateInProgress",It[It.UpdateSuccessful=1]="UpdateSuccessful",It[It.UpdateFailed=2]="UpdateFailed",It[It.Installed=3]="Installed"}(Di=we.UpdateState||(we.UpdateState={})),function(It){It[It.Uninitialised=-1]="Uninitialised",It[It.CheckingForUpdate=0]="CheckingForUpdate",It[It.UpdateCheckEnd=1]="UpdateCheckEnd",It[It.Downloading=2]="Downloading",It[It.DownloadEnd=3]="DownloadEnd",It[It.PostProcessing=4]="PostProcessing",It[It.PostProcessingEnd=5]="PostProcessingEnd"}(Ni=we.UpdateExecutionPhase||(we.UpdateExecutionPhase={}))}(ia||(ia={})),function(we){let On;var rn;let on,mn,Kn,We,li,Dn,Di,Ni,It,To,Ao;(rn=On=we.FileType||(we.FileType={})).video="video",rn.image="image",rn.other="other",function(rn){rn.Highlight="Highlight",rn.AnimatedGif="AnimatedGif",rn.Normal="Normal",rn.SuperResolution="SuperResolution",rn.SuperResolution_Oversized="SuperResolution_Oversized",rn.SubType_360Mono="360Mono",rn.Stereo="Stereo",rn.SubType_360Stereo="360Stereo",rn.Exr="Exr",rn.Normal_Ansel="Normal_Ansel",rn.Montage="Montage",rn.InstantReplay="InstantReplay",rn.Manual="Manual",rn.Unknown="Unknown"}(on=we.SubType||(we.SubType={})),function(rn){rn.Single="Single",rn.Separate="Separate",rn.Unknown="Unknown"}(mn=we.AudioType||(we.AudioType={})),function(rn){rn.low="low",rn.medium="medium",rn.high="high"}(Kn=we.Quality||(we.Quality={})),function(rn){rn.GFE_Share="GFE_Share",rn.GFE_Ansel="GFE_Ansel",rn.GFE_SDK="GFE_SDK",rn.StandAlone_Ansel="StandAlone_Ansel",rn.Undefined="Undefined"}(We=we.Source||(we.Source={})),function(rn){rn.screenshot="screenshot",rn.video="video"}(li=we.Type||(we.Type={})),function(rn){rn.video="video",rn.image="image",rn.audio="audio"}(Dn=we.InputFileType||(we.InputFileType={})),function(rn){rn.none="none",rn.titleBasic="titleBasic"}(Di=we.SeqType||(we.SeqType={})),function(rn){rn.none="none",rn.brandSliderInOnly="brandSliderInOnly",rn.brandSlideInOut="brandSlideInOut"}(Ni=we.BrandType||(we.BrandType={})),function(rn){rn.atStart="atStart",rn.atEnd="atEnd"}(It=we.Position||(we.Position={})),function(rn){rn.TrackerUpdateNotActive="TrackerUpdateNotActive",rn.TrackerUpdateInProgress="TrackerUpdateInProgress",rn.TrackerUpdateComplete="TrackerUpdateComplete",rn.CancelUpdateComplete="CancelUpdateComplete",rn.CancelUpdate="CancelUpdate"}(To=we.GalleryPathUpdateStatus||(we.GalleryPathUpdateStatus={})),function(rn){rn.none="none",rn.hidden="hidden",rn.empty="empty",rn.hiddenOrEmpty="hiddenOrEmpty",rn.hiddenAndEmpty="hiddenAndEmpty"}(Ao=we.ExcludeDirectoryType||(we.ExcludeDirectoryType={}))}(oa||(oa={})),function(we){let On;var on;(on=On=we.IpcTargets||(we.IpcTargets={})).GfnMall="mallclient",on.GfnStreamer="streamer",on.GfnUpdater="selfupdater"}(ra||(ra={})),function(we){let On;var It;let on,mn,Kn,We,li,Dn,Di,Ni;(It=On=we.CaptureTypes||(we.CaptureTypes={})).regular="regular",It.stereoRegular="stereoRegular",It.highRes="highRes",It.sphericalPanorama="sphericalPanorama",It.stereoSphericalPanorama="stereoSphericalPanorama",function(It){It.ok="ok",It.failed="failed",It.started="started",It.failedToStart="failedToStart",It.noSpace="noSpace",It.permissionDenied="permissionDenied",It.invalidRequest="invalidRequest",It.failedToProcess="failedToProcess",It.processDeclined="processDeclined",It.alreadyEnabled="alreadyEnabled",It.alreadyDisabled="alreadyDisabled",It.outOfRange="outOfRange",It.alreadySet="alreadySet",It.incompatibleVersion="incompatibleVersion",It.disabled="disabled",It.okAnsel="okAnsel",It.okModsOnly="okModsOnly",It.failedToFinishCapture="failedToFinishCapture",It.failedToSaveShotFailedCreateDiretory="failedToSaveShotFailedCreateDiretory",It.failedToSaveShotNoSpaceLeft="failedToSaveShotNoSpaceLeft",It.processingCompleted="processingCompleted",It.shotSaved="shotSaved",It.processingFile="processingFile",It.failedToSaveShot="failedToSaveShot"}(on=we.AnselStatusEnum||(we.AnselStatusEnum={})),function(It){It.sdk="sdk",It.mods="mods",It.styleTransfer="styleTransfer",It.allowOffline="allowOffline"}(mn=we.FeaturesSupported||(we.FeaturesSupported={})),function(It){It.windowedSDK="windowedSDK",It.fullscreenSDK="fullscreenSDK",It.windowedNoSDK="windowedNoSDK",It.fullscreenNoSDK="fullscreenNoSDK"}(Kn=we.Mode||(we.Mode={})),function(It){It.mouse="mouse",It.keyboard="keyboard",It.gamepad="gamepad"}(We=we.Hid||(we.Hid={})),function(It){It.notAvailable="notAvailable",It.available="available",It.notEnabled="notEnabled",It.enabled="enabled"}(li=we.AnselState||(we.AnselState={})),function(It){It.roll="roll",It.fov="fov"}(Dn=we.Response||(we.Response={})),function(It){It.float="float",It.int="int",It.uint="uint",It.bool="bool"}(Di=we.DataType||(we.DataType={})),function(It){It.success="success"}(Ni=we.NgxAiUpResStatus||(we.NgxAiUpResStatus={}))}(sa||(sa={})),function(we){let On;var mn;let on;(mn=On=we.DriverTypeEnum||(we.DriverTypeEnum={}))[mn.GameReadyDriver=0]="GameReadyDriver",mn[mn.CreatorReadyDriver=1]="CreatorReadyDriver",function(mn){mn.Success="Success",mn.Failure="Failure"}(on=we.ApiStatusEnum||(we.ApiStatusEnum={}))}(aa||(aa={}));var ms=(()=>{return(we=ms||(ms={})).Applicationcontrol=Xs,we.Applicationinfo=qs,we.Bot=ea,we.Clientnotification=ta,we.Discord=na,we.Downloader=ia,we.Gallery=oa,we.Ipc=ra,we.Nvcamera=sa,we.Systeminfo=aa,ms;var we})(),ps=(()=>{return(we=ps||(ps={})).Common=ms,we.Gfe=us,we.Gfn=hs,we.Nvapp=gs,we.Nvcpl=ds,we.Qxp=cs,we.Share=ls,ps;var we})()},98221:(He,de,e)=>{"use strict";e.d(de,{OA:()=>h,WU:()=>a,Y:()=>r});var n=e(6484),i=e(76491),D=e(82516),m=e(1143),y=e(33927),T=e(83720),r=(()=>{return(u=r||(r={})).IGO="igo",u.Streaming="streaming",u.ClientIME="ime",u.PrivacyPolicy="privacy",u.QuitGath="quitGame",u.OscNotification="OscNotification",r;var u})(),a=(()=>{return(u=a||(a={})).Visible="visible",u.Hidden="hidden",a;var u})(),s=(()=>{return(u=s||(s={})).Local="localhost",u.Stage="stage.nvidia.com",u.Partner="partner.nvidia.com",s;var u})();const p=new RegExp("/mall/index[.]html$|/mall/$|/index[.]html$|/$");var t=e(2316),w=e(71570);let h=(()=>{class u{constructor(f,c,g){var I;this.titleService=c,this.ngZone=g,this.keyCodes={c:"KeyC",i:"KeyI",j:"KeyJ",u:"KeyU",f12:"F12"},this.fullScreenEvent=new i.X(!1),this.webOSWindowStateSubject=new i.X("foreground"),this.webOSWindowStateListener=G=>{this.webOSWindowStateSubject.value!==G.detail.state&&this.webOSWindowStateSubject.next(G.detail.state)},this.logger=f.getLogger("gfn/browser-support"),this.isPWAModeOnLGTV=n.ng.isPWAModeOnLGTV(),this.appIcon=document.querySelector("#appIcon"),this.appIconHref=null===(I=this.appIcon)||void 0===I?void 0:I.href}get fullScreenEventSubject(){return this.fullScreenEvent}get fullScreenEventObs$(){return this.fullScreenEvent.asObservable()}get documentVisiblityChange(){return(0,D.R)(document,"visibilitychange")}resetExitPath(){this.fullScreenSource=void 0}setExitPath(f){this.fullScreenSource=f}get resumeFullScreenIGO(){return this.fullScreenSource===r.IGO}get applicationWindowState$(){return this.isPWAModeOnLGTV?this.webOSWindowStateSubject.asObservable():this.documentVisiblityChange.pipe((0,m.O)(0),(0,y.U)(f=>"visible"===document.visibilityState?"foreground":"background"),(0,T.x)())}initialize(f,c){f&&this.ngZone.runOutsideAngular(()=>{document.addEventListener("wheel",this.dummyWheelListener,{passive:!0})}),c||this.disableDevTools(),this.isPWAModeOnLGTV&&this.ngZone.runOutsideAngular(()=>{window.addEventListener("windowStateChanged",this.webOSWindowStateListener)})}dummyWheelListener(f){return f}disableDevTools(){this.ngZone.runOutsideAngular(()=>{document.addEventListener("contextmenu",f=>f.preventDefault()),window.addEventListener("keydown",f=>{(f.code===this.keyCodes.i&&f.ctrlKey&&f.shiftKey||f.code===this.keyCodes.j&&f.ctrlKey&&f.shiftKey||f.code===this.keyCodes.u&&f.ctrlKey||f.code===this.keyCodes.f12||f.code===this.keyCodes.c&&f.shiftKey&&f.metaKey||f.code===this.keyCodes.i&&f.altKey&&f.metaKey||f.code===this.keyCodes.j&&f.altKey&&f.metaKey||f.code===this.keyCodes.u&&f.altKey&&f.metaKey)&&f.preventDefault()})})}getGamepads(){if(!navigator.getGamepads)return[];const f=navigator.getGamepads();return f instanceof Array?f:Array.from(f).filter(g=>!!g)}goToPreviousPage(){window.history.back()}supportsRequestFullscreen(f){return document.fullscreenEnabled&&f.requestFullscreen||document.webkitFullscreenEnabled&&f.webkitRequestFullscreen}isFullscreen(){return document.fullscreenElement||document.webkitFullscreenElement||!this.isPWAModeOnLGTV&&screen.width===window.innerWidth&&screen.height===window.innerHeight}requestFullscreen(f){this.supportsRequestFullscreen(f)?f.requestFullscreen?f.requestFullscreen().catch(c=>{this.logger.error(`Error attempting to enable fullscreen mode: ${c.message} (${c.name})`)}):f.webkitRequestFullscreen?f.webkitRequestFullscreen():this.logger.error("No available method to enter fullscreen"):this.logger.error("Fullscreen not supported")}exitFullscreen(){document.fullscreenElement&&document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():this.logger.error("No available method to exit fullscreen")}isStagingOrDevDomain(){return this.isStagingDomain()||this.isLocalDomain()}isStagingDomain(){return window.location.hostname.endsWith(s.Stage)}isPartnerDomain(){return window.location.hostname.endsWith(s.Partner)}isLocalDomain(){return window.location.hostname.endsWith(s.Local)}getHostBranchName(){return window.geForceNowStartLocationPathName.replace(p,"")}setTitle(f){f&&this.titleService.setTitle(f)}blinkAppIcon(f){this.appIcon&&this.appIconHref&&(f%2==1?this.appIcon.href="./assets/img/transparent.png":this.resetAppIcon())}resetAppIcon(){this.appIconHref&&(this.appIcon.href=this.appIconHref)}cleanup(){document.removeEventListener("wheel",this.dummyWheelListener),this.resetAppIcon(),this.isPWAModeOnLGTV&&window.removeEventListener("windowStateChanged",this.webOSWindowStateListener)}}return u.\u0275fac=function(f){return new(f||u)(t.LFG(n.ed),t.LFG(w.Dx),t.LFG(t.R0b))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},93404:(He,de,e)=>{"use strict";e.d(de,{j:()=>Me,tu:()=>B,LK:()=>F});var n=e(18293),i=e(85816),D=e(2984),m=e(6484),y=(()=>{return(xe=y||(y={})).Shared="sharedStore",xe.Webclient="webclientStore",xe.Config="configStore",y;var xe})(),T=(()=>{return(xe=T||(T={})).Read="Read",xe.Write="Write",xe.Remove="Remove",xe.Cache="Cache",T;var xe})(),r=e(2316);const a=D.Gh.Common.Applicationcontrol;let s=(()=>{class xe extends m.nM{constructor(Se){super(),this.dbService=Se}get handlers(){return{module:a.DeleteCookies.module,commands:{[a.DeleteCookies.method]:this.deleteCookies.bind(this),[a.LoadStringTable.method]:this.loadStringTable.bind(this),[a.ReadConfig.method]:this.readConfig.bind(this),[a.WriteConfig.method]:this.writeConfig.bind(this)}}}deleteCookies(Se){return this.makeResult("true")}loadStringTable(Se){return this.makeResult("true")}readConfig(Se){return this.dbService.getGlobalStore(y.Config).getItem(Se.payload.appname).pipe((0,n.K)(Ge=>this.makeError(500,"IndexedDB Error: "+Ge.toString())),(0,i.zg)(Ge=>this.makeResult(Ge)))}writeConfig(Se){return this.dbService.getGlobalStore(y.Config).setItem(Se.payload.appname,Se.payload.data).pipe((0,n.K)(Ge=>this.makeError(500,"IndexedDB Error: "+Ge.toString())),(0,i.zg)(Ge=>this.makeResult("true")))}}return xe.\u0275fac=function(Se){return new(Se||xe)(r.LFG(m.MC))},xe.\u0275prov=r.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();var p=e(3076),l=e(79441);const t=new l.xQ,w=new l.xQ;var h=e(12556);const u="WebclientChannel",o=D.Gh.Common.Ipc;let f=(()=>{class xe extends m.nM{constructor(Se){super(),this.browserLeanModeService=Se,this.ipcEnabled=!0,this.startBroadcastListener(),Se.leanModeTransitionState.subscribe(Ge=>{this.ipcEnabled=!Ge,this.ipcEnabled?this.startBroadcastListener():this.stopBroadcastListener()})}ngOnDestroy(){this.stopBroadcastListener()}startBroadcastListener(){this.messages=[],"undefined"!=typeof BroadcastChannel?(this.broadcastChannel=new BroadcastChannel(u),this.broadcastChannel.onmessage=Se=>{this.onReceiveMessage(Se.data)}):this.localStorageAvailable()&&(this.localStorage=localStorage,this.uuid=(0,p.Rl)(),this.storageEventListener=Se=>{if(Se.key!==u)return;const Ge=JSON.parse(Se.newValue);!Ge||Ge.senderUuid===this.uuid||this.onReceiveMessage(Ge.message)},window.addEventListener("storage",this.storageEventListener))}stopBroadcastListener(){this.localStorage&&this.storageEventListener&&window.removeEventListener("storage",this.storageEventListener),this.broadcastChannel&&(this.broadcastChannel.close(),this.broadcastChannel=null)}get handlers(){return{module:o.Pop.module,commands:{[o.Pop.method]:this.popMessage.bind(this),[o.Push.method]:this.pushMessage.bind(this)}}}pushMessage(Se){return this.ipcEnabled&&this.broadcastMessage(Se.payload.message),this.makeResult("IPC Push Message successful")}popMessage(Se){if(this.ipcEnabled&&this.messages.length){const Ge=this.messages.pop();return this.makeResult(Ge)}{const Ge={type:h.oIn.QueueEmpty,content:JSON.stringify(!1)};return this.makeResult(JSON.stringify(Ge))}}broadcastMessage(Se){this.broadcastChannel?this.broadcastChannel.postMessage(Se):this.localStorage&&(this.localStorage.setItem(u,JSON.stringify({message:Se,senderUuid:this.uuid})),this.localStorage.removeItem(u))}onReceiveMessage(Se){this.messages.push(JSON.stringify(Se)),t.next({sender:"IpcPlugin",data:m.Nx.IpcNewMessage})}localStorageAvailable(){try{const Se="__storage_test__";return localStorage.setItem(Se,Se),localStorage.removeItem(Se),!0}catch(Se){return!1}}}return xe.\u0275fac=function(Se){return new(Se||xe)(r.LFG(m.rn))},xe.\u0275prov=r.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();var c=e(202),g=e(33987);const I=D.Gh.Common.Sharedstorage;let G=(()=>{class xe extends m.nM{constructor(Se,Ge){super(),this.dbService=Se,this.swService=Ge}get handlers(){return{module:I.Read.module,commands:{[I.Read.method]:this.readFromSharedStorage.bind(this),[I.Write.method]:this.writeToSharedStorage.bind(this),[I.Remove.method]:this.removeFromSharedStorage.bind(this),[I.Cache.method]:this.getCacheOfSharedStorage.bind(this)}}}readFromSharedStorage(Se){return this.dbService.getGlobalStore(y.Shared).getItem(Se.payload.path[0]).pipe((0,n.K)(Ge=>this.makeError(500,"IndexedDB Error: "+Ge.toString())),(0,i.zg)(Ge=>{if(!Ge)return this.makeError(204,"Data not found");if(1===Se.payload.path.length)return this.makeResult(Ge);{const St=(0,c.get)(Ge,Se.payload.path.slice(1),null);return null!==St?this.makeResult(St):this.makeError(204,"Data not found")}}))}writeToSharedStorage(Se){return this.dbService.getGlobalStore(y.Shared).getItem(Se.payload.path[0]).pipe((0,n.K)(Ge=>this.makeError(500,"IndexedDB Error: "+Ge.toString())),(0,i.zg)(Ge=>{let St={};return Ge&&(St=Ge),St=1===Se.payload.path.length?Se.payload.data:(0,c.set)(St,Se.payload.path.slice(1),Se.payload.data),this.postCacheUpdateMessage(T.Write,Se.payload.path,St),this.dbService.getGlobalStore(y.Shared).setItem(Se.payload.path[0],St)}),(0,i.zg)(Ge=>this.makeResult("true")))}removeFromSharedStorage(Se){return this.dbService.getGlobalStore(y.Shared).getItem(Se.payload.path[0]).pipe((0,n.K)(Ge=>this.makeError(500,"IndexedDB Error: "+Ge.toString())),(0,i.zg)(Ge=>1===Se.payload.path.length?(this.postCacheUpdateMessage(T.Remove,Se.payload.path),this.dbService.getGlobalStore(y.Shared).removeItem(Se.payload.path[0])):this.makeResult("false")),(0,i.zg)(Ge=>this.makeResult("true")))}getCacheOfSharedStorage(Se){return this.dbService.getGlobalStore(y.Shared).getAllItemsByCursor().pipe((0,n.K)(Ge=>this.makeError(500,"IndexedDB Error: "+Ge.toString())),(0,i.zg)(Ge=>(this.postCacheUpdateMessage(T.Cache,[],Ge),this.makeResult(Ge))))}postCacheUpdateMessage(Se,Ge,St){const Tt={source:m.nM.browserInstanceId,path:Ge,data:null!=St?St:{},operationType:Se},Te={type:g.rL.SharedStorageUpdate,content:JSON.stringify(Tt)};Se!==T.Cache&&this.swService.postMessageSw(Te),w.next(Tt)}}return xe.\u0275fac=function(Se){return new(Se||xe)(r.LFG(m.MC),r.LFG(g.HR))},xe.\u0275prov=r.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();var x=e(90490),E=e(81134),P=e(79902),v=e(33927),O=e(53466),C=e(92597),_=e(98636);let F=(()=>{class xe{}return xe.\u0275fac=function(Se){return new(Se||xe)},xe.\u0275prov=r.Yz7({token:xe,factory:xe.\u0275fac}),xe})();var V=e(88689),b=e(34361);let B=(()=>{class xe{constructor(){this.platformDetails$=(0,b.D)((0,V.getPlatformDetails)()).pipe((0,C.d)(1))}getPlatformInfo(){return m.ng.isBrowserPlatform()?this.platformDetails$.pipe((0,i.zg)(Se=>(0,x.$R)((0,E.of)(Se),this.getNetworkType(Se.os))),(0,v.U)(([Se,Ge])=>{const St=Se.os;return{details:Se,systemName:this.getSystemName(Se),processorArchitecture:this.getProcessorArchitecture(St),networkType:Ge}})):(0,E.of)(null)}getSystemName(Se){return"Tizen"===Se.os?(0,p.dK)(p.qW.ModelName):Se.deviceModel||void 0}getProcessorArchitecture(Se){if("Tizen"===Se)return(0,p.dK)(p.qW.PlatformCoreCpuArch);const Ge=window.navigator.appVersion;let St="x86";return Ge.includes("WOW64")||Ge.includes("Win64")?St="x64":Ge.includes("arm")&&(St="arm"),St}getNetworkType(Se){return"Tizen"===Se?(0,p.bw)():(0,E.of)(void 0)}}return xe.\u0275fac=function(Se){return new(Se||xe)},xe.\u0275prov=r.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();const U="deviceId",A="systemInfoOverride",S=D.Gh.Common.Systeminfo;let Y=(()=>{class xe extends m.nM{constructor(Se,Ge,St,Tt,Te){var Je;super(),this.dbService=St,this.localeConfig=Tt,this.platformInfoService=Te,this.isOverrideStored=!1,this.sysInfoHandlers=new Map,this.logger=Se.getLogger("SystemInfoPlugin"),this.logger.info("User Agent:",window.navigator.userAgent),this.overrideConfig=null!==(Je=null==Ge?void 0:Ge.systemInfoOverrideConfig)&&void 0!==Je?Je:{allowedOSs:[],override:{}},this.setSysInfoHandler("DeviceType",this.getDeviceTypeInternal.bind(this)),this.setSysInfoHandler("Platform",this.getPlatformInternal.bind(this)),this.setSysInfoHandler("OSName",this.getOSNameInternal.bind(this)),this.setSysInfoHandler("OSVersion",this.getOSVersionInternal.bind(this)),this.setSysInfoHandler("BrowserName",this.getBrowserNameInternal.bind(this)),this.setSysInfoHandler("BrowserVersion",this.getBrowserVersionInternal.bind(this)),this.setSysInfoHandler("UserDefaultUILanguage",this.getUserDefaultUILanguageInternal.bind(this)),this.setSysInfoHandler("ProcessorArchitecture",this.getProcessorArchitectureInternal.bind(this)),this.setSysInfoHandler("Display",this.getDisplayInternal.bind(this)),this.setSysInfoHandler("GPU",this.getGPUInternal.bind(this)),this.setSysInfoHandler("Disk",this.getDiskInternal.bind(this)),this.setSysInfoHandler("Network",this.getNetworkInternal.bind(this)),this.setSysInfoHandler("ConfidenceInBrowser",this.getConfidenceInBrowserInternal.bind(this)),this.setSysInfoHandler("IsBrowserForged",this.getIsBrowserForgedInternal.bind(this)),this.setSysInfoHandler("VendorName",this.getVendorNameInternal.bind(this)),this.setSysInfoHandler("SystemName",this.getSystemNameInternal.bind(this))}get handlers(){return{module:S.GetDeviceId.module,commands:{[S.GetDeviceId.method]:this.getDeviceId.bind(this),[S.GetSystemInfo.method]:this.getSystemInfo.bind(this),[S.GetGPUInfo.method]:this.getGpuInfo.bind(this),[S.GetGenericInfo.method]:this.getGenericInfo.bind(this)}}}setSysInfoHandler(Se,Ge){this.sysInfoHandlers.set(Se,Ge)}makeSystemInfoData(Se,Ge){if(Ge)return this.sysInfoHandlers.has(Ge)?this.sysInfoHandlers.get(Ge)(Se):(this.logger.error(`Error: key '${Ge}' not found`),{});{const St={};return this.sysInfoHandlers.forEach((Tt,Te)=>{St[Te]=Tt(Se)[Te]}),St}}getDeviceId(Se){return this.readDeviceId().pipe((0,i.zg)(Ge=>Ge?this.makeResult(Ge):(Ge=(0,p.Rl)(),this.storeDeviceId(Ge).pipe((0,P.w)(St=>this.makeResult(Ge))))),(0,n.K)(Ge=>this.makeError(500,"Failed to get device id: "+Ge.toString())))}getSystemInfo(Se){const Ge=this.platformInfoService.getPlatformInfo().pipe((0,v.U)(Tt=>{var Te;return this.makeSystemInfoData(Tt,null===(Te=Se.payload)||void 0===Te?void 0:Te.key)})),St=this.platformInfoService.getPlatformInfo().pipe((0,i.zg)(Tt=>{var Te;const Je=this.getMappedDeviceOS(Tt.details.os);return this.getSystemInfoOverride(Je,null===(Te=Se.payload)||void 0===Te?void 0:Te.key)}));return(0,x.$R)(Ge,St).pipe((0,O.q)(1),(0,i.zg)(([Tt,Te])=>(Object.assign(Tt,Te),this.makeResult(JSON.stringify(Tt)))),(0,C.d)(1))}getGpuInfo(Se){return this.makeError(500,"Not implemented")}getGenericInfo(Se){return this.makeError(500,"Not implemented")}readDeviceId(){return this.dbService.getGlobalStore(y.Webclient).getItem(U)}storeDeviceId(Se){return this.dbService.getGlobalStore(y.Webclient).setItem(U,Se)}getDeviceTypeInternal(Se){return{DeviceType:this.getMappedDeviceType(Se.details.deviceType)}}getPlatformInternal(Se){return{Platform:Se.details.os}}getOSNameInternal(Se){return{OSName:this.getMappedDeviceOS(Se.details.os),OSVersion:this.getOSVersionInternal(Se).OSVersion}}getOSVersionInternal(Se){return{OSVersion:Se.details.osVer&&"0"!==Se.details.osVer?Se.details.osVer:m.Px}}getBrowserNameInternal(Se){return{BrowserName:this.getMappedBrowserName(Se.details.browser)}}getBrowserVersionInternal(Se){return{BrowserVersion:Se.details.browserFullVer||m.Px}}getUserDefaultUILanguageInternal(Se){const Ge={UserDefaultUILanguage:this.getUserPreferredSupportedLanguage("Safari"===Se.details.browser)};return this.logger.info("preferred languages are",window.navigator.languages,"default pick is",Ge.UserDefaultUILanguage),Ge}getProcessorArchitectureInternal(Se){return{ProcessorArchitecture:Se.processorArchitecture||void 0}}getDisplayInternal(){return{Display:[{RefreshRate:"",LogicalResolution:window.screen.width.toString()+" x "+window.screen.height.toString(),PhysicalResolution:Math.floor(window.screen.width*window.devicePixelRatio)+" x "+Math.floor(window.screen.height*window.devicePixelRatio)}]}}getGPUInternal(Se){return{GPU:[]}}getDiskInternal(Se){return{Disk:[]}}getNetworkInternal(Se){var Ge;const St=this.getMappedDeviceOS(Se.details.os);return{Network:{Fingerprint:"",NetworkType:null!==(Ge=this.getMappedNetworkType(St,Se.networkType))&&void 0!==Ge?Ge:void 0}}}getConfidenceInBrowserInternal(Se){return{ConfidenceInBrowser:Se.details.confidence}}getIsBrowserForgedInternal(Se){return{IsBrowserForged:Se.details.forging}}getVendorNameInternal(Se){return{VendorName:Se.details.vendor||void 0}}getSystemNameInternal(Se){return{SystemName:Se.systemName||void 0}}getSystemInfoOverride(Se,Ge){if(!this.overrideConfig.allowedOSs.includes(Se))return(0,E.of)({});const St=(0,v.U)(Te=>{let Je={};return Te&&(Ge&&Te[Ge]?Je[Ge]=Te[Ge]:Ge||(Je=Te)),Je}),Tt=this.overrideConfig.override;return Tt&&Object.keys(Tt).length>0?(this.storeSystemInfoOverrideIfNeeded(Tt),(0,E.of)(Tt).pipe(St)):this.readSystemInfoOverride().pipe((0,_.b)(Te=>{Te&&(this.logger.info("Override is loaded from DB"),this.overrideConfig.override=Te)}),St)}storeSystemInfoOverrideIfNeeded(Se){this.isOverrideStored||this.dbService.getGlobalStore(y.Webclient).setItem(A,Se).pipe((0,O.q)(1),(0,_.b)(Ge=>{this.logger.info("Override is stored in DB"),this.isOverrideStored=!0})).subscribe()}readSystemInfoOverride(){return this.dbService.getGlobalStore(y.Webclient).getItem(A)}sanitizeLanguage(Se,Ge){return Ge&&(Se=Se.replace(/(.*[-_])([a-zA-Z]*)/,(St,Tt,Te)=>`${Tt}${Te.toUpperCase()}`)),Se}getUserPreferredSupportedLanguage(Se){const Ge=window.navigator.languages.map(Te=>this.sanitizeLanguage(Te.replace("-","_"),Se)),St=this.localeConfig.supportedLang;let Tt;return Ge.some(function(Te){let Je=St.find(function(xt){return Te===xt});if(!Je&&2===Te.length){const xt=m.FP.get(Te);Je=null==xt?void 0:xt.find(Ye=>St.includes(Ye))}return!Tt&&Je&&(Tt=Je),!!Je}),Tt||this.sanitizeLanguage(window.navigator.language,Se)}getMappedDeviceType(Se){let Ge=m.z7.Undefined;return"CONSOLE"===Se?Ge=m.z7.Console:"TABLET"===Se?Ge=m.z7.Tablet:"PHONE"===Se?Ge=m.z7.Phone:"TV"===Se?Ge=m.z7.TV:"LAPTOP"===Se?Ge=m.z7.Laptop:"DESKTOP"===Se&&(Ge=m.z7.Desktop),Ge}getMappedBrowserName(Se){switch(Se){case"Chrome":return m.Aq.CHROME;case"Safari":return m.Aq.SAFARI;case"Yandex":return m.Aq.YANDEX;case"Edge":return m.Aq.EDGE;case"Edge_Legacy":return m.Aq.EDGE_LEGACY;case"Firefox":return m.Aq.FIREFOX;case"Samsung":return m.Aq.SAMSUNG;case"Chromium":return m.Aq.CHROMIUM;case"Opera":return m.Aq.OPERA;case"Brave":return m.Aq.BRAVE;case"Silk":return m.Aq.SILK;case"Unknown":case"ReactNative":default:return m.Aq.Undefined}}getMappedDeviceOS(Se){switch(Se.toLowerCase()){case"windows":return m.wi.Windows;case"macosx":case"macos":return m.wi.MacOS;case"chromeos":case"chrome os":return m.wi.ChromeOS;case"linux":return m.wi.Linux;case"ios":return m.wi.IOS;case"ipados":return m.wi.IPadOS;case"tizen":return m.wi.Tizen;case"webos":return m.wi.WebOS;case"xbox":return m.wi.XBox;case"android":return m.wi.Android;case"steamos":return m.wi.SteamOS;default:return m.wi.Undefined}}getMappedNetworkType(Se,Ge){if(Se===m.wi.Tizen)switch(Ge){case"ETHERNET":return m.VV.Ethernet;case"WIFI":return m.VV.WiFi2_4;case"2G":case"2.5G":case"3G":case"4G":case"NET_PROXY":return m.VV.Other;default:return m.VV.Unknown}}}return xe.\u0275fac=function(Se){return new(Se||xe)(r.LFG(m.ed),r.LFG(F,8),r.LFG(m.MC),r.LFG(m.b$),r.LFG(B))},xe.\u0275prov=r.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();var se=e(89919),fe=e(9170);const $=D.Gh.Common.Windowevents,ae=xe=>`json:${JSON.stringify(xe)}`;let me=(()=>{class xe extends m.nM{constructor(Se,Ge,St){super(),this.swService=Ge,this.ngZone=St,this.windowEvents=new l.xQ,this.defaultSharedStorageCache={type:m.Nx.SharedStorageUpdate},this.sharedStorageCache=Object.assign({},this.defaultSharedStorageCache),this.handleTizenAppControlEvent=()=>{const{callerAppId:Tt,appControl:Te}=(0,p.f6)();this.logger.info(`Received appcontrol event from (${Tt}), operation: ${Te.operation}`);const Je=Te&&(0,p.a_)(Te);Je?this.ngZone.run(()=>{this.windowEvents.next(ae({type:m.Nx.RouteChange,"new-route":Je}))}):this.logger.error("Invalid payload in requested app control")},this.logger=Se.getLogger("CommonBrowserPlugins/WindowEvents"),this.logger.info("InstanceId: ",m.nM.browserInstanceId),t.pipe((0,fe.h)(Tt=>Tt.data===m.Nx.IpcNewMessage),(0,v.U)(Tt=>Tt.data)).subscribe(Tt=>this.onInternalMessage(Tt),Tt=>{}),(0,se.T)(w,this.sharedStorageMessagesFromOtherTabs).subscribe(Tt=>{this.onSharedStorageUpdate(Tt)},Tt=>{this.logger.error("Error receiving update event from shared storage:",Tt)}),m.ng.isPWAModeOnSamsungTV()&&St.runOutsideAngular(()=>{window.addEventListener("appcontrol",this.handleTizenAppControlEvent)})}get handlers(){return{module:$.RegisterWindowEventsCallback.module,commands:{[$.RegisterWindowEventsCallback.method]:this.registerWindowCallbacks.bind(this)}}}get sharedStorageMessagesFromOtherTabs(){return this.swService.swSharedStorageUpdate$.pipe((0,v.U)(Se=>JSON.parse(Se.content)),(0,fe.h)(Se=>Se.source!==m.nM.browserInstanceId))}onInternalMessage(Se){this.windowEvents.next(Se)}onSharedStorageUpdate(Se){switch(Se.operationType){case T.Read:this.logger.verbose("Read operation (no-op)");break;case T.Write:this.logger.verbose("Write operation:",Se),(0,c.set)(this.sharedStorageCache,Se.path,Se.data);break;case T.Remove:this.logger.verbose("Remove operation:",Se),(0,c.unset)(this.sharedStorageCache,Se.path);break;case T.Cache:this.logger.verbose("Cache operation:",Se),this.sharedStorageCache=(0,c.isEmpty)(Se.data)?this.sharedStorageCache:Object.assign(Object.assign({},this.sharedStorageCache),Se.data);break;default:this.logger.verbose("Invalid Operation Type:",Se.operationType)}this.windowEvents.next(ae(this.sharedStorageCache))}registerWindowCallbacks(Se){return this.makePersistentResult(this.windowEvents.asObservable())}}return xe.\u0275fac=function(Se){return new(Se||xe)(r.LFG(m.ed),r.LFG(g.HR),r.LFG(r.R0b))},xe.\u0275prov=r.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();var ye=D.Yk.Common.Applicationinfo;const ue=D.Gh.Common.Applicationinfo;let X=(()=>{class xe extends m.nM{constructor(){super(),this.applicationLifeTimeSubject=new l.xQ}get handlers(){return{module:ue.IsApplicationRunning.module,commands:{[ue.IsApplicationRunning.method]:this.isApplicationRunning.bind(this),[ue.IsApplicationInstalled.method]:this.IsApplicationInstalled.bind(this),[ue.GetIsUIRefreshed.method]:this.getIsUIRefreshed.bind(this),[ue.RegisterAppLifetimeEventsCallback.method]:this.registerAppLifetimeEventsCallback.bind(this),[ue.OpenFileDialog.method]:this.openFileDialog.bind(this),[ue.OpenDirectoryBrowser.method]:this.openDirectoryBrowser.bind(this)}}}applicationLifeTimeListener(Se){window.addEventListener("unload",Ge=>{Se.next({type:ye.ApplicationLifetimeEventType.ApplicationExit,reason:ye.ShutdownReason.BrowserExit})})}isApplicationRunning(Se){return this.makeResult("true")}IsApplicationInstalled(Se){return this.makeResult("true")}getIsUIRefreshed(Se){return this.makeResult("false")}registerAppLifetimeEventsCallback(Se){return this.applicationLifeTimeListener(this.applicationLifeTimeSubject),this.makePersistentResult(this.applicationLifeTimeSubject.asObservable())}openFileDialog(Se){return this.makeResult("true")}openDirectoryBrowser(Se){return this.makeResult("true")}}return xe.\u0275fac=function(Se){return new(Se||xe)},xe.\u0275prov=r.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();var j=e(98221);const K=D.Gh.Common.Windowcontrol;let Z=(()=>{class xe extends m.nM{constructor(Se,Ge){super(),this.browserSupportService=Ge,this.logger=Se.getLogger("crimson/browser/windowcontrol-plugin")}get handlers(){return{module:K.Maximize.module,commands:{[K.Maximize.method]:this.maximize.bind(this),[K.Minimize.method]:this.minimize.bind(this),[K.Restore.method]:this.restore.bind(this),[K.Resize.method]:this.resize.bind(this),[K.Close.method]:this.close.bind(this),[K.Focus.method]:this.focus.bind(this),[K.RequestUserAttention.method]:this.requestUserAttention.bind(this)}}}maximize(Se){return this.makeResult("true")}minimize(Se){return this.makeResult("true")}restore(Se){return this.makeResult("true")}resize(Se){if(0===Se.payload.x&&0===Se.payload.y&&0===Se.payload.w&&0===Se.payload.h){const Ge=document.getElementById("fullscreen-container");Ge&&this.browserSupportService.requestFullscreen(Ge)}return this.makeResult("true")}close(Se){return this.makeResult("true")}focus(Se){return this.makeResult("true")}requestUserAttention(Se){return this.makeResult("true")}}return xe.\u0275fac=function(Se){return new(Se||xe)(r.LFG(m.ed),r.LFG(j.OA))},xe.\u0275prov=r.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();const L=D.Gh.Common.Update;let W=(()=>{class xe extends m.nM{constructor(){super()}get handlers(){return{module:L.ReadTicket.module,commands:{[L.ReadTicket.method]:this.readTicket.bind(this),[L.GfnUpdate.method]:this.gfnUpdate.bind(this)}}}readTicket(Se){return this.makeResult('{"available":false,"severity":"","version":""}')}gfnUpdate(Se){return this.makeResult("true")}}return xe.\u0275fac=function(Se){return new(Se||xe)},xe.\u0275prov=r.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();var te=e(52349),ie=D.Yk.Common.Clientnotification;const Q=D.Gh.Common.Clientnotification;var k=(()=>{return(xe=k||(k={})).Granted="granted",xe.Denied="denied",xe.Default="default",k;var xe})();let oe=(()=>{class xe extends m.nM{constructor(Se,Ge,St,Tt){super(),this.browserSupportService=Ge,this.serviceWorkerService=St,this.projectInterfaceService=Tt,this.success={_return_internal:ie.InternalErrorCodeEnum.Success},this.error={_return_internal:ie.InternalErrorCodeEnum.Error},this.logger=Se.getLogger("ClientNotificationPlugin"),this.browserSupportService.documentVisiblityChange.subscribe(Te=>{this.isDocumentVisible=document.visibilityState===j.WU.Visible})}get handlers(){return{module:Q.ShowClientNotifications.module,commands:{[Q.ShowClientNotifications.method]:this.showClientNotification.bind(this),[Q.ClearNotificationsQueue.method]:this.clearNotificationsQueue.bind(this),[Q.DeleteNotification.method]:this.deleteNotification.bind(this)}}}deleteNotification(Se){return this.projectInterfaceService.isNotificationAllowedCallBack().pipe((0,n.K)(Ge=>this.makeResult(JSON.stringify(this.error))),(0,i.zg)(Ge=>(Ge?(this.serviceWorkerService.postMessageSw({type:g.rL.UiPushNotification,content:JSON.stringify({delete:Se.payload.uniqueId})}),this.logger.info("Notification Info is sent to SW")):this.logger.info("Notifications are not allowed"),this.makeResult(JSON.stringify(this.success)))))}clearNotificationsQueue(Se){return this.projectInterfaceService.isNotificationAllowedCallBack().pipe((0,n.K)(Ge=>this.makeResult(JSON.stringify(this.error))),(0,i.zg)(Ge=>(Ge&&this.serviceWorkerService.postMessageSw({type:g.rL.UiPushNotification,content:JSON.stringify({clear:Se.payload.clear})}),this.makeResult(JSON.stringify(this.success)))))}showClientNotification(Se){return this.projectInterfaceService.isNotificationAllowedCallBack().pipe((0,n.K)(Ge=>this.makeResult(JSON.stringify(this.error))),(0,i.zg)(Ge=>this.canSendNotification(Ge)?this.isFullScreenAndVisible()?(this.logger.info("Cannot send Notifications when screen is fullscreen & visible"),this.makeResult(JSON.stringify({_return_internal:ie.InternalErrorCodeEnum.Error_NotFullScreen}))):(this.serviceWorkerService.postMessageSw({type:g.rL.UiPushNotification,content:JSON.stringify({title:Se.payload.title,body:Se.payload.body,direction:Se.payload.direction,language:Se.payload.language,tag:Se.payload.tag,silent:Se.payload.silent})}),this.logger.info("Notifications are sent to SW"),this.makeResult(String(this.success._return_internal))):(this.logger.info("Cannot send Notification as permission is not given"),this.makeResult(JSON.stringify({_return_internal:ie.InternalErrorCodeEnum.Error_PermissionNotGiven})))))}canSendNotification(Se){return Se&&Notification.permission===k.Granted}isFullScreenAndVisible(){return this.browserSupportService.isFullscreen()&&this.isDocumentVisible}}return xe.\u0275fac=function(Se){return new(Se||xe)(r.LFG(m.ed),r.LFG(j.OA),r.LFG(g.HR),r.LFG(te.m3))},xe.\u0275prov=r.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();const N=D.Gh.Gfn.Gfnbroadcast,Me=[{provide:m.m1,useClass:s,multi:!0},{provide:m.m1,useClass:f,multi:!0},{provide:m.m1,useClass:G,multi:!0},{provide:m.m1,useClass:Y,multi:!0},{provide:m.m1,useClass:me,multi:!0},{provide:m.m1,useClass:X,multi:!0},{provide:m.m1,useClass:Z,multi:!0},{provide:m.m1,useClass:W,multi:!0},{provide:m.m1,useClass:(()=>{class xe extends m.nM{constructor(Se,Ge){super(),this.loggingService=Se,this.projectInterfaceService=Ge,this.logger=Se.getLogger("GFNBroadcast")}get handlers(){return{module:"GfnBroadcast",commands:{[N.BroadcastConnect.method]:this.broadcastConnect.bind(this),[N.GfnBroadcastResponseNotification.method]:this.broadcastResponseNotification.bind(this),[N.BroadcastDisconnect.method]:this.broadcastDisconnect.bind(this)}}}createBroadcastMessage(Se){const Ge=JSON.stringify({command:Se.command,method:Se.method,module:Se.module,payload:Se.payload});return{method:"POST",url:"rtsp://Serenity/GfnBroadcast/v.1.0/PostMessage",data:{data:Ge,size:Ge.length}}}broadcastConnect(Se){const Ge=this.createBroadcastMessage(Se);return this.projectInterfaceService.postCustomMessage(JSON.stringify(Ge),h.gOl.Serenity),this.makeResult("true")}broadcastDisconnect(Se){const Ge=this.createBroadcastMessage(Se);return this.projectInterfaceService.postCustomMessage(JSON.stringify(Ge),h.gOl.Serenity),this.makeResult("true")}parseJsonString(Se){try{return JSON.parse(Se)}catch(Ge){return!1}}broadcastResponseNotification(Se){return this.projectInterfaceService.onCustomMessageReceived.pipe((0,v.U)(Ge=>this.parseJsonString(Ge.data)),(0,fe.h)(Ge=>Ge&&"rtsp://Serenity/GfnBroadcast/v.1.0/BusMessage"===(null==Ge?void 0:Ge.url)&&(null==Ge?void 0:Ge.event)),(0,i.zg)(Ge=>{let St;if("connectResponse"===(null==Ge?void 0:Ge.event)){const Te=null==Ge?void 0:Ge.status;Te&&(St={broadcastConnectResponse:{enableStatus:Te}})}if("disconnectResponse"===(null==Ge?void 0:Ge.event)){const Te=null==Ge?void 0:Ge.status;Te&&(St={broadcasDisconnectResponse:{disconnectStatus:Te}})}this.logger.info("broadcastResponse=",St);const Tt=JSON.stringify(St);return this.makeResult(Tt)}))}}return xe.\u0275fac=function(Se){return new(Se||xe)(r.LFG(m.ed),r.LFG(te.m3))},xe.\u0275prov=r.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})(),multi:!0},{provide:m.m1,useClass:oe,multi:!0}]},21200:(He,de,e)=>{"use strict";e.d(de,{N:()=>D});var n=e(2316);let D=(()=>{class m{}return m.\u0275fac=function(T){return new(T||m)},m.\u0275prov=n.Yz7({token:m,factory:m.\u0275fac}),m})()},99094:(He,de,e)=>{"use strict";e.d(de,{D:()=>r});var n=e(81134),i=e(45871),D=e(2316),m=e(21200);function y(a){return[a.system,a.module,a.method,a.legacyCommand].join(".")}let r=(()=>{class a{constructor(p){this.bridgeConfig=p,this.responses={},this.persistentResponses={},this.errors={},this.configMocks={},this.callData={};for(const l of Object.values(p.mocks))this.configMocks[y(l.command)]=l.return}createResponse(p,l){const t=y(p);delete this.errors[t],this.responses[t]=l}createResponseSequence(p,l){const t=y(p);delete this.errors[t],this.responses[t]=l}createPersistentResponse(p,l){if(!p.persistent)throw new Error("Can only create a persistent response for persistent commands");{const t=y(p);delete this.errors[t],this.persistentResponses[t]=l}}createErrorResponse(p,l){const t=y(p);delete this.responses[t],this.errors[t]=l}executeCommand(p,l){const t=y(p);this.cacheCallData(t,l);let w=(0,n.of)(void 0);return t in this.errors?w=(0,i._)(this.errors[t]):t in this.responses?w=Array.isArray(this.responses[t])?(0,n.of)(this.responses[t].shift()):(0,n.of)(this.responses[t]):t in this.configMocks?w=(0,n.of)(this.configMocks[t]):t in this.persistentResponses&&(w=this.persistentResponses[t]),w}hasOverrideMock(p){const l=y(p);return l in this.responses||l in this.persistentResponses}hasErrorMock(p){return y(p)in this.errors}hasConfigMock(p){return y(p)in this.configMocks}hasMock(p){const l=this.hasOverrideMock(p)||this.hasConfigMock(p)||this.hasErrorMock(p);return this.bridgeConfig.isUnitTestConfig&&!l&&console.error("No mock provided for: "+y(p)),l}cacheCallData(p,l){this.bridgeConfig.cacheMockedCallData&&(p in this.callData||(this.callData[p]={count:0,params:[]}),this.callData[p].count++,this.callData[p].params.push(l))}resetCallData(){this.callData={}}getCallData(p){const l=y(p);return l in this.callData?this.callData[l]:{count:0,params:[]}}}return a.\u0275fac=function(p){return new(p||a)(D.LFG(m.N))},a.\u0275prov=D.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},38582:(He,de,e)=>{"use strict";e.d(de,{d:()=>m});var n=e(2316),i=e(28531),D=e(99094);let m=(()=>{class y{constructor(r,a){this.logger=r,this.bridgeMockService=a}makeFullBridgeCommand(r,a,s){return Object.assign({command:r.legacyCommand,system:r.system,module:r.module,method:r.method,payload:a},s?a:null)}unpackReturnPayload(r){try{const a=JSON.parse(r);return"object"==typeof a&&"reference_uniqueid"in a&&"method"in a&&"payload"in a?a.payload:a}catch(a){return r}}handleSuccess(r,a,s){switch(s){case"true":r.next(!0);break;case"false":r.next(!1);break;default:r.next(this.unpackReturnPayload(s))}a||r.complete()}handleFailure(r,a,s,p,l){const t={code:s,message:p,isCancelled:204===s,request:a};this.logger.info(`Bridge Query returned error code ${s}: ${p}. Command: ${JSON.stringify(l?a:a.command)}`),r.error(t)}executeCommand(r,a,s=!0){return this.bridgeMockService.hasMock(r)?this.bridgeMockService.executeCommand(r,a):this.executeCommandInternal(r,a,s)}}return y.\u0275fac=function(r){return new(r||y)(n.LFG(i.Yd),n.LFG(D.D))},y.\u0275prov=n.Yz7({token:y,factory:y.\u0275fac}),y})()},97430:(He,de,e)=>{"use strict";e.d(de,{m1:()=>h,NQ:()=>G.N,dF:()=>n.d,Km:()=>I,nM:()=>w,U5:()=>u});var n=e(38582),i=e(2316),D=e(61786),m=e(28531),y=e(99094);let T=(()=>{class x extends n.d{constructor(P,v,O){super(P.getLogger("crimson/cef"),O),this.ngZone=v}static isCefPlatform(){return"cefQuery"in window}executeCommandInternal(P,v,O){const C=this.makeFullBridgeCommand(P,v,P.legacyCommand!==x.EXTENSION_MESSAGE),_=JSON.stringify(C),F=window.cefQuery;return new D.y(V=>{if(F)F({request:_,persistent:P.persistent,onSuccess:b=>{i.R0b.isInAngularZone()?this.handleSuccess(V,P.persistent,b):this.ngZone.run(()=>{this.handleSuccess(V,P.persistent,b)})},onFailure:(b,B)=>{i.R0b.isInAngularZone()?this.handleFailure(V,C,b,B,O):this.ngZone.run(()=>{this.handleFailure(V,C,b,B,O)})}});else{const b=_;this.logger.error(b),this.handleFailure(V,C,500,b,O)}})}}return x.EXTENSION_MESSAGE="QUERY_IPC_EXTENSION_MESSAGE",x.\u0275fac=function(P){return new(P||x)(i.LFG(m.ed),i.LFG(i.R0b),i.LFG(y.D))},x.\u0275prov=i.Yz7({token:x,factory:x.\u0275fac}),x})();var r=e(81134),a=e(18293),s=e(85816),p=e(45871),l=e(33927),t=e(3076);class w{static get browserInstanceId(){return this._browserInstanceId}createSuccessResponse(E){return{success:!0,code:200,data:E}}createErrorResponse(E,P){return{success:!1,code:E,error:P}}makeError(E,P){return(0,p._)(this.createErrorResponse(E,P))}makeResult(E){return(0,r.of)(this.createSuccessResponse(E))}makePersistentResult(E){return E.pipe((0,l.U)(P=>this.createSuccessResponse(P)))}}w._browserInstanceId=(0,t.Rl)(!0);const h=new i.OlP("BrowserPlugins");let u=(()=>{class x{constructor(P){this._plugins=P||[]}get plugins(){return this._plugins}getPlugin(P){return this._plugins.find(v=>v instanceof P)}}return x.\u0275fac=function(P){return new(P||x)(i.LFG(h,8))},x.\u0275prov=i.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),o=(()=>{class x extends n.d{constructor(P,v,O){super(P.getLogger("crimson/browser"),O),this.manager=v,this.handlerMap=new Map,this.buildHandlerMap()}buildHandlerMap(){for(const P of this.manager.plugins){const v=P.handlers;this.handlerMap.set(v.module,v.commands)}}getHandlerForMethod(P,v){const O=this.handlerMap.get(P);return O?O[v]:null}executeCommandUsingPlugin(P,v,O){const C=this.makeFullBridgeCommand(P,v,P.legacyCommand!==x.EXTENSION_MESSAGE),_=this.getHandlerForMethod(C.module,C.method);return _?new D.y(F=>{_(C).pipe((0,a.K)(V=>(this.logger.info("failed to execute",P.legacyCommand,V),new D.y(b=>{this.handleFailure(b,C,V.code,V.error,O)}))),(0,s.zg)(V=>new D.y(b=>{this.handleSuccess(b,C.persistent,V.data)}))).subscribe(V=>F.next(V),V=>F.error(V),()=>F.complete())}):(this.logger.info("browser plugin does not have handler for",C.module,C.method),(0,r.of)(null))}executeCommandInternal(P,v,O){const C=this.makeFullBridgeCommand(P,v,P.legacyCommand!==x.EXTENSION_MESSAGE);return this.handlerMap.has(C.module)?this.executeCommandUsingPlugin(P,v,O):(this.logger.info("Command not found",JSON.stringify(O?C:C.command)),(0,r.of)(null))}}return x.EXTENSION_MESSAGE="QUERY_IPC_EXTENSION_MESSAGE",x.\u0275fac=function(P){return new(P||x)(i.LFG(m.ed),i.LFG(u),i.LFG(y.D))},x.\u0275prov=i.Yz7({token:x,factory:x.\u0275fac}),x})(),f=(()=>{class x extends n.d{constructor(P,v,O){super(P.getLogger("crimson/yggdrasil"),O),this.ngZone=v}executeCommandInternal(P,v){return new D.y(O=>{O.next(null),O.complete()})}}return x.\u0275fac=function(P){return new(P||x)(i.LFG(m.ed),i.LFG(i.R0b),i.LFG(y.D))},x.\u0275prov=i.Yz7({token:x,factory:x.\u0275fac}),x})();var c=e(53705);const I={provide:n.d,useFactory:function(x,E,P,v){return c.n.isCefPlatform()?new T(x,E,v):c.n.isBrowserPlatform()?new o(x,P,v):new f(x,E,v)},deps:[m.ed,i.R0b,u,y.D]};var G=e(21200)},892:(He,de,e)=>{"use strict";e.d(de,{r:()=>D});var n=e(80226),i=e(2316);let D=(()=>{class m{constructor(){this.leanModeTransitionSub=new n.t(1)}get leanModeTransitionState(){return this.leanModeTransitionSub.asObservable()}enableLeanMode(){this.leanModeTransitionSub.next(!0)}disableLeanMode(){this.leanModeTransitionSub.next(!1)}}return m.\u0275fac=function(T){return new(T||m)},m.\u0275prov=i.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},84538:(He,de,e)=>{"use strict";e.d(de,{i:()=>P});var n=e(97430),i=e(28531),D=e(5633),m=e(99094),y=e(54364),T=e(66830),p=(e(6989),e(2702),e(84454),e(2316));e(31546),e(63806),e(28587);let P=(()=>{class v{static configure(C){return{ngModule:v,providers:[y.uU,{provide:i.nN,useValue:C.logger},{provide:n.NQ,useValue:C.bridge},{provide:D.A,useValue:C.window},{provide:T.b,useValue:C.locale},m.D,n.Km]}}}return v.\u0275fac=function(C){return new(C||v)},v.\u0275mod=p.oAB({type:v}),v.\u0275inj=p.cJS({imports:[[]]}),v})()},63806:(He,de,e)=>{"use strict";e.d(de,{r:()=>y});var n=e(89460),i=e(2316);const m=["ngClass.lt-400","ngClass.lt-360","ngClass.iphone","ngClass.ipad"];let y=(()=>{class T extends n.jo{constructor(){super(...arguments),this.inputs=m}}return T.\u0275fac=function(){let r;return function(s){return(r||(r=i.n5z(T)))(s||T)}}(),T.\u0275dir=i.lG2({type:T,selectors:[["","ngClass.lt-400",""],["","ngClass.lt-360",""],["","ngClass.iphone",""],["","ngClass.ipad",""]],inputs:{"ngClass.lt-400":"ngClass.lt-400","ngClass.lt-360":"ngClass.lt-360","ngClass.iphone":"ngClass.iphone","ngClass.ipad":"ngClass.ipad"},features:[i.qOj]}),T})()},31546:(He,de,e)=>{"use strict";e.d(de,{W:()=>y});var n=e(89460),i=e(2316);const m=["fxShow.lt-400","fxShow.lt-360","fxShow.iphone","fxHide.lt-400","fxHide.lt-360","fxHide.iphone"];let y=(()=>{class T extends n.Pe{constructor(){super(...arguments),this.inputs=m}}return T.\u0275fac=function(){let r;return function(s){return(r||(r=i.n5z(T)))(s||T)}}(),T.\u0275dir=i.lG2({type:T,selectors:[["","fxShow.lt-400",""],["","fxShow.lt-360",""],["","fxShow.iphone",""],["","fxHide.lt-400",""],["","fxHide.lt-360",""],["","fxHide.iphone",""]],inputs:{"fxShow.lt-400":"fxShow.lt-400","fxShow.lt-360":"fxShow.lt-360","fxShow.iphone":"fxShow.iphone","fxHide.lt-400":"fxHide.lt-400","fxHide.lt-360":"fxHide.lt-360","fxHide.iphone":"fxHide.iphone"},features:[i.qOj]}),T})()},66830:(He,de,e)=>{"use strict";e.d(de,{b:()=>i});var n=e(2316);let i=(()=>{class D{}return D.\u0275fac=function(y){return new(y||D)},D.\u0275prov=n.Yz7({token:D,factory:D.\u0275fac}),D})()},72445:(He,de,e)=>{"use strict";e.d(de,{G:()=>n});var n=(()=>{return(i=n||(n={}))[i.None=-1]="None",i[i.Error=1]="Error",i[i.Warning=2]="Warning",i[i.Info=3]="Info",i[i.Trace=4]="Trace",i[i.Verbose=5]="Verbose",i[i.Event=6]="Event",n;var i})()},28531:(He,de,e)=>{"use strict";e.d(de,{nN:()=>T,Yd:()=>r,ed:()=>a});var n=e(3076),i=e(72445),D=e(2316),m=e(54364),y=e(54299);let T=(()=>{class s{}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=D.Yz7({token:s,factory:s.\u0275fac}),s})();class r{constructor(p,l,t,w,h,u){this.name=p,this.loggingLevel=l,this.datePipe=t,this.remoteLoggingService=w,this.remoteLoggingEnabled=h,this.consoleLoggingEnabled=u,this.remoteLogging=h,this.consoleLogging=u}error(...p){this.logEntry(i.G.Error,p,console.error.bind(console))}warn(...p){this.logEntry(i.G.Warning,p,console.warn.bind(console))}info(...p){this.logEntry(i.G.Info,p,console.log.bind(console))}verbose(...p){this.logEntry(i.G.Verbose,p,console.log.bind(console))}event(...p){this.logEntry(i.G.Event,p,console.log.bind(console))}trace(...p){this.logEntry(i.G.Trace,p,console.log.bind(console))}updateLogger(p,l){this.remoteLogging=p,this.consoleLogging=l}logEntry(p,l,t){if(this.loggingLevel<p)return;let w="";w=p===this.loggingLevel?(0,n.M_)(this.name,i.G[p].toUpperCase(),this.datePipe,l):(0,n.gF)(this.name,i.G[p].toUpperCase(),this.datePipe,l),this.consoleLogging&&t(w),this.remoteLogging&&this.remoteLoggingService.collectLogString(w)}}let a=(()=>{class s{constructor(l,t,w){this.config=l,this.datePipe=t,this.remoteLoggingService=w,this.loggingLevelOverrides={},this.loggers={},this.remoteLoggingEnabled=!1,this.consoleLoggingEnabled=!0,this.loggingLevelOverrides=e(26863)}updateLoggers(){Object.values(this.loggers).forEach(l=>{l.updateLogger(this.remoteLoggingEnabled,this.consoleLoggingEnabled)})}getLoggingLevel(l){return i.G[this.loggingLevelOverrides[l]]||this.config.defaultLoggingLevel}initialize(l,t){l&&this.remoteLoggingService.initialize(),(this.remoteLoggingEnabled!==l||this.consoleLoggingEnabled!==t)&&(this.remoteLoggingEnabled=l,this.consoleLoggingEnabled=t,this.consoleLoggingEnabled||console.clear(),this.updateLoggers())}getLogger(l){const t=this.getLoggingLevel(l);return this.config.appNamePrefix&&(l=this.config.appNamePrefix+"/"+l),this.loggers[l]||(this.loggers[l]=new r(l,t,this.datePipe,this.remoteLoggingService,this.remoteLoggingEnabled,this.consoleLoggingEnabled)),this.loggers[l]}}return s.\u0275fac=function(l){return new(l||s)(D.LFG(T),D.LFG(m.uU),D.LFG(y.V))},s.\u0275prov=D.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},28587:(He,de,e)=>{"use strict";e.d(de,{Yx:()=>p});var n=e(20657),i=e(2316),D=e(42791),m=e(79441),y=e(83720),T=e(202);class a{constructor(t,w,h){this._scrolledIndexChange=new m.xQ,this.scrolledIndexChange=this._scrolledIndexChange.pipe((0,y.x)()),this._viewport=null,this._itemOffsets=t,this._minBufferPx=w,this._maxBufferPx=h}attach(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(t,w,h){if(h<w)throw Error("CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx");this._itemOffsets=t,this._minBufferPx=w,this._maxBufferPx=h,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(t,w){this._viewport&&this._itemOffsets&&this._itemOffsets.length>=t&&t>=0&&this._viewport.scrollToOffset(this._itemOffsets[t],w)}_updateTotalContentSize(){!this._viewport||!this._itemOffsets||0===this._itemOffsets.length||this._viewport.setTotalContentSize(this._itemOffsets[this._itemOffsets.length-1])}getIndexFromPosition(t){return Math.max(0,(0,T.sortedIndex)(this._itemOffsets,t)-1)}_updateRenderedRange(){if(!this._viewport||!this._itemOffsets||0===this._itemOffsets.length)return;const t=this._viewport.measureScrollOffset(),w=this.getIndexFromPosition(t),h=this._viewport.getRenderedRange(),u={start:h.start,end:h.end},o=this._viewport.getViewportSize(),f=this._viewport.getDataLength();u.start>this._itemOffsets.length&&(u.start=0,u.end=this._itemOffsets.length-1);const c=t-this._itemOffsets[u.start];if(c<this._minBufferPx&&0!==u.start){const g=this.getIndexFromPosition(this._maxBufferPx-c);u.start=Math.max(0,u.start-g),u.end=Math.min(f,Math.ceil(this.getIndexFromPosition(t+o+this._minBufferPx)))}else{const g=this._itemOffsets[u.end]-(t+o);if(g<this._minBufferPx&&u.end!==f){const I=this.getIndexFromPosition(this._maxBufferPx-g);I>0&&(u.end=Math.min(f,u.end+I),u.start=Math.max(0,Math.floor(this.getIndexFromPosition(this._itemOffsets[w]-this._minBufferPx))))}}this._viewport.setRenderedRange(u),this._viewport.setRenderedContentOffset(this._itemOffsets[u.start]),this._scrolledIndexChange.next(Math.floor(w))}}function s(l){return l._scrollStrategy}let p=(()=>{class l{constructor(){this._itemOffsets=[0],this._minBufferPx=200,this._maxBufferPx=300,this._scrollStrategy=new a(this.itemOffsets,this.minBufferPx,this.maxBufferPx)}get itemOffsets(){return this._itemOffsets}set itemOffsets(w){this._itemOffsets=w}get minBufferPx(){return this._minBufferPx}set minBufferPx(w){this._minBufferPx=(0,n.su)(w)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(w){this._maxBufferPx=(0,n.su)(w)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemOffsets,this.minBufferPx,this.maxBufferPx)}}return l.\u0275fac=function(w){return new(w||l)},l.\u0275dir=i.lG2({type:l,selectors:[["cdk-virtual-scroll-viewport","itemOffsets",""]],inputs:{itemOffsets:"itemOffsets",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[i._Bn([{provide:D.yU,useFactory:s,deps:[(0,i.Gpc)(()=>l)]}]),i.TTD]}),l})()},98478:(He,de,e)=>{"use strict";e.d(de,{_:()=>D});var n=e(2316),i=e(3076);let D=(()=>{class m{constructor(T){this.networkStatusCheckService=T}get onlineStatusChanged(){return this.networkStatusCheckService.onlineStatusChanged()}get isOnline(){return this.networkStatusCheckService.isOnline()}}return m.\u0275fac=function(T){return new(T||m)(n.LFG(i.kE))},m.\u0275prov=n.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},6989:(He,de,e)=>{"use strict";e.d(de,{$:()=>m});var n=e(3076),i=e(2316),D=e(58283);let m=(()=>{class y{constructor(r){this.translate=r}translateText(r,a){return this.translate.instant(r,a)}transform(r){if(!r)return"";try{const a=1;if(0===r||1===r)return this.translateText("main.byte",{value:r});if(isNaN(parseFloat(r.toString(10)))||!isFinite(r))return"-";const s=["main.bytes","main.kb","main.mb","main.gb","main.tb"],p=Math.floor(Math.log(r)/Math.log(1024));return this.translateText(s[p],{value:(r/Math.pow(1024,Math.floor(p))).toFixed(a)})}catch(a){throw(0,n.c1)(y,a.message)}}}return y.\u0275fac=function(r){return new(r||y)(i.Y36(D.sK,16))},y.\u0275pipe=i.Yjl({name:"convertBytesToKBMBGB",type:y,pure:!0}),y})()},2702:(He,de,e)=>{"use strict";e.d(de,{_x:()=>m,WD:()=>T,Yt:()=>a});var n=e(3076),i=e(2316),D=e(58283);let m=(()=>{class s{constructor(l){this.translate=l}translateText(l,t){return this.translate.instant(l,t)}transform(l,t){if(!l)return"";try{const w=parseInt(l,10),h=Math.floor(w/3600),u=Math.floor((w-3600*h)/60),o=w-3600*h-60*u;let f="";if(h){const c=this.translateText(1===h?"main.hr":t&&h>=2?"main.aboutHrs":"main.hrs",{value:h});f=t&&h>=2?c:c+" "}return!u||t&&h>=2||(f=f+this.translateText(1===u?"main.min":"main.mins",{value:u})+" "),!o||t&&h||(f+=this.translateText(1===o?"main.sec":"main.secs",{value:o})),f}catch(w){throw(0,n.c1)(s,w.message)}}}return s.\u0275fac=function(l){return new(l||s)(i.Y36(D.sK,16))},s.\u0275pipe=i.Yjl({name:"convertSecondsToTime",type:s,pure:!0}),s})(),T=(()=>{class s{transform(l,t=""){return function(s,p=""){const l=parseFloat(s);let t=parseInt(s,10),w=Math.floor(t/3600);t%=3600;let h=Math.floor(t/60);t%=60,w<10&&(w=`0${w}`),h<10&&(h=`0${h}`),t<10&&(t=`0${t}`);let u="";return p.includes("fractional")&&(u=Math.round(l%1*1e3),u<10?u=`00${u}`:u<100&&(u=`0${u}`),u=`.${u}`),`${w}:${h}:${t}${u}`}(l,t)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275pipe=i.Yjl({name:"time",type:s,pure:!0}),s})(),a=(()=>{class s{transform(l){return function(s){const p=s.toString().split(":");let l=0,t=0,w=0;return p.length>2?(l=parseFloat(p[0]),t=parseFloat(p[1]),w=parseFloat(p[2])):p.length>1?(t=parseFloat(p[0]),w=parseFloat(p[1])):w=parseFloat(p[0]),3600*l+60*t+w}(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275pipe=i.Yjl({name:"seconds",type:s,pure:!0}),s})()},84454:(He,de,e)=>{"use strict";e.d(de,{W:()=>m});var n=e(3076),i=e(2316),D=e(71570);let m=(()=>{class y{constructor(r){this.sanitizer=r}transform(r,a){try{return"url"===a?this.sanitizer.bypassSecurityTrustResourceUrl(r):this.sanitizer.bypassSecurityTrustHtml(r)}catch(s){throw(0,n.c1)(y,s.message)}}}return y.\u0275fac=function(r){return new(r||y)(i.Y36(D.H7,16))},y.\u0275pipe=i.Yjl({name:"trustAsHtml",type:y,pure:!0}),y})()},53705:(He,de,e)=>{"use strict";e.d(de,{n:()=>i});var n=e(3076);class i{constructor(){}static isBrowserPlatform(){return!("cefQuery"in window)}static isCefPlatform(){return"cefQuery"in window}static isPWAModeOnLGTV(){return/(NetCast|Web0S|Linux\/SmartTV).+PWA/.test(navigator.userAgent)}static isPWAModeOnSamsungTV(){return(0,n.fO)()&&!navigator.userAgent.includes("SamsungBrowser")}static isArmPlatform(){return window.navigator.userAgent.toLowerCase().includes(" arm")}static isTouchPlatform(){return!!window.Touch&&navigator.maxTouchPoints>0}static isMobileFromUserAgent(){return navigator.userAgent.toLowerCase().includes("mobile")}}},81939:(He,de,e)=>{"use strict";e.d(de,{z7:()=>i,wi:()=>D,Aq:()=>m,Px:()=>y});var i=(()=>{return(T=i||(i={})).Desktop="Desktop",T.Laptop="Laptop",T.TV="TV",T.Phone="Phone",T.Tablet="Tablet",T.Server="Server",T.Console="Console",T.Undefined="undefined",i;var T})(),D=(()=>{return(T=D||(D={})).Windows="Windows",T.MacOS="MacOS",T.Shield="Shield",T.Android="Android",T.IOS="iOS",T.IPadOS="iPadOS",T.ChromeOS="ChromeOS",T.Linux="Linux",T.Tizen="Tizen",T.WebOS="WebOS",T.TvOS="tvOS",T.XBox="Xbox",T.SteamOS="SteamOS",T.Undefined="undefined",D;var T})(),m=(()=>{return(T=m||(m={})).CHROME="Chrome",T.SAFARI="Safari",T.YANDEX="Yandex",T.EDGE="Edge",T.EDGE_LEGACY="Edge_legacy",T.FIREFOX="Firefox",T.SAMSUNG="Samsung",T.CHROMIUM="Chromium",T.OPERA="Opera",T.BRAVE="Brave",T.SILK="Silk",T.Undefined="undefined",m;var T})();const y="undefined"},24523:(He,de,e)=>{"use strict";e.d(de,{sN:()=>m,nM:()=>y,Ty:()=>T,Px:()=>r,Tv:()=>a,iU:()=>s});var n=e(81939),i=e(35467);const m={clientId:"{CLIENTID}",clientVer:"{CLIENTVER}",feedbackId:"{FEEDBACKID}",feedbackName:"{FEEDBACKNAME}",feedbackProtocol:"4.3",feedbackSchemaVer:"{FEEDBACKSCHEMAVER}",feedbackSysVer:"",deviceId:i.kQ,userId:i.kQ,externalUserId:i.kQ,idpId:i.kQ,sessionId:i.kQ,sentTs:"",clientTs:"",deviceOS:n.wi.Undefined,deviceOSVersion:i.kQ,deviceMake:i.kQ,deviceModel:i.kQ,deviceType:n.z7.Undefined,clientType:i.Bh.Undefined,clientVariant:i.ns.Undefined,browserType:i.kQ,integrationId:i.kQ},y={functional:i.p6.None,technical:i.p6.None,behavioral:i.p6.None},T={bufferSize:5120,chunkCreationTimeout:3e5,chunksQueueSize:20,chunkResendRetryLimit:2},r="undefined";var a=(()=>{return(p=a||(a={}))[p.FeedbackRequestAccepted=200]="FeedbackRequestAccepted",p[p.FeedbackSizeOverLimits=413]="FeedbackSizeOverLimits",p[p.InvalidFeedback=460]="InvalidFeedback",p[p.FeedbackIdInUse=461]="FeedbackIdInUse",p[p.FeedbackIdExpired=462]="FeedbackIdExpired",p[p.AttachmentsRejected=466]="AttachmentsRejected",p[p.UnknownClientId=467]="UnknownClientId",p[p.ServerError=500]="ServerError",a;var p})(),s=(()=>{return(p=s||(s={}))[p.AllFramesReceived=200]="AllFramesReceived",p[p.PartialFramesReceived=206]="PartialFramesReceived",p[p.InvalidFeedbackId=462]="InvalidFeedbackId",p[p.NonSequentialChunk=463]="NonSequentialChunk",p[p.FrameChecksumOrSizeMismatch=464]="FrameChecksumOrSizeMismatch",p[p.ServerError=500]="ServerError",s;var p})()},35467:(He,de,e)=>{"use strict";e.d(de,{kQ:()=>n,Bh:()=>i,ns:()=>D,p6:()=>m});const n="undefined";var i=(()=>{return(y=i||(i={})).Native="Native",y.Browser="Browser",y.GFNSDK="GFNSDK",y.Undefined="undefined",i;var y})(),D=(()=>{return(y=D||(D={})).iBeta="iBeta",y.Release="Release",y.Undefined="undefined",D;var y})(),m=(()=>{return(y=m||(m={})).Full="Full",y.None="None",y.Temp="Temp",m;var y})()},73474:(He,de,e)=>{"use strict";e.d(de,{p:()=>t});var n=e(79441),i=e(202),m=e(3076),y=e(2335),T=e(24523),r=e(2316),a=e(54364),s=e(98478),p=e(892);const l="RemoteLogsSaveKey";let t=(()=>{class w{constructor(u,o,f,c){this.datePipe=u,this.networkStatusService=o,this.injector=f,this.browserLeanModeService=c,this.logsBuffer="",this.chunksQueue=[],this.maxBufferSizeInBytes=T.Ty.bufferSize,this.chunkCreationTimeout=T.Ty.chunkCreationTimeout,this.logsChunkUpdated$=new n.xQ,this.chunksQueueSize=T.Ty.chunksQueueSize,this.chunkResendRetryLimit=T.Ty.chunkResendRetryLimit,this.logBufferingAllowed=!0,this.leanModeLogger=!1,this.isGfcHeadRequestSent=!1,this.timerSub$=new n.xQ,this.isTimerTriggered=!1,this.refreshFeedbackSessionSubject=new n.xQ,this.timeBasedLogClearanceCounter=0,this.feedbackSessionClosed=!1,this.newLine="\n",this.chunkSendInProgress=!1}initialize(){this.chunkResendRetryMap=new Map,this.addLogger("LogQueueService",["initialize"]),this.networkStatusService.onlineStatusChanged.subscribe(this.onNetworkStatusChanged.bind(this)),this.browserLeanModeService.leanModeTransitionState.subscribe(u=>{this.leanModeLogger=u,u&&this.stopTimeBasedLogCollection()})}addLogger(u,o){const f=(0,m.gF)(u,"INFO",this.datePipe,o);this.appendLogEntry(f)}setHeadRequestStatus(u){this.isGfcHeadRequestSent=u}checkFeasibilityAndSendChunk(u,o=!1,f){!this.isUserConsentAvailable||!this.isGfcHeadRequestSent||o||this.chunkSendInProgress||(0,i.isEmpty)(u)?this.isUserConsentAvailable&&o&&this.logsChunkUpdated$.next({logString:this.sendChunkToServer(u),isLastChunk:o,params:f}):this.logsChunkUpdated$.next({logString:this.sendChunkToServer(u),isLastChunk:!1})}startTimeBasedLogDispatch(){if(this.addLogger("LogQueueService",["Interval of 10 mins elapsed: current buffer length: ",this.logsBuffer.length]),this.addLogger("LogQueueService",["Chunk send in progress: ",this.chunkSendInProgress]),!1===this.chunkSendInProgress){this.refreshFeedbackSessionSubject.next(++this.timeBasedLogClearanceCounter),this.addLogger("LogQueueService",["Clearing chunk on timeout... "]);const u=this.extractAndSaveChunk();this.checkFeasibilityAndSendChunk(u)}}stopTimeBasedLogCollection(u=""){this.isTimerTriggered=!1,this.timerSub$.next({startTimer:!1,timeout:0}),this.addLogger("LogQueueService",["Stopping log collection timer. "+u])}isBufferSizeWithinLimits(u,o){return!(u.concat(o,this.newLine).length>this.maxBufferSizeInBytes)}sendChunkToServer(u){return this.chunkSendInProgress=!0,u||""}addChunksToQueue(u){this.chunksQueue.length===this.chunksQueueSize&&this.chunksQueue.splice(0,this.chunksQueue.length),this.chunksQueue.push(u),this.chunkResendRetryMap.set(this.chunksQueue[this.chunksQueue.length-1],0)}extractAndSaveChunk(){const u=this.logsBuffer.slice(0);return this.addChunksToQueue(u),this.logsBuffer="",this.popChunkFromQueue()}pushLogToBuffer(u){this.logsBuffer=this.logsBuffer.concat(u,this.newLine)}startTimer(){this.leanModeLogger||(this.timerSub$.next({startTimer:!0,timeout:this.chunkCreationTimeout}),this.isTimerTriggered=!0)}popChunkFromQueue(){const u=this.chunkResendRetryMap.get(this.chunksQueue[0]);return this.isUserConsentAvailable&&this.isGfcHeadRequestSent&&u<=this.chunkResendRetryLimit?(this.chunkResendRetryMap.set(this.chunksQueue[0],u+1),this.chunksQueue.slice(0,1).toString()):(this.isUserConsentAvailable&&this.isGfcHeadRequestSent&&u>this.chunkResendRetryLimit&&this.removeChunkFromSavedQueue(),"")}saveLogsToSessionStorage(){this.addChunksToQueue(this.logsBuffer);const u=JSON.stringify(this.chunksQueue);sessionStorage.setItem(l,u)}readConsoleLogsFromSessionStorage(){const u=JSON.parse(sessionStorage.getItem(l));sessionStorage.removeItem(l),this.appendPreviousLogs(u)}appendPreviousLogs(u){this.chunkResendRetryMap&&this.chunkResendRetryMap.clear(),u=u.concat(this.chunksQueue),this.chunksQueue=u.length>this.chunksQueueSize?u.slice(-this.chunksQueueSize):u;for(let o=0;o<this.chunksQueue.length;o++)this.chunkResendRetryMap.set(this.chunksQueue[o],0)}removeChunkFromSavedQueue(){this.chunkResendRetryMap.delete(this.chunksQueue[0]),this.chunksQueue.splice(0,1)}onNetworkStatusChanged(u){u?this.addLogger("LogQueueService",["LogCollector lib is online right now"]):(this.addLogger("LogQueueService",["LogCollector lib is offline right now"]),this.stopTimeBasedLogCollection())}updateFeedbackSessionStatus(u){this.feedbackSessionClosed=u}getRefreshFeedbackSubjectObservable(){return this.refreshFeedbackSessionSubject.asObservable()}onLogsChunkUpdated(){return this.logsChunkUpdated$.asObservable()}clearQueueAndBuffer(u){const o=this.chunkSendInProgress;this.chunkSendInProgress=!0,this.gfcService=(0,i.isUndefined)(this.gfcService)?this.injector.get(y.H0):this.gfcService;let f="";this.chunksQueue.forEach(c=>{f=f.concat(c,this.newLine)}),f=f.concat(this.logsBuffer,this.newLine),this.logBufferingAllowed&&this.isUserConsentAvailable&&(u?(f=f.concat("sendBeacon api is going to be called."),this.gfcService.sendLastFeedbackChunkEvent(f,this.eventData)):(f=f.concat("eob request will be sent for the last chunk."),this.checkFeasibilityAndSendChunk(f,!0,{isBrowserClosing:u,prevChunkInProgress:o}))),this.logsBuffer="",this.chunksQueue=[],this.chunkSendInProgress=!1,this.eventData=null}appendLogEntry(u){if(this.logBufferingAllowed)if(this.isBufferSizeWithinLimits(this.logsBuffer,u))this.pushLogToBuffer(u);else if(this.feedbackSessionClosed)this.feedbackSessionClosed=!1,this.timeBasedLogClearanceCounter=0,this.refreshFeedbackSessionSubject.next(this.timeBasedLogClearanceCounter),this.pushLogToBuffer(u);else{this.timeBasedLogClearanceCounter=0,this.isTimerTriggered&&this.stopTimeBasedLogCollection("due to buffer limit.");const o=this.extractAndSaveChunk();this.pushLogToBuffer(u),this.checkFeasibilityAndSendChunk(o)}}onSendChunkSuccess(){this.chunkSendInProgress=!1,this.removeChunkFromSavedQueue(),0!==this.chunksQueue.length?this.checkFeasibilityAndSendChunk(this.popChunkFromQueue()):this.startTimer()}onSendChunkFailure(u){switch(this.chunkSendInProgress=!1,u.status){case T.iU.NonSequentialChunk:case T.iU.FrameChecksumOrSizeMismatch:case T.iU.ServerError:this.checkFeasibilityAndSendChunk(this.popChunkFromQueue());break;default:console.log("Error encountered in sending chunks: ",u),u.status!==T.iU.InvalidFeedbackId&&this.checkFeasibilityAndSendChunk(this.popChunkFromQueue())}}stopChunkCollection(u=!1){this.logBufferingAllowed=u,this.stopTimeBasedLogCollection("Going to stop chunk collection. logBufferingAllowed: "+this.logBufferingAllowed+"."),this.clearQueueAndBuffer(!1)}setBufferConfig(u){this.chunkCreationTimeout=u.msBetweenChunkCreation,this.maxBufferSizeInBytes=u.maxBufferSizeInBytes,this.chunksQueueSize=u.chunksQueueSize,this.chunkResendRetryLimit=u.chunkResendRetryLimit}updateUserConsent(u){this.isUserConsentAvailable=u}updateEventData(u){this.eventData=Object.assign({},u)}timerSubscriptionChanged(){return this.timerSub$.asObservable()}updateTimer(u){"Timeout"===u?this.startTimeBasedLogDispatch():"Cleared"===u&&this.addLogger("LogQueueService",["Log collection timer has been stopped"])}ngOnDestroy(){this.logsBuffer=""}}return w.\u0275fac=function(u){return new(u||w)(r.LFG(a.uU),r.LFG(s._),r.LFG(r.zs3),r.LFG(p.r))},w.\u0275prov=r.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},54299:(He,de,e)=>{"use strict";e.d(de,{V:()=>c});var n=e(202),D=e(80226),m=e(81134),y=e(33927),T=e(85816),r=e(18293),a=e(71435),s=e(2335),p=e(3076),l=e(24523),t=e(35467),w=e(2316),h=e(73474),u=e(98478);let c=(()=>{class g{constructor(G,x,E){this.injector=G,this.logQueueService=x,this.networkStatusService=E,this.defaultConsent=l.nM,this.currentUserConsent=l.nM,this.isUserConsentAvailable=!1,this.currentUserId=l.Px,this.externalUserId=l.Px,this.idpId=l.Px,this.commonFeedbackData=l.sN,this.isGfcHeadRequestSent=!1,this.isOnline=!1,this.chunkFailureCount=0,this.attachmentUploadedPermitted=!0,this.streamSubSessionIds=[],this.feedbackIdSubject=new D.t(1)}initialize(){this.logQueueService.initialize(),this.logQueueService.addLogger("RemoteLoggingService",["initialize"]),this.networkStatusService.onlineStatusChanged.subscribe(this.onNetworkStatusChanged.bind(this)),this.handleBrowserTabClosure(),this.getLatestLogsChunk(),this.trackIdleFeedbackSessions()}set defaultConsentLevel(G){this.defaultConsent=G}saveLogsToSessionStorage(){this.logQueueService.saveLogsToSessionStorage()}restoreSavedLogs(){return this.logQueueService.readConsoleLogsFromSessionStorage()}stopFeedbackUpload(){var G,x;if(this.isChunkUploadPermitted()){this.logQueueService.addLogger("RemoteLoggingService",["Close current feedback session."]),this.logQueueService.stopChunkCollection(!0),this.logQueueService.setHeadRequestStatus(this.isGfcHeadRequestSent=!1),this.logQueueService.updateFeedbackSessionStatus(!0),this.streamSubSessionIds.splice(0,this.streamSubSessionIds.length);const E={parameters:{streamSessionId:l.Px,streamSubSessionIds:this.streamSubSessionIds}};this.eventData=null!==(G=this.eventData)&&void 0!==G?G:{},this.eventData.parameters=Object.assign(Object.assign({},null===(x=this.eventData)||void 0===x?void 0:x.parameters),E.parameters),this.commonFeedbackData=Object.assign(Object.assign({},this.commonFeedbackData),this.eventData),this.logQueueService.updateEventData(this.eventData)}}trackIdleFeedbackSessions(){this.logQueueService.getRefreshFeedbackSubjectObservable().pipe((0,y.U)(G=>{3===G?(this.logQueueService.addLogger("RemoteLoggingService",["Stopping feedback upload since max idle timeout duration is reached"]),this.stopFeedbackUpload()):0===G&&(this.logQueueService.addLogger("RemoteLoggingService",["Initiating a new feedback session.."]),this.sendNewGfcHeadRequest())})).subscribe()}onNetworkStatusChanged(G){this.isOnline=G}addGdprConsentFields(){var G;const x={gdprFuncOptIn:null!==(G=this.currentUserConsent.functional)&&void 0!==G?G:this.defaultConsent.functional,gdprTechOptIn:this.currentUserConsent.technical,gdprBehOptIn:this.currentUserConsent.behavioral,deviceGdprFuncOptIn:this.defaultConsent.functional,deviceGdprTechOptIn:this.defaultConsent.technical,deviceGdprBehOptIn:this.defaultConsent.behavioral};this.commonFeedbackData=(0,n.extend)(x,this.commonFeedbackData)}isChunkUploadPermitted(){return!!this.attachmentUploadedPermitted&&this.chunkFailureCount<=2}getLatestLogsChunk(){this.logChunkReceivedSubscription=this.logQueueService.onLogsChunkUpdated().pipe((0,T.zg)(G=>(this.logQueueService.addLogger("RemoteLoggingService",["New batch! Attempting to send a batch of size: ",G.logString.length]),this.isChunkUploadPermitted()?this.isOnline&&this.isUserConsentAvailable?this.sendLogsChunk(G.logString,G.isLastChunk,G.params):(this.logQueueService.chunkSendInProgress=!1,this.logQueueService.addLogger("RemoteLoggingService",["Unable to send batch of logs due to lack of user consent and/or user is offline. isUserConsentAvailable: ",this.isUserConsentAvailable,", isOnline: ",this.isOnline]),(0,m.of)(!1)):(this.logQueueService.addLogger("RemoteLoggingService",["Stopping log collection as max failure count is reached."]),this.logQueueService.stopChunkCollection(),(0,m.of)(!1))))).subscribe(G=>{G||this.logQueueService.addLogger("RemoteLoggingService",["Chunk send failure."])})}terminateChunkReceivedSubscription(){this.logChunkReceivedSubscription&&(this.logChunkReceivedSubscription.unsubscribe(),this.logChunkReceivedSubscription=null)}sendNewGfcHeadRequest(){this.terminateChunkReceivedSubscription(),this.logQueueService.setHeadRequestStatus(this.isGfcHeadRequestSent=!1),this.commonFeedbackData.feedbackId=(0,p.Rl)(),this.feedbackIdSubject.next(this.commonFeedbackData.feedbackId),this.commonFeedbackData.clientTs=(new Date).toISOString(),this.logQueueService.addLogger("RemoteLoggingService",["New GFC feedback session created: ",this.commonFeedbackData.feedbackId]),console.log("New GFC feedback session created: ",this.commonFeedbackData.feedbackId),this.sendGfcHeadRequest(this.commonFeedbackData)}handleHeadRequestErrors(G){switch(G.status){case l.Tv.FeedbackIdInUse:case l.Tv.FeedbackIdExpired:this.logQueueService.setHeadRequestStatus(this.isGfcHeadRequestSent=!1),this.sendNewGfcHeadRequest();break;case l.Tv.AttachmentsRejected:this.attachmentUploadedPermitted=!1,this.logQueueService.stopChunkCollection()}}sendGfcHeadRequest(G){this.gfcService=(0,n.isUndefined)(this.gfcService)?this.injector.get(s.H0):this.gfcService,this.isOnline&&this.isUserConsentAvailable&&(G.sentTs=(new Date).toISOString(),this.gfcService.sendFeedbackEvent(G).subscribe(x=>{this.logQueueService.setHeadRequestStatus(this.isGfcHeadRequestSent=!0),(0,n.isNil)(this.logChunkReceivedSubscription)&&this.getLatestLogsChunk()},x=>{this.logQueueService.addLogger("RemoteLoggingService",["Send HEAD request error: ",x]),this.handleHeadRequestErrors(x)}))}handleExternalUrlLoad(){this.logQueueService.clearQueueAndBuffer(!0)}handleBrowserTabClosure(){window.addEventListener("pagehide",G=>{this.logQueueService.addLogger("RemoteLoggingService",["Window pagehide triggered."]),this.isGfcHeadRequestSent&&this.logQueueService.clearQueueAndBuffer(!0)})}handleSpecialAttachmentErrors(G){var x,E;if(this.isChunkUploadPermitted()&&G.status===l.iU.InvalidFeedbackId)this.sendNewGfcHeadRequest();else if(this.isChunkUploadPermitted()&&G.status===l.iU.NonSequentialChunk){const P=null===(E=null===(x=null==G?void 0:G.rawResponse)||void 0===x?void 0:x.headers)||void 0===E?void 0:E.get("x-data-offset");this.gfcService.updateOffsetOnSuccessfulAttachmentRequest(P)}else this.isChunkUploadPermitted()||(this.logQueueService.addLogger("RemoteLoggingService",["Attachment error, stopping log collection as max failure count is reached."]),this.logQueueService.stopChunkCollection())}sendLogsChunk(G,x,E){return this.gfcService.sendFeedbackChunkEvent(G,this.eventData,x,E).pipe((0,T.zg)(P=>(this.gfcService.updateOffsetOnSuccessfulAttachmentRequest(),this.logQueueService.onSendChunkSuccess(),(0,m.of)(!0))),(0,r.K)(P=>(this.logQueueService.addLogger("RemoteLoggingService",["Failure in sending a chunk: ",P]),(null==P?void 0:P.status)?(this.chunkFailureCount++,this.handleSpecialAttachmentErrors(P),this.logQueueService.onSendChunkFailure(P)):this.logQueueService.addLogger("RemoteLoggingService",["Non GFC error occurred: ",P,null==P?void 0:P.message]),(0,m.of)(!1))),(0,a.x)(()=>{x&&(null==E?void 0:E.isBrowserClosing)&&this.terminateChunkReceivedSubscription()}))}prepareGfcFeedbackEventParams(G){this.eventData={parameters:G},this.logQueueService.updateEventData(this.eventData)}prepareFeedbackCommonEventData(G){this.commonFeedbackData=(0,n.merge)(this.commonFeedbackData,G),this.feedbackIdSubject.next(this.commonFeedbackData.feedbackId),this.commonFeedbackData.userId===l.Px&&this.logQueueService.updateUserConsent(this.isUserConsentAvailable=!1)}setUserConsent(G){this.currentUserConsent=G.userConsent,(0,n.isEmpty)(G.externalUserId)?(this.externalUserId=G.userId,this.currentUserId=s.kQ,this.idpId=s.kQ):(this.currentUserId=G.userId,this.externalUserId=G.externalUserId,this.idpId=G.idpId),this.currentUserConsent.technical===t.p6.Full?(this.logQueueService.updateUserConsent(this.isUserConsentAvailable=!0),this.addGdprConsentFields(),this.commonFeedbackData.userId=this.currentUserId,this.commonFeedbackData.externalUserId=this.externalUserId,this.commonFeedbackData.idpId=this.idpId,this.commonFeedbackData.clientTs=(new Date).toISOString(),this.commonFeedbackData=(0,n.extend)(this.commonFeedbackData,this.eventData)):this.logQueueService.updateUserConsent(this.isUserConsentAvailable=!1),this.isGfcHeadRequestSent||this.sendGfcHeadRequest(this.commonFeedbackData)}collectLogString(G){this.logQueueService.appendLogEntry(G)}setBufferConfiguration(G){this.logQueueService.setBufferConfig(G)}updateEventDataParamIds(G){G.streamSessionId?(0!==this.streamSubSessionIds.filter(x=>""===x).length&&this.streamSubSessionIds.splice(0,1),this.streamSubSessionIds.push(G.streamSubSessionId),this.eventData=(0,n.merge)(this.eventData,{parameters:{streamSessionId:G.streamSessionId,streamSubSessionIds:this.streamSubSessionIds}})):G.surveySessionId&&(this.eventData=(0,n.merge)(this.eventData,{parameters:{surveySessionId:G.surveySessionId}})),this.logQueueService.updateEventData(this.eventData)}get feedbackId$(){return this.feedbackIdSubject.asObservable()}ngOnDestroy(){this.terminateChunkReceivedSubscription()}}return g.\u0275fac=function(G){return new(G||g)(w.LFG(w.zs3),w.LFG(h.p),w.LFG(u._))},g.\u0275prov=w.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},5633:(He,de,e)=>{"use strict";e.d(de,{L:()=>i,A:()=>D});var n=e(2316),i=(()=>{return(m=i||(i={})).Gfe="gfeclient",m.Gfn="gfnclient",m.Igo="shareclient",m.Forager="foragerclient",m.Nvcpl="controlPanelclient",m.Oogg="ooggclient",m.Vdkplaytest="vdkplaytest",m.Nvapp="nvapp",i;var m})();let D=(()=>{class m{}return m.\u0275fac=function(T){return new(T||m)},m.\u0275prov=n.Yz7({token:m,factory:m.\u0275fac}),m})()},6484:(He,de,e)=>{"use strict";e.d(de,{L6:()=>q.L,P:()=>An,m1:()=>n.m1,gN:()=>nt,dF:()=>n.dF,rn:()=>kt.r,nM:()=>n.nM,U5:()=>n.U5,Aq:()=>se.Aq,Bh:()=>dt.Bh,ns:()=>dt.ns,n2:()=>Ut,z7:()=>se.z7,p6:()=>dt.p6,it:()=>nn.i,qR:()=>Ve,LA:()=>Kt,c1:()=>Ye,MC:()=>ze,wi:()=>se.wi,bi:()=>Fn,Il:()=>yt,d_:()=>M,Du:()=>bt,zl:()=>ln,FP:()=>v,_V:()=>Q,b$:()=>me.b,OL:()=>ye,p3:()=>Ee.p,Yd:()=>c.Yd,GJ:()=>yn.G,ed:()=>c.ed,Eo:()=>gt,wO:()=>vt,o1:()=>Et,Nx:()=>Ue,_J:()=>k._,VV:()=>oe,eJ:()=>Y,xv:()=>at,ng:()=>m.n,V$:()=>L.V,IW:()=>ve,OA:()=>y,dD:()=>Sn,Ng:()=>tt,Ob:()=>ae,sp:()=>Jt,Px:()=>se.Px,kQ:()=>dt.kQ,un:()=>Me,Yq:()=>te,zv:()=>j,L2:()=>X});var n=e(97430),i=e(58283),D=e(80226),m=e(53705);class y{static sendTelemetry(Ke){y.retrySubject.subscribe({next:Pe=>{Ke.info(Pe.isSuccess?"success event ":"failure event ",Date.now(),Pe)}})}static retry(Ke,Pe,it=y.retryAttempts,Lt=y.intervalBetweenRetries){let Dt;return new Promise((cn,Rn)=>{Ke().then(function(Wn){return m.n.isBrowserPlatform()&&(Dt={isSuccess:!0,attemptCount:y.retryAttempts+1-it,error:null,fileName:Pe},y.retrySubject.next(Dt)),cn(Wn)}).catch(Wn=>{if(m.n.isBrowserPlatform()){if(Dt={isSuccess:!1,attemptCount:y.retryAttempts+1-it,error:Wn,fileName:Pe},y.retrySubject.next(Dt),1===it)return void Rn(Wn);setTimeout(()=>{y.retry(Ke,Pe,it-1,y.intervalBetweenRetries*(y.retryAttempts+1-it)).then(cn,Rn)},Lt)}else Rn(Wn)})})}}y.retrySubject=new D.t(5),y.retryAttempts=5,y.intervalBetweenRetries=50;var T=e(81134),r=e(45871),a=e(202),s=e(33927),p=e(18293),l=e(85816),t=e(98636),w=e(29845),h=e(79902),u=e(75428),o=e(67202),f=e(83720),c=e(28531);class g{constructor(Ke,Pe,it,Lt="assets/i18n/",Dt=".json"){this.http=Ke,this.prefix=Lt,this.suffix=Dt,this.config={},this.logger=Pe.getLogger("FallbackTranslationLoader"),this.config.localeFileHashes=it}getTranslation(Ke){let Pe;return Pe=this.config.localeFileHashes&&this.config.localeFileHashes[Ke]?`${this.prefix}${Ke}.${this.config.localeFileHashes[Ke]}${this.suffix}`:`${this.prefix}${Ke}${this.suffix}`,this.http.get(Pe)}}var I=e(53882);const G="en_GB",P=["ar"],v=new Map([["ar",["ar_SA","ar_EG"]],["bg",["bg_BG"]],["ca",["ca_ES"]],["cs",["cs_CZ"]],["da",["da_DK"]],["de",["de_DE","de_AT","de_CH"]],["el",["el_GR"]],["en",["en_GB"]],["en_MX",["en_US"]],["en_US",["en_GB"]],["es",["es_MX","es_US","es_ES"]],["es_ES",["es_MX","es_US"]],["fa",["fa_IR"]],["fi",["fi_FI"]],["fr",["fr_FR"]],["hr",["hr_HR"]],["hu",["hu_HU"]],["in",["in_ID"]],["id",["id_ID"]],["it",["it_IT"]],["iw",["iw_IL"]],["he",["he_IL"]],["ja",["ja_JP"]],["ka",["ka_GE"]],["ko",["ko_KR"]],["lt",["lt_LT"]],["lv",["lv_LV"]],["ms",["ms_MY"]],["nb",["nb_NO"]],["no",["nb_NO"]],["nl",["nl_NL"]],["pl",["pl_PL"]],["pt",["pt_BR","pt_PT"]],["pt_PT",["pt_BR"]],["ro",["ro_RO"]],["ru",["ru_RU"]],["sk",["sk_SK"]],["sl",["sl_SI"]],["sr",["sr_RS"]],["sv",["sv_SE"]],["th",["th_TH"]],["tl",["tl_PH"]],["tr",["tr_TR"]],["uk",["uk_UA"]],["vi",["vi_VN"]],["zh",["zh_CN"]],["zh_HK",["zh_TW","zh_CN"]],["zh_MO",["zh_TW","zh_CN"]],["zh_MY",["zh_CN"]],["zh_SG",["zh_CN"]],["zh_TW",["zh_HK","zh_CN"]],["zh-Latn_CN",["zh_CN"]]]);var O=e(2281),C=e(2316),_=e(90425),F=e(61486),V=e(90490),b=e(92597),B=e(1143),U=e(53466),A=e(2984),S=e(3076),Y=(()=>{return(Pt=Y||(Y={})).Windows="Windows",Pt.Mac="Mac",Y;var Pt})(),se=e(81939),fe=e(38582);let ae=(()=>{class Pt{constructor(Pe,it,Lt){this.bridgeService=it,this.previousSystemInfo={},this.systemInfoGuid=(0,S.Rl)(),this.systemInfoGuidSubject=new D.t(1),this.logger=Pe.getLogger("crimson/SystemInfoService"),this.deviceIdStream=Lt.createStream(()=>this.fetchDeviceId()),this.systemInfoStream=Lt.createStream(()=>this.fetchSystemInfo(),!0,!0,!0,3e4),this.gpuInfoStream=Lt.createStream(()=>this.fetchGPUInfo()),this.genericInfoStream=Lt.createStream(()=>this.fetchGenericInfo()),this.osInfoStream=Lt.createStream(()=>this.fetchOsInformation()),this.networkInfoStream=Lt.createStream(()=>this.fetchNetworkInformation(),!1,!0,!0,3e4),this.uiLanguageStream=Lt.createStream(()=>this.fetchUserDefaultUiLanguage()),this.deviceTypeStream=Lt.createStream(()=>this.fetchDeviceType()),this.staticSystemInfo$=it.executeCommand(A.Gh.Common.Systeminfo.GetSystemInfo).pipe((0,b.d)(1))}getStaticSystemInfo(){if(m.n.isCefPlatform())throw new Error("not supported");return this.staticSystemInfo$}fetchDeviceId(){return this.bridgeService.executeCommand(A.Gh.Common.Systeminfo.GetDeviceId)}getSystemInfoGuid(){return this.systemInfoGuidSubject.asObservable()}updateSystemInfoGuid(Pe){(0,a.isEqual)(Pe,this.previousSystemInfo)||(this.systemInfoGuid=(0,S.Rl)(),this.previousSystemInfo=Pe),this.systemInfoGuidSubject.next(this.systemInfoGuid)}fetchSystemInfo(){const Pe=m.n.isCefPlatform()?this.bridgeService.executeCommand(A.Gh.Common.Systeminfo.GetBrowserInfo):_.C.pipe((0,B.O)(!0)),it=this.getDeviceId(),Lt=this.bridgeService.executeCommand(A.Gh.Common.Systeminfo.GetSystemInfo);return(0,F.aj)([it,Lt,Pe]).pipe((0,s.U)(Dt=>{const cn=Dt[1];return cn.DeviceId=Dt[0],m.n.isCefPlatform()&&(cn.BrowserName=Dt[2].BrowserNameNative||se.Px,cn.BrowserVersion=Dt[2].BrowserVersionNative||se.Px),cn}),(0,t.b)(Dt=>this.updateSystemInfoGuid(Dt)))}fetchGPUInfo(){return this.bridgeService.executeCommand(A.Gh.Common.Systeminfo.GetGPUInfo)}fetchGenericInfo(){return this.bridgeService.executeCommand(A.Gh.Common.Systeminfo.GetGenericInfo)}getSpecificSystemInfo(Pe){return this.bridgeService.executeCommand(A.Gh.Common.Systeminfo.GetSystemInfo,{key:Pe})}getOsInformation(){return this.osInfoStream.get$().pipe((0,U.q)(1))}fetchOsInformation(){return(0,V.$R)(this.getSpecificSystemInfo("Platform"),this.getSpecificSystemInfo("OSName")).pipe((0,s.U)(([Pe,it])=>({OSName:it.OSName,OSVersion:it.OSVersion,Platform:Pe.Platform})))}fetchDeviceType(){return this.getSpecificSystemInfo("DeviceType").pipe((0,s.U)(Pe=>Pe.DeviceType))}getNetworkInformation(){return this.networkInfoStream.get$().pipe((0,U.q)(1))}fetchNetworkInformation(){return this.getSpecificSystemInfo("Network").pipe((0,s.U)(Pe=>Pe.Network))}getDeviceId(){return this.deviceIdStream.get$().pipe((0,U.q)(1))}getDisks(){return this.getSpecificSystemInfo("Disk").pipe((0,s.U)(Pe=>Pe.Disk))}getPlatform(){return this.getSpecificSystemInfo("Platform").pipe((0,s.U)(Pe=>Pe.Platform))}getDisplays(){return this.getSpecificSystemInfo("Display").pipe((0,s.U)(Pe=>Pe.Display))}getHidInformation(){return this.getSpecificSystemInfo("HID").pipe((0,s.U)(Pe=>Pe.HID))}getSystemInfo(Pe=!1){return Pe?this.systemInfoStream.refresh().pipe((0,U.q)(1)):this.systemInfoStream.get$().pipe((0,U.q)(1))}getDeviceOSType(){return this.getOsInformation().pipe((0,s.U)(Pe=>m.n.isBrowserPlatform()?Pe.OSName:Pe.Platform===Y.Mac?se.wi.MacOS:Pe.Platform===Y.Windows?se.wi.Windows:se.wi.Undefined))}getDriverVersion(Pe=!0){return this.getGenericInfo(Pe).pipe((0,s.U)(it=>it.DriverVersion))}getGPUHardwareInfo(Pe=!0){return Pe?this.gpuInfoStream.refresh().pipe((0,U.q)(1)):this.gpuInfoStream.get$().pipe((0,U.q)(1))}getSLIInformation(Pe=!0){return this.getGPUHardwareInfo(Pe).pipe((0,s.U)(it=>it.SLI))}getOptimusStatus(Pe=!0){return this.getGPUHardwareInfo(Pe).pipe((0,s.U)(it=>it.IsOptimus))}getGenericInfo(Pe=!0){return Pe?this.genericInfoStream.refresh().pipe((0,U.q)(1)):this.genericInfoStream.get$().pipe((0,U.q)(1))}getUserDefaultUILanguage(){return this.uiLanguageStream.get$().pipe((0,U.q)(1))}getDeviceType(){return this.deviceTypeStream.get$().pipe((0,U.q)(1))}fetchUserDefaultUiLanguage(){return this.getSpecificSystemInfo("UserDefaultUILanguage").pipe((0,s.U)(Pe=>Pe.UserDefaultUILanguage))}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(c.ed),C.LFG(fe.d),C.LFG(S.O_))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();var me=e(66830);let ye=(()=>{class Pt{constructor(Pe,it,Lt,Dt,cn){this.translate=it,this.systemInfoService=Lt,this.config=cn,this.rtlLocaleSupported=!1,this.rtlLayoutEnabled=!1,this.layoutDirectionUpdated$=new D.t(1),this.retrySubject=new D.t(5),this.isSuccessEventSent=!1,this.isDirectionalityInitialized=!1,this.logger=Pe.getLogger("LocaleService"),this.localeChangedSubscription=Dt.createStream(this.updateLocale.bind(this)),this.translate.setDefaultLang("en_US")}updateLocale(){return this.systemInfoService.getUserDefaultUILanguage().pipe((0,s.U)(Pe=>(((0,a.isEmpty)(Pe)||this.isRTLLocale(Pe)&&!this.isRTLLocaleSupported)&&(this.logger.error(`Missing default UI language. Falling back to ${G} for default language.`),Pe=G),Pe)),(0,p.K)(()=>(this.logger.error(`Failed to get system info. Falling back to ${this.defaultLocale} for default language.`),(0,T.of)(G))),(0,l.zg)(Pe=>{let it=Pe;return(0,a.isNil)(this.config.supportedLang.find(Lt=>Lt===it))&&(it=this.getMappedLocale(it)),this.defaultLocale=it,this.updateCurrentLocale()}),(0,t.b)(Pe=>this.logger.info("Locale set to "+Pe)))}getLocaleDownloadRetryTelemetryData(){return this.retrySubject}retryOnFailure(Pe,it){let Lt=1;return Pe.pipe((0,w.a)(Dt=>Dt.pipe((0,h.w)(cn=>m.n.isBrowserPlatform()?(this.isSuccessEventSent=!1,this.retrySubject.next({isSuccess:!1,attemptCount:Lt,error:null,fileName:it+".json"}),Lt>=y.retryAttempts?(this.isSuccessEventSent=!0,this.logger.info("Locale JSON dowload retries expired."),(0,r._)(cn)):(this.logger.info("Locale JSON dowload failed, trying again ",Lt),Lt+=1,(0,T.of)(cn))):(this.logger.error("Not a Browser Client, so retry skipped",cn),(0,r._)(cn))),(0,u.g)(Lt*y.intervalBetweenRetries))),(0,t.b)(()=>{O.locale(it),!this.isSuccessEventSent&&m.n.isBrowserPlatform()&&(this.retrySubject.next({isSuccess:!0,attemptCount:Lt,error:null,fileName:it+".json"}),this.isSuccessEventSent=!0)}))}updateCurrentLocale(){const Pe=(0,a.isNil)(this.currentLocale)?this.defaultLocale:this.currentLocale;return this.retryOnFailure(this.translate.use(Pe),Pe).pipe((0,o.h)(Pe),(0,p.K)(it=>(this.logger.error("Locale Json download failed with error ",it),this.useMappedLocale(Pe))))}getMappedLocale(Pe){let it;if(!(0,a.isEmpty)(Pe)&&Pe.startsWith("zh_Hant")&&(it="zh_TW"),!(0,a.isEmpty)(Pe)&&v.get(Pe)){const Lt=v.get(Pe);it=null==Lt?void 0:Lt.find(Dt=>this.config.supportedLang.includes(Dt))}if(!it&&Pe!==G&&!(0,a.isEmpty)(Pe)&&Pe.length>=2){const Lt=v.get(Pe.substr(0,2));it=null==Lt?void 0:Lt.find(Dt=>this.config.supportedLang.includes(Dt))}return it=it||G,this.logger.info(`Mapped locale for ${Pe} is: ${it}`),it}useMappedLocale(Pe){const it=this.getMappedLocale(Pe);return this.isSuccessEventSent=!1,this.retryOnFailure(this.translate.use(it),it).pipe((0,o.h)(it),(0,p.K)(()=>it!==G?(this.logger.error(`Could not find translations for ${Pe}, falling back to ${G}`),this.useMappedLocale(G)):(0,r._)(`Could not load fallback locale ${G}. Translations cannot be loaded.`)))}updateUIDirectionality(){this.isRTLLayoutEnabled=this.isRTLLocale(this.getLocale()),(null==document?void 0:document.getElementsByTagName("html")[0]).dir=this.isRTLLayoutEnabled?"rtl":"ltr";const it=null==document?void 0:document.getElementsByTagName("body")[0];it.dir=this.isRTLLayoutEnabled?"rtl":"ltr",it.classList.add(this.isRTLLayoutEnabled?"isRtl":"isLtr"),this.isDirectionalityInitialized=!0}isDirectionalityChanged(){return!this.isRTLLayoutEnabled===this.isRTLLocale(this.getLocale())}useDefaultLocale(){return this.currentLocale=void 0,this.localeChangedSubscription.refresh()}setLocale(Pe){return(0,a.isNil)(this.config.supportedLang.find(it=>it===Pe))&&(Pe=this.getMappedLocale(Pe)),Pe===this.currentLocale?(0,T.of)(this.currentLocale):(this.currentLocale=Pe,this.localeChangedSubscription.refresh())}getLocale(){return this.currentLocale?this.currentLocale:this.defaultLocale}getShortLocale(){return this.getLocale()?this.getLocale().substr(0,2):"en"}get localeChanged(){return this.localeChangedSubscription.get$().pipe((0,f.x)(),(0,t.b)(()=>{(!this.isDirectionalityInitialized||this.isDirectionalityChanged())&&this.updateUIDirectionality()}))}get isRTLLocaleSupported(){return this.rtlLocaleSupported}set isRTLLocaleSupported(Pe){this.rtlLocaleSupported=Pe}get isRTLLayoutEnabled(){return this.rtlLayoutEnabled}set isRTLLayoutEnabled(Pe){this.rtlLayoutEnabled=Pe,this.layoutDirectionUpdated$.next(!0)}isRTLLocale(Pe){return P.includes(Pe.substr(0,2))}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(c.ed),C.LFG(i.sK),C.LFG(ae),C.LFG(S.O_),C.LFG(me.b))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();function X(Pt){return i.aw.forRoot({loader:{provide:i.Zw,useFactory:(Ke,Pe)=>function(Pt,Ke,Pe){return new g(Pt,Ke,Pe)}(Ke,Pe,Pt),deps:[I.eN,c.ed]}})}function j(){return i.aw.forChild()}var Z=e(33987),L=e(54299);const W="[Worker]:";let te=(()=>{class Pt{constructor(Pe,it,Lt){this.serviceWorkerService=Pe,this.loggingService=it,this.remoteLoggingService=Lt,this.logger=it.getLogger(W)}initialize(Pe,it){this.serviceWorkerService.swLoggingUpdate$.pipe().subscribe(Dt=>{this.remoteLoggingService.collectLogString(Dt.content)});const Lt=this.loggingService.getLoggingLevel(W);this.loggerSettings={remoteLoggingEnabled:Pe,consoleLoggingEnabled:it,loggingLevel:Lt,remoteLogFunction:null},this.serviceWorkerService.postMessageSw({type:Z.rL.SetLoggerSettings,content:JSON.stringify(this.loggerSettings)})}getLoggerSettings(){return this.loggerSettings}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(Z.HR),C.LFG(c.ed),C.LFG(L.V))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();var ie=(()=>{return(Pt=ie||(ie={})).INFO="INFO",Pt.WARN="WARN",Pt.DEBUG="DEBUG",Pt.ERROR="ERROR",ie;var Pt})();let Q=(()=>{class Pt{constructor(Pe){this.loggingService=Pe}logBasedOnLevel(Pe){switch(Pe.logLevel){case ie.INFO:case ie.DEBUG:this.logger.info(Pe.logStr,Pe.timeStamp);break;case ie.ERROR:this.logger.error(Pe.logStr,Pe.timeStamp);break;case ie.WARN:this.logger.warn(Pe.logStr,Pe.timeStamp)}}sendLog(Pe){this.logger=this.loggingService.getLogger(Pe.logModule?Pe.logModule+"/"+Pe.logTag:Pe.logTag),this.logBasedOnLevel(Pe)}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(c.ed))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();var k=e(98478);const oe={Ethernet:"Ethernet",WiFi2_4:"WiFi 2.4",WiFi5_0:"WiFi 5.0",Other:"Other",Unknown:"Unknown"};var N=e(82516),q=e(5633);let Me=(()=>{class Pt{constructor(Pe,it){this.logger=Pe.getLogger("crimson/windowService"),this.windowRef=window||{},this.windowRef.name=it.name}get window(){return this.windowRef}getFocusEvent(){return(0,N.R)(window,"focus")}getKeydownEvent(){return(0,N.R)(window,"keydown")}getKeyupEvent(){return(0,N.R)(window,"keyup")}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(c.ed),C.LFG(q.A))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();var xe=e(79441),ct=e(58640),Se=e(34361),Ge=e(59676),St=e(56816),Tt=e(71435);class Te{constructor(Ke,Pe,it){this.completesExternally=Ke,this.callbacks=Pe,this.staticWorkerFn=it,this.requestQueue$=new xe.xQ,this.startRequestQueue()}startRequestQueue(){this.requestQueue$.pipe((0,St.b)(Ke=>Ke.workerFn.pipe((0,l.zg)(Pe=>{if(Ke.response$.observers.length){if(this.completesExternally)return this.onRequestComplete$=new D.t(1),Ke.response$.next(Pe),Ke.response$.complete(),this.callbacks.next&&this.callbacks.next(Pe),this.onRequestComplete$;Ke.response$.next(Pe),Ke.response$.complete(),this.callbacks.next&&this.callbacks.next(Pe)}return(0,T.of)(!0)}),(0,p.K)(Pe=>(Ke.response$.error(Pe),Ke.response$.complete(),this.callbacks.error&&this.callbacks.error(Pe),(0,T.of)(Pe))),(0,Tt.x)(()=>{this.callbacks.complete&&this.callbacks.complete()})))).subscribe()}queue(...Ke){let Pe;return Pe=(0,ct.P)(this.staticWorkerFn?()=>this.staticWorkerFn(...Ke):Ke.length>1?()=>Ke[0](Ke.slice(1)):()=>Ke[0]()),(0,ct.P)(()=>{const it={workerFn:Pe,response$:new xe.xQ};return this.requestQueue$.next(it),it.response$.asObservable()})}notifyRequestCompletion(){this.completesExternally&&(this.onRequestComplete$.next(!0),this.onRequestComplete$.complete())}}var Je=e(42720),xt=e(27153),Ye=(()=>{return(Pt=Ye||(Ye={})).Loading="Loading",Pt.Dirty="Dirty",Pt.Saved="Saved",Pt.NotFound="NotFound",Ye;var Pt})(),rt=(()=>{return(Pt=rt||(rt={})).UpgradeStart="UpgradeStart",Pt.UpgradeEnd="UpgradeEnd",rt;var Pt})(),ge=(()=>((ge||(ge={})).Upgrade="Upgrade",ge))();const Ve="https://nvfile/";var at=(()=>{return(Pt=at||(at={})).Measure="measure",Pt.Resource="resource",at;var Pt})(),ve=(()=>((ve||(ve={})).Image="img",ve))();class Ze{constructor(Ke,Pe,it){if(this.config=Ke,this.onDbItemChange=Pe,this.requestQueue=it,this.versionKey="_version",this.connected=!1,this.name=this.config.storeName,this.dbName=this.config.dbName,this.userId=this.config.userId,this.config.storeDefinition){const Lt=this.config.storeDefinition;this.upgrade$=this.upgradeStore(this.config.storeName,Lt.storeDefault,Lt.upgrades,Lt.upgradeTargetVersion||0)}else this.upgrade$=(0,T.of)(this);this.upgrade$.subscribe(()=>{this.connected=!0})}logError(...Ke){console.error("DbDataStore",this.name,JSON.stringify(Ke))}logInfo(...Ke){console.info("DbDataStore",this.name,JSON.stringify(Ke))}upgradeStore(Ke,Pe,it,Lt){let Dt;return this.getItem(this.versionKey).pipe((0,l.zg)(cn=>(performance.mark(rt.UpgradeStart),Dt=cn||0,0===Dt&&Pe?(Dt=Pe.version,this.processDirectUpgrade(Ke,Pe,Dt)):this.processSequentialUpgrades(Ke,Dt,it,Lt))),(0,s.U)(()=>{performance.mark(rt.UpgradeEnd);const cn=this.getDbUpgradeDuration();return this.logInfo(`Time spent in async db upgrade: ${cn}, store: ${Ke}, new version: ${Dt}`),this}))}getDbUpgradeDuration(){return performance.measure(ge.Upgrade,rt.UpgradeStart,rt.UpgradeEnd),performance.getEntriesByType(at.Measure).find(Ke=>Ke.name===ge.Upgrade).duration}processDirectUpgrade(Ke,Pe,it){const Lt=[];for(const Dt of Object.keys(Pe.db))Lt.push(this.setItem(Dt,Pe.db[Dt]));return(0,Je.D)(Lt).pipe((0,l.zg)(()=>(this.logInfo(`Store ${Ke} successfully set to default version: ${it}`),this.setItem(this.versionKey,Pe.version))),(0,U.q)(1),(0,s.U)(()=>this),(0,p.K)(Dt=>(this.logError(`Store ${Ke} failed to upgrade version from 0 to ${it} due to error: ${Dt}`),(0,r._)(Dt))))}processSequentialUpgrades(Ke,Pe,it,Lt){if(Pe>Lt)return(0,r._)(`Store ${Ke} db downgrade not supported. Version: ${Pe}, Target: ${Lt}`);if(Pe===Lt)return this.logInfo(`Upgrade not required for Store: ${Ke}, Version: ${Pe}`),(0,T.of)(this);let Dt;return(0,Se.D)(it.keys()).pipe((0,St.b)(cn=>{if(Dt=+cn,Dt>Pe){this.logInfo(`Store: ${Ke}, attempting upgrade from version: ${Pe} to ${Dt}`);const Rn=it.get(Dt);return(0,Se.D)(Rn(this)).pipe((0,l.zg)(()=>(this.logInfo(`Store ${Ke} successfully upgraded to version: ${Dt}`),this.setItem(this.versionKey,Pe=Dt))))}return(0,T.of)(this)}),(0,xt.Z)(),(0,s.U)(()=>this),(0,p.K)(cn=>(this.logError(`Store ${Ke} failed to upgrade db from version: ${Pe} to ${Dt} due to error ${cn}`),(0,r._)(cn))))}getItem(Ke){return Ke?this.requestQueue.queue(this.name).pipe((0,l.zg)(Pe=>{const Lt=Pe.transaction(this.name,"readonly").objectStore(this.name);return(0,Se.D)(Lt.get(Ke))}),(0,p.K)(Pe=>(this.logError("error fetching item",Pe),(0,r._)(Pe))),(0,Tt.x)(()=>{this.requestQueue.notifyRequestCompletion()})):(0,r._)("invalid key")}setItem(Ke,Pe){return this.config.storeDefinition?(Pe instanceof Object&&(Pe.ts=Date.now()),this.setItemInDb(Ke,Pe).pipe((0,s.U)(it=>(this.onDbItemChange.next({storeName:this.name,userId:this.userId,key:Ke}),Pe)))):this.setItemInDb(Ke,Pe)}setItemInDb(Ke,Pe){return this.requestQueue.queue(this.name).pipe((0,l.zg)(it=>{const Lt=it.transaction(this.name,"readwrite");return Lt.objectStore(this.name).put(Pe,Ke),Lt.done}),(0,p.K)(it=>(this.logError("error setting item",it),(0,r._)(it))),(0,Tt.x)(()=>{this.requestQueue.notifyRequestCompletion()}))}removeItem(Ke){return this.requestQueue.queue(this.name).pipe((0,l.zg)(Pe=>{const it=Pe.transaction(this.name,"readwrite");return it.objectStore(this.name).delete(Ke),it.done}),(0,p.K)(Pe=>(this.logError("error removing item",Pe),(0,r._)(Pe))),(0,Tt.x)(()=>{this.requestQueue.notifyRequestCompletion()}))}getAllItems(){return this.requestQueue.queue(this.name).pipe((0,l.zg)(Ke=>{const it=Ke.transaction(this.name,"readonly").objectStore(this.name);return(0,Je.D)([(0,Se.D)(it.getAllKeys()),(0,Se.D)(it.getAll())])}),(0,s.U)(([Ke,Pe])=>{const it={};for(let Lt=0;Lt<Ke.length;Lt++)(0,a.set)(it,Ke[Lt].split("/"),Pe[Lt]);return it}),(0,p.K)(Ke=>(this.logError("error fetching item",Ke),(0,r._)(Ke))),(0,Tt.x)(()=>{this.requestQueue.notifyRequestCompletion()}))}getAllItemsByCursor(){return this.requestQueue.queue(this.name).pipe((0,l.zg)(Ke=>{const it=Ke.transaction(this.name,"readonly").objectStore(this.name),Lt={};return new Promise((Dt,cn)=>{it.openCursor().then(function Rn(Wn){if(Wn)return(0,a.set)(Lt,Wn.key.split("/"),Wn.value),Wn.continue().then(Rn)}).then(()=>{Dt(Lt)}).catch(()=>{cn("Error reading all keys from store")})})}),(0,p.K)(Ke=>(this.logError("error fetching item",Ke),(0,r._)(Ke))),(0,Tt.x)(()=>{this.requestQueue.notifyRequestCompletion()}))}clear(){return this.requestQueue.queue(this.name).pipe((0,l.zg)(Ke=>{const Pe=Ke.transaction(this.name,"readwrite");return Pe.objectStore(this.name).clear(),Pe.done}),(0,p.K)(Ke=>(this.logError("error clearing store",Ke),(0,r._)(Ke))),(0,Tt.x)(()=>{this.requestQueue.notifyRequestCompletion()}))}length(){return this.keys().pipe((0,s.U)(Ke=>Ke.length))}keys(){return this.requestQueue.queue(this.name).pipe((0,l.zg)(Ke=>Ke.transaction(this.name,"readonly").objectStore(this.name).getAllKeys()),(0,p.K)(Ke=>(this.logError("error fetching keys",Ke),(0,r._)(Ke))),(0,Tt.x)(()=>{this.requestQueue.notifyRequestCompletion()}))}}class Ie{constructor(Ke,Pe,it){this.dbName=Ke,this.globalStoreDefMap=Pe,this.userStoreDefMap=it,this.dataStores=new Map,this.dbItemChange$=new xe.xQ,this.globalStoreDefMap||(this.globalStoreDefMap=new Map),this.userStoreDefMap||(this.userStoreDefMap=new Map),this.requestQueue=new Te(!0,{next:void 0,error:this.closeDbConnection.bind(this),complete:this.closeDbConnection.bind(this)},this.refreshDbInstance.bind(this))}get onDbItemChange(){return this.dbItemChange$}logError(...Ke){console.error("DbHandler",this.dbName,JSON.stringify(Ke))}logInfo(...Ke){console.info("DbHandler",this.dbName,JSON.stringify(Ke))}refreshDbInstance(Ke){return(0,ct.P)(()=>this.dbObjectStores&&!this.dbObjectStores.contains(Ke)?(0,T.of)(!0):(0,T.of)(!1)).pipe((0,l.zg)(Pe=>Pe?(this.logInfo("retrieving db version from disk"),this.openDbInstance(Ke).pipe((0,l.zg)(it=>{this.dbInstance=it,this.dbObjectStores=this.dbInstance.objectStoreNames;const Lt=this.dbInstance.version;return this.logInfo("current db version",Lt),this.closeDbConnection(),this.openDbInstance(Ke,Lt+1)}))):this.openDbInstance(Ke).pipe((0,l.zg)(it=>{if(this.dbInstance=it,this.dbObjectStores=this.dbInstance.objectStoreNames,!this.dbObjectStores.contains(Ke)){const Lt=this.dbInstance.version;return this.logInfo(`store ${Ke} not found in current db version ${Lt}, upgrading`),this.closeDbConnection(),this.openDbInstance(Ke,Lt+1)}return(0,T.of)(this.dbInstance)}))),(0,p.K)(Pe=>(this.logError("error",Pe),(0,r._)(Pe))))}openDbInstance(Ke,Pe){return(0,Se.D)((0,Ge.X3)(this.dbName,Pe,{upgrade:it=>{this.logInfo("upgrading db for",Ke),this.dbInstance=it,this.dbObjectStores=this.dbInstance.objectStoreNames,this.dbObjectStores.contains(Ke)||this.dbInstance.createObjectStore(Ke)}}))}closeDbConnection(){this.dbInstance?(this.dbInstance.close(),this.dbInstance=null):this.logError("attempted to close db connection when local instance unavailable")}getDataStore(Ke){if(!this.dataStores.has(Ke.storeDbName)){this.logInfo(`Create datastore instance: ${Ke.storeDbName}`);const Pe=Object.assign({},Ke,{dbName:this.dbName});this.dataStores.set(Ke.storeDbName,new Ze(Pe,this.dbItemChange$,this.requestQueue))}return this.dataStores.get(Ke.storeDbName)}getGlobalStore(Ke){return this.getDataStore({storeName:Ke,storeDbName:Ke,storeDefinition:this.globalStoreDefMap.get(Ke)})}getUserStore(Ke,Pe){return this.getDataStore({storeName:Pe,storeDbName:`${Ke}_${Pe}`,userId:Ke,storeDefinition:this.userStoreDefMap.get(Pe)})}getStore(Ke){return this.getDataStore({storeName:Ke,storeDbName:Ke})}}let $e=(()=>{class Pt{constructor(Pe){this.dbName=Pe.name,this.globalStoreDefMap=new Map,this.userStoreDefMap=new Map}get globalStores(){return this.globalStoreDefMap}get userStores(){return this.userStoreDefMap}get appDbName(){return this.dbName}defineStore(Pe,it){const Lt=Pe.storeName;if(it.has(Lt))throw new Error(`Error: store name already exists: ${Lt}`);let Dt;Pe.name=this.dbName,Pe.hasOwnProperty("storeDefault")&&(Dt=Pe.storeDefault,delete Pe.storeDefault);const cn={config:Pe,upgrades:new Map,storeDefault:Dt};return it.set(Lt,cn),this}defineUpgrade(Pe,it,Lt,Dt){const cn=Dt.get(Pe);return cn.upgrades.set(it,Lt),cn.upgradeTargetVersion=it,this}defineGlobalStore(Pe){return this.defineStore.call(this,Pe,this.globalStoreDefMap)}defineUserStore(Pe){return this.defineStore.call(this,Pe,this.userStoreDefMap)}upgradeGlobalStore(Pe,it,Lt){return this.defineUpgrade.call(this,Pe,it,Lt,this.globalStoreDefMap)}upgradeUserStore(Pe,it,Lt){return this.defineUpgrade.call(this,Pe,it,Lt,this.userStoreDefMap)}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(q.A))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})(),ze=(()=>{class Pt{constructor(Pe){this.globalStoreDefMap=Pe.globalStores,this.userStoreDefMap=Pe.userStores,this.dbName=Pe.appDbName,this.dbhandlerInstance=new Ie(this.dbName,this.globalStoreDefMap,this.userStoreDefMap)}get dbHandler(){return this.dbhandlerInstance}getGlobalStore(Pe){return this.dbhandlerInstance.getGlobalStore(Pe)}getUserStore(Pe,it){return this.dbhandlerInstance.getUserStore(Pe,it)}getStore(Pe){return this.dbhandlerInstance.getStore(Pe)}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG($e))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();var _t=e(3786),be=e(34761);class pt{constructor(Ke,Pe,it,Lt){this.dbHandler=Ke,this.storeName=Pe,this.key=it,this.userId=Lt,this.status_=Ye.Loading,this.syncObservers=new Set,this.wait$=new be.c}get status(){return this.status_}updateStatus(Ke){const Pe=this.status_;this.status_=Ke,this.isFirstSyncComplete(Pe)&&(this.wait$.next(this.status),this.wait$.complete())}isFirstSyncComplete(Ke){return!this.wait$.closed&&Ke===Ye.Loading&&this.status_!==Ye.Loading}persist_(){this.updateStatus(Ye.Dirty);const Ke=this.getStore(this.userId,this.storeName),Pe=(0,_t._T)(this,["status","status_","persist_","sync_","observe_","unobserve_","wait_","dbHandler","updateStatus","isFirstSyncComplete","getStore","syncObservers","wait$"]);return Ke.setItem(this.key,Pe).pipe((0,t.b)(()=>this.updateStatus(Ye.Saved)),(0,p.K)(()=>(this.logError(`Error persisting the key ${this.key} to db`),(0,T.of)(Pe))))}getStore(Ke,Pe){return Ke?this.dbHandler.getUserStore(Ke,Pe):this.dbHandler.getGlobalStore(Pe)}sync_(){return this.getStore(this.userId,this.storeName).getItem(this.key).pipe((0,s.U)(Pe=>{if(!((Pe=Pe||{})instanceof Object))throw new Error("Tried to cache plain old data. Only Object types supported");for(const it of Object.keys(Pe))this[it]=Pe[it];return this.updateStatus(Ye.Saved),this.syncObservers.forEach(it=>{it()}),Pe}))}wait_(){return this.wait$.closed&&(this.wait$=new be.c,this.status_!==Ye.Loading&&(this.wait$.next(this.status),this.wait$.complete())),this.wait$.asObservable()}observe_(Ke){this.syncObservers.add(Ke),this.status_!==Ye.Loading&&Ke()}unobserve_(Ke){this.syncObservers.delete(Ke)}logError(...Ke){console.error("DbHandler",this.storeName,JSON.stringify(Ke))}}let Ot=(()=>{class Pt{constructor(Pe){this.dbService=Pe,this.globalLoadMap=new Map,this.userLoadMap=new Map,this.globalCacheMap=new Map,this.userCacheMap=new Map}get globalCacheDefinitions(){return this.globalLoadMap}get userCacheDefinitions(){return this.userLoadMap}get globalCache(){return this.globalCacheMap}get userCache(){return this.userCacheMap}loadGlobalKey(Pe,it){this.globalLoadMap.has(Pe)||this.globalLoadMap.set(Pe,new Set),this.globalLoadMap.get(Pe).add(it),this.globalCacheMap.has(Pe)||this.globalCacheMap.set(Pe,new Map),this.globalCacheMap.get(Pe).set(it,new pt(this.dbService.dbHandler,Pe,it))}loadUserKey(Pe,it){this.userLoadMap.has(Pe)||this.userLoadMap.set(Pe,new Set),this.userLoadMap.get(Pe).add(it)}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(ze))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})(),Kt=(()=>{class Pt{constructor(Pe,it,Lt){this.loggingService=Pe,this.dbService=Lt,this.logger=this.loggingService.getLogger("crimson/dbCacheService"),this.globalCacheDefinitions=it.globalCacheDefinitions,this.userCacheDefinitions=it.userCacheDefinitions,this.globalCache=it.globalCache,this.userCacheMap=it.userCache,this.dbService.dbHandler.onDbItemChange.subscribe(Dt=>{let cn;Dt.userId?this.userCacheMap.has(Dt.userId)&&this.userCacheMap.get(Dt.userId).has(Dt.storeName)&&(cn=this.userCacheMap.get(Dt.userId).get(Dt.storeName).get(Dt.key)):this.globalCache.has(Dt.storeName)&&(cn=this.globalCache.get(Dt.storeName).get(Dt.key)),cn&&cn.sync_().subscribe()})}syncGlobal(Pe){const it=this.globalCacheDefinitions.get(Pe),Lt=[];return it.forEach(Dt=>{const cn=this.globalCache.get(Pe);Lt.push(cn.get(Dt).sync_())}),(0,Je.D)(Lt).pipe((0,t.b)(()=>{this.logger.info(`Cached DB store ${Pe} into memory`)}))}syncUser(Pe,it){const Lt=this.userCacheDefinitions.get(Pe);this.userCacheMap.has(it)||this.initUserCache(it);const Dt=[];return Lt.forEach(cn=>{const Rn=this.userCacheMap.get(it).get(Pe);Dt.push(Rn.get(cn).sync_())}),(0,Je.D)(Dt).pipe((0,t.b)(()=>{this.logger.info(`Cached user DB store ${Pe} into memory for user ${it}`)}))}initUserCache(Pe){this.userCacheMap.set(Pe,new Map),this.userCacheDefinitions.forEach((it,Lt)=>{it.forEach(Dt=>{this.userCacheMap.get(Pe).has(Lt)||this.userCacheMap.get(Pe).set(Lt,new Map),this.userCacheMap.get(Pe).get(Lt).set(Dt,new pt(this.dbService.dbHandler,Lt,Dt,Pe))})})}getCachedGlobalItem(Pe,it){if(this.globalCache.has(Pe))return this.globalCache.get(Pe).get(it)}getOrCreateCachedGlobalItem(Pe,it){return(!this.globalCache.has(Pe)||!this.globalCache.get(Pe).has(it))&&(this.globalCacheDefinitions.has(Pe)||this.globalCacheDefinitions.set(Pe,new Set),this.globalCacheDefinitions.get(Pe).add(it),this.globalCache.has(Pe)||this.globalCache.set(Pe,new Map),this.globalCache.get(Pe).set(it,new pt(this.dbService.dbHandler,Pe,it))),this.globalCache.get(Pe).get(it)}getCachedUserItem(Pe,it,Lt){return this.userCacheMap.has(Pe)||this.initUserCache(Pe),this.userCacheMap.get(Pe).get(it).get(Lt)}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(c.ed),C.LFG(Ot),C.LFG(ze))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();var xn,nn=e(84538);e(6989),e(2702),e(84454),function(Pt){let Ke;var Pe;(Pe=Ke=Pt.HandlerEventType||(Pt.HandlerEventType={})).SimpleWindowEvent="SIMPLE_WINDOW_EVENT",Pe.StructuredWindowEvent="STRUCTURED_WINDOW_EVENT",Pe.IpcEvent="IPC_EVENT"}(xn||(xn={}));var Fn=(()=>((Fn||(Fn={})).Types=xn,Fn))();class yt{constructor(Ke,Pe){this.bridgeService=Ke,this.keyToMessageType=new Map,this.eventHandlerLogger=Pe,this.eventStreams=new S.eQ(it=>{if(!this.keyToMessageType.has(it))return this.eventHandlerLogger.error("No message type for key",it),_.C;const Lt=this.keyToMessageType.get(it);return this.handlerMap[Lt].internalSubjects.set(it,new xe.xQ),this.handlerMap[Lt].internalSubjects.get(it).asObservable()},!1,!1)}registerNewHandler(Ke,Pe,it,Lt,Dt){this.handlerMap||(this.handlerMap={}),this.handlerMap[Ke]={pred:Pe,keyFunc:it,valFunc:Lt,transformedFunc:Dt,internalSubjects:new Map}}get$(Ke,Pe=this.defaultHandlerType){return this.keyToMessageType.has(Ke)||this.keyToMessageType.set(Ke,Pe),this.eventStreams.get$(Ke)}processMessage(Ke){for(const Pe of Object.keys(this.handlerMap))if(this.handlerMap[Pe].pred(Ke)){const Lt=this.handlerMap[Pe].transformedFunc(Ke),Dt=this.handlerMap[Pe].keyFunc(Lt),cn=this.handlerMap[Pe].valFunc(Lt);this.handlerMap[Pe].internalSubjects.has(Dt)?this.handlerMap[Pe].internalSubjects.get(Dt).next(cn):this.eventHandlerLogger.info("No subscribers for event with key ",Dt)}}}const Ht="json:";var Ue=(()=>{return(Pt=Ue||(Ue={})).ApplicationHide="APPLICATION_HIDE",Pt.ApplicationShow="APPLICATION_SHOW",Pt.WindowMinimize="MINIMIZE",Pt.IpcNewMessage="IPC_NEW_MESSAGE",Pt.SelfUpdate="SELF_UPDATE",Pt.RouteChange="URL_ROUTE_CHANGE",Pt.StoredCommandLine="STORED_COMMAND_LINE",Pt.ProcessEvent="PROCESS_EVENT",Pt.UpdateInitiated="UPDATE_INITIATED",Pt.SharedStorageUpdate="SHARED_STORAGE_UPDATE",Pt.ForegroundEvent="FOREGROUND_EVENT",Pt.DisplayModeChange="DISPLAYMODECHANGE",Ue;var Pt})();class Mt{constructor(Ke){const{type:Pe}=Ke,it=(0,_t._T)(Ke,["type"]);this.type=Pe,this.params=it}}class ft extends Mt{constructor(Ke){super(Ke),this.newRoute=Ke["new-route"],this.currentRoute=Ke["current-route"]}}let Et=(()=>{class Pt extends yt{constructor(Pe,it){const Lt=it.getLogger("nativeEventService");super(Pe,Lt),this.logger=Lt,this.defaultHandlerType=Fn.Types.HandlerEventType.SimpleWindowEvent,this.registerNewHandler(Fn.Types.HandlerEventType.StructuredWindowEvent,Dt=>Dt.startsWith(Ht),Dt=>JSON.parse(Dt).type,Dt=>Dt,Dt=>Dt.substring(Ht.length)),this.registerNewHandler(Fn.Types.HandlerEventType.SimpleWindowEvent,Dt=>!Dt.startsWith(Ht),Dt=>Dt,Dt=>Dt,Dt=>Dt),this.bridgeService.executeCommand(A.Gh.Common.Windowevents.RegisterWindowEventsCallback,{}).subscribe(Dt=>{this.processMessage(Dt)})}getNativeEvent$(Pe){return this.get$(Pe,Fn.Types.HandlerEventType.StructuredWindowEvent).pipe((0,s.U)(it=>class{static create(Ke){switch(Ke.type){case Ue.RouteChange:return new ft(Ke);default:return new Mt(Ke)}}}.create(JSON.parse(it))))}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(n.dF),C.LFG(c.ed))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();var Ee=e(73474),dt=e(35467),kt=e(892),Zt=e(96475);const Pn="(orientation: portrait)",Ln="(orientation: landscape)",ht=`(max-width: 430px) and (max-height: 932px) and ${Pn}`,Vt=`(max-width: 932px) and (max-height: 430px) and ${Ln}`,vt={IPhone:`${ht}, ${Vt}`,IPhoneLandscape:`${Vt}`,IPhonePortrait:`${ht}`,IPhoneSELandscape:`(max-width: 568px) and (max-height: 320px) and ${Ln}`,IPhone8Portrait:`(max-width: 375px) and (max-height: 667px) and ${Pn}`,IPad:`(max-width: 1024px) and (max-height: 1366px) and ${Pn},\n             (max-width: 1366px) and (max-height: 1024px) and ${Ln}`},gt=[{provide:Zt.Bs,useValue:[{alias:"lt-400",overlapping:!0,mediaQuery:"screen and (max-width: 399.99px)",priority:1050},{alias:"lt-360",overlapping:!0,mediaQuery:"screen and (max-width: 359.99px)",priority:1150},{alias:"iphone",mediaQuery:vt.IPhone},{alias:"ipad",mediaQuery:vt.IPad}],multi:!0}];e(28587);const le="transparent";let nt=(()=>{class Pt{constructor(){this.enabled=!1,this.isBrowser=!1,this.isBrowser=m.n.isBrowserPlatform()}init(Pe){this.enabled=Pe,this.enabled&&this.setDefaultStyle()}setStyle(Pe){document.documentElement.style.background=Pe,document.body.style.background=Pe}setDefaultStyle(){this.setStyle(this.isBrowser?"#191919":le)}setTransparent(Pe){Pe&&!this.isBrowser?this.setStyle(le):this.setDefaultStyle()}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();const bt=[16,160,161,17,162,163,18,164,165,91,92,65335],ln={0:"None",8:"Backsp",9:"Tab",16:"Shift",17:"Ctrl",18:"Alt",12:"Clear",13:"Enter",19:"Pause",20:"Caps",27:"Esc",32:"Space",33:"PgUp",34:"PgDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",41:"Select",42:"Print",43:"Exec",44:"PrtScn",45:"Insert",46:"Delete",47:"Help",91:"Win",92:"Win",93:"Apps",95:"Sleep",96:"Num0",97:"Num1",98:"Num2",99:"Num3",100:"Num4",101:"Num5",102:"Num6",103:"Num7",104:"Num8",105:"Num9",106:"Num*",107:"Num+",108:"Separ",109:"Num-",110:"Num.",111:"Num/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"NumLck",145:"ScrLck",160:"Shift",161:"Shift",162:"Ctrl",163:"Ctrl",164:"Alt",165:"Alt",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",65335:"Cmd"},Sn={Backspace:8,Tab:9,Shift:16,Control:17,Alt:18,Clear:12,Enter:13,Pause:19,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,Help:47,Win:91,ContextMenu:93,Standby:95,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222,Cmd:65335};var qe=e(12702);class Ut{constructor(Ke,Pe,it){this.osType=Pe,this.keyDownOnly=it,this.currentKeyCombo=[],this.downSet=!1,this.logger=Ke.getLogger("crimson/KeypressHelper"),this.shortcutData$=new xe.xQ,this.comboKeydown$=new xe.xQ,it&&this.comboKeydown$.pipe((0,h.w)(()=>(0,qe.H)(200))).subscribe(()=>{this.logger.verbose("combokeyhelper CurrentKeyCombo: ",this.currentKeyCombo),this.shortcutData$.next(this.currentKeyCombo),this.resetCurrentKeyCombo()})}get shortcutData(){return this.shortcutData$.asObservable()}get loadedKeyCombo(){return this.currentKeyCombo}get isDownSet(){return this.downSet}get isKeyDownOnly(){return this.keyDownOnly}setDown(){this.downSet=!0}setNonEnglishKeyboardLayout(Ke){this.nonEnglishKeyboardLayout=Ke}resetDownStatus(){this.downSet=!1}resetCurrentKeyCombo(){this.currentKeyCombo=[]}logEvent(Ke,Pe){this.keyDownOnly||this.logger.info((Pe?"Keyup":"Keydown")+" : "+Ke.key)}loadKey(Ke){if("Enter"===Ke.key||"Unidentified"===Ke.key||void 0===Ke.key)return!1;let Pe=Ke.key;"Meta"===Pe&&(Pe=this.osType===se.wi.MacOS?"Cmd":"Win")," "===Pe&&(Pe="Space");let it=0;return Ke.code.startsWith("Digit")&&1===Ke.key.length?it=Ke.code.charCodeAt(5):Sn[Pe]?it=Sn[Pe]:1===Pe.length?(this.nonEnglishKeyboardLayout&&(Pe=this.getKeyFromCode(Ke.code.toLowerCase(),Pe)),Pe=Pe.toUpperCase(),(1!==Pe.length||" "===Pe)&&(this.logger.info("toUpperCase broken: ",Pe," resetting to key event: ",Ke.key),Pe=Ke.key),it=Pe.charCodeAt(0)):this.logger.info("code is unknown: ",Ke.key),-1===this.currentKeyCombo.indexOf(it)&&(this.currentKeyCombo.push(it),!0)}isResetKey(Ke){return("Backspace"===Ke.key||"Delete"===Ke.key||" "===Ke.key)&&(this.currentKeyCombo.length=0,!0)}isMetaKey(Ke){return"Alt"===Ke.key||"Shift"===Ke.key||"Control"===Ke.key||"Meta"===Ke.key}isEscapeKey(Ke){return"Escape"===Ke.key&&(this.currentKeyCombo.length=0,!0)}shouldIgnore(Ke){return"Unidentified"===Ke.key||"Tab"===Ke.key||"ArrowDown"===Ke.key||"ArrowUp"===Ke.key||"ArrowLeft"===Ke.key||"ArrowRight"===Ke.key||this.osType===se.wi.Windows&&"Meta"===Ke.key}isModifierKey(Ke){return("Shift"===Ke.key||"Meta"===Ke.key||"Control"===Ke.key||"Alt"===Ke.key)&&(this.logger.verbose("isModifierKey"),!0)}handleModifierKeys(Ke){if(Ke.metaKey){let Pe;this.logger.verbose("processKeyDownEvent this.metaKey: "+Ke.metaKey),Pe=this.osType===se.wi.MacOS?"Cmd":"Win",this.currentKeyCombo.push(Sn[Pe])}Ke.shiftKey&&(this.logger.verbose("processKeyDownEvent this.shiftKey: "+Ke.shiftKey),this.currentKeyCombo.push(Sn.Shift)),Ke.ctrlKey&&(this.logger.verbose("processKeyDownEvent this.ctrlKey: "+Ke.ctrlKey),this.currentKeyCombo.push(Sn.Control)),Ke.altKey&&(this.logger.verbose("processKeyDownEvent this.altKey: "+Ke.altKey),this.currentKeyCombo.push(Sn.Alt))}getKeyFromCode(Ke,Pe){this.logger.verbose("getKeyFromCode code"+Ke);try{const it=Ke.split("key");return this.logger.verbose("getKeyFromCode key"+it[1]),it[1]?it[1]:Pe}catch(it){return this.logger.error("some error occured while fetching key from code",it),Pe}}processKeyDownEvent(Ke){this.logEvent(Ke,!1),(this.isKeyDownOnly||!this.isResetKey(Ke))&&(this.isEscapeKey(Ke)||this.shouldIgnore(Ke)||this.loadKey(Ke)&&this.comboKeydown$.next(Ke))}processKeyDownEventForHotkeyInvocation(Ke){this.logEvent(Ke,!1),(this.isKeyDownOnly||!this.isResetKey(Ke))&&(this.isEscapeKey(Ke)||this.shouldIgnore(Ke)||this.isModifierKey(Ke)||(this.handleModifierKeys(Ke),this.loadKey(Ke)&&this.comboKeydown$.next(Ke)))}}let M=(()=>{class Pt{constructor(Pe){this.logger=Pe.getLogger("crimson/hotkeyHelper")}processKey(Pe){if(Pe in ln)return ln[Pe];const it=String.fromCharCode(Pe);return""===it&&this.logger.error("ERROR: unsupported character: ",Pe),it}shortcutToString(Pe){return Pe&&0!==Pe.length?Pe.map(it=>this.processKey(it)).join("+"):ln[0]}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(c.ed))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();var re=e(79911);const Ce={statusCode:re.Bs.UnknownError};class ke{constructor(Ke,Pe,it){var Lt,Dt;this.params=Ke,this.networkStatusService=Pe,this.bridgeService=it,this.getFailureCode=cn=>this.checkRequestCancelled(cn).pipe((0,l.zg)(Rn=>Rn.statusCode!==re.Bs.UnknownError?(0,T.of)(Rn):this.checkNetworkStatus()),(0,l.zg)(Rn=>Rn.statusCode!==re.Bs.UnknownError?(0,T.of)(Rn):this.checkDNSLookup(cn.requestUrl)),(0,p.K)(Rn=>(0,T.of)(Ce))),this.dnsLookupValidity=null!==(Dt=null===(Lt=this.params)||void 0===Lt?void 0:Lt.dnsCacheValidity)&&void 0!==Dt?Dt:re.PN,this.dnsLookupMap=new Map,this.requestCancelledMap=new Map}checkNetworkStatus(){return(0,T.of)(this.networkStatusService.isOnline?Ce:{statusCode:re.Bs.NetworkStatusOffline})}getCachedDNSEntry(Ke){const Pe=this.dnsLookupMap.get(Ke);if(Pe&&Date.now()-Pe.lastUpdatedTs<=this.dnsLookupValidity)return Pe}checkDNSLookup(Ke){const Pe=new URL(Ke).hostname,it=this.getCachedDNSEntry(Pe);return it?(0,T.of)(it.lookupSuccessful?Ce:{statusCode:re.Bs.DNSLookupFailed,isUserOnline:!0,cachedDNSEntry:it}):this.bridgeService.executeCommand(A.Gh.Common.Systeminfo.DNSLookup,{name:Pe}).pipe((0,s.U)(Lt=>{if(!Lt)return Ce;const Dt={lookupSuccessful:!0,lastUpdatedTs:Date.now(),destinationIp:(null==Lt?void 0:Lt.hostname)||""};return this.dnsLookupMap.set(Pe,Dt),{statusCode:re.Bs.UnknownError,cachedDNSEntry:Dt}}),(0,p.K)(Lt=>{const Dt={lookupSuccessful:!1,lastUpdatedTs:Date.now(),destinationIp:""};return this.dnsLookupMap.set(Pe,Dt),(0,T.of)({statusCode:re.Bs.DNSLookupFailed,isUserOnline:!0,cachedDNSEntry:Dt})}))}checkRequestCancelled(Ke){const Pe={statusCode:re.Bs.RequestCancelled};return Ke.uniqueRequestId&&this.requestCancelledMap.has(Ke.uniqueRequestId)?(0,T.of)(Pe):Ke.isCancelled?(Ke.uniqueRequestId&&this.requestCancelledMap.set(Ke.uniqueRequestId,!0),(0,T.of)(Pe)):(0,T.of)(Ce)}}let tt=(()=>{class Pt{constructor(Pe,it){this.networkStatusService=Pe,this.bridgeService=it}createAnalyzer(Pe){return new ke(Pe,this.networkStatusService,this.bridgeService)}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(k._),C.LFG(n.dF))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();var ut=e(89919),Ft=e(9170);function zt(Pt){return Pt instanceof HTMLInputElement||Pt instanceof HTMLTextAreaElement}function $t(Pt,Ke){return Pt.visible===Ke.visible&&Pt.height===Ke.height}let Jt=(()=>{class Pt{constructor(Pe,it,Lt,Dt){this.systemInfoService=Lt,this.ngZone=Dt,this.logger=Pe.getLogger("SystemVirtualKeyboardService"),this.window=it.window,this.keyboardState$=this.createKeyboardState().pipe((0,f.x)($t),(0,b.d)({bufferSize:1,refCount:!0}))}get visualViewport(){return this.window.visualViewport}get document(){return this.window.document}get keyboardHeight$(){return this.keyboardState$.pipe((0,Ft.h)(Pe=>void 0!==Pe.height),(0,s.U)(Pe=>Pe.height))}get keyboardVisible$(){return this.keyboardState$.pipe((0,s.U)(Pe=>Pe.visible))}createKeyboardState(){return this.systemInfoService.getDeviceOSType().pipe((0,U.q)(1),(0,h.w)(Pe=>{switch(Pe){case se.wi.WebOS:return this.createWebOSKeyboardState();case se.wi.Tizen:return this.createTizenKeyboardState();case se.wi.IOS:case se.wi.IPadOS:return this.createIOSKeyboardState();default:return this.logger.warn("Attempting to monitor virtual keyboard state on unsupported platform"),_.C}}))}createWebOSKeyboardState(){return m.n.isPWAModeOnLGTV()?this.ngZone.runOutsideAngular(()=>(0,N.R)(this.document,"keyboardStateChange").pipe((0,s.U)(Pe=>({visible:Pe.detail.visibility})),(0,B.O)({visible:!1}))):(this.logger.warn("Virtual keyboard detection is only possible in PWA mode"),_.C)}createTizenKeyboardState(){return this.ngZone.runOutsideAngular(()=>{const Pe=(0,ut.T)((0,N.R)(this.window,"focusin").pipe((0,s.U)(Lt=>zt(Lt.target))),(0,N.R)(this.window,"focusout").pipe((0,o.h)(!1))),it=(0,N.R)(this.window,"keydown").pipe((0,Ft.h)(Lt=>(65376===Lt.keyCode||"Cancel"===Lt.key)&&zt(Lt.target)),(0,t.b)(Lt=>{Lt.target.blur()}),(0,h.w)(Lt=>_.C));return(0,ut.T)(Pe,it).pipe((0,s.U)(Lt=>({visible:Lt})),(0,B.O)({visible:!1}))})}createIOSKeyboardState(){return this.visualViewport?this.ngZone.runOutsideAngular(()=>(0,ut.T)((0,N.R)(this.visualViewport,"resize"),(0,N.R)(this.window,"orientationchange")).pipe((0,Ft.h)(()=>this.visualViewport.height!==this.window.innerWidth),(0,s.U)(()=>this.window.innerHeight-this.visualViewport.height),(0,f.x)()).pipe((0,s.U)(it=>{const Dt=zt(this.document.activeElement)?it:0;return{visible:Dt>0,height:Dt}}),(0,B.O)({visible:!1,height:0}))):(this.logger.warn("visualViewport is required for virtual keyboard detection"),_.C)}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(c.ed),C.LFG(Me),C.LFG(ae),C.LFG(C.R0b))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();var yn=e(72445);let An=(()=>{class Pt{constructor(Pe){this.loggingService=Pe,this.audioContextMap=new Map,this.logger=this.loggingService.getLogger("AudioPlayService")}playAudio(Pe){var it;const Lt=this.audioContextMap.get(Pe);Lt?(this.logger.info(`Playing audio ${Pe}`),null===(it=Lt.play())||void 0===it||it.then(Dt=>{this.logger.info(`Played audio ${Pe}`)}).catch(Dt=>{this.logger.error(`Error while playing Audio  ${Pe} - ${Dt}`)})):this.logger.error(`audio type ${Pe} is not registered.`)}registerAudio(Pe,it){it?this.audioContextMap.has(Pe)?this.logger.error(`audio type ${Pe} is already registered.`):(this.logger.info(`Registering audio ${Pe}.`),this.audioContextMap.set(Pe,new Audio(it))):this.logger.error(`Invalid src param for audio ${Pe}`)}removeAudio(Pe){this.audioContextMap.has(Pe)&&(this.logger.info(`Removing audio of type: ${Pe}`),this.audioContextMap.delete(Pe))}}return Pt.\u0275fac=function(Pe){return new(Pe||Pt)(C.LFG(c.ed))},Pt.\u0275prov=C.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})()},89166:(He,de,e)=>{"use strict";e.d(de,{sZ:()=>i,Dc:()=>c,fy:()=>F,Vi:()=>V,H7:()=>o,sk:()=>h,$Q:()=>u,j1:()=>t,NI:()=>l});var n=e(2316);let i=(()=>{class b{}return b.\u0275fac=function(U){return new(U||b)},b.\u0275mod=n.oAB({type:b}),b.\u0275inj=n.cJS({imports:[[]]}),b})();var D=e(45871),m=e(98636),y=e(18293),T=e(71435),r=e(202),a=e(61074),s=e(90772),p=e(3076),l=(()=>{return(b=l||(l={})).HttpUrl="http.url",b.HttpStatusCode="http.status_code",b.HttpStatusCodeFamily="http.status_code_family",b.HttpMethod="http.method",b.HttpHostname="http.hostname",b.HttpHeadersPrefix="http.headers.",b.HttpPath="http.path",b.HttpErrorText="http.error_text",b.ParamsPrefix="params.",b.Error="error",b.SpanKind="span.kind",b.Component="component",b.ClientOs="client.os",b.ClientOsName="client.os.name",b.ClientOsVersion="client.os.version",b.ServiceVersion="service.version",b.ServiceType="service.type",b.Type="type",b.DeviceId="deviceId",b.AppName="appName",b.LayoutExecutionId="layoutExecutionId",b.Origin="origin",b.VpcId="vpcId",b.Locale="locale",b.Trigger="trigger",b.LoginStatus="loginStatus",b.CmsId="cmsId",b.FailurePoint="failurePoint",b.ErrorCode="errorCode",b.ErrorType="errorType",b.NetworkOverridePresent="networkOverridePresent",b.NetworkTestStatus="networkTestStatus",b.ZoneName="zone.name",b.ZoneAddress="zone.address",b.OobeDialogShown="oobeDialogShown",b.LoginWindowShown="loginWindowShown",b.LaunchSource="launchSource",b.ShortName="shortName",b.UsedLatencyBasedRouting="usedLatencyBasedRouting",b.IsSessionAutoResumed="isSessionAutoResumed",b.ErrorDetails="errorDetails",b.RoutingOverrideUsed="routingOverrideUsed",b.OverrideZoneName="overrideZoneName",b.OverrideZoneAddress="overrideZoneAddress",b.SessionId="sessionId",b.SkippedAuthCheck="skippedAuthCheck",b.CountryCode="countryCode",b.FastestJarvisDomain="fastestJarvisDomain",b.TraceId="traceId",b.RequestId="requestId",b.PanelType="panelType",b.BeforeEventDuration="beforeEventDuration",b.PresentDuration="presentDuration",l;var b})(),t=(()=>{return(b=t||(t={})).DelegateToken="GetDelegateToken",b.ClientGetLayout="ClientGetLayout",b.FetchLayout="LayoutManagerGetLayout",b.GetServerInfo="GetServerInfo",b.GetSpecificServerInfo="GetSpecificServerInfo",b.ClientGetAppMetadata="ClientGetAppMetadata",b.ClientGetAppsList="ClientGetAppsList",b.FetchAppsList="LayoutManagerGetAppsList",b.FetchAppMetadata="LayoutManagerGetAppMetadata",b.FetchSubscriptions="FetchSubscriptions",b.GetEntitlementStatus="GetEntitlementStatus",b.GameLaunch="GameLaunch",b.ClientGetSubscriptions="ClientGetSubscriptions",b.GetActiveSessions="GetActiveSessions",b.GetSessionInfo="GetSessionInfo",b.StartStreaming="StartStreaming",b.GetUserEntitlements="GetUserEntitlements",b.UpdateCheck="UpdateCheck",b.PreStreaming="PreStreaming",b.StreamerAuthentication="StreamerAuthentication",b.StreamerAuthorization="StreamerAuthorization",b.StreamerNetworktest="StreamerNetworkTest",b.SessionLoading="SessionLoading",b.GetRatingsInfo="GetRatingsInfo",b.GxTargetGetFeature="GxTargetGetFeature",b.GetFastestDomain="GetFastestDomain",b.JarvisPing="JarvisPing",b.JarvisOAuth="JarvisOAuth",b.StarfleetOAuth="StarfleetOAuth",b.LcarsFetchQueryData="LcarsFetchQueryData",b.ClientGetSurvey="ClientGetSurvey",b.ClientDismissSurvey="ClientDismissSurvey",b.PlatformSelection="PlatformSelection",b.PlatformSelectionSharedStorageRead="PlatformSelectionSharedStorageRead",b.PlatformSelectionDialogInteraction="PlatformSelectionDialogInteraction",b.OwnershipSync="OwnershipSync",b.OwnershipConnect="OwnershipConnect",b.OwnershipDisconnect="OwnershipDisconnect",b.AlsGetLoginUrl="AlsGetLoginUrl",b.AlsPostLoginUrl="AlsPostLoginUrl",b.AlsPostToken="AlsPostToken",b.AlsSync="AlsSync",b.AlsDisconnect="AlsDisconnect",b.AlsUserLogin="AlsUserLogin",b.AlsTokenExchange="AlsTokenExchange",b.GetAemReleaseHighlights="GetAemReleaseHighlights",b.GetGfwslInformation="GetGfwslInformation",b.StarfleetDeleteClientToken="StarfleetDeleteClientToken",b.StarfleetGetClientToken="StarfleetGetClientToken",b.StarfleetGetAccessToken="StarfleetGetAccessToken",b.StarfleetGetUserInfo="StarfleetGetUserInfo",b.GetRemoteConfig="GetRemoteConfig",b.SendTelemetryEvent="SendTelemetryEvent",b.ClientSettings="ClientSettings",b.ScheduledMaintenance="ScheduledMaintenance",b.ScheduledMaintenanceSessionEndError="ScheduledMaintenanceSessionEndError",b.GetCloudVariableV3="GetCloudVariableV3",b.ClientResolutions="ClientResolutions",b.PushNotificationRegistration="PushNotificationRegistration",b.KVStoreGetClientData="KVStoreGetClientData",b.KVStoreSetClientData="KVStoreSetClientData",b.KVStoreDeleteClientData="KVStoreDeleteClientData",b.KVStoreAppendClientData="KVStoreAppendClientData",b.ClientGetPanel="ClientGetPanel",b.ClientDesktopPaste="ClientDesktopPaste",b.ClientClipboardAvailable="ClientClipboardAvailable",b.BackgroundNetworkTest="BackgroundNetworkTest",b.GetRemoteConfigV2="GetRemoteConfigV2",b.PushMessageReceived="PushMessageReceived",b.PnsRegistration="PnsRegistration",b.PnsUnregister="PnsUnregister",t;var b})(),w=(()=>((w||(w={})).XmlHttpRequest="XMLHttpRequest",w))(),h=(()=>((h||(h={})).Pc_A7="pc-a7",h))(),u=(()=>((u||(u={})).Client="client",u))(),o=(()=>((o||(o={})).VpcId="ERROR_WHILE_GETTING_VPCID",o))();let c=(()=>{class b{constructor(){}createTracer(U){return new s.Tracer(U)}setTracer(U){this.tracer=U}setGlobalTags(U){this.commonTags=U}getFormattedUrlForHttpPopupSpan(U,A){if(A&&this.tracer){const S={};this.injectSpanHttpHeaders(A,S);const Y=new URL(U),se=JSON.stringify((0,r.extend)({},S)),fe=Y.searchParams.toString();U=`${Y.origin}${Y.pathname}?tracer=${(0,p.h$)(se,!0,!0)}`,fe.length&&(U=`${U}&${fe}`)}return U}startSpan(U,A){let S;return this.tracer&&(S=A?this.tracer.startSpan(U,{childOf:A}):this.tracer.startSpan(U)),S}extract(U,A){let S;return this.tracer&&(S=this.tracer.extract(U,A)),S}inject(U,A){const S={};return this.tracer&&this.tracer.inject(A,U,S),S}injectSpanHttpHeaders(U,A){const S=this.inject(a.FORMAT_HTTP_HEADERS,U),Y=Object.keys(S);for(const se of Y)A[se]=S[se]}handleHttpError(U,A){U.setTag(l.Error,!0),U.setTag(l.HttpStatusCode,A&&A.status||0)}handleHttpPopupError(U,A){U.setTag(l.Error,!0),U.setTag(l.HttpStatusCode,A.errorCode),U.setTag(l.HttpErrorText,A.errorText),U.setTag(l.HttpUrl,A.failedUrl)}handleHttpSuccess(U,A){U.setTag(l.Error,!1),A&&U.setTag(l.HttpUrl,A)}handleHttpEndpointSpan(U,A,S,Y){const se=A.headers?A.headers:{},fe=this.startSpan(S,Y);return fe?(fe.addTags(A.params?A.params:{}),this.injectSpanHttpHeaders(fe,se),U.pipe((0,m.b)(()=>this.handleHttpSuccess(fe)),(0,y.K)(ae=>(this.handleHttpError(fe,ae),(0,D._)(ae))),(0,T.x)(()=>this.closeSpan(fe)))):U}closeSpan(U){U&&(U.addTags(this.commonTags),U.finish())}closeHttpPopupSpan(U,A,S){U&&(U.addTags(this.commonTags),A?this.handleHttpPopupError(U,S):this.handleHttpSuccess(U,S.failedUrl),U.finish())}sendOpenTracingSpanTags(U,A,S){const Y=this.startSpan(U,S);null==A||A.forEach((se,fe)=>{Y.setTag(fe,se)}),this.closeSpan(Y)}}return b.\u0275fac=function(U){return new(U||b)},b.\u0275prov=n.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();var g=e(54364),I=e(92941),G=e(81134),x=e(75428),E=e(85816),P=e(79911),v=e(33987),O=e(6484);const C={[XMLHttpRequest.UNSENT]:"unsent",[XMLHttpRequest.OPENED]:"opened",[XMLHttpRequest.HEADERS_RECEIVED]:"headers received",[XMLHttpRequest.LOADING]:"loading",[XMLHttpRequest.DONE]:"done"},_=(b,B)=>{b.addTags({[l.HttpStatusCode]:B,[l.HttpStatusCodeFamily]:B.toString().replace(/[0-9]{2}$/,"XX"),[l.Error]:B<=0||B>=400})};let F=(()=>{class b extends g.JF{constructor(U,A){super(),this.statusCodeZeroAnalyzerFactoryService=U,this.serviceWorkerService=A,this.globalSpanTags={},this.tracer=null,this.whitelist=[],this.whitelistedUrls=new Map,this.pendingNetworkResponseSpanMap=new Map}initialize(){this.serviceWorkerService.networkResponseReceived.subscribe(U=>{this.removeFromSWPendingRequests(U)},I.Z)}addToSWPendingRequests(U,A){this.pendingNetworkResponseSpanMap.set(U,A)}removeFromSWPendingRequests(U){if(this.pendingNetworkResponseSpanMap.has(U.requestId)){const A=this.pendingNetworkResponseSpanMap.get(U.requestId);this.pendingNetworkResponseSpanMap.delete(U.requestId),0===U.responseStatusCode?this.statusCodeZeroAnalyzer.getFailureCode({requestUrl:U.requestUrl,uniqueRequestId:U.requestId,isCancelled:!1}).subscribe(S=>{_(A,S.statusCode),A.finish(U.responseReceivedTimeMs)},I.Z):(_(A,U.responseStatusCode),A.finish(U.responseReceivedTimeMs))}}build(){const U=new XMLHttpRequest;return(0,r.isNil)(this.tracer)||(U.requestHeaders={},U.commonSpanTags=this.globalSpanTags,U.tracer=this.tracer,U.open=this.wrapOpen(U),U.send=this.wrapSend(U),U.setRequestHeader=this.wrapSetRequestHeader(U),U.constructSpanTags=this.getConstructSpanTags(),U.injectCarrierHeaders=this.getInjectCarrierHeaders(),U.getOperationName=this.getOperationName(),U.getParentSpanContext=this.getParentSpanContext(),U.getResponseHeaders=this.getResponseHeaders(),U.analyzeStatusCodeZero=this.analyzeStatusCodeZero(),U.addEventListener("readystatechange",this.getOnReadyStateChangedListener()),U.addEventListener("abort",this.handleAbort())),U}handleAbort(){return function(){this.isRequestAborted=!0}}setGlobalTags(U){this.globalSpanTags=U}setTracer(U){this.tracer=U}setWhitelist(U){this.whitelist=U.map(A=>new RegExp(A,"g"))}setStatusCodeZeroAnalyzerConfig(U){this.statusCodeZeroAnalyzer&&(this.statusCodeZeroAnalyzer=null),this.statusCodeZeroAnalyzer=this.statusCodeZeroAnalyzerFactoryService.createAnalyzer(U)}matchUrlAgainstWhitelist(U){if(!this.whitelistedUrls.has(U)){const A=this.whitelist.findIndex(S=>{const Y=U.match(S);return!(0,r.isNil)(Y)&&1===Y.length});this.whitelistedUrls.set(U,-1!==A)}return this.whitelistedUrls.get(U)}isUrlWhiteListed(U){return!(0,r.isNil)(U)&&this.matchUrlAgainstWhitelist(U.toString())}getResponseHeaders(){return function(){const S=this.getAllResponseHeaders().replace(/\s+$/,"").split(/\n/);for(let Y=0;Y<S.length;Y++)S[Y]=S[Y].replace(/\r/g,"").trim();return S}}getOperationName(){return function(){return this.method+" "+this.urlInfo.hostname+this.urlInfo.pathname}}getParentSpanContext(){return function(){return this.tracer.extract(a.FORMAT_HTTP_HEADERS,this.requestHeaders)}}analyzeStatusCodeZero(){const U=this.statusCodeZeroAnalyzer.getFailureCode;return function(){return U({requestUrl:this.urlInfo.href,isCancelled:this.isRequestAborted,uniqueRequestId:this.uniqueRequestId||""})}}getOnReadyStateChangedListener(){return function(){const A=this.uniqueRequestId&&this.isHandledByServiceWorker?this.serviceWorkerSpan:this.span;(0,r.isNil)(A)||(this.readyState===XMLHttpRequest.UNSENT||this.readyState===XMLHttpRequest.OPENED?A.log({readyState:this.readyState,event:C[this.readyState]}):this.readyState===XMLHttpRequest.HEADERS_RECEIVED?A.log({readyState:this.readyState,event:C[this.readyState],method:this.method,url:this.urlInfo.href,responseHeaders:this.getResponseHeaders()}):this.readyState===XMLHttpRequest.LOADING?A.log({readyState:this.readyState,event:C[this.readyState]}):this.readyState===XMLHttpRequest.DONE?(A.log({readyState:this.readyState,event:C[this.readyState],method:this.method,url:this.urlInfo.href,statusText:this.statusText,responseType:this.responseType,responseHeaders:this.getResponseHeaders()}),0===this.status?(0,G.of)(!0).pipe((0,x.g)(100),(0,E.zg)(S=>this.analyzeStatusCodeZero(this.urlInfo.href))).subscribe(S=>{A.log({status:S.statusCode}),_(A,S.statusCode),A.finish()}):(A.log({status:this.status}),_(A,this.status),A.finish())):A.log({readyState:this.readyState}))}}getConstructSpanTags(){return function(){const A={[l.Component]:w.XmlHttpRequest,[l.HttpMethod]:this.method,[l.Type]:this.urlInfo.protocol.replace(":",""),[l.HttpHostname]:this.urlInfo.hostname,[l.HttpUrl]:this.urlInfo.pathname};return(0,r.extend)(A,this.commonSpanTags),Object.keys(this.requestHeaders).forEach(Y=>{A[l.HttpHeadersPrefix+Y]=this.requestHeaders[Y]}),this.urlInfo.searchParams.forEach((Y,se)=>{A[l.ParamsPrefix+se]=Y}),A}}getInjectCarrierHeaders(){return function(){const A={};this.tracer.inject(this.span.context(),a.FORMAT_HTTP_HEADERS,A),Object.keys(A).forEach(Y=>{Object.getPrototypeOf(this).setRequestHeader.call(this,Y,A[Y]),this.setRequestHeader(Y,A[Y])})}}wrapOpen(U){const A=U.open;return function(Y,se,fe,$,ae){this.method=Y;try{this.urlInfo=new URL(se)}catch(me){this.urlInfo=null}A.apply(this,arguments)}}wrapSend(U){const A=U.send,S=this.isUrlWhiteListed.bind(this),Y=this.serviceWorkerService.willGFNServiceWorkerHandleRequest.bind(this),se=this.addToSWPendingRequests.bind(this),fe=this.omitOpentracingHeaders;return function(ae){(0,r.isNil)(this.urlInfo)||(this.span=this.tracer.startSpan(this.getOperationName(),{childOf:this.getParentSpanContext()}),this.isHandledByServiceWorker=Y(this.urlInfo.href,this.bypassCacheHeaderValue),this.uniqueRequestId&&this.isHandledByServiceWorker&&(this.serviceWorkerSpan=this.tracer.startSpan("SW "+this.getOperationName(),{childOf:this.getParentSpanContext()}),this.serviceWorkerSpan.addTags(this.constructSpanTags()),se(this.uniqueRequestId,this.span)),this.requestHeaders=fe(this.requestHeaders),S(this.urlInfo)&&this.injectCarrierHeaders(),this.span.addTags(this.constructSpanTags()),this.span.log({event:"send"})),A.apply(this,arguments)}}wrapSetRequestHeader(U){const A=U.setRequestHeader;return function(Y,se){"Authorization"===Y||"X_LOCAL_SECURITY_COOKIE"===Y||Y===v.Fk.SwCacheKeyAppendString||(this.requestHeaders[Y]=se,Y===P.n0.xRequestId&&(this.uniqueRequestId=se),Y===v.Fk.SwCacheBypass&&(this.bypassCacheHeaderValue=se)),Y.startsWith("ot-")||A.apply(this,arguments)}}omitOpentracingHeaders(U){return(0,r.omitBy)(U,A=>!A.startsWith("ot-"))}}return b.\u0275fac=function(U){return new(U||b)(n.LFG(O.Ng),n.LFG(v.HR))},b.\u0275prov=n.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const V={provide:g.JF,useExisting:F}},56226:(He,de,e)=>{"use strict";e.d(de,{Dr:()=>h,iX:()=>C,BU:()=>D,r7:()=>u,xv:()=>p});var n=e(53882),i=e(2316);let D=(()=>{class _{}return _.\u0275fac=function(V){return new(V||_)},_.\u0275prov=i.Yz7({token:_,factory:_.\u0275fac}),_})();var m=e(22213),y=e(30582),T=e(70781);let r=(()=>{class _{constructor(V,b){this.dialogRef=V,this.data=b,this.content=b.content}}return _.\u0275fac=function(V){return new(V||_)(i.Y36(m.so),i.Y36(m.WI))},_.\u0275cmp=i.Xpm({type:_,selectors:[["ng-component"]],decls:7,vars:3,consts:[["mat-dialog-title","",1,"font-header4"],["mat-dialog-content",""],[1,"exception-content","font-body2",3,"innerHTML"],["mat-dialog-actions","","fxLayoutAlign","end end","fxLayout","row"],["mat-button","",1,"font-button1",3,"mat-dialog-close"]],template:function(V,b){1&V&&(i.TgZ(0,"h1",0),i._uU(1),i.qZA(),i.TgZ(2,"div",1),i._UZ(3,"div",2),i.qZA(),i.TgZ(4,"div",3),i.TgZ(5,"button",4),i._uU(6," Close "),i.qZA(),i.qZA()),2&V&&(i.xp6(1),i.Oqu(b.data.title),i.xp6(2),i.Q6J("innerHTML",b.content,i.oJD),i.xp6(2),i.Q6J("mat-dialog-close",!0))},directives:[m.uh,m.xY,m.H8,y.Wh,y.xw,T.lW,m.ZT],styles:[".exception-content[_ngcontent-%COMP%]{-webkit-user-select:text;user-select:text;background-color:#212121;padding:10px;overflow-wrap:anywhere}"]}),_})();const a_Sanitize=/(\w+:|[\\/]).*[\\/]/gi,a_Indentation=/ at /g,a_Class=/([^]+)/g;class p{constructor(F,V){this.err=V,this.errorMessage=F,this.metadata={}}get error(){return this.err}toString(){return this.errorMessage+":"+JSON.stringify(this.err)}addMetadata(F,V){this.metadata[F]=V}getMetaData(){return this.metadata}}var l=e(95249),t=e(43124),w=e(6484);const h={exceptionTimeLimiter:6e4,clientName:"unknown",isExceptionEnabled:!0,devMode:!1};let u=(()=>{class _{constructor(V,b,B){this.logger=V,this.injector=b,this.dialog=B}handleError(V){var b,B;let U=!1;this.logger.info("UnHandled Exception was caught",V);const A=this.injector.get(D);if(A&&(this.isEnabled=A.isExceptionEnabled,this.devMode=A.devMode),!this.isEnabled||((null==V?void 0:V.rawResponse)instanceof n.UA?(this.logger.error("There was an HTTP error. Skipping exception event"),U=!0):V instanceof l.W?(this.logger.error("Timeout error occured. Skipping exception event"),U=!0):V instanceof TypeError?this.logger.error("Type error occured. Sending exception telemetry"):V instanceof Error?this.logger.error("Error occured. Sending exception telemetry"):(this.logger.error("Unknown error or cef query failure. Skipping exception event"),U=!0),U&&!this.devMode))return;const S={name:V.name,message:V.message,stackFrame:null,exceptionString:null};V.stack=null===(b=V.stack)||void 0===b?void 0:b.replace(a_Sanitize,""),S.stackFrame=null!==(B=V.stack)&&void 0!==B?B:t.wy.Undefined;const Y=JSON.stringify(S);this.logger.error("Exception stack trace ",Y),this.devMode&&this.dialog.open(r,{autoFocus:!1,disableClose:!0,data:{title:"Unhandled Exception",content:V.stack?this.formatExceptionStack(V.stack):Y}}),U||(S.exceptionString=S.stackFrame,this.handleClientSideException(S,A))}formatExceptionStack(V){return V.replace(a_Indentation,"<br>&nbsp;&nbsp;&nbsp;at ").replace(a_Class,"<span>$1</span>")}}return _.\u0275fac=function(V){return new(V||_)(i.LFG(w.Yd),i.LFG(i.zs3),i.LFG(m.uw))},_.\u0275prov=i.Yz7({token:_,factory:_.\u0275fac}),_})();var o=e(1707),f=e(42118),c=e(52529),g=e(80181),I=e(55519),G=e(28417),x=e(50298);const E=[o.u5,T.ot,f.QW,G.ie,g.Cq,c.Ps,I.c,x.AV];let P=(()=>{class _{}return _.\u0275fac=function(V){return new(V||_)},_.\u0275mod=i.oAB({type:_}),_.\u0275inj=i.cJS({imports:[[o.u5,...E],o.u5,T.ot,f.QW,G.ie,g.Cq,c.Ps,I.c,x.AV]}),_})();var v=e(66660),O=e(58283);let C=(()=>{class _{}return _.\u0275fac=function(V){return new(V||_)},_.\u0275mod=i.oAB({type:_}),_.\u0275inj=i.cJS({providers:[],imports:[[m.Is,v.o9,P,O.aw]]}),_})()},43365:(He,de,e)=>{"use strict";e.d(de,{sY:()=>D,$b:()=>m,Q6:()=>j,Qu:()=>b,Z4:()=>V});var n=e(2316);let i=(()=>{class K{}return K.\u0275fac=function(L){return new(L||K)},K.\u0275prov=n.Yz7({token:K,factory:K.\u0275fac}),K})(),D=(()=>{class K extends i{}return K.\u0275fac=function(){let Z;return function(W){return(Z||(Z=n.n5z(K)))(W||K)}}(),K.\u0275prov=n.Yz7({token:K,factory:K.\u0275fac}),K})(),m=(()=>{class K{}return K.\u0275fac=function(L){return new(L||K)},K.\u0275mod=n.oAB({type:K}),K.\u0275inj=n.cJS({imports:[[]]}),K})();var y=e(80226),T=e(81134),r=e(34361),a=e(45871),s=e(42720),p=e(92941),l=e(90490),t=e(61486),w=e(85816),h=e(18293),u=e(33353),o=e(98636),f=e(33927),c=e(92597),g=e(67202),I=e(53466),G=e(2281),x=e(202),E=e(6484),P=e(56066),v=e(43124),O=e(56226),C=(()=>((C||(C={})).OSName="osName",C))();class _ extends O.xv{constructor(){super("Empty cloud variable",null)}}class F extends O.xv{constructor(){super("Cloud variable could not be retrieved via API call nor cache. Please handle this case and use defaults",null)}}var V=(()=>{return(K=V||(V={})).GxTargetGetFeatureRollout="GetFeatureRollout",K.GxTargetGetCloudVariable="GetCloudVariable",K.GxTargetGetSurveyFeature="GetSurveyFeature",K.Other="Other",V;var K})(),b=(()=>{return(K=b||(b={})).GxTargetGetECommerceFeature="GetECommerceFeature",K.GxTargetGetSurveyFeature="GetSurveyFeature",K.GxTargetGetQueueETAConfig="GetQueueETAConfig",K.GxTargetGetAutohighlightFeature="GetAutohighlightFeature",K.GxTargetGetFreestyleFeature="GetFreestyleFeature",K.GxTargetGetStarfleetPhase1="GetStarfleetPhase1",K.GxTargetGetStarfleetPhase2="GetStarfleetPhase2",K.GxTargetGetKeyboardLayout="GetKeyboardLayout",K.GxTargetGetAnselFeature="GetAnselFeature",K.GxTargetGetGfnBroadcastFeature="GetGfnBroadcastFeature",K.GxTargetGetDeeplinkSupport="GetDeeplinkSupport",K.GxTargetGetLayoutRefreshInterval="GetLayoutRefreshInterval",K.GxTargetGetKBLayoutsConfig="GetKBLayoutsConfig",K.GxTargetGetUpsellMessage="GetUpsellMessage",K.GxTargetGetAllCloudVariables="GetAllCloudVariables",K.GxTargetGetAutoInvokeKbEnabled="GetAutoInvokeKbEnabled",K.GxTargetGetBrowserClientCanary="GetBrowserClientCanary",K.GxTargetGetReservedSKUEnabled="GetReservedSKUEnabled",K.GxTargetGetReservedSKUIBetaFlag="GetReservedSKUIBetaFlag",K.GxTargetGetClipboardPasteConfig="GetClipboardPasteConfig",K.GxTargetGetPathToPurchaseConfig="GetPathToPurchaseConfig",K.GxTargetGetRemoteConfigOnGXTEnabled="GetEnableRemoteConfigOnGXT",K.GxTargetGetPunctualUIConfig="GetPunctualUIConfig",K.Other="Other",b;var K})(),Y=(()=>{return(K=Y||(Y={})).Enable="Enable",K.Disable="Disable",Y;var K})(),fe=(()=>{return(K=fe||(fe={})).StreamingClient="StreamingClient",K.MallClient="MallClient",K.StoreLibrary="StoreLibrary",K.Unknown="Unknown",K.BackgroundAgent="BackgroundAgent",K.NvAppClient="NvAppClient",fe;var K})(),$=(()=>(($||($={})).GxTarget="GxTarget",$))(),ae=(()=>{return(K=ae||(ae={})).UNDEFINED="UNDEFINED",K.TRUE="TRUE",K.FALSE="FALSE",ae;var K})();class me extends v.MW{constructor(Z){super(Z),this.name="HTTPFailure",this.gdprLevel=v.KM.Functional}}var ye=e(89166),ue=e(57390),X=e(3076);let j=(()=>{class K{constructor(L,W,te,ie,Q,k){this.config=L,this.loggingService=W,this.telemetryService=te,this.sharedStorageService=ie,this.systemInfoService=Q,this.eventStreamFactory=k,this.cacheMaxAge=1440,this.isInitialized$=new y.t(1),this.commonClientParams={},this.cachedCloudVariableMap=new Map,this.readFromSharedStorage=oe=>this.sharedStorageService.readBlock(oe).pipe((0,w.zg)(N=>(0,T.of)(N||{}))),this.writeToSharedStorage=(oe,N)=>{const q=N.name;if(this.storageUpdateQueue.unshift(N),this.storageUpdateQueue.length>1)return void this.logger.info("Added experiment to storage update queue",q);const xe=oe;let ct;return this.logger.info("Processing write to shared storage",xe,q),(0,r.D)(this.readFromSharedStorage(xe)).pipe((0,w.zg)(Se=>(ct=Se,this.updateExperimentRefreshDate(N),(Se=this.cleanupStorageBlock(Se))[q]=N,this.sharedStorageService.writeBlock(xe,Se)))).subscribe(Se=>{this.logger.info(`Activity ${q} write status to shared storage: ${Se}`),this.processStorageUpdateQueue()},Se=>{this.logger.error(`Error while writing to shared storage for ${q}`,Se),this.processStorageUpdateQueue()}),null},this.getSharedStorageKey=oe=>{let N=this.clientInfo.userId!==v.wy.Undefined?this.clientInfo.userId:void 0;return oe===v.yz.DEVICE_ID&&(N=void 0),this.logger.info("Got SharedStorageKey: ",this.storageKey+"_"+N),this.storageKey+"_"+N},this.logger=W.getLogger("experienceControl/service"),this.storageKey="experienceControl",this.storageUpdateQueue=[],this.clientInfo={deviceId:"",userId:v.wy.Undefined,idpId:v.wy.Undefined,clientId:this.config.clientId,clientVer:this.config.clientVersion,clientVariant:this.getCommonClientVariant(this.config.clientVariant),deviceOS:"",deviceType:"",deviceMake:"",deviceModel:"",deviceOSVersion:"",clientType:P.CommonClientType.Undefined,browserType:""},this.denyList=this.config.denyListExperiences||[],this.cvList=Object.values(this.config.experiences).filter(oe=>!this.denyList.includes(oe)),this.cacheMaxAge=this.config.cacheMaxAge||this.cacheMaxAge,this.fetchCloudVariableStream=this.eventStreamFactory.createStream(this.fetchCloudVariables.bind(this)),this.telemetryService.setExperienceControlStorageType(this.config.storage)}getCommonClientVariant(L){switch(L){case"ibeta":return P.CommonClientVariant.iBeta;case"release":return P.CommonClientVariant.Release;default:return P.CommonClientVariant.Undefined}}onCloudVariableChange(L){L.forEach((W,te)=>{const ie={name:W.name,result:W.variation,activity:W.activity,metadata:W.metadata,value:W.value};W.state===P.CloudVariableStatus.Created||W.state===P.CloudVariableStatus.Updated?this.telemetryService.setExperienceControlInfo({id:ie.activity.id,cvName:ie.name||"",group:ie.result.name||Y.Disable,name:ie.activity.name,activationType:ie.activity.activationType}):W.state===P.CloudVariableStatus.Deleted&&this.telemetryService.resetExperienceControlInfo(ie.activity.id)})}setUserInfo(L){this.clientInfo.userId=L.userId||v.wy.Undefined,this.clientInfo.idpId=L.idpId||v.wy.Undefined}fetchCloudVariables(){return this.isGxTargetConfiguredCorrectly().pipe((0,w.zg)(([L])=>L?(0,s.D)([this.readFromSharedStorage(this.getSharedStorageKey(v.yz.USER_ID)),this.readFromSharedStorage(this.getSharedStorageKey(v.yz.DEVICE_ID))]):(0,a._)(`client info not available -> clientId, clientVersion, userId, idpId, deviceId, clientVariant, clientType, deviceOS, deviceOSVersion, deviceType, deviceModel, deviceMake:\n                        ${this.clientInfo.clientId}, ${this.clientInfo.clientVer}, ${this.clientInfo.userId},\n                        ${this.clientInfo.idpId}, ${this.clientInfo.deviceId}, ${this.clientInfo.clientVariant},\n                        ${this.clientInfo.clientType}, ${this.clientInfo.deviceOS}, ${this.clientInfo.deviceOSVersion},\n                        ${this.clientInfo.deviceType}, ${this.clientInfo.deviceModel}, ${this.clientInfo.deviceMake}`)),(0,w.zg)(([L,W])=>{const te=this.callGetMultipleCloudVariableApi({variant:this.config.clientVariant}).pipe((0,h.K)(k=>{this.logger.error("Error in batch call",k);const oe=new Map;return(0,T.of)(oe)}));let ie,Q;return(0,x.isEmpty)(L)?te:(this.cvList.forEach(k=>{Q=L[k],Q?(ie={variation:Q.result,value:Q.value,activity:Q.activity,metadata:Q.metadata,isCachedResult:!0},this.cachedCloudVariableMap.set(k,ie)):W&&W[k]&&(Q=W[k],Q&&(ie={variation:Q.result,value:Q.value,activity:Q.activity,metadata:Q.metadata,isCachedResult:!0},this.cachedCloudVariableMap.set(k,ie)))}),te.subscribe(p.Z),te.pipe((0,u.L)(this.config.allCvNetworkTimeoutForCacheFallback,(0,T.of)(this.cachedCloudVariableMap))))}))}callGetMultipleCloudVariableApi(L={}){const W=new Map,te=[],ie=this.cloudVariableSdk.startSpan(ye.j1.GetCloudVariableV3);return"undefined"===this.clientInfo.userId&&(this.cvList=this.cvList.filter(Q=>this.config.deviceIdActivatedExperiences.includes(Q))),(0,r.D)(this.cloudVariableSdk.getCloudVariables(this.cvList,!1,Object.assign(Object.assign({},this.commonClientParams),L),ie).catch(Q=>(this.logger.error("Error in getCloudVariables from cloudVariableSdk",Q),new Map))).pipe((0,w.zg)(Q=>{if(this.cloudVariableSdk.closeSpan(ie),Q.size>0){const k={name:void 0,variation:void 0,value:void 0,activity:void 0,isCachedResult:!1,state:P.CloudVariableStatus.Unknown};return this.cvList.forEach(oe=>{if(Q.get(oe)){const q=Q.get(oe);q.clientRequestParams={commonClientParams:this.commonClientParams,additionalClientParams:L},te.push(this.processExperience(q,q.name,!0).pipe((0,o.b)(Me=>{W.set(q.name,Me)})))}else W.set(oe,k)}),(0,l.$R)(...te)}{this.logger.error("Batch call returned empty result");const k=new Map;return(0,T.of)(k)}}),(0,f.U)(()=>W),(0,c.d)(1))}refreshCloudVariables(){this.fetchCloudVariableStream.refresh()}processStorageUpdateQueue(){if(this.logger.info("Processing storage update queue"),this.storageUpdateQueue.pop(),this.storageUpdateQueue.length){this.logger.info("Processing next experiment in queue");const L=this.storageUpdateQueue.pop(),W=this.getSharedStorageKey(L.activity.activationType);this.writeToSharedStorage(W,L)}}cleanupStorageBlock(L){const W=new Set(Object.values(this.config.experiences));for(const te in L)W.has(te)||(this.logger.info(`removing deprecated activity: ${te} from storage`),delete L[te]);return L}updateExperimentRefreshDate(L){return L.metadata||(L.metadata={}),L.metadata.refreshDate=new Date,L}initialize(L,W){this.hostClientType=L||fe.Unknown,(0,t.aj)([this.systemInfoService.getSystemInfo(),this.systemInfoService.getOsInformation(),this.systemInfoService.getDeviceOSType(),W]).pipe((0,w.zg)(([te,ie,Q,k])=>{this.systemInfo=te,this.clientInfo.deviceId=te.DeviceId,this.clientInfo.browserType=te.BrowserName,this.updateCommonClientParams(C.OSName,this.getSupportedOSName(ie.OSName)),this.setCommonParams(Q),this.logger.info("Client info at initialize:",this.clientInfo);const oe=this.config,N=E.ng.isBrowserPlatform();return this.cloudVariableSdk=new P.CloudVariableSdkService({url:oe.server,defaultRetries:oe.defaultRetries,defaultTimeout:oe.defaultTimeout,cacheMaxAge:oe.cacheMaxAge,storageConfig:{storageType:P.StorageType.IndexedDB},loggingLevel:P.LoggingLevel.Info,clientInfo:this.clientInfo},this.config.openTracingConfig,N?null:this.readFromSharedStorage,N?null:this.writeToSharedStorage,N?null:this.getSharedStorageKey),this.cloudVariableSdk.subscribeToAllCloudVariables(this.onCloudVariableChange.bind(this)),this.initGlobalTagsForOpenTracing(k,L),this.initializeExperienceContext()})).subscribe(()=>{this.logger.info("Initialized successfully"),this.isInitialized$.next(!0)},te=>{this.logger.error("Error initializing service",te),this.isInitialized$.next(!1)})}initGlobalTagsForOpenTracing(L,W){this.cloudVariableSdk.updateGlobalTags({[ye.NI.ServiceVersion]:this.clientInfo.clientVer,[ye.NI.ServiceType]:ye.sk.Pc_A7,[ye.NI.SpanKind]:ye.$Q.Client,[ye.NI.AppName]:W,[ye.NI.DeviceId]:this.clientInfo.deviceId,[ye.NI.ClientOs]:this.systemInfo.Platform,[ye.NI.ClientOsName]:this.systemInfo.OSName,[ye.NI.ClientOsVersion]:this.systemInfo.OSVersion,[ye.NI.CountryCode]:L})}initializeExperienceContext(){let L=(0,T.of)({});const W=this.readFromSharedStorage(this.getSharedStorageKey(v.yz.DEVICE_ID)),te=this.clientInfo.userId||v.wy.Undefined;return this.config.storage===v.e6.SharedStorage?(te!==v.wy.Undefined&&(L=this.readFromSharedStorage(this.getSharedStorageKey(v.yz.USER_ID))),(0,l.$R)(L,W).pipe((0,o.b)(([ie,Q])=>{if(ie)for(const k of Object.keys(ie))this.updateContextOnInitialize(k,ie);else this.logger.info("No activities found in user storage");if(Q)for(const k of Object.keys(Q))(te===v.wy.Undefined||Q[k].activity.activationType===v.yz.DEVICE_ID)&&this.updateContextOnInitialize(k,Q);else this.logger.info("No activities found in global storage")}),(0,g.h)(!0))):(0,T.of)(!0)}updateContextOnInitialize(L,W){W[L].metadata&&!W[L].metadata.disableContext?((0,x.isNil)(W[L].result.status)||W[L].result.status)&&(Object.values(this.config.experiences).includes(W[L].activity.id)||Object.values(this.config.experiences).includes(W[L].name))?(this.logger.info("Setting activity in db: ",W[L].activity.id),this.telemetryService.setExperienceControlInfo({id:W[L].activity.id,cvName:W[L].name||"",group:W[L].result.name||Y.Disable,name:W[L].activity.name,activationType:W[L].activity.activationType})):this.telemetryService.resetExperienceControlInfo(W[L].activity.id):this.logger.info("context disabled for the experiment, skip setting context on initialize")}getSupportedOSName(L){switch(null==(L=(null==L?void 0:L.toLowerCase().includes("windows"))?"windows":L)?void 0:L.toLowerCase()){case"windows":return"WINDOWS";case"mac":case"macos":return"MACOS";case"linux":return"LINUX";case"chrome os":case"chromeos":return"CHROMEOS";case"ios":return"IOS";case"ipados":return"IPADOS";case"webos":return"WEBOS";case"tizen":return"TIZEN";case"xbox":return"XBOX";default:return this.logger.info("Cannot get supported OS name for OS: ",L),""}}updateCommonClientParams(L,W){L&&W&&(this.commonClientParams[L]=W)}getCloudVariable(L,W={},te,ie,Q,k){return this.config.denyListExperiences.includes(L)?this.fetchSingleCloudVariable(L,W,te,ie,Q,k).pipe((0,o.b)(oe=>this.logger.info("Received requested cloud variable information: ",L,oe))):this.fetchCloudVariableStream.get$().pipe((0,w.zg)(oe=>{const N=oe.get(L);return N?(null==N?void 0:N.value)?(0,T.of)(N):(0,a._)(_):this.fetchSingleCloudVariable(L,W,te,ie,Q,k)}),(0,o.b)(oe=>{this.logger.info("Received requested cloud variable information: ",L,oe)}),(0,h.K)(oe=>(0,a._)(oe)))}fetchSingleCloudVariable(L,W={},te,ie,Q,k){let oe,N;return this.logger.info("fetchSingleCloudVariable called for ",L),this.isGxTargetConfiguredCorrectly(k).pipe((0,w.zg)(([q])=>(this.logger.info("cloud variable requested with params",L,W,Object.assign({},this.clientInfo)),q?this.fetchCachedData(L):(0,a._)(`client info not available -> clientId, clientVersion, userId, idpId, deviceId, clientVariant, clientType, deviceOS, deviceOSVersion, deviceType, deviceModel, deviceMake:\n                        ${this.clientInfo.clientId}, ${this.clientInfo.clientVer}, ${this.clientInfo.userId},\n                        ${this.clientInfo.idpId}, ${this.clientInfo.deviceId}, ${this.clientInfo.clientVariant},\n                        ${this.clientInfo.clientType}, ${this.clientInfo.deviceOS}, ${this.clientInfo.deviceOSVersion},\n                        ${this.clientInfo.deviceType}, ${this.clientInfo.deviceModel}, ${this.clientInfo.deviceMake}`))),(0,w.zg)(q=>{oe=q,N=oe&&oe[L];const Me=this.callGetCloudVariableApi(L,W,N,oe,ie,Q);if(N){const xe={additionalClientParams:W,commonClientParams:this.commonClientParams},ct=this.cacheIsCurrent(N,null==te?void 0:te.cacheLifetimeOverride)&&(0,x.isEqual)(xe,N.clientRequestParams),Se=(0,T.of)({name:N.name,variation:N.result,value:N.value,activity:N.activity,metadata:N.metadata,isCachedResult:!0,state:P.CloudVariableStatus.Unknown});if(null==te?void 0:te.useCache){if(ct)return Se}else if(null==te?void 0:te.useNetworkTimeoutForCacheFallback)return Me.subscribe(p.Z,Ge=>{this.logger.info(`Error while fetching ${L}`,Ge)}),Me.pipe((0,u.L)(this.config.networkTimeoutForCacheFallback,Se))}return Me}))}callGetCloudVariableApi(L,W={},te,ie,Q,k){const oe=this.cloudVariableSdk.startSpan(ye.j1.GetCloudVariableV3);return(0,r.D)(this.cloudVariableSdk.getCloudVariable(L,!1,Object.assign(Object.assign({},this.commonClientParams),W),oe).catch(N=>{this.logger.error("Error in getCloudVariable from cloudVariableSdk",N)})).pipe((0,w.zg)(N=>{if(N){if((0,x.isEmpty)(N))return(0,a._)(new _);this.cloudVariableSdk.closeSpan(oe);const q=N;return q.clientRequestParams={commonClientParams:this.commonClientParams,additionalClientParams:W},this.processExperience(q,L,!0)}return(0,a._)(void 0===N?new F:new _)}),(0,h.K)(N=>(this.cloudVariableSdk.closeSpan(oe),N instanceof _?E.ng.isBrowserPlatform()?(this.logger.info(`Empty experiment list clearing the cache for: ${L}`),this.telemetryService.resetExperienceControlInfo(L),(0,a._)(N)):te?this.cleanupExperienceForCloudVariable(L,ie).pipe((0,w.zg)(()=>(0,a._)(N))):(this.logger.info("Empty cloud variable and no cached response, clear indexed db"),this.telemetryService.resetExperienceControlInfo(L),(0,a._)(N)):te?(this.logger.info(`Applying cached experiment: ${L}`),this.sendCloudVariableFetchFailureTelemetry(N,Q,k),(0,T.of)({name:te.name,variation:te.result,value:te.value,activity:te.activity,metadata:te.metadata,isCachedResult:!0,state:P.CloudVariableStatus.Unknown})):(this.sendCloudVariableFetchFailureTelemetry(N,Q,k),(0,a._)(N)))),(0,c.d)(1))}cleanupExperienceForCloudVariable(L,W){const te=W[L],Q=this.getSharedStorageKey(te.activity.activationType);return this.logger.info(`Empty experiment list clearing the cache for: ${L}`),this.telemetryService.resetExperienceControlInfo(te.activity.id),delete W[L],this.sharedStorageService.writeBlock(Q,W)}fetchCachedData(L){let W=(0,T.of)({});if(this.clientInfo.userId!==v.wy.Undefined){const te=this.getSharedStorageKey(v.yz.USER_ID);W=this.readFromSharedStorage(te)}return(0,s.D)([W,this.readFromSharedStorage(this.getSharedStorageKey(v.yz.DEVICE_ID))]).pipe((0,w.zg)(([te,ie])=>{let Q;return te&&te[L]?(this.logger.info("found activity in user storage",L,te[L]),Q=te):ie&&ie[L]?(this.logger.info("found activity in global storage",L,ie[L]),Q=ie):Q={},(0,T.of)(Q)}))}processExperience(L,W,te){if(this.logger.info(`Processing result for cloud variable: ${W}`,L),L.metadata&&!L.metadata.disableContext&&this.config.storage!==v.e6.AbHub&&this.telemetryService.setExperienceControlInfo({id:L.activity.id,cvName:W,group:L.result.name||Y.Disable,name:L.activity.name,activationType:L.activity.activationType}),te&&(!L.metadata.debugInfo||!L.metadata.debugInfo.keepRefreshDate)){this.logger.info("updating storage for",W);const ie=this.getSharedStorageKey(L.activity.activationType);this.writeToSharedStorage(ie,L)}return(0,T.of)({name:L.name,variation:L.result,value:L.value,activity:L.activity,metadata:L.metadata,isCachedResult:!1,state:P.CloudVariableStatus.Unknown})}cacheIsCurrent(L,W=this.cacheMaxAge){return-1===W?!!L:!!(L&&G(new Date).diff(G(this.getExperimentRefreshDate(L)),"minutes")<=W)}getExperimentRefreshDate(L){return L.metadata&&L.metadata.refreshDate}setCommonParams(L){const W=E.ng.isBrowserPlatform();this.clientInfo.deviceOS=L,this.clientInfo.deviceType=this.systemInfo.DeviceType,this.clientInfo.deviceMake=this.systemInfo.VendorName||v.wy.Undefined,this.clientInfo.deviceModel=this.systemInfo.SystemName||v.wy.Undefined,this.clientInfo.deviceOSVersion=this.systemInfo.OSVersion,this.clientInfo.clientType=W?P.CommonClientType.Browser:P.CommonClientType.Native,this.clientInfo.browserType=this.systemInfo.BrowserName}isGxTargetConfiguredCorrectly(L){let W=this.isInitialized$;return L&&(W=this.isInitialized$.pipe((0,w.zg)(()=>L),(0,w.zg)(te=>(0,x.isEmpty)(te.userId)||this.clientInfo.userId===te.userId?(this.logger.info("User Id has not changed skip updating context"),this.setUserInfo(te),(0,T.of)(te)):(this.logger.info("User Id has changed updating context",te.userId),this.setUserInfo(te),this.initializeExperienceContext().pipe((0,g.h)(te)))))),W.pipe((0,I.q)(1),(0,f.U)(()=>[!!(this.clientInfo.clientId&&this.clientInfo.clientVer&&this.clientInfo.deviceId),this.clientInfo.clientId,this.clientInfo.clientVer,this.clientInfo.deviceId,this.clientInfo.userId,this.clientInfo.idpId,this.clientInfo.browserType,this.clientInfo.clientVariant,this.clientInfo.clientType,this.clientInfo.deviceOS,this.clientInfo.deviceOSVersion,this.clientInfo.deviceType,this.clientInfo.deviceModel,this.clientInfo.deviceMake]))}sendCloudVariableFetchFailureTelemetry(L,W,te){var ie;const Q=new me({sourceComponent:this.hostClientType||fe.Unknown,originalService:$.GxTarget,serviceUseCase:W,serviceSubUseCase:te,url:(null===(ie=null==L?void 0:L.config)||void 0===ie?void 0:ie.url)||"",networkErrorCode:String(L&&L.response?L.response.status:0),destinationIp:"",xRequestId:L&&L.xRequestId?L.xRequestId:"",retryCount:0,wasSWCacheBypassed:ae.UNDEFINED});this.telemetryService.push(Q)}}return K.\u0275fac=function(L){return new(L||K)(n.LFG(D),n.LFG(E.ed),n.LFG(v.y0),n.LFG(ue.OA),n.LFG(E.Ob),n.LFG(X.O_))},K.\u0275prov=n.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})()},68637:(He,de,e)=>{"use strict";e.d(de,{z:()=>f,S:()=>C});var n=e(81134),i=e(89919),D=e(12702),m=e(82516),y=e(41618),T=e(90425),r=e(79902),a=e(67202),s=e(1143),p=e(33927),l=e(83720),t=e(92597),w=e(98636),h=e(9170),u=e(91992),o=e(75428),f=(()=>{return(_=f||(f={}))[_.A=0]="A",_[_.B=1]="B",_[_.X=2]="X",_[_.Y=3]="Y",_[_.LeftBumper=4]="LeftBumper",_[_.RightBumper=5]="RightBumper",_[_.LeftTrigger=6]="LeftTrigger",_[_.RightTrigger=7]="RightTrigger",_[_.Back=8]="Back",_[_.Start=9]="Start",_[_.LeftStick=10]="LeftStick",_[_.RightStick=11]="RightStick",_[_.DpadUp=12]="DpadUp",_[_.DpadDown=13]="DpadDown",_[_.DpadLeft=14]="DpadLeft",_[_.DpadRight=15]="DpadRight",_[_.Center=16]="Center",f;var _})(),c=e(2316),g=e(6484),I=e(98221);const E=.6,P=.05;function O(){return(0,r.w)(_=>_?(0,i.T)((0,n.of)(!0),(0,D.H)(250,250).pipe((0,a.h)(!0))):(0,n.of)(!1))}let C=(()=>{class _{constructor(V,b,B,U){this.ngZone=B,this.browserSupportService=U,this.logger=V.getLogger("GamepadService"),B.runOutsideAngular(()=>{this._isGamepadConnected$=(0,i.T)((0,m.R)(window,"gamepadconnected"),(0,m.R)(window,"gamepaddisconnected")).pipe((0,s.O)(0),(0,p.U)(A=>this.isGamepadConnected),(0,l.x)(),(0,t.d)(1)),this.gamepadsTick$=this._isGamepadConnected$.pipe((0,r.w)(A=>A?(this.logger.info("Start polling gamepad state"),b.leanModeTransitionState.pipe((0,s.O)(10),(0,p.U)(S=>S?33:10),(0,l.x)(),(0,w.b)(S=>{this.logger.info(`Polling gamepad state with period: ${S} ms`)}),(0,r.w)(S=>(0,y.F)(S)))):(this.logger.info("Stop polling gamepad state"),T.C)),(0,p.U)(A=>U.getGamepads().filter(S=>(null==S?void 0:S.connected)&&"standard"===(null==S?void 0:S.mapping))),(0,h.h)(A=>A.length>0),(0,u.B)())})}get isGamepadConnected(){return this.browserSupportService.getGamepads().some(V=>null==V?void 0:V.connected)}get isGamepadConnected$(){return this._isGamepadConnected$}get isAnyGamepadInUse$(){return this.ngZone.runOutsideAngular(()=>this.gamepadsTick$.pipe((0,p.U)(V=>V.some(b=>this.isAnyAxisTriggeredOrButtonPressed(b))),(0,l.x)()))}get leftPressed$(){return this.ngZone.runOutsideAngular(()=>this.gamepadsTick$.pipe((0,p.U)(V=>V.some(b=>this.isAxisTriggeredOrButtonPressed(b,B=>B[0]<-E,f.DpadLeft))),(0,l.x)(),O()))}get rightPressed$(){return this.ngZone.runOutsideAngular(()=>this.gamepadsTick$.pipe((0,p.U)(V=>V.some(b=>this.isAxisTriggeredOrButtonPressed(b,B=>B[0]>E,f.DpadRight))),(0,l.x)(),O()))}get upPressed$(){return this.ngZone.runOutsideAngular(()=>this.gamepadsTick$.pipe((0,p.U)(V=>V.some(b=>this.isAxisTriggeredOrButtonPressed(b,B=>B[1]<-E,f.DpadUp))),(0,l.x)(),O()))}get downPressed$(){return this.ngZone.runOutsideAngular(()=>this.gamepadsTick$.pipe((0,p.U)(V=>V.some(b=>this.isAxisTriggeredOrButtonPressed(b,B=>B[1]>E,f.DpadDown))),(0,l.x)(),O()))}get rightStickMoved$(){return this.ngZone.runOutsideAngular(()=>this.gamepadsTick$.pipe((0,p.U)(V=>V.some(b=>this.isAxisTriggeredOrButtonPressed(b,B=>B[2]>P||B[3]<-P,f.RightStick))),(0,l.x)()))}onButtonPressed$(V,b){return this.ngZone.runOutsideAngular(()=>this.getButtonPressed$(this.gamepadsTick$,V,b))}onButtonLongPressed$(V){return this.ngZone.runOutsideAngular(()=>this.getButtonPressed$(this.gamepadsTick$,V).pipe((0,r.w)(b=>b?(0,n.of)(!0).pipe((0,o.g)(800)):T.C)))}onButtonComboPressed$(V){return this.ngZone.runOutsideAngular(()=>this.getButtonComboPressed$(this.gamepadsTick$,V))}getButtonComboPressed$(V,b){return V.pipe((0,p.U)(B=>B.some(U=>b.every(A=>this.isButtonPressed(U,A)))),(0,l.x)())}getButtonPressed$(V,b,B){const U=!!(null==B?void 0:B.repeat),A=V.pipe((0,p.U)(S=>S.some(Y=>this.isButtonPressed(Y,b,null==B?void 0:B.customButtonIndex))),(0,l.x)());return U?A.pipe(O()):A}isButtonPressed(V,b,B){return V.buttons[null!=B?B:b].pressed}isAxisTriggeredOrButtonPressed(V,b,B){return b(V.axes)||this.isButtonPressed(V,B)}isAnyAxisTriggeredOrButtonPressed(V){return V.buttons.some(U=>U.pressed)||V.axes.some(U=>U>P||U<-P)}}return _.\u0275fac=function(V){return new(V||_)(c.LFG(g.ed),c.LFG(g.rn),c.LFG(c.R0b),c.LFG(I.OA))},_.\u0275prov=c.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},2335:(He,de,e)=>{"use strict";e.d(de,{a7:()=>y,H0:()=>o,sd:()=>c,sy:()=>t,kQ:()=>f});var n=e(81134),i=e(85816),D=e(44747),m=e(202);const y={server:"https://telemetry.gfe.nvidia.com",version:"v1.0",schemaVersion:"",defaultRetries:2,defaultTimeBetweenRetries:1e3,defaultTimeout:3e4,msBetweenChunkCreation:3e5,maxBufferSizeInBytes:25600,chunksQueueSize:20,chunkResendRetryLimit:2,clientId:""};var p=(()=>{return(g=p||(p={})).GfcHeadRequest="FeedbackHead",g.GfcAttachmentRequest="FeedbackAttachment",p;var g})(),l=e(2316);let t=(()=>{class g{}return g.\u0275fac=function(G){return new(G||g)},g.\u0275prov=l.Yz7({token:g,factory:g.\u0275fac}),g})();var w=e(79911);const u="gfc/v4.0/attachment";let o=(()=>{class g{constructor(G,x){this.serverConfig=G,this.endpointFactory=x,this.latestOffset=0,this.commonFeedbackEventData={},this.previousChunkDataSize=0,this.cryptoLib=D.fs.crypto,this.prepareCommonFeedbackData(G),this.feedbackEndpointUrl=this.prepareFeedbackEndpoint(),this.feedbackAttachmentEndpointUrl=this.prepareFeedbackAttachmentEndpoint()}generateUrl(G){return this.serverConfig.server+"/"+G}computeSHA256Checksum(G){let x="";if(!(0,m.isEmpty)(G)){const E=new this.cryptoLib.MessageDigest({alg:"sha256",prov:"cryptojs"});E.updateString(G),x=E.digest()}return x}getDataSize(G){return(0,m.isEmpty)(G)?0:new Blob([G]).size}prepareFeedbackEndpoint(){return this.feedbackEndpointUrl=this.endpointFactory.createEndpoint({headers:{"Content-Type":"application/json"},config:{timeout:this.serverConfig.defaultTimeout,timeBetweenRetries:this.serverConfig.defaultTimeBetweenRetries,maxRetries:this.serverConfig.defaultRetries},reportRequestData:{originalService:"Gfc",serviceUseCase:p.GfcHeadRequest,reportSuccessTelemetry:"false"}}),this.feedbackEndpointUrl}prepareFeedbackAttachmentEndpoint(){return this.feedbackAttachmentEndpointUrl=this.endpointFactory.createEndpoint({config:{timeout:this.serverConfig.defaultTimeout,timeBetweenRetries:this.serverConfig.defaultTimeBetweenRetries,maxRetries:this.serverConfig.defaultRetries},reportRequestData:{originalService:"Gfc",serviceUseCase:p.GfcAttachmentRequest,reportSuccessTelemetry:"false"}}),this.feedbackAttachmentEndpointUrl}prepareCommonFeedbackData(G){this.commonFeedbackEventData=(0,m.extend)(this.commonFeedbackEventData,{clientId:G.clientId,feedbackProtocol:"4.3",feedbackSchemaVer:G.schemaVersion,feedbackSysVer:G.version})}buildGFCMultipartData(G,x,E,P,v=0,O=!1){const C=new FormData;return C.append("data2",new Blob([G])),C.append("feedbackId",x),C.append("size",E.toString()),C.append("checksum",this.computeSHA256Checksum(G)),P&&C.append("parameters",JSON.stringify(P.parameters)),C.append("offset",v.toString()),O&&C.append("eob","true"),C}updatePreviousChunkSizeAndBuildMultipartData(G,x,E=!1){return this.previousChunkDataSize=this.getDataSize(G),this.buildGFCMultipartData(G,this.xFeedbackId,this.previousChunkDataSize,x,this.latestOffset,E)}sendFeedbackHeadRequest(G){return G=(0,m.merge)(G,this.commonFeedbackEventData),this.feedbackEndpointUrl.makeRequestEx("POST",this.generateUrl("gfc/v4.0/head"),{body:G,headers:{"Content-Type":"application/json"},withCredentials:!0})}sendFeedbackEvent(G){return this.latestOffset=0,this.xFeedbackId=G.feedbackId,this.sendFeedbackHeadRequest(G)}sendFeedbackChunkEvent(G,x,E=!1,P){if(E){if(null==P?void 0:P.isBrowserClosing)return this.sendLastFeedbackChunkEvent(G,x),(0,n.of)({});{P.prevChunkInProgress&&this.updateOffsetOnSuccessfulAttachmentRequest();const v=this.updatePreviousChunkSizeAndBuildMultipartData(G,x,!0);return this.latestOffset=0,this.sendFeedbackAttachmentReq(v)}}{const v=this.updatePreviousChunkSizeAndBuildMultipartData(G,x);return this.sendFeedbackAttachmentReq(v)}}sendFeedbackAttachmentReq(G){return this.feedbackAttachmentEndpointUrl.makeRequestEx("POST",this.generateUrl(u),{body:G,withCredentials:!0})}sendLastFeedbackChunkEvent(G,x){const E=this.updatePreviousChunkSizeAndBuildMultipartData(G,x,!0);navigator.sendBeacon(this.generateUrl(u),E),this.latestOffset=0}updateOffsetOnSuccessfulAttachmentRequest(G){this.latestOffset=G||Number(this.latestOffset)+Number(this.previousChunkDataSize)}sendFeedbackBasedOnTechConsent(G,x,E){return G.sentTs=(new Date).toISOString(),this.sendFeedbackHeadRequest(G).pipe((0,i.zg)(()=>{if(x){const P=this.buildGFCMultipartData(E,G.feedbackId,this.getDataSize(E),void 0,0,!0);return this.sendFeedbackAttachmentReq(P)}return(0,n.of)(!0)}))}}return g.\u0275fac=function(G){return new(G||g)(l.LFG(t),l.LFG(w.V9))},g.\u0275prov=l.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const f="undefined";let c=(()=>{class g{static forRoot(G){return{ngModule:g,providers:[{provide:t,useValue:G||y}]}}}return g.\u0275fac=function(G){return new(G||g)},g.\u0275mod=l.oAB({type:g}),g.\u0275inj=l.cJS({imports:[[]]}),g})()},11889:(He,de,e)=>{"use strict";e.d(de,{G:()=>se});var n=e(80226),i=e(81134),D=e(61486),m=e(92597),y=e(53466),T=e(85816),r=e(79902),a=e(33927),s=e(18293),p=e(2984),l=e(43365),t=e(6484);const w="desktop",h="browser",f="selectOtherLayout";var c=(()=>{return(fe=c||(c={})).WindowsOS="Windows",fe.BrowserChromeOS="ChromeOS",fe.BrowserMacOS="macOS",fe.NativeMacOS="Mac",fe.XboxOS="Xbox",c;var fe})(),g=(()=>{return(fe=g||(g={})).Default="default",fe.Mac="mac",g;var fe})();const I={WindowsOS:g.Default,BrowserChromeOS:g.Default,BrowserMacOS:g.Mac,NativeMacOS:g.Mac,XboxOS:g.Default},G={[w+c.WindowsOS]:"en-US",[w+c.NativeMacOS]:"m-us",[h+c.WindowsOS]:"en-US",[h+c.BrowserMacOS]:"m-us",[h+c.BrowserChromeOS]:"en-US",[h+c.XboxOS]:"en-US"},x=[`${w}${c.WindowsOS}`,`${w}${c.NativeMacOS}`,`${h}${c.WindowsOS}`,`${h}${c.BrowserMacOS}`,`${h}${c.BrowserChromeOS}`,`${h}${c.XboxOS}`],E={albanian:{default_keyCode:"sq-AL"},armenianPhonetic:{default_keyCode:"hy-AM"},assameseInscript:{default_keyCode:"as-IN"},azerbaijaniCyrillic:{default_keyCode:"az-Cyrl-AZ"},azerbaijaniLatin:{default_keyCode:"az-Latn-AZ"},banglaIndia:{default_keyCode:"bn-IN"},bashkir:{default_keyCode:"ba-RU"},belarusian:{default_keyCode:"be-BY"},belgianPeriod:{default_keyCode:"nl-BE"},belgianFrench:{default_keyCode:"fr-BE"},bosnianCyrillic:{default_keyCode:"bs-Cyrl-BA"},bulgarian:{default_keyCode:"bg-BG"},canadianEnglish:{default_keyCode:"en-CA"},canadianFrench:{default_keyCode:"fr-CA"},cherokeeNation:{default_keyCode:"chr-Cher-US"},chineseSimplified:{default_keyCode:"zh-CN"},chineseSimplifiedSingapore:{default_keyCode:"zh-SG"},chineseTraditional:{default_keyCode:"zh-TW"},chineseTraditionalHongKongSAR:{default_keyCode:"zh-HK"},chineseTraditionalMacaoSAR:{default_keyCode:"zh-MO"},croatian:{default_keyCode:"hr-HR",mac_keyCode:"m-hr"},czech:{default_keyCode:"cs-CZ",mac_keyCode:"m-cs"},danish:{default_keyCode:"da-DK",mac_keyCode:"m-da"},divehiPhonetic:{default_keyCode:"dv-MV"},dutch:{default_keyCode:"nl-NL",mac_keyCode:"m-nl-NL"},dzongkha:{default_keyCode:"dz-BT"},englishIndia:{default_keyCode:"en-IN"},englishUK:{default_keyCode:"en-GB",mac_keyCode:"m-brit"},englishUS:{default_keyCode:"en-US",mac_keyCode:"m-us"},estonian:{default_keyCode:"et-EE",mac_keyCode:"m-et"},faeroese:{default_keyCode:"fo-FO"},finnish:{default_keyCode:"fi-FI",mac_keyCode:"m-fi"},french:{default_keyCode:"fr-FR",mac_keyCode:"m-fr"},georgianQWERTY:{default_keyCode:"ka-GE"},german:{default_keyCode:"de-DE",mac_keyCode:"m-de"},greek:{default_keyCode:"el-GR",mac_keyCode:"m-el"},greenlandic:{default_keyCode:"kl-GL"},guarani:{default_keyCode:"gn-PY"},gujarati:{default_keyCode:"gu-IN"},hausa:{default_keyCode:"ha-Latn-NG"},hebrew:{default_keyCode:"he-IL"},hindiTraditional:{default_keyCode:"hi-IN"},hungarian:{default_keyCode:"hu-HU",mac_keyCode:"m-hu"},icelandic:{default_keyCode:"is-IS",mac_keyCode:"m-is"},igbo:{default_keyCode:"ig-NG"},inuktitutLatin:{default_keyCode:"iu-Latn-CA"},inuktitutNaqittaut:{default_keyCode:"iu-Cans-CA"},irish:{default_keyCode:"en-IE",mac_keyCode:"m-en-ie"},italian:{default_keyCode:"it-IT"},japanese106:{default_keyCode:"ja-106",mac_keyCode:"m-ja-106"},kannada:{default_keyCode:"kn-IN"},kazakh:{default_keyCode:"kk-KZ"},khmer:{default_keyCode:"km-KH"},korean:{default_keyCode:"ko-KR"},kyrgyzCyrillic:{default_keyCode:"ky-KG"},lao:{default_keyCode:"lo-LA"},latvianStandard:{default_keyCode:"lv-LV"},lithuanian:{default_keyCode:"lt-LT"},luxembourgish:{default_keyCode:"lb-LU"},macedonianStandard:{default_keyCode:"mk-MK"},malayalam:{default_keyCode:"ml-IN"},marathi:{default_keyCode:"mr-IN"},mongolianCyrillic:{default_keyCode:"mn-MN"},mongolianMongolianScriptStandard:{default_keyCode:"mn-Mong-CN"},nepali:{default_keyCode:"ne-NP"},norwegian:{default_keyCode:"nb-NO",mac_keyCode:"m-no"},norwegianSami:{default_keyCode:"se-NO"},odia:{default_keyCode:"or-IN"},pashtoAfghanistan:{default_keyCode:"ps-AF"},persian:{default_keyCode:"fa-IR"},polish:{default_keyCode:"pl-PL"},portuguese:{default_keyCode:"pt-PT",mac_keyCode:"m-pt"},portugueseBrazilianABNT:{default_keyCode:"pt-BR"},punjabiGurumukhi:{default_keyCode:"pa-IN"},russian:{default_keyCode:"ru-RU",mac_keyCode:"m-ru"},sakha:{default_keyCode:"sah-RU"},serbianCyrillic:{default_keyCode:"sr-Cyrl-CS"},serbianLatin:{default_keyCode:"sr-Latn-CS",mac_keyCode:"sr-Latn"},sesothoSaLeboa:{default_keyCode:"nso-ZA"},setswana:{default_keyCode:"tn-ZA"},sinhala:{default_keyCode:"si-LK"},slovak:{default_keyCode:"sk-SK",mac_keyCode:"m-sk"},slovenian:{default_keyCode:"sl-SI",mac_keyCode:"m-sl"},sorbianStandard:{default_keyCode:"hsb-DE"},spanish:{default_keyCode:"es-ES_tradnl",mac_keyCode:"m-es"},spanishLatinAmerican:{default_keyCode:"es-MX"},swedish:{default_keyCode:"sv-SE",mac_keyCode:"m-sv"},swedishSami:{default_keyCode:"se-SE"},swissFrench:{default_keyCode:"fr-CH",mac_keyCode:"m-ch-fr"},swissGerman:{default_keyCode:"de-CH",mac_keyCode:"m-ch-de"},syriac:{default_keyCode:"syr-SY"},tajik:{default_keyCode:"tg-Cyrl-TJ"},tamazightCentral:{default_keyCode:"tzm-Latn-DZ"},tamil:{default_keyCode:"ta-IN"},tatar:{default_keyCode:"tt-RU"},telugu:{default_keyCode:"te-IN"},thaiKedmanee:{default_keyCode:"th-TH"},tibetanPRCStandard:{default_keyCode:"bo-CN"},turkishQ:{default_keyCode:"tr-TR"},turkmen:{default_keyCode:"tk-TM"},urdu:{default_keyCode:"ur-PK"},uyghur:{default_keyCode:"ug-CN"},uzbekCyrillic:{default_keyCode:"uz-Cyrl-UZ"},vietnamese:{default_keyCode:"vi-VN"},wolof:{default_keyCode:"wo-SN"},yoruba:{default_keyCode:"yo-NG"},australian:{mac_keyCode:"m-AU"},austrian:{mac_keyCode:"m-AT"},belgian:{mac_keyCode:"m-nl-be"},brazilian:{mac_keyCode:"m-pt-br"},canadian:{mac_keyCode:"m-en-ca"},canadianCSA:{mac_keyCode:"m-ca-csa"},croatianPC:{default_keyCode:"hr-BA"},dvorak:{mac_keyCode:"m-dv"},englishABC:{mac_keyCode:"m-en-abc"},englishABCAZERTY:{mac_keyCode:"m-fr-abc"},englishUSInternationalPC:{mac_keyCode:"m-us-int"},faroese:{mac_keyCode:"m-fo"},frenchNumerical:{mac_keyCode:"m-fr-num"},frenchPC:{mac_keyCode:"m-fr-pc"},hawaiian:{default_keyCode:"haw-US"},italianPro:{mac_keyCode:"m-it-pro"},latvian:{mac_keyCode:"m-lv"},maltese:{default_keyCode:"mt-MT"},maori:{default_keyCode:"mi-NZ"},polishPro:{mac_keyCode:"m-pl-pro"},romanian:{mac_keyCode:"m-ro"},romanianStandard:{default_keyCode:"ro-RO"},serbian:{default_keyCode:"sr-Cyrl"},spanishISO:{mac_keyCode:"m-es-ISO"},swedishPro:{mac_keyCode:"m-sv-pro"},turkishQWERTY:{mac_keyCode:"m-tr-qty"},ukrainian:{mac_keyCode:"m-uk"},ukrainianPC:{default_keyCode:"uk-UA"},welsh:{default_keyCode:"cy-GB"},arabic101:{default_keyCode:"ar-SA"},japanese102:{default_keyCode:"ja-JP"},arabic:{mac_keyCode:"m-ar"},russianPC:{mac_keyCode:"m-ru-win"},russianPhonetic:{mac_keyCode:"m-ru-ph"}},P_windowsList=["albanian","arabic101","armenianPhonetic","assameseInscript","azerbaijaniCyrillic","azerbaijaniLatin","banglaIndia","bashkir","belarusian","belgianPeriod","belgianFrench","bosnianCyrillic","bulgarian","canadianEnglish","canadianFrench","cherokeeNation","chineseSimplified","chineseSimplifiedSingapore","chineseTraditional","chineseTraditionalHongKongSAR","chineseTraditionalMacaoSAR","croatian","czech","danish","divehiPhonetic","dutch","dzongkha","englishIndia","englishUK","welsh","englishUS","estonian","faeroese","finnish","french","georgianQWERTY","german","greek","greenlandic","guarani","gujarati","hausa","hebrew","hindiTraditional","hungarian","icelandic","igbo","inuktitutLatin","inuktitutNaqittaut","irish","italian","japanese106","japanese102","kannada","kazakh","khmer","korean","kyrgyzCyrillic","lao","latvianStandard","lithuanian","luxembourgish","macedonianStandard","malayalam","maltese","maori","marathi","mongolianCyrillic","mongolianMongolianScriptStandard","nepali","norwegian","norwegianSami","odia","pashtoAfghanistan","persian","polish","portuguese","portugueseBrazilianABNT","punjabiGurumukhi","romanianStandard","russian","sakha","serbianCyrillic","serbianLatin","sesothoSaLeboa","setswana","sinhala","slovak","slovenian","sorbianStandard","spanish","spanishLatinAmerican","swedish","swedishSami","swissFrench","swissGerman","syriac","tajik","tamazightCentral","tamil","tatar","telugu","thaiKedmanee","tibetanPRCStandard","turkishQ","turkmen","ukrainianPC","urdu","uyghur","uzbekCyrillic","vietnamese","wolof","yoruba"],P_macList=["arabic","australian","austrian","belgian","brazilian","bulgarian","belarusian","canadian","canadianCSA","chineseSimplified","chineseTraditional","croatian","croatianPC","czech","danish","dutch","dvorak","englishABC","englishABCAZERTY","englishUK","englishUS","englishUSInternationalPC","estonian","faroese","finnish","french","frenchNumerical","frenchPC","georgianQWERTY","german","greek","hawaiian","hebrew","hungarian","icelandic","irish","italian","italianPro","korean","latvian","lithuanian","macedonianStandard","maltese","maori","norwegian","polish","polishPro","portuguese","romanian","romanianStandard","russian","russianPC","russianPhonetic","serbian","serbianLatin","slovak","slovenian","spanish","spanishISO","swedish","swedishPro","swissFrench","swissGerman","turkishQWERTY","ukrainian","ukrainianPC","vietnamese","welsh","japanese106","japanese102"],P_browserWindowsList=["englishUS","spanishLatinAmerican","turkishQ","spanish","portugueseBrazilianABNT","french","englishUK","polish","german","hungarian","italian","romanianStandard","portuguese","czech","canadianEnglish","swedish","englishIndia","bulgarian","hebrew","croatian","dutch","slovak","serbianLatin","russian","chineseSimplified","japanese106","korean","chineseTraditional","japanese102"],P_browserMacList=["englishUS","englishABC","englishUK","spanishISO","canadian","german","french","italianPro","polishPro","frenchNumerical","englishUSInternationalPC","dutch","swedishPro","chineseSimplified","danish","hungarian","canadianCSA","finnish","russian","japanese106","korean","chineseTraditional"],P_browserXboxList=["englishUS","spanishLatinAmerican","turkishQ","russian","spanish","portugueseBrazilianABNT","french","englishUK","polish","german","hungarian","italian","romanianStandard","portuguese","czech","canadianEnglish","swedish","englishIndia","serbianLatin","hebrew","dutch"],v_browserWindowsList=["ru-RU"],v_browserMacList=["m-ru"];var O=(()=>{return(fe=O||(O={})).Functional="functional",fe.Technical="technical",fe.Behavioral="behavioral",O;var fe})();const _={OverrideKeyboardLayout:{name:"OverrideKeyboardLayout",gdprLevel:O.Functional}};class F extends class{constructor($){this.parameters=$,this.ts=(new Date).toISOString()}}{constructor($){super($),this.name=_.OverrideKeyboardLayout.name,this.gdprLevel=_.OverrideKeyboardLayout.gdprLevel}}var V=e(2316),b=e(12556),B=e(57390),U=e(58283),A=e(43124),S=p.Yk.Share.Shareserver.HotkeyEnum;const Y="keyboardLayout";let se=(()=>{class fe{constructor(ae,me,ye,ue,X,j,K,Z,L,W){this.idmService=ae,this.loggingService=me,this.systemInfoService=ye,this.bridgeService=ue,this.sharedStorage=X,this.translateService=j,this.localeService=K,this.experienceControl=Z,this.telemetryService=L,this.hotKeyHelper=W,this.isPlatformBrowser=t.ng.isBrowserPlatform(),this.keyboardLayoutChange=new n.t(1),this.placeholder=new n.t(1),this.logger=me.getLogger("KeyboardLayoutService"),this.logger.info("Initializing KeyboardLayoutService"),this.kbLayoutConfiguration$=this.fetchKBConfig().pipe((0,m.d)(1)),this.registerKBLayoutChange(),this.getKeyboardLayoutsList().subscribe(te=>{this.isPlatformBrowser?this.setDefaultLayoutAndPlaceholder():this.sendKeyboardLayoutTelemetry()},te=>{this.logger.info("Error getting the list of keyboard layouts : ",te)}),this.readCachedKeyboardLayout()}sendKeyboardLayoutTelemetry(){this.readCachedKeyboardLayout().pipe((0,y.q)(1),(0,T.zg)(ae=>{var me;const ye=new F({previousKeyboardLayout:"",overrideKeyboardLayout:null!==(me=null==ae?void 0:ae.code)&&void 0!==me?me:"",defaultKeyboardLayout:""});return t.ng.isBrowserPlatform()?(ye.parameters.defaultKeyboardLayout=this.getDefaultKBLayoutCode(),(0,i.of)(ye)):this.detectKeyboardLayout().pipe((0,y.q)(1),(0,T.zg)(ue=>(ye.parameters.defaultKeyboardLayout=ue,(0,i.of)(ye))))})).subscribe(ae=>{this.logger.info("Sending defaultKeyboardLayout telemetry through OverrideKeyboardLayout event",ae),this.telemetryService.push(ae)})}setDefaultLayoutAndPlaceholder(){this.idmService.accountStatusChanged.pipe((0,r.w)(ae=>this.queryGxTargetForDefaultKBLayout())).subscribe(ae=>{this.handleDefaultKeyboardLayout(ae),this.sendKeyboardLayoutTelemetry(),this.placeholder.next(this.getBrowserPlaceholder())})}fetchKBConfig(){return this.queryGxTargetForOtherKBLayout()}get onKBLayoutChange$(){return this.keyboardLayoutChange.asObservable()}kbLayoutChanged(ae){this.keyboardLayoutChange.next(ae)}queryGxTargetForOtherKBLayout(){return this.experienceControl.getCloudVariable("showOtherKBLayout",{},{useCache:!1},l.Z4.GxTargetGetCloudVariable,l.Qu.GxTargetGetKBLayoutsConfig).pipe((0,a.U)(ae=>ae.value.showOtherInDropdown),(0,s.K)(ae=>(this.logger.error("Failed to resolve gx-target cloud variable:",ae),(0,i.of)(!1))))}queryGxTargetForDefaultKBLayout(){return this.experienceControl.getCloudVariable("defaultKeyboardLayout",{userDefaultUILanguage:this.localeService.getShortLocale()},{useCache:!1},l.Z4.GxTargetGetCloudVariable,l.Qu.GxTargetGetKBLayoutsConfig).pipe((0,a.U)(ae=>ae.value),(0,s.K)(ae=>(this.logger.error("Failed to resolve gx-target cloud variable:",ae),(0,i.of)(!1))))}get fetchClientIMEHotkeys(){return this.bridgeService.executeCommand(p.Gh.Share.Shareserver.GetHotkeyShortcut,{hotkey:S.NativeKeyboardInputDialog}).pipe((0,a.U)(ae=>ae.keys),(0,a.U)(ae=>this.hotKeyHelper.shortcutToString(ae)))}get isOtherDefaultLayout(){return this._isOtherDefaultLayout}initializeKeyboardLayoutsListFromJson(ae,me,ye){const ue=[];for(const K of ae){const Z=E[K];ue.push({name:this.translateService.instant("common.keyboardLayout.layouts."+K),code:Z[`${ye}_keyCode`]||Z[`${g.Default}_keyCode`]})}const X=this.localeService.getShortLocale();this.logger.info("Getting the language from locale for sorting purposes : ",X);const j=new Intl.Collator(X,{numeric:!0,sensitivity:"base"});return ue.sort(function(K,Z){return j.compare(K.name,Z.name)}),me&&ue.unshift({name:this.translateService.instant("settings.keyboardLayout.other"),code:this.getDefaultKBLayoutCodeForOther(),params:{isOtherLayout:!0,showOnTop:!0}}),ue}getKeyboardLayoutsList(){if(this.keyboardLayoutsList$)return this.keyboardLayoutsList$.asObservable();const ae=new n.t(1);return this.logger.info("Fetching the list of Keyboard Layouts to be displayed"),this.keyboardLayoutsList$=ae,(0,D.aj)([this.systemInfoService.getOsInformation(),this.localeService.localeChanged,this.kbLayoutConfiguration$]).pipe((0,y.q)(1)).subscribe(([me,ye,ue])=>{var X;this.logger.info("Getting the OS info using System info Service :",me);let K,j=[];this.platform=me.Platform;const Z=null===(X=this.platform)||void 0===X?void 0:X.toUpperCase();this.isPlatformBrowser?Z===c.WindowsOS.toUpperCase()||Z===c.BrowserChromeOS.toUpperCase()?(j=P_browserWindowsList,K=I.BrowserChromeOS):Z===c.BrowserMacOS.toUpperCase()?(j=P_browserMacList,K=I.BrowserMacOS):Z===c.XboxOS.toUpperCase()&&(j=P_browserXboxList,K=I.XboxOS):Z===c.WindowsOS.toUpperCase()?(j=P_windowsList,K=I.WindowsOS):Z===c.NativeMacOS.toUpperCase()&&(j=P_macList,K=I.NativeMacOS),j.length>0?(this.defaultKBLayoutCodeForOther=G[this.getPlatformOS()],this.translatedKBLayoutList=this.initializeKeyboardLayoutsListFromJson(j,ue,K),ae.next(this.translatedKBLayoutList),ae.complete()):(this.logger.info(`Keyboard Layout feature is not supported on ${Z}, disabling it`),ae.complete(),this.keyboardLayoutsList$=null)},me=>{ae.error(me),this.keyboardLayoutsList$=null}),ae.asObservable()}getPlatformOS(){return`${this.isPlatformBrowser?h:w}${this.platform}`}handleDefaultKeyboardLayout(ae){const me=this.getPlatformOS(),ye=ae||G;this.logger.info("Default keyboard layout for the user :",ye);const ue=ye[me];ue&&ue!==f?this.defaultKBLayoutCode=ue:(this._isOtherDefaultLayout=ue===f,this.defaultKBLayoutCode=this.defaultKBLayoutCodeForOther),this.setDefaultKBLayout(this.translatedKBLayoutList,this.defaultKBLayoutCodeForOther)}detectKeyboardLayout(){return this.bridgeService.executeCommand(p.Gh.Gfn.Streaming.GetKeyboardLayout)}onKBLayoutChange(){return this.bridgeService.executeCommand(p.Gh.Gfn.Streaming.OnKBLayoutChange)}isNonEnglishKeyboardLayout(ae,me){let ye=[];return!(!this.isPlatformBrowser||!ae)&&(me===t.wi.Windows||me===t.wi.ChromeOS||me===t.wi.XBox?ye=v_browserWindowsList:me===t.wi.MacOS&&(ye=v_browserMacList),-1!==ye.indexOf(ae))}saveKeyboardLayoutToSharedStorage(ae){return this.cachedKeyboardLayout$.next(ae),this.sharedStorage.writeBlock(Y,ae)}readCachedKeyboardLayout(){if(this.cachedKeyboardLayout$)return this.cachedKeyboardLayout$.asObservable();const ae=new n.t(1);return this.logger.info("Fetching the cache value of Keyboard Layout"),this.cachedKeyboardLayout$=ae,this.sharedStorage.readBlock(Y).subscribe(me=>(this.logger.info("Keyboard Layout cache read reponse",me),ae.next(me),(0,i.of)(me)),me=>{ae.error(me),this.cachedKeyboardLayout$=null}),ae}removeCachedKeyboardLayout(){return this.cachedKeyboardLayout$.next({}),this.sharedStorage.removeBlock(Y)}getKeyboardLayoutEnabled(ae){return x.filter(me=>me.toUpperCase()===(null==ae?void 0:ae.toUpperCase())).length>0}getDefaultKBLayoutCodeForOther(){return this.defaultKBLayoutCodeForOther}getDefaultKBLayoutCode(){return this.defaultKBLayoutCode}getDefaultKBLayout(){return this.defaultKbLayout}setDefaultKBLayout(ae,me){let ye;ye=ae.filter(ue=>{var X,j;return this.isOtherDefaultLayout?null===(X=ue.params)||void 0===X?void 0:X.isOtherLayout:ue.code===this.getDefaultKBLayoutCode()&&!(null===(j=ue.params)||void 0===j?void 0:j.isOtherLayout)})[0],ye||(ye=ae.filter(ue=>{var X;return ue.code===me&&!(null===(X=ue.params)||void 0===X?void 0:X.isOtherLayout)})[0]),this.defaultKbLayout=ye}selectKeyboardLayout(ae,me,ye){this.logger.info("Keyboard layout override event triggered");const ue=new F({previousKeyboardLayout:"",overrideKeyboardLayout:"",defaultKeyboardLayout:""});let X,j,K;const Z=this.getDefaultKBLayout();ae?(j=ae.code,K=this.isPlatformBrowser?null==Z?void 0:Z.code:null==ye?void 0:ye.code,X=(null==me?void 0:me.code)||K,this.logger.info("Keyboard Layout Override event. Saving to cache. Override Keyboard Layout: ",ae),this.saveKeyboardLayoutToSharedStorage(ae).subscribe(L=>{this.logger.info("Keyboard layout cache saved successfully : ",L)},L=>this.logger.info("Keyboard layout cache save failed : ",L))):(this.isPlatformBrowser?(j=null==Z?void 0:Z.code,K=null==Z?void 0:Z.code,this.logger.info(`Default (${null==Z?void 0:Z.name}) ${null==Z?void 0:Z.code} keyboard layout selected. Clearing the cache.`)):(j=null==ye?void 0:ye.code,K=null==ye?void 0:ye.code,this.logger.info("Auto keyboard layout selected. Clearing the cache.")),X=(null==me?void 0:me.code)||K,this.removeCachedKeyboardLayout().subscribe(L=>this.logger.info("Keyboard layout cache cleared : ",L),L=>this.logger.info("Keyboard layout cache clear failed : ",L))),ue.parameters.previousKeyboardLayout=X,ue.parameters.overrideKeyboardLayout=j,ue.parameters.defaultKeyboardLayout=K,this.logger.info("Sending override keyboard layout event telemetry",ue),this.telemetryService.push(ue)}isAutoOtherKBLayout(ae){return(0,D.aj)([this.detectKeyboardLayout(),this.kbLayoutConfiguration$]).pipe((0,y.q)(1),(0,r.w)(([me,ye])=>{const ue=ae.find(X=>{var j;return X.code===me&&!(null===(j=X.params)||void 0===j?void 0:j.isOtherLayout)});return(0,i.of)(!ue&&ye)}))}getNativePlaceholder(ae,me){var ye;if(this.logger.info("detectedKeyboardLayout : ",ae),this.logger.info("kbToggle : ",me),ae||me){const ue=this.translateService.instant("common.other");return this.translateService.instant("settings.keyboardLayout.auto",{detectedKeyboardLayout:null!==(ye=null==ae?void 0:ae.name)&&void 0!==ye?ye:ue})}return this.translateService.instant("common.auto")}onAutoPlaceholderChange(){return(0,D.aj)([this.onKBLayoutChange$,this.kbLayoutConfiguration$])}get onPlaceholderChange(){return this.placeholder.asObservable()}getBrowserPlaceholder(){var ae;return`${this.translateService.instant("common.default")} (${null===(ae=this.getDefaultKBLayout())||void 0===ae?void 0:ae.name})`}registerKBLayoutChange(){this.onKBLayoutChange().subscribe(ae=>{this.logger.info("System keyboard layout changed to: "+ae),this.kbLayoutChanged(ae)})}}return fe.\u0275fac=function(ae){return new(ae||fe)(V.LFG(b.No2),V.LFG(t.ed),V.LFG(t.Ob),V.LFG(t.dF),V.LFG(B.OA),V.LFG(U.sK),V.LFG(t.OL),V.LFG(l.Q6),V.LFG(A.y0),V.LFG(t.d_))},fe.\u0275prov=V.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})()},73159:(He,de,e)=>{"use strict";e.d(de,{Gr:()=>w,s:()=>u});var n=e(80226),i=e(81134),D=e(47942),m=e(92597),y=e(33927),T=e(18293),r=e(71435),a=e(53466),s=e(202),p=e(2316),l=e(6484),t=e(57390),w=(()=>{return(f=w||(w={})).JWT="JWT",f.IDM="IDM",f.INVALID="Invalid",f.UNKNOWN="Unknown",f.IDM_FALLBACK="IDM_FALLBACK",w;var f})();let u=(()=>{class f{constructor(g,I){this.sharedStorage=I,this.telemetryStream=new n.t,this.startupComplete$=new n.t(1),this.logger=g.getLogger("streamer/gfnsdkService"),this.resetAuthConfig()}setSdkClient(g,I){g!==this.sdkClient&&(this.logger.info("SdkClient set to "+g),this.sdkClient=g,this.resetAuthConfig(I),this.getTelemetryData())}getTelemetryData(){return this.sdkClient&&(this.logger.info("Fetching sdk telemetry from shared storage."),this.sharedStorage.readBlock("sdk").subscribe(I=>{if(I)for(const G in I)if(I[G].telemetry&&Array.isArray(I[G].telemetry)&&I[G].telemetry.length>0){const x={platformName:G,checkGFNItems:[],streamNowButtonClickItems:[]};I[G].telemetry.forEach(E=>{var P,v,O,C;switch(E.eventName){case"CheckGFN":{const _={status:E.status||"",timeTaken:E.timeTaken||0,version:E.version||"",dllVersion:E.dllVersion||"",originalTimestamp:E.originalTimestamp||0,originalCmsId:(E.originalCmsId||"").toString(),originalShortname:E.originalShortname||"",originalAuthMethod:E.originalAuthMethod||"Other"};x.checkGFNItems.push(_);break}case"StreamNowButtonClick":{const _={status:E.status||"",timeTaken:E.timeTaken||0,version:E.version||"",dllVersion:E.dllVersion||"",originalTimestamp:E.originalTimestamp||0,originalCmsId:(E.originalCmsId||"").toString(),originalShortname:E.originalShortname||"",originalAuthMethod:E.originalAuthMethod||"Other",timeRemaining:null==E.timeRemaining?-1:E.timeRemaining,hasPartnerData:null==E.hasPartnerData?(null===(v=null===(P=I[G])||void 0===P?void 0:P.partnerData)||void 0===v?void 0:v.length)>0:E.hasPartnerData,hasPartnerSecureData:null==E.hasPartnerSecureData?(null===(C=null===(O=I[G])||void 0===O?void 0:O.partnerSecureData)||void 0===C?void 0:C.length)>0:E.hasPartnerSecureData};x.streamNowButtonClickItems.push(_);break}default:this.logger.info(`Invalid telemetry event ${null==E?void 0:E.eventName} found in shared storage`)}}),x.checkGFNItems.length+x.streamNowButtonClickItems.length>0?this.telemetryStream.next(x):this.logger.info("Platform "+G+" has no telemetry data to send")}})),this.telemetryStream.pipe((0,D.E)(g=>g.platformName))}clearTelemetryData(g){this.sharedStorage.removeBlock("sdk/"+g.platformName+"/telemetry").subscribe(G=>{this.logger.info(`Cached telemetry for SDK client ${this.sdkClient} was removed from storage ${G?"":"un"}successfully.`)})}parseAuthType(g){if(!g.authType)return w.INVALID;switch(g.authType.toLowerCase()){case"jarvis":case"jwt_gfn":return w.IDM;case"jwt":return!g.token||0===g.token.length||!(0,s.isNil)(g.timeRemaining)&&(g.timeRemaining<=0||g.timeRemaining>3600)?w.IDM_FALLBACK:w.JWT;default:return w.INVALID}}resetAuthConfig(g){this.authConfig$=g?(0,i.of)(g):this.getAuthConfigFromStorage().pipe((0,m.d)(1))}getAuthConfigFromStorage(){if(this.sdkClient){this.logger.info("Fetching auth type from shared storage.");const g="sdk/"+this.sdkClient;return this.sharedStorage.readBlock(g).pipe((0,y.U)(I=>(this.logger.info(`Running in GFN SDK mode for SDK client ${this.sdkClient}, auth type is ${this.parseAuthType(I)}.`),I)),(0,T.K)(()=>(this.logger.error(`Unable to read stored settings for SDK client ${this.sdkClient}`),(0,i.of)({token:void 0}))),(0,r.x)(()=>{this.startupComplete$.asObservable().subscribe(()=>{["token","partnerSecureData","partnerData"].forEach(G=>{this.sharedStorage.removeBlock(`${g}/${G}`).pipe((0,a.q)(1)).subscribe(x=>{this.logger.info(`${G} for SDK client ${this.sdkClient} was removed from storage ${x?"":"un"}successfully.`)})})})}))}return this.logger.info("Running in regular GFN client mode, auth type is IDM."),(0,i.of)({authType:w.IDM,token:void 0})}getAuthType(){return this.authConfig$.pipe((0,y.U)(g=>{const I=this.parseAuthType(g);return this.logger.info(I!==w.INVALID?`Returning cached auth type: ${I}`:"Current auth type is invalid and cannot be used for authentication purposes"),I}))}continueStartup(){this.startupComplete$.next(!0)}getIsAnonymousUser(){return this.getAuthType().pipe((0,y.U)(g=>g===w.JWT))}forceIDMAuthType(){this.originalAuthConfig$=this.authConfig$,this.authConfig$=this.originalAuthConfig$.pipe((0,y.U)(g=>{const I=Object.assign({},g);return I.authType=w.IDM,I.token=void 0,I.delegateToken=void 0,I}))}getAuthToken(){return this.authConfig$.pipe((0,y.U)(g=>{const I=g.token;return this.logger.info(I?"Returning cached auth token":"Current auth token is empty and likely not useful for authentication purposes"),I}))}getAuthInfo(){return this.authConfig$.pipe((0,y.U)(g=>{const I=this.parseAuthType(g);this.logger.info(I!==w.INVALID?`Returning cached auth type: ${I}`:"Current auth type is invalid and cannot be used for authentication purposes");const G=g.token;this.logger.info(G?"Returning cached auth token.":"Current auth token is empty and likely not useful for authentication purposes");let x=null,E=null,P=null;if(G){try{const v=atob(G.split(".")[1]),O=JSON.parse(v);if(Array.isArray(O.options))O.options.forEach(function(C){"uid"===(null==C?void 0:C.key)?x=null==C?void 0:C.value:"external_id"===(null==C?void 0:C.key)?E=null==C?void 0:C.value:"idp_id"===(null==C?void 0:C.key)&&(P=null==C?void 0:C.value)});else{const C=JSON.parse(atob(O.options));x=C.userId,E=C.externalId,P=C.partnerId}}catch(v){this.logger.error("Got an exception while parsing JWT for user info: ",v)}x?this.logger.info(`Returning userId from JWT ${x}`):this.logger.warn("Current userId is empty and likely not useful for authentication purposes!"),E?this.logger.info(`Returning externalUserId from JWT ${E}.`):this.logger.warn("Current externalUserId is empty and likely not useful for authentication purposes!"),P?this.logger.info(`Returning idpId from JWT ${P}.`):this.logger.warn("Current ipdId is empty and likely not useful for authentication purposes!")}return{authType:I,authToken:G,userId:x,externalUserId:E,idpId:P,timeRemaining:g.timeRemaining}}))}getPartnerData(){return this.authConfig$.pipe((0,y.U)(g=>(null==g?void 0:g.partnerData)||""))}getPartnerSecureData(){return this.authConfig$.pipe((0,y.U)(g=>(null==g?void 0:g.partnerSecureData)||""))}isThisAGFNSDKSession(){return this.sdkClient&&this.sdkClient.length>0}isAuthInfoValid(g){var I;return(null===(I=g.authToken)||void 0===I?void 0:I.length)>0&&(null==g.timeRemaining||g.timeRemaining>0&&g.timeRemaining<=3600)}}return f.\u0275fac=function(g){return new(g||f)(p.LFG(l.ed),p.LFG(t.OA))},f.\u0275prov=p.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},9729:(He,de,e)=>{"use strict";function y(r=!1){return r?112:32}function T(r,a){const s=[];if((a.bottomSheet||a.threeQuarterSheet)&&s.push("nv-hig"),a.threeQuarterSheet&&s.push("nv-three-quarter-sheet"),a.tvMode&&s.push("is-tv"),s.length>0){const p=r.panelClass?r.panelClass instanceof Array?r.panelClass:new Array(r.panelClass):new Array;s.forEach(l=>{p.includes(l)||p.push(l)}),r.panelClass=p}}e.d(de,{av:()=>y,HO:()=>T})},77599:(He,de,e)=>{"use strict";e.d(de,{A:()=>E});var n=e(2316),i=e(76322),D=e(9729),m=e(60772);function y(P,v){if(1&P&&(n.TgZ(0,"i",18),n._uU(1),n.qZA()),2&P){const O=n.oxw(2);n.xp6(1),n.Oqu(O.data.icon)}}function T(P,v){if(1&P&&n._UZ(0,"img",19),2&P){const O=n.oxw(2);n.Q6J("src",O.data.image.url,n.LSH)}}function r(P,v){if(1&P&&n._UZ(0,"qrcode",20),2&P){const O=n.oxw(2);n.Q6J("qrdata",O.data.link.url)("width",184)("errorCorrectionLevel","M")}}function a(P,v){if(1&P&&(n.TgZ(0,"div",14),n.YNc(1,y,2,1,"i",15),n.YNc(2,T,1,1,"img",16),n.YNc(3,r,1,3,"qrcode",17),n.qZA()),2&P){const O=n.oxw();n.xp6(1),n.Q6J("ngIf",O.data.icon),n.xp6(1),n.Q6J("ngIf",O.data.image),n.xp6(1),n.Q6J("ngIf",O.showQRCode)}}function s(P,v){if(1&P&&(n.TgZ(0,"div",21),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&P){const O=n.oxw();n.Q6J("ngClass",O.tvMode?"font-tv-header":"font-header6"),n.xp6(1),n.hij(" ",n.xi3(2,2,O.data.headerText.text,O.data.headerText.placeholders)," ")}}function p(P,v){1&P&&n._UZ(0,"mat-progress-spinner",22)}const l=function(P,v,O){return{"font-tv-body":P,"font-body2":v,"overflow-wrap-anywhere":O}};function t(P,v){if(1&P&&(n._UZ(0,"div",23),n.ALo(1,"translate")),2&P){const O=n.oxw();n.Q6J("ngClass",n.kEZ(5,l,O.tvMode,!O.tvMode,O.showQRCode))("innerHTML",O.data.bodyText.translated?O.data.bodyText.text:n.xi3(1,2,O.data.bodyText.text,O.data.bodyText.placeholders),n.oJD)}}function w(P,v){if(1&P&&(n.ynx(0),n.GkF(1,24),n.GkF(2,24),n.BQk()),2&P){n.oxw();const O=n.MAs(13),C=n.MAs(15);n.xp6(1),n.Q6J("ngTemplateOutlet",O),n.xp6(1),n.Q6J("ngTemplateOutlet",C)}}function h(P,v){if(1&P&&(n.GkF(0,24),n.GkF(1,24)),2&P){n.oxw();const O=n.MAs(15),C=n.MAs(13);n.Q6J("ngTemplateOutlet",O),n.xp6(1),n.Q6J("ngTemplateOutlet",C)}}const u=function(P){return{visible:P}};function o(P,v){if(1&P){const O=n.EpF();n.TgZ(0,"button",26),n.NdJ("click",function(){return n.CHM(O),n.oxw(2).onPrimaryButtonClick()}),n._uU(1),n.ALo(2,"translate"),n.GkF(3,27),n.qZA()}if(2&P){const O=n.oxw(2),C=n.MAs(17);n.Q6J("ngClass",O.data.primaryButton.accentColor&&!O.tvMode?"font-button2 mat-flat-button mat-accent":"font-button2")("disabled",O.data.primaryButton.isDisabled)("nvAutoFocus",O.autoFocusOnPrimaryButton),n.xp6(1),n.hij(" ",n.lcZ(2,6,O.data.primaryButton.text)," "),n.xp6(2),n.Q6J("ngTemplateOutlet",C)("ngTemplateOutletContext",n.VKq(8,u,O.data.primaryButton.spinnerOverlay))}}function f(P,v){if(1&P&&n.YNc(0,o,4,10,"button",25),2&P){const O=n.oxw();n.Q6J("ngIf",O.data.primaryButton)}}function c(P,v){if(1&P){const O=n.EpF();n.TgZ(0,"button",29),n.NdJ("click",function(){return n.CHM(O),n.oxw(2).onSecondaryButtonClick()}),n._uU(1),n.ALo(2,"translate"),n.GkF(3,27),n.qZA()}if(2&P){const O=n.oxw(2),C=n.MAs(17);n.Q6J("disabled",O.data.secondaryButton.isDisabled),n.xp6(1),n.hij(" ",n.lcZ(2,4,O.data.secondaryButton.text)," "),n.xp6(2),n.Q6J("ngTemplateOutlet",C)("ngTemplateOutletContext",n.VKq(6,u,O.data.secondaryButton.spinnerOverlay))}}function g(P,v){if(1&P&&n.YNc(0,c,4,8,"button",28),2&P){const O=n.oxw();n.Q6J("ngIf",O.data.secondaryButton)}}function I(P,v){1&P&&(n.TgZ(0,"div",31),n._UZ(1,"mat-progress-spinner",32),n.qZA()),2&P&&(n.xp6(1),n.Q6J("diameter",48))}function G(P,v){1&P&&n.YNc(0,I,2,1,"div",30),2&P&&n.Q6J("ngIf",v.visible)}const x=function(P,v){return{"has-image":P,"only-body":v}};let E=(()=>{class P{constructor(O,C){this.injector=O,this.primaryButtonClick=new n.vpe,this.secondaryButtonClick=new n.vpe,this.data={},this.data=this.injector.get(i.OG,null),this.tvMode=!!C.tvMode,console.log("bottom sheet: ",this.data)}get hasImage(){return!!this.data.icon||!!this.data.image||this.showQRCode}get showQRCode(){var O;return this.tvMode&&!!(null===(O=this.data.link)||void 0===O?void 0:O.url)}get autoFocusOnPrimaryButton(){var O;return null===(O=this.data.autoFocusOnPrimaryButton)||void 0===O||O}static open(O,C,_){return(0,D.HO)(C,{bottomSheet:!0,tvMode:_}),O.open(P,C)}onPrimaryButtonClick(){this.primaryButtonClick.emit()}onSecondaryButtonClick(){this.secondaryButtonClick.emit()}}return P.\u0275fac=function(O){return new(O||P)(n.Y36(n.zs3),n.Y36(m.i,8))},P.\u0275cmp=n.Xpm({type:P,selectors:[["nv-hig-bottom-sheet"]],inputs:{data:"data"},outputs:{primaryButtonClick:"primaryButtonClick",secondaryButtonClick:"secondaryButtonClick"},decls:18,vars:20,consts:[["fxLayoutAlign","space-between stretch","nvSpatialNavigationContainer","","nvTrapFocus","",1,"hig-bottom-sheet",3,"fxLayout"],["class","image-container",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start",1,"content",3,"fxFlex","ngClass","fxLayoutGap"],["fxFlex","nogrow",3,"ngClass",4,"ngIf"],["fxFlex","","fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","24px"],["fxFlex","none","mode","indeterminate","color","accent","diameter","64",4,"ngIf"],["fxFlex","",3,"ngClass","innerHTML",4,"ngIf"],["fxLayout","column",1,"actions-container",3,"fxFlex","fxFlexAlign"],[1,"buttons-container",3,"fxLayout","fxLayoutAlign","fxLayoutGap"],[4,"ngIf","ngIfElse"],["nonTvMode",""],["primaryButton",""],["secondaryButton",""],["buttonSpinner",""],[1,"image-container"],["class","material-icons",4,"ngIf"],[3,"src",4,"ngIf"],[3,"qrdata","width","errorCorrectionLevel",4,"ngIf"],[1,"material-icons"],[3,"src"],[3,"qrdata","width","errorCorrectionLevel"],["fxFlex","nogrow",3,"ngClass"],["fxFlex","none","mode","indeterminate","color","accent","diameter","64"],["fxFlex","",3,"ngClass","innerHTML"],[3,"ngTemplateOutlet"],["mat-button","",3,"ngClass","disabled","nvAutoFocus","click",4,"ngIf"],["mat-button","",3,"ngClass","disabled","nvAutoFocus","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mat-button","","class","font-button2",3,"disabled","click",4,"ngIf"],["mat-button","",1,"font-button2",3,"disabled","click"],["fxLayout","column","fxLayoutAlign","center end","class","spinner-overlay",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center end",1,"spinner-overlay"],["mode","indeterminate",1,"mat-accent",3,"diameter"]],template:function(O,C){if(1&O&&(n.TgZ(0,"div",0),n.YNc(1,a,4,3,"div",1),n.TgZ(2,"div",2),n.YNc(3,s,3,5,"div",3),n.TgZ(4,"div",4),n.YNc(5,p,1,0,"mat-progress-spinner",5),n.YNc(6,t,2,9,"div",6),n.qZA(),n.qZA(),n.TgZ(7,"div",7),n.TgZ(8,"div",8),n.YNc(9,w,3,2,"ng-container",9),n.YNc(10,h,2,2,"ng-template",null,10,n.W1O),n.qZA(),n.YNc(12,f,1,1,"ng-template",null,11,n.W1O),n.YNc(14,g,1,1,"ng-template",null,12,n.W1O),n.YNc(16,G,1,1,"ng-template",null,13,n.W1O),n.qZA(),n.qZA()),2&O){const _=n.MAs(11);n.ekj("is-tv",C.tvMode),n.Q6J("fxLayout",C.tvMode?"row":"column"),n.xp6(1),n.Q6J("ngIf",C.hasImage),n.xp6(1),n.Q6J("fxFlex",C.tvMode?"":"grow")("ngClass",n.WLB(17,x,C.hasImage,!C.data.headerText))("fxLayoutGap",C.tvMode?"30px":"16px"),n.xp6(1),n.Q6J("ngIf",C.data.headerText),n.xp6(2),n.Q6J("ngIf",C.data.showSpinner),n.xp6(1),n.Q6J("ngIf",C.data.bodyText),n.xp6(1),n.Q6J("fxFlex",C.tvMode?"":"initial")("fxFlexAlign",C.tvMode?"start":"end"),n.xp6(1),n.Q6J("fxLayout",C.tvMode?"column":"row")("fxLayoutAlign",C.tvMode?"":"end center")("fxLayoutGap",C.tvMode?"16px":"8px"),n.xp6(1),n.Q6J("ngIf",C.tvMode)("ngIfElse",_)}},styles:['@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.hig-bottom-sheet[_ngcontent-%COMP%]{background-color:#393939;padding:0;width:100vw;min-height:132px;height:132px;max-height:80vh}@media (orientation: portrait){.hig-bottom-sheet[_ngcontent-%COMP%]{min-height:180px;height:180px}}.isLtr[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{margin:16px max(env(safe-area-inset-right),16px) 0 max(env(safe-area-inset-left),16px)}html[dir=ltr][_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{--dummy: 0;margin:16px max(env(safe-area-inset-right),16px) 0 max(env(safe-area-inset-left),16px)}.isRtl[_nghost-%COMP%]   .content[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{margin:16px max(env(safe-area-inset-left),16px) 0 max(env(safe-area-inset-right),16px)}html[dir=rtl][_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{--dummy: 0;margin:16px max(env(safe-area-inset-left),16px) 0 max(env(safe-area-inset-right),16px)}.actions-container[_ngcontent-%COMP%]{padding:8px max(env(safe-area-inset-right),8px) max(env(safe-area-inset-bottom),8px) max(env(safe-area-inset-left),8px)}.is-tv.hig-bottom-sheet[_ngcontent-%COMP%]{min-height:420px;height:420px}.isLtr[_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{margin:120px 0 0 120px}html[dir=ltr][_ngcontent-%COMP%]   .is-tv[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{--dummy: 0;margin:120px 0 0 120px}.isRtl[_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{margin:120px 120px 0 0}html[dir=rtl][_ngcontent-%COMP%]   .is-tv[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{--dummy: 0;margin:120px 120px 0 0}.is-tv[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:112px}.is-tv[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:112px;height:112px;object-fit:fill}.is-tv[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{padding:0;max-width:606px}.is-tv[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{min-width:0}.isLtr[_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:120px 90px 0 120px}html[dir=ltr][_ngcontent-%COMP%]   .is-tv[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{--dummy: 0;margin:120px 90px 0 120px}.isRtl[_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:120px 120px 0 90px}html[dir=rtl][_ngcontent-%COMP%]   .is-tv[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{--dummy: 0;margin:120px 120px 0 90px}.is-tv[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .font-tv-header[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:56.25px;letter-spacing:.51px;font-weight:300}.is-tv[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .font-tv-body[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:28px;line-height:39px;letter-spacing:.21px;min-height:110px}.is-tv[_ngcontent-%COMP%]   .content.has-image.only-body[_ngcontent-%COMP%]   .font-tv-body[_ngcontent-%COMP%]{display:flex;align-items:center}.isLtr[_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .content.has-image[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .content.has-image[_ngcontent-%COMP%]{margin:120px 90px 0 56px}html[dir=ltr][_ngcontent-%COMP%]   .is-tv[_ngcontent-%COMP%]   .content.has-image[_ngcontent-%COMP%]{--dummy: 0;margin:120px 90px 0 56px}.isRtl[_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .content.has-image[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .content.has-image[_ngcontent-%COMP%]{margin:120px 56px 0 90px}html[dir=rtl][_ngcontent-%COMP%]   .is-tv[_ngcontent-%COMP%]   .content.has-image[_ngcontent-%COMP%]{--dummy: 0;margin:120px 56px 0 90px}.overflow-wrap-anywhere[_ngcontent-%COMP%]{overflow-wrap:anywhere}.buttons-container[_ngcontent-%COMP%]{height:calc(8px + max(env(safe-area-inset-bottom),8px) + 36px)}.buttons-container[_ngcontent-%COMP%]   button[mat-button][_ngcontent-%COMP%]{line-height:36px}.buttons-container[_ngcontent-%COMP%]   .spinner-overlay[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;z-index:1;background:transparent}.isLtr[_nghost-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .spinner-overlay[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .spinner-overlay[_ngcontent-%COMP%]{margin-right:32px}html[dir=ltr][_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .spinner-overlay[_ngcontent-%COMP%]{--dummy4: 0;margin-right:32px}.isRtl[_nghost-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .spinner-overlay[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .spinner-overlay[_ngcontent-%COMP%]{margin-left:32px}html[dir=rtl][_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .spinner-overlay[_ngcontent-%COMP%]{--dummy4: 0;margin-left:32px}.is-tv[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{height:100%;margin-top:120px}.isLtr[_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{margin-right:80px}html[dir=ltr][_ngcontent-%COMP%]   .is-tv[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{--dummy4: 0;margin-right:80px}.isRtl[_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .is-tv[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{margin-left:80px}html[dir=rtl][_ngcontent-%COMP%]   .is-tv[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{--dummy4: 0;margin-left:80px}.is-tv[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-start;height:92px;width:100%;text-align:start;border-radius:5px;font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:30px;line-height:35.16px;letter-spacing:.22px}']}),P})()},25219:(He,de,e)=>{"use strict";e.d(de,{D:()=>P});var n=e(2316),i=e(22213);function D(v,O){if(1&v&&(n.TgZ(0,"i",20),n._uU(1),n.qZA()),2&v){const C=n.oxw();n.xp6(1),n.Oqu(C.data.icon)}}function m(v,O){if(1&v&&n._UZ(0,"img",21),2&v){const C=n.oxw();n.Q6J("src",C.data.image.url,n.LSH)}}function y(v,O){if(1&v&&(n.TgZ(0,"div",22),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&v){const C=n.oxw();n.xp6(1),n.hij(" ",n.xi3(2,1,C.data.headerText.text,C.data.translateValues)," ")}}function T(v,O){1&v&&(n.TgZ(0,"div",23),n._UZ(1,"mat-progress-spinner",24),n.qZA())}function r(v,O){if(1&v&&(n._UZ(0,"div",25),n.ALo(1,"translate")),2&v){const C=n.oxw();n.Q6J("innerHTML",C.data.bodyText.translated?C.data.bodyText.text:n.xi3(1,1,C.data.bodyText.text,C.data.bodyText.placeholders),n.oJD)}}function a(v,O){if(1&v){const C=n.EpF();n.TgZ(0,"div",26),n.TgZ(1,"span",27),n.NdJ("click",function(){return n.CHM(C),n.oxw().onLinkClick()}),n.ALo(2,"translate"),n.qZA(),n.qZA()}if(2&v){const C=n.oxw();n.xp6(1),n.Q6J("innerHTML",n.xi3(2,1,C.data.link.text,C.data.link.placeholders),n.oJD)}}function s(v,O){if(1&v){const C=n.EpF();n.TgZ(0,"a",31),n.NdJ("click",function(){return n.CHM(C),n.oxw(2).onLinkClick()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&v){const C=n.oxw(2);n.Q6J("href",C.data.link.url,n.LSH),n.xp6(1),n.Oqu(n.lcZ(2,2,C.data.link.text))}}function p(v,O){if(1&v&&(n.TgZ(0,"a",32),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&v){const C=n.oxw(2);n.Q6J("routerLink",C.data.link.routerLink.commands)("skipLocationChange",C.data.link.routerLink.skipLocationChange),n.xp6(1),n.hij(" ",n.lcZ(2,3,C.data.link.text)," ")}}function l(v,O){if(1&v){const C=n.EpF();n.TgZ(0,"a",33),n.NdJ("click",function(){return n.CHM(C),n.oxw(2).data.link.linkClickedCallback()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&v){const C=n.oxw(2);n.xp6(1),n.hij(" ",n.lcZ(2,1,C.data.link.text)," ")}}function t(v,O){if(1&v&&(n.TgZ(0,"div",26),n.YNc(1,s,3,4,"a",28),n.YNc(2,p,3,5,"a",29),n.YNc(3,l,3,3,"a",30),n.qZA()),2&v){const C=n.oxw();n.xp6(1),n.Q6J("ngIf",C.data.link.url&&!C.data.link.routerLink&&!C.data.link.linkClickedCallback),n.xp6(1),n.Q6J("ngIf",C.data.link.routerLink&&!C.data.link.linkClickedCallback),n.xp6(1),n.Q6J("ngIf",C.data.link.linkClickedCallback)}}function w(v,O){if(1&v&&n._UZ(0,"img",39),2&v){const C=n.oxw().$implicit;n.Q6J("src",C.imageUrl,n.LSH)}}function h(v,O){if(1&v&&(n.TgZ(0,"mat-radio-button",36),n.YNc(1,w,1,1,"img",37),n.TgZ(2,"div",38),n._uU(3),n.qZA(),n.qZA()),2&v){const C=O.$implicit;n.Q6J("value",C.value),n.xp6(1),n.Q6J("ngIf",C.imageUrl),n.xp6(2),n.Oqu(C.value)}}function u(v,O){if(1&v){const C=n.EpF();n.TgZ(0,"mat-radio-group",34),n.NdJ("ngModelChange",function(F){return n.CHM(C),n.oxw().data.radioOptionSelected=F})("change",function(){return n.CHM(C),n.oxw().onRadioOptionChange()}),n.YNc(1,h,4,3,"mat-radio-button",35),n.qZA()}if(2&v){const C=n.oxw();n.Q6J("ngModel",C.data.radioOptionSelected),n.xp6(1),n.Q6J("ngForOf",C.data.radioButtonOptions)}}function o(v,O){if(1&v){const C=n.EpF();n.TgZ(0,"div",40),n.TgZ(1,"div",41),n.TgZ(2,"a",42),n.NdJ("click",function(){return!1})("dragstart",function(){return n.CHM(C),n.oxw().onImageDragStart()}),n._uU(3),n.ALo(4,"translate"),n._UZ(5,"img",43),n.qZA(),n._UZ(6,"p",44),n.ALo(7,"translate"),n.qZA(),n._UZ(8,"p",45),n.ALo(9,"translate"),n.qZA()}if(2&v){const C=n.oxw();n.xp6(2),n.Q6J("href",C.data.image.shortcutUrl,n.LSH),n.xp6(1),n.Oqu(n.xi3(4,6,C.data.image.caption,C.data.image.captionPlaceholder)),n.xp6(2),n.Q6J("src",C.data.image.url,n.LSH)("alt",C.data.image.captionPlaceholder),n.xp6(1),n.Q6J("innerHTML",n.xi3(7,9,C.data.image.caption,C.data.image.captionPlaceholder),n.oJD),n.xp6(2),n.Q6J("innerHTML",n.lcZ(9,12,C.data.image.description),n.oJD)}}function f(v,O){if(1&v){const C=n.EpF();n.TgZ(0,"mat-checkbox",46),n.NdJ("ngModelChange",function(F){return n.CHM(C),n.oxw().data.checkboxState=F}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&v){const C=n.oxw();n.Q6J("ngModel",C.data.checkboxState),n.xp6(1),n.hij(" ",n.lcZ(2,2,C.data.checkbox.text)," ")}}const c=function(v){return{visible:v}};function g(v,O){if(1&v){const C=n.EpF();n.TgZ(0,"button",47),n.NdJ("click",function(){return n.CHM(C),n.oxw().onSecondaryButtonClick()}),n._uU(1),n.ALo(2,"translate"),n.GkF(3,48),n.qZA()}if(2&v){const C=n.oxw(),_=n.MAs(22);n.Q6J("disabled",C.data.secondaryButton.isDisabled),n.xp6(1),n.hij(" ",n.lcZ(2,4,C.data.secondaryButton.text)," "),n.xp6(2),n.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",n.VKq(6,c,C.data.secondaryButton.spinnerOverlay))}}function I(v,O){if(1&v){const C=n.EpF();n.TgZ(0,"button",49),n.NdJ("click",function(){return n.CHM(C),n.oxw().onPrimaryButtonClick()}),n._uU(1),n.ALo(2,"translate"),n.GkF(3,48),n.qZA()}if(2&v){const C=n.oxw(),_=n.MAs(22);n.Q6J("ngClass",C.data.primaryButton.accentColor?"font-button2 mat-flat-button mat-accent":"font-button2")("disabled",C.data.primaryButton.isDisabled)("nvAutoFocus",C.autoFocusOnPrimaryButton),n.xp6(1),n.hij(" ",n.lcZ(2,6,C.data.primaryButton.text)," "),n.xp6(2),n.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",n.VKq(8,c,C.data.primaryButton.spinnerOverlay))}}function G(v,O){1&v&&(n.TgZ(0,"div",51),n._UZ(1,"mat-progress-spinner",52),n.qZA()),2&v&&(n.xp6(1),n.Q6J("diameter",16))}function x(v,O){1&v&&n.YNc(0,G,2,1,"div",50),2&v&&n.Q6J("ngIf",O.visible)}const E=function(v,O){return[v,O]};let P=(()=>{class v{constructor(C){this.injector=C,this.primaryButtonClick=new n.vpe,this.secondaryButtonClick=new n.vpe,this.radioButtonClick=new n.vpe,this.linkClick=new n.vpe,this.data={},this.data=this.injector.get(i.WI,null)||{showSpinner:!1}}get hasIcon(){return!!this.data.icon||!!this.data.image}get autoFocusOnPrimaryButton(){var C;return null===(C=this.data.autoFocusOnPrimaryButton)||void 0===C||C}static open(C,_){return C.open(v,_)}ngOnInit(){var C,_;this.data.checkboxState=null!==(_=null===(C=this.data.checkbox)||void 0===C?void 0:C.initialState)&&void 0!==_&&_}onPrimaryButtonClick(){this.primaryButtonClick.emit()}onSecondaryButtonClick(){this.secondaryButtonClick.emit()}onLinkClick(){this.linkClick.emit()}onRadioOptionChange(){this.radioButtonClick.emit()}onImageDragStart(){var C;null===(C=this.data.image)||void 0===C||C.dragStartCallback()}}return v.\u0275fac=function(C){return new(C||v)(n.Y36(n.zs3))},v.\u0275cmp=n.Xpm({type:v,selectors:[["nv-hig-dialog"]],inputs:{data:"data"},outputs:{primaryButtonClick:"primaryButtonClick",secondaryButtonClick:"secondaryButtonClick",radioButtonClick:"radioButtonClick",linkClick:"linkClick"},decls:23,vars:25,consts:[["nvSpatialNavigationContainer","","nvTrapFocus","",3,"ngClass"],["fxLayout","row","fxLayoutAlign","stretch start",1,"hig-dialog-padding"],["class","hig-dialog-icon material-icons",4,"ngIf"],["class","hig-dialog-img",3,"src",4,"ngIf"],["fxLayout","column","fxLayoutGap","16px",1,"hig-dialog-content-container"],["fxLayout","column","fxLayoutAlign","space-between stretch",1,"hig-dialog-info-container"],["class","font-header6 header-text",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",1,"hig-dialog-spinner-container",3,"ngClass"],["class","hig-dialog-spinner",4,"ngIf"],["fxLayout","column"],["class","font-body2 body-text",3,"innerHTML",4,"ngIf"],["class","hig-dialog-link-text",4,"ngIf"],["class","hig-radio-container",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","hig-dialog-image-container","fxLayout","row","fxLayoutAlign","start start",4,"ngIf"],["fxLayout","column","fxLayoutGap","16px",1,"hig-dialog-actions-container"],[3,"ngModel","ngModelChange",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"hig-dialog-buttons-container"],["mat-button","","class","hig-dialog-secondary-button font-button2",3,"disabled","click",4,"ngIf"],["mat-button","",3,"ngClass","disabled","nvAutoFocus","click",4,"ngIf"],["buttonSpinner",""],[1,"hig-dialog-icon","material-icons"],[1,"hig-dialog-img",3,"src"],[1,"font-header6","header-text"],[1,"hig-dialog-spinner"],["mode","indeterminate","diameter","48","color","accent"],[1,"font-body2","body-text",3,"innerHTML"],[1,"hig-dialog-link-text"],["target","_blank",3,"innerHTML","click"],["target","_blank","class","font-body2-link",3,"href","click",4,"ngIf"],["class","font-body2-link",3,"routerLink","skipLocationChange",4,"ngIf"],["class","font-body2-link",3,"click",4,"ngIf"],["target","_blank",1,"font-body2-link",3,"href","click"],[1,"font-body2-link",3,"routerLink","skipLocationChange"],[1,"font-body2-link",3,"click"],[1,"hig-radio-container",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","hig-radio-option-image",3,"src",4,"ngIf"],["dir","auto",1,"hig-radio-option-label"],[1,"hig-radio-option-image",3,"src"],["fxLayout","row","fxLayoutAlign","start start",1,"hig-dialog-image-container"],["fxLayout","column",1,"hig-dialog-image-shortcut-container"],[1,"hig-dialog-image-shortcut-link",3,"href","click","dragstart"],[1,"hig-dialog-image",3,"src","alt"],[1,"hig-dialog-image-caption",3,"innerHTML"],[1,"hig-dialog-image-description","font-body2",3,"innerHTML"],[3,"ngModel","ngModelChange"],["mat-button","",1,"hig-dialog-secondary-button","font-button2",3,"disabled","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mat-button","",3,"ngClass","disabled","nvAutoFocus","click"],["fxLayoutAlign","center center","class","spinner-overlay",4,"ngIf"],["fxLayoutAlign","center center",1,"spinner-overlay"],["mode","indeterminate",1,"mat-accent",3,"diameter"]],template:function(C,_){1&C&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.YNc(2,D,2,1,"i",2),n.YNc(3,m,1,1,"img",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n.YNc(6,y,3,4,"div",6),n.TgZ(7,"div",7),n.YNc(8,T,2,0,"div",8),n.TgZ(9,"div",9),n.YNc(10,r,2,4,"div",10),n.qZA(),n.qZA(),n.YNc(11,a,3,4,"div",11),n.YNc(12,t,4,3,"div",11),n.YNc(13,u,2,2,"mat-radio-group",12),n.YNc(14,o,10,14,"div",13),n.qZA(),n.TgZ(15,"div",14),n.TgZ(16,"div"),n.YNc(17,f,3,4,"mat-checkbox",15),n.qZA(),n.TgZ(18,"div",16),n.YNc(19,g,4,8,"button",17),n.YNc(20,I,4,10,"button",18),n.qZA(),n.YNc(21,x,1,1,"ng-template",null,19,n.W1O),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&C&&(n.Q6J("ngClass",_.data.isTransparent?"hig-dialog-transparent":"hig-dialog"),n.xp6(1),n.ekj("no-header-text",!_.data.headerText)("no-body-text",!_.data.bodyText)("no-spinner",!_.data.showSpinner)("has-icon",_.hasIcon),n.xp6(1),n.Q6J("ngIf",_.data.icon),n.xp6(1),n.Q6J("ngIf",_.data.image&&!_.data.image.isDraggableUrl),n.xp6(3),n.Q6J("ngIf",_.data.headerText),n.xp6(1),n.Q6J("ngClass",n.WLB(22,E,_.data.bodyText?"hig-dialog-spinner-content-start":"hig-dialog-spinner-content-center",_.data.showSpinner?"hig-dialog-spinner-group":"")),n.xp6(1),n.Q6J("ngIf",_.data.showSpinner),n.xp6(2),n.Q6J("ngIf",_.data.bodyText),n.xp6(1),n.Q6J("ngIf",null==_.data.link?null:_.data.link.placeholders),n.xp6(1),n.Q6J("ngIf",_.data.link&&!_.data.link.placeholders),n.xp6(1),n.Q6J("ngIf",_.data.radioButtonOptions),n.xp6(1),n.Q6J("ngIf",null==_.data.image?null:_.data.image.isDraggableUrl),n.xp6(3),n.Q6J("ngIf",_.data.checkbox),n.xp6(2),n.Q6J("ngIf",_.data.secondaryButton),n.xp6(1),n.Q6J("ngIf",_.data.primaryButton))},styles:[".hig-dialog[_ngcontent-%COMP%]{background-color:#393939;padding:0;width:560px}.hig-dialog-transparent[_ngcontent-%COMP%]{background-color:transparent;padding:0;width:100%}.isLtr[_nghost-%COMP%]   .hig-dialog-padding[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hig-dialog-padding[_ngcontent-%COMP%]{padding:20px 8px 8px 24px}html[dir=ltr][_ngcontent-%COMP%]   .hig-dialog-padding[_ngcontent-%COMP%]{--dummy: 0;padding:20px 8px 8px 24px}.isRtl[_nghost-%COMP%]   .hig-dialog-padding[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hig-dialog-padding[_ngcontent-%COMP%]{padding:20px 24px 8px 8px}html[dir=rtl][_ngcontent-%COMP%]   .hig-dialog-padding[_ngcontent-%COMP%]{--dummy: 0;padding:20px 24px 8px 8px}.hig-dialog-img[_ngcontent-%COMP%]{min-width:32px}.isLtr[_nghost-%COMP%]   .hig-dialog-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hig-dialog-icon[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .hig-dialog-img[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hig-dialog-img[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .hig-dialog-icon[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .hig-dialog-img[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .hig-dialog-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hig-dialog-icon[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .hig-dialog-img[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hig-dialog-img[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .hig-dialog-icon[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .hig-dialog-img[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 568px) and (max-height: 320px) and (orientation: landscape){.hig-dialog[_ngcontent-%COMP%]{width:calc(100vw - 32px)}}.hig-dialog-content-container[_ngcontent-%COMP%]{width:100%}.isLtr[_nghost-%COMP%]   .hig-dialog-content-container[_ngcontent-%COMP%]   .hig-dialog-info-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hig-dialog-content-container[_ngcontent-%COMP%]   .hig-dialog-info-container[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .hig-dialog-content-container[_ngcontent-%COMP%]   .hig-dialog-info-container[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .hig-dialog-content-container[_ngcontent-%COMP%]   .hig-dialog-info-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hig-dialog-content-container[_ngcontent-%COMP%]   .hig-dialog-info-container[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .hig-dialog-content-container[_ngcontent-%COMP%]   .hig-dialog-info-container[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.isLtr[_nghost-%COMP%]   .hig-dialog-spinner[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hig-dialog-spinner[_ngcontent-%COMP%]{padding-right:15px}html[dir=ltr][_ngcontent-%COMP%]   .hig-dialog-spinner[_ngcontent-%COMP%]{--dummy2: 0;padding-right:15px}.isRtl[_nghost-%COMP%]   .hig-dialog-spinner[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hig-dialog-spinner[_ngcontent-%COMP%]{padding-left:15px}html[dir=rtl][_ngcontent-%COMP%]   .hig-dialog-spinner[_ngcontent-%COMP%]{--dummy2: 0;padding-left:15px}.hig-dialog-spinner-group[_ngcontent-%COMP%]{margin-top:10px}.hig-dialog-link-text[_ngcontent-%COMP%]{margin:10px 0 0}.isLtr[_nghost-%COMP%]   .hig-dialog-buttons-container[_ngcontent-%COMP%]   .hig-dialog-secondary-button[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hig-dialog-buttons-container[_ngcontent-%COMP%]   .hig-dialog-secondary-button[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .hig-dialog-buttons-container[_ngcontent-%COMP%]   .hig-dialog-secondary-button[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .hig-dialog-buttons-container[_ngcontent-%COMP%]   .hig-dialog-secondary-button[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hig-dialog-buttons-container[_ngcontent-%COMP%]   .hig-dialog-secondary-button[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .hig-dialog-buttons-container[_ngcontent-%COMP%]   .hig-dialog-secondary-button[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.hig-dialog-buttons-container[_ngcontent-%COMP%]   .spinner-overlay[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;z-index:1;background:transparent}.hig-dialog-spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center}.hig-dialog-spinner-content-start[_ngcontent-%COMP%]{margin-top:10px;place-content:start}.no-header-text.no-spinner[_ngcontent-%COMP%]   .hig-dialog-spinner-content-start[_ngcontent-%COMP%]{margin-top:0}.hig-dialog-spinner-content-center[_ngcontent-%COMP%]{place-content:center}.no-body-text.has-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{display:flex;height:32px;align-items:center}.no-header-text.no-spinner.has-icon[_ngcontent-%COMP%]   .body-text[_ngcontent-%COMP%]{display:flex;height:32px;align-items:center}.hig-dialog-icon[_ngcontent-%COMP%]{font-size:32px;color:#595959}.hig-radio-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:16px}.hig-radio-option-image[_ngcontent-%COMP%]{height:24px}.isLtr[_nghost-%COMP%]   .hig-radio-option-image[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hig-radio-option-image[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .hig-radio-option-image[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .hig-radio-option-image[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hig-radio-option-image[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .hig-radio-option-image[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.hig-radio-option-label[_ngcontent-%COMP%]{line-height:24px;font-size:16px}.hig-dialog-image-container[_ngcontent-%COMP%]{width:100%;padding-top:24px}.hig-dialog-image-container[_ngcontent-%COMP%]   .hig-dialog-image-shortcut-container[_ngcontent-%COMP%]{width:154px}.isLtr[_nghost-%COMP%]   .hig-dialog-image-container[_ngcontent-%COMP%]   .hig-dialog-image-shortcut-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hig-dialog-image-container[_ngcontent-%COMP%]   .hig-dialog-image-shortcut-container[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .hig-dialog-image-container[_ngcontent-%COMP%]   .hig-dialog-image-shortcut-container[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .hig-dialog-image-container[_ngcontent-%COMP%]   .hig-dialog-image-shortcut-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hig-dialog-image-container[_ngcontent-%COMP%]   .hig-dialog-image-shortcut-container[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .hig-dialog-image-container[_ngcontent-%COMP%]   .hig-dialog-image-shortcut-container[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.hig-dialog-image-container[_ngcontent-%COMP%]   .hig-dialog-image-shortcut-link[_ngcontent-%COMP%]{position:relative;font-size:0;line-height:0;color:transparent;cursor:grab;cursor:-webkit-grab}.hig-dialog-image-container[_ngcontent-%COMP%]   .hig-dialog-image-shortcut-link[_ngcontent-%COMP%]:active{cursor:grabbing;cursor:-webkit-grabbing}.hig-dialog-image-container[_ngcontent-%COMP%]   .hig-dialog-image[_ngcontent-%COMP%]{width:130px;height:130px}.hig-dialog-image-container[_ngcontent-%COMP%]   .hig-dialog-image-caption[_ngcontent-%COMP%]{text-align:center;margin:12px 0 0;color:#ffffffb3}.hig-dialog-image-container[_ngcontent-%COMP%]   .hig-dialog-image-description[_ngcontent-%COMP%]{margin:0}"]}),v})()},9082:(He,de,e)=>{"use strict";e.d(de,{Q:()=>h});var n=e(2316),i=e(20657),D=e(2281),y=e(30582),T=e(53616),r=e(84622),a=e(54364),s=e(1707);const p=["slider"];function l(u,o){if(1&u){const f=n.EpF();n.TgZ(0,"input",4),n.NdJ("ngModelChange",function(g){return n.CHM(f),n.oxw().inputValue=g})("focus",function(){return n.CHM(f),n.oxw().onTextFocus()})("blur",function(){return n.CHM(f),n.oxw().onTextBlur()})("change",function(g){return n.CHM(f),n.oxw().textChanged(g)})("input",function(g){return n.CHM(f),n.oxw().textInput(g)}),n.qZA()}if(2&u){const f=n.oxw();n.Q6J("disabled",f.disabled)("ngModel",f.inputValue),n.uIk("tabindex",f.tabindex)}}var t=(()=>{return(u=t||(t={})).Integer="integer",u.Decimal="decimal",u.Time="time",t;var u})();const w={[t.Integer]:/^-?\d*$/,[t.Decimal]:/^-?\d*\.*\d*$/,[t.Time]:/^-?\d*[:]?\d*$/};let h=(()=>{class u{constructor(f){this._min=0,this._max=100,this._step=1,this._default=void 0,this.disabled=!1,this.thumbLabel=!1,this.animating=!1,this._tickInterval=0,this._value=0,this.valueChange=new n.vpe,this.valueEntry=!1,this._formatTextAs=t.Integer,this.change=new n.vpe,this.input=new n.vpe,this.tabindex=void 0,this.sliderStep=0,this.inputValue=void 0,this.textFocused=!1,this.mouseDown=!1,this.initializing=!0,this.afterInit=!1,this.textValueValidation="",this.tabindex=parseInt(f,10),Number.isNaN(this.tabindex)&&(this.tabindex=void 0),this.realTabIndex="-1"}get min(){return this._min}set min(f){this._min=(0,i.su)(f,this._min)}get max(){return this._max}set max(f){this._max=(0,i.su)(f,this._max)}get step(){return this._step}set step(f){this._step=(0,i.su)(f,this._step),this.forceSliderTickUpdate()}get default(){return this._default}set default(f){this._default=(0,i.su)(f,this._default)}get tickInterval(){return this._tickInterval}set tickInterval(f){this._tickInterval="auto"===f?"auto":"number"==typeof f||"string"==typeof f?(0,i.su)(f,this._tickInterval):0,console.log("tickinterval: ",this._tickInterval),this.forceSliderTickUpdate()}get value(){return this._value}set value(f){this._value=(0,i.su)(f,this._value),setTimeout(()=>this.sliderMoved({source:this.slider,value:this.value}),0)}set formatTextAs(f){this._formatTextAs=t[f]||t.Integer}get formatTextAs(){return this._formatTextAs}ngOnInit(){}ngAfterViewInit(){this.afterInit=!0,setTimeout(()=>{this.forceSliderTickUpdate(),this.sliderMoved({source:this.slider,value:this.value})},0),setTimeout(()=>this.initializing=!1,100)}forceSliderTickUpdate(){this.afterInit&&this.slider&&(this.slider.step=this.step,this.sliderStep=this.step,this.slider._onMouseenter())}onTextFocus(){this.textFocused=!0}onTextBlur(){this.textFocused=!1}textChanged(f){let c=f.target.value;if(this.formatTextAs===t.Time){const I=D(c,"mm:ss");c=60*I.minutes()+I.seconds()+""}let g=0;this.formatTextAs===t.Decimal?(g=100*(parseFloat(c)||0),this.step&&(g=Math.round((g-100*this.min)/(100*this.step))*this.step+this.min)):(g=parseInt(c,10)||0,this.step&&(g=Math.round((g-this.min)/this.step)*this.step+this.min)),g=Math.min(this.max,Math.max(g,this.min)),this.value=g,this.sliderChanged({source:this.slider,value:this.value}),f.stopImmediatePropagation()}sliderChanged(f){this.valueChange.emit(this.value),this.change.emit(f)}sliderMoved(f){if(f&&void 0!==f.value){if("time"===this.formatTextAs){let c=D({seconds:0});c=c.second(f.value),this.inputValue=c.format("mm:ss")}else this.inputValue=f.value+"";this.textValueValidation=this.inputValue,this.input.emit(f)}}textInput(f){const g=f.target;g&&!(w[this.formatTextAs]||w[t.Integer]).test(g.value)?g.value=this.textValueValidation:this.textValueValidation=g.value,f.stopImmediatePropagation()}onKeyDown(f){this.default&&"Period"===f.code&&(this.value=this.default,this.sliderChanged({source:this.slider,value:this.value}))}}return u.\u0275fac=function(f){return new(f||u)(n.$8M("tabindex"))},u.\u0275cmp=n.Xpm({type:u,selectors:[["nv-hig-slider"]],viewQuery:function(f,c){if(1&f&&n.Gf(p,7),2&f){let g;n.iGM(g=n.CRH())&&(c.slider=g.first)}},hostVars:1,hostBindings:function(f,c){2&f&&n.Ikx("tabindex",c.realTabIndex)},inputs:{min:"min",max:"max",step:"step",default:"default",disabled:"disabled",thumbLabel:"thumbLabel",animating:"animating",tickInterval:"tickInterval",value:"value",valueEntry:"valueEntry",formatTextAs:"formatTextAs"},outputs:{valueChange:"valueChange",change:"change",input:"input"},decls:4,vars:15,consts:[["fxFlex","row","fxLayoutAlign","start start",1,"nv-hig"],["fxFlex","","nvMatSliderKeyboardFixup","",3,"min","max","step","disabled","thumbLabel","tickInterval","value","tabIndex","valueChange","input","change","mousedown","mouseup","keydown"],["slider",""],["type","text","fxFlex","none","class","slider-text-entry font-body2",3,"disabled","ngModel","ngModelChange","focus","blur","change","input",4,"ngIf"],["type","text","fxFlex","none",1,"slider-text-entry","font-body2",3,"disabled","ngModel","ngModelChange","focus","blur","change","input"]],template:function(f,c){1&f&&(n.TgZ(0,"div",0),n.TgZ(1,"mat-slider",1,2),n.NdJ("valueChange",function(I){return c.value=I})("input",function(I){return c.sliderMoved(I)})("change",function(I){return c.sliderChanged(I)})("mousedown",function(){return c.mouseDown=!0})("mouseup",function(){return c.mouseDown=!1},!1,n.Jf7)("keydown",function(I){return c.onKeyDown(I)}),n.qZA(),n.YNc(3,l,1,3,"input",3),n.qZA()),2&f&&(n.xp6(1),n.ekj("cdk-mouse-focused",c.textFocused)("nv-mouse-down",c.mouseDown)("hig-slider-no-animation",c.animating||c.initializing),n.Q6J("min",c.min)("max",c.max)("step",c.sliderStep)("disabled",c.disabled)("thumbLabel",c.thumbLabel)("tickInterval",c.tickInterval)("value",c.value)("tabIndex",c.tabindex),n.xp6(2),n.Q6J("ngIf",c.valueEntry))},directives:[y.yH,y.Wh,T.pH,r.n3,a.O5,s.Fj,s.JJ,s.On],styles:[".slider-text-entry[_ngcontent-%COMP%]{width:48px;height:23px;background-color:transparent;border:none;text-align:center;padding-bottom:2px;border-bottom:1px solid #636363;caret-color:#76b900}.isLtr[_nghost-%COMP%]   .slider-text-entry[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .slider-text-entry[_ngcontent-%COMP%]{margin:0 0 0 8px}html[dir=ltr][_ngcontent-%COMP%]   .slider-text-entry[_ngcontent-%COMP%]{--dummy: 0;margin:0 0 0 8px}.isRtl[_nghost-%COMP%]   .slider-text-entry[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .slider-text-entry[_ngcontent-%COMP%]{margin:0 8px 0 0}html[dir=rtl][_ngcontent-%COMP%]   .slider-text-entry[_ngcontent-%COMP%]{--dummy: 0;margin:0 8px 0 0}.slider-text-entry[_ngcontent-%COMP%]:disabled{opacity:.38}.slider-text-entry[_ngcontent-%COMP%]::selection{background-color:#76b900}.slider-text-entry[_ngcontent-%COMP%]:focus, .mat-slider[_ngcontent-%COMP%]:not(.mat-slider-disabled).cdk-focused ~ .slider-text-entry[_ngcontent-%COMP%]{padding-bottom:1px;border-bottom:2px solid #76b900;outline:none}"]}),u})()},85820:(He,de,e)=>{"use strict";e.d(de,{O:()=>x});var n=e(2316),i=e(22213),D=e(9729),m=e(11479);function y(E,P){if(1&E&&(n.TgZ(0,"span",18),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&E){const v=n.oxw();n.xp6(1),n.Oqu(n.xi3(2,1,v.data.headerText.text,v.data.translateValues))}}function T(E,P){1&E&&n._UZ(0,"mat-progress-spinner",19)}function r(E,P){if(1&E&&(n.TgZ(0,"div",20),n._UZ(1,"qrcode",21),n.qZA()),2&E){const v=n.oxw();n.xp6(1),n.Q6J("qrdata",v.data.image.url)("width",200)("errorCorrectionLevel","M")}}function a(E,P){if(1&E&&(n._UZ(0,"div",22),n.ALo(1,"translate")),2&E){const v=n.oxw();n.Q6J("innerHTML",v.data.bodyText.translated?v.data.bodyText.text:n.xi3(1,1,v.data.bodyText.text,v.data.bodyText.placeholders),n.oJD)}}function s(E,P){if(1&E&&(n.TgZ(0,"div",23),n.TgZ(1,"div",24),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.qZA()),2&E){const v=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,1,v.data.footerText.text))}}function p(E,P){if(1&E&&n._UZ(0,"img",28),2&E){const v=n.oxw(2).$implicit;n.Q6J("src",v.imageUrl,n.LSH)}}function l(E,P){if(1&E){const v=n.EpF();n.TgZ(0,"button",26),n.NdJ("click",function(){n.CHM(v);const C=n.oxw().$implicit;return n.oxw().onRadioButtonClick(C.value)}),n.YNc(1,p,1,1,"img",27),n._uU(2),n.ALo(3,"translate"),n.qZA()}if(2&E){const v=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf",v.imageUrl),n.xp6(1),n.hij(" ",n.lcZ(3,2,v.value)," ")}}function t(E,P){if(1&E&&(n.ynx(0),n.YNc(1,l,4,4,"button",25),n.BQk()),2&E){const v=P.$implicit;n.xp6(1),n.Q6J("ngIf",v)}}function w(E,P){if(1&E){const v=n.EpF();n.TgZ(0,"button",29),n.NdJ("click",function(){return n.CHM(v),n.oxw().onPrimaryButtonClick()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&E){const v=n.oxw();n.Q6J("disabled",v.data.primaryButton.isDisabled)("nvAutoFocus",v.autoFocusOnPrimaryButton),n.xp6(1),n.hij(" ",n.lcZ(2,3,v.data.primaryButton.text)," ")}}function h(E,P){if(1&E&&(n.ynx(0),n.GkF(1,30),n.BQk()),2&E){n.oxw();const v=n.MAs(20);n.xp6(1),n.Q6J("ngTemplateOutlet",v)}}function u(E,P){if(1&E&&(n.ynx(0),n.GkF(1,30),n.GkF(2,30),n.BQk()),2&E){n.oxw();const v=n.MAs(18),O=n.MAs(20);n.xp6(1),n.Q6J("ngTemplateOutlet",v),n.xp6(1),n.Q6J("ngTemplateOutlet",O)}}function o(E,P){if(1&E){const v=n.EpF();n.ynx(0),n.TgZ(1,"button",31),n.NdJ("click",function(){const _=n.CHM(v).$implicit;return n.oxw().onArgumentedButtonClick(_.id)}),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.BQk()}if(2&E){const v=P.$implicit;n.xp6(2),n.hij(" ",n.lcZ(3,1,v.text)," ")}}function f(E,P){if(1&E){const v=n.EpF();n.TgZ(0,"div",32),n._UZ(1,"mat-divider"),n.TgZ(2,"button",26),n.NdJ("click",function(){n.CHM(v);const C=n.oxw();return C.onLinkClick(C.data.link.url,C.data.link.shortUrl)}),n.TgZ(3,"span"),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.TgZ(6,"i",33),n._uU(7,"open_in_new"),n.qZA(),n.qZA(),n.qZA()}if(2&E){const v=n.oxw();n.xp6(4),n.Oqu(n.lcZ(5,1,v.data.link.text))}}function c(E,P){if(1&E){const v=n.EpF();n.TgZ(0,"button",31),n.NdJ("click",function(){return n.CHM(v),n.oxw(2).onSecondaryButtonClick()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&E){const v=n.oxw(2);n.xp6(1),n.hij(" ",n.lcZ(2,1,v.data.secondaryButton.text)," ")}}function g(E,P){if(1&E&&n.YNc(0,c,3,3,"button",34),2&E){const v=n.oxw();n.Q6J("ngIf",v.data.secondaryButton)}}function I(E,P){if(1&E){const v=n.EpF();n.TgZ(0,"button",31),n.NdJ("click",function(){return n.CHM(v),n.oxw(2).onCheckboxClick()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&E){const v=n.oxw(2);n.xp6(1),n.hij(" ",n.lcZ(2,1,v.data.checkbox.text)," ")}}function G(E,P){if(1&E&&n.YNc(0,I,3,3,"button",34),2&E){const v=n.oxw();n.Q6J("ngIf",v.data.checkbox)}}let x=(()=>{class E{constructor(v,O){this.injector=v,this.offDeviceLinkService=O,this.primaryButtonClick=new n.vpe,this.secondaryButtonClick=new n.vpe,this.radioButtonClick=new n.vpe,this.augmentedButtonClick=new n.vpe,this.data={},this.data=this.injector.get(i.WI,null)}get autoFocusOnPrimaryButton(){var v;return null===(v=this.data.autoFocusOnPrimaryButton)||void 0===v||v}static open(v,O){return O.maxWidth="100vw",(0,D.HO)(O,{threeQuarterSheet:!0}),v.open(E,O)}onPrimaryButtonClick(){this.primaryButtonClick.emit()}onSecondaryButtonClick(){this.secondaryButtonClick.emit()}onCheckboxClick(){this.data.checkboxState=!0,(this.data.checkbox.primaryActionInThreeQuarterSheet?this.primaryButtonClick:this.secondaryButtonClick).emit()}onRadioButtonClick(v){this.data.radioOptionSelected=v,this.radioButtonClick.emit(),this.primaryButtonClick.emit()}onLinkClick(v,O){this.offDeviceLinkService.open(v,{shortUrl:O})}onArgumentedButtonClick(v){this.augmentedButtonClick.emit(v)}}return E.\u0275fac=function(v){return new(v||E)(n.Y36(n.zs3),n.Y36(m.q))},E.\u0275cmp=n.Xpm({type:E,selectors:[["nv-hig-three-quarter-sheet"]],inputs:{data:"data"},outputs:{primaryButtonClick:"primaryButtonClick",secondaryButtonClick:"secondaryButtonClick",radioButtonClick:"radioButtonClick",augmentedButtonClick:"augmentedButtonClick"},decls:21,vars:12,consts:[["fxFlex","","fxLayout","row","nvSpatialNavigationContainer","",1,"main-dialog-sheet"],["fxLayout","column","fxLayoutAlign","space-between start",1,"content-container"],["fxLayout","column","fxLayoutGap","32px"],["class","content-header",4,"ngIf"],["fxLayout","row",1,"content-info"],["mode","indeterminate","diameter","48","color","accent",4,"ngIf"],["class","qrcode-container",4,"ngIf"],["fxFlex","","fxLayout","column","fxLayoutGap","16px"],["class","content-body",3,"innerHTML",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end end",4,"ngIf"],["fxLayout","column","fxLayoutGap","11px",1,"button-container"],[4,"ngFor","ngForOf"],["mat-button","","class","sentence-case",3,"disabled","nvAutoFocus","click",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["fxLayout","column","fxLayoutGap","36px",4,"ngIf"],["secondaryButton",""],["checkboxButton",""],[1,"content-header"],["mode","indeterminate","diameter","48","color","accent"],[1,"qrcode-container"],[3,"qrdata","width","errorCorrectionLevel"],[1,"content-body",3,"innerHTML"],["fxLayout","row","fxLayoutAlign","end end"],[1,"footer-text"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"click"],["class","prefix-image",3,"src",4,"ngIf"],[1,"prefix-image",3,"src"],["mat-button","",1,"sentence-case",3,"disabled","nvAutoFocus","click"],[3,"ngTemplateOutlet"],["mat-button","",1,"sentence-case",3,"click"],["fxLayout","column","fxLayoutGap","36px"],[1,"material-icons","link-icon"],["mat-button","","class","sentence-case",3,"click",4,"ngIf"]],template:function(v,O){if(1&v&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.YNc(3,y,3,4,"span",3),n.TgZ(4,"div",4),n.YNc(5,T,1,0,"mat-progress-spinner",5),n.YNc(6,r,2,3,"div",6),n.TgZ(7,"div",7),n.YNc(8,a,2,4,"div",8),n.qZA(),n.qZA(),n.qZA(),n.YNc(9,s,4,3,"div",9),n.qZA(),n.TgZ(10,"div",10),n.YNc(11,t,2,1,"ng-container",11),n.YNc(12,w,3,5,"button",12),n.YNc(13,h,2,1,"ng-container",13),n.YNc(14,u,3,2,"ng-container",14),n.YNc(15,o,4,3,"ng-container",11),n.YNc(16,f,8,3,"div",15),n.YNc(17,g,1,1,"ng-template",null,16,n.W1O),n.YNc(19,G,1,1,"ng-template",null,17,n.W1O),n.qZA(),n.qZA()),2&v){const C=n.MAs(18);n.xp6(3),n.Q6J("ngIf",O.data.headerText),n.xp6(2),n.Q6J("ngIf",O.data.showSpinner),n.xp6(1),n.Q6J("ngIf",null==O.data.image?null:O.data.image.url),n.xp6(2),n.Q6J("ngIf",O.data.bodyText),n.xp6(1),n.Q6J("ngIf",O.data.footerText),n.xp6(2),n.Q6J("ngForOf",O.data.radioButtonOptions),n.xp6(1),n.Q6J("ngIf",O.data.primaryButton&&!O.data.radioButtonOptions),n.xp6(1),n.Q6J("ngIf",null==O.data.checkbox?null:O.data.checkbox.primaryActionInThreeQuarterSheet),n.xp6(1),n.Q6J("ngIf",O.data.checkbox&&!O.data.checkbox.primaryActionInThreeQuarterSheet)("ngIfElse",C),n.xp6(1),n.Q6J("ngForOf",null==O.data.threeQuaterSheetData?null:O.data.threeQuaterSheetData.augmentedButtons),n.xp6(1),n.Q6J("ngIf",O.data.link)}},styles:['@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.main-dialog-sheet[_ngcontent-%COMP%]{background:#393939;max-height:100vh;width:100vw;height:100vh}.main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{padding:133px 112px 48px;width:1180px}.main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]{height:318px;word-break:break-word;display:flex;align-items:flex-end;font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:70px;line-height:82px;letter-spacing:.51px;font-weight:300}.main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-header.sentence-case[_ngcontent-%COMP%]{text-transform:lowercase}.main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-header.sentence-case[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}.isLtr[_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   div.content-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   div.content-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:32px}html[dir=ltr][_ngcontent-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   div.content-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{--dummy4: 0;margin-right:32px}.isRtl[_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   div.content-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   div.content-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:32px}html[dir=rtl][_ngcontent-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   div.content-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{--dummy4: 0;margin-left:32px}.isLtr[_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   div.content-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child, .isLtr   [_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   div.content-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{margin-right:0}html[dir=ltr][_ngcontent-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   div.content-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{--dummy4: 0;margin-right:0}.isRtl[_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   div.content-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child, .isRtl   [_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   div.content-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{margin-left:0}html[dir=rtl][_ngcontent-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   div.content-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{--dummy4: 0;margin-left:0}.main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-body[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:28px;line-height:39px;letter-spacing:.21px;font-weight:300}.main-dialog-sheet[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .qrcode-container[_ngcontent-%COMP%]{width:200px;height:200px}.main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{width:calc(100vw - 1180px);background:#191919;padding-top:374px}.isLtr[_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{padding-left:48px}html[dir=ltr][_ngcontent-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{--dummy1: 0;padding-left:48px}.isRtl[_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{padding-right:48px}html[dir=rtl][_ngcontent-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{--dummy1: 0;padding-right:48px}.isLtr[_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{padding-right:52px}html[dir=ltr][_ngcontent-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{--dummy2: 0;padding-right:52px}.isRtl[_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{padding-left:52px}html[dir=rtl][_ngcontent-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{--dummy2: 0;padding-left:52px}.main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:start;height:96px;border-radius:8px;white-space:normal;font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:28px;line-height:33px;letter-spacing:.25px;font-weight:300}.main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%]{width:48px;height:48px}.isLtr[_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%]{padding-left:12px}html[dir=ltr][_ngcontent-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%]{--dummy1: 0;padding-left:12px}.isRtl[_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%]{padding-right:12px}html[dir=rtl][_ngcontent-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%]{--dummy1: 0;padding-right:12px}.isLtr[_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%]{padding-right:28px}html[dir=ltr][_ngcontent-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%]{--dummy2: 0;padding-right:28px}.isRtl[_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%]{padding-left:28px}html[dir=rtl][_ngcontent-%COMP%]   .main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .prefix-image[_ngcontent-%COMP%]{--dummy2: 0;padding-left:28px}.main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i.link-icon[_ngcontent-%COMP%]{vertical-align:middle;padding:0 16px}.main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button.sentence-case[_ngcontent-%COMP%]{text-transform:lowercase}.main-dialog-sheet[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button.sentence-case[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}.main-dialog-sheet[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:28px;line-height:39px;letter-spacing:.21px;font-weight:300}']}),E})()},48919:(He,de,e)=>{"use strict";e.d(de,{h:()=>m});var n=e(20657),i=e(2316),D=e(52269);let m=(()=>{class y{constructor(r,a){this.element=r,this.spatialNavigationService=a,this._focusEnabled=!0}get focusEnabled(){return this._focusEnabled}set focusEnabled(r){this._focusEnabled=(0,n.Ig)(r)}ngAfterViewInit(){this.focusEnabled&&setTimeout(()=>{this.spatialNavigationService.enabled?this.spatialNavigationService.focusViaLastOrigin(this.element.nativeElement):this.element.nativeElement.focus()})}}return y.\u0275fac=function(r){return new(r||y)(i.Y36(i.SBq),i.Y36(D.j))},y.\u0275dir=i.lG2({type:y,selectors:[["","nvAutoFocus",""]],inputs:{focusEnabled:["nvAutoFocus","focusEnabled"]}}),y})()},94105:(He,de,e)=>{"use strict";e.d(de,{e:()=>c});var n=e(20657),i=e(79441),D=e(12702),m=e(15565),y=e(81134),T=e(33927),r=e(9170),a=e(67202),s=e(33353),p=e(20088),l=e(18293),t=e(22663),w=e(2316),h=e(52269),u=e(6484);let c=(()=>{class g{constructor(G,x,E,P){this.spatialNavigationService=G,this.elementRef=x,this.localeService=E,this.ngZone=P,this.spacingTop=0,this.spacingBottom=0,this.spacingLeft=0,this.spacingRight=0,this._disable=!1,this.destroy$=new i.xQ,this.navBeforeFocus=v=>{if(this.disable||!(v.target instanceof HTMLElement))return;const O=this.scrollerElement,C=this.orientation;if(!O||!C)return;const _=v.target;if(!O.contains(_))return;const F=O.getBoundingClientRect(),V=_.getBoundingClientRect();if(this.isVisibleInScroller(V,F,C))return;v.preventDefault();const b=this.calculateRequiredScrollAmount(V,F,C);if(0===b)return;const B=this.measureScrollOffset()+b,U=A=>{A.preventDefault(),A.stopImmediatePropagation()};O.addEventListener("keydown",U),this.spatialNavigationService.focusViaLastOrigin(_,{preventScroll:!0}),this.scrollToOffset(B),(0,D.H)(0,25,m.Z).pipe((0,T.U)(A=>this.measureScrollOffset()),(0,r.h)(A=>Math.abs(A-B)<1),(0,a.h)(!0),(0,s.L)(1e3,(0,y.of)(!1)),(0,p.P)(),(0,l.K)(A=>(0,y.of)(!1)),(0,t.R)(this.destroy$)).subscribe(A=>{O.removeEventListener("keydown",U)})}}get disable(){return this._disable}set disable(G){this._disable=(0,n.Ig)(G)}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.elementRef.nativeElement.addEventListener("navbeforefocus",this.navBeforeFocus)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete(),this.elementRef.nativeElement.removeEventListener("navbeforefocus",this.navBeforeFocus)}isVisibleInScroller(G,x,E){return"horizontal"===E&&G.left>=x.left&&G.right<=x.right||"vertical"===E&&G.top>=x.top&&G.bottom<=x.bottom}calculateRequiredScrollAmount(G,x,E){let P=0;return"horizontal"===E?(P=G.left<x.left?G.left-this.spacingLeft-x.left:G.right+this.spacingRight-x.right,this.localeService.isRTLLayoutEnabled&&(P*=-1)):P=G.top<x.top?G.top-this.spacingTop-x.top:G.bottom+this.spacingBottom-x.bottom,P}}return g.\u0275fac=function(G){return new(G||g)(w.Y36(h.j),w.Y36(w.SBq),w.Y36(u.OL),w.Y36(w.R0b))},g.\u0275dir=w.lG2({type:g,inputs:{spacingTop:"spacingTop",spacingBottom:"spacingBottom",spacingLeft:"spacingLeft",spacingRight:"spacingRight",disable:["disableFocusThenScroll","disable"]}}),g})()},8869:(He,de,e)=>{"use strict";e.d(de,{s:()=>T});var n=e(79441),i=e(22663),D=e(2316),m=e(52269),y=e(42791);let T=(()=>{class r{constructor(s,p,l){this.elementRef=s,this.spatialNavigationService=p,this.scroller=l,this.canFocusFirstChild=!0,this.destroy$=new n.xQ}get scrollPosition(){var s;return null===(s=this.scroller)||void 0===s?void 0:s.measureScrollOffset()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}onKeydownEvent(s){this.canFocusFirstChild&&(s.stopPropagation(),this.focusFirstChild())}focusFirstChild(){if(this.scroller){const s=this.scroller.elementRef.nativeElement;0===this.scrollPosition?this.spatialNavigationService.focusFirstChild(s):this.elementScrolledSub||this.scrollThenFocusFirstChild(s)}else this.spatialNavigationService.focusFirstChild(this.elementRef.nativeElement)}scrollThenFocusFirstChild(s){let p=this.scrollPosition;this.elementScrolledSub=this.scroller.elementScrolled().pipe((0,i.R)(this.destroy$)).subscribe(()=>{0===this.scrollPosition||this.scrollPosition>p?(0===this.scrollPosition&&this.spatialNavigationService.focusFirstChild(s),this.elementScrolledSub.unsubscribe(),this.elementScrolledSub=void 0):p=this.scrollPosition}),this.scroller.scrollToIndex(0,"auto")}}return r.\u0275fac=function(s){return new(s||r)(D.Y36(D.SBq),D.Y36(m.j),D.Y36(y.N7,8))},r.\u0275dir=D.lG2({type:r,selectors:[["","nvFocusBackToFirstChild",""]],hostBindings:function(s,p){1&s&&D.NdJ("keydown.escape",function(t){return p.onKeydownEvent(t)})},inputs:{canFocusFirstChild:"canFocusFirstChild"},exportAs:["nvFocusBackToFirstChild"]}),r})()},84622:(He,de,e)=>{"use strict";e.d(de,{xZ:()=>p,wh:()=>l,WS:()=>t,n3:()=>w,TN:()=>h,jB:()=>u});var n=e(2316),i=e(15644),D=e(32080),m=e(74058),y=e(37007),T=e(80221),r=e(53616),a=e(79243),s=e(1625);let p=(()=>{class o{constructor(c,g,I,G){this.el=c,this.radio=g,this.slide=I,this.check=G}keydownEvent(c){("Enter"===c.key||" "===c.key)&&(this.radio?this.radio._onInputInteraction(c):this.slide?(this.slide._inputElement.nativeElement.checked=!this.slide.checked,this.slide._onChangeEvent(c)):this.check?this.check._onInputClick(c):this.el.nativeElement.click(),c.preventDefault(),c.stopPropagation())}}return o.\u0275fac=function(c){return new(c||o)(n.Y36(n.SBq),n.Y36(i.U0,8),n.Y36(D.Rr,8),n.Y36(m.oG,8))},o.\u0275dir=n.lG2({type:o,selectors:[["","nvAddKeyboardActivate",""],["mat-slide-toggle"],["mat-radio-button"],["mat-checkbox"],["a",3,"href",""]],hostBindings:function(c,g){1&c&&n.NdJ("keydown",function(G){return g.keydownEvent(G)})}}),o})(),l=(()=>{class o{constructor(c){this.select=c}ngAfterViewInit(){!this.select||setTimeout(()=>{const c=this.select._handleKeydown.bind(this.select);this.select._handleKeydown=g=>{"Escape"===g.key&&this.select.panelOpen?(g.stopPropagation(),this.select.close()):(this.select.panelOpen||"Enter"===g.key||" "===g.key)&&c(g)}},150)}}return o.\u0275fac=function(c){return new(c||o)(n.Y36(y.gD))},o.\u0275dir=n.lG2({type:o,selectors:[["mat-select","nvMatSelectKeyboardFixup",""]]}),o})(),t=(()=>{class o{constructor(c){this.menu=c}ngAfterViewInit(){if(!this.menu||!this.menuTrigger)return;const c=this.menu._handleKeydown.bind(this.menu);this.menu._handleKeydown=g=>{"Escape"===g.key&&this.menuTrigger.menuOpen?(g.stopPropagation(),this.menuTrigger.closeMenu()):c(g)}}}return o.\u0275fac=function(c){return new(c||o)(n.Y36(T.VK))},o.\u0275dir=n.lG2({type:o,selectors:[["mat-menu","nvMatMenuKeyboardFixup","","menuTrigger",""]],inputs:{menuTrigger:"menuTrigger"}}),o})(),w=(()=>{class o{constructor(c){this.slider=c}ngAfterViewInit(){!this.slider||setTimeout(()=>{const c=this.slider._onKeydown.bind(this.slider);this.slider._onKeydown=g=>{"ArrowUp"!==g.key&&"ArrowDown"!==g.key&&c(g)}},150)}}return o.\u0275fac=function(c){return new(c||o)(n.Y36(r.pH))},o.\u0275dir=n.lG2({type:o,selectors:[["mat-slider","nvMatSliderKeyboardFixup",""]]}),o})(),h=(()=>{class o{constructor(c){this.chipList=c}ngAfterViewInit(){!this.chipList||setTimeout(()=>{const c=this.chipList._keydown.bind(this.chipList);this.chipList._keydown=g=>{"ArrowUp"!==g.key&&"ArrowDown"!==g.key&&"ArrowLeft"!==g.key&&"ArrowRight"!==g.key&&c(g)}},150)}}return o.\u0275fac=function(c){return new(c||o)(n.Y36(a.qn))},o.\u0275dir=n.lG2({type:o,selectors:[["mat-chip-list","nvMatChipListKeyboardFixup",""]]}),o})(),u=(()=>{class o{constructor(c){this.panelHeader=c}ngAfterViewInit(){!this.panelHeader||setTimeout(()=>{const c=this.panelHeader._keydown.bind(this.panelHeader);this.panelHeader._keydown=g=>{"ArrowUp"!==g.key&&"ArrowDown"!==g.key&&"ArrowLeft"!==g.key&&"ArrowRight"!==g.key&&c(g)}},150)}}return o.\u0275fac=function(c){return new(c||o)(n.Y36(s.yz))},o.\u0275dir=n.lG2({type:o,selectors:[["mat-expansion-panel-header","nvMatExpansionPanelHeaderKeyboardFixup",""]]}),o})()},6381:(He,de,e)=>{"use strict";e.d(de,{E:()=>D});var n=e(2316),i=e(11479);let D=(()=>{class m{constructor(T){this.offDeviceLinkService=T}onClick(T){const r=T.target;this.offDeviceLinkService.enabled&&r instanceof HTMLAnchorElement&&r.href&&(T.preventDefault(),this.offDeviceLinkService.open(r.href,{shortUrl:this.shortUrl}))}}return m.\u0275fac=function(T){return new(T||m)(n.Y36(i.q))},m.\u0275dir=n.lG2({type:m,selectors:[["","nvOffDeviceLink",""],["a","href",""],["","innerHTML",""]],hostBindings:function(T,r){1&T&&n.NdJ("click",function(s){return r.onClick(s)})},inputs:{shortUrl:"shortUrl"}}),m})()},47420:(He,de,e)=>{"use strict";e.d(de,{N:()=>y,b:()=>T});var n=e(20657),i=e(48919),D=e(2316),m=e(52269);let y=(()=>{class r{constructor(s,p,l){this.element=s,this.spatialNavigationService=p,this.ngZone=l,this.navigateFunction="grid",this.navigateAction="auto",this._containFocus=!0,this._captureAndRestore=!0,this._captureFocusForChild=!1,this._captureNoRestore=!1,this.navBeforeFocus=t=>{this.captureFocusForChild&&t.target===this.element.nativeElement&&(t.preventDefault(),this.spatialNavigationService.focusFirstChild(this.element.nativeElement))},this.navNoTarget=t=>{this.containFocus&&t.target===this.element.nativeElement&&t.preventDefault()},document.activeElement instanceof HTMLElement&&(this.previousFocusElement=document.activeElement)}get containFocus(){return this._containFocus}set containFocus(s){this._containFocus=(0,n.Ig)(s)}get captureAndRestore(){return this._captureAndRestore}set captureAndRestore(s){this._captureAndRestore=(0,n.Ig)(s)}get captureFocusForChild(){return this._captureFocusForChild}set captureFocusForChild(s){this._captureFocusForChild=(0,n.Ig)(s),this.updateTabIndex()}get captureNoRestore(){return this._captureNoRestore}set captureNoRestore(s){this._captureNoRestore=(0,n.Ig)(s)}ngAfterContentInit(){this.spatialNavigationService.setNavigationContainerCssStyles(this.element.nativeElement,this.navigateFunction,this.navigateAction),this.updateTabIndex()}ngAfterViewInit(){!this.autoFocusChildren.some(p=>p.focusEnabled)&&(this.captureAndRestore||this.captureNoRestore)&&this.spatialNavigationService.focusFirstChild(this.element.nativeElement),this.ngZone.runOutsideAngular(()=>{this.element.nativeElement.addEventListener("navbeforefocus",this.navBeforeFocus),this.element.nativeElement.addEventListener("navnotarget",this.navNoTarget)})}ngOnDestroy(){this.captureAndRestore&&this.previousFocusElement&&this.spatialNavigationService.restoreFocusTo(this.previousFocusElement),this.element.nativeElement.removeEventListener("navbeforefocus",this.navBeforeFocus),this.element.nativeElement.removeEventListener("navnotarget",this.navNoTarget)}updateTabIndex(){this.element&&(this.element.nativeElement.tabIndex=this.captureFocusForChild?0:-1)}}return r.\u0275fac=function(s){return new(s||r)(D.Y36(D.SBq),D.Y36(m.j),D.Y36(D.R0b))},r.\u0275dir=D.lG2({type:r,selectors:[["","nvSpatialNavigationContainer",""]],contentQueries:function(s,p,l){if(1&s&&D.Suo(l,i.h,5),2&s){let t;D.iGM(t=D.CRH())&&(p.autoFocusChildren=t)}},inputs:{navigateFunction:"navigateFunction",navigateAction:"navigateAction",containFocus:"containFocus",captureAndRestore:"captureAndRestore",captureFocusForChild:"captureFocusForChild",captureNoRestore:"captureNoRestore"}}),r})(),T=(()=>{class r{constructor(s,p){this.element=s,this.spatialNavigationService=p,this.navigateFunction="grid",this.navigateAction="auto"}ngAfterContentInit(){this.spatialNavigationService.setNavigationContainerCssStyles(this.element.nativeElement,this.navigateFunction,this.navigateAction)}}return r.\u0275fac=function(s){return new(s||r)(D.Y36(D.SBq),D.Y36(m.j))},r.\u0275dir=D.lG2({type:r,selectors:[["","nvSpatialNavigationGroup",""]],inputs:{navigateFunction:"navigateFunction",navigateAction:"navigateAction"}}),r})()},59756:(He,de,e)=>{"use strict";e.d(de,{J:()=>y});var n=e(94105),i=e(2316),D=e(52269),m=e(6484);let y=(()=>{class T extends n.e{constructor(a,s,p,l){super(s,a,p,l)}get scrollOrientation(){return this.orientation}set scrollOrientation(a){if("horizontal"!==a&&"vertical"!==a)throw new Error("Invalid scroll orientation: "+a);this.orientation=a}ngAfterViewInit(){super.ngAfterViewInit();let a=this.elementRef.nativeElement;do{if(this.spatialNavigationService.isScrollContainer(a)){this.scrollerElement=a;break}a=a.parentElement}while(a)}measureScrollOffset(){return"horizontal"===this.orientation?this.scrollerElement.scrollLeft:this.scrollerElement.scrollTop}scrollToOffset(a,s){this.scrollerElement.scrollTo({top:"vertical"===this.orientation?a:void 0,left:"horizontal"===this.orientation?a:void 0,behavior:null!=s?s:"smooth"})}}return T.\u0275fac=function(a){return new(a||T)(i.Y36(i.SBq),i.Y36(D.j),i.Y36(m.OL),i.Y36(i.R0b))},T.\u0275dir=i.lG2({type:T,selectors:[["","nvSpatialNavigationFocusThenScroll",""]],inputs:{scrollOrientation:"scrollOrientation"},features:[i.qOj]}),T})()},19741:(He,de,e)=>{"use strict";e.d(de,{e:()=>T});var n=e(94105),i=e(2316),D=e(42791),m=e(52269),y=e(6484);let T=(()=>{class r extends n.e{constructor(s,p,l,t,w){super(p,t,l,w),this.scroller=s}get orientation(){return this.scroller.orientation}get scrollerElement(){return this.scroller.getElementRef().nativeElement}measureScrollOffset(){return this.scroller.measureScrollOffset()}scrollToOffset(s,p){this.scroller.scrollToOffset(s,p)}}return r.\u0275fac=function(s){return new(s||r)(i.Y36(D.N7),i.Y36(m.j),i.Y36(y.OL),i.Y36(i.SBq),i.Y36(i.R0b))},r.\u0275dir=i.lG2({type:r,selectors:[["","nvSpatialNavigationVirtualScroll",""],["cdk-virtual-scroll-viewport","nvSpatialNavigationContainer","","navigateAction","focus"],["cdk-virtual-scroll-viewport","nvSpatialNavigationGroup","","navigateAction","focus"]],features:[i.qOj]}),r})()},12204:(He,de,e)=>{"use strict";e.d(de,{e:()=>r});var n=e(79441),i=e(80226),D=e(22663),m=e(2316),y=e(51606),T=e(52269);class r{constructor(s,p,l){this.focusMonitor=s,this.elementRef=p,this.spatialNavigationService=l,this.destroy$=new n.xQ,this.spatialNavigationEnabled=this.spatialNavigationService.enabled}static get topFocusTrap(){const s=r.focusTraps,p=s.length;return p>0?s[p-1]:void 0}ngAfterViewInit(){this.elementRef&&this.spatialNavigationEnabled&&(this.elementRef.nativeElement.tabIndex=0,r.focusTraps.push(this.elementRef.nativeElement),r.focusTrapsUpdated$.next(),r.focusTrapsUpdated$.asObservable().pipe((0,D.R)(this.destroy$)).subscribe(()=>{r.topFocusTrap===this.elementRef.nativeElement?this.startFocusMonitor(this.elementRef.nativeElement):this.focusMonitor.stopMonitoring(this.elementRef.nativeElement)}))}ngOnDestroy(){this.elementRef&&this.spatialNavigationEnabled&&(this.removeFocusTrap(this.elementRef.nativeElement),r.focusTrapsUpdated$.next()),this.destroy$.next(!0),this.destroy$.complete()}startFocusMonitor(s){this.focusMonitor.monitor(s,!0).pipe((0,D.R)(this.destroy$)).subscribe(p=>{var l;p?document.activeElement instanceof HTMLElement&&(this.lastFocusedElement=document.activeElement):null===(l=this.lastFocusedElement)||void 0===l||l.focus()})}removeFocusTrap(s){const p=r.focusTraps.indexOf(s);p>-1&&r.focusTraps.splice(p,1)}}r.focusTraps=new Array,r.focusTrapsUpdated$=new i.t(1),r.\u0275fac=function(s){return new(s||r)(m.Y36(y.tE),m.Y36(m.SBq),m.Y36(T.j))},r.\u0275dir=m.lG2({type:r,selectors:[["","nvTrapFocus",""]]})},60772:(He,de,e)=>{"use strict";e.d(de,{i:()=>D});const D=new(e(2316).OlP)("NV_HIG_CONFIG")},11479:(He,de,e)=>{"use strict";e.d(de,{q:()=>r});var n=e(77599),i=e(85820),D=e(60772),m=e(2316),y=e(76322),T=e(22213);let r=(()=>{class a{constructor(p,l,t){this.matBottomSheet=l,this.matDialog=t,this._enabled=!1,this.config=null==p?void 0:p.offDeviceLinkConfig,this.tvMode=!!(null==p?void 0:p.tvMode)}get enabled(){return this._enabled}enable(){window.open=(p,l,t,w)=>(p&&this.open(p),null),this._enabled=!0}open(p,l){var t,w;if(!this.config)throw new Error("Off device link configuration is missing!");if(this._enabled){let h=!1;if(this.matDialog.openDialogs.length>0&&this.matDialog.openDialogs[this.matDialog.openDialogs.length-1].componentInstance instanceof i.O&&(h=!0),h){const u=i.O.open(this.matDialog,{data:{headerText:{text:null!==(t=null==l?void 0:l.shortUrl)&&void 0!==t?t:p},bodyText:{text:this.config.title},primaryButton:{text:this.config.primaryButtonText},image:{url:p}}});u.componentInstance.primaryButtonClick.subscribe(()=>{u.close()})}else{const u=n.A.open(this.matBottomSheet,{data:{headerText:{text:this.config.title},bodyText:{text:null!==(w=null==l?void 0:l.shortUrl)&&void 0!==w?w:p},primaryButton:{text:this.config.primaryButtonText},link:{url:p,text:null==l?void 0:l.shortUrl}}},this.tvMode);u.instance.primaryButtonClick.subscribe(()=>{u.dismiss()})}}else window.open(p,"_blank")}}return a.\u0275fac=function(p){return new(p||a)(m.LFG(D.i,8),m.LFG(y.ch),m.LFG(T.uw))},a.\u0275prov=m.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},52269:(He,de,e)=>{"use strict";e.d(de,{j:()=>p});var n=e(99652),i=e(58640),D=e(89919),m=e(82516),y=e(81134),T=e(85816),r=e(60772),a=e(2316),s=e(51606);let p=(()=>{class l{constructor(w,h,u,o,f){var c;this.focusMonitor=h,this.checker=u,this.inputModalityService=o,this.ngZone=f,this.spatialNavigation=void 0,this.navigate=void 0,this._enabled=!1,this.config=null!==(c=null==w?void 0:w.spatialNavigationConfig)&&void 0!==c?c:{},this.spatialNavigation=window.__spatialNavigation__,this.spatialNavigation&&(this.navigate=window.navigate),this.enable(!1)}get enabled(){return this._enabled}get lastFocusOrigin(){return this._lastFocusOrigin}setNavigationContainerCssStyles(w,h,u){!this.enabled||(w.style.setProperty("--spatial-navigation-contain","contain"),w.style.setProperty("--spatial-navigation-function",h),w.style.setProperty("--spatial-navigation-action",u),"focus"===u&&w.style.setProperty("scroll-behavior","smooth"))}enable(w){this._enabled=w,this.activateInternal(w),this.enabled?this.ngZone.runOutsideAngular(()=>{this.inputModalitySubscription=this.inputModalityService.inputModalityChanged$.subscribe(h=>{switch(h){case n.q.Keyboard:case n.q.Gamepad:this._lastFocusOrigin="keyboard";break;case n.q.Mouse:this._lastFocusOrigin="mouse";break;case n.q.Touch:this._lastFocusOrigin="touch"}})}):this.inputModalitySubscription&&(this.inputModalitySubscription.unsubscribe(),this._lastFocusOrigin=null)}activateInternal(w){this.spatialNavigation&&(this.spatialNavigation.keyMode=w?"ARROW":"NONE")}activate(w){!this.enabled||this.activateInternal(w)}setStartingPoint(w){if(!this.enabled||!this.spatialNavigation)return;if(!w)return void this.spatialNavigation.setStartingPoint(null);const h=w.getBoundingClientRect();this.spatialNavigation.setStartingPoint(h.x+h.width/2,h.y+h.height/2)}getFirstFocusableChild(w){const h=w.children;for(let u=0;u<h.length;u++){const o=h[u];let f=null;if(f=o.nodeType===Node.ELEMENT_NODE&&this.checker.isFocusable(o)?o:this.getFirstFocusableChild(o),f)return f}return null}focusFirstChild(w){this.enabled&&w&&setTimeout(()=>{let h=null;h=w.querySelector("[cdkFocusInitial]"),(!h||!this.checker.isFocusable(h))&&(h=this.getFirstFocusableChild(w)),this.focusViaLastOrigin(h)},0)}restoreFocusTo(w){this.enabled&&w&&setTimeout(()=>{this.focusViaLastOrigin(w)},0)}focusViaLastOrigin(w,h){var u;this.enabled&&w&&document.activeElement!==w&&(this.setStartingPoint(null),this.focusMonitor.focusVia(w,null!==(u=this._lastFocusOrigin)&&void 0!==u?u:"keyboard",h))}isScrollContainer(w){var h,u;return!(!this.enabled||null===(u=null===(h=this.spatialNavigation)||void 0===h?void 0:h.isScrollContainer(w))||void 0===u)&&u}onClick(w){return(0,i.P)(()=>(w instanceof HTMLAnchorElement&&(w.tabIndex=0),(0,D.T)((0,m.R)(w,"click"),(0,m.R)(w,"keydown")).pipe((0,T.zg)(h=>h instanceof MouseEvent||"Enter"===h.key||" "===h.key?(0,y.of)(h):(0,y.of)(void 0)))))}isDefaultFocusRequired(){return this.enabled&&!!this.config.isDefaultFocusRequired}}return l.\u0275fac=function(w){return new(w||l)(a.LFG(r.i,8),a.LFG(s.tE),a.LFG(s.ic),a.LFG(n.b),a.LFG(a.R0b))},l.\u0275prov=a.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},22573:(He,de,e)=>{"use strict";e.d(de,{s$:()=>Z.s,hp:()=>fe,iN:()=>$.i,TX:()=>j,AV:()=>t.A,qA:()=>L.q,jr:()=>ue.j,av:()=>K.av});var n=e(54364),i=e(53882),D=e(2316),m=e(66660),y=e(22213),T=e(52529),r=e(1124),a=e(71570),s=e(58283),p=e(84607),l=e(71258),t=e(77599),w=e(6484),h=e(25219),u=e(85820),o=e(47420),f=e(84622),c=e(1707),g=e(53616),I=e(80181),G=e(70781),x=e(74058),E=e(15644),P=e(76322),v=e(51606);const O=[c.u5,g.KP,I.Cq,G.ot,T.Ps,E.Fk,x.p9,P._r,y.Is,v.rt];let C=(()=>{class W{}return W.\u0275fac=function(ie){return new(ie||W)},W.\u0275mod=D.oAB({type:W}),W.\u0275inj=D.cJS({imports:[[...O],c.u5,g.KP,I.Cq,G.ot,T.Ps,E.Fk,x.p9,P._r,y.Is,v.rt]}),W})();var _=e(6381),F=e(12204),V=e(48919),B=e(89460),U=e(30582),A=e(772);let se={provide:D.ip1,useFactory:function(W,te){return()=>function(W,te){return W.addSvgIconSetLiteral(te.bypassSecurityTrustHtml('<svg width="0" height="0" class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs/><symbol id="account_circle" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2a7.2 7.2 0 0 1-6-3.22c.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08a7.2 7.2 0 0 1-6 3.22z"/></symbol><symbol id="add" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></symbol><symbol id="add_square" viewBox="0 0 44 44"><path d="M31.11 8A4.896 4.896 0 0 1 36 12.89v18.22A4.896 4.896 0 0 1 31.11 36H12.89A4.896 4.896 0 0 1 8 31.11V12.89A4.896 4.896 0 0 1 12.89 8h18.22Zm0 1.956H12.89a2.938 2.938 0 0 0-2.934 2.935v18.218a2.938 2.938 0 0 0 2.935 2.935h18.218a2.937 2.937 0 0 0 2.935-2.935V12.891a2.937 2.937 0 0 0-2.935-2.935ZM22 16a1 1 0 0 1 1 1v4h4a1 1 0 0 1 0 2h-4v4a1 1 0 0 1-2 0v-4h-4a1 1 0 0 1 0-2h4v-4a1 1 0 0 1 1-1Z"/></symbol><symbol id="alert_circle" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></symbol><symbol id="analytics" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path fill="none" d="M7 12h2v5H7zm4 2h2v3h-2zm4-7h2v10h-2z"/><path d="M3 3v18h18V3H3zm6 14H7v-5h2v5zm4 0h-2v-3h2v3zm0-5h-2v-2h2v2zm4 5h-2V7h2v10z"/></symbol><symbol id="arrow_down" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"/></symbol><symbol id="arrow_left" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M20 11H7.8l5.6-5.6L12 4l-8 8 8 8 1.4-1.4L7.8 13H20v-2z"/></symbol><symbol id="arrow_right" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"/></symbol><symbol id="arrow_up" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"/></symbol><symbol id="audio" viewBox="0 0 24 24"><path d="M1 18h6v3H1v-3Zm8 0h6v3H9v-3Zm8 0h6v3h-6v-3ZM1 13h6v3H1v-3Zm8 0h6v3H9v-3Zm8 0h6v3h-6v-3ZM9 8h6v3H9V8Zm8 0h6v3h-6V8ZM9 3h6v3H9V3Z"/></symbol><symbol id="backspace" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z"/></symbol><symbol id="bandaid" viewBox="0 0 512 512"><path d="M259.2 304c-6.4 0-11.2 4.8-11.2 11.2s4.8 11.2 11.2 11.2c6.4 0 11.2-4.8 11.2-11.2s-4.8-11.2-11.2-11.2zm6.4-107.2c0-6.4-4.8-11.2-11.2-11.2s-11.2 4.8-11.2 11.2c0 6.4 4.8 11.2 11.2 11.2 4.8 0 11.2-4.8 11.2-11.2zm22.4 80c-6.4 0-11.2 4.8-11.2 11.2s4.8 11.2 11.2 11.2c6.4 0 11.2-4.8 11.2-11.2s-4.8-11.2-11.2-11.2zm-91.2-35.2c-6.4 0-11.2 4.8-11.2 11.2s4.8 11.2 11.2 11.2c6.4 0 11.2-4.8 11.2-11.2 0-4.8-4.8-11.2-11.2-11.2zm28.8-27.2c-6.4 0-11.2 4.8-11.2 11.2s4.8 11.2 11.2 11.2c6.4 0 11.2-4.8 11.2-11.2s-4.8-11.2-11.2-11.2zm3.2 59.2c-6.4 0-11.2 4.8-11.2 11.2s4.8 11.2 11.2 11.2c6.4 0 11.2-4.8 11.2-11.2s-4.8-11.2-11.2-11.2zm88-3.2c6.4 0 11.2-4.8 11.2-11.2s-4.8-11.2-11.2-11.2c-6.4 0-11.2 4.8-11.2 11.2s4.8 11.2 11.2 11.2zm-32-54.4c-6.4 0-11.2 4.8-11.2 11.2s4.8 11.2 11.2 11.2c6.4 0 11.2-4.8 11.2-11.2 0-4.8-4.8-11.2-11.2-11.2zM256 267.2c6.4 0 11.2-4.8 11.2-11.2s-4.8-11.2-11.2-11.2c-6.4 0-11.2 4.8-11.2 11.2s4.8 11.2 11.2 11.2zm6.4 88-104-104 94.4-94.4 104 104c-32 32-64 62.4-94.4 94.4zm-115.2-96 105.6 105.6-1.6 1.6-46.4 46.4c-17.6 17.6-43.2 17.6-60.8 0-16-14.4-30.4-28.8-44.8-43.2-17.6-17.6-17.6-43.2 0-60.8l46.4-46.4c0-1.6 1.6-3.2 1.6-3.2zm217.6-6.4L259.2 147.2l1.6-1.6 46.4-46.4c17.6-17.6 43.2-17.6 60.8 0 16 14.4 30.4 30.4 46.4 44.8 17.6 17.6 17.6 43.2 0 59.2l-48 48s0 1.6-1.6 1.6z"/></symbol><symbol id="battery_boost" viewBox="0 0 768 768"><path d="M286.68 287.76v64.944l95.52-64.944 96.288 64.944V287.76L382.2 224.352z"/><path d="M286.68 398.376v64.92l95.52-64.92 96.288 64.92v-64.92L382.2 334.968z"/><path d="M286.68 510.504v64.968l95.52-64.968 96.288 64.968v-64.968L382.2 447.096z"/><path d="M383.16 32.328 78.576 208.176v351.672l304.56 175.8 304.536-175.8V208.176L383.16 32.328zm127.152 559.8c0 7.824-6.384 14.232-14.256 14.232H269.808c-7.872 0-14.256-6.408-14.256-14.232v-371.64c0-7.872 6.384-14.232 14.256-14.232h51.984v-45.84h122.28v45.84h51.984c7.872 0 14.256 6.384 14.256 14.232v371.64z"/></symbol><symbol id="battery_charging" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M17 4h-3V2h-4v2H7v18h10V4zm-6 16v-5.5H9L13 7v5.5h2L11 20z"/></symbol><symbol id="bell" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V2.5h-3v2.18C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></symbol><symbol id="blank" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/></symbol><symbol id="broadcast" viewBox="0 0 24 24"><path d="M12 10a2 2 0 0 1 1.53 3.29L16.7 22h-2.13L12 14.93 9.43 22H7.3l3.17-8.71A2 2 0 0 1 12 10zm0-2a4 4 0 0 0-4 4c0 .5.1 1 .28 1.46l-.88 2.4A6.026 6.026 0 0 1 6 12a6 6 0 1 1 12 0c0 1.47-.53 2.81-1.4 3.86l-.88-2.4C15.9 13 16 12.5 16 12a4 4 0 0 0-4-4zm0-4a8 8 0 0 0-8 8c0 2.36 1 4.5 2.64 5.94l-.72 2A10.005 10.005 0 0 1 2 12C2 6.477 6.477 2 12 2s10 4.477 10 10c0 3.23-1.54 6.11-3.92 7.94l-.72-2C19 16.5 20 14.36 20 12a8 8 0 0 0-8-8z"/></symbol><symbol id="browser_disk_drive_removable" viewBox="0 0 24 24"><path d="M2 8v8h20V8H2zm2 5v-2h10v2H4zm14 1c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></symbol><symbol id="browser_diskdrive" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M2 8v8h20V8H2zm16 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></symbol><symbol id="browser_diskdrive_network" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M21 13V5H3v8h8v3H9v1H3v2h6v1h6v-1h6v-2h-6v-1h-2v-3h8zm-4-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"/></symbol><symbol id="browser_nav_up" viewBox="0 0 24 24"><path d="M12 22C6.5 22 2 17.5 2 12S6.5 2 12 2s10 4.5 10 10-4.5 10-10 10zm0-15-5 5h3v4h4v-4h3l-5-5z"/></symbol><symbol id="carrot_down" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m7 10 5 5 5-5H7z"/></symbol><symbol id="carrot_up" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m7 14 5-5 5 5H7z"/></symbol><symbol id="check" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></symbol><symbol id="check_circle" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></symbol><symbol id="chevron_down" viewBox="0 0 768 768"><path d="M237.12 274.56 384 421.44l146.88-146.88L576 320 384 512 192 320l45.12-45.44z"/></symbol><symbol id="chevron_left" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"/></symbol><symbol id="chevron_right" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z"/></symbol><symbol id="chevron_up" viewBox="0 0 768 768"><path d="M237.12 493.12 384 346.56l146.88 146.56L576 448 384 256 192 448l45.12 45.12z"/></symbol><symbol id="close" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M19 6.4 17.6 5 12 10.6 6.4 5 5 6.4l5.6 5.6L5 17.6 6.4 19l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6L19 6.4z"/></symbol><symbol id="cloud_download" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"/></symbol><symbol id="cloud_upload" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/></symbol><symbol id="comment" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M2 2h19.99L22 22l-4-4H2z"/></symbol><symbol id="content_paste" viewBox="0 0 768 768"><path d="M608 640H160V128h64v96h320v-96h64zM384 64c17.673 0 32 14.327 32 32s-14.327 32-32 32c-17.673 0-32-14.327-32-32s14.327-32 32-32zm224 0H474.24C460.8 26.88 425.6 0 384 0s-76.8 26.88-90.24 64H160c-35.346 0-64 28.654-64 64v512c0 35.346 28.654 64 64 64h448c35.346 0 64-28.654 64-64V128c0-35.346-28.654-64-64-64z"/></symbol><symbol id="copy_generic" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M16 1.9v2H4v12H2v-14h14ZM6 6h16v16H6V6Z"/></symbol><symbol id="death" viewBox="0 0 24 24"><path d="M20.85 15.92c-.1-.54-.44-.98-.9-1.22.43-1.37.66-3.13.66-5.34 0-4.03-3.92-7.48-8.73-7.48-4.81 0-8.64 3.33-8.64 7.48 0 2.19.23 3.94.65 5.3-.5.23-.88.69-.98 1.26-.17.94.47 1.84 1.44 2.01l2.32.4c.1.05.19.09.29.13l.53 2.48s1.27.93 4.45.93 4.39-.93 4.39-.93l.54-2.47c.13-.05.25-.1.38-.16l2.17-.38a1.73 1.73 0 0 0 1.43-2.01ZM9.56 14.56c-1.36 1.13-2.95 1.58-3.85.7-.9-.88-.67-2.66.59-3.89s3.23-1.3 4.13-.42c.91.87.46 2.51-.87 3.61Zm3.76 3.33c-.34.38.01-.05-1.43-.05s-.95.48-1.41.03c-.46-.45-.22-1.43-.1-1.8.11-.35.75-1.83 1.52-1.83.76 0 1.36 1.47 1.49 1.83.13.36.31 1.4-.07 1.82Zm4.82-2.64c-.9.88-2.49.43-3.85-.7-1.33-1.1-1.77-2.74-.87-3.62.9-.88 2.87-.81 4.13.42 1.27 1.24 1.5 3.02.59 3.9Z"/></symbol><symbol id="delete" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M6 21h12V7H6v14zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></symbol><symbol id="delete_forever" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M6 21h12V7H6v14zm2.46-9.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4h-3.5z"/></symbol><symbol id="desktop" viewBox="0 0 24 24"><path d="M14 2h10v20h-2v-2h-6v2h-2V2Zm7 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm-5 2v2h6V8h-6Zm0 4v2h6v-2h-6Zm-4-6v2H2v8h10v2h-2v2h2v2H6v-2h2v-2H0V6h12Z"/></symbol><symbol id="desktop_mac" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M23 2H1v16h9l-2 3v1h8v-1l-2-3h9V2zm-2 12H3V4h18v10z"/></symbol><symbol id="desktop_windows" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M23 2H1v16h9v2H8v2h8v-2h-2v-2h9V2zm-2 14H3V4h18v12z"/></symbol><symbol id="devices" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M4 6h18V4H2v13H0v3h14v-3H4V6zm20 2h-8v12h8V8zm-2 9h-4v-7h4v7z"/></symbol><symbol id="download" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M19 12v7H5v-7H3v9h18v-9h-2zm-6 .67 2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"/></symbol><symbol id="edit" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM21.41 6.34l-3.75-3.75-2.53 2.54 3.75 3.75 2.53-2.54z"/></symbol><symbol id="epic_games_logo" viewBox="0 0 22 25"><g id="Settings" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M2.615.053H19.42c1.343 0 1.838.507 1.838 1.88v16.58c0 .156 0 1.231-1.054 1.8-.703.378-3.452 1.543-8.248 3.495-.424.199-.628.25-.938.244-.348 0-.479-.047-.943-.244-4.792-2.015-7.54-3.18-8.243-3.496C.777 19.84.828 19.246.797 18.947a4.39 4.39 0 0 1-.02-.434V1.933c0-1.373.496-1.88 1.838-1.88ZM17.998 16.95l.003-.04v-.089l-.003-.04-.004-.037-.015-.074-.008-.033-.01-.034-.012-.033-.015-.03-.019-.033-.019-.03-.022-.032-.022-.03-.027-.026-.026-.03-.03-.025-.03-.026-.03-.019-.03-.022-.03-.018-.033-.019-.034-.018-.037-.019-.038-.015-.037-.019-.041-.014-.034-.01-.034-.012-.037-.01-.034-.012-.037-.011-.037-.011-.038-.008-.041-.01-.038-.012-.04-.007-.042-.011-.041-.011-.041-.012-.038-.007-.033-.011-.034-.007-.03-.012-.03-.007-.045-.014-.041-.016-.037-.014-.03-.019-.034-.018-.026-.026-.016-.022-.018-.04-.004-.049v-.007l.004-.037.015-.033.022-.034.034-.03.026-.014.03-.015.034-.007.038-.008.04-.007h.083l.033.004.038.003.037.004.038.008.037.007.038.007.037.011.038.012.04.01.03.015.034.012.03.014.034.015.03.015.034.015.03.018.033.015.03.022.03.019.033.018.03.022.023-.03.019-.029.022-.03.023-.029.022-.033.019-.03.022-.03.023-.029.018-.03.023-.03.022-.029.02-.029.021-.034.023-.029.022-.03.019-.03.023-.029-.03-.022-.03-.022-.03-.022-.03-.019-.034-.022-.03-.018-.033-.019-.034-.018-.03-.015-.034-.019-.037-.014-.034-.015-.034-.015-.033-.01-.038-.016-.033-.007-.034-.011-.038-.011-.033-.008-.038-.007-.037-.008-.034-.007-.037-.007-.041-.004-.037-.008-.042-.003h-.037l-.042-.004-.04-.004h-.161l-.075.008-.038.003-.037.004-.034.008-.037.007-.034.007-.034.008-.03.007-.034.011-.037.015-.037.01-.034.016-.033.019-.034.014-.034.019-.03.018-.03.022-.03.023-.026.018-.03.026-.026.03-.026.025-.026.03-.023.03-.022.03-.019.032-.019.033-.015.034-.015.033-.014.033-.008.033-.012.034-.014.066-.004.037-.004.033-.004.037v.086l.004.04.004.037.004.037.007.033.008.037.011.03.011.033.011.03.015.025.019.033.019.03.018.026.023.026.023.025.025.026.027.026.026.023.03.018.03.022.033.019.03.018.038.019.034.018.037.015.038.015.037.014.041.015.034.011.033.011.034.011.037.008.034.011.037.01.038.008.037.011.038.008.04.01.039.008.04.011.038.008.037.01.034.008.034.011.03.008.026.007.045.019.037.015.034.014.03.015.03.022.026.022.019.026.015.037.004.044v.008l-.004.037-.012.033-.014.03-.023.025-.03.023-.026.014-.03.012-.034.007-.033.007-.038.007-.041.004h-.082l-.041-.004h-.038l-.037-.007-.042-.003-.037-.008-.037-.007-.038-.008-.034-.01-.037-.012-.037-.01-.034-.016-.034-.01-.033-.016-.034-.014-.034-.015-.03-.019-.033-.014-.03-.019-.034-.022-.03-.019-.033-.021-.03-.023-.034-.022-.03-.022-.023.03-.026.025-.022.03-.026.03-.023.025-.022.03-.026.03-.023.025-.026.03-.022.026-.027.03-.022.029-.022.026-.027.03-.022.029-.026.025-.023.03.03.026.026.022.03.022.03.023.03.022.03.022.03.019.03.018.034.019.03.018.033.018.034.015.033.018.034.015.034.015.037.015.034.01.037.012.034.015.038.01.037.012.034.007.037.011.037.008.038.007.075.015.037.004.038.007.04.004.038.003.037.004h.041l.038.004h.157l.037-.004.042-.004.037-.003.034-.004.037-.004.038-.007.033-.008.034-.007.037-.007.034-.011.038-.012.037-.01.037-.015.038-.015.034-.019.033-.015.034-.018.03-.022.03-.018.03-.023.026-.021.03-.027.022-.022.026-.025.023-.026.018-.03.023-.03.038-.059.015-.033.014-.03.015-.033.012-.037.007-.033.011-.037.008-.037.004-.04.004-.037Zm-2.625.74h.038v-.61h-1.468v-.458h1.303v-.573h-1.303v-.44h1.449V15h-2.163v2.69h2.144Zm-2.734 0h.037V15h-.767l-.019.029-.018.033-.023.03-.019.033-.018.03-.019.033-.022.03-.02.032-.018.03-.019.03-.022.032-.019.03-.018.033-.02.03-.021.033-.019.03-.02.03-.018.032-.018.03-.023.033-.018.03-.02.032-.018.03-.023.033-.018.03-.019.03-.019.032-.022.03-.019.033-.018.03-.019.033-.022.03-.019.032-.02.03-.018-.03-.018-.033-.023-.029-.019-.033-.018-.03-.019-.033-.018-.03-.023-.033-.019-.03-.018-.029-.02-.033-.018-.03-.023-.032-.018-.03-.019-.033-.018-.03-.02-.033-.022-.03-.018-.029-.019-.033-.02-.03-.021-.033-.02-.03-.018-.033-.018-.029-.02-.03-.022-.033-.018-.029-.019-.034-.019-.029-.019-.033-.022-.03-.019-.033-.018-.03h-.767v2.69h.71v-1.583l.023.03.019.033.022.03.019.033.022.03.019.033.023.03.018.033.023.03.018.033.023.03.019.033.022.03.019.033.022.03.019.032.023.03.022.033.019.03.022.034.018.03.023.032.019.03.022.033.02.03.021.033.02.03.021.033.02.03.022.033.018.03.023.033.019.03.022.033h.015l.019-.03.022-.033.019-.03.022-.03.02-.033.021-.03.02-.03.018-.032.023-.03.018-.03.023-.03.018-.032.023-.03.018-.03.02-.033.022-.03.018-.03.023-.032.018-.03.023-.03.019-.033.018-.03.023-.029.019-.034.022-.03.019-.029.022-.03.019-.033.018-.03.023-.03.019-.032.022-.03.019-.03.022-.033.019-.03v1.591h.685Zm-4.342-1.11.015.034h-.633l.015-.033.012-.034.015-.037.015-.033.011-.033.015-.034.015-.037.015-.033.011-.033.015-.034.015-.033.011-.037.015-.033.015-.034.011-.033.015-.033.015-.037L7.93 16l.012-.034.014-.033.015-.037.012-.034.015-.033.015.033.011.034.014.037.016.033.011.034.015.033.015.037.01.033.016.033.015.034.011.033.015.037.011.033.015.034.015.033.012.033.014.038.015.033.012.033.015.033.015.037.011.034Zm1.175 1.11h.037l-.015-.034-.014-.033-.015-.034-.012-.037-.015-.032-.015-.034-.014-.033-.03-.066-.015-.038-.015-.033-.012-.033-.015-.033-.015-.034-.015-.033-.014-.037-.016-.033-.03-.067-.01-.033-.016-.033-.015-.037-.015-.033-.015-.034-.03-.066-.015-.033-.01-.038-.016-.033-.015-.033-.015-.033-.015-.033-.015-.033-.015-.038-.014-.033-.012-.033-.014-.033-.016-.034-.015-.033-.015-.037-.015-.033-.03-.067-.01-.033-.016-.033-.015-.033-.014-.037-.03-.066-.016-.034-.014-.033-.012-.033-.015-.037-.015-.033-.015-.034-.015-.033-.015-.033-.015-.033-.015-.038-.01-.033-.015-.033-.016-.033-.015-.033-.015-.034-.015-.037-.015-.033-.015-.033-.01-.033-.016-.034-.015-.033-.014-.037-.016-.033-.015-.033-.015-.034-.014-.033-.012-.033-.015-.037-.015-.033-.015-.034-.015-.033h-.692l-.015.033-.015.034-.015.033-.011.037-.015.033-.015.033-.015.034-.015.033-.015.033-.015.037-.015.033-.011.034-.03.066-.015.033-.015.037-.015.034-.015.033-.015.033-.011.033-.015.034-.015.037-.03.066-.015.033-.015.034-.015.033-.01.037-.016.033-.015.033-.015.034-.015.033-.015.033-.015.037-.015.033-.011.033-.03.067-.015.033-.015.033-.015.037-.015.033-.015.034-.011.033-.015.033-.015.034-.015.037-.015.033-.015.033-.015.033-.015.033-.011.034-.015.037-.015.033-.015.033-.015.033-.015.034-.015.033-.015.037-.011.033-.03.067-.015.033-.015.033-.015.037-.015.033-.015.034-.011.033-.015.033-.015.034-.015.037-.015.033-.015.033-.03.066-.011.033-.015.037-.03.067-.015.033h.756l.015-.033.011-.033.015-.034.015-.037.011-.032.015-.034.015-.033.011-.033.015-.033.016-.034.01-.033.015-.037.016-.033.01-.034.016-.033h1.074l.015.033.011.034.015.033.015.037.011.033.015.034.015.033.011.033.03.066.011.033.015.037.015.034.012.033.014.033h.734Zm-3.278-.344.026-.022v-1.201H4.985v.54h.546v.335l-.03.019-.026.015-.033.014-.03.015-.034.015-.034.007-.037.012-.038.007-.037.007-.038.004-.04.004-.042.004h-.086l-.041-.004-.037-.004-.038-.008-.037-.007-.038-.011-.037-.011-.034-.015-.034-.015-.033-.014-.03-.019-.03-.018-.03-.023-.03-.022-.026-.022-.023-.026-.026-.026-.022-.025-.023-.03-.018-.03-.02-.029-.018-.033-.015-.034-.015-.037-.011-.03-.011-.032-.008-.034-.015-.066-.004-.037-.003-.033-.004-.037v-.085l.004-.037.003-.037.008-.041.008-.033.007-.037.011-.037.015-.033.011-.033.015-.034.02-.03.018-.032.019-.03.018-.026.023-.03.026-.025.022-.026.026-.022.027-.023.026-.021.03-.02.03-.018.03-.018.034-.015.033-.015.034-.01.033-.012.034-.007.037-.007.034-.004.038-.004h.078l.042.004.04.004.038.003.037.008.038.007.034.007.033.011.034.012.03.01.03.015.03.015.033.019.03.018.03.019.03.018.03.022.03.019.03.026.03.022.022-.03.026-.025.023-.03.026-.03.022-.03.023-.025.026-.03.023-.03.026-.03.022-.025.023-.03.026-.029.022-.026.023-.03.026-.029.022-.03.027-.025.022-.03-.03-.022-.03-.026-.03-.022-.03-.022-.03-.019-.03-.022-.033-.018-.03-.02-.033-.017-.03-.02-.034-.014-.034-.018-.034-.015-.033-.015-.034-.014-.034-.012-.03-.01-.033-.008-.034-.01L5.486 15l-.033-.007-.034-.007-.037-.008-.038-.007-.033-.004-.042-.007-.037-.004h-.038l-.04-.004-.042-.003h-.16l-.038.003-.038.004-.074.008-.038.007-.037.004-.037.007-.034.011-.038.007-.034.012-.033.007-.034.015-.037.01-.03.012-.037.018-.034.015-.034.015-.034.019-.033.018-.034.019-.03.018-.03.018-.03.023-.03.018-.03.022-.026.022-.03.026-.026.022-.026.026-.026.026-.023.026-.026.026-.023.026-.022.03-.022.029-.023.03-.038.059-.018.03-.019.029-.019.033-.015.033-.03.067-.014.033-.016.037-.01.033-.012.037-.01.033-.008.037-.012.037-.007.033-.004.037-.008.037-.003.041-.004.037v.037l-.003.04v.122l.003.037.004.037.003.037.004.034.008.037.003.033.008.037.011.033.008.037.011.033.007.033.015.034.012.03.015.032.015.034.014.033.015.033.02.03.018.033.019.03.018.03.023.029.019.029.022.026.022.03.023.025.026.026.026.026.026.023.027.025.026.023.026.022.03.022.03.022.03.022.03.019.03.018.034.019.03.018.033.019.034.014.033.015.034.015.038.014.033.012.034.014.034.011.037.008.034.011.037.007.034.008.037.007.037.007.038.004.037.004.038.004.04.003.038.004h.161l.042-.004.037-.003.041-.004.038-.004.04-.004.038-.003.037-.008.038-.007.033-.007.038-.008.034-.011.037-.01.034-.012.034-.011.033-.011.034-.015.037-.015.034-.015.037-.014.034-.02.034-.013.033-.02.034-.018.034-.018.03-.018.03-.019.03-.022.03-.019.03-.021.025-.02.03-.021Zm1.1-8.912V7.04H5.439V4.705h1.857V3.311h-3.26v9.31h3.259V11.23H5.438V8.435h1.857Zm9.311 2.444c0 .366-.184.536-.545.536h-.267c-.375 0-.58-.17-.58-.536V5.174c0-.366.205-.61.58-.61h.24c.44 0 .572.148.572.61v1.86l1.396.003V5.032c0-1.137-.592-1.712-1.756-1.712h-.696c-1.164 0-1.737.716-1.737 1.854v5.77c0 1.138.573 1.683 1.737 1.683h.71c1.164 0 1.742-.545 1.742-1.682V8.899h-1.396v1.98ZM11.95 12.62h1.396V3.31H11.95v9.31Zm-1.864-5.173c0 .372-.101.518-.44.518h-.49V4.562h.49c.338 0 .44.172.44.545v2.34ZM7.76 3.31v9.31h1.395V9.243h.704c1.088 0 1.625-.572 1.625-1.729V5.04c0-1.157-.537-1.729-1.625-1.729H7.76Zm6.983 17.698H7.295l3.724 1.389 3.724-1.389Z" id="path2-7" fill="#E8E8E8"/></g></symbol><symbol id="ethernet" viewBox="0 0 768 768"><path d="M224 480h64v96h64v-96h64v96h64v-96h64v96h64V288H480v-96H288v96H160v288h64v-96zM140.16 96h488c41.92 0 75.84 33.92 75.84 76.16v456c0 41.885-33.955 75.84-75.84 75.84h-488C97.92 704 64 670.08 64 628.16v-456C64 129.92 97.92 96 140.16 96z"/></symbol><symbol id="exit_to_app" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM21 3H3v6h2V5h14v14H5v-4H3v6h18V3z"/></symbol><symbol id="eye" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></symbol><symbol id="eye_off" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0zm0 0h24v24H0V0zm0 0h24v24H0V0zm0 0h24v24H0V0z"/><path d="M12 6.5c2.76 0 5 2.24 5 5 0 .51-.1 1-.24 1.46l3.06 3.06c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l2.17 2.17c.47-.14.96-.24 1.47-.24zM3.42 2.45 2.01 3.87l2.68 2.68A11.738 11.738 0 0 0 1 11.5C2.73 15.89 7 19 12 19c1.52 0 2.97-.3 4.31-.82l3.43 3.43 1.41-1.41L3.42 2.45zM12 16.5c-2.76 0-5-2.24-5-5 0-.77.18-1.5.49-2.14l1.57 1.57c-.03.18-.06.37-.06.57 0 1.66 1.34 3 3 3 .2 0 .38-.03.57-.07L14.14 16c-.65.32-1.37.5-2.14.5zm2.97-5.33a2.97 2.97 0 0 0-2.64-2.64l2.64 2.64z"/></symbol><symbol id="feedback" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M22 2H2.01L2 22l4-4h16V2zm-9 12h-2v-2h2v2zm0-4h-2V6h2v4z"/></symbol><symbol id="file" viewBox="0 0 24 24"><path d="M4.01 2 4 22h16V8l-6-6H4.01zM13 9V3.5L18.5 9H13z"/></symbol><symbol id="filter_list" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/></symbol><symbol id="folder" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M10 4H2v16h20V6H12l-2-2z"/></symbol><symbol id="folder_open" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M22 6H12l-2-2H2v16h20V6zm-2 12H4V8h16v10z"/></symbol><symbol id="fps" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M23 2H1v16h9v2H8v2h8v-2h-2v-2h9V2zm-2 14H3V4h18v12z"/><path d="M6 11h2V9H6V8h3V6H4v8h2v-3zm6 0h3V6h-5v8h2v-3zm0-3h1v1h-1V8zm8 1h-2V8h2V6h-4v5h2v1h-2v2h4V9z"/></symbol><symbol id="freestyle" viewBox="0 0 24 24"><path d="M12.3 9.4c-1.5 0-2.7 1.2-2.7 2.7 0 1.2-1.1 1.8-1.8 1.8.8 1.1 2.3 1.8 3.6 1.8 2 0 3.6-1.6 3.6-3.6 0-1.4-1.2-2.7-2.7-2.7zm10.697-5.383-6.364 6.364-2.475-2.475 6.364-6.364 2.475 2.475z"/><path d="M20 9v9H4V7h9l2-2H2v15h20V7l-2 2z"/></symbol><symbol id="fullscreen_exit" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/></symbol><symbol id="gallery" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M18 2v6H4v8H2V2h2l2 4h2L6 2h2l2 4h2l-2-4h2l2 4h2l-2-4h4Zm1 14.5V19H9l3-4 2 2.7 3-3.7 2 2.5Zm1-4.5H8v8h12v-8Zm2-2v12H6V10h16Z"/></symbol><symbol id="game_controller" viewBox="0 0 768 768"><path d="M652.8 272c-6.4-32-44.8-64-76.8-64 0-19.2-12.8-32-32-32h-64c-19.2 0-32 12.8-32 32H320c0-16-16-32-32-32h-64c-19.2 0-32 12.8-32 32-32 0-70.4 28.8-76.8 64C108.8 304 64 496 64 560c0 32 32 64 64 64s64-32 96-64 32-35.2 64-64c32-32 32-32 64-32h64c32 0 32 0 64 32l64 64c32 32 64 64 96 64s64-32 64-64c0-60.8-44.8-256-51.2-288zM320 358.4h-41.6V400h-44.8v-41.6H192v-44.8h41.6V272h44.8v41.6H320v44.8zM512 400c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64z"/></symbol><symbol id="game_controller_off" viewBox="0 0 768 768"><path d="M704 560c0 9.5-2.8 18.9-7.6 27.5L500 398.8c3.9.7 7.9 1.2 12 1.2 35.2 0 64-28.8 64-64s-28.8-64-64-64-64 28.8-64 64c0 5 .6 9.8 1.7 14.5L301.3 208H448c0-19.2 12.8-32 32-32h64c19.2 0 32 12.8 32 32 32 0 70.4 32 76.8 64S704 499.2 704 560zM146.9 224.6c-15.8 11.7-28.3 28.7-31.7 47.4C108.8 304 64 496 64 560c0 32 32 64 64 64s64-32 96-64 32-35.2 64-64c32-32 32-32 64-32h44.2m-110-105.6h-7.8V400h-44.8v-41.6H192v-44.8h41.6v-5.8M396.2 464l255 244.9 40.9-42.5-44.7-42.9L214.8 208 96.1 93.9l-40.9 42.5 91.7 88.1"/></symbol><symbol id="game_library" viewBox="0 0 768 768"><path d="M160 96v576h448V96H160zm352 400c-16 0-32-16-48-32l-32-32c-16-16-16-16-32-16h-32c-16 0-16 0-32 16l-32 32c-16 16-32 32-48 32s-32-16-32-32c0-32 22.4-128 25.6-144s22.4-32 38.4-32c0-9.6 6.4-16 16-16h32c9.6 0 16 6.4 16 16h64c0-9.6 6.4-16 16-16h32c9.6 0 16 6.4 16 16 16 0 35.2 16 38.4 32S544 432 544 464c0 16-16 32-32 32zM64 128h64v512H64V128zm576 0h64v512h-64V128z"/></symbol><symbol id="gamepad_b_hint" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#CF3C33"/><path d="M17.588 34V14.094h6.508c2.16 0 3.782.446 4.867 1.34 1.094.893 1.64 2.214 1.64 3.964 0 .93-.264 1.755-.793 2.475-.528.711-1.248 1.262-2.16 1.654 1.076.301 1.924.875 2.543 1.723.63.838.944 1.841.944 3.008 0 1.786-.58 3.19-1.737 4.21C28.243 33.49 26.607 34 24.492 34h-6.904Zm2.625-9.31v7.163h4.334c1.221 0 2.183-.314 2.885-.943.71-.638 1.066-1.513 1.066-2.625 0-2.397-1.303-3.596-3.91-3.596h-4.375Zm0-2.106h3.965c1.148 0 2.064-.287 2.748-.861.693-.575 1.039-1.354 1.039-2.338 0-1.094-.32-1.887-.957-2.38-.638-.5-1.609-.751-2.912-.751h-3.883v6.33Z" fill="#fff"/></symbol><symbol id="gamepad_blue_b" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#0B8ABC"/><path d="M16.836 34V14.094h6.973c2.415 0 4.247.465 5.496 1.394 1.248.92 1.873 2.274 1.873 4.06 0 .976-.25 1.837-.752 2.585-.502.738-1.199 1.28-2.092 1.627 1.02.255 1.823.77 2.406 1.545.593.774.889 1.722.889 2.843 0 1.915-.61 3.364-1.832 4.348-1.221.984-2.962 1.486-5.223 1.504h-7.738Zm4.102-8.668v5.373h3.513c.966 0 1.718-.228 2.256-.683.547-.465.82-1.103.82-1.915 0-1.822-.943-2.748-2.83-2.775h-3.76Zm0-2.898h3.035c2.069-.037 3.103-.862 3.103-2.475 0-.902-.264-1.55-.793-1.941-.52-.402-1.344-.602-2.474-.602h-2.872v5.018Z" fill="#fff"/></symbol><symbol id="gamepad_blue_rs" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#0B8ABC"/><path d="M15.631 27.269h-3.086v6.967H8.671V15.203h6.986c2.221 0 3.934.5 5.14 1.503 1.205 1.002 1.807 2.419 1.807 4.249 0 1.298-.28 2.383-.84 3.255-.55.862-1.39 1.551-2.517 2.065l4.068 7.778v.183h-4.158Zm-3.086-3.177h3.125c.973 0 1.726-.248 2.26-.745.534-.506.8-1.198.8-2.079 0-.897-.254-1.603-.761-2.117-.5-.514-1.27-.772-2.312-.772h-3.112zm22.766 5.15c0-.74-.258-1.307-.775-1.699-.517-.4-1.446-.82-2.79-1.255-1.342-.444-2.405-.88-3.189-1.307-2.135-1.168-3.202-2.74-3.202-4.72 0-1.028.284-1.943.852-2.744.577-.81 1.399-1.443 2.466-1.896 1.077-.453 2.282-.68 3.616-.68 1.343 0 2.54.249 3.59.746 1.05.488 1.864 1.18 2.44 2.078.586.898.879 1.917.879 3.059h-3.874c0-.872-.271-1.547-.814-2.026-.542-.488-1.304-.732-2.285-.732-.947 0-1.683.205-2.209.614-.525.401-.787.933-.787 1.595 0 .619.305 1.137.917 1.556.62.418 1.528.81 2.724 1.176 2.204.671 3.81 1.503 4.817 2.497 1.007.993 1.51 2.23 1.51 3.712 0 1.648-.615 2.942-1.846 3.883-1.231.932-2.888 1.399-4.971 1.399-1.447 0-2.764-.266-3.952-.798-1.188-.54-2.096-1.276-2.724-2.209-.62-.933-.93-2.013-.93-3.242h3.887c0 2.1 1.24 3.15 3.719 3.15.92 0 1.64-.187 2.156-.562.517-.383.775-.915.775-1.594z" fill="#fff"/></symbol><symbol id="gamepad_blue_rt" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#0B8ABC"/><path d="M15.991 27.436h-3.12v7.159H8.952V15.039h7.064c2.246 0 3.978.515 5.197 1.544 1.218 1.03 1.828 2.485 1.828 4.366 0 1.334-.283 2.449-.849 3.344-.557.886-1.406 1.594-2.546 2.122l4.113 7.992v.188h-4.205Zm-3.12-3.264h3.16c.983 0 1.745-.255 2.284-.766.54-.519.81-1.23.81-2.135 0-.922-.257-1.648-.77-2.176-.506-.528-1.285-.792-2.338-.792H12.87Zm26.818-5.87h-5.823v16.293h-3.917V18.303h-5.745v-3.264h15.485z" fill="#fff"/></symbol><symbol id="gamepad_blue_x" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#0B8ABC"/><path d="m23.854 21.775 4.477-7.24h5.659l-6.954 10.413 7.134 10.587h-5.724l-4.592-7.356-4.593 7.356h-5.724l7.135-10.587-6.954-10.414h5.658z" fill="#fff"/></symbol><symbol id="gamepad_blue_y" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#0B8ABC"/><path d="m23.986 23.063 4.143-8.97h4.484l-6.535 12.688V34h-4.17v-7.219l-6.535-12.687h4.498l4.115 8.969Z" fill="#fff"/></symbol><symbol id="gamepad_ls_hint" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#616161"/><path d="M13.104 31.854h9.433V34H10.465V14.094h2.639v17.76Zm18.293-6.727c-2.252-.647-3.892-1.44-4.922-2.379-1.021-.948-1.532-2.114-1.532-3.5 0-1.568.625-2.862 1.873-3.883 1.258-1.03 2.89-1.545 4.895-1.545 1.367 0 2.584.265 3.65.793 1.076.529 1.905 1.258 2.489 2.188.592.93.888 1.946.888 3.049H36.1c0-1.204-.383-2.147-1.149-2.83-.766-.693-1.846-1.04-3.24-1.04-1.294 0-2.306.288-3.035.862-.72.565-1.08 1.353-1.08 2.365 0 .811.341 1.5 1.025 2.064.693.556 1.864 1.067 3.514 1.532 1.659.465 2.953.98 3.883 1.545.938.556 1.631 1.207 2.078 1.955.455.747.683 1.627.683 2.638 0 1.614-.629 2.908-1.886 3.883-1.258.966-2.94 1.45-5.045 1.45-1.367 0-2.644-.26-3.828-.78-1.185-.529-2.101-1.249-2.748-2.16-.638-.912-.957-1.946-.957-3.104h2.638c0 1.204.442 2.156 1.326 2.858.893.693 2.083 1.039 3.569 1.039 1.385 0 2.447-.283 3.185-.848.739-.565 1.108-1.335 1.108-2.31 0-.976-.342-1.728-1.026-2.256-.683-.538-1.923-1.067-3.719-1.586Z" fill="#fff"/></symbol><symbol id="gamepad_lt_hint" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#616161"/><path d="M14.95 31.854h9.433V34H12.31V14.094h2.638v17.76Zm22.407-15.6H30.96V34h-2.611V16.254h-6.385v-2.16h15.394v2.16Z" fill="#fff"/></symbol><symbol id="gamepad_rs_hint" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#616161"/><path d="M16.672 25.947h-4.676V34H9.357V14.094h6.59c2.242 0 3.965.51 5.168 1.531 1.213 1.02 1.819 2.506 1.819 4.457 0 1.24-.338 2.32-1.012 3.24-.666.92-1.595 1.609-2.79 2.065l4.677 8.449V34h-2.817l-4.32-8.053Zm-4.676-2.146h4.033c1.304 0 2.338-.337 3.104-1.012.775-.674 1.162-1.577 1.162-2.707 0-1.23-.37-2.174-1.108-2.83-.729-.656-1.786-.989-3.171-.998h-4.02V23.8Zm20.494 1.326c-2.251-.647-3.892-1.44-4.922-2.379-1.02-.948-1.53-2.114-1.53-3.5 0-1.568.623-2.862 1.872-3.883 1.258-1.03 2.89-1.545 4.895-1.545 1.367 0 2.584.265 3.65.793 1.076.529 1.905 1.258 2.488 2.188.593.93.889 1.946.889 3.049h-2.639c0-1.204-.383-2.147-1.148-2.83-.766-.693-1.846-1.04-3.24-1.04-1.295 0-2.306.288-3.035.862-.72.565-1.08 1.353-1.08 2.365 0 .811.341 1.5 1.025 2.064.693.556 1.864 1.067 3.513 1.532 1.66.465 2.954.98 3.883 1.545.94.556 1.632 1.207 2.079 1.955.455.747.683 1.627.683 2.638 0 1.614-.629 2.908-1.887 3.883-1.258.966-2.94 1.45-5.045 1.45-1.367 0-2.643-.26-3.828-.78-1.185-.529-2.1-1.249-2.748-2.16-.638-.912-.957-1.946-.957-3.104h2.639c0 1.204.442 2.156 1.326 2.858.893.693 2.083 1.039 3.568 1.039 1.386 0 2.448-.283 3.186-.848s1.107-1.335 1.107-2.31c0-.976-.341-1.728-1.025-2.256-.684-.538-1.923-1.067-3.719-1.586Z" fill="#fff"/></symbol><symbol id="gamepad_rt_hint" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#616161"/><path d="m24.272 34.207-3.206-.153-5.513-7.413h-3.85v7.413H8.97V15.41h5.755c1.242 0 2.276.075 3.104.225.828.142 1.573.4 2.236.776.745.426 1.325.964 1.739 1.616.423.642.634 1.46.634 2.454 0 1.344-.372 2.47-1.117 3.38-.746.902-1.771 1.582-3.078 2.042zm-4.69-13.55c0-.535-.106-1.007-.317-1.416-.203-.417-.543-.768-1.022-1.052a3.903 3.903 0 0 0-1.407-.5 10.7 10.7 0 0 0-1.918-.15h-3.215v7.036h2.76c.864 0 1.619-.066 2.262-.2.644-.142 1.192-.4 1.643-.776.414-.351.717-.752.91-1.202.203-.46.304-1.04.304-1.74zm20.902-3.044H33.74v16.441h-2.51v-16.44h-6.744V15.41h15.998z" fill="#fff"/></symbol><symbol id="gamepad_y_hint" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#F19937"/><path d="m24.473 24.088 5.195-9.994h2.98l-6.863 12.482V34H23.16v-7.424l-6.863-12.482h3.008l5.168 9.994Z" fill="#fff"/></symbol><symbol id="gameplay" viewBox="0 0 24 24"><path d="M23 2v16h-9v2h2v2H8v-2h2v-2H1V2h22Zm-2 2H3v12h18V4ZM10 6c.3 0 .6.3.6.6H13c0-.4.3-.6.6-.6h1.1c.4 0 .6.3.6.6l.121.007c.57.06 1.186.533 1.279 1.093.1.6.9 4.1.8 5.1 0 .5-.5 1.1-1.1 1.1-.6 0-1.1-.5-1.7-1.1l-.962-.962-.138-.138c-.5-.6-.5-.6-1.1-.6h-1.3c-.403.003-.443.043-1 .6l-1.1 1.1c-.6.5-1.2 1.1-1.7 1.1s-1.1-.5-1.1-1.1c0-1.1.8-4.5.9-5.1.1-.6.8-1.1 1.3-1.1l.009-.114C8.56 6.162 8.83 6 9.1 6Z"/></symbol><symbol id="gfe_logo" viewBox="0 0 768 768"><path d="m42.667 608 83.2 83.2h601.6v34.133H110.934l-68.267-68.267z"/><path d="M42.667 42.667v512l102.4 102.4h582.4v-614.4h-684.8zM76.8 539.733V76.8h616.533V192c-179.2 0-332.8 72.533-392.534 125.867l12.8 38.4c10.666 29.867 23.467 59.733 40.533 87.466 2.133 6.4 6.4 10.666 8.534 17.067 38.4 64 85.333 119.467 134.4 164.267H396.799c-53.333-46.933-98.133-98.133-134.4-153.6-25.6 12.8-102.4 14.933-138.667 32 34.133 36.267 74.667 81.067 125.866 121.6h-91.733l-81.067-85.334zm503.467 85.334c-89.6-87.466-128-196.267-140.8-236.8-2.133-10.666-4.267-14.933-4.267-14.933s110.933-83.2 256-108.8v72.533c-46.933 19.2-98.133 44.8-145.067 85.333 0 0 0 4.267 2.133 8.534 6.4 25.6 29.866 100.267 89.6 160-6.4-70.4-4.267-119.467-4.267-134.4v-6.4s21.333-17.067 55.467-36.267v211.2h-108.8z"/></symbol><symbol id="gfe_logo_inverse" viewBox="0 0 768 768"><path d="M437.333 386.133c12.8 38.4 49.067 145.067 136.533 228.267h106.666V411.733c-34.133 19.2-53.333 34.133-53.333 34.133v6.4c0 17.067-2.133 61.867 4.267 130.133-57.6-59.733-81.067-130.133-87.466-155.733-2.133-6.4-2.133-8.534-2.133-8.534 44.8-38.4 93.867-64 138.667-81.067v-70.4c-140.8 23.467-247.467 104.533-247.467 104.533s2.133 6.4 4.267 14.933z"/><path d="M249.6 616.533c-49.066-40.533-87.467-83.2-119.467-119.467 36.267-14.933 108.8-19.2 134.4-29.866 34.133 53.333 78.933 104.534 130.133 149.333h96c-46.933-44.8-93.867-98.133-130.133-160-2.133-4.267-6.4-10.666-8.534-14.933-14.933-25.6-27.733-53.333-38.4-83.2-4.267-12.8-8.534-23.467-12.8-36.267 57.6-51.2 206.933-119.467 379.733-121.6v-115.2h-595.2v448l78.933 81.067h85.333z"/><path d="M42.667 42.667v612.267l70.4 70.4h612.267V42.668H42.668zm672 672h-595.2l-66.133-66.134V601.6l81.067 78.933h580.267v34.133zm0-66.134h-563.2L53.334 548.266V53.333h661.333v595.2z"/></symbol><symbol id="goal" viewBox="0 0 24 24"><g transform="translate(2 6)"><circle cx="10.388" cy="5.993" r="5.62"/><path d="M3.405 9.008H-.003v2.02h4.701a7.632 7.632 0 0 1-1.293-2.02zm-.626-3.015c0-.338.03-.669.073-.996H-.003v2.02h2.859a7.548 7.548 0 0 1-.077-1.024zM4.673.984H-.003v2.02h3.395A7.633 7.633 0 0 1 4.673.984z"/></g><path d="M15.379 1.999h-4.376c5.13 1.031 8.964 5.122 8.964 10.015 0 4.847-3.762 8.908-8.819 9.986h4.173c3.944-1.747 6.683-5.573 6.683-10.013-.001-4.419-2.712-8.229-6.625-9.988Z"/></symbol><symbol id="gpu" viewBox="0 0 768 768"><path d="M64 226.133v46.934h34.133v268.8H140.8V226.134zm128 0V499.2h34.133v46.933H448V499.2h256V226.133H192zm366.933 217.6c-42.667 0-81.067-34.133-81.067-81.067 0-42.667 34.133-81.067 81.067-81.067 42.667 0 81.067 34.133 81.067 81.067 0 42.667-34.133 81.067-81.067 81.067z"/></symbol><symbol id="guage" viewBox="0 0 768 768"><path d="M384 512c-53.019 0-96-42.981-96-96 0-35.84 19.52-67.2 48-83.52l310.72-179.84L469.76 459.2c-16 31.36-48.32 52.8-85.76 52.8zm0-416c57.92 0 112 16 159.04 42.24l-67.2 38.72C448 166.08 416 160 384 160c-141.385 0-256 114.615-256 256 0 70.72 28.48 134.72 74.88 180.8h.32c12.48 12.48 12.48 32.64 0 45.12s-32.96 12.48-45.44.32C99.84 584.32 64 504.32 64 416 64 239.269 207.269 96 384 96zm320 320c0 88.32-35.84 168.32-93.76 226.24-12.48 12.16-32.64 12.16-45.12-.32s-12.48-32.64 0-45.12C611.52 550.4 640 486.72 640 416c0-32-6.08-64-17.28-92.8l38.72-67.2C688 304 704 357.76 704 416z"/></symbol><symbol id="gun" viewBox="0 0 24 24"><path d="M23 6.21h-.456v-.957H20.82l-.267.517H6.46l.001-.007C6.46 5.342 6.095 5 5.643 5c-.451 0-.817.342-.817.763l.001.007H2.986v2.315L1.496 9.35v.902h1.312l-1.784 7.632c-.135.574.333 1.116.961 1.116h4.199c.463 0 .864-.301.962-.724l1.182-5.057h3.026c1.644 0 2.982-1.249 2.982-2.784 0-.068-.006-.135-.011-.203h6.363v-.509h1.855V7.652H23V6.21Zm-9.812 4.225c0 .944-.822 1.712-1.833 1.712H8.58l.448-1.914h4.147c.007.066.013.134.013.202Z"/></symbol><symbol id="gun2x" viewBox="0 0 24 36"><path d="M23 18.21h-.456v-.957H20.82l-.267.517H6.46l.001-.007C6.46 17.342 6.095 17 5.643 17c-.451 0-.817.342-.817.763l.001.007H2.986v2.315l-1.49 1.265v.902h1.312l-1.784 7.632c-.135.574.333 1.116.961 1.116h4.199c.463 0 .864-.301.962-.724l1.182-5.057h3.026c1.644 0 2.982-1.249 2.982-2.784 0-.068-.006-.135-.011-.203h6.363v-.509h1.855v-2.071H23V18.21Zm-9.812 4.225c0 .944-.822 1.712-1.833 1.712H8.58l.448-1.914h4.147c.007.066.013.134.013.202ZM11.94 13.43H5.96v-1.02l2.9-3.16c.24-.27.45-.51.61-.72.16-.21.29-.4.38-.57.1-.17.16-.33.2-.49a1.79 1.79 0 0 0-.03-1.02 1.244 1.244 0 0 0-.67-.75c-.16-.06-.35-.1-.56-.1-.26 0-.48.04-.67.12-.19.08-.35.2-.47.34-.12.15-.22.32-.28.52-.06.2-.1.42-.1.66H5.79c0-.39.07-.76.2-1.1.13-.34.33-.64.58-.9.26-.26.57-.46.95-.61.37-.15.8-.22 1.28-.22.44 0 .84.06 1.19.17.35.11.64.28.88.49.24.21.42.47.54.77a2.712 2.712 0 0 1 .06 1.83c-.09.27-.21.54-.37.81s-.35.54-.57.81c-.22.27-.46.54-.72.82l-1.99 2.13h4.13v1.19h-.01Zm3.6-4.44 1.26-2.17h1.65l-2.02 3.26 2.09 3.35h-1.64l-1.32-2.26-1.31 2.26H12.6l2.09-3.35-2.02-3.26h1.64z"/></symbol><symbol id="gun3x" viewBox="0 0 24 36"><path d="M23 18.21h-.456v-.957H20.82l-.267.517H6.46l.001-.007C6.46 17.342 6.095 17 5.643 17c-.451 0-.817.342-.817.763l.001.007H2.986v2.315l-1.49 1.265v.902h1.312l-1.784 7.632c-.135.574.333 1.116.961 1.116h4.199c.463 0 .864-.301.962-.724l1.182-5.057h3.026c1.644 0 2.982-1.249 2.982-2.784 0-.068-.006-.135-.011-.203h6.363v-.509h1.855v-2.071H23V18.21Zm-9.812 4.225c0 .944-.822 1.712-1.833 1.712H8.58l.448-1.914h4.147c.007.066.013.134.013.202ZM7.67 8.3h.88c.26 0 .48-.03.67-.1.19-.07.34-.16.47-.28.13-.12.22-.26.28-.43.06-.17.09-.35.09-.56 0-.42-.11-.75-.33-.99-.22-.23-.56-.34-1.02-.34-.2 0-.38.03-.54.09-.17.05-.31.14-.44.24-.12.11-.21.24-.28.4-.07.15-.1.32-.1.52H5.86c0-.35.07-.67.21-.97.14-.31.33-.56.59-.78.25-.22.55-.39.9-.51s.72-.19 1.13-.19c.42 0 .81.05 1.16.16.35.11.65.27.9.48.25.22.45.48.59.8.14.32.21.68.21 1.1 0 .18-.03.36-.09.54-.06.18-.14.36-.26.53-.11.17-.26.33-.43.48-.17.15-.37.27-.6.38.27.09.5.21.69.36.19.14.34.31.46.49s.2.38.26.58a2.736 2.736 0 0 1-.15 1.75c-.15.33-.36.6-.63.82-.27.22-.58.39-.95.51s-.76.17-1.18.17c-.39 0-.76-.05-1.11-.16a2.91 2.91 0 0 1-.93-.47c-.27-.21-.48-.47-.64-.78-.16-.31-.24-.68-.24-1.09h1.48c0 .2.03.37.1.54.07.16.17.3.29.42.13.12.28.21.46.27.18.06.38.09.6.09.46 0 .82-.12 1.09-.37.26-.24.4-.6.4-1.06 0-.25-.04-.47-.12-.65-.08-.18-.19-.33-.33-.46-.14-.12-.31-.21-.52-.27-.2-.06-.43-.09-.68-.09h-.85V8.3Zm7.86.69 1.26-2.17h1.65l-2.02 3.26 2.09 3.35h-1.64l-1.32-2.26-1.31 2.26h-1.65l2.09-3.35-2.02-3.26h1.64z"/></symbol><symbol id="heads_up_display" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M23 18h-9v2h2v2H8v-2h2v-2H1V2h22v16ZM21 4H3v12h18V4ZM5 10v4h6v-4H5Z"/></symbol><symbol id="heart" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></symbol><symbol id="help" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/></symbol><symbol id="highlights" viewBox="0 0 24 24"><path d="m18 4 2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H2v16h20V4h-4Zm-3.5 13.987L12 16.478l-2.5 1.51.7-2.818L8 13.157l2.9-.201 1.1-2.717 1.1 2.717 2.9.201-2.2 1.912.7 2.918Z"/></symbol><symbol id="highlights_disabled" viewBox="0 0 24 24"><path d="M2.27 2 21 20.73 19.73 22l-2.002-2.001L2 20V4.269L1 3.27 2.27 2ZM10 4l2 4h3l-2-4h2l2 4h3.005L18 4h4v15.173l-6.027-6.026.036-.03-.07-.006-6.744-6.74L8 4.001h2Zm.663 8.933-2.645.183 2.198 1.997-.699 2.796 2.497-1.498 2.497 1.498-.36-1.488-3.488-3.488Z"/></symbol><symbol id="home" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></symbol><symbol id="image" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M21 21V3H3v18h18zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></symbol><symbol id="ime" viewBox="0 0 24 24"><g fill="#FFF"><path d="M13.912 14.884h-.905V13.11H15.9a4.157 4.157 0 0 0-.302-.51l.92-.279c.186.233.372.542.472.79h2.662v1.772H18.7v-.905h-4.79v.905Zm5.795 2.5h-2.886v1.167c0 .495-.116.743-.495.882-.371.148-.867.155-1.5.155a3.363 3.363 0 0 0-.403-.936c.479.016 1.06.016 1.214.016.155 0 .201-.031.201-.14v-1.145h-2.87v-.874h2.87v-.41a5.31 5.31 0 0 0 .945-.635H14.29v-.859h3.42l.21-.046.61.48a7.772 7.772 0 0 1-1.71 1.338v.132h2.886v.874Z"/><path d="M20.232 2c.942 0 1.71.735 1.768 1.658v16.574c0 .936-.729 1.71-1.658 1.762l-.11.006H3.774c-.942 0-1.71-.735-1.768-1.665L2 20.232V3.768c0-.942.735-1.71 1.665-1.768h16.567Zm.626 1.258-.013.045a.804.804 0 0 1-.174.284L3.503 20.8a.695.695 0 0 1-.155.116c.104.058.22.103.342.116h16.542a.8.8 0 0 0 .8-.722l.007-.078V3.768a.83.83 0 0 0-.18-.51Zm-12.364 1.2H7.298L4.967 10.72h1.372l.43-1.29h2.263l.434 1.29h1.373L8.494 4.458ZM7.896 6.04l.787 2.344H7.118l.778-2.344Z"/></g></symbol><symbol id="info" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></symbol><symbol id="ios_share" viewBox="0 0 44 44"><path d="m21 7-2.65 3.41a.931.931 0 0 1-.72.342c-.538 0-.944-.427-.944-1.012 0-.298.117-.527.314-.74l4.155-4.659C21.417 4.056 21.738 4 22 4s.415.056.676.341l4.432 4.645c.196.213.302.442.302.74 0 .585-.408 1.012-.958 1.012a.925.925 0 0 1-.708-.342L23 7v17c0 .598-.436 1-1 1-.564 0-1-.402-1-1V7ZM9 17.667c0-3.045 1.538-4.583 4.6-4.583L17 13v1.993h-3.686c-1.464 0-2.27.798-2.27 2.335l-.042 15.259c0 1.537.533 2.413 1.998 2.413h17.727C32.178 35 33 34.467 33 32.93l.042-15.26c0-1.536-.591-2.677-2.042-2.677h-4V13l3.4.084c3.062 0 4.6 1.538 4.6 4.583v14.75C35 35.464 33.462 37 30.4 37H13.6C10.538 37 9 35.463 9 32.418V17.667Z"/></symbol><symbol id="isp" viewBox="0 0 768 768"><path d="M384 64c-141.385 0-256 114.615-256 256 0 128.96 96 237.44 224 253.76V608h-32c-17.673 0-32 14.327-32 32H64v64h224c0 17.673 14.327 32 32 32h128c17.673 0 32-14.327 32-32h224v-64H480c0-17.673-14.327-32-32-32h-32v-34.24c128-16 224-124.8 224-253.76 0-141.385-114.615-256-256-256zm0 64s23.68 40.96 40.32 96h-80.64c16.64-55.04 40.32-96 40.32-96zm-71.36 13.76c-8.64 16-21.76 45.12-32.96 82.24h-61.76c22.08-37.12 54.08-66.24 94.72-82.24zm142.72.32c40.64 16 72.64 44.8 94.72 81.92h-61.76c-11.2-37.12-24.32-66.24-32.96-81.92zM194.88 288h71.36c-1.28 10.56-2.24 21.12-2.24 32s.96 21.44 2.24 32h-71.36c-1.92-10.56-2.88-21.12-2.88-32s.96-21.44 2.88-32zm135.36 0h107.52c1.28 10.56 2.24 21.12 2.24 32s-.96 21.44-2.24 32H330.24c-1.28-10.56-2.24-21.12-2.24-32s.96-21.44 2.24-32zm171.52 0h71.36c1.92 10.56 2.88 21.12 2.88 32s-.96 21.44-2.88 32h-71.36c1.28-10.56 2.24-21.12 2.24-32s-.96-21.44-2.24-32zM217.92 416h61.76c11.2 37.12 24.32 66.24 32.96 81.92-40.64-16-72.64-44.8-94.72-81.92zm125.76 0h80.64C407.68 471.04 384 512 384 512s-23.68-40.96-40.32-96zm144.64 0h61.76C528 453.12 496 482.24 455.36 498.24c8.64-16 21.76-45.12 32.96-82.24z"/></symbol><symbol id="keyboard" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0zm0 0h24v24H0V0z"/><path d="M22 5H2.01L2 19h20V5zM11 8h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"/></symbol><symbol id="keyboard_arrow_left" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"/></symbol><symbol id="keyboard_arrow_right" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/></symbol><symbol id="keyboard_hide_icon" viewBox="0 0 20 20"><g id="Client-IME" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="11&#x2033;-iPad-Pro--Client-IME---portrait---snackbar" transform="translate(-780 -613)"><g id="Components-/-Button-/-Contained-icon-/-Active-Copy" transform="translate(762 594)"><g id="keyboard_hide" transform="translate(16 16)"><path id="Path" d="M0 0h24v24H0z"/><path d="M22 3H2.01L2 17h20V3ZM11 6h2v2h-2V6Zm0 3h2v2h-2V9ZM8 6h2v2H8V6Zm0 3h2v2H8V9Zm-1 2H5V9h2v2Zm0-3H5V6h2v2Zm9 7H8v-2h8v2Zm0-4h-2V9h2v2Zm0-3h-2V6h2v2Zm3 3h-2V9h2v2Zm0-3h-2V6h2v2Zm-7 15 4-4H8l4 4Z" id="Shape" fill="#FFF"/></g></g></g></g></symbol><symbol id="launch" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M19 19H5V5h7V3H3v18h18v-9h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></symbol><symbol id="link" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8zm9-4h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z"/></symbol><symbol id="link_off" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M14.39 11 16 12.61V11zM17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.27-.77 2.37-1.87 2.84l1.4 1.4A4.986 4.986 0 0 0 22 12c0-2.76-2.24-5-5-5zM2 4.27l3.11 3.11A4.991 4.991 0 0 0 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4.01 1.41-1.41L3.41 2.86 2 4.27z"/></symbol><symbol id="lock" viewBox="0 0 24 24"><g fill="none"><path d="M0 0h24v24H0V0z"/><path d="M0 0h24v24H0V0z" opacity=".87"/></g><path d="M20 8h-3V6.21c0-2.61-1.91-4.94-4.51-5.19A5.008 5.008 0 0 0 7 6v2H4v14h16V8zm-8 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"/></symbol><symbol id="logout" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M14.6 15.6 16 17l5-5-5-5-1.4 1.4 2.6 2.6H7.5v2h9.7l-2.6 2.6ZM3 21h18v-3.976h-2V19H5V5h14v2.031h2V3H3v18Z"/></symbol><symbol id="medal" viewBox="0 0 24 24"><path d="M3.79 2h16.42v1.59H3.79zm0 3.18v11L12 22l8.21-5.82v-11H3.79Zm11.25 11.5L12 15.08l-3.04 1.6.58-3.39-2.46-2.4 3.4-.49L12 7.32l1.52 3.08 3.4.49-2.46 2.4.58 3.39Z"/></symbol><symbol id="memory" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15 9H9v6h6V9zm-2 4h-2v-2h2v2zm8-2V9h-2V5h-4V3h-2v2h-2V3H9v2H5v4H3v2h2v2H3v2h2v4h4v2h2v-2h2v2h2v-2h4v-4h2v-2h-2v-2h2zm-4 6H7V7h10v10z"/></symbol><symbol id="menu" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></symbol><symbol id="message" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M22 2H2.01L2 22l4-4h16V2zm-4 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/></symbol><symbol id="mic" viewBox="0 0 24 24"><path d="M12 14c1.7 0 3-1.3 3-3V5c0-1.7-1.3-3-3-3S9 3.3 9 5v6c0 1.7 1.3 3 3 3zm5.3-3c0 3-2.5 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.4 2.7 6.2 6 6.7V21h2v-3.3c3.3-.5 6-3.3 6-6.7h-1.7z"/></symbol><symbol id="mic_off" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15 10.6V5c0-1.66-1.34-3-3-3-1.54 0-2.79 1.16-2.96 2.65L15 10.6zm4 .4h-1.7c0 .58-.1 1.13-.27 1.64l1.27 1.27c.44-.88.7-1.87.7-2.91zM4.41 2.86 3 4.27l6 6V11c0 1.66 1.34 3 3 3 .23 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28a7.13 7.13 0 0 0 2.55-.9l4.2 4.2 1.41-1.41L4.41 2.86z"/></symbol><symbol id="montage" viewBox="0 0 24 24"><path d="m5 4 2 4h3L8 4h2l2 4h3l-2-4h2l2 4h3l-2-4h4v16H2V4h3Zm4.5 7-1.1 2.4L6 14.5l2.4 1.1L9.5 18l1.1-2.4 2.4-1.1-2.4-1.1L9.5 11Zm6-1.5-.8 1.7-1.7.8 1.7.8.8 1.7.8-1.7L18 12l-1.7-.8-.8-1.7Z"/></symbol><symbol id="more_horiz" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></symbol><symbol id="more_vert" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></symbol><symbol id="movie" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m18 4 2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"/></symbol><symbol id="network_signal" viewBox="0 0 768 768"><path d="M611.875 130.56c139.852 140.084 139.852 367.028 0 506.88l-46.08-46.08c114.509-114.509 114.509-300.212 0-414.72l46.08-46.08zm-92.159 92.16c88.934 89.165 88.934 233.626 0 322.56l-46.08-46.08c63.59-63.59 63.59-166.81 0-230.4l46.08-46.08zM156.125 637.44c-139.853-140.083-139.853-367.027 0-506.88l46.08 46.08c-114.508 114.509-114.508 300.212 0 414.72l-46.08 46.08zm92.159-92.16c-88.934-89.164-88.934-233.626 0-322.56l46.08 46.08c-63.59 63.59-63.59 166.81 0 230.4l-46.08 46.08zM384 445.44c-33.932 0-61.44-27.508-61.44-61.44s27.508-61.44 61.44-61.44 61.44 27.508 61.44 61.44-27.508 61.44-61.44 61.44z"/></symbol><symbol id="nvidia_logo_green" viewBox="0 0 44 44"><g fill="none"><path fill="#76B900" d="M7 37h30V7H7z"/><path fill="#FFF" d="M13.248 21.027s1.989-2.822 5.96-3.114v-1.024C14.81 17.229 11 20.811 11 20.811s2.157 5.999 8.208 6.548v-1.088c-4.44-.538-5.96-5.244-5.96-5.244Zm5.96 3.079v.997c-3.356-.576-4.287-3.93-4.287-3.93s1.611-1.717 4.287-1.996v1.094h-.005c-1.404-.162-2.501 1.1-2.501 1.1s.614 2.124 2.506 2.735Zm0-9.106v1.889c.13-.01.259-.018.389-.022 5.001-.162 8.26 3.944 8.26 3.944s-3.743 4.377-7.642 4.377c-.358 0-.692-.032-1.007-.085v1.168c.27.032.548.052.838.052 3.629 0 6.253-1.782 8.794-3.891.421.324 2.146 1.113 2.5 1.46-2.416 1.944-8.046 3.512-11.238 3.512-.307 0-.603-.018-.894-.045V29H33V15H19.208Zm0 4.177v-1.264c.128-.009.257-.015.389-.02 3.596-.108 5.956 2.972 5.956 2.972s-2.549 3.405-5.281 3.405c-.394 0-.746-.062-1.064-.164V20.27c1.4.163 1.682.758 2.524 2.107l1.872-1.518s-1.366-1.724-3.67-1.724c-.25 0-.49.017-.726.041Z"/></g></symbol><symbol id="nvidia_symbol" viewBox="0 0 768 768"><path d="M302.933 298.666v-38.4h12.8c106.667-4.267 174.933 89.6 174.933 89.6s-72.533 102.4-153.6 102.4c-12.8 0-21.333 0-29.866-4.267v-115.2c42.667 4.267 46.934 21.333 72.533 64l55.467-46.933s-38.4-51.2-106.667-51.2h-25.6zm0-127.999v55.467h12.8c145.066-4.267 238.934 123.733 238.934 123.733S443.734 482.134 332.801 482.134c-8.534 0-21.333 0-29.867-4.267V512h25.6c106.667 0 183.467-55.467 256-119.467 12.8 8.534 64 34.133 72.533 42.667C588.8 494.933 422.4 541.867 328.534 541.867h-25.6v55.467h401.067V170.667H302.934zm0 277.333v29.867C204.8 460.8 179.2 358.4 179.2 358.4s46.933-51.2 123.733-59.733V332.8c-42.667-4.267-72.533 34.133-72.533 34.133s17.067 64 72.533 81.067zM128 354.134s59.733-85.334 174.933-93.867V230.4C174.933 238.934 64 349.867 64 349.867s64 183.467 238.933 196.267v-34.133C174.933 499.201 128 354.134 128 354.134z"/></symbol><symbol id="open_in_new" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M19 19H5V5h7V3H3v18h18v-9h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></symbol><symbol id="pan_zoom" viewBox="0 0 24 24"><path d="M16.256 11.498h-1.072V6h-2.976v10.239l-4.007-.85L7 16.619 12.337 22h8.601L22 14.378zM11 6V2H7l1.645 1.645-5 5L2 7v4h4L4.355 9.355l5-5z" fill-rule="evenodd"/></symbol><symbol id="pause" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></symbol><symbol id="perm_scan_wifi" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 3C6.95 3 3.15 4.85 0 7.23L12 22 24 7.25C20.85 4.87 17.05 3 12 3zm1 13h-2v-6h2v6zm-2-8V6h2v2h-2z"/></symbol><symbol id="person" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4Zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4Z"/></symbol><symbol id="photo_camera" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><circle cx="12" cy="12" r="3"/><path d="M9 2 7.17 4H2v16h20V4h-5.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/></symbol><symbol id="picture_in_picture" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M19 7h-8v6h8V7zm4-4H1v17.98h22V3zm-2 16.01H3V4.98h18v14.03z"/></symbol><symbol id="play_arrow" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M8 5v14l11-7L8 5z"/></symbol><symbol id="play_circle_filled" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/></symbol><symbol id="play_circle_outline" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m10 16.5 6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></symbol><symbol id="power" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 7V3h-2v4h-4V3H8v4H6v7.5L9.5 18v3h5v-3l3.5-3.51V7h-2z"/></symbol><symbol id="quality_high" viewBox="0 0 24 24"><path d="M21 3H3v18h18V3ZM11 15H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6Zm7-1a1 1 0 0 1-1 1h-.75v1.5h-1.5V15H14a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v4Zm-3.5-.5h2v-3h-2v3Z"/></symbol><symbol id="quiet_mode" viewBox="0 0 24 24"><path d="M3 3h18v18H3V3Zm9.028 16.792c4.243 0 7.764-3.52 7.764-7.764 0-4.333-3.52-7.764-7.764-7.764-4.333 0-7.764 3.521-7.764 7.764 0 4.334 3.521 7.764 7.764 7.764Zm-5.326-8.486c-.542-.361-.723-1.083-.452-1.896.271-.813.722-1.625.722-1.625 0-.09.181-.09.271 0 .632.903 1.264 1.625 1.896 2.076.09.09.18.09.271.181-.361.542-.632 1.264-.632 1.986-.18 0-.361-.09-.542-.09-.541-.09-.993-.361-1.534-.632Zm3.701-2.077c-.09-.18-.18-.36-.09-.632-.18-.45-.18-.993-.18-1.625s.541-1.173 1.354-1.354c.812-.18 1.715-.18 1.715-.18.18 0 .27.18.18.27-.541.994-.812 1.896-.902 2.709v.361h-.452c-.632 0-1.173.18-1.625.451ZM9.05 13.292c.27.632.722 1.174 1.444 1.535-.09.18-.18.27-.36.451a5.26 5.26 0 0 1-1.355.993c-.451.271-1.264.09-1.806-.541-.541-.632-.993-1.445-.993-1.445-.09-.09-.09-.27.09-.27 1.084 0 1.987-.181 2.71-.542.09-.09.18-.09.27-.18Zm4.604 1.535c.09.09.09.27.09.632.181.451.181.993.181 1.625s-.542 1.174-1.354 1.354c-.813.18-1.715.18-1.715.18-.181 0-.271-.18-.181-.27.542-.993.813-1.896.903-2.709v-.36h.451c.632 0 1.174-.181 1.625-.452Zm4.514-5.056c.09.09 0 .271-.18.271-1.084 0-1.986.18-2.709.542-.09.09-.18.09-.27.18a3.187 3.187 0 0 0-1.355-1.535c.09-.18.18-.27.361-.45a5.26 5.26 0 0 1 1.355-.994c.451-.27 1.264-.09 1.805.542.542.632.993 1.444.993 1.444Zm-.812 2.98c.451.27.722 1.083.451 1.895-.27.813-.722 1.625-.722 1.625 0 .09-.18.09-.27 0-.633-.902-1.265-1.625-1.897-2.076-.09-.09-.18-.09-.27-.18.36-.542.631-1.265.631-1.987.18 0 .361 0 .542.09.542.09.993.362 1.535.632Zm-2.709-.723a2.618 2.618 0 1 1-5.236 0 2.618 2.618 0 0 1 5.236 0Z"/></symbol><symbol id="ram" viewBox="0 0 768 768"><path d="M64 256h640v256H64V256zm0-93.867h64v64H64v-64zm576 0h64v64h-64v-64zm-98.133 0h64v64h-64v-64zm-93.867 0h64v64h-64v-64zm-93.866 0h64v64h-64v-64zm-98.134 0h64v64h-64v-64zm-98.133 0h64v64h-64v-64zM64 546.134h64v64H64v-64zm576 0h64v64h-64v-64zm-98.133 0h64v64h-64v-64zm-93.867 0h64v64h-64v-64zm-93.866 0h64v64h-64v-64zm-98.134 0h64v64h-64v-64zm-98.133 0h64v64h-64v-64z"/></symbol><symbol id="ranking_gold" viewBox="0 0 768 768"><path d="M70.4 560V208L384 32l313.6 176zm627.2-243.2v70.4L230.4 649.6l-64-35.2zm-368 390.4L384 736l313.6-176v-60.8z"/></symbol><symbol id="ranking_silver" viewBox="0 0 768 768"><path d="M697.6 387.2V208L384 32 70.4 208v352l160 89.6zm-368 320L384 736l313.6-176v-60.8z"/></symbol><symbol id="ranking_titanium" viewBox="0 0 768 768"><path d="M697.6 316.8v70.4L230.4 649.6l-64-35.2zm-368 390.4L384 736l313.6-176v-60.8zm368-499.2L384 32 70.4 208v352l80-44.8V252.8L384 121.6l233.6 131.2z"/><path d="M262.4 454.4V313.6L384 246.4l121.6 67.2-243.2 140.8z"/></symbol><symbol id="ranking_token" viewBox="0 0 768 768"><path d="m288 438.4 96 54.4 96-54.4V329.6l-96-54.4-96 54.4v108.8z"/><path d="M697.6 208 384 32 70.4 208v352l80-44.8V252.8L384 121.6l233.6 131.2z"/><path d="M70.4 560 384 736l313.6-176V208l-80 44.8v262.4L384 646.4 150.4 515.2z"/></symbol><symbol id="ranking_xp" viewBox="0 0 768 768"><path d="M697.6 208 384 32 70.4 208v352l80-44.8V252.8L384 121.6l233.6 131.2z"/><path d="M70.4 560 384 736l313.6-176V208l-80 44.8v262.4L384 646.4 150.4 515.2z"/><path d="M345.6 278.4h44.8l-67.2 102.4 70.4 112h-51.2l-44.8-73.6-48 73.6h-44.8L275.2 384l-64-105.6h51.2l41.6 67.2 41.6-67.2zM572.8 368c0 19.2-16 35.2-35.2 35.2h-80v86.4H416V278.4h121.6c19.2 0 35.2 16 35.2 35.2V368zm-115.2-3.2h64c6.4 0 9.6-3.2 9.6-9.6v-28.8c0-6.4-3.2-9.6-9.6-9.6h-64v48z"/></symbol><symbol id="record" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15 12c0 1.7-1.3 3-3 3s-3-1.3-3-3 1.3-3 3-3 3 1.4 3 3z"/><path d="m23.3 11.9-2.3-.6C20.6 6.7 16.7 3 12 3c-5 0-9 4-9 9 0 4.4 3.1 8 7.2 8.8.3.7 1 1.2 1.8 1.2 1.1 0 2-.9 2-2s-.9-2-2-2c-.7 0-1.2.3-1.6.8C7.3 18.1 5 15.4 5 12c0-3.9 3.1-7 7-7s7 3.1 7 7c0 1-.2 2-.6 2.8l4.9-2.9z"/></symbol><symbol id="record_disabled" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M9.76 5.42 8.24 3.9a8.89 8.89 0 0 1 3.83-.86c4.69 0 8.58 3.69 8.98 8.28l2.28.59-4.45 2.63-.23-.23c.26-.7.4-1.5.4-2.3 0-3.89-3.09-6.98-6.98-6.98-.82 0-1.59.14-2.31.39Zm2.31 9.59c-1.7 0-2.99-1.3-2.99-2.99 0-.47.1-.91.28-1.3L6.48 7.84a6.928 6.928 0 0 0-1.39 4.18c0 3.39 2.3 6.08 5.39 6.78.4-.5.9-.8 1.6-.8 1.1 0 2 .9 2 2s-.9 2-2 2c-.8 0-1.5-.5-1.8-1.2a8.903 8.903 0 0 1-7.18-8.78c0-2.13.73-4.08 1.95-5.61L3 4.36l1.42-1.42 16.71 16.71-1.42 1.42-6.34-6.34c-.39.18-.83.28-1.3.28Z"/></symbol><symbol id="recordings" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M8.8 18.2C6.5 17 5 14.7 5 12c0-3.9 3.1-7 7-7l1.1.1L9 1v2.5C5.6 4.8 3 8.1 3 12c0 4.8 3.8 8.7 8.5 9l-2.7-2.8z"/><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M15.4 5.8c2.2 1.2 3.8 3.5 3.8 6.2 0 3.9-3.1 7-7 7l-1.2-.1 4.1 4.1v-2.5c3.5-1.2 6-4.6 6-8.5 0-4.8-3.8-8.7-8.5-9l2.8 2.8z"/><path d="M12 6c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zm0 11c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5z"/></symbol><symbol id="remote" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M15 9H9c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V10c0-.55-.45-1-1-1zm-3 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM7.05 6.05l1.41 1.41a5.022 5.022 0 0 1 7.08 0l1.41-1.41C15.68 4.78 13.93 4 12 4s-3.68.78-4.95 2.05zM12 0C8.96 0 6.21 1.23 4.22 3.22l1.41 1.41C7.26 3.01 9.51 2 12 2s4.74 1.01 6.36 2.64l1.41-1.41C17.79 1.23 15.04 0 12 0z"/></symbol><symbol id="remove_circle" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"/></symbol><symbol id="replay" viewBox="0 0 24 24"><path d="M8.8 18.2C6.5 17 5 14.7 5 12c0-3.9 3.1-7 7-7l1.1.1L9 1v2.5C5.6 4.8 3 8.1 3 12c0 4.8 3.8 8.7 8.5 9l-2.7-2.8z"/><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M15.4 5.8c2.2 1.2 3.8 3.5 3.8 6.2 0 3.9-3.1 7-7 7l-1.2-.1 4.1 4.1v-2.5c3.5-1.2 6-4.6 6-8.5 0-4.8-3.8-8.7-8.5-9l2.8 2.8z"/></symbol><symbol id="replay_disabled" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M19 12.02c0-3.29-2.29-6.05-5.35-6.8l-2.17-2.17c.17-.01.34-.03.51-.03 4.96 0 8.99 4.02 8.99 8.99 0 1.38-.31 2.69-.87 3.86l-1.52-1.52c.26-.73.41-1.51.41-2.33Zm-9.34-6.6L7.99 3.75V.98l4 4 .03.03h-.03c-.82 0-1.6.15-2.33.41Zm11.37 14.23-1.44 1.42-2.02-2.02c-.51.41-1.06.76-1.65 1.05v2.89l-4-4h.29c1.48-.05 2.82-.57 3.93-1.39l-2.88-2.88a3.039 3.039 0 0 1-4.05-4.05L6.38 7.84a6.973 6.973 0 0 0-1.4 4.17c0 3.29 2.28 6.05 5.34 6.8l2.17 2.17c-.17.01-.33.03-.5.03-4.96 0-8.99-4.02-8.99-8.99 0-2.12.73-4.06 1.95-5.6L2.89 4.36l1.42-1.42 16.72 16.71Z"/></symbol><symbol id="reset" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M13 3a9 9 0 0 0-9 9H1l4 3.99L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18Z"/></symbol><symbol id="retry" viewBox="0 0 24 24"><path d="M12 4V0l5 5-5 5V6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8"/></symbol><symbol id="rewards" viewBox="0 0 768 768"><path d="M448 384v251.733l-64-64-64 64V384H96v320h576V384zm42.666-128C539.732 249.6 576 211.2 576 160c0-53.333-42.667-96-96-96-49.067 0-89.6 38.4-96 85.334-6.4-49.066-49.067-85.333-96-85.333-55.467 0-96 42.667-96 96 0 49.066 38.4 89.6 87.466 96H63.999v96h256v-96h128v96h256v-96H490.666zM320 192h-32c-19.2 0-32-14.933-32-32s17.067-32 32-32c19.2 0 32 17.067 32 32v32zm123.733 0v-32c0-19.2 17.067-32 32-32 19.2 0 32 17.067 32 32s-14.933 32-32 32h-32z"/></symbol><symbol id="save" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M17 3H3v18h18V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/></symbol><symbol id="search" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></symbol><symbol id="send" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"/></symbol><symbol id="settings" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m19.44 12.99-.01.02c.04-.33.08-.67.08-1.01 0-.34-.03-.66-.07-.99l.01.02 2.44-1.92-2.43-4.22-2.87 1.16.01.01c-.52-.4-1.09-.74-1.71-1h.01L14.44 2H9.57l-.44 3.07h.01c-.62.26-1.19.6-1.71 1l.01-.01-2.88-1.17-2.44 4.22 2.44 1.92.01-.02c-.04.33-.07.65-.07.99 0 .34.03.68.08 1.01l-.01-.02-2.1 1.65-.33.26 2.43 4.2 2.88-1.15-.02-.04c.53.41 1.1.75 1.73 1.01h-.03L9.58 22h4.85s.03-.18.06-.42l.38-2.65h-.01c.62-.26 1.2-.6 1.73-1.01l-.02.04 2.88 1.15 2.43-4.2s-.14-.12-.33-.26l-2.11-1.66zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/></symbol><symbol id="share" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/></symbol><symbol id="shield_tv" viewBox="0 0 768 768"><path d="M533.832 482.28 223.68 292.032 45.912 592.416h422.736zM723.84 161.232H56.448l489.624 300.312zM203.16 279.456 31.872 174.384v394.464zm363.456 194.688 169.872 104.184v-391.2zm-12.264 20.712-57.696 97.536H713.4l-159.048-97.536zm-6.12 73.392V537.72h39.456v30.528h-39.456z"/></symbol><symbol id="shopping" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M21 6h-4c0-2.76-2.24-5-5-5S7 3.24 7 6H3v16h18V6zm-9-3c1.66 0 3 1.34 3 3H9c0-1.66 1.34-3 3-3zm0 10c-2.76 0-5-2.24-5-5h2c0 1.66 1.34 3 3 3s3-1.34 3-3h2c0 2.76-2.24 5-5 5z"/></symbol><symbol id="signal_wifi_off" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M23.64 7c-.45-.34-4.93-4-11.64-4-1.32 0-2.55.14-3.69.38L18.43 13.5 23.64 7zM3.41 1.31 2 2.72l2.05 2.05C1.91 5.76.59 6.82.36 7L12 21.5l3.91-4.87 3.32 3.32 1.41-1.41L3.41 1.31z"/></symbol><symbol id="social_share" viewBox="0 0 16 16"><path d="M8.5 8.068c-.38 0-.72.15-.98.387L3.955 6.37A1.65 1.65 0 0 0 4 6.021c0-.121-.02-.237-.045-.352L7.48 3.605c.27.251.625.407 1.02.407.83 0 1.5-.673 1.5-1.506a1.501 1.501 0 1 0-3 0c0 .12.02.236.045.351L3.52 4.921a1.49 1.49 0 0 0-1.02-.407c-.83 0-1.5.673-1.5 1.506s.67 1.506 1.5 1.506c.395 0 .75-.156 1.02-.407l3.56 2.089a1.42 1.42 0 0 0-.04.326c0 .808.655 1.466 1.46 1.466.805 0 1.46-.658 1.46-1.466 0-.808-.655-1.466-1.46-1.466Z"/></symbol><symbol id="sort" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"/></symbol><symbol id="space_bar" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M18 9v4H6V9H4v6h16V9z"/></symbol><symbol id="star_circle" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18z"/></symbol><symbol id="star_filled" viewBox="0 0 24 24"><path d="m22 9.2-7.2-.6L12 2 9.2 8.6 2 9.2 7.5 14l-1.6 7 6.2-3.7 6.2 3.7-1.6-7L22 9.2z"/></symbol><symbol id="steam_logo_icon" viewBox="0 0 93 93"><path fill-rule="evenodd" d="M46.422 1C71.594 1 92 21.37 92 46.5 92 71.629 71.594 92 46.422 92 25.556 92 7.979 78 2.569 58.9l17.471 7.21c1.184 5.893 6.405 10.343 12.65 10.343 7.114 0 12.901-5.777 12.901-12.88 0-.203-.006-.408-.014-.61l15.494-11.037c.13.004.26.007.39.007 9.478 0 17.19-7.7 17.19-17.16 0-9.462-7.712-17.16-17.19-17.16-9.479 0-17.19 7.698-17.19 17.16l.003.222-10.865 15.719a12.834 12.834 0 0 0-7.98 2.22L1 42.85C2.864 19.43 22.479 1 46.422 1ZM29.263 54.515a9.665 9.665 0 0 1 7.136.108 9.612 9.612 0 0 1 5.229 5.243 9.585 9.585 0 0 1-.015 7.396c-2.054 4.92-7.735 7.255-12.66 5.206a9.639 9.639 0 0 1-4.99-4.737l5.6 2.309c3.634 1.512 7.808-.204 9.322-3.831a7.112 7.112 0 0 0-3.838-9.306Zm32.198-31.177c6.316 0 11.454 5.13 11.454 11.435 0 6.304-5.138 11.433-11.454 11.433-6.315 0-11.454-5.13-11.454-11.433 0-6.304 5.139-11.435 11.454-11.435Zm.02 2.827c-4.752 0-8.605 3.844-8.605 8.588 0 4.743 3.853 8.588 8.604 8.588 4.752 0 8.604-3.845 8.604-8.588 0-4.744-3.852-8.588-8.604-8.588Z"/></symbol><symbol id="stop" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M6 6h12v12H6V6z"/></symbol><symbol id="storage" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"/></symbol><symbol id="sword" viewBox="0 0 24 24"><path d="m11.05 15.97 10.23-9.55L22 2l-4.42.72-9.55 10.23-1.6-1.59-1.31 1.31 6.21 6.21 1.31-1.31zm-8.04 5.02c-.83-.83-.83-2.19 0-3.02l2.65-2.65 3.02 3.02-2.65 2.65c-.83.83-2.18.83-3.02 0Z"/></symbol><symbol id="sync" viewBox="0 0 24 24"><path fill="none" d="M.01 0h24v24h-24V0z"/><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/></symbol><symbol id="tablet" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0zm0 0h24v24H0V0z"/><path d="M21 0H3v24h18V0zm-7 22h-4v-1h4v1zm5.25-3H4.75V3h14.5v16z"/></symbol><symbol id="tag" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M22.83 12.99 11.83 2H2v9.83l10.99 10.99 9.84-9.83zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"/></symbol><symbol id="thick_arrow_dash_up" viewBox="0 0 24 24"><path d="M7.027 14.513H0L12.009 0 24 14.513h-6.995v3.44H7.027Zm-.001 5.803h9.978v3.495H7.026Z" fill="#fff"/></symbol><symbol id="thick_arrow_up" viewBox="0 0 24 24"><path fill="#fff" d="M7.027 14.513H0L12.009 0 24 14.513h-6.995V24H7.027v-9.487z"/></symbol><symbol id="time" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2ZM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8Zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67V7Z"/></symbol><symbol id="upload" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M19 12V5H5v7H3V3h18v9h-2Zm-6-.67 2.59 2.58L17 12.5l-5-5-5 5 1.41 1.41L11 11.33V21h2v-9.67Z"/></symbol><symbol id="video" viewBox="0 0 24 24"><path d="m18 4 2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H2v16h20V4z"/></symbol><symbol id="videocam" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M17 10.5V6H3v12h14v-4.5l4 4v-11l-4 4z"/></symbol><symbol id="videocam_off" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M21 16.61V6.5l-4 4V6h-6.61zM3.41 1.86 2 3.27 4.73 6H3v12h13.73l3 3 1.41-1.41z"/></symbol><symbol id="view_detailed" viewBox="0 0 768 768"><path d="M320 160v192h350.016V160zM128 576h160.992V160H128zm192 0h350.016V384H320v192z"/></symbol><symbol id="view_grid" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z"/></symbol><symbol id="view_summary" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M4 18h17v-6H4v6zM4 5v6h17V5H4z"/></symbol><symbol id="volume" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></symbol><symbol id="volume_off" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M4.34 2.93 2.93 4.34 7.29 8.7 7 9H3v6h4l5 5v-6.59l4.18 4.18c-.65.49-1.38.88-2.18 1.11v2.06a8.94 8.94 0 0 0 3.61-1.75l2.05 2.05 1.41-1.41L4.34 2.93zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zm-7-8-1.88 1.88L12 7.76zm4.5 8A4.5 4.5 0 0 0 14 7.97v1.79l2.48 2.48c.01-.08.02-.16.02-.24z"/></symbol><symbol id="vr" viewBox="0 0 24 24"><path d="M3 8.5v5l-1-1v-3l1-1zm18 0v5l1-1v-3l-1-1zm-3-1.6c-1.3-.3-2-.4-6-.4-3 0-4.7.1-6 .4-1 .3-2 .6-2 1.6v6c0 1 3 3 4 3 2 0 3-1 4-1s2 1 4 1c1 0 4-2 4-3v-6c0-1-1-1.3-2-1.6zm-9.5 6.6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm7 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></symbol><symbol id="warning" viewBox="0 0 768 768"><path d="M416 448h-64V320h64zm0 128h-64v-64h64zM32 672h704L384 64 32 672z"/></symbol><symbol id="wifi" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0zm0 0h24v24H0V0z"/><path d="m1 9 2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8 3 3 3-3a4.237 4.237 0 0 0-6 0zm-4-4 2 2a7.074 7.074 0 0 1 10 0l2-2C15.14 9.14 8.87 9.14 5 13z"/></symbol><symbol id="wrench" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12.09 2.91C10.08.9 7.07.49 4.65 1.67l4.34 4.34-3 3-4.34-4.34C.48 7.1.89 10.09 2.9 12.1a6.507 6.507 0 0 0 6.89 1.48l9.82 9.82 3.71-3.71-9.78-9.79c.92-2.34.44-5.1-1.45-6.99z"/></symbol></svg>')),Promise.resolve()}(W,te)},deps:[T.jv,a.H7],multi:!0},fe=(()=>{class W{}return W.\u0275fac=function(ie){return new(ie||W)},W.\u0275mod=D.oAB({type:W}),W.\u0275inj=D.cJS({providers:[se,{provide:y.Bq,useValue:Object.assign(Object.assign({},new y.vA),{maxWidth:w.ng.isMobileFromUserAgent()?"calc(100vw - 32px)":"80vw"})}],imports:[[n.ez,m.o9,i.JF,C,s.aw,p.N,r.t,l.Bz]]}),W})();D.B6R(h.D,[o.N,F.e,n.mk,B.oO,U.xw,U.Wh,n.O5,U.SQ,I.Ou,_.E,f.xZ,l.yS,E.VQ,c.JJ,c.On,n.sg,E.U0,A.Lv,x.oG,G.lW,n.tP,V.h],[s.X$]),D.B6R(t.A,[U.Wh,o.N,F.e,U.xw,n.O5,p.V,U.yH,n.mk,B.oO,U.SQ,I.Ou,_.E,U.XD,n.tP,G.lW,V.h],[s.X$]),D.B6R(u.O,[U.yH,U.xw,o.N,U.Wh,U.SQ,n.O5,I.Ou,p.V,_.E,n.sg,G.lW,V.h,n.tP,r.d],[s.X$]);var $=e(60772),ue=(e(9082),e(19741),e(59756),e(52269));class X{constructor(te){this.reference=te}get dialogRef(){return this.reference instanceof y.so&&this.reference.componentInstance instanceof h.D?this.reference:void 0}get bottomSheetRef(){return this.reference instanceof P.oL&&this.reference.instance instanceof t.A?this.reference:void 0}get threeQuarterSheetRef(){return this.reference instanceof y.so&&this.reference.componentInstance instanceof u.O?this.reference:void 0}get instance(){var te,ie,Q,k,oe;return null!==(k=null!==(ie=null===(te=this.dialogRef)||void 0===te?void 0:te.componentInstance)&&void 0!==ie?ie:null===(Q=this.bottomSheetRef)||void 0===Q?void 0:Q.instance)&&void 0!==k?k:null===(oe=this.threeQuarterSheetRef)||void 0===oe?void 0:oe.componentInstance}get primaryButtonClick(){var te;return null===(te=this.instance)||void 0===te?void 0:te.primaryButtonClick}get secondaryButtonClick(){var te;return null===(te=this.instance)||void 0===te?void 0:te.secondaryButtonClick}get augmentedButtonClick(){return this.instance instanceof u.O?this.instance.augmentedButtonClick:void 0}get radioButtonClick(){return this.instance instanceof h.D||this.instance instanceof u.O?this.instance.radioButtonClick:void 0}get checkboxState(){var te,ie;return null===(ie=null===(te=this.instance)||void 0===te?void 0:te.data)||void 0===ie?void 0:ie.checkboxState}get radioOptionSelected(){var te,ie;return null===(ie=null===(te=this.instance)||void 0===te?void 0:te.data)||void 0===ie?void 0:ie.radioOptionSelected}close(){var te,ie,Q;null===(te=this.dialogRef)||void 0===te||te.close(),null===(ie=this.bottomSheetRef)||void 0===ie||ie.dismiss(),null===(Q=this.threeQuarterSheetRef)||void 0===Q||Q.close()}afterClosed(){var te,ie,Q,k,oe;return null!==(k=null!==(ie=null===(te=this.dialogRef)||void 0===te?void 0:te.afterClosed())&&void 0!==ie?ie:null===(Q=this.bottomSheetRef)||void 0===Q?void 0:Q.afterDismissed())&&void 0!==k?k:null===(oe=this.threeQuarterSheetRef)||void 0===oe?void 0:oe.afterClosed()}afterOpened(){var te,ie,Q,k,oe;return null!==(k=null!==(ie=null===(te=this.dialogRef)||void 0===te?void 0:te.afterOpened())&&void 0!==ie?ie:null===(Q=this.bottomSheetRef)||void 0===Q?void 0:Q.afterOpened())&&void 0!==k?k:null===(oe=this.threeQuarterSheetRef)||void 0===oe?void 0:oe.afterOpened()}}let j=(()=>{class W{constructor(ie,Q,k){this.matDialog=ie,this.matBottomSheet=Q,this.tvMode=!!k.tvMode}open(ie,Q){let k;return ie.autoFocus=!1,k=this.tvMode?ie.data.checkbox||ie.data.radioButtonOptions||(null==Q?void 0:Q.preferThreeQuarterSheet)?u.O.open(this.matDialog,ie):t.A.open(this.matBottomSheet,ie,this.tvMode):h.D.open(this.matDialog,ie),new X(k)}closeAll(){this.matDialog.closeAll(),this.matBottomSheet.dismiss()}}return W.\u0275fac=function(ie){return new(ie||W)(D.LFG(y.uw),D.LFG(P.ch),D.LFG($.i,8))},W.\u0275prov=D.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W})();var K=e(9729),Z=e(8869),L=e(11479)},99652:(He,de,e)=>{"use strict";e.d(de,{b:()=>t,q:()=>a});var n=e(82516),i=e(89919),D=e(9170),m=e(67202),y=e(33927),T=e(92597),r=e(83720),a=(()=>{return(w=a||(a={})).Keyboard="Keyboard",w.Gamepad="Gamepad",w.Mouse="Mouse",w.Touch="Touch",a;var w})(),s=e(2316),p=e(6484),l=e(68637);let t=(()=>{class w{constructor(u,o,f){this.gamepadService=o,this.ngZone=f,this.logger=u.getLogger("InputModalityService"),this.ngZone.runOutsideAngular(()=>{const c=(0,n.R)(document,"keydown").pipe((0,D.h)(G=>G.isTrusted),(0,m.h)(a.Keyboard)),g=this.gamepadService.isAnyGamepadInUse$.pipe((0,D.h)(G=>!0===G),(0,m.h)(a.Gamepad)),I=(0,n.R)(document,"pointerdown").pipe((0,D.h)(G=>"mouse"===G.pointerType||"touch"===G.pointerType),(0,y.U)(G=>{switch(G.pointerType){case"mouse":return a.Mouse;case"touch":return a.Touch}}));this.inputModalityChanged$=(0,i.T)(c,g,I).pipe((0,T.d)(1),(0,r.x)())})}}return w.\u0275fac=function(u){return new(u||w)(s.LFG(p.ed),s.LFG(l.S),s.LFG(s.R0b))},w.\u0275prov=s.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},74540:(He,de,e)=>{"use strict";e.d(de,{uf:()=>n,rA:()=>i,KN:()=>D});const n=":server/oauth/authorize?response_type=code&scope=user_token&client_id=:clientId&redirect_uri=:redirectUri&prompt=login&locale=:locale",i="&preferred_auth=:preferredAuth",D={userId:"",core:{displayName:"",primaryEmail:"",birthdate:"",preferredLocale:"",primaryEmailVerified:"",created:"",lastLogin:"",passwordLastChanged:"",linkedAccounts:{}},privacySettings:{},isAuthenticated:!1}},77879:(He,de,e)=>{"use strict";e.d(de,{L:()=>T,z:()=>r});var n=e(81134),i=e(85816),D=e(74540),m=e(202);class T{static encode(s){const p=new T;return p.data=window.btoa(encodeURIComponent(JSON.stringify(s))),p}static decode(s){return JSON.parse(decodeURIComponent(window.atob(s.data)))}}class r{constructor(s){this.data=(0,m.isNil)(s)?{userToken:null,user:D.KN}:s}static loadFrom(s,p){const l=(0,m.isEmpty)(p)?"session":`sdk/${p}/session`;return s.readBlock(l).pipe((0,i.zg)(t=>(0,n.of)(new r(T.decode(t)))))}get user(){return this.data.user}set user(s){this.data.user=s}get sessionToken(){return this.sessionTokenString}set sessionToken(s){this.sessionTokenString=s}get userToken(){return this.data.userToken}set userToken(s){this.data.userToken=s}hasUserToken(){return!(0,m.isNil)(this.data.userToken)}hasSessionToken(){return!(0,m.isNil)(this.sessionToken)}writeTo(s,p){const l=(0,m.isEmpty)(p)?"session":`sdk/${p}/session`;return s.writeBlock(l,T.encode(this.data))}get affiliateStatus(){return this.data.isAffiliated}set affiliateStatus(s){this.data.isAffiliated=s}get expiry(){return this.data.expiry}set expiry(s){this.data.expiry=s}}},54848:(He,de,e)=>{"use strict";e.d(de,{Lh:()=>b,tm:()=>l,Zl:()=>xt,Vg:()=>n,gw:()=>B});class n{constructor(){}}var i=e(74540),D=e(77879),a=e(2984),p=e(2316);let l=(()=>{class Ye{}return Ye.\u0275fac=function(ge){return new(ge||Ye)},Ye.\u0275prov=p.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();var t=e(54364),w=e(53882),h=(()=>{return(Ye=h||(h={})).Browser="Browser",Ye.Cef="Cef",Ye.Android="Android",h;var Ye})(),u=e(80226),o=e(90490),f=e(45871),c=e(81134),g=e(20088),I=e(85816),G=e(67202),x=e(98636),E=e(18293),P=e(33927),v=e(9170),O=e(71435),C=e(202),_=e(3076),F=(()=>{return(Ye=F||(F={})).ShowLoginDialogStarted="Showing Login Dialog",Ye.ShowLoginDialogCompleted="Login Dialog Shown",Ye.LoginStarted="Login Started",Ye.LoginCompleted="Login Completed",Ye.LoginAbortedByUser="Login Aborted: User Cancelled Login",Ye.LoginAbortedAlreadyLoggedIn="Login Aborted: Already Logged In",Ye.LoginFailed="Login Failed",Ye.LogoutStarted="Logout Started",Ye.LogoutCompleted="Logout Complted",Ye.LogoutFailed="Logout Failed",F;var Ye})(),V=e(56226);class b extends V.xv{constructor(rt){super("Could not fetch delegate token",rt)}}class B extends V.xv{constructor(){super("invalid or missing userSession parameter",null)}}var U=e(73159),A=e(6484),S=e(90425),Y=e(28416),se=e(42720),fe=e(53466),$=e(79911),ae=e(89166),me=e(71906);const ye="JARVIS",ue=".com",j=3e4,Z=2,L=1e3;let W=(()=>{class Ye{constructor(ge,Ve,at,ve,Ze,Ie,$e,ze){this.jarvisConfig=ge,this.endpointFactory=Ve,this.bridgeService=at,this.systemInfoService=ve,this.distributedtracingUtilService=Ze,this.appConfig=Ie;const{defaultRetries:_t=Z,defaultTimeBetweenRetries:be=L,defaultTimeout:pt=j}=ge,nn={config:{maxRetries:_t,timeout:pt,timeBetweenRetries:be}},tn={config:{timeout:1e4,maxRetries:_t,timeBetweenRetries:be}};this.endpointDelegateRequest=this.endpointFactory.createEndpoint(nn),this.endpointDelegateRedeem=this.endpointFactory.createEndpoint(nn),this.endpointUserLogin=this.endpointFactory.createEndpoint(nn),this.endpointClientLogin=this.endpointFactory.createEndpoint(nn),this.endpointClientChain=this.endpointFactory.createEndpoint(nn),this.endpointProfileUser=this.endpointFactory.createEndpoint(nn),this.endpointThirdPartyProvider=this.endpointFactory.createEndpoint(nn),this.endpointRequestVerify=this.endpointFactory.createEndpoint(nn),this.endpointProxyCall=this.endpointFactory.createEndpoint(nn),this.endpointPingServer=this.endpointFactory.createEndpoint(tn),this.endpointClientSettings=this.endpointFactory.createEndpoint(nn),this.logger=$e.getLogger("libraries/jarvis-http.service"),this.fastestDomainStream=ze.createStream(this.getFastestJarvisDomain.bind(this))}get accountsUrl$(){return this.fastestDomainStream.get$().pipe((0,fe.q)(1),(0,P.U)(ge=>this.jarvisConfig.accountsUrl.replace(ue,ge)))}get serverUrl$(){return this.fastestDomainStream.get$().pipe((0,fe.q)(1),(0,P.U)(ge=>this.jarvisConfig.url.replace(ue,ge)))}getFastestJarvisDomain(){const ge={reportRequestData:{originalService:ye,serviceUseCase:"JARVIS_Ping"}};let Ve=0;const at=this.distributedtracingUtilService.startSpan(ae.j1.GetFastestDomain),ve=[],Ze=Date.now();return this.jarvisConfig.urlDomains.forEach(Ie=>{const $e=this.jarvisConfig.url.replace(".com/api/1",`${Ie}/ping`),ze=this.endpointPingServer.get($e,ge).pipe((0,x.b)(()=>this.logger.info("url",$e,"response time",Date.now()-Ze)));ve.push(this.distributedtracingUtilService.handleHttpEndpointSpan(ze,ge,ae.j1.JarvisPing,at).pipe((0,G.h)(Ie),(0,x.b)(()=>{this.logger.info(`Jarvis domain set to ${Ie}`),at&&at.setTag(ae.NI.Error,!1)}),(0,E.K)(_t=>(this.logger.error(`Ping request to ${$e} failed with error ${_t}`),Ve++,Ve>=this.jarvisConfig.urlDomains.length?(this.logger.error("All pings to jarvis servers failed, selecting default"),at&&at.setTag(ae.NI.Error,!0),(0,c.of)(ue)):S.C))))}),(0,Y.S3)(ve).pipe((0,x.b)(Ie=>{at&&at.setTag(ae.NI.FastestJarvisDomain,Ie),this.distributedtracingUtilService.closeSpan(at)}))}getJarvisClientSettings(ge){const at=this.endpointClientSettings.get(`${this.jarvisConfig.url}/settings/client/${this.jarvisConfig.clientId}`);return this.distributedtracingUtilService.handleHttpEndpointSpan(at,{},ae.j1.ClientSettings,ge)}getLoginToken(ge){if((0,C.isNil)(ge)||0===ge.trim().length)throw new Error("invalid or missing accessCode parameter");const at={body:{grant_type:"authorization_code",scope:"Any",code:ge,redirect_uri:this.jarvisConfig.redirectUrl,client_id:this.jarvisConfig.clientId},reportRequestData:{originalService:ye,serviceUseCase:"JARVIS_Get_Login_Token"}};return this.serverUrl$.pipe((0,I.zg)(ve=>this.endpointDelegateRequest.post(`${ve}/oauth/resource`,at)))}getDelegateToken(ge,Ve,at){if((0,C.isNil)(ge)||0===ge.trim().length)return(0,f._)(new B);const Ze={body:{clientId:Ve},headers:this.getJarvisAuthorizeHeaders(`${ge}:`),reportRequestData:{originalService:ye,serviceUseCase:"JARVIS_Get_Delegate_Token"}},Ie=this.serverUrl$.pipe((0,I.zg)($e=>this.endpointUserLogin.post(`${$e}/authentication/delegate/request`,Ze)));return this.distributedtracingUtilService.handleHttpEndpointSpan(Ie,Ze,ae.j1.DelegateToken,at)}proxyPost(ge,Ve,at,ve){const Ze={body:ve,headers:this.getJarvisAuthorizeHeaders(`${ge}:`),params:at};return this.serverUrl$.pipe((0,I.zg)(Ie=>this.endpointProxyCall.post(`${Ie}/proxy/${Ve}`,Ze)))}redeemDelegateToken(ge,Ve){if((0,C.isNil)(ge)||0===ge.trim().length)throw new Error("invalid or missing delegateToken parameter");return(0,se.D)([this.systemInfoService.getSystemInfo(),this.serverUrl$]).pipe((0,I.zg)(([at,ve])=>{const Ie={body:{clientId:this.jarvisConfig.clientId,clientDescription:this.jarvisConfig.clientDescription,deviceId:at.DeviceId,scope:Ve||"session_token"},headers:this.getJarvisAuthorizeHeaders(`${ge}:`),reportRequestData:{originalService:ye,serviceUseCase:"JARVIS_Redeem_Delegate_Token"}};return this.endpointDelegateRedeem.post(`${ve}/authentication/delegate/redeem`,Ie)}))}getUserToken(ge){if((0,C.isNil)(ge)||0===ge.trim().length)throw new Error("invalid or missing loginToken parameter");return(0,se.D)([this.systemInfoService.getSystemInfo(),this.serverUrl$]).pipe((0,I.zg)(([Ve,at])=>{const Ze={body:{clientId:this.jarvisConfig.clientId,clientDescription:this.jarvisConfig.clientDescription,deviceDescription:Ve.SystemName,deviceId:Ve.DeviceId},headers:this.getJarvisAuthorizeHeaders(`${ge}:`),reportRequestData:{originalService:ye,serviceUseCase:"JARVIS_Get_User_Token"}};return this.endpointUserLogin.post(`${at}/authentication/user/login`,Ze)}),(0,E.K)(Ve=>(this.logger.error("Error while accessing the endpoint",Ve),(0,f._)(Ve))))}getSessionToken(ge){if((0,C.isNil)(ge)||0===ge.trim().length)throw new Error("invalid or missing userToken parameter");return(0,se.D)([this.systemInfoService.getSystemInfo(),this.serverUrl$]).pipe((0,I.zg)(([Ve,at])=>{const Ze={body:{clientCapabilities:["OAuthPortal"],clientId:this.jarvisConfig.clientId,clientDescription:this.jarvisConfig.clientDescription.replace("{VERSION}",this.appConfig.get().build.version),deviceId:Ve.DeviceId},headers:this.getJarvisAuthorizeHeaders(`${ge}:`),reportRequestData:{originalService:ye,serviceUseCase:"JARVIS_Get_Session_Token"}};return this.endpointClientLogin.post(`${at}/authentication/client/login`,Ze)}))}chainSession(ge){if((0,C.isNil)(ge)||0===ge.trim().length)throw new Error("invalid or missing userSession parameter");return(0,se.D)([this.systemInfoService.getSystemInfo(),this.serverUrl$]).pipe((0,I.zg)(([Ve,at])=>{const Ze={body:{clientId:this.jarvisConfig.clientId,deviceId:Ve.DeviceId},headers:this.getJarvisAuthorizeHeaders(`${ge}:`),reportRequestData:{originalService:ye,serviceUseCase:"JARVIS_Chain_Session"}};return this.endpointClientChain.post(`${at}/authentication/client/chain`,Ze)}))}getUserInfo(ge){if((0,C.isNil)(ge)||0===ge.trim().length)throw new Error("invalid or missing sessionToken parameter");const Ve={headers:this.getJarvisAuthorizeHeaders(`${ge}:`),reportRequestData:{originalService:ye,serviceUseCase:"JARVIS_Get_User_Info"}};return this.serverUrl$.pipe((0,I.zg)(at=>this.endpointProfileUser.get(`${at}/profile/user`,Ve)))}getProviderInfo(ge){if((0,C.isNil)(ge)||0===ge.trim().length)throw new Error("invalid or missing sessionToken parameter");const Ve={headers:this.getJarvisAuthorizeHeaders(`${ge}:`),reportRequestData:{originalService:ye,serviceUseCase:"JARVIS_Get_Third_Party_Provider_Info"}};return this.serverUrl$.pipe((0,I.zg)(at=>this.endpointThirdPartyProvider.get(`${at}/authentication/hints/token/linkedaccount`,Ve)))}requestEmailVerify(ge){if((0,C.isNil)(ge)||0===ge.trim().length)throw new Error("invalid or missing emailAddress parameter");const Ve={body:{email:ge},reportRequestData:{originalService:ye,serviceUseCase:"JARVIS_Request_Email_Verify"}};return this.serverUrl$.pipe((0,I.zg)(at=>this.endpointRequestVerify.post(`${at}/profile/user/email/requestverify`,Ve)))}getJarvisAuthorizeHeaders(ge){const Ve=window.btoa(ge);return{[$.n0.authorization]:`Basic ${Ve}`}}getDeviceId(){return this.bridgeService.executeCommand(a.Iq.GenericCommand("QUERY_DEVICE_ID","",""),{})}getSharedUserData(ge,Ve,at){if((0,C.isNil)(ge)||0===ge.trim().length)throw new Error("invalid or missing userSession parameter");const ve={headers:this.getJarvisAuthorizeHeaders(`${ge}:`)};return this.serverUrl$.pipe((0,I.zg)(Ze=>this.endpointUserLogin.get(`${Ze}/datastore/user/shared/${Ve}/client/${at}`,ve)))}}return Ye.\u0275fac=function(ge){return new(ge||Ye)(p.LFG(l),p.LFG($.V9),p.LFG(A.dF),p.LFG(A.Ob),p.LFG(ae.Dc),p.LFG(me.XL),p.LFG(A.ed),p.LFG(_.O_))},Ye.\u0275prov=p.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:"root"}),Ye})();var te=e(76491),ie=e(82516),Q=e(41618),k=e(79902),oe=e(78767),N=e(17163),q=e(1143);let xe=(()=>{class Ye{constructor(ge,Ve,at,ve){this.bridgeService=ge,this.nativeEventService=at,this.distributedTracingUtilService=ve,this.checkWindowOpenInterval=200,this.loginWindow=null,this.isWindowOpen=new te.X(!1),this.logger=Ve.getLogger("jarvis/o-auth")}oAuthLogin(ge,Ve){if(!ge||0===ge.trim().length)throw new Error("invalid or missing Login Url");if(!Ve)throw new Error("invalid or missing OAuth Config");const at=this.getWindowParamsString(Ve.windowParams),ve=this.distributedTracingUtilService.startSpan(ae.j1.JarvisOAuth);ge=this.distributedTracingUtilService.getFormattedUrlForHttpPopupSpan(ge,ve);const Ze=(0,ie.R)(window,"message").pipe((0,v.h)($e=>this.validateMessageEvent($e)),(0,P.U)($e=>(this.logger.info("Captured OAuth data via post message:",$e.data),$e.data.error?this.distributedTracingUtilService.closeHttpPopupSpan(ve,!0,$e.data.error):this.distributedTracingUtilService.closeHttpPopupSpan(ve,!1,{failedUrl:ge,errorCode:"",errorText:""}),this.loginWindow.close(),this.isWindowOpen.next(!1),this.getMessageAccessCode($e))),(0,g.P)());this.loginWindow=window.open(ge,Ve.popUpWindowName,at),this.logger.info("login window opened with url",ge),this.isWindowOpen.next(!0);const Ie=(0,ie.R)(window,"focus").pipe((0,k.w)($e=>($e&&$e.preventDefault(),this.bridgeService.executeCommand(a.Gh.Common.Windowcontrol.Focus,{name:"app_oauth_window_with_back_button"})))).subscribe($e=>{},$e=>{this.logger.error("Failed to set focus with error: ",$e)});if(Ve.useAppUrl){const $e=(0,Q.F)(this.checkWindowOpenInterval).pipe((0,oe.n)(()=>!this.loginWindow.closed),(0,P.U)(_t=>(this.isWindowOpen.next(!1),Ie.unsubscribe(),null)),(0,g.P)()),ze=this.nativeEventService.getNativeEvent$(A.Nx.RouteChange).pipe((0,v.h)(_t=>_t.newRoute.startsWith("oauth/")),(0,P.U)(_t=>(this.isWindowOpen.next(!1),Ie.unsubscribe(),this.loginWindow.close(),this.getUrlAccessCode(_t.newRoute))),(0,g.P)());return(0,Y.S3)($e,ze)}return(0,Q.F)(this.checkWindowOpenInterval).pipe((0,oe.n)(()=>!this.loginWindow.closed),(0,N.M)(Ze.pipe((0,q.O)(null))),(0,P.U)(([$e,ze])=>(this.isWindowOpen.next(!1),Ie.unsubscribe(),ze)),(0,g.P)())}checkIsWindowOpen(){return this.isWindowOpen.asObservable()}tryCloseOAuthWindow(){null!==this.loginWindow&&!this.loginWindow.closed&&this.loginWindow.close()}getWindowParamsString(ge={}){let Ve="";ge.toolbar&&(Ve+=`toolbar=${ge.toolbar},`),ge.location&&(Ve+=`location=${ge.location},`),ge.menubar&&(Ve+=`menubar=${ge.menubar},`),ge.fullscreen&&(Ve+=`fullscreen=${ge.fullscreen},`),ge.resizable&&(Ve+=`resizable=${ge.resizable},`),ge.scrollbars&&(Ve+=`scrollbars=${ge.scrollbars},`);const at=ge.width?ge.width:window.innerWidth,ve=ge.height?ge.height:window.innerHeight,Ze=ge.top?ge.top:window.screenY+window.innerHeight/2-ve/2;return Ve+=`width=${at},`,Ve+=`height=${ve},`,Ve+=`left=${ge.left?ge.left:window.screenX+window.innerWidth/2-at/2},`,Ve+=`top=${Ze},`,Ve}validateMessageEvent(ge){let Ve=ge&&ge.data;return A.ng.isBrowserPlatform()&&(Ve=Ve&&ge.origin===window.location.origin&&"oauth"===ge.data.key),!!Ve}getCodeFromLocalStorage(ge){const Ve=window.localStorage.getItem(ge);window.localStorage.removeItem(ge);try{return JSON.parse(Ve)}catch(at){return this.logger.error("malformed access code object",Ve),null}}getMessageAccessCode(ge){let Ve;return Ve=A.ng.isBrowserPlatform()?this.getCodeFromLocalStorage((0,C.get)(ge,"data.key")):ge.data,(0,C.get)(Ve,"code")}getUrlAccessCode(ge){const Ve=ge.indexOf("?")>-1?ge.split("?"):ge.split("#/");if(Ve.length>1){let at=new URLSearchParams(Ve[1]).get("code");const ve=new URLSearchParams(Ve[1]).get("access_token");return at?at=at.split("#/")[0]:ve&&(at=ve),at}return""}}return Ye.\u0275fac=function(ge){return new(ge||Ye)(p.LFG(A.dF),p.LFG(A.ed),p.LFG(A.o1),p.LFG(ae.Dc))},Ye.\u0275prov=p.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:"root"}),Ye})();var ct=e(57390),Se=(()=>{return(Ye=Se||(Se={})).ALREADY_LOGGED_IN="Already logged in",Ye.USER_ABORTED_LOGIN="User aborted login",Se;var Ye})();let Ge=(()=>{class Ye extends n{constructor(ge,Ve,at,ve,Ze,Ie,$e,ze,_t,be){super(),this.config=ge,this.jarvisHttpService=at,this.oAuthService=ve,this.sharedStorage=Ze,this.bridgeService=Ie,this.localeService=$e,this.networkStatus=_t,this.gfnSdkService=be,this.SAFE_RETRY_COUNT=5,this.activelyRenewingsession=!1,this.loginTransitionSubject=new u.t(1),this.logger=Ve.getLogger("jarvis/desktop"),this.logger.info("initialize"),ge.sdkClient&&this.logger.info("Running in GFN SDK mode for SDK client",ge.sdkClient),window.name!==ge.appWindowName&&(window.name=ge.appWindowName),this.sessionTokenSubscription=ze.createStream(this.getSession.bind(this)),this.jarvisUserSubscription=ze.createStream(this.getCurrentUser.bind(this)),this.refreshUser()}get sessionToken(){return this.sessionTokenSubscription.get$().pipe((0,g.P)())}handleError(ge,Ve){this.logger.error(ge),Ve.next(!1),Ve.complete()}clearCookies(){const ge=this.bridgeService.executeCommand(a.Gh.Common.Applicationcontrol.DeleteCookies,{url:".facebook.com",cookiename:""}),Ve=this.bridgeService.executeCommand(a.Gh.Common.Applicationcontrol.DeleteCookies,{url:".google.com",cookiename:""});return(0,o.$R)(ge,Ve)}updateTransitionState(ge,Ve,at){const ve=ge?"loading":"not loading";(0,C.isNil)(at)?(this.logger.info(`Jarvis state has changed to [${Ve}] and is now ${ve}`),this.loginTransitionSubject.next({state:Ve,isLoading:ge})):(this.logger.error(`Jarvis state has changed to [${Ve}] and is now ${ve} with error: ${at}`),this.loginTransitionSubject.next({state:Ve,isLoading:ge,error:at}))}login(ge=!1,Ve){this.updateTransitionState(!0,F.ShowLoginDialogStarted);const at=new u.t(1);return(0,o.$R)(this.jarvisUserSubscription.get$(),this.localeService.localeChanged).pipe((0,g.P)(),(0,I.zg)(([ve,Ze])=>ve.userId===i.KN.userId||ge?(this.authServiceSubscription&&this.authServiceSubscription.unsubscribe(),this.buildJarvisUrl(this.config,Ze,Ve)):(this.updateTransitionState(!1,F.ShowLoginDialogCompleted),(0,f._)(Se.ALREADY_LOGGED_IN))),(0,I.zg)(ve=>this.clearCookies().pipe((0,G.h)(ve))),(0,x.b)(()=>this.updateTransitionState(!1,F.ShowLoginDialogCompleted)),(0,I.zg)(ve=>this.oAuthService.oAuthLogin(ve,this.config.oAuthConfig)),(0,I.zg)(ve=>(0,C.isNil)(ve)?(0,f._)(Se.USER_ABORTED_LOGIN):(0,c.of)(ve)),(0,x.b)(()=>this.updateTransitionState(!0,F.LoginStarted)),(0,I.zg)(ve=>this.attemptLogin(ve))).subscribe(()=>{at.next(!0),at.complete(),this.updateTransitionState(!1,F.LoginCompleted)},ve=>{switch(ve){case Se.ALREADY_LOGGED_IN:at.next(!0),at.complete(),this.updateTransitionState(!1,F.LoginAbortedAlreadyLoggedIn);break;case Se.USER_ABORTED_LOGIN:at.next(!0),at.complete(),this.updateTransitionState(!1,F.LoginAbortedByUser);break;default:this.updateTransitionState(!1,F.LoginFailed,ve),this.handleError(ve,at)}}),at.asObservable()}logout(){this.updateTransitionState(!0,F.LogoutStarted);const ge=new u.t(1);return this.storeSession(new D.z).subscribe(Ve=>{this.sessionTokenSubscription.refresh().pipe((0,I.zg)(()=>this.jarvisUserSubscription.refresh())).subscribe(()=>{this.logger.info("Logging out user."),ge.next(!0),ge.complete(),this.updateTransitionState(!1,F.LogoutCompleted)})},Ve=>(this.updateTransitionState(!1,F.LogoutFailed,Ve),this.handleError(Ve,ge))),ge.asObservable()}refreshUser(){return this.refreshSession().pipe((0,I.zg)(ge=>this.jarvisUserSubscription.refresh()))}refreshSession(){return this.activelyRenewingsession?this.sessionToken:(this.activelyRenewingsession=!0,this.sessionTokenSubscription.refresh().pipe((0,x.b)(()=>this.activelyRenewingsession=!1)))}requestVerificationEmail(ge){return this.jarvisHttpService.requestEmailVerify(ge).pipe((0,G.h)(!0),(0,E.K)(Ve=>(this.logger.error(Ve),(0,c.of)(!1))))}getDelegateToken(ge,Ve=!1,at){return this.safelyFetchData(ve=>ve.hasSessionToken()?this.jarvisHttpService.getDelegateToken(ve.sessionToken,ge,at).pipe((0,P.U)(Ze=>({delegateToken:Ze.delegateToken,expiration:new Date(Ze.expiration)})),(0,E.K)((Ze,Ie)=>(this.logger.warn("Could not get delegate token.",Ze),(0,f._)(Ze)))):(0,c.of)(null),null,Ve).pipe((0,E.K)(ve=>(0,f._)(ve instanceof B?ve:new b(ve))))}proxyPost(ge,Ve,at,ve){return this.safelyFetchData(Ze=>Ze.hasSessionToken()?this.jarvisHttpService.proxyPost(Ze.sessionToken,ge+"/"+Ve,at,ve):(0,c.of)(null),null,!0)}get accountsUrl$(){return this.jarvisHttpService.accountsUrl$}getJarvisClientSettings(ge){return this.jarvisHttpService.getJarvisClientSettings(ge)}get accountStatusChanged(){let ge;return this.jarvisUserSubscription.get$().pipe((0,v.h)(Ve=>(0,C.isNil)(ge)||!(0,C.isEqual)(ge.userId,Ve.userId)||!(0,C.isEqual)(ge.core.primaryEmailVerified,Ve.core.primaryEmailVerified)),(0,x.b)(Ve=>{ge=Ve}))}getThirdPartyProviderInfo(){return this.safelyFetchData(ge=>ge.hasSessionToken()?this.jarvisHttpService.getProviderInfo(ge.sessionToken).pipe((0,P.U)(Ve=>(this.logger.info("Provider received: ",Ve),Ve)),(0,E.K)(Ve=>(this.logger.error("Error to fetch Provider: ",Ve),404===Ve.status?(this.logger.info("Handling as user logged in through native provider"),(0,c.of)(null)):(0,f._)(Ve)))):(0,f._)("Has no session token"),null,!0)}get jarvisUserDataChanged(){let ge;return this.jarvisUserSubscription.get$().pipe((0,v.h)(Ve=>!(0,C.isEqual)(ge,Ve)),(0,P.U)(Ve=>(ge=Ve,{newJarvisUser:Ve,oldJarvisUser:ge})))}get loginTransitionState(){return this.loginTransitionSubject.asObservable()}get isUserTokenAvailable(){return(0,C.isNil)(this.session)?(this.logger.info("Loading session object from shared storage to check if user token is present"),D.z.loadFrom(this.sharedStorage,this.config.sdkClient).pipe((0,P.U)(ge=>ge.hasUserToken()),(0,E.K)(()=>(0,c.of)(!1)))):(0,c.of)(this.session.hasUserToken())}getSharedUserData(ge,Ve,at=!1){return this.safelyFetchData(ve=>ve.hasSessionToken()?this.jarvisHttpService.getSharedUserData(ve.sessionToken,ge,Ve):(0,c.of)(null),null,at)}getStoredSessionProperty(ge){let Ve;return(0,C.isNil)(this.session)?(this.logger.info("Reading session from sharedstorage"),Ve=D.z.loadFrom(this.sharedStorage,this.config.sdkClient).pipe((0,E.K)(()=>(0,c.of)(new D.z)))):(this.logger.info("Session Info available in memory"),Ve=(0,c.of)(this.session)),Ve.pipe((0,P.U)(at=>{const ve=ge(at);let Ze=!1;const Ie=new Date;return Ze=!(!(0,C.isNil)(at.expiry)&&!(0,C.isNil)(ve))||new Date(at.expiry)<=Ie,{data:ve,expired:Ze}}))}get cachedUser(){return this.logger.info("Fetching the cached user"),this.getStoredSessionProperty(ge=>ge.user)}get cachedUserAndAffiliateStatus(){return this.logger.info("Fetching the cached user and affiliate status"),this.getStoredSessionProperty(ge=>[ge.user,ge.affiliateStatus])}get cachedAffiliateStatus(){return this.logger.info("Fetching cached affiliate status"),this.getStoredSessionProperty(ge=>ge.affiliateStatus)}setCachedAffiliateStatus(ge){return ge!==this.session.affiliateStatus?(this.logger.info("Updating the affiliate status to:",ge),this.session.affiliateStatus=ge,this.storeSession(this.session).pipe((0,G.h)(ge))):(this.logger.info("Skipping the affiliate status update shared storage"),(0,c.of)(ge))}attemptLogin(ge){const Ve=new D.z;return this.jarvisHttpService.getLoginToken(ge).pipe((0,I.zg)(at=>this.jarvisHttpService.getUserToken(at.loginToken)),(0,I.zg)(at=>(Ve.userToken=at.userToken,this.logger.info("Storing session containing only userToken to sharedStorage"),this.storeSession(Ve))),(0,I.zg)(at=>this.sessionTokenSubscription.refresh()),(0,I.zg)(at=>(Ve.sessionToken=at.sessionToken,Ve.expiry=at.expiry,this.session=Ve,this.jarvisUserSubscription.refresh())),(0,I.zg)(at=>(Ve.user=at,this.logger.info("Storing complete session to sharedStorage"),this.storeSession(Ve))))}fetchSession(){return this.activelyRenewingsession=!0,this.jarvisHttpService.getSessionToken(this.session.userToken).pipe((0,x.b)(()=>this.activelyRenewingsession=!1),(0,I.zg)(ge=>(this.session.sessionToken=ge.sessionToken,this.session.expiry=ge.expiration,(0,c.of)(this.session))),(0,E.K)(ge=>(this.logger.info("Error refreshing session with jarvis:",ge),(0,_.f0)(ge)?(this.logger.info("The session refresh failed due to timeout or connection issues. So, will not log out the user"),(0,c.of)(this.session)):(this.logger.info("Error thrown from server. Hence, logging the user out"),(0,c.of)(new D.z)))))}buildJarvisUrl(ge,Ve,at){return this.jarvisHttpService.serverUrl$.pipe((0,P.U)(ve=>{let Ze=i.uf;return Ze=Ze.replace(":server",ve),Ze=Ze.replace(":clientId",ge.clientId),Ze=Ze.replace(":redirectUri",encodeURIComponent(ge.redirectUrl)),Ze=Ze.replace(":locale",Ve),!(0,C.isNil)(at)&&!(0,C.isEmpty)(at)&&(Ze+=i.rA,Ze=Ze.replace(":preferredAuth",at.toString())),Ze}))}safelyFetchData(ge,Ve,at=!1){return this.sessionToken.pipe((0,I.zg)(ve=>(0,C.isNil)(this.session)||this.session.hasSessionToken()||!this.session.hasUserToken()?(0,c.of)(ve):this.sessionTokenSubscription.refresh()),(0,I.zg)(ve=>ge(ve)),(0,E.K)(ve=>401===ve.status?this.refreshSession().pipe((0,E.K)(Ze=>(this.logger.error("Failed to fetchSession",Ze),this.logoutAndReturnObservable(Ve))),(0,I.zg)(Ze=>this.safelyFetchData(ge,Ve,at))):at?(0,f._)(ve):(this.logger.error(ve),(0,c.of)(Ve))))}logoutAndReturnObservable(ge){return this.logout(),(0,c.of)(ge)}getCurrentUser(){return this.safelyFetchData(ge=>{if(this.logger.info("Getting current user"),this.logger.info(`hasSessionToken: ${ge.hasSessionToken()}, hasUserToken: ${ge.hasUserToken()}`),!this.networkStatus.isOnline&&ge.hasUserToken())return this.logger.info("User is offline and session has user token. So returning cached user"),(0,c.of)(ge.user);if(ge.hasSessionToken()){const Ve=!(0,C.isNil)(ge.user)&&!(0,C.isNil)(ge.user.core.primaryEmailVerified);return this.jarvisHttpService.getUserInfo(ge.sessionToken).pipe((0,P.U)(at=>(at.isAuthenticated=!0,at)),(0,I.zg)(at=>(ge.user=at,(0,C.isNil)(at.core.primaryEmailVerified)||Ve?(0,c.of)(ge):(this.logger.info("Primary Email Verified Info Updated. Hence saving userInfo to shared storage"),this.storeSession(ge)))),(0,E.K)(at=>(this.logger.info("Error fetching userInfo from jarvis:",at),(0,_.f0)(at)?(this.logger.info("UserInfo refresh failed due to timeout or connection issue. So, will not log out the user"),(0,c.of)(ge.user)):(this.logger.info("Error to is thrown by jarvis server. Will rethrow this error"),(0,f._)(at)))),(0,P.U)(at=>ge.user))}return ge.hasUserToken()&&!(0,C.isNil)(ge.user)?(this.logger.info("Session fetch failed due to timeout or connection issue, not logging out the user"),(0,c.of)(ge.user)):(0,c.of)(i.KN)},i.KN)}getSession(){return!this.config.sdkClient||!(0,C.isNil)(this.session)&&this.session.hasUserToken()?this.networkStatus.isOnline?this.renewSession():this.loadSessionFromSharedStorage():this.getSessionFromSdk()}renewSession(){return this.activelyRenewingsession=!0,this.loadSessionFromSharedStorage().pipe((0,I.zg)(ge=>ge.hasUserToken()?this.fetchSession():(0,c.of)(ge)),(0,I.zg)(ge=>this.storeSession(ge)),(0,E.K)(ge=>(this.logger.info("Error saving session to shared storage:",ge),(0,c.of)(new D.z))),(0,O.x)(()=>this.activelyRenewingsession=!1))}loadSessionFromSharedStorage(ge){return D.z.loadFrom(this.sharedStorage,ge?void 0:this.config.sdkClient).pipe((0,I.zg)(Ve=>(this.logger.info("Loaded session successfully from shared storage"),this.session=Ve,Ve.hasUserToken()?(0,c.of)(Ve):ge||(0,C.isEmpty)(this.config.sdkClient)?(this.logger.info("Stored session does not have user token. Hence, logging the user out"),(0,c.of)(new D.z)):this.loadSessionFromSharedStorage(!0))),(0,E.K)(Ve=>(this.logger.info("Error loading session from shared storage. Hence logging out the user.",Ve),this.session=new D.z,(0,c.of)(this.session))))}storeSession(ge){return this.session=ge,this.session.writeTo(this.sharedStorage,this.config.sdkClient).pipe((0,I.zg)(Ve=>(0,c.of)(this.session)),(0,E.K)(Ve=>(this.logger.info("Error saving session to shared storage:",Ve),(0,f._)(Ve))))}getSessionFromSdk(){if(!this.networkStatus.isOnline||!(0,C.isNil)(this.session)&&this.session.hasSessionToken())return(0,c.of)(this.session);this.activelyRenewingsession=!0;const ge="sdk/"+this.config.sdkClient;return this.sharedStorage.removeBlock(`${ge}/session`).pipe((0,I.zg)(Ve=>(this.logger.info("Cleared the stored session for SDK node",ge,Ve),this.gfnSdkService.getAuthInfo())),(0,I.zg)(Ve=>(this.logger.info("Reading delegate token passed by SDK client",this.config.sdkClient),Ve.authType===U.Gr.IDM?this.jarvisHttpService.redeemDelegateToken(Ve.authToken):(0,f._)("Token was an authN JWT, could not redeem"))),(0,I.zg)(Ve=>(this.session=new D.z,this.session.sessionToken=Ve.sessionToken,this.storeSession(this.session))),(0,E.K)(()=>(this.logger.error("Unable to redeem delegate token from SDK client",this.config.sdkClient),this.renewSession())),(0,O.x)(()=>{this.activelyRenewingsession=!1}))}}return Ye.\u0275fac=function(ge){return new(ge||Ye)(p.LFG(l),p.LFG(A.ed),p.LFG(W),p.LFG(xe),p.LFG(ct.OA),p.LFG(A.dF),p.LFG(A.OL),p.LFG(_.O_),p.LFG(A._J),p.LFG(U.s))},Ye.\u0275prov=p.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:"root"}),Ye})();const Tt={provide:n,useFactory:function(Ye,rt,ge,Ve,at,ve,Ze,Ie,$e,ze){switch(Ye.platformType){case h.Browser:case h.Cef:return Ye.redirectUrl=Ye.redirectUrlIsRelative?window.location.origin+Ye.redirectUrl:Ye.redirectUrl,new Ge(Ye,rt,Ve,at,ve,ge,Ie,Ze,$e,ze);default:rt.getLogger("jarvisServiceCreator").error("Cannot create JarvisService for unknown platform type: "+Ye.platformType)}},deps:[l,A.ed,A.dF,W,xe,ct.OA,_.O_,A.OL,A._J,U.s]};var Te=e(80181);const Je=[Te.Cq];let xt=(()=>{class Ye{static configure(ge){return{ngModule:Ye,providers:[{provide:l,useValue:ge},Tt,xe]}}}return Ye.\u0275fac=function(ge){return new(ge||Ye)},Ye.\u0275mod=p.oAB({type:Ye}),Ye.\u0275inj=p.cJS({providers:[Tt],imports:[[w.JF,t.ez,...Je],Te.Cq]}),Ye})()},43124:(He,de,e)=>{"use strict";e.d(de,{e6:()=>G,p6:()=>o,XA:()=>B,yz:()=>I,l3:()=>_,nM:()=>O,ys:()=>F,$P:()=>C,KM:()=>f,LP:()=>E,do:()=>ye,i8:()=>Y,MW:()=>x,y0:()=>X,YM:()=>A,wy:()=>c});var n=e(80226),i=e(12702),D=e(42720),m=e(81134),y=e(8117),T=e(90490),r=e(79441),a=e(85816),s=e(33927),p=e(18293),l=e(98636),t=e(79902),w=e(20088),h=e(202),u=e(6484),o=(()=>{return(j=o||(o={})).Full="Full",j.None="None",j.Temp="Temp",o;var j})(),f=(()=>{return(j=f||(f={})).Functional="functional",j.Technical="technical",j.Behavioral="behavioral",f;var j})(),c=(()=>((c||(c={})).Undefined="undefined",c))(),g=(()=>{return(j=g||(g={})).EventsCommonStore="eventsCommonStore",j.EventsDetailStore="eventsDetailStore",j.EventsDetailStoreTechnical="eventsDetailStoreTechnical",j.EventsDetailStoreBehavioral="eventsDetailStoreBehavioral",j.ExperienceControlStore="experienceControlStore",j.UserDataConsentStore="userDataConsentStore",g;var j})(),I=(()=>{return(j=I||(I={})).USER_ID="USER_ID",j.DEVICE_ID="DEVICE_ID",j.SESSION_ID="SESSION_ID",I;var j})(),G=(()=>{return(j=G||(G={})).SharedStorage="SharedStorage",j.LocalStorage="LocalStorage",j.AbHub="AbHub",j.IndexedDb="IndexedDb",G;var j})();class x{constructor(K){this.parameters=K,this.ts=(new Date).toISOString()}}const E={server:"https://events.gfe.nvidia.com",version:"v1.0",schemaVersion:"1.0",defaultRetries:2,defaultTimeBetweenRetries:1e3,defaultTimeout:3e4,msBetweenSendRequest:5e3,maxEventsPerRequest:128,clientId:"",systemInfoEventDelay:1e4},P=new x({}),v={clientId:"{CLIENTID}",clientVer:"{CLIENTVER}",eventSchemaVer:"{EVENTSCHEMAVER}",eventSysVer:"0.12.3",deviceId:c.Undefined,userId:c.Undefined,externalUserId:c.Undefined,idpId:c.Undefined,sessionId:c.Undefined,deviceOS:c.Undefined,deviceOSVersion:c.Undefined,deviceType:c.Undefined,deviceModel:c.Undefined,deviceMake:c.Undefined,clientType:c.Undefined,clientVariant:c.Undefined,sentTs:"",events:[P],integrationId:c.Undefined,browserType:c.Undefined},O={functional:o.None,technical:o.None,behavioral:o.None},C={functional:o.Temp,technical:o.None,behavioral:o.None},_={functional:o.Full,technical:o.None,behavioral:o.None},F={functional:o.Full,technical:o.Full,behavioral:o.None};var V=(()=>{return(j=V||(V={})).Ok="OK",j.InvalidInfoForEventType="INVALID_INFO_FOR_EVENT_TYPE",j.UnknownEventType="UNKNOWN_EVENT_TYPE",j.UnProcessed="UNPROCESSED",j.InvalidExperimentFormat="INVALID_EXPERIMENT_FORMAT",j.ExperimentAlreadyActive="EXPERIMENT_ALREADY_ACTIVE",j.FunctionalConsentNotReceived="FUNCTIONAL_CONSENT_NOT_RECEIVED",V;var j})(),b=(()=>{return(j=b||(b={})).Win="Win",j.Mac="Mac",j.Android="Android",j.NvAndroid="NvAndroid",j.Linux="Linux",j.Web="Web",j.Undefined="undefined",b;var j})();const B={userConsent:O,userId:"",externalUserId:"",idpId:""},U={id:"",cvName:"",group:"",name:"",activationType:I.DEVICE_ID},A=1e3;var S=e(2316);let Y=(()=>{class j{}return j.\u0275fac=function(Z){return new(Z||j)},j.\u0275prov=S.Yz7({token:j,factory:j.\u0275fac}),j})();var se=e(89166),fe=e(79911);let $=(()=>{class j{constructor(Z,L,W){this.sdkConfig=Z,this.endpointFactory=L,this.distributedTracingUtilService=W,this.eventServerEndpoint=this.endpointFactory.createEndpoint({headers:{"Content-Type":"application/json"},config:{timeout:this.sdkConfig.defaultTimeout,timeBetweenRetries:this.sdkConfig.defaultTimeBetweenRetries,maxRetries:this.sdkConfig.defaultRetries},reportRequest:!1})}generateUrl(Z){return this.sdkConfig.server+"/"+this.sdkConfig.version+Z}sendEvent(Z,L,W,te){null!==Z&&Z.hasOwnProperty("sync")&&delete Z.sync;const Q={body:L,headers:{"Content-Type":"application/json","X-Event-Protocol":"1.4"},params:{immediateRequest:JSON.stringify(W)}},k=this.eventServerEndpoint.makeRequestEx("POST",this.generateUrl("/events/json"),Q);return this.distributedTracingUtilService.handleHttpEndpointSpan(k,Q,se.j1.SendTelemetryEvent,te)}sendEventviaBeacon(Z,L,W,te){(null==Z?void 0:Z.hasOwnProperty("sync"))&&delete Z.sync;const ie=new Blob([L],{type:"text/plain"});return navigator.sendBeacon(this.generateUrl("/events/json"),ie),(0,m.of)(!0)}}return j.\u0275fac=function(Z){return new(Z||j)(S.LFG(Y),S.LFG(fe.V9),S.LFG(se.Dc))},j.\u0275prov=S.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})(),ae=(()=>{class j{constructor(){this.windowLocalStorage=null,u.ng.isBrowserPlatform()&&(this.windowLocalStorage=window.localStorage)}getWlsItem(Z,L){return this.windowLocalStorage&&JSON.parse(this.windowLocalStorage.getItem(Z+L))}setWlsItem(Z,L,W){return this.windowLocalStorage&&this.windowLocalStorage.setItem(Z+L,JSON.stringify(W))}removeWlsItem(Z,L){return this.windowLocalStorage&&this.windowLocalStorage.removeItem(Z+L)}getLength(){return this.windowLocalStorage.length}getKey(Z){return this.windowLocalStorage.key(Z)}}return j.\u0275fac=function(Z){return new(Z||j)},j.\u0275prov=S.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})(),me=(()=>{class j{constructor(Z,L,W,te,ie,Q,k){this.config=Z,this.eventSdkService=L,this.logService=W,this.dbCacheService=te,this.dbService=ie,this.networkStatusService=Q,this.windowLocalStorage=k,this.commonData=v,this.defaultConsent=O,this.currentUserConsent=O,this.currentUserConsentUpdated=!1,this.currentUserId=c.Undefined,this.syncedUserConsentInfo=!1,this.syncExperimentsCacheSubject=new n.t(1),this.registeredErrorCallback=this.defaultErrorCallback,this.cleanUpBacklogEvents=!1,this.sendBacklogEventsInitiated=!1,this.sendEventsInProgress=!1,this.eventsInBatch=!1,this.sendBatchEventsInProgress={functional:!1,technical:!1,behavioral:!1},this.cleanBacklogEventsInProgress=[],this.cleanWlsBacklogEventsInProgress=[],this.customParams={platform:!1},this.browserPlatform=!1,this.settingExperienceContextData=!1,this.resettingExperienceContextData=!1,this.isTelemetryDisabled=!1,this.commonDataSubject=new n.t(1),this.experimentsSubject=new n.t(1),this.setErrorCallback=oe=>{this.registeredErrorCallback=oe},this.logger=this.logService.getLogger("JsEventsService"),this.commonData.clientId=this.config.clientId,this.commonData.eventSchemaVer=this.config.schemaVersion,this.sendInterval$=(0,i.H)(0,this.config.msBetweenSendRequest),this.logger.info("initialize",Z),this.networkStatusService.onlineStatusChanged.subscribe(this.onOnlineStateChanged.bind(this)),this.browserPlatform=u.ng.isBrowserPlatform()}getCommonData$(){return this.commonDataSubject.asObservable()}getExperiments$(){return this.experimentsSubject.asObservable()}get registeredErrorCallbackVal(){return this.registeredErrorCallback}get defaultErrorCallbackVal(){return this.defaultErrorCallback}get cleanUpBacklogEventsVal(){return this.cleanUpBacklogEvents}get currentUserConsentUpdatedVal(){return this.currentUserConsentUpdated}setDefaultConsentVal(Z){this.defaultConsent=Z}setSendEventsInProgressVal(Z){this.sendEventsInProgress=Z}setExperienceControlStorageType(Z){this.experienceControlStorageType=Z}defaultErrorCallback(Z){this.logger.error("message:",Z&&Z.message?Z.message:"Unknown error")}sendToServerEndpoint(Z,L){const W=Z.detailData.events.slice(0);Z.eventsToBeSent=Z.detailData.events.length;const te=[];for(;0!==Z.eventsToBeSent;){let ie;this.logger.event("eventsToBeSent",Z.eventsToBeSent.toString()),Z.eventsToBeSent>this.config.maxEventsPerRequest?(ie=W.slice(0,this.config.maxEventsPerRequest),W.splice(0,this.config.maxEventsPerRequest)):ie=W,Z.eventsToBeSent=Z.eventsToBeSent-ie.length;const Q=Z.commonData.common;Q.events=ie,Q.sentTs=(new Date).toISOString();const k=JSON.stringify(Q);this.logger.info("events request",k),te.push(this.eventSdkService.sendEvent(this.customParams,k,L))}return(0,D.D)(te)}updateCleanupState(Z,L,W){let te=!1,ie=0;this.cleanBacklogEventsInProgress.forEach(Q=>{Q.recordKey===Z&&(te=!0,Q.functionalIsClear=L===g.EventsDetailStore?W:Q.functionalIsClear,Q.technicalIsClear=L===g.EventsDetailStoreTechnical?W:Q.technicalIsClear,Q.behavioralIsClear=L===g.EventsDetailStoreBehavioral?W:Q.behavioralIsClear,Q.functionalIsClear&&Q.technicalIsClear&&Q.behavioralIsClear&&(this.dbService.getGlobalStore(g.EventsCommonStore).removeItem(Z).subscribe(),this.cleanBacklogEventsInProgress.splice(ie,1)),ie++)}),!1===te&&this.cleanBacklogEventsInProgress.push({recordKey:Z,functionalIsClear:L===g.EventsDetailStore&&W,technicalIsClear:L===g.EventsDetailStoreTechnical&&W,behavioralIsClear:L===g.EventsDetailStoreBehavioral&&W})}sendBacklogEventsDetailToServer(Z,L,W,te){return this.logger.event("attempting to send backlog events for dbName:",L," userconsent: ",Z,"key: ",W),this.dbService.getGlobalStore(L).getItem(W).pipe((0,a.zg)(ie=>{let Q;const k=N=>{if(this.logger.event("jsEvents backlog response",N,Q.eventsToBeSent),0===Q.eventsToBeSent)return this.dbService.getGlobalStore(L).removeItem(W).subscribe(),(0,m.of)(!0)},oe=N=>{this.logger.error("Failed to send backlog events",N.status),this.logger.event("Failed to send backlog events for :",W,L,".ErrorInfo: status",N.status)};return(Z===o.Full||Z===o.Temp)&&te&&ie&&ie.events&&ie.events.length>0?(Q={commonData:(0,h.merge)({},te),detailData:(0,h.merge)({},ie),eventsToBeSent:0},this.sendToServerEndpoint(Q,!1).pipe((0,s.U)(N=>{N.forEach(q=>{k(q)})}),(0,p.K)(N=>(oe(N),y.E)))):(Z===o.None&&this.logger.event("cannot send for backlog key",W,Z,ie),(!ie||!ie.events||0===ie.events.length)&&this.updateCleanupState(W,L,!0),this.dbService.getGlobalStore(L).removeItem(W).subscribe(),(0,m.of)(!0))}),(0,p.K)(ie=>(this.logger.event("detail data not available for backlog key",W),this.dbService.getGlobalStore(L).removeItem(W).subscribe(),(0,m.of)(!0))))}updateWlsCleanupState(Z,L,W){let te=!1,ie=0;this.cleanWlsBacklogEventsInProgress.forEach(Q=>{Q.recordKey===Z&&(te=!0,Q.functionalIsClear=L===g.EventsDetailStore?W:Q.functionalIsClear,Q.technicalIsClear=L===g.EventsDetailStoreTechnical?W:Q.technicalIsClear,Q.behavioralIsClear=L===g.EventsDetailStoreBehavioral?W:Q.behavioralIsClear,Q.functionalIsClear&&Q.technicalIsClear&&Q.behavioralIsClear&&(this.windowLocalStorage.removeWlsItem(g.EventsCommonStore,Z),this.cleanWlsBacklogEventsInProgress.splice(ie,1)),ie++)}),!1===te&&this.cleanWlsBacklogEventsInProgress.push({recordKey:Z,functionalIsClear:L===g.EventsDetailStore&&W,technicalIsClear:L===g.EventsDetailStoreTechnical&&W,behavioralIsClear:L===g.EventsDetailStoreBehavioral&&W})}sendWlsBacklogEventsDetailToServer(Z,L,W,te){this.logger.event("attempting to send wls backlog events for dbName:",L," userconsent: ",Z,"key: ",W);const ie=this.windowLocalStorage.getWlsItem(L,W);if(ie){let Q;const k=N=>{if(this.logger.event("jsEvents wls backlog response",N,Q.eventsToBeSent),0===Q.eventsToBeSent)return this.windowLocalStorage.removeWlsItem(L,W)},oe=N=>{this.logger.error("Failed to send wls backlog events :",N.status),this.logger.event("Failed to send wls backlog events for :",W,L,".ErrorInfo: status",N.status)};return(Z===o.Full||Z===o.Temp)&&te&&ie&&ie.events&&ie.events.length>0?(Q={commonData:(0,h.merge)({},te),detailData:(0,h.merge)({},ie),eventsToBeSent:0},this.sendToServerEndpoint(Q,!1).pipe((0,s.U)(N=>{N.forEach(q=>{k(q)})}),(0,p.K)(N=>(oe(N),y.E)))):(Z===o.None&&this.logger.event("cannot send for wls backlog key",W,Z,ie),(!ie||!ie.events||0===ie.events.length)&&this.updateWlsCleanupState(W,L,!0),(0,m.of)(this.windowLocalStorage.removeWlsItem(L,W)))}return this.updateWlsCleanupState(W,L,!0),this.logger.event("detail data not available for wls backlog key",W),(0,m.of)(this.windowLocalStorage.removeWlsItem(L,W))}attemptSendFromAllEventStores(Z,L,W,te){return(0,D.D)([Z.call(this,L.functional,g.EventsDetailStore,W,te),Z.call(this,L.technical,g.EventsDetailStoreTechnical,W,te),Z.call(this,L.behavioral,g.EventsDetailStoreBehavioral,W,te)])}sendBacklogEvents(Z){try{this.dbService.getGlobalStore(g.EventsCommonStore).getItem(Z).pipe((0,a.zg)(L=>{if(this.logger.event("testCommonData",L),L&&L.common){const W=JSON.parse(Z);return this.getUserConsentFromCache(W.userId||"undefined",!1).pipe((0,a.zg)(te=>(this.logger.event("userConsentFromCache",te),L.common.gdprTechOptIn=this.getString(te.technical),L.common.gdprFuncOptIn=this.getString(te.functional),L.common.gdprBehOptIn=this.getString(te.behavioral),L.common.deviceGdprFuncOptIn=this.getString(this.defaultConsent.functional),L.common.deviceGdprTechOptIn=this.getString(this.defaultConsent.technical),L.common.deviceGdprBehOptIn=this.getString(this.defaultConsent.behavioral),this.attemptSendFromAllEventStores(this.sendBacklogEventsDetailToServer,te,Z,L))))}return this.logger.event("common data not available for backlog key",Z),this.dbService.getGlobalStore(g.EventsCommonStore).removeItem(Z).subscribe(),(0,m.of)(!0)}),(0,p.K)(L=>(this.logger.event("common data not available for backlog key",Z),this.dbService.getGlobalStore(g.EventsCommonStore).removeItem(Z).subscribe(),(0,m.of)(!0)))).subscribe()}catch(L){this.logger.error("catch backlog::",L)}}sendWlsBacklogEvents(Z){try{const L=this.windowLocalStorage.getWlsItem(g.EventsCommonStore,Z);if(this.logger.event("wlsCommonData",L),L){const W=JSON.parse(Z);this.getUserConsentFromCache(W.userId||"undefined",!1).pipe((0,a.zg)(te=>{this.logger.event("userConsentFromCache",te);const ie={common:L};return ie.common.gdprFuncOptIn=this.getString(te.functional),ie.common.gdprTechOptIn=this.getString(te.technical),ie.common.gdprBehOptIn=this.getString(te.behavioral),ie.common.deviceGdprFuncOptIn=this.getString(this.defaultConsent.functional),ie.common.deviceGdprTechOptIn=this.getString(this.defaultConsent.technical),ie.common.deviceGdprBehOptIn=this.getString(this.defaultConsent.behavioral),this.attemptSendFromAllEventStores(this.sendWlsBacklogEventsDetailToServer,te,Z,ie)})).subscribe()}else this.logger.event("wls common data not available for backlog key",Z),this.windowLocalStorage.removeWlsItem(g.EventsCommonStore,Z)}catch(L){this.logger.error("catch wls backlog:",L)}}setInProgressState(Z,L){this.sendBatchEventsInProgress.functional=Z===g.EventsDetailStore?L:this.sendBatchEventsInProgress.functional,this.sendBatchEventsInProgress.technical=Z===g.EventsDetailStoreTechnical?L:this.sendBatchEventsInProgress.technical,this.sendBatchEventsInProgress.behavioral=Z===g.EventsDetailStoreBehavioral?L:this.sendBatchEventsInProgress.behavioral,this.eventsInBatch=this.getInProgressState()}getInProgressState(){return this.sendBatchEventsInProgress.functional||this.sendBatchEventsInProgress.technical||this.sendBatchEventsInProgress.behavioral}sendBatchedEventsDetailToServer(Z,L,W,te){this.logger.event("attempting to send batched events for dbName:",L," userconsent: ",Z,"key: ",W);const ie=this.dbCacheService.getCachedGlobalItem(L,W);let Q;const k=N=>{this.logger.event("jsEvents batched response",N);const q=JSON.parse(N.config.data);this.cleanUpSentEvents(q.events,L,W),this.setInProgressState(L,!1),this.sendEventsInProgress=!1},oe=N=>{this.setInProgressState(L,!1),this.sendEventsInProgress=!1,this.logger.error("Failed to send events for :",W,".ErrorInfo: status",N.status)};return(Z===o.Full||Z===o.Temp)&&te&&ie&&ie.events&&ie.events.length>0?(Q={commonData:(0,h.merge)({},te),detailData:(0,h.merge)({},ie),eventsToBeSent:0},this.setInProgressState(L,!0),this.sendEventsInProgress=!0,this.sendToServerEndpoint(Q,!1).subscribe(N=>{N.forEach(q=>{k(q)})},N=>{oe(N)})):(Z===o.None&&(!0===this.syncedUserConsentInfo||this.currentUserId===c.Undefined)&&ie&&ie.events&&ie.events.length>0&&(this.logger.event("deleting events as userConsent is",Z),ie.events.splice(0,ie.events.length),ie.persist_().subscribe()),this.setInProgressState(L,!1),this.sendEventsInProgress=!1),y.E}sendEvents(){const Z=this.getRecordKey(),L=this.dbCacheService.getCachedGlobalItem(g.EventsCommonStore,Z);if(L&&L.common)this.getUserConsentFromCache(this.currentUserId||c.Undefined,!0).pipe((0,a.zg)(W=>(L.common.gdprFuncOptIn=this.getString(W.functional),L.common.gdprTechOptIn=this.getString(W.technical),L.common.gdprBehOptIn=this.getString(W.behavioral),L.common.deviceGdprFuncOptIn=this.getString(this.defaultConsent.functional),L.common.deviceGdprTechOptIn=this.getString(this.defaultConsent.technical),L.common.deviceGdprBehOptIn=this.getString(this.defaultConsent.behavioral),this.attemptSendFromAllEventStores(this.sendBatchedEventsDetailToServer,W,Z,L)))).subscribe();else{if(this.logger.event("common data not available for key",Z),L&&(0,h.isUndefined)(L.common))try{this.registeredErrorCallback("common data not set before starting to send events")}catch(W){this.logger.error(W),this.defaultErrorCallback("Invalid callback. Original Error: common data not set before starting to send events")}this.sendEventsInProgress=!1}}startTimeBasedSendToServer(){this.stopTimeBasedSendToServer(),this.sendEventSubscription=this.sendInterval$.subscribe(()=>{this.logger.event("events in batch:",this.eventsInBatch),!0===this.eventsInBatch&&!1===this.sendEventsInProgress&&!1===this.getInProgressState()&&(this.sendEventsInProgress=!0,this.sendEvents())}),this.logger.event("send interval request made")}stopTimeBasedSendToServer(){this.sendEventSubscription&&(this.sendEventSubscription.unsubscribe(),this.sendEventSubscription=null,this.logger.event("send interval stopped"))}onOnlineStateChanged(Z){this.isOnline=Z,this.isOnline?this.defaultConsent!==O&&(this.logger.info("jsEvents turns into online"),this.startTimeBasedSendToServer()):(this.logger.info("jsEvents turns into offline"),this.stopTimeBasedSendToServer())}getUserConsentFromCache(Z,L){const te=this.dbCacheService.getOrCreateCachedGlobalItem(g.UserDataConsentStore,Z||c.Undefined);return te?te.sync_().pipe((0,s.U)(()=>{const ie=te&&te.userConsent;return!(0,h.isNil)(ie)&&!0===L&&(this.currentUserConsent=ie,this.currentUserConsentUpdated=!0),ie||this.defaultConsent}),(0,p.K)(ie=>(0,m.of)(this.defaultConsent))):(0,m.of)(this.defaultConsent)}syncUserConsentInfo(Z){const L=Z.find(W=>W.userId===this.currentUserId);L&&(this.currentUserConsent=L.userConsent,this.currentUserConsentUpdated=!0),Z.forEach(W=>{const te=this.dbCacheService.getOrCreateCachedGlobalItem(g.UserDataConsentStore,W.userId);this.logger.event("previously cached consent",te.userConsent),te.userConsent=W.userConsent,te.persist_().subscribe(),this.logger.event("updated consent",W.userConsent)}),this.syncedUserConsentInfo=!0,this.startSendingEvents()}setDefaultConsent(Z){this.defaultConsent=Z,(this.currentUserId===c.Undefined||(0,h.isUndefined)(this.currentUserId))&&(this.currentUserConsent=this.defaultConsent,this.currentUserConsentUpdated=!0),this.startSendingEvents()}eventHasUserConsent(Z){let L;return L=!0===this.currentUserConsentUpdated?this.currentUserConsent:this.defaultConsent,Z===f.Functional?L.functional:Z===f.Technical?L.technical:Z===f.Behavioral?L.behavioral:o.None}setExperimentContextObservable(){return this.settingExperienceContextData&&!(0,h.isNil)(this.setExperimentsCache$)?(this.logger.info("setting experienceControlInfo waiting to emit"),this.setExperimentsCache$):(this.logger.event("experienceControlInfo already set"),(0,m.of)(!1))}setOrResetExperimentContextObservable(){return this.settingExperienceContextData&&!(0,h.isNil)(this.setExperimentsCache$)?(this.logger.event("setOrResetExpInfo in progress waiting to emit"),this.setExperimentsCache$.pipe((0,a.zg)(()=>(this.logger.info("experienceControlInfo resetting: ",this.resettingExperienceContextData),this.resettingExperienceContextData&&!(0,h.isNil)(this.waitForReset)?this.waitForReset:(0,m.of)(void 0))))):this.resettingExperienceContextData&&!(0,h.isNil)(this.waitForReset)?(this.logger.info("Reset specific ExpInfo in progress waiting to emit"),this.waitForReset):(this.logger.event("Experiment context already set"),(0,m.of)(!1))}updateExperimentContext(Z,L=!1){return this.settingExperienceContextData=!0,this.setExperimentsCache$=Z.persist_().pipe((0,l.b)(()=>{L&&(this.resettingExperienceContextData=!1)}),(0,t.w)(()=>Z.sync_().pipe((0,l.b)(()=>{this.logger.event("experienceControlInfo sync done"),this.settingExperienceContextData=!1})))),this.setExperimentsCache$}obtainFilteredExperimentData(Z){return(0,h.merge)({},(0,h.omit)(Z,"name","activationType","cvName"))}syncExperimentsStore(){this.syncExperimentsCacheSubject=new n.t(1);const Z=this.dbCacheService.getOrCreateCachedGlobalItem(g.ExperienceControlStore,this.currentUserId||c.Undefined);let L=(0,m.of)({}),W=(0,m.of)({});Z&&(L=Z.sync_());const te=this.dbCacheService.getOrCreateCachedGlobalItem(g.ExperienceControlStore,this.commonData.deviceId);te&&(W=te.sync_()),(0,T.$R)(L,W).pipe((0,t.w)(()=>(this.syncExperimentsCacheSubject.next(!0),this.logger.event("syncExperimentsStore done"),this.experimentsSubject.next([...Z.experiments,...te.experiments].map(ie=>this.obtainFilteredExperimentData(ie))),(0,m.of)(!0))),(0,p.K)(ie=>(this.syncExperimentsCacheSubject.next(!1),this.logger.error("syncExperimentsStore error",ie),(0,m.of)(!0)))).subscribe()}getAppendedValue(Z,L){let W=Z;if(W)W.find(ie=>ie.id===L.id)?this.logger.event("experienceControlInfo already exists",L):W.push(L);else{const te=[];te.push(L),W=te}return W}getActiveExperiments(){const Z=this.dbCacheService.getOrCreateCachedGlobalItem(g.ExperienceControlStore,this.commonData.deviceId);this.logger.event("deviceExperiements all",this.commonData.deviceId,Z.experiments);const L=this.dbCacheService.getOrCreateCachedGlobalItem(g.ExperienceControlStore,this.currentUserId||c.Undefined);this.logger.event("userExperiements all",this.currentUserId||c.Undefined,L.experiments);let W=null;this.getAllExperimentStorageKeys().forEach(ie=>{const Q=this.dbCacheService.getCachedGlobalItem(g.ExperienceControlStore,ie);this.logger.event("experimentsData.status",Q&&Q.status||"undefined"),Q&&Q.experiments&&Q.experiments.length>0&&Q.experiments.forEach(oe=>{let N;oe.activationType===I.USER_ID?(N=this.getAppendedValue(L.experiments,oe),L.experiments=N,L.persist_().subscribe()):(N=this.getAppendedValue(Z.experiments,oe),Z.experiments=N,Z.persist_().subscribe());const q=Q.experiments.indexOf(oe);Q.experiments.splice(q,1),Q.persist_().subscribe()})});const te=[];return Z&&Z.experiments&&Z.experiments.length>0&&Z.experiments.forEach(Q=>{this.logger.event("device experiment:",Q);const k=this.obtainFilteredExperimentData(Q);te.push(k)}),L&&L.experiments&&L.experiments.length>0&&L.experiments.forEach(Q=>{this.logger.event("user experiment:",Q);const k=this.obtainFilteredExperimentData(Q);te.push(k)}),te.length>0&&(W=te),this.logger.event("activeExperiments",W),W}cleanUpDbStore(){if(this.isTelemetryDisabled)return;const Z=this;if(this.commonData.sessionId===c.Undefined)return void Z.logger.info("Cleanup cannot proceed, this.commonData.sessionId is undefined");this.sendBacklogEventsInitiated=!0;const L=JSON.parse(this.getRecordKey());this.logger.info("cleanUpDbStore excluding session for",L);try{Z.dbService.getGlobalStore(g.EventsCommonStore).keys().pipe((0,l.b)(W=>{W.forEach((te,ie)=>{if(Z.logger.event("Key#",ie,"key ",te),"_version"===te)Z.logger.info("_version to be skipped",te);else{const Q=JSON.parse(te);""===Q.sessionId||Q.sessionId===L.sessionId?Z.logger.info("key not to be processed",Q):Z.sendBacklogEvents(te)}})})).subscribe()}catch(W){Z.logger.error("iterate trycatch:",W)}}cleanUpWlsStore(){this.sendBacklogEventsInitiated=!0;const Z=JSON.parse(this.getRecordKey());this.logger.info("cleanUpWlsStore excluding session for",Z);for(let L=0;L<this.windowLocalStorage.getLength();++L){const W=this.windowLocalStorage.getKey(L);if(W.match("^"+g.EventsCommonStore)){this.logger.event("Key#",L,"key ",W);const te=JSON.parse(W.replace(g.EventsCommonStore,""));""===te.sessionId||te.sessionId===Z.sessionId?this.logger.event("key not to be processed",te):this.sendWlsBacklogEvents(JSON.stringify(te))}}}cleanUpSentEvents(Z,L,W){this.logger.event("cleanUpSentEvents for",W);const te=this.dbCacheService.getCachedGlobalItem(L,W);Z.forEach(ie=>{if(te&&te.events.length>0){const Q=te.events.find(k=>k.ts===ie.ts);if(Q&&(0,h.isEqual)(Q.parameters,ie.parameters)){const k=te.events.indexOf(Q);this.logger.event("matching event found",ie),te.events.splice(k,1),te.persist_().subscribe()}else this.logger.event("matching event not found")}else this.logger.event("events seem to be already cleared")}),te.persist_().subscribe()}startSendingEvents(){this.isOnline&&this.defaultConsent!==O?(this.startTimeBasedSendToServer(),!1===this.sendBacklogEventsInitiated&&(this.cleanUpDbStore(),this.cleanUpBacklogEvents=!1)):this.logger.info("Device offline or No Functional consent. No clean job happened.",this.defaultConsent)}updateGdprQualifiers(Z){return(0,h.omit)(Z,"gdprLevel")}getString(Z){return Z&&"string"!=typeof Z?JSON.stringify(Z):Z||""}getRecordKey(){return JSON.stringify({sessionId:this.commonData.sessionId||c.Undefined,userId:this.currentUserId||c.Undefined})}getExperimentsStorageKey(){return this.experienceControlStorageType===G.AbHub?this.getAbHubExperimentsStorageKey():this.getStandardExperimentsStorageKey()}getAbHubExperimentsStorageKey(){return this.commonData.deviceId||c.Undefined}getStandardExperimentsStorageKey(){return JSON.stringify({deviceId:this.commonData.deviceId||c.Undefined,userId:this.currentUserId||c.Undefined})}getGlobalExperimentsStorageKey(){return JSON.stringify({deviceId:this.commonData.deviceId||c.Undefined,userId:c.Undefined})}getAllExperimentStorageKeys(){const Z=[];return this.experienceControlStorageType!==G.AbHub&&(this.currentUserId!==c.Undefined&&Z.push(this.getStandardExperimentsStorageKey()),Z.push(this.getGlobalExperimentsStorageKey())),Z}getFormattedInputData(Z,L){const W=(0,h.extend)({},this.commonData);!0===L.anonymize&&(W.deviceId="undefined",W.userId="undefined",W.sessionId="undefined",W.externalUserId="undefined",W.idpId="undefined");const te=this.updateGdprQualifiers(Z);te.experiments=this.getActiveExperiments(),this.logger.event("eventDetail",te);const ie=[];return ie.push(te),W.events=ie,W.sentTs=(new Date).toISOString(),W.gdprFuncOptIn=this.getString(this.currentUserConsent.functional),W.gdprTechOptIn=this.getString(this.currentUserConsent.technical),W.gdprBehOptIn=this.getString(this.currentUserConsent.behavioral),W.deviceGdprFuncOptIn=this.getString(this.defaultConsent.functional),W.deviceGdprTechOptIn=this.getString(this.defaultConsent.technical),W.deviceGdprBehOptIn=this.getString(this.defaultConsent.behavioral),JSON.stringify(W)}setFormattedEventsDetailData(Z,L,W){(0,T.$R)(this.syncExperimentsCacheSubject,this.setOrResetExperimentContextObservable()).subscribe(te=>{const ie=this.getRecordKey();let k,Q=g.EventsDetailStore;if(Z.gdprLevel===f.Technical&&(Q=g.EventsDetailStoreTechnical),Z.gdprLevel===f.Behavioral&&(Q=g.EventsDetailStoreBehavioral),L){k=this.windowLocalStorage.getWlsItem(Q,ie)||{},k.events=k.events||[];const oe=(0,h.extend)({},this.updateGdprQualifiers(Z));oe.experiments=this.getActiveExperiments(),this.logger.event("eventDetail wls",oe),k.events.push(oe),this.logger.event("details list wls",k.events),this.windowLocalStorage.setWlsItem(Q,ie,k),(0,h.isFunction)(W)&&W(),this.logger.event("request to batch an exit time event")}else{k=this.dbCacheService.getOrCreateCachedGlobalItem(Q,ie);let oe=k.events;const N=(0,h.extend)({},this.updateGdprQualifiers(Z));if(N.experiments=this.getActiveExperiments(),this.logger.event("eventDetail IDb",N),oe)oe.push(N);else{const q=[];q.push(N),oe=q}this.logger.event("details list indexed db",oe),k.events=oe,k.persist_().subscribe(()=>{(0,h.isFunction)(W)&&W(),this.logger.event("request to batch an event"),this.eventsInBatch=!0})}})}storeEventDetail(Z,L){this.setFormattedEventsDetailData(Z,this.browserPlatform&&L.appExit||!1,L.afterDone||null)}sendEventDetail(Z,L){if(Z){if(L=(0,h.merge)({},L),(0,h.isEqual)(this.defaultConsent,O)||Z&&(0,h.isUndefined)(Z.gdprLevel))return this.logger.info("Functional consent not received, discarding event",Z.name,Z.gdprLevel),(0,h.isFunction)(L.afterDone)&&L.afterDone(),V.FunctionalConsentNotReceived;if(!0!==L.immediateRequest&&!0!==L.useBeacon||!0!==this.isOnline)this.storeEventDetail(Z,L);else{const W=this.eventHasUserConsent(Z.gdprLevel);if(this.logger.event("attempting to send immediate event for userId:",this.currentUserId," userconsent: ",this.currentUserConsent),W!==o.Full&&W!==o.Temp)return this.currentUserId&&this.currentUserId!==c.Undefined&&!1===this.currentUserConsentUpdated?(this.storeEventDetail(Z,L),this.logger.event("Event stored as userConsent not synced yet",W,this.currentUserConsentUpdated)):((0,h.isFunction)(L.afterDone)&&L.afterDone(),this.logger.error("Event cannot be sent due to consent level:",W)),W;(0,T.$R)(this.syncExperimentsCacheSubject,this.setOrResetExperimentContextObservable()).subscribe(te=>{const ie=this.getFormattedInputData(Z,L);this.logger.info("jsonString request to send:",ie);let Q=this.eventSdkService.sendEvent,k=!0;L.useBeacon&&(Q=this.eventSdkService.sendEventviaBeacon,k=!1),Q.call(this.eventSdkService,this.customParams,ie,k).subscribe(oe=>{this.logger.event("jsevents response",oe),(0,h.isFunction)(L.afterDone)&&L.afterDone()},oe=>{this.logger.error("Failed to send eventdata for:",Z.name,".ErrorInfo: status",oe.status,", data",oe.config&&oe.config.data),this.storeEventDetail(Z,L)})})}return V.Ok}return this.logger.error("Empty request"),V.UnProcessed}sendEventDetailWithPromise(Z,L){return new Promise((W,te)=>{if(Z){if(L=(0,h.merge)({},L),(0,h.isEqual)(this.defaultConsent,O)||Z&&(0,h.isUndefined)(Z.gdprLevel))return this.logger.info("Functional consent not received, discarding event",Z.name,Z.gdprLevel),(0,h.isFunction)(L.afterDone)&&L.afterDone(),void te(V.FunctionalConsentNotReceived);if(!0!==L.immediateRequest&&!0!==L.useBeacon||!0!==this.isOnline)this.storeEventDetail(Z,L),W(V.Ok);else{const ie=this.eventHasUserConsent(Z.gdprLevel);this.logger.event("attempting to send immediate event for userId:",this.currentUserId," userconsent: ",this.currentUserConsent),ie===o.Full||ie===o.Temp?(0,T.$R)(this.syncExperimentsCacheSubject,this.setOrResetExperimentContextObservable()).subscribe(Q=>{const k=this.getFormattedInputData(Z,L);let oe=this.eventSdkService.sendEvent,N=!0;L.useBeacon&&(oe=this.eventSdkService.sendEventviaBeacon,N=!1),oe.call(this.eventSdkService,this.customParams,k,N).subscribe(q=>{this.logger.event("jsevents response",q),(0,h.isFunction)(L.afterDone)&&L.afterDone(),W(V.Ok)},q=>{this.logger.error("Failed to send eventdata for:",Z.name,".ErrorInfo: status",q.status,", data",q.config&&q.config.data),this.storeEventDetail(Z,L),W(V.UnProcessed)})}):(this.currentUserId&&this.currentUserId!==c.Undefined&&!1===this.currentUserConsentUpdated?(this.storeEventDetail(Z,L),this.logger.event("Event stored as userConsent not synced yet",ie,this.currentUserConsentUpdated)):((0,h.isFunction)(L.afterDone)&&L.afterDone(),this.logger.error("Event cannot be sent due to consent level:",ie)),W(ie))}}else this.logger.error("Empty request"),W(V.Ok)})}isValidPlatformType(Z){return Z===b.Win||Z===b.Mac||Z===b.Android||Z===b.NvAndroid||Z===b.Linux||Z===b.Web}setEventsCommonData(Z){if(!Z)return void this.logger.error("Undefined common data sent by client");this.cleanUpBacklogEvents=!1,this.commonData.sessionId===c.Undefined&&Z.sessionId&&(this.cleanUpBacklogEvents=!0),this.commonData=(0,h.merge)({},this.commonData,Z),this.logger.info("client user data",Z.userId,Z.externalUserId,Z.idpId),this.logger.info("this.commonData user data",this.commonData.userId,this.commonData.externalUserId,this.commonData.idpId),this.commonData.eventProtocol="1.4",this.currentUserId=this.commonData.idpId!==c.Undefined?this.commonData.userId:this.commonData.externalUserId,this.isValidPlatformType(this.commonData.platform)||(this.commonData.platform=b.Undefined),this.currentUserConsentUpdated=!1,this.logger.info("Device Id:",this.commonData.deviceId,"set for client:",this.commonData.clientId),this.commonData.deviceId!==c.Undefined&&this.syncExperimentsStore(),this.getUserConsentFromCache(this.currentUserId,!0).subscribe(),this.logger.event(this.commonData);const L=this.getRecordKey(),W=this.dbCacheService.getOrCreateCachedGlobalItem(g.EventsCommonStore,L);if(W.common=this.commonData,W.persist_().subscribe(),this.browserPlatform){let te=this.windowLocalStorage.getWlsItem(g.EventsCommonStore,L)||{};te=this.commonData,this.windowLocalStorage.setWlsItem(g.EventsCommonStore,L,te)}this.isOnline&&this.defaultConsent!==O?(this.startTimeBasedSendToServer(),this.cleanUpBacklogEvents&&!1===this.sendBacklogEventsInitiated&&(this.cleanUpDbStore(),this.cleanUpBacklogEvents=!1),this.browserPlatform&&this.cleanUpWlsStore()):this.logger.info("Device offline or No Functional consent. No clean job happened.",this.defaultConsent),this.commonDataSubject.next(this.commonData)}setExperienceControlInfo(Z){const L=this.getFormattedExperimentContext(Z);if(L===V.InvalidExperimentFormat)return L;const te=this.dbCacheService.getOrCreateCachedGlobalItem(g.ExperienceControlStore,L.activationType===I.USER_ID?(this.defaultConsent===C?c.Undefined:this.currentUserId)||c.Undefined:this.commonData.deviceId);te.persist_().subscribe(()=>{let ie=te.experiments;if(this.logger.event("experienceControlInfo IDb",L),ie){const Q=ie.find(k=>k.id===L.id&&k.group===L.group);if(Q)return ie.indexOf(Q),this.logger.event("experienceControlInfo for the same group already exist"),V.ExperimentAlreadyActive;ie.push(L)}else{const Q=[];Q.push(L),ie=Q}return this.logger.event("experienceControlInfo list indexed db",ie),te.experiments=ie,this.updateExperimentContext(te).subscribe(()=>{this.logger.info("Updated ExperimentContext for: ",L,new Date),this.experimentsSubject.next(te.experiments.map(Q=>this.obtainFilteredExperimentData(Q)))}),L})}getFormattedExperimentContext(Z){let L=Object.assign({},U);return!1===this.validateInputFormat(Z,L,!1)?(this.logger.event("mismatch",L,Z),V.InvalidExperimentFormat):(L=Object.assign(L,Z),L)}validateInputFormat(Z,L,W){const te=JSON.stringify(Z);Z=JSON.parse(te)||{};const Q=Object.getOwnPropertyNames(L),k=Object.getOwnPropertyNames(Z);return!(Q.length!==k.length&&!W)&&(0,h.every)(L,(oe,N)=>"object"==typeof oe?"object"==typeof Z[N]&&this.validateInputFormat(Z[N],oe,W):(0,h.has)(Z,N))}resetExperienceControlInfo(Z){this.logger.event("resetExperienceControlInfo called for ID: ",Z);const L=this.getExperimentsStorageKey();let W=!1;this.waitForReset=new r.xQ,this.setExperimentContextObservable().pipe((0,w.P)()).subscribe(te=>{this.logger.event("Inside subscribe resetExperienceControlInfo"),this.waitForReset||(this.waitForReset=new r.xQ);const ie=this.dbCacheService.getOrCreateCachedGlobalItem(g.ExperienceControlStore,L);ie.sync_().subscribe(()=>{if(W=this.deleteFromStore(Z,L,ie),!W){const Q=this.dbCacheService.getOrCreateCachedGlobalItem(g.ExperienceControlStore,this.commonData.deviceId);Q.sync_().subscribe(()=>{if(W=this.deleteFromStore(Z,this.commonData.deviceId,Q),!W){const k=this.dbCacheService.getOrCreateCachedGlobalItem(g.ExperienceControlStore,this.currentUserId||c.Undefined);k.sync_().subscribe(()=>{W=this.deleteFromStore(Z,this.currentUserId||c.Undefined,k)})}})}})}),this.resettingExperienceContextData=!0}emitAndCleanWaitForReset(){this.waitForReset&&(this.waitForReset.next(!0),this.waitForReset.complete(),this.waitForReset=null)}deleteFromStore(Z,L,W){if(W&&W.experiments&&W.experiments.length>0){const te=W.experiments.find(ie=>ie.id===Z||ie.cvName===Z);if(te){const ie=W.experiments.indexOf(te);return this.logger.info("matching experiment found",L,te.id,new Date),W.experiments.splice(ie,1),this.updateExperimentContext(W,!0).subscribe(()=>{this.emitAndCleanWaitForReset(),this.experimentsSubject.next(W.experiments.map(Q=>this.obtainFilteredExperimentData(Q)))}),!0}return this.logger.info("matching experiment not found for key",L),this.emitAndCleanWaitForReset(),!1}return this.logger.info("experiment list is empty for key",L),this.emitAndCleanWaitForReset(),!1}syncExperienceControlInfo(Z){const L=[];Z.forEach(ie=>{const Q=this.getFormattedExperimentContext(ie);Q!==V.InvalidExperimentFormat&&L.push(Q)});const te=this.dbCacheService.getOrCreateCachedGlobalItem(g.ExperienceControlStore,this.commonData.deviceId);return this.logger.event("previously cached experiments data",te),te.experiments=L,te.persist_().subscribe(),this.logger.event("updated experiments",L),L}setOverrideToolTelemetryState(Z){this.isTelemetryDisabled=Z}ngOnDestroy(){this.sendEventSubscription&&(this.sendEventSubscription.unsubscribe(),this.sendEventSubscription=void 0)}}return j.\u0275fac=function(Z){return new(Z||j)(S.LFG(Y),S.LFG($),S.LFG(u.ed),S.LFG(u.LA),S.LFG(u.MC),S.LFG(u._J),S.LFG(ae))},j.\u0275prov=S.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})(),ye=(()=>{class j{static forRoot(Z){return{ngModule:j,providers:[{provide:Y,useValue:Z||E}]}}}return j.\u0275fac=function(Z){return new(Z||j)},j.\u0275mod=S.oAB({type:j}),j.\u0275inj=S.cJS({imports:[[]]}),j})();var ue=e(2984);let X=(()=>{class j{constructor(Z,L,W){this.loggingService=Z,this.bridgeService=L,this.jsEventsService=W,this.clientVersion="undefined",this.currentScreen="",this.deviceId="undefined",this.isUIRefreshed=!1,this.launchUiEventSent=!1,this.sessionId="undefined",this.sync=!1,this.userId="undefined",this.externalUserId="undefined",this.idpId="undefined",this.platform=null,this.deviceOS=null,this.deviceOSVersion=null,this.deviceType=null,this.deviceModel=null,this.deviceMake=null,this.clientType=null,this.clientVariant=null,this.integrationId=null,this.browserType=null,this.isTelemetryDisabled=!1,this.defaultConsentListener$=new n.t(1),this.commonDataListener$=new n.t(1),this.logEvaluatorCallback=te=>!0,this.logger=this.loggingService.getLogger("telemetryService"),this.getUIRefreshState(),this.sessionId=this.generateSessionId()}updateTelemetrySessionId(Z){this.sessionId=Z}initialize(Z){this.isTelemetryDisabled=Z,this.jsEventsService.setOverrideToolTelemetryState(this.isTelemetryDisabled)}getCommonData$(){return this.jsEventsService.getCommonData$()}getExperiments$(){return this.jsEventsService.getExperiments$()}setLaunchUiEventSent(Z){this.launchUiEventSent=Z,this.logger.info("Launch UI event sent: ",this.launchUiEventSent)}getLaunchUiEventSent(){return this.launchUiEventSent}setLoggingEvaluator(Z){this.logEvaluatorCallback=Z}getUIRefreshState(){this.logger.info("Getting  UI Refreshed state"),this.bridgeService.executeCommand(ue.Gh.Common.Applicationinfo.GetIsUIRefreshed).subscribe(Z=>{this.isUIRefreshed=Z,this.logger.info("Refreshed state",this.isUIRefreshed)},()=>{this.logger.error("Failed to get UI Refreshed state")})}generateSessionId(){let Z=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(W){const te=(Z+16*Math.random())%16|0;return Z=Math.floor(Z/16),("x"===W?te:3&te|8).toString(16)})}get telemetrySessionId(){return this.sessionId}setEventsCommonData(Z,L=!1,W=!1){this.logger.info("telemetry sessionId is ",this.sessionId),!this.deviceId&&Z&&Z.deviceId&&this.logger.info("telemetry deviceId",Z.deviceId),(L&&Z&&Z.userId||Z&&Z.externalUserId)&&(this.logger.info("telemetry userId ",Z.userId),this.logger.info("telemetry externalUserId ",Z.externalUserId),this.logger.info("telemetry idpId ",Z.idpId)),this.deviceId=Z&&Z.deviceId?Z.deviceId:this.deviceId,this.clientVersion=Z&&Z.clientVer||this.clientVersion,L&&(this.userId=Z.userId||"undefined",this.externalUserId=Z.externalUserId||"undefined",this.idpId=Z.idpId||"undefined"),this.platform=this.platform||Z.platform,this.deviceOS=this.deviceOS||Z.deviceOS,this.deviceOSVersion=this.deviceOSVersion||Z.deviceOSVersion,this.deviceType=this.deviceType||Z.deviceType,this.deviceModel=this.deviceModel||Z.deviceModel,this.deviceMake=this.deviceMake||Z.deviceMake,this.clientType=this.clientType||Z.clientType,this.clientVariant=this.clientVariant||Z.clientVariant,this.integrationId=this.integrationId||Z.integrationId,this.browserType=this.browserType||Z.browserType,W&&(this.integrationId=Z.integrationId||"undefined"),this.logger.info("Setting common events data: ",{clientVer:this.clientVersion,sessionId:this.sessionId,deviceId:this.deviceId,userId:this.userId,externalUserId:this.externalUserId,idpId:this.idpId,platform:this.platform,deviceOS:this.deviceOS,deviceOSVersion:this.deviceOSVersion,deviceType:this.deviceType,deviceModel:this.deviceModel,deviceMake:this.deviceMake,clientType:this.clientType,clientVariant:this.clientVariant,integrationId:this.integrationId,browserType:this.browserType}),this.jsEventsService.setEventsCommonData({clientVer:this.clientVersion,sessionId:this.sessionId,deviceId:this.deviceId,userId:this.userId,externalUserId:this.externalUserId,idpId:this.idpId,platform:this.platform,deviceOS:this.deviceOS||c.Undefined,deviceOSVersion:this.deviceOSVersion||c.Undefined,deviceType:this.deviceType||c.Undefined,deviceModel:this.deviceModel||c.Undefined,deviceMake:this.deviceMake||c.Undefined,clientType:this.clientType||c.Undefined,clientVariant:this.clientVariant||c.Undefined,integrationId:this.integrationId||c.Undefined,browserType:this.browserType||c.Undefined}),this.userId&&this.deviceId&&this.deviceId!==c.Undefined&&this.commonDataListener$.next(!0)}setScreen(Z){this.currentScreen=Z}getScreen(){return this.currentScreen}changeSync(Z){this.sync=Z}setDefaultClientConsent(Z){this.logger.event("Set client consent: ",Z),this.jsEventsService.setDefaultConsent(Z),this.defaultConsentListener$.next(!0)}getDefaultClientConsentObserable(){return this.defaultConsentListener$.pipe((0,w.P)())}getCommonDataObservable(){return this.commonDataListener$.pipe((0,w.P)())}setUserConsent(Z){this.logger.event("Set user consent: ",Z),this.jsEventsService.syncUserConsentInfo(Z)}push(Z,L,W){if(this.isUIRefreshed||this.isTelemetryDisabled)this.logger.info("Disabled telemetry",Z.name);else if(Z){if(W=(0,h.merge)({},W),W=(0,h.extend)(W,{appExit:this.sync}),L&&Z.parameters.hasOwnProperty("totalMs")){const te=Date.now(),ie=te-L;this.logger.info("Started ",Z.name,"at ",L,"and ended at ",te,"Time elapsed(ms)",ie),Z.parameters=(0,h.merge)(Z.parameters,{totalMs:ie})}this.logEvaluatorCallback(Z)&&this.logger.event("Event detail: ",Z),this.jsEventsService.sendEventDetail(Z,W)}else this.logger.error("Empty event.")}pushWithPromise(Z,L,W){if(this.isUIRefreshed||this.isTelemetryDisabled)return this.logger.info("Disabled telemetry",Z.name),new Promise((te,ie)=>{te("Disabled telemetry")});if(Z){if(W=(0,h.merge)({},W),W=(0,h.extend)(W,{appExit:this.sync}),L&&Z.parameters.hasOwnProperty("totalMs")){const te=Date.now(),ie=te-L;this.logger.info("Started ",Z.name,"at ",L,"and ended at ",te,"Time elapsed(ms)",ie),Z.parameters=(0,h.merge)(Z.parameters,{totalMs:ie})}return this.logEvaluatorCallback(Z)&&this.logger.event("Event detail: ",Z),this.jsEventsService.sendEventDetailWithPromise(Z,W)}return this.logger.error("Empty event."),new Promise((te,ie)=>{ie("Empty event.")})}setExperienceControlInfo(Z){return this.jsEventsService.setExperienceControlInfo(Z)}resetExperienceControlInfo(Z){this.jsEventsService.resetExperienceControlInfo(Z)}syncExperienceControlInfo(Z){return this.jsEventsService.syncExperienceControlInfo(Z)}setExperienceControlStorageType(Z){return this.jsEventsService.setExperienceControlStorageType(Z)}}return j.\u0275fac=function(Z){return new(Z||j)(S.LFG(u.ed),S.LFG(u.dF),S.LFG(me))},j.\u0275prov=S.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})()},79911:(He,de,e)=>{"use strict";e.d(de,{PN:()=>o,n0:()=>c,uW:()=>i,ay:()=>G,V9:()=>x,Bs:()=>u});var n=e(2316);let i=(()=>{class E{}return E.\u0275fac=function(v){return new(v||E)},E.\u0275mod=n.oAB({type:E}),E.\u0275inj=n.cJS({imports:[[]]}),E})();var D=e(53882),m=e(53803),y=e(85816),T=e(33927),r=e(29845),a=e(45871),s=e(12702),p=e(79441),l=e(202);const t={timeBetweenRetries:0,maxRetries:0,retryOnTimeout:!1,exponentialBackoffMaxDelay:3e4},w="TimeoutError";var u=(()=>{return(E=u||(u={}))[E.UnknownError=0]="UnknownError",E[E.RequestTimeout=-100]="RequestTimeout",E[E.RequestCancelled=-101]="RequestCancelled",E[E.NetworkStatusOffline=-102]="NetworkStatusOffline",E[E.DNSLookupFailed=-103]="DNSLookupFailed",u;var E})();const o=36e5;var f=e(3076);const c={authorization:"Authorization",xRequestId:"x-request-id"};class G{constructor(P,v,O={}){this.http=P,this.networkStatusService=v,this.configOptions=O,(0,l.isNil)(this.configOptions.config)&&(this.configOptions.config=t),(0,l.isNil)(this.configOptions.config.retryOnTimeout)&&(this.configOptions.config.retryOnTimeout=t.retryOnTimeout),(0,l.isNil)(this.configOptions.config.exponentialBackoffMaxDelay)&&(this.configOptions.config.exponentialBackoffMaxDelay=t.exponentialBackoffMaxDelay)}static httpErrorEvents$(){return G.httpErrorEventsSubject.asObservable()}static httpSuccessEvents$(){return G.httpSuccessEventsSubject.asObservable()}static httpStartEvents$(){return G.httpStartEventsSubject.asObservable()}static replaceTemplateKey(P,v,O,C){let _=P;if("string"==typeof O){const F=":"+v;-1!==P.indexOf(F)&&(_=P.replace(new RegExp(F,"g"),encodeURIComponent(O)),C(v))}return _}static formatUrl(P,v){let O=P;return O=Object.keys(v).reduce((C,_)=>G.replaceTemplateKey(C,_,v[_],F=>delete v[F]),O),O}static isRetryableError(P,v,O){let C=!0;return P instanceof D.UA?0!==P.status||O.isOnline?429===P.status?C=!0:0!==P.status&&(P.status<500||P.status>=600)&&(C=!1):C=!1:P instanceof Error&&P.name===w&&!v.retryOnTimeout&&(C=!1),C}static formatError(P,v,O,C){const _=G.getFullUrl(P,v);let F,V;O instanceof D.UA?(F=O,V=O.status):O&&O.name===w&&(V=u.RequestTimeout);const b={url:_,status:V,rawResponse:F};return(0,l.isNil)(C.headers[c.xRequestId])||(b.xRequestId=C.headers[c.xRequestId]),b}static getFullUrl(P,v){const O=Object.keys(v);if(O.length>0){P+="?";for(const C of O)P+=`${C}=${v[C]}&`;P=P.substring(0,P.length-1)}return P}static applyTimeout(P,v){return(0,l.isNil)(v.timeout)?P:P.pipe((0,m.V)(v.timeout))}static isReportRequest(P){return(0,l.isNil)(P.reportRequest)||!0===P.reportRequest}genericRetryStrategy(P,v,O){return O.pipe((0,y.zg)((C,_)=>{var F;const V=_+1,b=G.formatError(P,v.params,C,v);if(G.isReportRequest(v)&&(v.reportRequestData=Object.assign(Object.assign({},v.reportRequestData),{retryCount:String(V)}),G.httpErrorEventsSubject.next({response:b,options:v})),V>v.config.maxRetries||!G.isRetryableError(C,v.config,this.networkStatusService))return(0,a._)(b);let B;if(v.config.timeBetweenRetries)B=v.config.timeBetweenRetries;else{const U=null===(F=v.config)||void 0===F?void 0:F.exponentialBackoffMaxDelay;B=1e3,V>1&&(B=Math.min(1e3*Math.pow(2,V-1),U))}if(C instanceof D.UA&&(429===C.status||503===C.status)){const U=+(C.headers.get("retry-after")||0);isNaN(U)||(B=Math.max(B,1e3*U))}return(0,s.H)(B)}))}initRequest(P,v){const O=v;return O.params=Object.assign(Object.assign({},this.configOptions.params),v.params),O.headers=Object.assign(Object.assign({},this.configOptions.headers),v.headers),O.config=Object.assign(Object.assign({},this.configOptions.config),v.config),O.reportRequestData=Object.assign(Object.assign({},this.configOptions.reportRequestData),v.reportRequestData),O.reportRequest=this.configOptions.reportRequest&&v.reportRequest,O.includeRequestId&&(O.headers[c.xRequestId]=(0,f.Rl)()),[O,G.formatUrl(P,O.params)]}makeRequest(P,v,O={}){return this.makeRequestEx(P,v,O).pipe((0,T.U)(C=>(null==O?void 0:O.includeFullResponse)?C:C.body))}get(P,v={}){return this.makeRequest("GET",P,v)}delete(P,v={}){return this.makeRequest("DELETE",P,v)}post(P,v={}){return this.makeRequest("POST",P,v)}patch(P,v={}){return this.makeRequest("PATCH",P,v)}put(P,v={}){return this.makeRequest("PUT",P,v)}makeRequestEx(P,v,O={}){const[C,_]=this.initRequest(v,O);G.isReportRequest(C)&&G.httpStartEventsSubject.next({method:P,url:_,options:C}),C.reportRequestData.requestStartTime=Date.now().toString();const F=this.http.request(P,_,{body:C.body,params:C.params,headers:C.headers,responseType:C.responseType,observe:"response",withCredentials:!!C.withCredentials&&C.withCredentials});return G.applyTimeout(F,this.configOptions.config).pipe((0,r.a)(V=>this.genericRetryStrategy(_,C,V)),(0,T.U)(V=>{const b=(0,l.extend)(V,{config:{data:C.body}});return C.reportRequestData.requestEndTime=Date.now().toString(),G.isReportRequest(C)&&"false"!==C.reportRequestData.reportSuccessTelemetry&&G.httpSuccessEventsSubject.next({response:b,options:C}),b}))}getResponse(P,v={}){return this.makeRequestEx("GET",P,v)}}G.httpErrorEventsSubject=new p.xQ,G.httpSuccessEventsSubject=new p.xQ,G.httpStartEventsSubject=new p.xQ;let x=(()=>{class E{constructor(v,O){this.http=v,this.networkStatusService=O}createEndpoint(v){return new G(this.http,this.networkStatusService,v)}}return E.\u0275fac=function(v){return new(v||E)(n.LFG(D.eN),n.LFG(f.kE))},E.\u0275prov=n.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},52825:(He,de,e)=>{"use strict";e.d(de,{AZ:()=>Te,Gp:()=>p,Ow:()=>Tt});var n=e(54364),i=e(52529),D=e(70781),m=e(76322),y=e(58283),T=e(45129),r=e(66660),a=e(22573),s=e(2316);let p=(()=>{class Je{}return Je.\u0275fac=function(Ye){return new(Ye||Je)},Je.\u0275mod=s.oAB({type:Je}),Je.\u0275inj=s.cJS({imports:[[n.ez,D.ot,m._r,i.Ps,a.hp,T.U8,r.o9,y.aw.forChild()]]}),Je})();var l=e(40912),t=e(79441),w=e(89919),h=e(82516),u=e(78767),o=e(33927),f=e(22663),c=e(68637),g=(()=>{return(Je=g||(g={})).Space="Space",Je.CapsLock="CapsLock",Je.Backspace="Backspace",Je.ArrowLeft="ArrowLeft",Je.ArrowRight="ArrowRight",Je.Enter="Enter",Je.Escape="Escape",Je.PrimaryType="abc",Je.SecondaryType="*&$",g;var Je})(),I=(()=>{return(Je=I||(I={}))[Je.Off=0]="Off",Je[Je.Once=1]="Once",Je[Je.Always=2]="Always",I;var Je})();const G=new Map([[["0",")"],"Digit0"],[["1","!"],"Digit1"],[["2","@"],"Digit2"],[["3","#"],"Digit3"],[["4","$"],"Digit4"],[["5","%"],"Digit5"],[["6","^"],"Digit6"],[["7","&"],"Digit7"],[["8","*"],"Digit8"],[["9","("],"Digit9"],[[";",":"],"Semicolon"],[["/","?"],"Slash"],[["`","~"],"Backquote"],[["[","{"],"BracketLeft"],[["\\","|"],"Backslash"],[["]","}"],"BracketRight"],[["'",'"'],"Quote"],[[".",">"],"Period"],[[",","<"],"Comma"],[["-","_"],"Minus"],[["=","+"],"Equal"]]);var x=e(12204),E=e(47420),P=e(89460);const v=["container"],O=function(){return["1","2","3","4","5","6","7","8","9","0"]},C=function(Je){return{keys:Je}},_=function(){return["q","w","e","r","t","y","u","i","o","p"]},F=function(){return["a","s","d","f","g","h","j","k","l","@"]},V=function(){return["z","x","c","v","b","n","m",",",".","?"]},b=function(Je){return{text:Je}};function B(Je,xt){if(1&Je&&(s.ynx(0),s.TgZ(1,"tr",null,13),s.GkF(3,14),s.TgZ(4,"td",15),s.GkF(5,16),s.qZA(),s.qZA(),s.TgZ(6,"tr"),s.GkF(7,14),s.TgZ(8,"td",17),s.GkF(9,16),s.qZA(),s.TgZ(10,"td",17),s.GkF(11,16),s.qZA(),s.qZA(),s.TgZ(12,"tr"),s.GkF(13,14),s.TgZ(14,"td",18),s.GkF(15,16),s.qZA(),s.qZA(),s.TgZ(16,"tr"),s.GkF(17,14),s.qZA(),s.TgZ(18,"tr"),s.TgZ(19,"td",17),s.GkF(20,16),s.qZA(),s.TgZ(21,"td",19),s.GkF(22,16),s.qZA(),s.TgZ(23,"td",17),s.GkF(24,14),s.qZA(),s.TgZ(25,"td",20),s.GkF(26,16),s.qZA(),s.qZA(),s.BQk()),2&Je){const Ye=s.oxw(),rt=s.MAs(5),ge=s.MAs(19),Ve=s.MAs(15),at=s.MAs(17),ve=s.MAs(11),Ze=s.MAs(13),Ie=s.MAs(9),$e=s.MAs(23),ze=s.MAs(21);s.xp6(3),s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.VKq(18,C,s.DdM(17,O))),s.xp6(2),s.Q6J("ngTemplateOutlet",ge),s.xp6(2),s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.VKq(21,C,s.DdM(20,_))),s.xp6(2),s.Q6J("ngTemplateOutlet",Ve),s.xp6(2),s.Q6J("ngTemplateOutlet",at),s.xp6(2),s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.VKq(24,C,s.DdM(23,F))),s.xp6(2),s.Q6J("ngTemplateOutlet",ve),s.xp6(2),s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.VKq(27,C,s.DdM(26,V))),s.xp6(3),s.Q6J("ngTemplateOutlet",Ze),s.xp6(2),s.Q6J("ngTemplateOutlet",Ie),s.xp6(2),s.Q6J("ngTemplateOutlet",$e)("ngTemplateOutletContext",s.VKq(29,b,Ye.inputSymbol.SecondaryType)),s.xp6(2),s.Q6J("ngTemplateOutlet",ze)}}const U=function(){return["`","~","!","@","#","$","%","^","&","*"]},A=function(){return["=","+","(",")","[","]","{","}","-","_"]},S=function(){return["\xa3","\u20ac","'",'"',"|",";",":",",",".","?"]},Y=function(){return["\u2122","\xa9","\xa2","\xa5","\xa1","\xbf","<",">","\\","/"]};function se(Je,xt){if(1&Je&&(s.ynx(0),s.TgZ(1,"tr"),s.GkF(2,14),s.TgZ(3,"td",15),s.GkF(4,16),s.qZA(),s.qZA(),s.TgZ(5,"tr"),s.GkF(6,14),s.TgZ(7,"td",17),s.GkF(8,16),s.qZA(),s.TgZ(9,"td",17),s.GkF(10,16),s.qZA(),s.qZA(),s.TgZ(11,"tr"),s.GkF(12,14),s.TgZ(13,"td",18),s.GkF(14,16),s.qZA(),s.qZA(),s.TgZ(15,"tr"),s.GkF(16,14),s.qZA(),s.TgZ(17,"tr"),s.TgZ(18,"td",17),s.GkF(19,16),s.qZA(),s.TgZ(20,"td",19),s.GkF(21,16),s.qZA(),s.TgZ(22,"td",17),s.GkF(23,14),s.qZA(),s.TgZ(24,"td",20),s.GkF(25,16),s.qZA(),s.qZA(),s.BQk()),2&Je){const Ye=s.oxw(),rt=s.MAs(5),ge=s.MAs(19),Ve=s.MAs(15),at=s.MAs(17),ve=s.MAs(11),Ze=s.MAs(13),Ie=s.MAs(9),$e=s.MAs(23),ze=s.MAs(21);s.xp6(2),s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.VKq(18,C,s.DdM(17,U))),s.xp6(2),s.Q6J("ngTemplateOutlet",ge),s.xp6(2),s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.VKq(21,C,s.DdM(20,A))),s.xp6(2),s.Q6J("ngTemplateOutlet",Ve),s.xp6(2),s.Q6J("ngTemplateOutlet",at),s.xp6(2),s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.VKq(24,C,s.DdM(23,S))),s.xp6(2),s.Q6J("ngTemplateOutlet",ve),s.xp6(2),s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.VKq(27,C,s.DdM(26,Y))),s.xp6(3),s.Q6J("ngTemplateOutlet",Ze),s.xp6(2),s.Q6J("ngTemplateOutlet",Ie),s.xp6(2),s.Q6J("ngTemplateOutlet",$e)("ngTemplateOutletContext",s.VKq(29,b,Ye.inputSymbol.PrimaryType)),s.xp6(2),s.Q6J("ngTemplateOutlet",ze)}}function fe(Je,xt){if(1&Je&&(s.ynx(0),s.TgZ(1,"td"),s.TgZ(2,"button",22),s._uU(3),s.qZA(),s.qZA(),s.BQk()),2&Je){const Ye=xt.$implicit;s.xp6(2),s.s9C("name",Ye),s.xp6(1),s.Oqu(Ye)}}function $(Je,xt){1&Je&&s.YNc(0,fe,4,2,"ng-container",21),2&Je&&s.Q6J("ngForOf",xt.keys)}function ae(Je,xt){if(1&Je&&(s.TgZ(0,"div",26),s._uU(1),s.qZA()),2&Je){const Ye=s.oxw().key;s.xp6(1),s.Oqu(Ye)}}function me(Je,xt){if(1&Je&&s._UZ(0,"mat-icon",27),2&Je){const Ye=s.oxw().svgIcon;s.Q6J("svgIcon",Ye)}}function ye(Je,xt){if(1&Je&&(s.TgZ(0,"div",23),s.YNc(1,ae,2,1,"div",24),s.TgZ(2,"button",22),s._uU(3),s.YNc(4,me,1,1,"mat-icon",25),s.qZA(),s.qZA()),2&Je){const Ye=xt.key,rt=xt.svgIcon,ge=xt.text,Ve=xt.name,at=xt.class;let ve;s.xp6(1),s.Q6J("ngIf",Ye),s.xp6(1),s.Tol(at),s.s9C("name",null!==(ve=Ve)&&void 0!==ve?ve:ge),s.xp6(1),s.hij(" ",ge," "),s.xp6(1),s.Q6J("ngIf",rt)}}const ue=function(Je){return{name:Je,svgIcon:"space_bar"}};function X(Je,xt){if(1&Je&&s.GkF(0,14),2&Je){const Ye=s.oxw(),rt=s.MAs(7);s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.VKq(2,ue,Ye.inputSymbol.Space))}}const j=function(Je,xt){return{text:Je,key:xt,class:"text-capitalize"}};function K(Je,xt){if(1&Je&&s.GkF(0,14),2&Je){const Ye=s.oxw(),rt=s.MAs(7);s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.WLB(2,j,Ye.inputSymbol.Enter,Ye.gamepadKey.LT))}}const Z=function(Je,xt,Ye){return{key:Je,class:"caps-lock-button",name:xt,svgIcon:Ye}};function L(Je,xt){if(1&Je&&s.GkF(0,14),2&Je){const Ye=s.oxw(),rt=s.MAs(7);s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.kEZ(2,Z,Ye.gamepadKey.LB,Ye.inputSymbol.CapsLock,Ye.capsLockOff?"thick_arrow_up":"thick_arrow_dash_up"))}}const W=function(Je){return{name:Je,svgIcon:"keyboard_arrow_left"}};function te(Je,xt){if(1&Je&&s.GkF(0,14),2&Je){const Ye=s.oxw(),rt=s.MAs(7);s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.VKq(2,W,Ye.inputSymbol.ArrowLeft))}}const ie=function(Je){return{name:Je,svgIcon:"keyboard_arrow_right"}};function Q(Je,xt){if(1&Je&&s.GkF(0,14),2&Je){const Ye=s.oxw(),rt=s.MAs(7);s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.VKq(2,ie,Ye.inputSymbol.ArrowRight))}}const k=function(Je,xt){return{name:Je,key:xt,svgIcon:"backspace"}};function oe(Je,xt){if(1&Je&&s.GkF(0,14),2&Je){const Ye=s.oxw(),rt=s.MAs(7);s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.WLB(2,k,Ye.inputSymbol.Backspace,Ye.gamepadKey.X))}}const N=function(Je){return{name:Je,text:"Hide",class:"text-capitalize"}};function q(Je,xt){if(1&Je&&s.GkF(0,14),2&Je){const Ye=s.oxw(),rt=s.MAs(7);s.Q6J("ngTemplateOutlet",rt)("ngTemplateOutletContext",s.VKq(2,N,Ye.inputSymbol.Escape))}}const Me=function(Je,xt){return{text:Je,key:xt,class:"text-lower-case"}};function xe(Je,xt){if(1&Je&&s.GkF(0,14),2&Je){const Ye=xt.text,rt=s.oxw(),ge=s.MAs(7);s.Q6J("ngTemplateOutlet",ge)("ngTemplateOutletContext",s.WLB(2,Me,Ye,rt.gamepadKey.RB))}}const ct=function(Je,xt){return{"caps-lock-always":Je,"caps-lock-once":xt}};let Se=(()=>{class Je{constructor(Ye,rt,ge){this.spatialNavigationService=Ye,this.nvKeyboardService=rt,this.gamepadService=ge,this.primaryType=!0,this.inputSymbol=g,this.gamepadKey={X:"X",LT:"LT",LB:"LB",RB:"RB"},this.capsLockState=I.Off,this.destroy$=new t.xQ,this.pressedKeys=new Set}get capsLockAlways(){return this.capsLockState===I.Always}get capsLockOnce(){return this.capsLockState===I.Once}get capsLockOff(){return this.capsLockState===I.Off}ngAfterViewInit(){const Ye=(ge,Ve,at)=>this.gamepadService.onButtonPressed$(ge,at).pipe((0,u.n)(ve=>!ve),(0,o.U)(ve=>[Ve,ve]));let rt;(0,w.T)(Ye(c.z.X,g.Backspace,{repeat:!0}),Ye(c.z.LeftTrigger,g.Enter,{repeat:!0}),Ye(c.z.LeftBumper,g.CapsLock),Ye(c.z.RightBumper,g.PrimaryType),Ye(c.z.B,g.Escape)).pipe((0,f.R)(this.destroy$)).subscribe(([ge,Ve])=>{this.processEvent(this.newKeyboardEvent(Ve?"keydown":"keyup",ge))}),(0,w.T)((0,h.R)(this.container.nativeElement,"mousedown"),(0,h.R)(this.container.nativeElement,"mouseup")).pipe((0,f.R)(this.destroy$)).subscribe(ge=>{if(ge.target instanceof HTMLButtonElement){const Ve="mousedown"===ge.type?"keydown":"keyup";ge.preventDefault(),("keydown"===Ve||ge.target===rt)&&this.processEvent(this.newKeyboardEvent(Ve,ge.target.name)),rt=ge.target}}),this.focusCentralButton()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}toggleKeyboardType(){this.primaryType=!this.primaryType,this.focusCentralButton()}focusCentralButton(){setTimeout(()=>{const Ye=this.container.nativeElement,rt=Ye.rows[Math.floor(Ye.rows.length/2)],ge=rt.cells[Math.floor(rt.cells.length/2)];this.spatialNavigationService.focusFirstChild(ge)})}toggleCapsLock(){this.capsLockState=this.capsLockOff?I.Once:this.capsLockOnce?I.Always:I.Off}escapeKeyDown(Ye){Ye.stopPropagation()}keyDown(Ye){Ye.isTrusted?(this.nvKeyboardService.sendInput(Ye),(Ye.key.includes("Arrow")||"Tab"===Ye.key)&&Ye.preventDefault()):Ye.target instanceof HTMLButtonElement&&"Enter"===Ye.key&&(this.processEvent(Ye,Ye.target.name),this.lastKeydownEvent=Ye)}keyUp(Ye){var rt;Ye.isTrusted?this.nvKeyboardService.sendInput(Ye):Ye.target instanceof HTMLButtonElement&&"Enter"===Ye.key&&(this.processEvent(Ye,Ye.target.name),(null===(rt=this.lastKeydownEvent)||void 0===rt?void 0:rt.target)===Ye.target&&(this.lastKeydownEvent=void 0))}focusOut(){var Ye;(null===(Ye=this.lastKeydownEvent)||void 0===Ye?void 0:Ye.target)instanceof HTMLButtonElement&&(this.processEvent(this.lastKeydownEvent,this.lastKeydownEvent.target.name,"keyup"),this.lastKeydownEvent=void 0)}processEvent(Ye,rt,ge){const Ve=null!=rt?rt:Ye.key,at=this.newKeyboardEvent(null!=ge?ge:Ye.type,Ve),ve=1===Ve.length,Ze="keyup"===at.type;Ve===g.PrimaryType||Ve===g.SecondaryType?Ze&&this.toggleKeyboardType():Ve===g.CapsLock?Ze&&this.toggleCapsLock():ve?(this.nvKeyboardService.sendInput(at),this.capsLockOnce&&(this.capsLockState=I.Off)):this.nvKeyboardService.sendInput(at)}getKeyCode(Ye){for(const[ge,Ve]of G.entries())if(ge.includes(Ye))return Ve;return[g.Escape,g.Backspace,g.ArrowLeft,g.ArrowRight,g.Enter,g.Space,g.CapsLock].includes(Ye)?Ye:1===Ye.length&&/^[A-Za-z]+$/.test(Ye)?"Key"+Ye.toUpperCase():void 0}newKeyboardEvent(Ye,rt){const ge=this.nvKeyboardService.needShiftKey(rt);let Ve=!1;const at=this.pressedKeys.has(rt);return"keydown"===Ye?(at||this.pressedKeys.add(rt),Ve="Shift"!==rt&&at):"keyup"===Ye&&at&&this.pressedKeys.delete(rt),new KeyboardEvent(Ye,{key:rt,code:this.getKeyCode(rt),shiftKey:ge,repeat:Ve,modifierCapsLock:!this.capsLockOff,view:window,bubbles:!0,cancelable:!0})}}return Je.\u0275fac=function(Ye){return new(Ye||Je)(s.Y36(a.jr),s.Y36(Tt),s.Y36(c.S))},Je.\u0275cmp=s.Xpm({type:Je,selectors:[["nv-keyboard"]],viewQuery:function(Ye,rt){if(1&Ye&&s.Gf(v,5),2&Ye){let ge;s.iGM(ge=s.CRH())&&(rt.container=ge.first)}},hostBindings:function(Ye,rt){1&Ye&&s.NdJ("keydown.escape",function(Ve){return rt.escapeKeyDown(Ve)})("keydown",function(Ve){return rt.keyDown(Ve)})("keyup",function(Ve){return rt.keyUp(Ve)})("focusout",function(){return rt.focusOut()})},decls:24,vars:6,consts:[["nvTrapFocus","","nvSpatialNavigationContainer","","captureAndRestore","false",3,"ngClass"],["container",""],[4,"ngIf"],["keyList",""],["composite",""],["spaceBar",""],["enter",""],["capsLock",""],["arrowLeft",""],["arrowRight",""],["backspace",""],["hide",""],["keyboardType",""],["row1",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["colspan","4",1,"top-right-cell"],[3,"ngTemplateOutlet"],["colspan","2"],["rowspan","2","colspan","4"],["colspan","6"],["colspan","4"],[4,"ngFor","ngForOf"],["mat-button","",3,"name"],[1,"key-container"],["class","keypad-circle",4,"ngIf"],[3,"svgIcon",4,"ngIf"],[1,"keypad-circle"],[3,"svgIcon"]],template:function(Ye,rt){1&Ye&&(s.TgZ(0,"table",0,1),s.YNc(2,B,27,31,"ng-container",2),s.YNc(3,se,26,31,"ng-container",2),s.qZA(),s.YNc(4,$,1,1,"ng-template",null,3,s.W1O),s.YNc(6,ye,5,7,"ng-template",null,4,s.W1O),s.YNc(8,X,1,4,"ng-template",null,5,s.W1O),s.YNc(10,K,1,5,"ng-template",null,6,s.W1O),s.YNc(12,L,1,6,"ng-template",null,7,s.W1O),s.YNc(14,te,1,4,"ng-template",null,8,s.W1O),s.YNc(16,Q,1,4,"ng-template",null,9,s.W1O),s.YNc(18,oe,1,5,"ng-template",null,10,s.W1O),s.YNc(20,q,1,4,"ng-template",null,11,s.W1O),s.YNc(22,xe,1,5,"ng-template",null,12,s.W1O)),2&Ye&&(s.Q6J("ngClass",s.WLB(3,ct,rt.capsLockAlways,rt.capsLockOnce)),s.xp6(2),s.Q6J("ngIf",rt.primaryType),s.xp6(1),s.Q6J("ngIf",!rt.primaryType))},directives:[x.e,E.N,n.mk,P.oO,n.O5,n.tP,n.sg,D.lW,i.Hw],styles:['table[_ngcontent-%COMP%]{width:100vw;height:calc(100vw / 4.27);border-spacing:0;direction:ltr}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0}table[_ngcontent-%COMP%]   td.top-right-cell[_ngcontent-%COMP%]{width:20%}table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;font-size:max(1.5vw,14px);font-weight:400;text-transform:lowercase;place-content:center;align-items:center;border:1px solid rgba(0,0,0,.5);background-color:#29292980}table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:flex;width:unset;height:unset;font-size:max(1.5vw,14px)}table[_ngcontent-%COMP%]   button.text-capitalize[_ngcontent-%COMP%]{text-transform:capitalize}table[_ngcontent-%COMP%]   button.cdk-keyboard-focused[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   button.cdk-program-focused[_ngcontent-%COMP%]{border:1px solid #ffffff}table[_ngcontent-%COMP%]   .key-container[_ngcontent-%COMP%]{position:relative;height:100%}table[_ngcontent-%COMP%]   .key-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:max(1.5vw,14px)}table[_ngcontent-%COMP%]   .key-container[_ngcontent-%COMP%]   .caps-lock-button[_ngcontent-%COMP%]:before{position:absolute;background-color:#fff;border-radius:50%;width:calc(max(1.5vw,14px) / 2);height:calc(max(1.5vw,14px) / 2);top:10px;left:10px;content:""}table[_ngcontent-%COMP%]   .key-container[_ngcontent-%COMP%]   .keypad-circle[_ngcontent-%COMP%]{display:table-cell;position:absolute;background-color:#0b8abc;width:max(1.5vw,14px);height:max(1.5vw,14px);border-radius:50%;line-height:max(1.5vw,14px);font-size:max(.8vw,6px);color:#fff;text-align:center;vertical-align:middle;top:calc(50% - calc(max(1.5vw,14px) / 2));right:10px;z-index:1;pointer-events:none}table.caps-lock-always[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.text-capitalize):not(.text-lower-case), table.caps-lock-once[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.text-capitalize):not(.text-lower-case){text-transform:uppercase}table.caps-lock-always[_ngcontent-%COMP%]:not(.caps-lock-once)   .key-container[_ngcontent-%COMP%]   .caps-lock-button[_ngcontent-%COMP%]:before, table.caps-lock-once[_ngcontent-%COMP%]:not(.caps-lock-once)   .key-container[_ngcontent-%COMP%]   .caps-lock-button[_ngcontent-%COMP%]:before{background-color:#76b900}']}),Je})();var Ge=e(30582);let St=(()=>{class Je{}return Je.\u0275fac=function(Ye){return new(Ye||Je)},Je.\u0275cmp=s.Xpm({type:Je,selectors:[["nv-keyboard-hint"]],decls:6,vars:3,consts:[["fxLayout","row","fxLayoutAlign","start center"],[1,"fab-hint"]],template:function(Ye,rt){1&Ye&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s._uU(2,"Y"),s.qZA(),s.TgZ(3,"p"),s._uU(4),s.ALo(5,"translate"),s.qZA(),s.qZA()),2&Ye&&(s.xp6(4),s.Oqu(s.lcZ(5,1,rt.hint)))},directives:[Ge.xw,Ge.Wh],pipes:[y.X$],styles:['@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.fab-hint[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:18px;line-height:32px;letter-spacing:0;font-weight:700;background-color:#0b8abc;border-radius:50%;color:#fff;text-align:center;vertical-align:middle;width:32px;height:32px}.isLtr[_nghost-%COMP%]   .fab-hint[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .fab-hint[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .fab-hint[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .fab-hint[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .fab-hint[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .fab-hint[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}p[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:23px;letter-spacing:0;font-weight:400;white-space:nowrap;margin:0}']}),Je})(),Tt=(()=>{class Je{constructor(Ye,rt){this.matBottomSheet=Ye,this.overlay=rt,this.onInput=new t.xQ,this.shiftKeyPressed=!1,this._enabled=!1}get enabled(){return this._enabled}set enabled(Ye){this._enabled=Ye}get onInput$(){return this.onInput.asObservable()}open(){if(!this.enabled)throw new Error("NvKeyboard is not enabled");return this.matBottomSheet.open(Se,{panelClass:["nv-hig","nv-keyboard"],hasBackdrop:!1,disableClose:!1,autoFocus:!1,restoreFocus:!1})}sendShiftKeyEvent(Ye,rt){this.onInput.next(new KeyboardEvent(Ye,{key:"Shift",code:"ShiftLeft",shiftKey:rt,view:window,bubbles:!0,cancelable:!0}))}needShiftKey(Ye){return'!@#$%^&*()~_+{}|:"<>?'.includes(Ye)}sendInput(Ye){if(!this.enabled)throw new Error("NvKeyboard is not enabled");const rt=this.needShiftKey(Ye.key);rt&&!this.shiftKeyPressed&&"keydown"===Ye.type&&(this.shiftKeyPressed=!0,this.sendShiftKeyEvent(Ye.type,!0)),this.onInput.next(Ye),rt&&this.shiftKeyPressed&&"keyup"===Ye.type&&(this.shiftKeyPressed=!1,this.sendShiftKeyEvent(Ye.type,!1))}createHintOverlay(Ye){const rt=this.overlay.position().flexibleConnectedTo(Ye).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"bottom",offsetY:48}]),ge=this.overlay.create(new T.X_({positionStrategy:rt})),Ve=ge.attach(new l.C5(St)).instance;return{updateHint:at=>Ve.hint=at,dispose:()=>ge.dispose()}}}return Je.\u0275fac=function(Ye){return new(Ye||Je)(s.LFG(m.ch),s.LFG(T.aV))},Je.\u0275prov=s.Yz7({token:Je,factory:Je.\u0275fac,providedIn:"root"}),Je})();var Te=(()=>{return(Je=Te||(Te={})).SystemKeyboard="keyboardType.system",Je.AppKeyboard="keyboardType.app",Te;var Je})()},48259:(He,de,e)=>{"use strict";e.d(de,{zJ:()=>ye,dp:()=>ue,fS:()=>ae,ZJ:()=>me,z:()=>S,ZO:()=>p,sy:()=>Y,fo:()=>j,RC:()=>X});var n=e(76491),i=e(9170),D=e(53466),m=e(202),y=e(43124);const T=["portable","laptop","notebook"];var a=(()=>{return(K=a||(a={})).Unknown="-1",K.Disabled="0",K.Enabled="1",a;var K})(),s=(()=>{return(K=s||(s={})).Locale="Locale",K.SystemInfo="SystemInfo",K.User="User",K.Init="Init",K.Geo="Geo",s;var K})(),p=(()=>{return(K=p||(p={})).GfeContent="nvidia_web_services/controller.gfeclientcontent.NG.php",K.Installer="nvidia_web_services/controller.driverinstallercontent.NG.php",K.Profile="nvidia_web_services/controller.gfeclientaffinity.php",K.Vrs="nvidia_web_services/controller.gfeclientvrs.php",p;var K})();const l={hasGeoInfo:!0,hasLocaleInfo:!0,hasSystemInfo:!0,hasUserInfo:!1},t={additionalHwInfo:!1,geo:!1},w=[{LCID:[1029],code:"cs-CZ",name:"\u010ce\u0161tina (Czech)",isoThreeLetter:"ces",countryCode:"CZ"},{LCID:[1030],code:"da-DK",name:"Dansk (Danish)",isoThreeLetter:"dan",countryCode:"DK"},{LCID:[1031,3079,5127,4103,2055],code:"de-DE",name:"Deutsch (German)",isoThreeLetter:"deu",countryCode:"DE"},{LCID:[1032],code:"el-GR",name:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac (Greek)",isoThreeLetter:"ell",countryCode:"GR"},{LCID:[1033],code:"en-US",name:"English - United States",isoThreeLetter:"eng",countryCode:"US"},{LCID:[2057,1078,1052,1118,1067,1101,1068,5146,1026,1109,1050,4122,1125,2067,1126,3081,10249,6153,5129,7177,12297,1061,1127,1071,2108,1084,1079,1129,1039,1136,1137,2144,1120,1087,1153,2128,2068,1048,2074,1091,1093,2117,16393,1081,1121,2145,1094,2118,1113,2137,1115,2080,3081,15369,14345,17417,5129,13321,18441],code:"en-GB",name:"English - United Kingdom",isoThreeLetter:"eng",countryCode:"GB"},{LCID:[3082,1069,1027,1034],code:"es-ES",name:"Espa\xf1ol - Espa\xf1a (Spanish - Spain)",isoThreeLetter:"spa",countryCode:"ES"},{LCID:[2058,11274,16394,13322,9226,5130,7178,12298,17418,4106,18442,58378,19466,6154,15370,10250,20490,21514,14346,8202],code:"es-MX",name:"Espa\xf1ol - M\xe9xico (Spanish - Mexico)",isoThreeLetter:"spa",countryCode:"MX"},{LCID:[1035],code:"fi-FI",name:"Suomi (Finnish)",isoThreeLetter:"fin",countryCode:"FI"},{LCID:[1036,2060,11276,3084,9228,12300,15372,5132,13324,6156,14348,58380,8204,10252,4108,7180,1122],code:"fr-FR",name:"Fran\xe7ais (French)",isoThreeLetter:"fra",countryCode:"FR"},{LCID:[1038],code:"hu-HU",name:"Magyar (Hungarian)",isoThreeLetter:"hun",countryCode:"HU"},{LCID:[1040,2064],code:"it-IT",name:"Italiano (Italian)",isoThreeLetter:"ita",countryCode:"IT"},{LCID:[1041],code:"ja-JP",name:"\u65e5\u672c\u8a9e (Japanese)",isoThreeLetter:"jpn",countryCode:"JP"},{LCID:[1042],code:"ko-KR",name:"\ud55c\uad6d\uc5b4 (Korean)",isoThreeLetter:"kor",countryCode:"KR"},{LCID:[1043],code:"nl-NL",name:"Nederlands (Dutch)",isoThreeLetter:"nld",countryCode:"NL"},{LCID:[1044,14],code:"nb-NO",name:"Norsk (Norwegian)",isoThreeLetter:"nor",countryCode:"NO"},{LCID:[1045],code:"pl-PL",name:"Polski (Polish)",isoThreeLetter:"pol",countryCode:"PL"},{LCID:[2070],code:"pt-PT",name:"Portugu\xeas - Portugal (Portuguese - Portugal)",isoThreeLetter:"por",countryCode:"PT"},{LCID:[1046,2070],code:"pt-BR",name:"Portugu\xeas - Brasil (Portuguese - Brazil)",isoThreeLetter:"por",countryCode:"BR"},{LCID:[1049,2092,1059,1088,1104,2073,3098,2115,1058],code:"ru-RU",name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 (Russian)",isoThreeLetter:"rus",countryCode:"RU"},{LCID:[1051],code:"sk-SK",name:"Sloven\u010dina (Slovak)",isoThreeLetter:"slk",countryCode:"SK"},{LCID:[1060],code:"sl-SI",name:"Sloven\u0161\u010dina (Slovenian)",isoThreeLetter:"slv",countryCode:"SI"},{LCID:[1053],code:"sv-SE",name:"Svenska (Swedish)",isoThreeLetter:"swe",countryCode:"SE"},{LCID:[1054],code:"th-TH",name:"\u0e44\u0e17\u0e22 (Thai)",isoThreeLetter:"tha",countryCode:"TH"},{LCID:[1055],code:"tr-TR",name:"T\xfcrk\xe7e (Turkish)",isoThreeLetter:"tur",countryCode:"TR"},{LCID:[2052,804,4],code:"zh-CHS",cmsCode:"zh_CN",name:"\u7b80\u4f53\u4e2d\u6587 (Chinese - Simplified)",isoThreeLetter:"zho",countryCode:"CN"},{LCID:[3076,1028,4100,404,5124,31748],code:"zh-CHT",cmsCode:"zh_TW",name:"\u7e41\u9ad4\u4e2d\u6587 (Chinese - Traditional)",isoThreeLetter:"zho",countryCode:"CN"}];var h=e(81134),u=e(85816),o=e(18293),f=e(92597),c=e(98636),g=e(33927);const G={city:void 0,countryCode:"US",domainName:void 0,gregion:void 0,isInternal:void 0,isp:void 0,netSpeed:void 0,region:void 0,timezone:void 0};var x=e(2316),E=e(3076);let P=(()=>{class K{}return K.\u0275fac=function(L){return new(L||K)},K.\u0275prov=x.Yz7({token:K,factory:K.\u0275fac}),K})();var v=e(79911);let F=(()=>{class K{constructor(L,W){this.config=L,this.endpoint=W.createEndpoint({config:{timeout:this.config.defaultTimeout||3e4,maxRetries:this.config.defaultRetries||3,timeBetweenRetries:this.config.timeBetweenRetries||1e3}})}getGeolocation(){return this.endpoint.get(this.buildUrl("/geoLocation"))}buildUrl(L){return(0,E.D5)([this.config.server,this.config.version,L])}}return K.\u0275fac=function(L){return new(L||K)(x.LFG(P),x.LFG(v.V9))},K.\u0275prov=x.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})();var V=e(6484);let b=(()=>{class K{constructor(L,W,te){this.sdk=L,this.dbService=W,this.storeName="global",this.keyName="geoDetails",this.logger=te.getLogger("GeolocationService")}getGeolocation(){return this.geoLocation$||(this.geoLocation$=this._getGeoLocation()),this.geoLocation$}_getGeoLocation(){return this.sdk.getGeolocation().pipe((0,u.zg)(L=>this.cacheLocationData(L)),(0,o.K)(L=>this.getCachedLocationData()),(0,f.d)(1))}cacheLocationData(L){return this.dbService.getGlobalStore(this.storeName).setItem(this.keyName,L).pipe((0,c.b)(W=>this.logger.info("Geolocation set to",L)),(0,g.U)(W=>L))}getCachedLocationData(){return this.dbService.getGlobalStore(this.storeName).getItem(this.keyName).pipe((0,u.zg)(L=>L?(0,h.of)(L):(this.logger.error("Returning default country code:",G.countryCode),(0,h.of)(G))))}}return K.\u0275fac=function(L){return new(L||K)(x.LFG(F),x.LFG(V.MC),x.LFG(V.ed))},K.\u0275prov=x.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})();var U=e(2984).Yk.Gfe.Driverupdaterecommendation.DriverTypeEnum;let S=(()=>{class K{}return K.\u0275fac=function(L){return new(L||K)},K.\u0275prov=x.Yz7({token:K,factory:K.\u0275fac}),K})(),Y=(()=>{class K{constructor(L,W,te,ie,Q){this.config=W,this.systemInfoService=te,this.localeService=ie,this.injector=Q,this.logger=L.getLogger("crimson/sdk/gfwsl/GfwslParamsService"),this.config.includedParams=this.config.includedParams||t,this.params={gcV:this.config.appVersion},this.hasGeneralSystemInfo=!1,this.hasGenericSystemInfo=!1,this.hasGpuInfo=!1,this.hasLocaleInfo=!1,this.hasUserInfo=!1,this.hasGeoInfo=!1,this.gfwslParamsUpdated$=new n.X(this.getParamEventData(s.Init))}getParamEventData(L){return{type:L,hasSystemInfo:this.isSystemInfoComplete(),hasLocaleInfo:this.hasLocaleInfo,hasUserInfo:this.hasUserInfo,hasGeoInfo:this.hasGeoInfo,params:this.params}}isSystemInfoComplete(){return this.hasGeneralSystemInfo&&this.config.includedParams.additionalHwInfo===this.hasGenericSystemInfo&&this.config.includedParams.additionalHwInfo===this.hasGpuInfo}get gfwslParamsUpdated(){return this.gfwslParamsUpdated$}initialize(){this.processSystemInfo(),this.processLocaleInfo(),this.config.includedParams.additionalHwInfo&&(this.processGenericInfo(),this.processGpuInfo()),this.config.includedParams.geo&&this.initGeoService()}onAccountStatusChanged(L,W,te,ie,Q){this.params.jUid=W?btoa(L):L,this.hasUserInfo=W,this.params.uCst=[te===y.p6.Full?a.Enabled:a.Disabled,ie===y.p6.Full?a.Enabled:a.Disabled,Q===y.p6.Full?a.Enabled:a.Disabled],this.gfwslParamsUpdated$.next(this.getParamEventData(s.User))}onGfwslParamsReady(L=l){return this.gfwslParamsUpdated$.pipe((0,i.h)(W=>this.checkAvailableGfwslParams(L,W)),(0,D.q)(1))}initGeoService(){this.geoService||(this.geoService=this.injector.get(b),this.processGeoInfo())}checkAvailableGfwslParams(L,W){for(const te of Object.keys(L))if(L[te]!==W[te])return!1;return!0}processSystemInfo(){this.systemInfoService.getSystemInfo().subscribe(L=>{this.params.is6="x64"===L.ProcessorArchitecture?a.Enabled:a.Disabled,({ProcessorArchitecture:this.params.pArch,CPUName:this.params.cID}=L),[this.params.osC,this.params.osB]=this.getOSInfo(L.OSName,L.OSVersion),this.params.sM=this.computeMemory(L),this.params.IsB=a.Disabled,this.params.gIsB=a.Disabled,this.params.apRT="802.11a",this.params.sdWmfp=a.Enabled,this.params.O=`${this.params.pArch}/${this.params.osC}`,this.hasGeneralSystemInfo=!0,this.gfwslParamsUpdated$.next(this.getParamEventData(s.SystemInfo))},L=>{this.logger.error("System info errored out",L)})}processGenericInfo(){this.systemInfoService.getGenericInfo().subscribe(L=>{this.params.iLp=T.includes(L.MoboType.toLowerCase())?a.Enabled:a.Disabled,this.params.isCRD=(L.DriverType?L.DriverType:U.GameReadyDriver).toString(),this.params.sM=this.computeMemory(L),({DriverVersion:this.params.GFPV,CurrentResolution:this.params.cSR,IsDCHDriverInstalled:this.params.dch}=L),this.hasGenericSystemInfo=!0,this.gfwslParamsUpdated$.next(this.getParamEventData(s.SystemInfo))},L=>{this.logger.error("Generic info errored out",L)})}computeMemory(L){const W=L.TotalPhysicalMemory&&parseInt(L.TotalPhysicalMemory,10)>.1?L.TotalPhysicalMemory:L.PhysicalMemoryCapacity;return`${(parseInt(W,10)/Math.pow(1024,3)).toFixed()}GB`}getOSInfo(L,W){const te=W.split(".");let ie="";return L.match(/windows/i)&&(ie=te.pop()),[te.join("."),ie]}processGpuInfo(){this.systemInfoService.getGPUHardwareInfo().subscribe(L=>{if(0===(0,m.size)(L.GPU))return void this.logger.error("Empty GPU list in gpu hardware info",L);const W=L.GPU.find(te=>te.IsPrimary===a.Enabled)||L.GPU[0];this.params.IsQ=W.IsQuadro,this.params.D=JSON.parse(`{"VEN_${W.VendorId}&DEV_${W.DeviceId}":"DISPLAY"}`),this.params.dIDa=this.getGpuDeviceIdArray(L),this.params.dFma=this.getGpuDeviceFamilyArray(L),this.params.isO=L.IsOptimus,this.params.isSLI=this.computeSliStatus(L.SLI),this.hasGpuInfo=!0,this.gfwslParamsUpdated$.next(this.getParamEventData(s.SystemInfo))},L=>{this.logger.error("GPU info errored out",L)})}getGpuDeviceIdArray(L){return Array.from(this.getSortedGpuArray(L),(W,te)=>this.buildGpuDeviceId(W,te))}getSortedGpuArray(L){return Array.from(L.GPU).sort(W=>W.IsPrimary===a.Enabled?-1:1)}buildGpuDeviceId(L,W){let te="";return L.DeviceId&&L.VendorId?(te=`${L.DeviceId}_${L.VendorId}`,te=L.SubSystemId&&L.SubVendorId?`${te}_${L.SubSystemId}_${L.SubVendorId}`:`${te}_FFFF_FFFF`):(this.logger.error("GPU info has invalid DeviceId and/or VendorId",L),te="FFFF_FFFF_FFFF_FFFF"),`${te}_${++W}`}getGpuDeviceFamilyArray(L){return Array.from(this.getSortedGpuArray(L),W=>parseInt(W.GPUArchitecture,10).toString(16))}computeSliStatus(L){return L.SLISupported===a.Enabled&&L.HasActiveSLITopology===a.Enabled?L.ActiveTopologyGPUCount:L.SLISupported}processGeoInfo(){this.geoService.getGeolocation().subscribe(L=>{this.params.go=L.countryCode,this.hasGeoInfo=!0,this.gfwslParamsUpdated$.next(this.getParamEventData(s.Geo))})}onUserConsentUpdated(L){this.params.uCst=[this.getFunctionalConsent(L),this.getGfwslConsent(L,"trackTechnicalData"),this.getGfwslConsent(L,"trackBehavioralData")]}getFunctionalConsent(L){return this.formatConsentForGfwsl(L.consentSettings?L.consentSettings.trackFunctionalData:{level:y.p6.None})}formatConsentForGfwsl(L){return L.level===y.p6.Full?a.Enabled:a.Disabled}getGfwslConsent(L,W){return L.consentSettings?this.formatConsentForGfwsl(L.consentSettings[W]):L.privacySettings&&L.privacySettings.dataTracking?this.formatConsentForGfwsl(L.privacySettings.dataTracking[W]):a.Unknown}processLocaleInfo(){this.localeService.localeChanged.subscribe(L=>{this.setGfwslLocaleParams(L),this.hasLocaleInfo=!0,this.gfwslParamsUpdated$.next(this.getParamEventData(s.Locale))},L=>{this.logger.error("Locale info errored out",L)})}setGfwslLocaleParams(L){const W=w.find(ie=>ie.code===L.replace("_","-")),te=W.LCID[0].toString();this.params.gLg=W.code,this.params.lg=te,this.params.L={CC:W.isoThreeLetter,LCID:te}}getParams(L={},W){L=(0,m.omitBy)(L,ie=>"string"==typeof ie&&"CTP_"===ie.slice(0,4));let te=(0,m.assignIn)({},this.params,L);return W&&(te=(0,m.pick)(te,W)),te}}return K.\u0275fac=function(L){return new(L||K)(x.LFG(V.ed),x.LFG(S),x.LFG(V.Ob),x.LFG(V.OL),x.LFG(x.zs3))},K.\u0275prov=x.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})();var se=e(89166),$=e(45871);let ae=(()=>{class K{}return K.\u0275fac=function(L){return new(L||K)},K.\u0275prov=x.Yz7({token:K,factory:K.\u0275fac}),K})(),me=(()=>{class K{constructor(L,W,te,ie,Q){this.endpointFactory=W,this.gfwslParamsService=te,this.config=ie,this.distributedtracingUtilService=Q,this.logger=L.getLogger("crimson/sdk/aem/AemService"),this.endpointMap=new Map,this.endpointDefinitionMap=new Map,this.endpointRetryConfig={},({defaultRetries:this.endpointRetryConfig.maxRetries,defaultTimeBetweenRetries:this.endpointRetryConfig.timeBetweenRetries,defaultTimeout:this.endpointRetryConfig.timeout}=this.config)}setUrlGenerator(L,W,te){let ie;const Q=JSON.stringify(this.gfwslParamsService.getParams(te,W.paramMask));return ie=(0,E.D5)([L,W.classPath,W.clientPath,W.endpointPath]),(0,m.isEmpty)(Q)||(ie=ie+"?"+Q),ie}addEndpointDefinitions(L){L.forEach(W=>{const te=W.name;this.endpointDefinitionMap.set(te,W),this.endpointMap.set(te,this.endpointFactory.createEndpoint(W))})}callAemEndpoint(L,W,te,ie={},Q={},k){const oe=this.endpointMap.get(L),N=this.endpointDefinitionMap.get(L);if(!oe)return(0,$._)(`No endpoint found for ${L}. Add this definition with the initialize call.`);W=this.gfwslParamsService.getParams(W,N.paramMask);const q=this.setUrlGenerator(this.config.server,N,W);this.logger.info("Going to call AEM URL:",q,"with dynamic headers:",Q);const Me={config:this.endpointRetryConfig,body:ie,headers:Object.assign(Object.assign({},N.headers),Q),includeRequestId:!1,reportRequestData:(0,m.isNil)(te)?{}:Object.assign({},te)},xe=oe.makeRequestEx(N.method,q,Me);return this.distributedtracingUtilService.handleHttpEndpointSpan(xe,Me,se.j1.GetAemReleaseHighlights,k)}}return K.\u0275fac=function(L){return new(L||K)(x.LFG(V.ed),x.LFG(v.V9),x.LFG(Y),x.LFG(ae),x.LFG(se.Dc))},K.\u0275prov=x.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})();var ye=(()=>((ye||(ye={})).services="services/com.nvidia.services/",ye))(),ue=(()=>((ue||(ue={})).GfeClient="AEMGFEClientContent",ue))();let X=(()=>{class K{static forRoot(L){return{ngModule:K,providers:[{provide:S,useValue:L.gfwsl},{provide:ae,useValue:L.aem},{provide:P,useValue:L.geo}]}}}return K.\u0275fac=function(L){return new(L||K)},K.\u0275mod=x.oAB({type:K}),K.\u0275inj=x.cJS({imports:[[]]}),K})();var j=(()=>{return(K=j||(j={})).Get="GET",K.Post="POST",j;var K})()},17013:(He,de,e)=>{"use strict";e.d(de,{Iv:()=>D,o_:()=>t,cX:()=>w,DN:()=>a});var n=e(202),i=e(89166);const D={server:"",version:"v1",defaultRetries:2,exponentialBackoffMaxDelay:3e4,defaultTimeout:3e4,clientId:""},y="application/json";var T=(()=>{return(h=T||(T={})).Register="PNS_Registrations",h.Unregister="PNS_Unregister",T;var h})(),r=e(2316);let a=(()=>{class h{}return h.\u0275fac=function(o){return new(o||h)},h.\u0275prov=r.Yz7({token:h,factory:h.\u0275fac}),h})();var s=e(79911);let t=(()=>{class h{constructor(o,f,c){this.serverConfig=o,this.endpointFactory=f,this.distributedTracingUtilService=c,this.commonHeaders={"Content-Type":y,Accept:y,"NV-Client-ID":o.clientId},this.endpointConfig={timeout:this.serverConfig.defaultTimeout,exponentialBackoffMaxDelay:this.serverConfig.exponentialBackoffMaxDelay,maxRetries:this.serverConfig.defaultRetries},this.pnsRegisterEndpointUrl=this.preparePnsRegisterEndpoint(),this.pnsUnregisterEndpointUrl=this.preparePnsUnregisterEndpoint()}generateUrl(o){return this.serverConfig.server+"/"+this.serverConfig.version+"/"+o}preparePnsRegisterEndpoint(){return this.endpointFactory.createEndpoint({headers:this.commonHeaders,config:this.endpointConfig,reportRequestData:{originalService:"PNS",serviceUseCase:T.Register,reportSuccessTelemetry:"true"}})}preparePnsUnregisterEndpoint(){return this.endpointFactory.createEndpoint({headers:this.commonHeaders,config:this.endpointConfig,reportRequestData:{originalService:"PNS",serviceUseCase:T.Unregister,reportSuccessTelemetry:"true"}})}pnsRegister(o,f,c){return this.commonHeaders=(0,n.merge)(this.commonHeaders,f),this.pnsRegistrationRequest(o,this.commonHeaders,c)}pnsUnregister(o,f){return this.commonHeaders=(0,n.merge)(this.commonHeaders,f),this.pnsUnregistrationRequest(o,this.commonHeaders)}getCommonHeaders(){return this.commonHeaders}pnsRegistrationRequest(o,f,c){const g={body:o,headers:f},I=this.pnsRegisterEndpointUrl.post(this.generateUrl("registrations"),g);return this.distributedTracingUtilService.handleHttpEndpointSpan(I,g,i.j1.PnsRegistration,c)}pnsUnregistrationRequest(o,f){const c={body:o,headers:f},g=this.pnsUnregisterEndpointUrl.post(this.generateUrl("unregister"),c);return this.distributedTracingUtilService.handleHttpEndpointSpan(g,c,i.j1.PnsUnregister)}}return h.\u0275fac=function(o){return new(o||h)(r.LFG(a),r.LFG(s.V9),r.LFG(i.Dc))},h.\u0275prov=r.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})(),w=(()=>{class h{static forRoot(o){return{ngModule:h,providers:[{provide:a,useValue:o||D}]}}}return h.\u0275fac=function(o){return new(o||h)},h.\u0275mod=r.oAB({type:h}),h.\u0275inj=r.cJS({imports:[[]]}),h})()},98012:(He,de,e)=>{"use strict";e.d(de,{b:()=>r});var n=e(2316),i=e(14304),D=e(1180),m=e(54364);const y=function(a){return{highlight:a}},T=["*"];let r=(()=>{class a{constructor(p){this.productTourService=p}highlightCurrentElement(){if(this.anchorId===this.productTourService.currentAnchorId&&this.productTourService.isTourActive)return!0}}return a.\u0275fac=function(p){return new(p||a)(n.Y36(i.Q))},a.\u0275cmp=n.Xpm({type:a,selectors:[["nv-product-tour-step"]],inputs:{anchorId:"anchorId"},ngContentSelectors:T,decls:2,vars:4,consts:[[3,"tourAnchor","ngClass"]],template:function(p,l){1&p&&(n.F$t(),n.TgZ(0,"div",0),n.Hsn(1),n.qZA()),2&p&&(n.s9C("tourAnchor",l.anchorId),n.Q6J("ngClass",n.VKq(2,y,l.highlightCurrentElement())))},directives:[D.zL,D.Jj,m.mk],styles:[".highlight[_ngcontent-%COMP%]{z-index:250;position:relative;pointer-events:none}"]}),a})()},58514:(He,de,e)=>{"use strict";e.d(de,{AP:()=>n,wv:()=>i,uR:()=>D});var n=(()=>{return(m=n||(n={})).Right="right-start",m.BottomRight="bottom-end",m.BottomCenter="bottom",n;var m})(),i=(()=>{return(m=i||(i={})).TourStoreDbName="productTourStore",m.TourStoreBrowseUxDbName="productTourBrowseUxStore",m.TourStoreDbKey="tourData",m.GlobalStoreDbName="global",m.GlobalStoreKeyName="PRODUCT_TOUR_STATUS",i;var m})();class D{}},14304:(He,de,e)=>{"use strict";e.d(de,{Q:()=>w});var n=e(80226),i=e(61786),D=e(85816),m=e(58514),y=e(25004),T=e(43124);class r extends T.MW{constructor(u){super(u),this.name=y.GM.ProductTourProgress.name,this.gdprLevel=y.GM.ProductTourProgress.gdprLevel}}class a extends T.MW{constructor(u){super(u),this.name=y.GM.ProductTourExit.name,this.gdprLevel=y.GM.ProductTourExit.gdprLevel}}var s=e(2316),p=e(1180),l=e(6484),t=e(87335);let w=(()=>{class h{constructor(o,f,c,g,I,G,x){this.tourService=o,this.dbCacheService=f,this.telemetryService=g,this.applicationLifetimeService=I,this.ngZone=G,this.productTourConfig=x,this.isTourActive=!1,this.productTourStore=null,this.disableTour=!1,this.isTourShown=new n.t(1),this.TabKey=9,this.EnterKey=13,this.F4Key=115,this.disableKeyInput=E=>{const P=document.getElementsByClassName("nv-product-tour-button");!0===this.isTourActive&&!E.altKey&&E.keyCode!==this.F4Key&&(E.stopImmediatePropagation(),E.preventDefault(),E.keyCode===this.TabKey&&(document.activeElement.classList.contains("nv-product-tour-button")?P[0].blur():P[0].focus()),E.keyCode===this.EnterKey&&document.activeElement.classList.contains("nv-product-tour-button")&&P[0].click())},this.logger=c.getLogger("ProductTourService")}get onTourEnd(){return this.tourService.end$.asObservable()}get isTourShown$(){return this.isTourShown.asObservable()}onAccountStatusChanged(o,f){}initialize(){this.productTourStore=this.dbCacheService.getOrCreateCachedGlobalItem(m.wv.TourStoreBrowseUxDbName,m.wv.TourStoreDbKey),this.storeSyncSubscription&&this.storeSyncSubscription.unsubscribe(),this.storeSyncSubscription=this.productTourStore.sync_().subscribe(()=>{this.isTourActive=!1},o=>{this.logger.error("Unable to get Product Tour data from Db",o),this.productTourStore.menuTourEnded=!0}),this.ngZone.runOutsideAngular(()=>{window.addEventListener("keydown",this.disableKeyInput)}),this.tourService.stepShow$.subscribe(()=>{this.currentStepStartTime=Date.now(),this.saveCurrentStepInDB(),this.currentAnchorId=this.tourService.currentStep.anchorId}),this.tourService.end$.pipe((0,D.zg)(()=>(this.productTourStore.menuTourEnded=!0,window.removeEventListener("keydown",this.disableKeyInput),this.productTourStore.persist_()))).subscribe(()=>this.updateIsTourActive(),o=>{this.logger.error("Error saving data to the database",o),this.updateIsTourActive()}),this.applicationLifetimeService.addWorkOnShutdown(()=>new i.y(o=>{o.next(this.sendTourExitTelemetry(y.qb.AppExit)),o.complete()}))}deInitialize(){window.removeEventListener("keydown",this.disableKeyInput)}disableProductTour(){this.disableTour=!0}initializeTourService(o){this.disableTour?(this.logger.info("Product tour is disabled"),this.isTourShown.next(!1),this.isTourShown.complete()):(o.forEach((f,c)=>{f.stepId=c.toString(),f.popperSettings={},f.popperSettings.closeOnClickOutside=!1}),this.totalSteps=o.length,this.tourService.initialize(o),this.startTour())}endActiveTour(){this.isTourActive&&this.tourService.end()}startTour(){this.productTourStore.sync_().subscribe(()=>{var o,f;this.updateIsTourActive(),!0!==(null===(o=this.productTourStore)||void 0===o?void 0:o.menuTourEnded)?this.productTourStore.menuTourCurrentStep?(this.tourService.startAt(this.productTourStore.menuTourCurrentStep),this.isResumeTelemetry=!0,this.startStepTelemetry=this.productTourStore.menuTourCurrentStep):(this.tourService.startAt("0"),this.isResumeTelemetry=!1,this.startStepTelemetry="0"):window.removeEventListener("keydown",this.disableKeyInput),this.isTourShown.next(!(null===(f=this.productTourStore)||void 0===f?void 0:f.menuTourEnded)),this.isTourShown.complete(),this.tourStartTime=Date.now()})}sendProgressTelemetry(o){if(this.productTourConfig&&this.productTourConfig.enableTelemetry){const f=new r({name:y.b9,step:this.productTourStore.menuTourCurrentStep,action:o,totalMs:Date.now()-this.currentStepStartTime});this.telemetryService.push(f)}else this.logger.info("Product Tour telemetry is not enabled by app")}sendTourExitTelemetry(o){if(this.productTourConfig&&this.productTourConfig.enableTelemetry){const f=new a({name:y.b9,startStep:this.startStepTelemetry,exitStep:this.productTourStore.menuTourCurrentStep,isResume:this.isResumeTelemetry,status:o,totalMs:Date.now()-this.tourStartTime});!0===this.isTourActive&&this.telemetryService.push(f)}else this.logger.info("Product Tour telemetry is not enabled by app")}getCurrentRunningStep(){return this.tourService.currentStep.stepId}saveCurrentStepInDB(){this.productTourStore.menuTourCurrentStep=this.getCurrentRunningStep(),this.productTourConfig&&this.productTourConfig.enableAutoCloseOnLastStep&&Number(this.getCurrentRunningStep())===this.totalSteps-1&&(this.productTourStore.menuTourEnded=!0),this.productTourStore.persist_().subscribe()}updateIsTourActive(){this.isTourActive=!0!==this.productTourStore.menuTourEnded}}return h.\u0275fac=function(o){return new(o||h)(s.LFG(p.QL),s.LFG(l.LA),s.LFG(l.ed),s.LFG(T.y0),s.LFG(t.Ll),s.LFG(s.R0b),s.LFG(m.uR,8))},h.\u0275prov=s.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},25004:(He,de,e)=>{"use strict";e.d(de,{Us:()=>i,qb:()=>D,GM:()=>m,b9:()=>y});var n=e(43124),i=(()=>{return(T=i||(i={})).Next="NEXT",T.GotIt="GOT_IT",i;var T})(),D=(()=>{return(T=D||(D={})).Success="Success",T.AppExit="AppExit",D;var T})();const m={ProductTourProgress:{name:"ProductTourProgress",gdprLevel:n.KM.Functional},ProductTourExit:{name:"ProductTourExit",gdprLevel:n.KM.Functional}},y="ProductTour"},15643:(He,de,e)=>{"use strict";e.d(de,{uR:()=>p.uR,_F:()=>s,Q3:()=>n.Q,AP:()=>p.AP});var n=e(14304),i=e(71258),D=e(54364),m=e(70781),y=e(1180),T=e(58283),r=e(22573),a=e(2316);let s=(()=>{class l{}return l.\u0275fac=function(w){return new(w||l)},l.\u0275mod=a.oAB({type:l}),l.\u0275inj=a.cJS({imports:[[i.Bz,D.ez,m.ot,y.RH.forRoot(),T.aw.forChild(),r.hp]]}),l})();var p=e(58514)},52349:(He,de,e)=>{"use strict";e.d(de,{pJ:()=>v,tn:()=>f,mV:()=>T,m3:()=>r});var n=e(76491),i=e(79441),D=e(80226),m=e(2316),y=e(6484);let T=(()=>{class O{}return O.\u0275fac=function(_){return new(_||O)},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac}),O})(),r=(()=>{class O{constructor(_,F){this.config=F,this.enableListenerSubject=new n.X(!0),this.logger=_.getLogger("ProjectInterfaceService"),this.closeOSC$=new i.xQ,this.quitStreaming$=new i.xQ,this.sendCustomMessage$=new i.xQ,this.onCustomMessage$=new i.xQ,this.isNonEnglishKeyboardLayout$=new i.xQ,this.unsupportedDialogCloseSubject=new D.t(1),this.config.waitForDialogClose||this.closeUnsupportedDialog(),this._streamingBegin$=new i.xQ,this._streamingEnd$=new i.xQ,this._streamingSessionSetupSuccess$=new i.xQ}get streamingSessionSetupSuccess$(){return this._streamingSessionSetupSuccess$.asObservable()}get streamingBegin$(){return this._streamingBegin$.asObservable()}get streamingEnd$(){return this._streamingEnd$.asObservable()}notifyStreamingSessionSetupSuccess(_){this._streamingSessionSetupSuccess$.next(_)}notifyStreamingBegin(_){this._streamingBegin$.next(_)}notifyStreamingEnd(_){this._streamingEnd$.next(_)}get gfnUnsupportedDialogCloseState(){return this.unsupportedDialogCloseSubject.asObservable()}get triggerCloseIGO(){return this.closeOSC$.asObservable()}get triggerQuitStreaming(){return this.quitStreaming$.asObservable()}get enableListener(){return this.enableListenerSubject.asObservable()}get sendCustomMessage(){return this.sendCustomMessage$.asObservable()}get onCustomMessageReceived(){return this.onCustomMessage$.asObservable()}get isNonEnglishKeyboardLayout(){return this.isNonEnglishKeyboardLayout$.asObservable()}setNotificationAllowedCallBack(_){this.logger.verbose("Setting isNotificationAllowed Callback"),this.isNotificationAllowedCallBack=_}setShortcutCheckCallBacks(_){this.logger.verbose("Setting checkIfShortcutIsPresent Callback"),this.checkIfShortcutIsPresentCallback=_}setExitStreamerCallBack(_){this.logger.verbose("Setting exitStreamer Callback"),this.exitStreamerCallBack=_}resumeListening(){this.enableListenerSubject.next(!0)}pauseListening(){this.enableListenerSubject.next(!1)}quitStreaming(){this.quitStreaming$.next(!0)}closeIGO(){this.closeOSC$.next(!0)}closeUnsupportedDialog(){this.unsupportedDialogCloseSubject.next(!0)}postCustomMessage(_,F,V){const b={messageType:V||"customMessage",messageRecipient:F,data:_};this.logger.verbose("CustomMessage being sent:",b),this.sendCustomMessage$.next(b)}onCustomMessage(_){_.data=_.data.replace("\0",""),this.onCustomMessage$.next(_)}setIsNonEnglishKeyboardLayout(_){this.isNonEnglishKeyboardLayout$.next(_)}}return O.\u0275fac=function(_){return new(_||O)(m.LFG(y.ed),m.LFG(T))},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();var a=e(81134),s=e(61486),p=e(53466),l=e(33927),t=e(85816),w=e(98636),h=e(202),u=e(2984),o=e(12556),f=(()=>{return(O=f||(f={})).PermissionPending="PermissionPending",O.PermissionDenied="PermissionDenied",O.Muted="Muted",O.Unmuted="Unmuted",O.NoMicFound="NoMicFound",f;var O})(),c=(()=>{return(O=c||(c={})).PerformaceWarning="microphone.performanceWarning",O.PermissionBlocked="microphone.micBlockedWarning",O.PermissionBlockedMacOS="microphone.micBlockedWarningMacOS",O.PermissionBlockedWindows="microphone.micBlockedWarningWindows",c;var O})();const g="undefined",I={startState:g,requestedState:g,streamSessionId:g,subSessionId:g,resultState:g};var G=e(68456),x=e(58283),E=e(57390),P=e(43124);let v=(()=>{class O{constructor(_,F,V,b,B,U,A){this.snackbar=F,this.bridgeService=V,this.translateService=b,this.sharedStorageService=B,this.telemetryService=U,this.systemInfoService=A,this.isInitialized=!1,this.isInitializing=!0,this.shouldApplyPreference=!0,this.blockName="gfnMicState",this.currentMicState=new n.X(f.PermissionPending),this.micInfo=I,this.isMicToggled=!1,this.persistUserPreference=!0,this.logger=_.getLogger("MicrophoneService"),this.shouldPersistUserPreference().pipe((0,p.q)(1)).subscribe(S=>{this.persistUserPreference=this.shouldApplyPreference=S})}toggleMicrophone(){this.isMicToggled=!0,this.currentMicState$.pipe((0,p.q)(1)).subscribe(_=>{(0,h.set)(this.micInfo,"startState",_),_===f.Unmuted?(this.setMicrophoneState(!1),(0,h.set)(this.micInfo,"requestedState",f.Muted),this.logger.info(`Mic button pressed, current state: ${_}, requested state: Muted`)):(this.setMicrophoneState(!0),(0,h.set)(this.micInfo,"requestedState",f.Unmuted),this.logger.info(`Mic button pressed, current state: ${_}, requested state: Unmuted`))})}get currentMicState$(){return this.currentMicState.asObservable()}getMicrophoneEvent(){this.logger.info("Get microphone event called"),this.bridgeService.executeCommand(u.Gh.Gfn.Streaming.GetMicState).subscribe()}applyStoredUserPreference(_,F,V){return this.shouldApplyPreference&&((0,h.isEmpty)(F)&&V?(this.logger.info("No preference set, unmuting microphone"),this.isInitializing=!1,this.setMicrophoneState(!0)):(0,h.isEmpty)(F)||(this.logger.info("Not initialized, applying stored user preference:",F.preference),(_.uiMicState===f.Muted||_.uiMicState===f.Unmuted)&&(F.preference===f.Unmuted?(this.isInitializing=!1,this.setMicrophoneState(!0)):F.preference===f.Muted&&(this.isInitializing=!1,this.setMicrophoneState(!1)),_.uiMicState=F.preference)),this.shouldApplyPreference=!1),_}updateStateValue(_,F,V){return this.logger.info("Will update state value to:",_),this.currentMicState.next(_.uiMicState),!this.isInitialized&&this.isInitializing?(this.telemetryService.push(new o.qmX({uiMicState:_.uiMicState,internalMicState:_.internalMicState,streamSessionId:F||g,streamSubSessionId:V||g})),this.isInitialized=!0,this.isInitializing=!1,this.logger.info("Initialization complete"),(0,a.of)(_)):this.isInitialized||this.isInitializing?!this.isMicToggled||_.uiMicState!==f.Muted&&_.uiMicState!==f.Unmuted||!this.persistUserPreference?(0,a.of)(_):(this.logger.info("Updating user preference:",_.uiMicState),this.sharedStorageService.writeBlock(this.blockName,{preference:_.uiMicState}).pipe((0,l.U)(b=>_))):(this.logger.info("Initialization pending, next mic state will be used for initializing"),this.isInitializing=!0,(0,a.of)(_))}sendMicrophoneStateChangeTelemetry(_){this.isMicToggled&&(this.logger.info("Sending telemetry:",this.micInfo),(0,h.set)(this.micInfo,"resultState",_.uiMicState),this.isMicToggled=!1,this.telemetryService.push(new o.W9g(this.micInfo)))}setupMicrophoneCallback(_,F){this.logger.info("Microphone callback is set up"),this.callbackSubscription=(0,s.aj)([this.bridgeService.executeCommand(u.Gh.Gfn.Streaming.RegisterMicCallback),this.sharedStorageService.readBlock(this.blockName),this.bridgeService.executeCommand(u.Gh.Gfn.Streaming.ShouldDefaultEnableMic)]).pipe((0,l.U)(([V,b,B])=>this.applyStoredUserPreference(V,b,B)),(0,t.zg)(V=>this.updateStateValue(V,_,F)),(0,w.b)(V=>this.sendMicrophoneStateChangeTelemetry(V))).subscribe(V=>this.logger.info("Current mic state:",V))}setupCurrentMicState(){this.logger.info("Toast notifications are set up"),this.currentMicStateSubscription=(0,s.aj)([this.systemInfoService.getDeviceOSType().pipe((0,p.q)(1)),this.bridgeService.executeCommand(u.Gh.Gfn.Streaming.ShouldDefaultEnableMic),this.currentMicState$]).subscribe(([_,F,V])=>{V!==f.Unmuted||_!==y.wi.ChromeOS||F?V===f.PermissionDenied&&(y.ng.isBrowserPlatform()?this.showToastMessage(c.PermissionBlocked):y.ng.isCefPlatform()&&this.isMicToggled&&(_===y.wi.MacOS?this.showToastMessage(c.PermissionBlockedMacOS):_===y.wi.Windows&&this.showToastMessage(c.PermissionBlockedWindows))):this.showToastMessage(c.PerformaceWarning)})}start(_,F){this.logger.info("Started"),(0,h.set)(this.micInfo,"streamSessionId",_||g),(0,h.set)(this.micInfo,"subSessionId",F||g),this.setupMicrophoneCallback(_,F),this.setupCurrentMicState(),this.getMicrophoneEvent()}stop(){var _,F;this.logger.info("Stopped"),this.persistUserPreference&&(this.isInitialized=!1,this.isInitializing=!0,this.shouldApplyPreference=!0),null===(_=this.callbackSubscription)||void 0===_||_.unsubscribe(),null===(F=this.currentMicStateSubscription)||void 0===F||F.unsubscribe()}showToastMessage(_){this.logger.info("Showing toast notification"),this.translateService.get(_).subscribe(F=>{this.snackbar.open(F,"",{duration:7e3,horizontalPosition:"left",verticalPosition:"bottom",panelClass:"nv-hig"})})}setMicrophoneState(_){this.bridgeService.executeCommand(u.Gh.Gfn.Streaming.SetMicState,{enable:_}).subscribe()}shouldPersistUserPreference(){return this.systemInfoService.getSystemInfo().pipe((0,p.q)(1),(0,l.U)(_=>!((_.OSName===y.wi.IOS||_.OSName===y.wi.IPadOS)&&_.BrowserName===y.Aq.SAFARI)))}}return O.\u0275fac=function(_){return new(_||O)(m.LFG(y.ed),m.LFG(G.ux),m.LFG(y.dF),m.LFG(x.sK),m.LFG(E.OA),m.LFG(P.y0),m.LFG(y.Ob))},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},12481:(He,de,e)=>{"use strict";e.d(de,{g:()=>K});var n=e(2316),i=e(52825),D=e(68637),m=e(79441),y=e(76491),T=e(82516),r=e(8117),a=e(89919),s=e(61486),p=e(22663),l=e(33927),t=e(80639),w=e(9170),h=e(79902),u=e(53466),o=e(67202),f=e(98636),c=e(71435),g=e(85816),I=e(11882),G=e(202),x=e(69416),E=e(3076),P=e(6484),v=e(59277),O=e(65846),C=e(22213),_=e(63806),F=e(30582),V=e(54364),b=e(1707),B=e(20657);let U=(()=>{class Z{constructor(W,te){this.render=te,this._caretEnabled=!1,this.destroy$=new m.xQ,this.blinkingInterval=1e3,this.inputElement=W.nativeElement}get caretEnabled(){return this._caretEnabled}set caretEnabled(W){this._caretEnabled=(0,B.Ig)(W),this._caretEnabled?(this.initCaret(),setTimeout(()=>this.moveCaret())):this.stopCaret()}initCaret(){const W=getComputedStyle(this.inputElement);this.subTextElement=this.render.createElement("div"),this.render.setStyle(this.subTextElement,"visibility","hidden"),this.render.setStyle(this.subTextElement,"width","fit-content"),this.render.setStyle(this.subTextElement,"position","fixed"),this.inputElementParent=this.inputElement.parentElement,this.inputElementParent.appendChild(this.subTextElement);const te=W.getPropertyValue("font-size"),ie=W.getPropertyValue("padding-left"),Q=W.getPropertyValue("caret-color"),k=parseInt(ie,10),oe=parseInt(te,10)+k;this.caretElement=this.render.createElement("div"),this.render.setStyle(this.caretElement,"position","absolute"),this.render.setStyle(this.caretElement,"width","1px"),this.render.setStyle(this.caretElement,"height",`${oe}px`),this.render.setStyle(this.caretElement,"border-left",`1px solid ${Q}`),this.render.setStyle(this.caretElement,"opacity","0"),this.inputElementParent.appendChild(this.caretElement);const N=this.inputElement.getBoundingClientRect(),q=this.inputElementParent.getBoundingClientRect();this.caretOffset={x:N.left-q.left+k,y:(N.height-oe)/2},this.caretAnimation=this.caretElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.blinkingInterval,iterations:1/0,easing:"steps(2, end)"});const Me=this.inputElement.value.length;this.inputElement.setSelectionRange(Me,Me),(0,a.T)((0,T.R)(this.inputElement,"input"),(0,T.R)(window,"resize")).pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.moveCaret()})}moveCaret(){this.subTextElement&&(this.subTextElement.innerHTML=this.inputElement.value.substring(0,this.inputElement.selectionStart).replace(/\s/g,"\xa0"),this.animateCaret(this.subTextElement.clientWidth<this.inputElement.getBoundingClientRect().width),this.render.setStyle(this.caretElement,"transform",`translate(${this.subTextElement.clientWidth+this.caretOffset.x}px, ${this.caretOffset.y}px)`))}animateCaret(W){"running"===this.caretAnimation.playState!==W&&(W?this.caretAnimation.play():this.caretAnimation.cancel())}stopCaret(){var W;null===(W=this.caretAnimation)||void 0===W||W.cancel(),this.subTextElement&&(this.inputElementParent.removeChild(this.subTextElement),this.subTextElement=void 0),this.caretElement&&(this.inputElementParent.removeChild(this.caretElement),this.caretElement=void 0)}ngOnDestroy(){this.stopCaret(),this.destroy$.next(!0),this.destroy$.complete()}}return Z.\u0275fac=function(W){return new(W||Z)(n.Y36(n.SBq),n.Y36(n.Qsj))},Z.\u0275dir=n.lG2({type:Z,selectors:[["input","nvCaret",""]],inputs:{caretEnabled:["nvCaret","caretEnabled"]}}),Z})();var A=e(52529),S=e(70781),Y=e(1124),se=e(58283);const fe=["inputContainer"],$=["inputElement"],ae=["gamepadHintAnchor"];function me(Z,L){1&Z&&(n.TgZ(0,"mat-icon",11),n._uU(1," search "),n.qZA())}function ye(Z,L){if(1&Z){const W=n.EpF();n.TgZ(0,"button",12),n.NdJ("click",function(ie){return n.CHM(W),n.oxw().clearSearchInput(ie)}),n.TgZ(1,"mat-icon",13),n._uU(2,"close"),n.qZA(),n.qZA()}}function ue(Z,L){1&Z&&n._UZ(0,"mat-divider")}function X(Z,L){1&Z&&n._UZ(0,"div",14,15)}var j=(()=>{return(Z=j||(j={}))[Z.None=0]="None",Z[Z.FocusInputField=1]="FocusInputField",Z[Z.FocusInputFieldWithHint=2]="FocusInputFieldWithHint",Z[Z.FocusInputContainer=3]="FocusInputContainer",Z[Z.FocusFirstTile=4]="FocusFirstTile",j;var Z})();let K=(()=>{class Z{constructor(W,te,ie,Q,k,oe,N,q){this.searchService=te,this.indexService=ie,this.ngZone=Q,this.windowService=k,this.nvKeyboardService=oe,this.matDialogService=N,this.injector=q,this._activated=!1,this.searchDebounceTime=200,this.query="",this.searchResultUIState=I.Y2,this.searchResultState=I.Y2.None,this.currentCategory="",this.categorizedResult=null,this.recentSearchesCache=[],this.logger=W.getLogger("SearchComponent"),this.destroy$=new m.xQ,this.activatedChange=new n.vpe,this.searchInputInteraction=new n.vpe,this.searchInputFocusOut=new n.vpe,this.indexService.isConnectedToServer().pipe((0,p.R)(this.destroy$)).subscribe(Me=>{this.serverConnectivityStatus=Me,this.serverConnectivityStatus||this.updateSearchResultState(I.Y2.FailedToConnect)})}set activated(W){this._activated!==W&&(this._activated=W,this.activatedChange.emit(this.activated))}get activated(){return this._activated}get nvKeyboardOpened(){var W,te;return null!==(te=null===(W=this.nvKeyboardOpened$)||void 0===W?void 0:W.value)&&void 0!==te&&te}ngOnInit(){this.indexService.getSearchIndexAvailability().pipe((0,p.R)(this.destroy$)).subscribe(W=>{this.isSearchIndexAvailable=W,this.isSearchIndexAvailable?(this.updateSearchResultState(I.Y2.None),this.performSearch()):this.updateSearchResultState(I.Y2.IndexNotAvailable)}),this.indexService.getRecentSearches().pipe((0,p.R)(this.destroy$)).subscribe(W=>{this.recentSearchesCache=W}),this.indexService.onClickSearchInput.pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.clickSearchInput()}),this.indexService.onSearchTriggered.pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.performSearch()}),this.indexService.onSearchActiveStateChanged.pipe((0,p.R)(this.destroy$)).subscribe(W=>{this.activated!==W&&(this.activated=W,this.closeNvKeyboardAndOverlayHint())}),this.useNvKeyboard&&(this.gamepadService=this.injector.get(D.S),this.nvKeyboardOpened$=new y.X(!1),this.actionAfterDismissed$=new y.X(j.None),this.subscribeToActionState(),this.subscribeToKeyboardState()),this.indexService.onClearSearchQuery().pipe((0,p.R)(this.destroy$)).subscribe(W=>{this.query=""})}ngAfterViewInit(){this.inputField&&(0,T.R)(this.inputField.nativeElement,"input").pipe((0,l.U)(W=>W.target.value),(0,t.b)(this.searchDebounceTime),(0,p.R)(this.destroy$)).subscribe(W=>{this.query=W,""===this.query&&this.updateSearchResultState(I.Y2.EmptyQuery),this.searchInputInteraction.emit({currentQuery:this.query,interactionType:I.af.Input}),this.performSearch()}),this.ngZone.runOutsideAngular(()=>{this.windowService.getKeydownEvent().pipe((0,w.h)(W=>(W.metaKey||W.ctrlKey)&&("f"===W.key||"F"===W.key)),(0,p.R)(this.destroy$)).subscribe(()=>{var W,te;0===(null===(te=null===(W=this.matDialogService)||void 0===W?void 0:W.openDialogs)||void 0===te?void 0:te.length)&&this.clickSearchInput()}),(0,T.R)(document,"touchstart").pipe((0,p.R)(this.destroy$)).subscribe(W=>{W.target!==this.inputField.nativeElement&&this.activated&&this.isInputFocused&&this.inputField.nativeElement.blur()})}),this.indexService.wasSearchIndexingTriggered||this.indexService.isLazySearchIndexingEnabled().pipe((0,h.w)(W=>W?this.activatedChange.pipe((0,w.h)(te=>!0===te)):r.E),(0,u.q)(1)).subscribe(()=>{this.indexService.triggerBuildingSearchIndex()})}openNvKeyboard(){this.activated=!0,this.nvKeyboardRef=this.nvKeyboardService.open(),(0,a.T)(this.nvKeyboardRef.afterOpened().pipe((0,u.q)(1),(0,o.h)(!0)),this.nvKeyboardRef.afterDismissed().pipe((0,u.q)(1),(0,o.h)(!1))).pipe((0,f.b)(W=>this.nvKeyboardOpened$.next(W)),(0,h.w)(W=>W?this.nvKeyboardService.onInput$:r.E),(0,p.R)(this.destroy$),(0,c.x)(()=>{this.nvKeyboardOpened$.next(!1)})).subscribe(W=>{this.sendToInputField(W)})}subscribeToKeyboardState(){(0,s.aj)([this.nvKeyboardOpened$.asObservable(),this.actionAfterDismissed$.asObservable()]).pipe((0,g.zg)(([W,te])=>{var ie;const Q=W?i.AZ.SystemKeyboard:te===j.FocusInputFieldWithHint&&document.activeElement===(null===(ie=this.inputField)||void 0===ie?void 0:ie.nativeElement)?i.AZ.AppKeyboard:void 0;if(Q){const k=!!this.gamepadHintOverlay;if(k||(this.gamepadHintOverlay=this.nvKeyboardService.createHintOverlay(this.gamepadHintAnchor.nativeElement)),this.gamepadHintOverlay.updateHint(Q),!k)return this.overlayDestroy$=new m.xQ,this.gamepadService.onButtonPressed$(D.z.Y).pipe((0,p.R)(this.overlayDestroy$),(0,w.h)(oe=>!0===oe))}else this.disposeGamepadOverlay();return r.E}),(0,p.R)(this.destroy$)).subscribe(()=>{this.nvKeyboardOpened?(this.activateNvKeyboard(!1),this.actionAfterDismissed$.next(j.FocusInputFieldWithHint)):this.activateNvKeyboard(!0)})}subscribeToActionState(){this.nvKeyboardOpened$.pipe((0,h.w)(W=>W?r.E:this.actionAfterDismissed$),(0,p.R)(this.destroy$)).subscribe(W=>{var te;switch(W){case j.FocusInputField:case j.FocusInputFieldWithHint:this.inputField.nativeElement.focus();break;case j.FocusFirstTile:this.indexService.focusFirstTile();break;case j.FocusInputContainer:null===(te=this.inputContainer)||void 0===te||te.nativeElement.focus()}})}disposeGamepadOverlay(){this.actionAfterDismissed$.value!==j.None&&this.actionAfterDismissed$.next(j.None),this.overlayDestroy$&&(this.overlayDestroy$.next(!0),this.overlayDestroy$.complete()),this.gamepadHintOverlay&&(this.gamepadHintOverlay.dispose(),this.gamepadHintOverlay=void 0)}activateNvKeyboard(W){var te;W&&!this.nvKeyboardOpened?(null===(te=this.inputField)||void 0===te||te.nativeElement.blur(),this.openNvKeyboard()):!W&&this.nvKeyboardOpened&&this.nvKeyboardRef.dismiss()}sendToInputField(W){const te=this.inputField.nativeElement;if("keydown"===W.type){switch(W.key){case"Backspace":te.selectionStart===te.selectionEnd?te.selectionStart>0&&te.setRangeText("",te.selectionStart-1,te.selectionStart):te.setRangeText("",te.selectionStart,te.selectionEnd);break;case"ArrowLeft":te.selectionStart>0&&(te.selectionEnd=--te.selectionStart);break;case"ArrowRight":te.selectionStart<te.value.length&&(te.selectionEnd=++te.selectionStart);break;case"Space":this.inputCharacter(te,W);break;default:1===W.key.length&&this.inputCharacter(te,W)}te.dispatchEvent(new Event("input"))}else"Enter"===W.key?(this.activateNvKeyboard(!1),this.actionAfterDismissed$.next(j.FocusFirstTile)):"Escape"===W.key&&(this.activateNvKeyboard(!1),this.actionAfterDismissed$.next(j.FocusInputContainer))}inputCharacter(W,te){W.setRangeText("Space"===te.key?" ":te.getModifierState("CapsLock")?te.key.toUpperCase():te.key,W.selectionStart,W.selectionEnd,W.selectionStart===W.selectionEnd?"end":"select"),W.setSelectionRange(W.selectionEnd,W.selectionEnd)}onInputClick(W){this.searchInputInteraction.emit({currentQuery:this.query,interactionType:I.af.Click}),this.activated||(this.logger.trace(E.y$.UserGesture,E.Px.Search,E.Rf.open," search operation."),this.activated=!0),this.focusSearchInput()}clearSearchInput(W){this.logger.trace(E.y$.UserGesture,E.Px.Search,E.Rf.close),this.indexService.sendTextSearchTelemetry({searchType:x.Sc.AbandonedSearch,searchQuery:this.query},this.categorizedResult&&this.categorizedResult[this.currentCategory]||[]),this.query="",this.updateSearchResultState(I.Y2.EmptyQuery),this.categorizedResult=null,this.performSearch()}get isInputFocused(){var W;return document.activeElement===(null===(W=this.inputField)||void 0===W?void 0:W.nativeElement)}clickSearchInput(){var W;null===(W=this.inputField)||void 0===W||W.nativeElement.click()}focusSearchInput(){this.inputField&&!this.isInputFocused&&(this.inputField.nativeElement.focus(),this.logger.trace(E.y$.UserGesture,E.Px.Search,E.Rf.open," search operation."),this.inputField.nativeElement.setSelectionRange(0,this.query.length))}showRecentSearches(){this.categorizedResult=null,this.updateSearchResultState(I.Y2.None),this.recentSearchesCache.length>0&&this.updateSearchResultState(I.Y2.RecentSearches),this.notifySearchResultChanged({resultsLength:this.recentSearchesCache.length,categorizedResult:{recents:this.recentSearchesCache}})}performSearch(){this.indexService.savedSearchQuery&&(this.query=this.indexService.savedSearchQuery,this.indexService.savedSearchQuery=""),this.serverConnectivityStatus?this.isSearchIndexAvailable?0!==this.query.length&&(this.logger.trace(E.y$.UserGesture,"Searched for game with keyword "+this.query),this.categorizedResult={},this.searchService.performSearch(this.query).pipe((0,g.zg)(W=>this.indexService.processSearchedResultsCallback(W)),(0,p.R)(this.destroy$)).subscribe(W=>{var te;W.resultsLength>0?(this.categorizedResult=W.categorizedResult,this.categories=Object.keys(this.categorizedResult),this.currentCategory=(null===(te=this.categories)||void 0===te?void 0:te.length)>0?this.categories[0]:"",this.updateSearchResultState(I.Y2.ResultAvailable)):(this.categorizedResult=null,this.updateSearchResultState(I.Y2.ResultNotAvailable)),this.notifySearchResultChanged(W)},W=>{this.logger.error("Error in processing search Results"+W)})):this.updateSearchResultState(I.Y2.IndexNotAvailable):this.updateSearchResultState(I.Y2.FailedToConnect)}updateSearchResultState(W){this.searchResultState=W,this.indexService.notifySearchResultStateChanged(this.searchResultState)}notifySearchResultChanged(W){this.indexService.notifySearchResultChanged({processedSearchResult:W,query:this.query})}onContainerKeyDown(W){W.target===this.inputContainer.nativeElement&&("Enter"===W.key||" "===W.key)&&this.clickSearchInput()}onKeyboardEvent(W){var te,ie;"keydown"===W.type?"Escape"===W.key&&(W.stopPropagation(),W.preventDefault(),this.activated&&(this.activated=!1,this.useNvKeyboard?null===(te=this.actionAfterDismissed$)||void 0===te||te.next(j.FocusInputContainer):null===(ie=this.inputContainer)||void 0===ie||ie.nativeElement.focus())):"Enter"===W.key&&(this.useNvKeyboard?this.activateNvKeyboard(!0):this.indexService.focusFirstTile())}onMouseDown(){var W;this.useNvKeyboard&&(this.activateNvKeyboard(!1),null===(W=this.actionAfterDismissed$)||void 0===W||W.next(j.FocusInputField))}onInputBlur(W){(0,G.isNil)(W.relatedTarget)&&this.indexService.sendTextSearchTelemetry({searchType:x.Sc.PausedSearch,searchQuery:this.query},this.categorizedResult&&this.categorizedResult[this.currentCategory]||[]),this.searchInputFocusOut.emit({currentQuery:this.query})}closeNvKeyboardAndOverlayHint(){this.useNvKeyboard&&!this.activated&&(this.activateNvKeyboard(!1),this.disposeGamepadOverlay())}ngOnDestroy(){this.activated&&(this.activated=!1,this.closeNvKeyboardAndOverlayHint()),this.indexService.savedSearchQuery=this.query,this.destroy$.next(!0),this.destroy$.complete()}}return Z.\u0275fac=function(W){return new(W||Z)(n.Y36(P.ed),n.Y36(v.o),n.Y36(O.x),n.Y36(n.R0b),n.Y36(P.un),n.Y36(i.Ow),n.Y36(C.uw),n.Y36(n.zs3))},Z.\u0275cmp=n.Xpm({type:Z,selectors:[["nv-search"]],viewQuery:function(W,te){if(1&W&&(n.Gf(fe,5),n.Gf($,5),n.Gf(ae,5)),2&W){let ie;n.iGM(ie=n.CRH())&&(te.inputContainer=ie.first),n.iGM(ie=n.CRH())&&(te.inputField=ie.first),n.iGM(ie=n.CRH())&&(te.gamepadHintAnchor=ie.first)}},inputs:{smallWidthMode:"smallWidthMode",useNvKeyboard:"useNvKeyboard",activated:"activated"},outputs:{activatedChange:"activatedChange",searchInputInteraction:"searchInputInteraction",searchInputFocusOut:"searchInputFocusOut"},decls:12,vars:15,consts:[["ngClass.iphone","iphone",1,"search-container"],["fxLayout","column"],["fxLayout","row"],[1,"search-input-container",3,"tabindex","keydown","click"],["inputContainer",""],["class","material-icons search-icon",4,"ngIf"],["maxlength","80","type","text","autocomplete","off","spellcheck","false",1,"search-input",3,"ngModel","placeholder","tabindex","nvCaret","blur","keydown","keyup","mousedown"],["inputElement",""],["mat-icon-button","","class","clear-icon-button",3,"click",4,"ngIf"],[4,"ngIf"],["class","gamepad-hint-anchor",4,"ngIf"],[1,"material-icons","search-icon"],["mat-icon-button","",1,"clear-icon-button",3,"click"],[1,"material-icons"],[1,"gamepad-hint-anchor"],["gamepadHintAnchor",""]],template:function(W,te){1&W&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3,4),n.NdJ("keydown",function(Q){return te.onContainerKeyDown(Q)})("click",function(Q){return te.onInputClick(Q)}),n.YNc(5,me,2,0,"mat-icon",5),n.TgZ(6,"input",6,7),n.NdJ("blur",function(Q){return te.onInputBlur(Q)})("keydown",function(Q){return te.onKeyboardEvent(Q)})("keyup",function(Q){return te.onKeyboardEvent(Q)})("mousedown",function(){return te.onMouseDown()}),n.ALo(8,"translate"),n.qZA(),n.YNc(9,ye,3,0,"button",8),n.qZA(),n.qZA(),n.YNc(10,ue,1,0,"mat-divider",9),n.qZA(),n.qZA(),n.YNc(11,X,2,0,"div",10)),2&W&&(n.ekj("nv-keyboard",te.nvKeyboardOpened),n.xp6(3),n.Q6J("tabindex",te.activated?-1:0),n.xp6(2),n.Q6J("ngIf",!te.smallWidthMode),n.xp6(1),n.Tol(te.smallWidthMode?"font-body1":"font-body2"),n.s9C("placeholder",n.lcZ(8,13,"search.searchGames")),n.Q6J("ngModel",te.query)("tabindex",te.activated?0:-1)("nvCaret",te.nvKeyboardOpened&&!te.isInputFocused),n.xp6(3),n.Q6J("ngIf",te.query.length>0),n.xp6(1),n.Q6J("ngIf",te.smallWidthMode),n.xp6(1),n.Q6J("ngIf",te.useNvKeyboard))},directives:[_.r,F.xw,V.O5,b.Fj,U,b.nD,b.JJ,b.On,A.Hw,S.lW,Y.d],pipes:[se.X$],styles:[".search-container[_ngcontent-%COMP%]{position:relative;z-index:100;white-space:initial;min-width:320px}.isLtr[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]{margin-left:auto}html[dir=ltr][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{--dummy3: 0;margin-left:auto}.isRtl[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]{margin-right:auto}html[dir=rtl][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{--dummy3: 0;margin-right:auto}.isLtr[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]{margin-right:auto}html[dir=ltr][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{--dummy4: 0;margin-right:auto}.isRtl[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]{margin-left:auto}html[dir=rtl][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{--dummy4: 0;margin-left:auto}.search-container[_ngcontent-%COMP%]   .no-focus-outline[_ngcontent-%COMP%]:focus{outline:0;border:0}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{display:flex;position:relative;padding:0!important;background-color:#bcbcbc;border-radius:0;border-style:solid;border-color:#bcbcbc;border-width:0 0 2px;height:40px}.isLtr[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{margin-left:auto}html[dir=ltr][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{--dummy3: 0;margin-left:auto}.isRtl[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{margin-right:auto}html[dir=rtl][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{--dummy3: 0;margin-right:auto}.isLtr[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{margin-right:auto}html[dir=ltr][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{--dummy4: 0;margin-right:auto}.isRtl[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{margin-left:auto}html[dir=rtl][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{--dummy4: 0;margin-left:auto}mat-icon[_ngcontent-%COMP%]{color:#000c;font-size:18px}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{color:#000c;background-color:#bcbcbc;transition:opacity .2s ease-in-out;padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;display:flex;justify-content:center}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .active-search-icon[_ngcontent-%COMP%]{color:#000c}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{visibility:visible;opacity:1;width:100%;transition:width .2s ease-in-out;max-width:800px;min-width:320px}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{opacity:1}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-shadow:none;border-radius:0;border-style:solid;border-width:0;width:100%;background-color:#bcbcbc;padding-top:2px;padding-bottom:2px;margin:0;outline:none;color:#000c}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus{outline:none;border-color:#bcbcbc52}.search-container[_ngcontent-%COMP%]:not(.nv-keyboard)   .search-input-container[_ngcontent-%COMP%]:hover:not(:focus-within){outline:none;border-color:#bcbcbc8f}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:active{border-color:#bcbcbc66}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus, .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus   input[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus   .search-icon[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus   .clear-icon-button[_ngcontent-%COMP%]{background-color:#bcbcbc52}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:hover:not(:focus-within), .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:hover:not(:focus-within)   input[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:hover:not(:focus-within)   .search-icon[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:hover:not(:focus-within)   .clear-icon-button[_ngcontent-%COMP%]{background-color:#bcbcbc8f}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:active, .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:active   input[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:active   .search-icon[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:active   .clear-icon-button[_ngcontent-%COMP%]{background-color:#bcbcbc66}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:hover, .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus, .search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus-within{box-shadow:0 0 8px #0000004d}.search-container[_ngcontent-%COMP%]:not(.nv-keyboard)   .search-input-container[_ngcontent-%COMP%]:not(:focus):focus-within, .search-container.nv-keyboard[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{border-color:#76b900;background-clip:padding-box}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{caret-color:#000}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#00000061}.search-container[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .clear-icon-button[_ngcontent-%COMP%]{color:#000c;background-color:#bcbcbc}.search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%]{width:40px}.isLtr[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%]{padding-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%]{--dummy1: 0;padding-left:8px}.isRtl[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%]{padding-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%]{--dummy1: 0;padding-right:8px}.isLtr[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%]{padding-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%]{--dummy2: 0;padding-right:8px}.isRtl[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%]{padding-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input-toggle-button[_ngcontent-%COMP%]{--dummy2: 0;padding-left:8px}.selected-search-item[_ngcontent-%COMP%]{background-color:#282828cc!important}.search-container.iphone[_ngcontent-%COMP%]{min-width:0}.isLtr[_nghost-%COMP%]   .search-container.iphone[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .search-container.iphone[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .search-container.iphone[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .search-container.iphone[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{max-width:none;min-width:0;background-color:transparent;border-width:0}.search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:hover, .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus, .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus-within{box-shadow:none}.search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:hover:not(:focus-within), .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:hover:not(:focus-within)   input[_ngcontent-%COMP%], .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:hover:not(:focus-within)   .clear-icon-button[_ngcontent-%COMP%], .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus, .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus   input[_ngcontent-%COMP%], .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus   .clear-icon-button[_ngcontent-%COMP%]{background-color:transparent}.search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{caret-color:#ffffffb3}.isLtr[_nghost-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#ffffffb3}.search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;color:#ffffff4d;background-color:transparent}.search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#ffffffe6}.search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   input.search-input[_ngcontent-%COMP%]::placeholder{color:#ffffff4d}.search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .clear-icon-button[_ngcontent-%COMP%]{background-color:transparent}.search-container.iphone[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .clear-icon-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3}.search-container.iphone[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{border-top-width:2px;border-top-color:#76b900}.gamepad-hint-anchor[_ngcontent-%COMP%]{position:absolute;left:0;right:0;height:0;width:100vw}"]}),Z})()},69416:(He,de,e)=>{"use strict";e.d(de,{Sc:()=>m,Hs:()=>T,kS:()=>r});var n=e(43124);const i={Click:{name:"Click",gdprLevel:n.KM.Technical},TextSearch:{name:"TextSearch",gdprLevel:n.KM.Behavioral}};var m=(()=>{return(a=m||(m={})).RecentSearchResult="RecentSearchResult",a.NewSearchResult="NewSearchResult",a.AbandonedSearch="AbandonedSearch",a.PausedSearch="PausedSearch",m;var a})();class T extends n.MW{constructor(s){super(s),this.name=i.TextSearch.name,this.gdprLevel=i.TextSearch.gdprLevel}}const r=1e3},11882:(He,de,e)=>{"use strict";e.d(de,{Y2:()=>n,af:()=>i,x4:()=>D,Bi:()=>s});var n=(()=>{return(h=n||(n={}))[h.None=0]="None",h[h.RecentSearches=1]="RecentSearches",h[h.ResultAvailable=2]="ResultAvailable",h[h.ResultNotAvailable=3]="ResultNotAvailable",h[h.FailedToConnect=4]="FailedToConnect",h[h.IndexNotAvailable=5]="IndexNotAvailable",h[h.EmptyQuery=6]="EmptyQuery",n;var h})(),i=(()=>{return(h=i||(i={}))[h.Click=0]="Click",h[h.Input=1]="Input",i;var h})(),D=(()=>((D||(D={})).RecentSearchesStore="recentSearchesStore",D))();const s="all_locales";!function(h){for(const u of Object.keys(h)){const o=u.split(/\|/g),f=h[u];delete h[u],o.forEach(c=>{h[c]=f})}}({"en_US|en_GB|da_DK|de_DE|es_ES|es_MX|fi_FI|fr_FR|hu_HU|it_IT|nb_NO|nl_NL|pl_PL|pt_BR|pt_PT|sk_SK|sl_SI|sv_SE|tr_TR|ro_RO|cs_CZ|hr_HR":"Latin","ru_RU|bg_BG|uk_UA":"Cyrillic",th_TH:"Thai",el_GR:"Greek",ko_KR:"Hangul","zh_CHT|zh_CHS|zh_CN|zh_TW":"Chinese",ja_JP:"Japanese",[s]:"AllSupportedLocales"})},65846:(He,de,e)=>{"use strict";e.d(de,{x:()=>G});var n=e(6484),i=e(11882),D=e(69416),m=e(80226),y=e(79441),T=e(61486),r=e(81134),a=e(130),s=e(58640),p=e(202),t=e(79902),w=e(98636),h=e(18293),u=e(67202),o=e(85816),f=e(53466),c=e(2316),g=e(59277),I=e(43124);let G=(()=>{class x{constructor(P,v,O,C){this.searchService=v,this.dbCacheService=O,this.telemetryService=C,this.searchIndexAvailableSubject=new m.t(1),this.serverConnectivityStatusSubject=new m.t(1),this.lazySearchIndexingEnabledSubject=new m.t(1),this.maxRecentSearchesCount=5,this.recentSearchesSubject=new m.t(1),this.recentSearches=null,this.recentSearchesStore=null,this.searchResultChangedSubject=new m.t(1),this.searchResultStateChangedSubject=new m.t(1),this.strSearch="SEARCH",this.strRecent="RECENT",this.strNew="NEW",this.clearSearchSub=new y.xQ,this.logger=P.getLogger("IndexService"),this.clickSearchInput$=new y.xQ,this.triggerSearch$=new y.xQ,this.triggerRecentSearchUpdate$=new y.xQ,this.searchActiveState$=new y.xQ,this.triggerBuildSearchIndex$=new y.xQ,this.focusFirstTile$=new y.xQ,this._savedSearchQuery="",this._wasSearchIndexingTriggered=!1}get onClickSearchInput(){return this.clickSearchInput$.asObservable()}get onSearchTriggered(){return this.triggerSearch$.asObservable()}get savedSearchQuery(){return this._savedSearchQuery}set savedSearchQuery(P){this._savedSearchQuery=P}get localSearchResultState(){return this.searchResultState}get onSearchActiveStateChanged(){return this.searchActiveState$.asObservable()}get wasSearchIndexingTriggered(){return this._wasSearchIndexingTriggered}get onFocusFirstTile$(){return this.focusFirstTile$.asObservable()}getSearchHierarchy(){return`${this.strSearch}/${this.localSearchResultState===i.Y2.RecentSearches?this.strRecent:this.strNew}`}isSearchHierarchy(P){return(null==P?void 0:P.startsWith(this.strSearch))||!1}init(P,v,O){return this.searchIndexAvailableSubject.next(!1),this.serverConnectivityStatusSubject.next(!0),this.lazySearchIndexingEnabledSubject.next(O),this.lazySearchIndexingEnabledSubject.complete(),this.searchService.initialize(P,v)}triggerSearch(){this.triggerSearch$.next(!0)}triggerRecentSearchesUpdateIfSearching(P){this.triggerRecentSearchUpdate$.next(P)}focusFirstTile(){this.focusFirstTile$.next()}updateSearchActiveState(P){this.searchActiveState$.next(P)}get onRecentSearchesUpdateTriggered(){return this.triggerRecentSearchUpdate$.asObservable()}setSearchConfig(P){return this.searchService.setSearchConfig(P)}buildStateIndex(P,v,O){return this.searchService.buildStateIndex(P,v,O)}setCallbacks(P,v){this.processSearchedResultsCallback=P,this.processRecentResultsCallback=v}setSearchIndexAvailable(P){this.searchIndexAvailableSubject.next(P)}getSearchIndexAvailability(){return this.searchIndexAvailableSubject.asObservable()}setServerConnectivityStatus(P){this.serverConnectivityStatusSubject.next(P)}isConnectedToServer(){return this.serverConnectivityStatusSubject.asObservable()}isLazySearchIndexingEnabled(){return this.lazySearchIndexingEnabledSubject.asObservable()}isDBUpgradeRequired(P){return!!(P.length>0&&(0,p.isNil)(P[0].telemetryTitle))}loadRecentSearchesCacheFromDB(P){return this.recentSearchesStore=this.dbCacheService.getOrCreateCachedGlobalItem(i.x4.RecentSearchesStore,P),this.recentSearchesStore.sync_().pipe((0,t.w)(()=>{const v=this.recentSearchesStore.recentSearches||[],O=this.isDBUpgradeRequired(v);return(0,T.aj)([this.processRecentResultsCallback(v),(0,r.of)(O)])}),(0,w.b)(([v,O])=>{this.recentSearches=v,this.recentSearchesSubject.next(this.recentSearches)}),(0,t.w)(([v,O])=>O&&this.recentSearchesStore.status_===n.c1.Saved?(this.recentSearchesStore.recentSearches=v,this.recentSearchesStore.persist_()):(0,r.of)(!0)),(0,h.K)(v=>(this.logger.error("Error in getting recent searches"+v),this.resetRecentSearches(),(0,r.of)(!1))),(0,u.h)(!0))}getRecentSearches(){return this.recentSearchesSubject.asObservable()}onSearchResultChanged(){return this.searchResultChangedSubject.asObservable()}notifySearchResultChanged(P){this.searchResultChangedSubject.next(P)}onSearchResultStateChanged(){return this.searchResultStateChangedSubject.asObservable()}notifySearchResultStateChanged(P){this.searchResultState=P,this.searchResultStateChangedSubject.next(P)}onTriggerBuildingSearchIndex(){return this.triggerBuildSearchIndex$.asObservable()}triggerBuildingSearchIndex(){return this._wasSearchIndexingTriggered=!0,this.triggerBuildSearchIndex$.next(!0)}resetRecentSearches(){this.recentSearchesSubject.next([]),this.recentSearches=null}loadCurrentUserRecentSearches(P){return P?this.loadRecentSearchesCacheFromDB(P).pipe((0,o.zg)(v=>(0,a.s)(()=>!!this.pendingRecentSearchUpdate$,(0,s.P)(()=>this.pendingRecentSearchUpdate$.pipe((0,u.h)(v))),(0,r.of)(v)))):(0,r.of)(!1)}updateCurrentUserRecentSearches(P){if(!this.recentSearches)return void(this.pendingRecentSearchUpdate$=(0,s.P)(()=>this.updateCurrentUserRecentSearches(P)));this.pendingRecentSearchUpdate$=void 0;let v=[];P.isRecentSearch=!0,v=(0,p.filter)(this.recentSearches,function(O){return O.ref!==P.ref}),v.unshift(P),v.length>this.maxRecentSearchesCount&&v.pop(),this.recentSearches=v,this.recentSearchesSubject.next(this.recentSearches),this.recentSearchesStore&&this.recentSearchesStore.status_===n.c1.Saved&&(this.recentSearchesStore.recentSearches=v,this.recentSearchesStore.persist_().subscribe())}onUserLoggedOut(){this.recentSearchesSubject.pipe((0,f.q)(1)).subscribe(()=>{setTimeout(()=>this.triggerSearch())}),this.resetRecentSearches()}onUserLoggedIn(P){return this.loadCurrentUserRecentSearches(P)}clickSearchInput(P){this.clickSearchInput$.next(P)}sendTextSearchTelemetry(P,v){this.initializeTextSearchInfo(P),this.updateTextSearchInfoTopResults(v),this.telemetryService.push(new D.Hs(this.textSearchInfo))}updateRecentSearchesAndSendTelemetry(P,v,O){const C={searchType:P.isRecentSearch?D.Sc.RecentSearchResult:D.Sc.NewSearchResult,searchQuery:O,selectedResult:P.telemetryTitle,selectedPreview:"",selectedRank:P.indexInCategory};this.updateCurrentUserRecentSearches(P),this.sendTextSearchTelemetry(C,v)}initializeTextSearchInfo(P){this.textSearchInfo={searchType:"",searchQuery:"",selectedResult:"",selectedPreview:"",selectedRank:0,aggregatedPreviews:"",rank0Result:"",rank1Result:"",rank2Result:"",rank3Result:"",rank4Result:""},this.textSearchInfo=(0,p.merge)(this.textSearchInfo,P)}updateTextSearchInfoTopResults(P){let v=[];(0,p.each)((0,p.range)(0,5),O=>{P[O]&&(this.textSearchInfo["rank"+O+"Result"]=P[O].telemetryTitle,v.push.apply(v,(0,p.keys)(P[O].preview)))}),v=(0,p.uniq)(v),this.textSearchInfo.aggregatedPreviews=this.formatAggregatedPreviews(v)}formatAggregatedPreviews(P){let v="";for(const O of P){const C=O+", "+v;if(!(C.length<D.kS))break;v=C}return v.slice(0,-2)}clearSearchQuery(){this.clearSearchSub.next()}onClearSearchQuery(){return this.clearSearchSub.asObservable()}}return x.\u0275fac=function(P){return new(P||x)(c.LFG(n.ed),c.LFG(g.o),c.LFG(n.LA),c.LFG(I.y0))},x.\u0275prov=c.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()},59277:(He,de,e)=>{"use strict";e.d(de,{o:()=>T});var n=e(34361),i=e(85816),D=e(67202),m=e(2316),y=e(6484);let T=(()=>{class r{constructor(s){this.workerLoggingService=s}initialize(s,p){const l=this.workerLoggingService.getLoggerSettings();return this.searchHelper=p,this.initialize$=(0,n.D)(this.searchHelper.initialize(s,l)),this.initialize$}setSearchConfig(s){return this.initialize$.pipe((0,i.zg)(()=>this.searchHelper.setSearchConfig(s)),(0,D.h)(!0))}applyPipeline(s){return this.initialize$.pipe((0,i.zg)(()=>this.searchHelper.applyPipeline(s)))}buildStateIndex(s,p,l){return this.initialize$.pipe((0,i.zg)(()=>this.searchHelper.buildStateIndex(s,p,l)))}performSearch(s){return this.initialize$.pipe((0,i.zg)(()=>this.searchHelper.performSearch(s)))}getGfnSearchDocList(s){return this.initialize$.pipe((0,i.zg)(()=>this.searchHelper.getGfnSearchDocList(s)))}}return r.\u0275fac=function(s){return new(s||r)(m.LFG(y.Yq))},r.\u0275prov=m.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},77436:(He,de,e)=>{"use strict";e.d(de,{Bi:()=>n.Bi,xB:()=>D.x,af:()=>n.af,t8:()=>I,Y2:()=>n.Y2,oD:()=>i.o});var n=e(11882),i=e(59277),D=e(65846),y=(e(12481),e(1707)),T=e(54364),r=e(66660),a=e(42118),s=e(80181),p=e(52529),l=e(55519),t=e(70781),w=e(28417),h=e(50298),u=e(2316);const o=[y.u5,t.ot,a.QW,w.ie,s.Cq,p.Ps,l.c,h.AV];let f=(()=>{class G{}return G.\u0275fac=function(E){return new(E||G)},G.\u0275mod=u.oAB({type:G}),G.\u0275inj=u.cJS({imports:[[y.u5,...o],y.u5,t.ot,a.QW,w.ie,s.Cq,p.Ps,l.c,h.AV]}),G})();var c=e(6484),g=e(52825);let I=(()=>{class G{}return G.\u0275fac=function(E){return new(E||G)},G.\u0275mod=u.oAB({type:G}),G.\u0275inj=u.cJS({imports:[[y.u5,T.ez,r.o9,f,(0,c.zv)(),c.it,g.Gp]]}),G})()},33987:(He,de,e)=>{"use strict";e.d(de,{Fk:()=>f,No:()=>A,nz:()=>I,HR:()=>v,rL:()=>c});var n=e(79441),i=e(89919),D=e(81134),m=e(34361),y=e(92597),T=e(79902),r=e(67202),a=e(53466),s=e(33927),p=e(85816),l=e(9170),t=e(18293);e(72445);var u=(()=>{return(S=u||(u={})).Gfn="geforcenow",S.Nvapp="nvidiaapplication",u;var S})(),o=(()=>{return(S=o||(o={})).FetchSuccess="SW_FETCH_SUCCESS",S.RuntimeCacheUpdated="SW_RUNTIME_CACHE_UPDATED",o;var S})(),f=(()=>{return(S=f||(f={})).ETag="etag",S.SwCacheBypass="x-sw-cachebypass",S.XRequestId="x-request-id",S.SwCacheKeyAppendString="sw-cache-key-append-string",f;var S})(),c=(()=>{return(S=c||(c={})).SkipWaiting="SKIP_WAITING",S.GameLaunched="GAME_LAUNCHED",S.GameExit="GAME_EXIT",S.CloseStreamerSession="CLOSE_STREAM_SESSION",S.PushNotification="BROWSER_PUSH_NOTIFICATION",S.IpcPushNotification="IPC_PUSH_NOTIFICATION",S.PushNotificationTelemetry="PUSH_NOTIFICATION_TELEMETRY",S.UiPushNotification="BROWSER_VISIBLE_PUSH_NOTIFICATION",S.PushNotificationTracing="PUSH_NOTIFICATION_TRACING",S.SharedStorageUpdate="SHARED_STORAGE_UPDATE",S.LoggerNotification="LOGGER_NOTIFICATION",S.GetClientVersion="GET_CLIENT_VERSION",S.SetLoggerSettings="SET_LOGGING_SETTINGS",S.GetClientVersionWaitingSW="GET_CLIENT_VERSION_FROM_WAITING_SW",c;var S})(),g=(()=>{return(S=g||(g={})).INSTALLING="installing",S.INSTALLED="installed",S.ACTIVATING="activating",S.ACTIVATED="activated",S.REDUNDANT="redundant",g;var S})(),I=(()=>{return(S=I||(I={})).PushNotificationReceived="PushNotificationReceived",S.PushNotificationError="PushNotificationError",I;var S})(),E=e(2316),P=e(6484);let v=(()=>{class S{constructor(se){this.swSharedStorageUpdate=new n.xQ,this.swLoggingUpdate=new n.xQ,this.swActivationRequested$=new n.xQ,this.swClientVersion=new n.xQ,this.logger=se.getLogger("libraries/service-worker.service"),this.swCacheUpdate$=new n.xQ,this.networkFetchSucceeded$=new n.xQ,this.swActivated$=new n.xQ,this.swUpdateReady$=new n.xQ,this.resetSwUpdateCache$=new n.xQ,this.swNotifyListener$=new n.xQ,this.swPushNotificationListener$=new n.xQ,this.swPushNotificationTelemetryListener$=new n.xQ,this.swPushNotificationTracing=new n.xQ,this.swUpdateReadyCached$=(0,i.T)(this.swUpdateReady$.asObservable(),this.resetSwUpdateCache$).pipe((0,y.d)(1))}get swCacheUpdated(){return this.swCacheUpdate$.asObservable()}get networkResponseReceived(){return this.networkFetchSucceeded$.asObservable()}get swUpdateReady(){return this.swUpdateReady$.asObservable()}get swUpdateReadyCached(){return this.swUpdateReadyCached$}get swActivated(){return this.swActivated$.asObservable()}get swNotifyListener(){return this.swNotifyListener$.asObservable()}get swPushNotificationListener(){return this.swPushNotificationListener$.asObservable()}get swPushNotificationTelemetryListener(){return this.swPushNotificationTelemetryListener$.asObservable()}get swPushNotificationTracingListener(){return this.swPushNotificationTracing.asObservable()}get swSharedStorageUpdate$(){return this.swSharedStorageUpdate.asObservable()}get swLoggingUpdate$(){return this.swLoggingUpdate.asObservable()}get swAssociatedClientVersion(){return this.swClientVersion.asObservable()}initialize(){this.serviceWorkerSupported()?(this.swHandleMessages(),this.swHandleControllerChanges(),this.swHandleUpdates()):this.logger.info("Service worker not supported")}willGFNServiceWorkerHandleRequest(se,fe){if(fe&&fe===JSON.stringify(!0))return!1;for(const $ in A.staleWhileRevalidate)if(A.staleWhileRevalidate.hasOwnProperty($)&&A.staleWhileRevalidate[$].routePattern.test(se))return!0;return!1}serviceWorkerSupported(){return"serviceWorker"in navigator}clearSwUpdateCache(){this.logger.info("SW Update Cache: Cleared"),this.resetSwUpdateCache$.next(null)}checkForUpdates(){return this.serviceWorkerSupported()?navigator.serviceWorker.getRegistration().then(se=>se?this.swHasUpdate(se)?se:se.update():Promise.reject("Registration does not exist")).then(se=>({updateAvailable:this.swHasUpdate(se),error:null})).catch(se=>(this.logger.error("SW Update Check: Error",se.toString()),Promise.resolve({updateAvailable:!1,error:se}))):Promise.reject("SW Update Check: Browser does not support service workers")}activateServiceWorker(){return this.serviceWorkerSupported()?(0,m.D)(navigator.serviceWorker.getRegistration()).pipe((0,T.w)(se=>se?this.swHasUpdate(se)?se.installing?(this.logger.info("SW Activate: Waiting for new service worker to be installed"),this.swUpdateReady.pipe((0,r.h)(se),(0,a.q)(1))):(0,D.of)(se):(this.logger.info("SW Activate: Nothing to activate"),(0,D.of)(null)):(this.logger.info("SW Activate: No service worker registration"),(0,D.of)(null))),(0,s.U)(se=>(null==se?void 0:se.waiting)?(this.logger.info("SW Activate: Requested to activate."),se.waiting.postMessage({type:c.SkipWaiting}),this.swActivationRequested$.next(),!0):(this.logger.info("SW Activate: No service worker waiting."),!1)),(0,a.q)(1)):(this.logger.info("SW Activate: Browser does not support service workers"),(0,D.of)(!1))}get swActivationRequested(){return this.swActivationRequested$.asObservable()}postMessageSw(se){this.serviceWorkerSupported()?navigator.serviceWorker.ready.then(fe=>{var $;se.type===c.SharedStorageUpdate?this.logger.verbose("Calling SW postMessage with: ",se):this.logger.info("Calling SW postMessage with: ",se),null===($=fe.active)||void 0===$||$.postMessage({type:se.type,content:se.content})}):this.logger.info("SW PostMsg: Browser does not support service workers")}swHasUpdate(se){return!(!se.installing&&!se.waiting)}swHandleMessages(){navigator.serviceWorker.addEventListener("message",se=>{if(se.data.type===o.RuntimeCacheUpdated){const{cacheName:fe,requestUrl:$}=se.data.payload;(0,m.D)(caches.open(fe)).pipe((0,p.zg)(ae=>ae.match($)),(0,l.h)(ae=>!!ae),(0,p.zg)(ae=>ae.json()),(0,t.K)(ae=>(this.logger.info("error while checking for cache update",ae.toString()),(0,D.of)(null)))).subscribe(ae=>{ae&&(this.logger.info("SW cache updated",fe),this.swCacheUpdate$.next({name:fe,url:$,data:ae}))})}else(null==se?void 0:se.data.type)===c.CloseStreamerSession?(this.logger.info("Msg received from another tab: ",se.data.type),this.swNotifyListener$.next(se.data)):(null==se?void 0:se.data.type)===c.PushNotification?(this.logger.info("Firebase Token received from Service Worker: ",se.data.type),this.swPushNotificationListener$.next(se.data)):(null==se?void 0:se.data.type)===c.PushNotificationTelemetry?(this.logger.info("Telemetry Event received from Service Worker: ",se.data.type),this.swPushNotificationTelemetryListener$.next(se.data)):(null==se?void 0:se.data.type)===c.PushNotificationTracing?(this.logger.info("Telemetry Event received from Service Worker: ",se.data.type),this.swPushNotificationTracing.next(se.data)):(null==se?void 0:se.data.type)===c.SharedStorageUpdate?this.swSharedStorageUpdate.next(se.data):(null==se?void 0:se.data.type)===o.FetchSuccess?this.networkFetchSucceeded$.next(se.data.payload):(null==se?void 0:se.data.type)===c.LoggerNotification?this.swLoggingUpdate.next(se.data):(null==se?void 0:se.data.type)===c.GetClientVersion&&(this.swClientVersion.next(se.data.content),this.logger.info("Received client version is ",se.data))})}swHandleUpdates(){return this.serviceWorkerSupported()?(this.logger.info("SW Updates: Init"),navigator.serviceWorker.getRegistration().then(se=>{if(!se)return Promise.reject("SW Updates: Registration does not exist");let fe=this.swIsActive();this.logger.info(`SW Updates: Registration Exists, First Installation: ${!fe}`),this.swOnUpdateInstalled(se,$=>{this.logger.info("SW Updates: Update installed"),this.logger.info("SW Updates: Notifying"),$.firstInstallation=!fe,this.swUpdateReady$.next($),fe=!0})}).catch(se=>this.logger.error("SW Updates: Error",se.toString()))):Promise.reject("SW Updates: Browser does not support service workers")}swOnUpdateInstalled(se,fe){const $=me=>{me.state===g.INSTALLED&&fe({state:me.state,ts:Date.now()})},ae=me=>{!me||(this.logger.info("SW Update Listener: Update found"),$(me),me.addEventListener("statechange",()=>{this.logger.info("SW Update Listener: New worker state change:",me.state),$(me)}))};se?(se.waiting?(this.logger.info("SW Update Listener: An update is ready"),fe({state:g.INSTALLED,ts:Date.now()})):se.installing&&ae(se.installing),se.onupdatefound||(this.logger.info("SW Update Listener: Waiting for any updates to current worker"),se.addEventListener("updatefound",()=>ae(se.installing)))):this.logger.info("SW Update Listener: No service worker registration")}swIsActive(){var se;return!!(null===(se=navigator.serviceWorker)||void 0===se?void 0:se.controller)}swHandleControllerChanges(){if(!this.serviceWorkerSupported()||navigator.serviceWorker.oncontrollerchange)return;this.logger.info("SW Ctrl Change: Init");let se=this.swIsActive();this.logger.info("SW Ctrl Change: has active service worker -",se),navigator.serviceWorker.addEventListener("controllerchange",()=>{if(this.logger.info("SW Ctrl Change: New service worker activated"),this.swActivated$.next({firstInstallation:!se,ts:Date.now()}),!se)return this.logger.info("SW Ctrl Change: First activation"),void(se=!0)})}}return S.\u0275fac=function(se){return new(se||S)(E.LFG(P.ed))},S.\u0275prov=E.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const O=u.Gfn,C=1440,_=60*C;var V=(()=>{return(S=V||(V={})).LCARS="lcars",S.LCARSStatic="lcarsStatic",S.Apps="apps",S.ServiceUrls="service",S.ServerInfo="server",S.RConfig="rconfig",S.GxTarget="gxtarget",S.Subscriptions="subscriptions",S.Telemetry="telemetry",S.Offline="offline",S.GfcFeedbacks="gfcFeedbacks",V;var S})();const A={staleWhileRevalidate:{lcars:{name:V.LCARS,cacheName:`${O}-${V.LCARS}-v1`,routePattern:/https:\/\/([a-zA-Z0-9_.-])+\/graphql\?requestType=panels/,expiry:{maxEntries:10,maxAgeSeconds:14*_,purgeOnQuotaError:!0}},lcarsStatic:{name:V.LCARSStatic,cacheName:`${O}-${V.LCARSStatic}-v1`,routePattern:/https:\/\/([a-zA-Z0-9_.-])+\/graphql\?requestType=staticAppData/,expiry:{maxEntries:5,maxAgeSeconds:14*_,purgeOnQuotaError:!0}},serviceUrls:{name:V.ServiceUrls,cacheName:`${O}-${V.ServiceUrls}-v1`,routePattern:/https:\/\/([a-zA-Z0-9_.-])+(\/v1\/serviceUrls)/,expiry:{maxEntries:10,maxAgeSeconds:14*_,purgeOnQuotaError:!0}},server:{name:V.ServerInfo,cacheName:`${O}-${V.ServerInfo}-v1`,routePattern:/https:\/\/([a-zA-Z0-9_.-])+(\/v2\/serverInfo)/,expiry:{maxEntries:10,maxAgeSeconds:14*_,purgeOnQuotaError:!0}},subscriptions:{name:V.Subscriptions,cacheName:`${O}-${V.Subscriptions}-v1`,routePattern:/https:\/\/([a-zA-Z0-9_.-])+(\/v3\/subscriptions)/,expiry:{maxEntries:20,maxAgeSeconds:7*_,purgeOnQuotaError:!0}},apps:{name:V.Apps,cacheName:`${O}-${V.Apps}-v1`,routePattern:/https:\/\/([a-zA-Z0-9_.-])+\/graphql\?requestType=apps/,expiry:{maxEntries:20,maxAgeSeconds:14*_,purgeOnQuotaError:!0}}},networkFirst:{},networkOnly:{telemetry:{name:V.Telemetry,cacheName:`${O}-${V.Telemetry}-v1`,routePattern:/https:\/\/events\.gfe(stage)?\.nvidia\.com\/v1\.0\/events\/json\?immediateRequest=true/,maxRetentionTime:C},gfcFeedbacks:{name:V.GfcFeedbacks,cacheName:`${O}-${V.GfcFeedbacks}-v1`,routePattern:/https:\/\/telemetry\.gfe(stage)?\.nvidia\.com\/gfc\/v4\.0\//,maxRetentionTime:C}}}},57390:(He,de,e)=>{"use strict";e.d(de,{TC:()=>u,OA:()=>h});var n=e(202),i=e(80226),D=e(45871),m=e(81134),y=e(33927),T=e(18293),r=e(53466),a=e(85816),s=e(98636),p=e(67202),l=e(6484),t=e(2984),w=e(2316);let h=(()=>{class f{constructor(g,I,G){this.bridgeService=g,this.nativeEventService=G,this.logger=I.getLogger("libraries/shared-storage"),this.cachedSharedStorage$=new i.t(1),this.isInitialized=!1}initialize(){this.logger.info("init"),this.bridgeService.executeCommand(t.Gh.Common.Sharedstorage.Cache).subscribe(g=>{this.logger.info("cached shared storage"),this.cachedSharedStorage$.next(g)},g=>{this.logger.error("error caching shared storage",g)}),this.nativeEventService.get$(l.Nx.SharedStorageUpdate,l.bi.Types.HandlerEventType.StructuredWindowEvent).pipe((0,y.U)(g=>JSON.parse(g)),(0,T.K)(g=>(this.logger.error("error receiving native event",g),this.cachedSharedStorage$.pipe((0,r.q)(1))))).subscribe(g=>{this.logger.info("shared storage cache updated"),this.cachedSharedStorage$.next(g)}),this.isInitialized=!0}readBlock(g){return this.isInitialized||this.initialize(),this.cachedSharedStorage$.pipe((0,r.q)(1),(0,a.zg)(I=>{const G=(0,n.get)(I,g.split("/"));return G?(0,m.of)(G):(0,D._)({code:204})}),(0,T.K)(I=>(this.logReadError(g,I),(0,m.of)({}))))}logReadError(g,I){switch(I.code){case 404:this.logger.info("No shared storage file found, creating a new one.");break;case 204:this.logger.info(`No entry for ${g} exists. Defaulting to empty object.`);break;default:this.logger.error(`Error (${I.code}) ${I.message}. Defaulting to empty object for path ${g}.`)}}writeBlock(g,I,G){const x=this.writeBlockInternal(g,I).pipe((0,r.q)(1),(0,s.b)(E=>{this.logger.info("write status to shared storage for path",g,E)}),(0,T.K)(E=>(this.logger.error("error writing to shared storage for path",g,E),(0,m.of)(!1))));return this.isInitialized||this.initialize(),this.cachedSharedStorage$.pipe((0,r.q)(1),(0,a.zg)(E=>(this.cachedSharedStorage$.next((0,n.set)(E,g.split("/"),I)),G?x:(x.subscribe(),(0,m.of)(!0)))))}writeBlockInternal(g,I){return this.bridgeService.executeCommand(t.Gh.Common.Sharedstorage.Write,{path:g.split("/"),data:I})}removeBlock(g){return this.isInitialized||this.initialize(),this.cachedSharedStorage$.pipe((0,r.q)(1),(0,y.U)(I=>{const G=(0,n.unset)(I,g);return this.cachedSharedStorage$.next(I),this.removeBlockInternal(g).subscribe(),G}))}removeBlockInternal(g){return this.bridgeService.executeCommand(t.Gh.Common.Sharedstorage.Remove,{path:g.split("/")}).pipe((0,p.h)(!0),(0,T.K)(I=>{switch(I.code){case 204:this.logger.warn(`No entry for ${g} exists. Removal failed.`);break;default:this.logger.error(`Error (${I.code}) ${I.message}.`)}return(0,m.of)(!1)}))}}return f.\u0275fac=function(g){return new(g||f)(w.LFG(l.dF),w.LFG(l.ed),w.LFG(l.o1))},f.\u0275prov=w.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})(),u=(()=>{class f{}return f.\u0275fac=function(g){return new(g||f)},f.\u0275mod=w.oAB({type:f}),f.\u0275inj=w.cJS({imports:[[]]}),f})()},22547:(He,de,e)=>{"use strict";e.d(de,{$:()=>l});var n=e(90490),i=e(53466),D=(()=>{return(t=D||(D={})).Functional="functional",t.Technical="technical",t.Behavioral="behavioral",D;var t})();const y={LoginStart:{name:"LoginStart",gdprLevel:D.Functional}};class T extends class{constructor(w){this.parameters=w,this.ts=(new Date).toISOString()}}{constructor(w){super(w),this.name=y.LoginStart.name,this.gdprLevel=y.LoginStart.gdprLevel}}var r=e(2316),a=e(6484),s=e(43124);const p="loginStartEvent";let l=(()=>{class t{constructor(h,u){this.telemetryService=u,this.logger=h.getLogger("services/starfleet-telemetry.service")}sendLoginStartEvent(h,u,o){this.logger.info("Sending login triggered event");const f={loginProviderIdpId:h||"",loginUrl:u||""},c=new T(f);o?sessionStorage.setItem(p,JSON.stringify(f)):this.telemetryService.push(c)}checkAndSendLoginStartEvent(){(0,n.$R)(this.telemetryService.getCommonDataObservable(),this.telemetryService.getDefaultClientConsentObserable()).pipe((0,i.q)(1)).subscribe(h=>{const u=sessionStorage.getItem(p);if(u){const o=new T(JSON.parse(u));this.telemetryService.push(o),sessionStorage.removeItem(p)}})}}return t.\u0275fac=function(h){return new(h||t)(r.LFG(a.ed),r.LFG(s.y0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},61481:(He,de,e)=>{"use strict";e.d(de,{C4:()=>y,L$:()=>A,TR:()=>D,E9:()=>Ye,DO:()=>n,fH:()=>m});class n{constructor(){}}var i=e(2316);let D=(()=>{class Ve{}return Ve.\u0275fac=function(ve){return new(ve||Ve)},Ve.\u0275prov=i.Yz7({token:Ve,factory:Ve.\u0275fac}),Ve})();var m=(()=>{return(Ve=m||(m={})).LoginAlreadyInProgress="Login Already In Progress",Ve.OpenOAuthUrlStarted="Open OAuth url started",Ve.OpenOAuthUrlCompleted="Open OAuth url completed",Ve.LoginStarted="Login Started",Ve.LoginCompleted="Login Completed",Ve.LoginAbortedByUser="Login Aborted: User Cancelled Login",Ve.LoginAbortedAlreadyLoggedIn="Login Aborted: Already Logged In",Ve.LoginFailed="Login Failed",Ve.LoginFailedNoRetry="Login Failed No Retry",Ve.LoginFailedToStart="Login failed to Start",Ve.LogoutStarted="Logout Started",Ve.LogoutCompleted="Logout Completed",Ve.LogoutFailed="Logout Failed",Ve.LoginInProgressNeedDisplayCode="Login Started Need Display Code",Ve.LoginNotReturningFromLoginPage="Login not returning from login page",m;var Ve})(),y=(()=>{return(Ve=y||(y={})).NOT_LOGGED_IN="Not Logged In, Must login",Ve.USER_OFFLINE="User is Offline",Ve.ALREADY_LOGGED_IN="Already logged in",Ve.AUTH_ERROR="Auth Error",Ve.AGE_RESTRICTED="age_restricted",Ve.ACCOUNT_LOCKED="account_locked",Ve.HTTP_START_FAILED="Http Server start failed",Ve.CLIENT_TOKEN_FAIL="Client token url access failed",Ve.OAUTH_DATA_EMPTY="JSON parsing fialed for OAUTH Data",Ve.STARFLEET_REDIRECT_FAIL="Failure on Starfleet Redirect Page",Ve.REDEEM_AUTHCODE_FAILED="Failuer in redeeming auth code",Ve.NONCE_VALIDATION_FAILED="Nonce validation failed",Ve.ACCOUNT_INACTIVE="account_inactive",Ve.LOGIN_CANCELLED_BY_USER="User pressed back from login page",Ve.LOGOUT_NOT_SUPPORTED="logout_not_supported",Ve.LOGOUT_GENERIC_ERROR="logout_generic_error",y;var Ve})(),T=e(54364),r=e(53882),a=(()=>{return(Ve=a||(a={})).Browser="Browser",Ve.Cef="Cef",Ve.Android="Android",a;var Ve})(),s=e(80226),p=e(81134),l=e(45871),t=e(92941),w=e(12702),h=e(90490),u=e(98636),o=e(85816),f=e(53466),c=e(20088),g=e(18293),I=e(92597),G=e(29845),x=e(33927),E=e(9170),P=e(71435),v=e(202),O=e(3076);const B={clientToken:null,accessToken:null,idToken:null,user:{sub:"",idp_name:"",idp_id:"",external_id:"",preferred_username:"",consent:{trackTechnicalData:!1,trackBehavioralData:!1},isAuthenticated:!1},clientTokenExpiry:null,accessTokenExpiry:null,idTokenExpiry:null},U="starfleet";var A=(()=>{return(Ve=A||(A={}))[Ve.Failure=0]="Failure",Ve[Ve.Success=1]="Success",Ve[Ve.Cancel=2]="Cancel",A;var Ve})();class S{static encode(at){const ve=new S;return ve.data=window.btoa(encodeURIComponent(JSON.stringify(at))),ve.authProvider=U,ve}static decode(at){return JSON.parse(decodeURIComponent(window.atob(at.data)))}}class Y{constructor(at,ve){this.idTokenRefreshUnderDuration=at,this.data=(0,v.isNil)(ve)?Object.assign({},B):ve}static loadFrom(at,ve){return at.readBlock("starfleetSession").pipe((0,o.zg)(Ie=>{const $e=Ie.authProvider===U?S.decode(Ie):null,ze=new Y(ve,$e);return(0,v.isEmpty)($e)?ze.writeTo(at):(0,p.of)(ze)}))}writeTo(at){return at.writeBlock("starfleetSession",S.encode(this.data),!0).pipe((0,x.U)(()=>this))}hasClientToken(){return!(0,v.isNil)(this.data.clientToken)}isClientTokenValid(){return this.hasClientToken()&&this.data.clientTokenExpiry>Date.now()}hasClientTokenExpired(){return this.hasClientToken()&&this.data.clientTokenExpiry<=Date.now()}hasAccessToken(){return!(0,v.isNil)(this.data.accessToken)}isAccessTokenValid(){return this.hasClientToken()&&this.data.accessTokenExpiry>Date.now()}isIdTokenValid(){return 0===this.data.idTokenExpiry||this.hasClientToken()&&this.data.idTokenExpiry>Date.now()+this.idTokenRefreshUnderDuration}}var se=e(6484),fe=e(79911),$=e(89166),ae=e(71906),me=e(22547);const ye="Starfleet",ue="KVStore",X=3e4,j=2,K=1e3;let Z=(()=>{class Ve{constructor(ve,Ze,Ie,$e,ze,_t,be,pt){this.starfleetConfig=ve,this.endpointFactory=Ze,this.bridgeService=Ie,this.systemInfoService=$e,this.appConfig=ze,this.distributedtracingUtilService=be,this.starfleetTelemetryService=pt;const{defaultRetries:Ot=j,defaultTimeBetweenRetries:Kt=K,defaultTimeout:nn=X}=ve,Mn={config:{maxRetries:Ot,timeout:nn,timeBetweenRetries:Kt}};this.endpointAccessToken=this.endpointFactory.createEndpoint(Mn),this.endpointClientToken=this.endpointFactory.createEndpoint(Mn),this.endpointUserInfo=this.endpointFactory.createEndpoint(Mn),this.endpointKVStore=this.endpointFactory.createEndpoint(Mn),this.logger=_t.getLogger("libraries/starfleet-http.service")}requestDeviceAuthorize(ve,Ze,Ie,$e){let ze=(new r.LE).set("client_id",this.starfleetConfig.clientId).set("scope",this.starfleetConfig.scope).set("device_id",ve).set("display_name",Ze);Ie&&(ze=ze.set("idp_id",Ie));const _t={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:ze.toString(),reportRequestData:{originalService:ye,serviceUseCase:"Device_Authorization"}},be=`${this.starfleetConfig.url}/device/authorize`,pt=this.endpointAccessToken.post(be,_t),Ot=be+"?"+ze.toString();return this.starfleetTelemetryService.sendLoginStartEvent(Ie,Ot),this.distributedtracingUtilService.handleHttpEndpointSpan(pt,_t,$.j1.StarfleetGetAccessToken,$e)}getAccessToken(ve,Ze,Ie){if((0,v.isNil)(ve)||0===ve.trim().length)return(0,l._)(new Error("invalid or missing clientToken parameter"));if((0,v.isNil)(Ze)||0===Ze.trim().length)return(0,l._)(new Error("invalid or missing sub parameter"));const ze={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:(new r.LE).set("grant_type","urn:ietf:params:oauth:grant-type:client_token").set("client_token",ve).set("client_id",this.starfleetConfig.clientId).set("sub",Ze).toString(),reportRequestData:{originalService:ye,serviceUseCase:"Get_Access_Token"}},_t=this.endpointAccessToken.post(`${this.starfleetConfig.url}/token`,ze);return this.distributedtracingUtilService.handleHttpEndpointSpan(_t,ze,$.j1.StarfleetGetAccessToken,Ie)}getAccessTokenFromDeviceCode(ve,Ze){if((0,v.isNil)(ve)||0===ve.trim().length)return(0,l._)(new Error("invalid or missing clientToken parameter"));const $e={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:(new r.LE).set("grant_type","urn:ietf:params:oauth:grant-type:device_code").set("device_code",ve).set("client_id",this.starfleetConfig.clientId).toString(),reportRequestData:{originalService:ye,serviceUseCase:"Get_Access_Token"}},ze=this.endpointAccessToken.post(`${this.starfleetConfig.url}/token`,$e);return this.distributedtracingUtilService.handleHttpEndpointSpan(ze,$e,$.j1.StarfleetGetAccessToken,Ze)}getUserInfo(ve,Ze){if((0,v.isNil)(ve)||0===ve.trim().length)return(0,l._)(new Error("invalid or missing accessToken parameter"));const Ie={headers:this.getStarfleetAuthorizeHeaders(ve),reportRequestData:{originalService:ye,serviceUseCase:"Get_User_Info"}},$e=this.endpointUserInfo.get(`${this.starfleetConfig.url}/userinfo`,Ie);return this.distributedtracingUtilService.handleHttpEndpointSpan($e,Ie,$.j1.StarfleetGetUserInfo,Ze)}getClientToken(ve,Ze){if((0,v.isNil)(ve)||0===ve.trim().length)return(0,l._)(new Error("invalid or missing accessToken parameter"));const Ie={headers:this.getStarfleetAuthorizeHeaders(ve),reportRequestData:{originalService:ye,serviceUseCase:"Get_Client_Token"}},$e=this.endpointClientToken.get(`${this.starfleetConfig.url}/client_token`,Ie);return this.distributedtracingUtilService.handleHttpEndpointSpan($e,Ie,$.j1.StarfleetGetClientToken,Ze)}redeemAuthCode(ve,Ze,Ie,$e){var ze,_t,be;if(!(null===(ze=null==ve?void 0:ve.trim())||void 0===ze?void 0:ze.length))return(0,l._)(new Error("invalid or missing auth code parameter"));if(!(null===(_t=null==Ze?void 0:Ze.trim())||void 0===_t?void 0:_t.length))return(0,l._)(new Error("invalid or missing redirectUri parameter"));if(!(null===(be=null==Ie?void 0:Ie.trim())||void 0===be?void 0:be.length))return(0,l._)(new Error("invalid or missing codeVerifier parameter"));const Ot={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:(new r.LE).set("grant_type","authorization_code").set("code",ve).set("redirect_uri",Ze).set("code_verifier",Ie).toString(),reportRequestData:{originalService:ye,serviceUseCase:"Get_Access_Token"}},Kt=this.endpointAccessToken.post(`${this.starfleetConfig.url}/token`,Ot);return this.distributedtracingUtilService.handleHttpEndpointSpan(Kt,Ot,$.j1.StarfleetGetAccessToken,$e)}deleteClientTokens(ve,Ze){if((0,v.isNil)(ve)||0===ve.trim().length)return(0,l._)(new Error("invalid or missing accessToken parameter"));const Ie={params:{level:"client"},headers:this.getStarfleetAuthorizeHeaders(ve),reportRequestData:{originalService:ye,serviceUseCase:"Delete_Client_Data"}},$e=this.endpointClientToken.delete(`${this.starfleetConfig.url}/assets/v2/Tokens`,Ie);return this.distributedtracingUtilService.handleHttpEndpointSpan($e,Ie,$.j1.StarfleetDeleteClientToken,Ze)}getStarfleetAuthorizeHeaders(ve){return{[fe.n0.authorization]:`Bearer ${ve}`}}getClientData(ve,Ze,Ie){if((0,v.isNil)(ve)||0===ve.trim().length)return(0,l._)(new Error("invalid or missing idToken parameter"));const $e={headers:this.getKVStoreAuthorizeHeaders(ve),reportRequestData:{originalService:ue,serviceUseCase:"Get_Client_Data"}},ze=this.formatKeyValStoreUrl(`${this.starfleetConfig.keyValueServiceUrl}/clientData`,Ze),_t=this.endpointKVStore.get(ze,$e);return this.distributedtracingUtilService.handleHttpEndpointSpan(_t,$e,$.j1.KVStoreGetClientData,Ie)}deleteClientData(ve,Ze,Ie,$e){if((0,v.isNil)(ve)||0===ve.trim().length)return(0,l._)(new Error("invalid or missing idToken parameter"));const ze={headers:this.getKVStoreAuthorizeHeaders(ve),reportRequestData:{originalService:ue,serviceUseCase:"Delete_Client_Data"}},_t=this.formatKeyValStoreUrl(`${this.starfleetConfig.keyValueServiceUrl}/clientData`,[Ze],Ie),be=this.endpointKVStore.delete(_t,ze);return this.distributedtracingUtilService.handleHttpEndpointSpan(be,ze,$.j1.KVStoreDeleteClientData,$e)}setClientData(ve,Ze,Ie,$e){if((0,v.isNil)(ve)||0===ve.trim().length)return(0,l._)(new Error("invalid or missing idToken parameter"));const ze={headers:this.getKVStoreAuthorizeHeaders(ve),reportRequestData:{originalService:ue,serviceUseCase:"Set_Client_Data"},body:{key:Ze,value:Ie}},_t=this.endpointKVStore.post(`${this.starfleetConfig.keyValueServiceUrl}/clientData`,ze);return this.distributedtracingUtilService.handleHttpEndpointSpan(_t,ze,$.j1.KVStoreSetClientData,$e)}appendClientData(ve,Ze,Ie,$e){if((0,v.isNil)(ve)||0===ve.trim().length)return(0,l._)(new Error("invalid or missing idToken parameter"));const ze={headers:this.getKVStoreAuthorizeHeaders(ve),reportRequestData:{originalService:ue,serviceUseCase:"Set_Client_Data"},body:{key:Ze,value:Ie}},_t=this.endpointKVStore.put(`${this.starfleetConfig.keyValueServiceUrl}/clientData`,ze);return this.distributedtracingUtilService.handleHttpEndpointSpan(_t,ze,$.j1.KVStoreAppendClientData,$e)}formatKeyValStoreUrl(ve,Ze,Ie){if((0,v.isEmpty)(Ze))return ve;const $e=[];return Ze.forEach(ze=>{$e.push(`key=${ze}`)}),Ie&&Ie.forEach(ze=>{$e.push(`value=${ze}`)}),encodeURI(`${ve}?${$e.join("&")}`)}getKVStoreAuthorizeHeaders(ve){return{[fe.n0.authorization]:`GFNJWT ${ve}`}}}return Ve.\u0275fac=function(ve){return new(ve||Ve)(i.LFG(D),i.LFG(fe.V9),i.LFG(se.dF),i.LFG(se.Ob),i.LFG(ae.XL),i.LFG(se.ed),i.LFG($.Dc),i.LFG(me.$))},Ve.\u0275prov=i.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})();var L=e(82516),W=e(79441),te=e(34361),ie=e(2984),Q=e(67202);const k="oauth",N="GfnOauthUrlData";let q=(()=>{class Ve{constructor(ve,Ze,Ie,$e,ze){this.bridgeService=Ze,this.distributedTracingUtilService=$e,this.starfleetTelemetryService=ze,this.isBrowserPlatform=!1,this.httpSubscription=null,this.authWindow=null,this.isSameTabLoginFeatureEnabled=!1,this.authSaveDataNotifySubject=new s.t(1),this.logger=Ie.getLogger("starfleet/o-auth"),this.isBrowserPlatform=se.ng.isBrowserPlatform(),this.isSameTabLoginFeatureEnabled=ve.sameTabLogin}sameTabAuthStarted(){return this.authSaveDataNotifySubject.asObservable()}emitAuthStartNotification(ve){this.authSaveDataNotifySubject.next(ve)}oAuthLogin(ve,Ze,Ie,$e,ze,_t,be){if(this.isBrowserPlatform)return this.browserClientOAuthLogin(ve,Ze,Ie,$e,ze,_t,be);const[pt,Ot]=this.startHttpServer(ve,Ze);return pt.pipe((0,o.zg)(Kt=>this.openOAuthUrl(ve,Ze,Ie,$e,Kt,ze)),(0,o.zg)(Kt=>Ot.pipe((0,x.U)(nn=>(nn.oAuthUrl=Kt,nn)))),(0,u.b)(Kt=>{this.closeHttpSpan(Kt,Kt.oAuthUrl.span,Kt.oAuthUrl.url)}))}browserClientOAuthLogin(ve,Ze,Ie,$e,ze,_t,be){const pt=this.openOAuthUrl(ve,Ze,Ie,$e,null,ze,_t,be);return this.isSameTabLoginFeatureEnabled?pt.pipe((0,Q.h)(null)):pt.pipe((0,o.zg)(Ot=>(this.logger.info("received info"),(0,L.R)(window,"message").pipe((0,x.U)(Kt=>({event:Kt,oAuthUrl:Ot}))))),(0,E.h)(Ot=>this.validateMessageEvent(Ot.event)),(0,x.U)(Ot=>{const Kt=this.getOAuthLoginData(Ot.event);if(!Kt)throw this.logger.error("oAuthLoing Data is null ",Kt),y.OAUTH_DATA_EMPTY;Kt.oAuthUrl=Ot.oAuthUrl,this.logger.info("Captured OAuth data via post message: ",Kt.error),this.closeHttpSpan(Kt,Ot.oAuthUrl.span,Ot.oAuthUrl.url);const nn=new URL(ve.onCompleteRedirectUrl);return ve.redirectParams&&ve.redirectParams.forEach(tn=>{tn in Kt&&nn.searchParams.append(tn,Kt[tn])}),Ot.oAuthUrl.oAuthWindow.location.href=nn.href,Kt}),(0,f.q)(1))}openOAuthUrl(ve,Ze,Ie,$e,ze,_t,be,pt){return this.buildStarfleetUrl(ve,Ze,Ie,ze,_t).pipe((0,x.U)(Ot=>{const Kt=this.distributedTracingUtilService.startSpan($.j1.StarfleetOAuth),nn=this.distributedTracingUtilService.getFormattedUrlForHttpPopupSpan(Ot.url,Kt);return this.starfleetTelemetryService.sendLoginStartEvent(_t,Ot.url,this.isSameTabLoginFeatureEnabled),be?(this.authWindow=be,this.authWindow.location.href=nn):this.isSameTabLoginFeatureEnabled?(pt||this.logger.error("returnLocationUrl Argument is empty ",this.isSameTabLoginFeatureEnabled,pt),this.logger.info("overwriting login URL"),this.emitAuthStartNotification(m.LoginStarted),this.authSaveDataNotifySubject.pipe((0,f.q)(1)).subscribe(tn=>{this.logger.info("Received notification for ",tn),Ot.returnUrl=pt,window.sessionStorage.setItem(N,JSON.stringify(Ot)),window.open(nn,"_self")})):this.authWindow=window.open(nn,"_blank"),this.logger.info("login window opened with url",nn),$e&&$e.next(m.OpenOAuthUrlCompleted),Ot.url=nn,Ot.span=Kt,Ot.oAuthWindow=this.authWindow,Ot}))}closeHttpSpan(ve,Ze,Ie){ve&&ve.error?this.distributedTracingUtilService.closeHttpPopupSpan(Ze,!0,{errorCode:ve.error,errorText:ve.error,failedUrl:Ie}):this.distributedTracingUtilService.closeHttpPopupSpan(Ze,!1,{errorCode:"",errorText:"",failedUrl:Ie})}startHttpServer(ve,Ze,Ie=[]){const $e=new W.xQ,ze=new W.xQ;return this.httpSubscription=this.bridgeService.executeCommand(ie.Gh.Common.Httpserver.StartHttpServer,{ports:ve.portNumbers,redirectUrl:ve.onCompleteRedirectUrl,redirectParams:this.getRedirectParams(Ie,ve.redirectParams,Ze)}).subscribe(_t=>{switch(this.logger.info("httpresponse recieved"),(0,v.get)(_t,"callbackReason")){case"serverCreated":$e.next((0,v.get)(_t,"portNumber")),$e.complete();break;case"httpRequest":const pt=this.handleHttpRequest(_t.url);ze.next(pt),ze.complete(),this.stopHttpServer()}},_t=>{this.logger.error("error starting httpserver",_t),$e.error(y.HTTP_START_FAILED),ze.error(y.HTTP_START_FAILED)}),[$e,ze]}getRedirectParams(ve,Ze,Ie){const $e=ve,ze=[];return ve.forEach(_t=>ze.push(_t.split("=")[0])),Ze.forEach(_t=>{_t.split("=")[0]in ze||$e.push(_t)}),$e.push(`ui_locales=${Ie}`),$e}handleHttpRequest(ve){const Ze={};return new URL(ve).searchParams.forEach(($e,ze)=>{Ze[ze]=$e}),Ze}b64url(ve){return btoa(String.fromCharCode.apply(null,ve)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}buildStarfleetUrl(ve,Ze,Ie,$e,ze){let _t=ve.useAuthorizationCodeFlow?":server/authorize?response_type=code&device_id=:deviceId&scope=:scope&client_id=:clientId&redirect_uri=:redirectUri&ui_locales=:locale&nonce=:nonce&prompt=select_account&code_challenge=:codeChallenge&code_challenge_method=S256":":server/authorize?response_mode=query&response_type=id_token+token&device_id=:deviceId&scope=:scope&client_id=:clientId&redirect_uri=:redirectUri&ui_locales=:locale&nonce=:nonce&prompt=select_account";_t=_t.replace(":server",ve.url),_t=_t.replace(":clientId",ve.clientId),_t=_t.replace(":scope",ve.scope);let be="";be=ve.redirectUrl,(0,v.isNil)($e)||(be=ve.redirectUrl.replace("{portnumber}",$e.toString())),_t=_t.replace(":redirectUri",encodeURIComponent(be)),_t=_t.replace(":locale",Ze),_t=_t.replace(":deviceId",Ie);const pt=this.generateNonce();_t=_t.replace(":nonce",pt);let Ot=null,Kt=null;if(ve.useAuthorizationCodeFlow){const nn=window.crypto.getRandomValues(new Uint8Array(32));Kt=this.b64url(nn);const tn=(new TextEncoder).encode(Kt);Ot=(0,te.D)(window.crypto.subtle.digest("SHA-256",tn)).pipe((0,x.U)(Mn=>{const Un=this.b64url(new Uint8Array(Mn));return _t=_t.replace(":codeChallenge",Un),_t}))}else Ot=(0,p.of)(_t);return Ot.pipe((0,x.U)(nn=>((0,v.isNil)(ze)||(_t=_t+"&idp_id="+ze),{url:_t,codeVerifier:Kt,redirectUrl:be,nonce:pt})))}generateNonce(){let ve=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Ie){const $e=(ve+16*Math.random())%16|0;return ve=Math.floor(ve/16),("x"===Ie?$e:3&$e|8).toString(16)})}cancelOAuthLogin(ve,Ze,Ie){let $e=null,ze=null;return Ie?this.stopHttpServer():[$e,ze]=this.startHttpServer(ve,Ze,["error=cancelled"]),this.authWindow&&(this.authWindow.close(),this.authWindow=null),ze}stopHttpServer(){this.httpSubscription&&(this.httpSubscription.unsubscribe(),this.httpSubscription=null,this.bridgeService.executeCommand(ie.Gh.Common.Httpserver.StopHttpServer).subscribe(ve=>this.logger.info("success stopping httpserver",ve),ve=>this.logger.error("error stopping httpserver",ve)))}validateMessageEvent(ve){if("no_localstorage_supported"===ve.data.key)throw this.logger.error("Starfleet Redirect page failure ",ve),y.STARFLEET_REDIRECT_FAIL;return!(!ve||!ve.data||ve.data.key!==k||ve.origin!==window.location.origin)}getOAuthLoginData(ve){const Ze=this.isSameTabLoginFeatureEnabled?k:(0,v.get)(ve,"data.key"),Ie=window.localStorage.getItem(Ze);window.localStorage.removeItem(Ze),this.logger.info("Extracted key for reading oAuthLogin data ",Ze);try{return JSON.parse(Ie).data}catch($e){return this.logger.error("malformed access code object",Ie),null}}readAndValidateoAuthLoginData(){const ve=this.getOAuthLoginData();if(ve){const Ze=window.sessionStorage.getItem(N);window.sessionStorage.removeItem(N);try{ve.oAuthUrl=JSON.parse(Ze)}catch(Ie){this.logger.error("malformed access code object",Ze)}}return this.logger.info("Received oAuth Data on return from login ",ve),ve}}return Ve.\u0275fac=function(ve){return new(ve||Ve)(i.LFG(D),i.LFG(se.dF),i.LFG(se.ed),i.LFG($.Dc),i.LFG(me.$))},Ve.\u0275prov=i.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})();var Me=e(57390);const xe="markLogoutInitiated",ct="Logout Initiated",Se="logoutNotSupportedUrl";let Ge=(()=>{class Ve extends n{constructor(ve,Ze,Ie,$e,ze,_t,be,pt,Ot,Kt){var nn;super(),this.config=ve,this.starfleetHttpService=Ie,this.oAuthService=$e,this.sharedStorage=ze,this.localeService=_t,this.networkStatus=pt,this.systemInfoService=Ot,this.errorHandler=Kt,this.SAFE_RETRY_COUNT=5,this.initSub=new s.t(1),this.authStatusSubject=new s.t(1),this.loginSubscription=null,this.deviceIdSub=null,this.useCachedUser=!1,this.firstRefreshDone=!1,this.errorInfo={error_code:"",error_description:"",error_uri:""},this.isSessionRefreshable=!0,this.isNextClientTokenRefreshAllowed=!0,this.deviceDisplayCode=null,this.skipOpeningLogoutUrl=!1,this.isSameTabLoginFeatureEnabled=!1,this.idTokenRefreshUnderDuration=0,this.logger=Ze.getLogger("starfleet/desktop"),this.logger.info("constructing"),this.useDeviceAuthLogin=!!(null==ve?void 0:ve.useDeviceAuthLogin),this.skipOpeningLogoutUrl=!!(null==ve?void 0:ve.skipOpeningLogoutUrl),this.starfleetUserSubscription=be.createStream(this.getCurrentUser.bind(this)),this.isSameTabLoginFeatureEnabled=this.config.sameTabLogin,this.idTokenRefreshUnderDuration=null!==(nn=this.config.idTokenRefreshUnderDuration)&&void 0!==nn?nn:0,this.idTokenRefreshUnderDuration<0&&(this.idTokenRefreshUnderDuration=0)}getAuthStatus(){return this.authStatusSubject.asObservable()}initialize(ve=!1,Ze=!1,Ie){this.logger.info(`initializing session: ${ve}, user: ${Ze}, id_token?: ${!!Ie}`),this.useCachedUser=Ze;const $e=this.oAuthService.readAndValidateoAuthLoginData();$e?this.attemptLoginAtInit($e):this.loadSessionFromSharedStorage().pipe((0,u.b)(()=>this.initSub.next(!0)),(0,o.zg)(()=>this.getOrRefreshSession(!ve,!0,Ie))).subscribe(()=>this.logger.info("initialized success")),this.checkIfReturnFromLogout(),this.deviceIdSub=this.getDeviceId(),this.deviceIdSub.subscribe(),this.accountStatusChanged.pipe((0,f.q)(1)).subscribe()}getDeviceId(){return this.systemInfoService.getDeviceId().pipe((0,c.P)(),(0,g.K)(ve=>(this.logger.error("failed to get deviceId",ve),(0,p.of)(""))),(0,I.d)())}handleLoginError(ve){switch(ve){case y.ALREADY_LOGGED_IN:this.logger.info("user already logged in"),this.loginSubject.next(m.LoginAbortedAlreadyLoggedIn),this.loginSubject.complete();break;case y.AUTH_ERROR:this.logger.info("Auth error in login"),this.loginSubject.next(m.LoginFailed),this.loginSubject.complete();break;case y.ACCOUNT_LOCKED:case y.AGE_RESTRICTED:this.logger.info("Auth error in login: ",ve),this.loginSubject.next(m.LoginFailedNoRetry),this.loginSubject.complete();break;case y.HTTP_START_FAILED:this.logger.info("Http Start in error Login"),this.loginSubject.next(m.LoginFailedToStart),this.loginSubject.complete();break;case y.CLIENT_TOKEN_FAIL:this.logger.info("Client token url access failed"),this.errorInfo.error_description=y.CLIENT_TOKEN_FAIL,this.loginSubject.next(m.LoginFailed),this.loginSubject.complete();break;case y.OAUTH_DATA_EMPTY:this.logger.info("JSON parsing fialed for OAUTH Data"),this.errorInfo.error_description=y.OAUTH_DATA_EMPTY,this.loginSubject.next(m.LoginFailed),this.loginSubject.complete();break;case y.STARFLEET_REDIRECT_FAIL:this.logger.info("JSON parsing fialed for OAUTH Data"),this.errorInfo.error_description=y.STARFLEET_REDIRECT_FAIL,this.loginSubject.next(m.LoginFailed),this.loginSubject.complete();break;default:this.logger.info("unknown error in login",ve),this.loginSubject.next(m.LoginFailed),this.loginSubject.complete()}}cancelLogin(ve=!0){return this.logger.info("cancelling login"),this.loginSubject&&!1===this.loginSubject.isStopped&&(this.loginSubject.next(m.LoginAbortedByUser),this.loginSubject.complete()),this.loginSubscription&&(this.loginSubscription.unsubscribe(),this.loginSubscription=null),this.oAuthService.cancelOAuthLogin(this.config,this.localeService.getLocale(),ve)}sameTabAuthStarted(){return this.oAuthService.sameTabAuthStarted()}login(ve=!1,Ze,Ie,$e,ze){return this.loginSubject&&!this.loginSubject.isStopped?(0,l._)(m.LoginAlreadyInProgress):(this.loginSubject=new s.t(1),this.logger.info("login started"),this.loginSubject.next(m.LoginStarted),this.loginSubscription=this.getOrRefreshSession().pipe((0,o.zg)(_t=>!ve&&_t.isAccessTokenValid()?(0,l._)(y.ALREADY_LOGGED_IN):this.deviceIdSub),(0,o.zg)(_t=>this.useDeviceAuthLogin?($e||(this.logger.error("Missing device name in off-device login flow, falling back to default value"),$e="unknown"),this.performDeviceLogin(_t,$e,Ze)):(this.loginSubject.next(m.OpenOAuthUrlStarted),this.oAuthService.oAuthLogin(this.config,this.localeService.getLocale(),_t,this.loginSubject,Ze,Ie,ze))),(0,c.P)(),(0,o.zg)(_t=>!_t||(0,v.isEmpty)(_t)?(this.logger.info("received empty oauth login data ",this.isSameTabLoginFeatureEnabled),(0,p.of)(null)):(this.logger.info("OAuth login complete, starting to retrive token"),this.loginSubject.next(m.LoginStarted),this.attemptLogin(_t))),(0,u.b)(_t=>{_t?(this.refreshUser(),this.loginSubject.next(m.LoginCompleted)):this.isSameTabLoginFeatureEnabled||this.logger.error("session is null"),this.loginSubject.complete()})).subscribe(t.Z,this.handleLoginError.bind(this)),this.loginSubject.asObservable())}checkIfReturnFromLogout(){if(window.sessionStorage.getItem(xe)===ct){window.sessionStorage.removeItem(xe),this.logger.info("Returning from logout");const ve=new URL(window.location.href).searchParams.get("error"),Ze=window.sessionStorage.getItem(Se);window.sessionStorage.removeItem(Se),ve&&(this.logger.info("Logout failed with error ",ve),this.authStatusSubject.next({authReturnState:m.LogoutCompleted,error:ve===y.LOGOUT_NOT_SUPPORTED?y.LOGOUT_NOT_SUPPORTED:y.LOGOUT_GENERIC_ERROR,logoutNotSupportedRedirectUrl:Ze}))}else this.logger.info("Not returning from logout")}completeLoginAtInit(ve,Ze){this.initSub.next(!0),ve===m.LoginFailed&&(this.session=new Y(this.idTokenRefreshUnderDuration)),this.authStatusSubject.next({authReturnState:ve,error:Ze}),this.refreshUser(),this.loginSubject.next(ve),this.loginSubject.complete()}attemptLoginAtInit(ve){if(this.loginSubject&&!this.loginSubject.isStopped)return this.logger.info("Login already in progress"),(0,p.of)(m.LoginAlreadyInProgress);this.loginSubject=new s.t(1),this.logger.info("OAuth login complete, starting to retrive token"),this.loginSubject.next(m.LoginStarted),this.attemptLogin(ve).pipe((0,u.b)(Ze=>{this.completeLoginAtInit(m.LoginCompleted,null)},Ze=>{this.completeLoginAtInit(m.LoginFailed,Ze)})).subscribe()}retryDeviceLogin(ve,Ze,Ie){return Ie.pipe((0,o.zg)(($e,ze)=>{var _t,be,pt,Ot;const Kt=ze+1;return console.log("attempt number: ",Kt),Kt>ve?(0,l._)($e):"authorization_pending"===(null===(be=null===(_t=null==$e?void 0:$e.rawResponse)||void 0===_t?void 0:_t.error)||void 0===be?void 0:be.error)?(0,w.H)(1e3*Ze):"slow_down"===(null===(Ot=null===(pt=null==$e?void 0:$e.rawResponse)||void 0===pt?void 0:pt.error)||void 0===Ot?void 0:Ot.error)?(0,w.H)(1e3*(Ze+5)):(0,l._)($e)}))}waitForDeviceLogin(ve){const Ze=Math.max(1,Math.floor(ve.expires_in/ve.interval)-1);return(0,w.H)(1e3*ve.interval).pipe((0,o.zg)(()=>this.starfleetHttpService.getAccessTokenFromDeviceCode(ve.device_code)),(0,G.a)(Ie=>this.retryDeviceLogin(Ze,ve.interval,Ie)),(0,x.U)(Ie=>({error:"",error_description:"",access_token:Ie.access_token,token_type:Ie.token_type,expires_in:Ie.expires_in,id_token:Ie.id_token})))}performDeviceLogin(ve,Ze,Ie){return this.starfleetHttpService.requestDeviceAuthorize(ve,Ze,Ie).pipe((0,c.P)(),(0,o.zg)($e=>(this.deviceDisplayCode={url:$e.verification_uri,url_complete:$e.verification_uri_complete,user_code:$e.user_code},this.loginSubject.next(m.LoginInProgressNeedDisplayCode),(!$e.interval||$e.interval<=0)&&($e.interval=5),this.waitForDeviceLogin($e))))}getStarfleetLogoutURL(ve,Ze){return":server/logout?id_token_hint=:idToken&ui_locales=:locale".replace(":server",this.config.url).replace(":idToken",ve).replace(":locale",Ze)}getStarfleetLogoutURLSameTab(ve,Ze,Ie){return":server/logout?id_token_hint=:idToken&ui_locales=:locale&post_logout_redirect_uri=:redirect_uri".replace(":server",this.config.logoutUrl).replace(":idToken",ve).replace(":locale",Ze).replace(":redirect_uri",Ie)}saveRequiredDataAndOpenLogoutUrl(ve,Ze,Ie,$e,ze){return(0,h.$R)(this.oAuthService.sameTabAuthStarted(),this.localeService.localeChanged.pipe((0,f.q)(1))).subscribe(([_t,be])=>{this.logger.info("Received notification for ",_t);const pt=new URL(Ze+be),Ot={idpId:Ie};pt.searchParams.append("page",$e),pt.searchParams.append("jso",btoa(JSON.stringify(Ot))),window.sessionStorage.setItem(xe,ct),window.sessionStorage.setItem(Se,pt.toString()),window.open(this.getStarfleetLogoutURLSameTab(ve,this.localeService.getLocale(),ze),"_self")}),this.oAuthService.emitAuthStartNotification(m.LogoutStarted),(0,p.of)(!0)}logout(ve,Ze,Ie,$e){var ze,_t;this.logger.info("Logging out user.");const be=new s.t(1);be.next(m.LogoutStarted);const pt=null===(_t=null===(ze=this.session)||void 0===ze?void 0:ze.data)||void 0===_t?void 0:_t.idToken,Ot=this.session.data.user.idp_id;return!ve&&!this.skipOpeningLogoutUrl&&!this.isSameTabLoginFeatureEnabled&&window.open(this.getStarfleetLogoutURL(pt,this.localeService.getLocale()),"_blank"),this.deleteClientToken(!1,ve).pipe((0,g.K)(nn=>(this.logger.error("delete token failed with error: ",nn),(0,p.of)(null))),(0,o.zg)(()=>this.storeSession(new Y(this.idTokenRefreshUnderDuration))),(0,o.zg)(()=>!this.skipOpeningLogoutUrl&&this.isSameTabLoginFeatureEnabled?this.saveRequiredDataAndOpenLogoutUrl(pt,Ze,Ot,Ie,$e):this.isSameTabLoginFeatureEnabled?void 0:this.refreshUser())).subscribe(()=>{this.logger.info("log out complete."),be.next(m.LogoutCompleted),be.complete()},nn=>{this.logger.error("log out failed with error:",nn),be.next(m.LogoutFailed),be.complete(),!this.skipOpeningLogoutUrl&&this.isSameTabLoginFeatureEnabled&&this.saveRequiredDataAndOpenLogoutUrl(pt,Ze,Ot,Ie,$e)}),be.asObservable()}deleteClientToken(ve=!1,Ze){return(Ze?(0,p.of)(Ze):this.getAccessToken(ve)).pipe((0,o.zg)(Ie=>this.starfleetHttpService.deleteClientTokens(Ie)),(0,g.K)(Ie=>(this.logger.error("Got error while deleting client token.",Ie),this.handleAuthError(Ie,ve,this.deleteClientToken.bind(this)))))}refreshUser(){return this.starfleetUserSubscription.refresh()}get accountStatusChanged(){let ve;return this.starfleetUserSubscription.get$().pipe((0,E.h)(Ze=>{var Ie,$e,ze,_t;return(0,v.isNil)(ve)||!(0,v.isEqual)(ve.sub,Ze.sub)||!(0,v.isEqual)(null===(Ie=ve.consent)||void 0===Ie?void 0:Ie.trackBehavioralData,null===($e=Ze.consent)||void 0===$e?void 0:$e.trackBehavioralData)||!(0,v.isEqual)(null===(ze=ve.consent)||void 0===ze?void 0:ze.trackTechnicalData,null===(_t=Ze.consent)||void 0===_t?void 0:_t.trackTechnicalData)}),(0,u.b)(Ze=>{ve=Ze}))}get starfleetUserDataChanged(){let ve;return this.starfleetUserSubscription.get$().pipe((0,E.h)(Ze=>!(0,v.isEqual)(ve,Ze)),(0,x.U)(Ze=>(ve=Ze,{newStarfleetUser:Ze,oldStarfleetUser:ve})))}get isUserLoggedIn(){return this.initSub.pipe((0,x.U)(()=>this.session.isClientTokenValid()))}attemptLogin(ve){if(this.errorInfo.error_code=ve.error?ve.error:"",this.errorInfo.error_description=ve.error_description?ve.error_description:"",this.errorInfo.error_uri=ve.error_uri?ve.error_uri:"",ve.error||ve.error_description)return this.logger.error("failed to login user with error",ve.error,ve.error_description),(0,l._)(ve.error);let Ze=null;return Ze=ve.code&&ve.oAuthUrl.codeVerifier?this.starfleetHttpService.redeemAuthCode(ve.code,ve.oAuthUrl.redirectUrl,ve.oAuthUrl.codeVerifier).pipe((0,x.U)(Ie=>(ve.access_token=Ie.access_token,ve.id_token=Ie.id_token,ve.expires_in=Ie.expires_in,ve.token_type=Ie.token_type,ve)),(0,g.K)(Ie=>{throw this.logger.error("error in redeeming auth code",Ie),y.REDEEM_AUTHCODE_FAILED})):(0,p.of)(ve),Ze.pipe((0,o.zg)(Ie=>this.completeLogin(ve)))}validateRedirectResponse(ve){if(this.useDeviceAuthLogin)return!0;const Ze=this.parseIdToken(ve.id_token);if(Ze&&Ze.nonce!==ve.oAuthUrl.nonce)throw y.NONCE_VALIDATION_FAILED;return!0}completeLogin(ve){const Ze=new Y(this.idTokenRefreshUnderDuration);return this.starfleetHttpService.getClientToken(ve.access_token).pipe((0,g.K)(Ie=>{throw this.logger.error("Client Token url failure ",Ie),y.CLIENT_TOKEN_FAIL}),(0,x.U)(Ie=>(Ze.data.accessToken=ve.access_token,Ze.data.accessTokenExpiry=Date.now()+1e3*ve.expires_in,Ze.data.idToken=ve.id_token,Ze.data.clientToken=Ie.client_token,Ze.data.clientTokenExpiry=Date.now()+1e3*Ie.expires_in,Ze.data.clientTokenExpiryLength=1e3*Ie.expires_in,Ze.data.idTokenExpiry=this.getIdTokenExpiry(Ze.data.idToken),this.session=Ze,this.session)))}getIdTokenExpiry(ve){let Ze=0;const Ie=this.parseIdToken(ve);return Ie&&(Ze=Date.now()+1e3*(+Ie.exp-+Ie.iat)),Ze}parseIdToken(ve){try{const Ie=ve.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(escape(atob(Ie))))}catch(Ze){return this.errorHandler.handleError(new Error(`idToken parse failed with error '${Ze}'`)),this.logger.error("failed to parse idToken",Ze),null}}isClientTokenRefreshRequired(){let ve=!1;if(this.session.isClientTokenValid()){const Ze=this.session.data.clientTokenExpiry-Date.now();ve=this.session.data.clientTokenExpiryLength?Ze<this.config.clientTokenRefreshDurationInPercentage/100*this.session.data.clientTokenExpiryLength:Ze<this.config.clientTokenRefreshDuration}return ve}fetchSession(ve,Ze){return this.starfleetHttpService.getAccessToken(this.session.data.clientToken,this.session.data.user.sub,Ze).pipe((0,o.zg)(Ie=>(this.session.data.accessToken=Ie.access_token,this.session.data.clientToken=Ie.client_token,this.session.data.idToken=Ie.id_token,this.session.data.accessTokenExpiry=Date.now()+1e3*Ie.expires_in,this.session.data.idTokenExpiry=this.getIdTokenExpiry(this.session.data.idToken),this.isSessionRefreshable=!0,(0,p.of)(this.session))),(0,o.zg)(()=>{const Ie=this.session.data.clientTokenExpiry-Date.now();return this.isClientTokenRefreshRequired()&&this.isNextClientTokenRefreshAllowed?(this.logger.info("Refreshing Client Token"),this.starfleetHttpService.getClientToken(this.session.data.accessToken,Ze).pipe((0,x.U)($e=>(this.logger.info("Client Token refreshed Successfully"),this.session.data.clientToken=$e.client_token,this.session.data.clientTokenExpiry=Date.now()+1e3*$e.expires_in,this.session.data.clientTokenExpiryLength=1e3*$e.expires_in,this.isNextClientTokenRefreshAllowed=Ie<this.session.data.clientTokenExpiryLength,this.session)))):(0,p.of)(this.session)}),(0,g.K)(Ie=>(this.logger.info("Error refreshing access token with starfleet:",Ie),(0,O.f0)(Ie)?(this.logger.info("The session refresh failed due to timeout or connection issues. So, will not log out the user"),(0,p.of)(this.session)):(this.logger.info("Error thrown from server. Hence, logging the user out"),this.storeSession(new Y(this.idTokenRefreshUnderDuration))))),(0,P.x)(()=>{ve||this.refreshUser()}))}getCurrentUser(ve=!1){return this.getOrRefreshSession(ve,!0).pipe((0,o.zg)(Ze=>(this.logger.info("Getting current user"),this.useCachedUser?(this.useCachedUser=!1,(0,l._)("using cached user at initialize")):!this.networkStatus.isOnline&&Ze.isClientTokenValid()?(this.logger.info("User is offline and session has client token. So returning cached user"),(0,l._)(y.USER_OFFLINE)):Ze.isAccessTokenValid()?Ze.data.user&&!this.firstRefreshDone?(this.firstRefreshDone=!0,this.refreshUser(),(0,l._)("using deferred refresh for user")):this.starfleetHttpService.getUserInfo(Ze.data.accessToken):(0,l._)(y.NOT_LOGGED_IN))),(0,o.zg)(Ze=>(Ze.isAuthenticated=!0,this.session.data.user=Ze,this.storeSession(this.session))),(0,x.U)(()=>this.session.data.user),(0,g.K)(Ze=>this.handleAuthError(Ze,ve,this.getCurrentUser.bind(this))),(0,g.K)(Ze=>(this.logger.info("Error fetching userInfo from starfleet:",Ze),(0,O.f0)(Ze)&&this.logger.info("UserInfo refresh failed due to timeout or connection issue"),(0,p.of)(this.session.data.user))))}createNewSessionFromIdToken(ve){return this.getOrRefreshSession(!1,!1,ve).pipe((0,u.b)(()=>this.refreshUser()))}getOrRefreshSession(ve,Ze,Ie,$e){return this.sessionSubject&&!1===this.sessionSubject.isStopped||(this.sessionSubject=new s.t(1),this.initSub.pipe((0,o.zg)(()=>{const ze=this.session.isClientTokenValid();return(ve||!this.session.isAccessTokenValid())&&ze&&this.networkStatus.isOnline&&this.isSessionRefreshable?(this.logger.info("refreshing session. Force Refresh: ",ve),this.fetchSession(Ze,$e)):ze?(this.logger.info("Using existing client token "),(0,p.of)(this.session)):Ie&&0!==Ie.length?this.createSessionFromIdToken(Ie):(this.logger.info("Loading session from shared storage"),this.loadSessionFromSharedStorage())})).subscribe(ze=>{this.sessionSubject.next(ze),this.sessionSubject.complete()},ze=>{this.sessionSubject.error(ze),this.logger.error("failed to refersh session",ze)})),this.sessionSubject.asObservable()}createSessionFromIdToken(ve){let Ze;this.logger.info("Building session from sdk id token");try{let $e=ve.split(".")[1];$e=JSON.parse(window.atob($e)),Ze={sub:$e.sub,idp_name:$e.idp_name,idp_id:$e.idp_id,external_id:$e.external_id,preferred_username:$e.preferred_username,consent:$e.consent,isAuthenticated:!0}}catch($e){return this.logger.error("Failed to parse id token to get expiry"),this.logger.info("Loading session from shared storage"),this.loadSessionFromSharedStorage()}const Ie={clientToken:"This is required for the session object to validate, but is not used",accessToken:"This is required for the session object to validate, but is not used",idToken:ve,user:Ze,clientTokenExpiry:Date.now()+1728e5,accessTokenExpiry:Date.now()+1728e5,idTokenExpiry:this.getIdTokenExpiry(ve)};return this.isSessionRefreshable=!1,this.session=new Y(this.idTokenRefreshUnderDuration,Ie),(0,p.of)(this.session)}loadSessionFromSharedStorage(){return Y.loadFrom(this.sharedStorage,this.idTokenRefreshUnderDuration).pipe((0,o.zg)(ve=>(this.logger.info("Loaded session successfully from shared storage"),this.session=ve,ve.isClientTokenValid()?(0,p.of)(ve):(this.logger.info("Stored session does not have user token. Hence, logging the user out"),this.session=new Y(this.idTokenRefreshUnderDuration),this.isSessionRefreshable=!0,(0,p.of)(this.session)))),(0,g.K)(ve=>(this.logger.info("Error loading session from shared storage. Hence logging out the user.",ve),this.session=new Y(this.idTokenRefreshUnderDuration),(0,p.of)(this.session))))}storeSession(ve){return this.session=ve,this.session.writeTo(this.sharedStorage).pipe((0,o.zg)(()=>(0,p.of)(this.session)),(0,g.K)(Ze=>(this.logger.info("Error saving session to shared storage:",Ze),(0,l._)(Ze))))}getAuthToken(ve,Ze){return this.initSub.pipe((0,o.zg)(Ie=>ve||!this.session.isIdTokenValid()?this.session.hasClientTokenExpired()?(this.refreshUser(),(0,p.of)(new Y(this.idTokenRefreshUnderDuration))):this.getOrRefreshSession(!0,null,null,Ze):(0,p.of)(this.session)),(0,x.U)(Ie=>Ie.data.idToken))}getAccessToken(ve,Ze){return this.initSub.pipe((0,o.zg)(Ie=>ve||!this.session.isAccessTokenValid()?this.getOrRefreshSession(!0,null,null,Ze):(0,p.of)(this.session)),(0,x.U)(Ie=>Ie.data.accessToken))}getClientData(ve,Ze,Ie=!1){return this.getAuthToken(Ie,Ze).pipe((0,o.zg)($e=>this.starfleetHttpService.getClientData($e,ve,Ze)),(0,g.K)($e=>this.handleAuthError($e,Ie,this.getClientData.bind(this),ve)))}setClientData(ve,Ze,Ie,$e=!1){return this.getAuthToken($e,Ie).pipe((0,o.zg)(ze=>this.starfleetHttpService.setClientData(ze,ve,Ze,Ie)),(0,g.K)(ze=>this.handleAuthError(ze,$e,this.setClientData.bind(this),ve,Ze)))}appendClientData(ve,Ze,Ie,$e=!1){return this.getAuthToken($e,Ie).pipe((0,o.zg)(ze=>this.starfleetHttpService.appendClientData(ze,ve,Ze,Ie)),(0,g.K)(ze=>this.handleAuthError(ze,$e,this.appendClientData.bind(this),ve,Ze)))}deleteClientData(ve,Ze,Ie,$e=!1){return this.getAuthToken($e,Ie).pipe((0,o.zg)(ze=>this.starfleetHttpService.deleteClientData(ze,ve,Ze,Ie)),(0,g.K)(ze=>this.handleAuthError(ze,$e,this.deleteClientData.bind(this),ve)))}handleAuthError(ve,Ze,Ie,...$e){return 401===ve.status?Ze?(0,l._)(y.NOT_LOGGED_IN):(this.logger.info("refershing auth token for fn: ",null==Ie?void 0:Ie.name),$e.push(!0),Ie(...$e)):(0,l._)(ve)}get lastError(){return this.errorInfo}getDeviceDisplayCode(){return this.deviceDisplayCode}cancel(){var ve,Ze;!1===(null===(ve=this.loginSubject)||void 0===ve?void 0:ve.isStopped)&&this.loginSubject.complete(),null===(Ze=this.loginSubscription)||void 0===Ze||Ze.unsubscribe(),this.loginSubscription=null}}return Ve.\u0275fac=function(ve){return new(ve||Ve)(i.LFG(D),i.LFG(se.ed),i.LFG(Z),i.LFG(q),i.LFG(Me.OA),i.LFG(se.OL),i.LFG(O.O_),i.LFG(se._J),i.LFG(se.Ob),i.LFG(i.qLn))},Ve.\u0275prov=i.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})();var St=e(73159);const Te={provide:n,useFactory:function(Ve,at,ve,Ze,Ie,$e,ze,_t,be,pt){switch(Ve.platformType){case a.Browser:case a.Cef:return Ve.redirectUrl=Ve.redirectUrlIsRelative?window.location.origin+Ve.redirectUrl:Ve.redirectUrl,new Ge(Ve,at,ve,Ze,Ie,$e,ze,_t,be,pt);default:at.getLogger("starfleetServiceCreator").error("Cannot create StarfleetService for unknown platform type: "+Ve.platformType)}},deps:[D,se.ed,Z,q,Me.OA,se.OL,O.O_,se._J,se.Ob,i.qLn,St.s]};var Je=e(80181);const xt=[Je.Cq];let Ye=(()=>{class Ve{static configure(ve){return{ngModule:Ve,providers:[{provide:D,useValue:ve},Te,q,me.$]}}}return Ve.\u0275fac=function(ve){return new(ve||Ve)},Ve.\u0275mod=i.oAB({type:Ve}),Ve.\u0275inj=i.cJS({providers:[Te],imports:[[r.JF,T.ez,...xt],Je.Cq]}),Ve})();e(56226)},70431:(He,de,e)=>{"use strict";e.d(de,{P:()=>h});var n=e(2316),i=e(56479),D=e(6484),m=e(12204),y=e(54364),T=e(89460),r=e(25219),a=e(30582),s=e(80181);const p=["surveyFrame"];function l(u,o){if(1&u){const f=n.EpF();n.TgZ(0,"div",4),n.TgZ(1,"iframe",5,6),n.NdJ("load",function(g){return n.CHM(f),n.oxw().onLoad(g)})("error",function(){return n.CHM(f),n.oxw().onError()}),n.qZA(),n.qZA()}if(2&u){const f=n.oxw();n.Q6J("hidden",f.loadingFrame)("ngStyle",f.nvContainerSize),n.xp6(1),n.Q6J("src",f.getSource(),n.uOi)("ngStyle",f.nvSize)}}function t(u,o){if(1&u){const f=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"nv-hig-dialog",7),n.NdJ("primaryButtonClick",function(){return n.CHM(f),n.oxw().dismiss()}),n.qZA(),n.qZA()}if(2&u){const f=n.oxw();n.xp6(1),n.Q6J("data",f.dialogData)}}function w(u,o){if(1&u&&(n.TgZ(0,"div",8),n.TgZ(1,"div"),n._UZ(2,"mat-progress-spinner",9),n.qZA(),n.qZA()),2&u){const f=n.oxw();n.Q6J("ngStyle",f.nvContainerSize),n.xp6(2),n.Q6J("diameter",35)}}let h=(()=>{class u{constructor(f,c){this.networkStatusService=c,this.continue=new n.vpe,this.nvOnClose=new n.vpe,this.nvOnSend=new n.vpe,this.loadingFrame=!0,this.firstLoad=!0,this.isLoading=!1,this.loadEvent=null,this._state=i.Nf.SurveyMain,this.errorText="",this.errorTitle="",this.buttonText="",this.dialogData={},this.logger=f.getLogger("survey-feedback/surveyComponent"),this.logger.info("Attempting to open survey form")}get state(){return this._state}set state(f){this.logger.info("state updated:",f),this._state=f}ngOnInit(){this.isLoading=!1,this.loadEvent=null,this.activateOnlineSubscription(),this.isSurveyError&&(this.loadingFrame=!1),this.errorTitle=this.isSurveyError?"feedback.feedbackErrorTitle":"",this.errorText=this.isSurveyError?"feedback.feedbackErrorMessage":"feedback.problemConnectingToNvidia",this.buttonText="feedback.dismiss",this.dialogData={headerText:{text:this.errorTitle},bodyText:{text:this.errorText},primaryButton:{text:this.buttonText}}}onKeyUp(){this.dismiss()}getSource(){return this.nvSource}onError(){this.state=i.Nf.SurveyError,this.loadingFrame=!1,this.firstLoad=!1}dismiss(){this.loadEvent&&!this.isSurveyError&&!this.loadingFrame&&this.nvOnClose.emit("escape"),this.nvOnClose.emit("closed")}onLoad(f){this.loadEvent=f,this.isLoading=!0,this.loadEvent&&this.loadEvent.target&&this.loadEvent.target.src&&(this.state!==i.Nf.SurveyMain&&(this.state=i.Nf.SurveyMain),this.loadingFrame=!1,this.firstLoad=!1,this.logger.info("survey form opened"),setTimeout(()=>{var c;null===(c=this.surveyFrame)||void 0===c||c.nativeElement.focus()},0),this.isSurveyError&&this.onError())}eventListener(f){switch(f.data){case"surveyengine.error":this.logger.error("invalid survey response",f.data),this.checkIfFailSilently(),this.onError();break;case"surveyengine.nosurvey":case"surveyengine.cancel":this.dismiss();break;case"surveyengine.thanks":this.nvOnSend.emit("sent")}}checkIfFailSilently(){this.failSilently&&this.firstLoad&&(this.firstLoad=!1,this.logger.error("failing silently .."),this.continue.emit("continue"))}activateOnlineSubscription(){this.onlineSubscription=this.networkStatusService.onlineStatusChanged.subscribe(f=>{this.state!==i.Nf.SurveyMain&&(this.state=i.Nf.SurveyMain),this.loadingFrame=!this.isSurveyError,f?this.isLoading||window.addEventListener("message",c=>{this.eventListener(c)}):(this.isLoading||this.checkIfFailSilently(),this.logger.info("showing survey error"),this.onError())},f=>{this.logger.error("Error fetching online status at load",f),this.onError()})}ngOnDestroy(){this.onlineSubscription&&this.onlineSubscription.unsubscribe()}}return u.\u0275fac=function(f){return new(f||u)(n.Y36(D.ed),n.Y36(D._J))},u.\u0275cmp=n.Xpm({type:u,selectors:[["nv-survey"]],viewQuery:function(f,c){if(1&f&&n.Gf(p,5),2&f){let g;n.iGM(g=n.CRH())&&(c.surveyFrame=g.first)}},hostBindings:function(f,c){1&f&&n.NdJ("keyup.esc",function(){return c.onKeyUp()},!1,n.Jf7)},inputs:{nvSize:"nvSize",nvContainerSize:"nvContainerSize",nvErrorSize:"nvErrorSize",nvSource:"nvSource",failSilently:"failSilently",isSurveyError:"isSurveyError"},outputs:{continue:"continue",nvOnClose:"nvOnClose",nvOnSend:"nvOnSend"},decls:4,vars:3,consts:[["nvTrapFocus","",3,"ngSwitch"],["class","survey-container",3,"hidden","ngStyle",4,"ngSwitchDefault"],[4,"ngSwitchCase"],["class","survey-loading-dialog-pane","fxLayoutAlign","center center",3,"ngStyle",4,"ngIf"],[1,"survey-container",3,"hidden","ngStyle"],["id","survey-frame","allow","gamepad",1,"survey-iframe",3,"src","ngStyle","load","error"],["surveyFrame",""],[3,"data","primaryButtonClick"],["fxLayoutAlign","center center",1,"survey-loading-dialog-pane",3,"ngStyle"],["mode","indeterminate",1,"mat-accent",3,"diameter"]],template:function(f,c){1&f&&(n.TgZ(0,"div",0),n.YNc(1,l,3,4,"div",1),n.YNc(2,t,2,1,"div",2),n.qZA(),n.YNc(3,w,3,2,"div",3)),2&f&&(n.Q6J("ngSwitch",c.state),n.xp6(2),n.Q6J("ngSwitchCase","error"),n.xp6(1),n.Q6J("ngIf",c.loadingFrame))},directives:[m.e,y.RF,y.ED,y.n9,y.O5,y.PC,T.Zl,r.D,a.Wh,s.Ou],styles:[".survey-loading-dialog-pane[_ngcontent-%COMP%]{background-color:#1f2224;height:610px;width:472px;border:0;overflow-y:overlay;overflow-x:hidden;max-height:80vh}.survey-loading-pane[_ngcontent-%COMP%]{margin:24px}.survey-bottom-filler[_ngcontent-%COMP%]{height:64px}.survey-iframe[_ngcontent-%COMP%]{border:0;max-height:80vh}button.survey-mat-raised-button.mat-accent[_ngcontent-%COMP%]:not([disabled]):hover{background-color:#6ba800}button.survey-mat-raised-button.mat-accent[_ngcontent-%COMP%]:not([disabled]):focus{background-color:#6ba800}button.survey-mat-raised-button.mat-accent[_ngcontent-%COMP%]:not([disabled]):active{background-color:#619900}.survey-nav-icon-container[_ngcontent-%COMP%]{display:block;text-align:center;line-height:48px;font-size:48px;height:48px;width:48px}.isLtr[_nghost-%COMP%]   .survey-nav-icon-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .survey-nav-icon-container[_ngcontent-%COMP%]{margin-left:25px}html[dir=ltr][_ngcontent-%COMP%]   .survey-nav-icon-container[_ngcontent-%COMP%]{--dummy3: 0;margin-left:25px}.isRtl[_nghost-%COMP%]   .survey-nav-icon-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .survey-nav-icon-container[_ngcontent-%COMP%]{margin-right:25px}html[dir=rtl][_ngcontent-%COMP%]   .survey-nav-icon-container[_ngcontent-%COMP%]{--dummy3: 0;margin-right:25px}.survey-container[_ngcontent-%COMP%]{overflow-y:hidden;overflow-x:hidden;max-height:80vh;background:#1f2224}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait){.survey-container[_ngcontent-%COMP%], .survey-loading-dialog-pane[_ngcontent-%COMP%]{width:calc(100vw - 32px)!important;height:534px!important}}@media screen and (max-width: 320px) and (max-height: 568px) and (orientation: portrait){.survey-container[_ngcontent-%COMP%], .survey-loading-dialog-pane[_ngcontent-%COMP%]{width:calc(100vw - 16px)!important;height:534px!important}}@media screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.survey-container[_ngcontent-%COMP%], .survey-loading-dialog-pane[_ngcontent-%COMP%]{width:560px!important;height:80vw!important}}@media screen and (max-width: 568px) and (max-height: 320px) and (orientation: landscape){.survey-container[_ngcontent-%COMP%], .survey-loading-dialog-pane[_ngcontent-%COMP%]{width:536px!important;height:80vw!important}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.survey-container[_ngcontent-%COMP%]{overflow-y:auto;background:#393939}.survey-iframe[_ngcontent-%COMP%]{width:inherit!important;height:inherit!important;min-height:inherit!important}.survey-container[_ngcontent-%COMP%], .survey-loading-dialog-pane[_ngcontent-%COMP%]{min-height:unset!important}}"]}),u})()},56479:(He,de,e)=>{"use strict";e.d(de,{Nf:()=>m,cJ:()=>a,Kz:()=>s,$6:()=>p,M4:()=>l});const m={SurveyMain:"main",SurveyError:"error"},a={width:"477px",height:"700px"},s={width:"477px",height:"700px"},p={width:"472px",height:"610px"},l={width:"472px",height:"610px"}},59321:(He,de,e)=>{"use strict";e.d(de,{TB:()=>F,n_:()=>w});var n=e(70781),i=e(22213),D=e(52529),m=e(80181),y=e(68456),T=e(66660),r=e(54364),a=e(1707),s=e(58283),p=e(50298),l=e(22573),t=e(2316);let w=(()=>{class V{}return V.\u0275fac=function(B){return new(B||V)},V.\u0275mod=t.oAB({type:V}),V.\u0275inj=t.cJS({providers:[],imports:[[r.ez,a.u5,T.o9,i.Is,y.ZX,D.Ps,m.Cq,n.ot,p.AV,s.aw.forChild(),l.hp],r.ez,a.u5]}),V})();var h=e(70431),u=e(56479),o=e(202),f=e(6484),c=e(76491),g=e(80226),I=e(81134),G=e(85816),x=e(53466),E=e(33927),P=e(68496),v=e(3076),O=e(71570),C=e(28389);let F=(()=>{class V{constructor(B,U,A,S,Y,se,fe){this.sanitizer=U,this.dialog=A,this.toastService=S,this.translateService=Y,this.systemInfoService=se,this.snackbar=fe,this.feedbackUrl="",this.feedbackUrlLoaded=new c.X(!1),this.logger=B.getLogger("FeedbackService"),this.userInfo$=new g.t(1)}getUserInfoUpdated(){return this.userInfo$.asObservable()}onAccountStatusChanged(B){this.userInfo$.next(B)}initializeFeedback(B,U,A,S){return this.isAdminHubSurvey=!1,this.isAdminHubSurveyError=!1,A().pipe((0,G.zg)(Y=>Y?U().pipe((0,x.q)(1),(0,E.U)(se=>(se?(this.logger.info("AdminHub Feedback Survey feature is enabled and survey found"),this.setFeedbackUrl(se.surveyContainerUrl),this.feedbackUrlLoaded.next(!0),this.isAdminHubSurvey=!0,this.subscribeToSurveyEvents(se)):(this.logger.info("initializeFeedback - AdminHub Feedback Survey is not availanble"),this.isAdminHubSurveyError=!0,this.setFeedbackUrl("")),!0))):(this.logger.info("Surveys Feature rollout is disabled, show error dialog"),this.isAdminHubSurveyError=!0,this.setFeedbackUrl(""),(0,I.of)(!0))))}setFeedbackUrl(B){this.feedbackUrl=this.sanitizer.bypassSecurityTrustResourceUrl(B)}closeFeedbackDialog(){this.logger.trace(v.y$.UserGesture,v.Px.Feedback,v.Rf.close," by clicking dismiss"),!(0,o.isNil)(this.globalDialogref)&&0===this.globalDialogref.getState()&&this.globalDialogref.close()}setUpToastContainer(B){this.tc=B}onOpenFeedbackDialog(B){if(this.logger.trace(v.y$.UserGesture,v.Px.Feedback,v.Rf.open,"feedback option"),(0,o.isNil)(this.globalDialogref)||0!==this.globalDialogref.getState())return this.globalDialogref=this.dialog.open(h.P,{panelClass:"dialogPaddingRemove",autoFocus:!0,hasBackdrop:!0,disableClose:!0,maxWidth:"100vw"}),this.globalDialogref.componentInstance.nvSource=this.feedbackUrl,this.globalDialogref.componentInstance.nvContainerSize={width:this.isAdminHubSurvey?u.cJ.width:u.$6.width,height:this.isAdminHubSurvey?u.cJ.height:u.$6.height},this.globalDialogref.componentInstance.nvSize={width:this.isAdminHubSurvey?u.Kz.width:u.M4.width,height:this.isAdminHubSurvey?u.Kz.height:u.M4.height},this.globalDialogref.componentInstance.isSurveyError=this.isAdminHubSurveyError,this.globalDialogref.componentInstance.nvOnSend.pipe((0,x.q)(1)).subscribe(U=>{this.onSurveySent(),this.globalDialogref.close()}),this.globalDialogref.componentInstance.nvOnClose.pipe((0,x.q)(1)).subscribe(U=>{"escape"===U&&B(),this.globalDialogref.close()}),this.showGuideToastIfNeeded(),this.globalDialogref;this.logger.info("Feedback Dialog is already open")}feedbackUrlInitialized(){return this.feedbackUrlLoaded.asObservable()}onSurveySent(){this.logger.trace(v.y$.UserGesture,v.Px.Feedback,v.Rf.close," by clicking send"),this.translateService.get("feedback.thanksMessage").subscribe(B=>{this.snackbar.open(B,"",{duration:7e3,horizontalPosition:"left",verticalPosition:"bottom",panelClass:["nv-hig"]})}),this.logger.info("survey sent")}subscribeToSurveyEvents(B){B?(this.surveyEventReferenceSubmitted=(0,P.subscribeToIFrameEvents)({surveyId:B.surveyId,type:P.SurveyEventType.Submitted},this.surveyEventListenerSubmitted.bind(this)),this.surveyEventReferenceDismissed=(0,P.subscribeToIFrameEvents)({surveyId:B.surveyId,type:P.SurveyEventType.Dismissed},this.surveyEventListenerDismissed.bind(this)),this.surveyEventReferenceCloseDialog=(0,P.subscribeToIFrameEvents)({surveyId:B.surveyId,type:P.SurveyEventType.CloseDialog},this.surveyEventListenerCloseDialog.bind(this))):this.logger.info("Error subscribing to survey events since survey result is empty")}surveyEventListenerSubmitted(){this.logger.info("Feedback Service - Survey Submitted, close Modal Dialog..."),this.onSurveySent(),this.closeFeedbackDialog(),this.surveyEventReferenceSubmitted.unsubscribe()}surveyEventListenerDismissed(){this.logger.info("Feedback Service - Survey Dismissed, close Modal Dialog..."),this.closeFeedbackDialog(),this.surveyEventReferenceDismissed.unsubscribe()}surveyEventListenerCloseDialog(){this.logger.info("Feedback Service - closing Modal Dialog..."),this.closeFeedbackDialog(),this.surveyEventReferenceCloseDialog.unsubscribe()}showGuideToastIfNeeded(){this.getGuideToastMessage().pipe((0,x.q)(1)).subscribe(B=>{B&&(this.snackbar.open(B,"",{duration:7e3,horizontalPosition:"left",verticalPosition:"bottom",panelClass:["nv-hig"]}),this.logger.info("Showing guide toast"))})}getGuideToastMessage(){return this.systemInfoService.getDeviceOSType().pipe((0,E.U)(B=>{if(B===f.wi.WebOS)return this.translateService.instant("surveyNotification.toastMessageOnLGTV")}))}}return V.\u0275fac=function(B){return new(B||V)(t.LFG(f.ed),t.LFG(O.H7),t.LFG(i.uw),t.LFG(C.kl),t.LFG(s.sK),t.LFG(f.Ob),t.LFG(y.ux))},V.\u0275prov=t.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})()},28389:(He,de,e)=>{"use strict";e.d(de,{sB:()=>u,EV:()=>g,kl:()=>c});var n=e(2316),i=e(68456),D=e(202),m=e(54364),y=e(70781),T=e(52529),r=e(80181),a=e(58283);function s(I,G){1&I&&(n.TgZ(0,"div",7),n._UZ(1,"mat-spinner",8),n.qZA())}function p(I,G){if(1&I&&(n.TgZ(0,"mat-icon",9),n._uU(1),n.qZA()),2&I){const x=n.oxw();n.Udp("color",x.toastModel.iconColor),n.xp6(1),n.hij(" ",x.toastModel.icon," ")}}function l(I,G){if(1&I&&(n.TgZ(0,"span",10),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&I){const x=n.oxw();n.xp6(1),n.Oqu(n.lcZ(2,1,x.toastModel.textContent))}}function t(I,G){if(1&I&&(n.TgZ(0,"span",10),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&I){const x=n.oxw();n.xp6(1),n.Oqu(n.lcZ(2,1,x.toastModel.textContentUseTranslate))}}function w(I,G){if(1&I){const x=n.EpF();n.TgZ(0,"div",7),n.TgZ(1,"button",11),n.NdJ("click",function(){return n.CHM(x),n.oxw().handleAction()}),n.TgZ(2,"span"),n._uU(3),n.ALo(4,"uppercase"),n.qZA(),n.qZA(),n.qZA()}if(2&I){const x=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,1,x.toastModel.button.text))}}let h=(()=>{class I{constructor(x){this.data=x,this.toastModel=x.toastModel,this.viewContainerRef=x.viewContainerRef,this.matSnackBar=x.matSnackBar}handleAction(){this.cancel(),this.toastModel.button.action(this.toastModel.button.actionParams)}cancel(){this.matSnackBar.dismiss(),this.viewContainerRef.clear()}}return I.\u0275fac=function(x){return new(x||I)(n.Y36(i.qD))},I.\u0275cmp=n.Xpm({type:I,selectors:[["lib-toast-content"]],decls:10,vars:5,consts:[["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"mat-toast-content","bg-dark-im-hue-5","color-white-hue-3","font-size-sm1"],["class","toast-item-container",4,"ngIf"],["class","md-24 toast-model-icon",3,"color",4,"ngIf"],["fxFlex","","class","toast-ellipsis-text font-body2",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end",1,"button-alignment"],["type","button","mat-icon-button","",3,"click"],["mat-font-set","material-icons",1,"mat-16","common-toast-close-icon","color-white-hue-4v"],[1,"toast-item-container"],["id","progressIndicator","diameter","13","mode","indeterminate",1,"mat-accent","margin-right-12"],[1,"md-24","toast-model-icon"],["fxFlex","",1,"toast-ellipsis-text","font-body2"],["mat-button","",1,"color-green","font-button1","padding-right-24",3,"click"]],template:function(x,E){1&x&&(n.TgZ(0,"div",0),n.YNc(1,s,2,0,"div",1),n.YNc(2,p,2,3,"mat-icon",2),n.YNc(3,l,3,3,"span",3),n.YNc(4,t,3,3,"span",3),n.TgZ(5,"div",4),n.YNc(6,w,5,3,"div",1),n.TgZ(7,"button",5),n.NdJ("click",function(){return E.cancel()}),n.TgZ(8,"mat-icon",6),n._uU(9,"close"),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&x&&(n.xp6(1),n.Q6J("ngIf",E.toastModel.showProgressIndicator),n.xp6(1),n.Q6J("ngIf",E.toastModel.icon),n.xp6(1),n.Q6J("ngIf",E.toastModel.textContent),n.xp6(1),n.Q6J("ngIf",E.toastModel.textContentUseTranslate),n.xp6(2),n.Q6J("ngIf",E.toastModel.button))},directives:[m.O5,y.lW,T.Hw,r.$g],pipes:[a.X$,m.gd],styles:[".mat-toast-content[_ngcontent-%COMP%]{display:flex;margin:8px 16px;background-color:inherit}.mat-toast-content[_ngcontent-%COMP%]   .common-toast-close-icon[_ngcontent-%COMP%]{width:16px!important;height:16px!important;line-height:16px!important}.mat-toast-content[_ngcontent-%COMP%]   .toast-item-container[_ngcontent-%COMP%]{align-self:center}.mat-toast-content[_ngcontent-%COMP%]   .toast-ellipsis-text[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:-webkit-box;align-self:center;-webkit-box-orient:vertical;-webkit-line-clamp:3}.mat-toast-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{align-self:center}.mat-toast-content[_ngcontent-%COMP%]   .button-alignment[_ngcontent-%COMP%]{display:flex;align-self:flex-end}.isLtr[_nghost-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .button-alignment[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .button-alignment[_ngcontent-%COMP%]{margin-left:auto}html[dir=ltr][_ngcontent-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .button-alignment[_ngcontent-%COMP%]{--dummy3: 0;margin-left:auto}.isRtl[_nghost-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .button-alignment[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .button-alignment[_ngcontent-%COMP%]{margin-right:auto}html[dir=rtl][_ngcontent-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .button-alignment[_ngcontent-%COMP%]{--dummy3: 0;margin-right:auto}.isLtr[_nghost-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .toast-model-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .toast-model-icon[_ngcontent-%COMP%]{padding-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .toast-model-icon[_ngcontent-%COMP%]{--dummy2: 0;padding-right:16px}.isRtl[_nghost-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .toast-model-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .toast-model-icon[_ngcontent-%COMP%]{padding-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .toast-model-icon[_ngcontent-%COMP%]{--dummy2: 0;padding-left:16px}.isLtr[_nghost-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .toast-ellipsis-text[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .toast-ellipsis-text[_ngcontent-%COMP%]{padding-right:32px}html[dir=ltr][_ngcontent-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .toast-ellipsis-text[_ngcontent-%COMP%]{--dummy2: 0;padding-right:32px}.isRtl[_nghost-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .toast-ellipsis-text[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .toast-ellipsis-text[_ngcontent-%COMP%]{padding-left:32px}html[dir=rtl][_ngcontent-%COMP%]   .mat-toast-content[_ngcontent-%COMP%]   .toast-ellipsis-text[_ngcontent-%COMP%]{--dummy2: 0;padding-left:32px}"]}),I})();class u{constructor(){}}const o_defaultPosition_horizontal="start",o_defaultPosition_vertical="bottom";let f=(()=>{class I{constructor(x){this.snackBar=x}showToast(x,E){const P=new i.u_;P.horizontalPosition=E.horizontalPosition||o_defaultPosition_horizontal,P.verticalPosition=E.verticalPosition||o_defaultPosition_vertical,(!!(0,D.isNil)(E.autoHide)||E.autoHide)&&(P.duration=E.hideDelay||5e3),P.data={toastModel:E,viewContainerRef:x,matSnackBar:this.snackBar},P.panelClass=["toast","nv-hig"];const O=this.snackBar.openFromComponent(h,P);return O.afterDismissed().subscribe(()=>{x.clear()}),!!O}}return I.\u0275fac=function(x){return new(x||I)(n.Y36(i.ux))},I.\u0275cmp=n.Xpm({type:I,selectors:[["lib-toast"]],decls:1,vars:0,consts:[[1,"nv-toast-container"]],template:function(x,E){1&x&&n._UZ(0,"div",0)},encapsulation:2}),I})(),c=(()=>{class I{constructor(x,E){this.factoryResolver=x,this.translate=E}show(x,E){return this.showToast(x,E)}showOffline(x,E){return this.translate.get("toastMessages.offline").subscribe(P=>{E.textContent=P,E.icon="cloud_off",this.showToast(x,E)}),!0}showProgress(x,E){return E.showProgressIndicator=!0,this.showToast(x,E)}showWarning(x,E){return E.icon="warning",this.showToast(x,E)}showError(x,E){return E.icon="error outline",this.showToast(x,E)}showToast(x,E){const P=this.factoryResolver.resolveComponentFactory(f);return!!x&&(x.clear(),x.createComponent(P).instance.showToast(x,E))}}return I.\u0275fac=function(x){return new(x||I)(n.LFG(n._Vd),n.LFG(a.sK))},I.\u0275prov=n.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),g=(()=>{class I{}return I.\u0275fac=function(x){return new(x||I)},I.\u0275mod=n.oAB({type:I}),I.\u0275inj=n.cJS({imports:[[i.ZX,T.Ps,y.ot,m.ez,r.Cq,a.aw]]}),I})()},3076:(He,de,e)=>{"use strict";e.d(de,{Rf:()=>A,Px:()=>U,y$:()=>S,eQ:()=>a,YV:()=>l,kE:()=>F,Gb:()=>r,O_:()=>p,qW:()=>fe,h$:()=>x,IM:()=>E,rV:()=>ye,gF:()=>G,M_:()=>B,Rl:()=>f,a_:()=>ae,f6:()=>me,KF:()=>g,dK:()=>ue,bw:()=>X,c1:()=>c,f0:()=>I,fO:()=>$,D5:()=>w});var n=e(80226),i=e(81134),D=e(12702),m=e(90490),y=e(98636);class T extends n.t{constructor(K){super(K),this.lastValue=null}getValue(){return this.lastValue}setValue(K){this.lastValue=K}next(K){this.lastValue=K,super.next(K)}clear(){this.lastValue=null}}class r{constructor(K,Z=!0,L=!0,W=!0,te=-1){this.workerFn=K,this.cacheLastResult=L,this.clearCacheOnRefresh=W,this.cacheLifeTime=te,this.internalSubject=null,this.subscription=null,Z||this.get$()}refresh(){const K=new n.t(1);this.cacheLastResult&&this.internalSubject instanceof T&&this.clearCacheOnRefresh&&this.internalSubject.clear();const Z=this.ensureEntryIsInitialized(!0);return Z&&this.pipeNewDataToReplaySubject(Z,K),K.asObservable()}setData(K,Z=!1){this.internalSubject instanceof T&&this.internalSubject.setValue(K),Z&&(this.ensureEntryIsInitialized(!1),this.pipeNewDataToReplaySubject((0,i.of)(K),null))}getData(){return this.internalSubject instanceof T?this.internalSubject.getValue():null}get$(){const K=this.ensureEntryIsInitialized(!1);return K&&this.pipeNewDataToReplaySubject(K,null),this.internalSubject.asObservable()}pipeNewDataToReplaySubject(K,Z){(0,D.H)(0).pipe((0,y.b)(L=>this.subscription=K.subscribe(W=>{Z&&Z.next(W),this.internalSubject&&this.internalSubject.next(W),this.cacheLastResult&&this.cacheLifeTime>=0&&(0,D.H)(this.cacheLifeTime).subscribe(()=>{this.internalSubject=null})},W=>{const te=this.internalSubject;this.subscription&&this.subscription.unsubscribe(),this.internalSubject=null,Z&&Z.error(W),te&&te.error(W)}))).subscribe()}ensureEntryIsInitialized(K){if(K||!this.internalSubject)return this.subscription&&this.subscription.unsubscribe(),this.internalSubject||(this.internalSubject=this.createNewSubject()),this.workerFn()}createNewSubject(){return this.cacheLastResult?new T(1):new n.t(1)}}class a{constructor(K,Z=!0,L=!0,W=!0){this.workerFn=K,this.lazyInit=Z,this.cacheLastResult=L,this.clearCacheOnRefresh=W,this.eventStreamMap=new Map}refresh(K){return this.ensureMapEntryExists(K),this.eventStreamMap.get(K).refresh()}refreshAll(){const K=[];return this.eventStreamMap.forEach((Z,L)=>{K.push(Z.refresh())}),(0,m.$R)(...K)}setData(K,Z,L=!1){this.ensureMapEntryExists(K),this.eventStreamMap.get(K).setData(Z,L)}getData(K){return this.ensureMapEntryExists(K),this.eventStreamMap.get(K).getData()}get$(K){return this.ensureMapEntryExists(K),this.eventStreamMap.get(K).get$()}ensureMapEntryExists(K){this.eventStreamMap.has(K)||this.eventStreamMap.set(K,new r(()=>this.workerFn(K),this.lazyInit,this.cacheLastResult,this.clearCacheOnRefresh))}}var s=e(2316);let p=(()=>{class j{createStream(Z,L=!0,W=!0,te=!0,ie=-1){return new r(Z,L,W,te,ie)}}return j.\u0275fac=function(Z){return new(Z||j)},j.\u0275prov=s.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})(),l=(()=>{class j{createStream(Z){return new a(Z)}}return j.\u0275fac=function(Z){return new(Z||j)},j.\u0275prov=s.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})();var t=e(202);function w(j){let K="";return j.forEach((Z,L)=>{!Z.startsWith("/")&&0!==L&&(K+="/"),Z.endsWith("/")?K+=Z.slice(0,Z.length-1):K+=Z}),K}let u=(()=>{class j{static getUuid(){return j.uuid}static refreshUuid(){j.uuid=o()}}return j.uuid=null,j})();function o(){let j=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Z){const L=(j+16*Math.random())%16|0;return j=Math.floor(j/16),("x"===Z?L:3&L|8).toString(16)})}function f(j=!1){return j?u.getUuid():o()}function c(j,K){return Error(`InvalidPipeArgument: '${K}' for pipe '${j.toString()}'`)}function g(j,K){let Z=j&&"string"!=typeof j?JSON.stringify(j):j||"";return K&&(Z=Z.substr(0,K)),Z}function I(j){return!((0,t.isNil)(j)||(0,t.isNil)(j.status)||0!==j.status&&-100!==j.status)}function G(j,K,Z,L){let W="";for(const Q of L)try{W+="string"==typeof Q?Q:JSON.stringify(Q,null,"\t"),W+=" "}catch(k){}return`${Z.transform(new Date,"yyyy-MM-dd HH:mm:ss.SSS")} ${[K]}  ${j}  ${W}`}function x(j,K,Z){return Z&&(j=window.encodeURIComponent(j)),K&&(j=window.unescape(j)),window.btoa(j)}function E(j){return j?Object.assign({},j):null}u.refreshUuid();var P=e(82516),v=e(89919),O=e(67202),C=e(1143),_=e(83720);let F=(()=>{class j{constructor(){}onlineStatusChanged(){const Z=(0,P.R)(window,"online").pipe((0,O.h)(!0)),L=(0,P.R)(window,"offline").pipe((0,O.h)(!1));return(0,v.T)(Z,L).pipe((0,C.O)(window.navigator.onLine),(0,_.x)())}isOnline(){return window.navigator.onLine}}return j.\u0275fac=function(Z){return new(Z||j)},j.\u0275prov=s.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})();const V=[];function b(j,K,Z){for(;0!==V.length;){const L=`${K.transform(new Date,"yyyy-MM-dd HH:mm:ss.SSS")} ${[j]} ${Z[0]} ${V[V.length-1]} ${A.close}`;console.log(L),V.pop()}}function B(j,K,Z,L){if(L.length>=3&&L[1].includes("Tracer"))if(V[V.length-1]!==L[1]){if(L[2]===A.close){const te=`${Z.transform(new Date,"yyyy-MM-dd HH:mm:ss.SSS")} ${[K]} ${L[0]} ${V[V.length-1]} ${L[2]}`;V.pop(),console.log(te),V.length&&V.pop()}else L[2]===A.open&&V.includes(L[1])&&b(K,Z,L);V.push(L[1])}else V[V.length-1]===L[1]&&V.pop();else if("Clicked on Back button"===L[1])return void b(K,Z,L);return G(j,K,Z,L)}var U=(()=>{return(j=U||(U={})).EvidencePanel="EvidencePanelTracer",j.Search="SearchTracer",j.SeeMore="SeeMoreTracer",j.UserInfo="UserDetails",j.Login="LoginTracer",j.Settings="SettingsTracer",j.Feedback="FeedbackTracer",U;var j})(),A=(()=>{return(j=A||(A={})).open="Opened",j.close="Closed",A;var j})(),S=(()=>{return(j=S||(S={})).UserGesture="UserGesture",j.Endpoint="EndPoint",j.Errormessage="ErrorMessage",j.PushNotification="PushNotification",j.UserDetails="UserDetails",S;var j})(),Y=e(61786),se=(()=>((se||(se={})).EdenResume="http://samsung.com/appcontrol/operation/eden_resume",se))(),fe=(()=>{return(j=fe||(fe={})).PlatformCoreCpuArch="http://tizen.org/feature/platform.core.cpu.arch",j.ModelName="http://tizen.org/system/model_name",fe;var j})();function $(){return"tizen"in window}function ae(j){var K;if(j.operation===se.EdenResume)return null===(K=j.data.find(Z=>"PAYLOAD"===Z.key))||void 0===K?void 0:K.value[0]}function me(){return null==tizen?void 0:tizen.application.getCurrentApplication().getRequestedAppControl()}function ye(){null==tizen||tizen.application.getCurrentApplication().exit()}function ue(j){try{return null==tizen?void 0:tizen.systeminfo.getCapability(j)}catch(K){return}}function X(){return $()?new Y.y(j=>{null==tizen||tizen.systeminfo.getPropertyValue("NETWORK",K=>{j.next(K.networkType),j.complete()})}):(0,i.of)(void 0)}},68991:(He,de,e)=>{"use strict";e.d(de,{_B:()=>i,Ju:()=>D,T0:()=>m,IM:()=>y,$s:()=>T,Lo:()=>r,oY:()=>a,iX:()=>s,LH:()=>p,hV:()=>t,_3:()=>w,$A:()=>h,u9:()=>u,dA:()=>o,IS:()=>f,JH:()=>c,ef:()=>I,R$:()=>x,TB:()=>E,tP:()=>P,tX:()=>v,wG:()=>C,Yy:()=>_});var n=e(56226),i=(()=>{return(F=i||(i={}))[F.GameItem=0]="GameItem",F[F.FilterItem=1]="FilterItem",i;var F})(),D=(()=>{return(F=D||(D={})).None="NONE",F.FilterTile="FILTER_TILE",F.SeeMore="SEE_MORE",F.Deeplink="DEEPLINK",F.FilterPanel="FILTER_PANEL",F.FilterChips="FILTER_CHIPS",F.AddFilter="ADD_FILTER",F.RemoveFilter="REMOVE_FILTER",F.LibraryItemRemoved="LIBRARY_ITEM_REMOVED",F.SortOrderChanged="SORT_ORDER_CHANGED",F.ClearAll="CLEAR_ALL",F.DataUpdated="DATA_UPDATED",F.Marquee="MARQUEE",F.SearchResultsUpdated="SEARCH_RESULTS_UPDATED",D;var F})(),m=(()=>{return(F=m||(m={})).AllGames="AllGames",F.MyLibrary="MyLibrary",m;var F})();const y={serializedFilters:[],hierarchy:D.None};var T=(()=>{return(F=T||(T={}))[F.Loading=0]="Loading",F[F.Ready=1]="Ready",F[F.Error=2]="Error",F[F.Login=3]="Login",F[F.EmptyLibrary=4]="EmptyLibrary",T;var F})(),r=(()=>{return(F=r||(r={})).GenericError="common.genericLoadError",F.ConnectionError="common.connectionError",F.LoginRequired="layout.myLibraryLoginRequiredMessage",F.EmptyLibrary="layout.emptyLibraryMessage",r;var F})();class a{constructor(V,b){this.pointOfFailure=V,this.err=b}get failurePoint(){return this.pointOfFailure}get error(){return this.err}}a.ErrorPlaceholder=new a;var s=(()=>{return(F=s||(s={})).AppsFetch="AppsListFetch",F.AppMetadataFetch="AppMetadataFetch",F.LayoutFetch="LayoutFetch",F.FilterGroupListFetch="FilterGroupListFetch",s;var F})();class p extends n.xv{constructor(){super("Got Empty layout for non-personalized data:",{})}}var t=(()=>{return(F=t||(t={}))[F.GameTileWidth=154]="GameTileWidth",F[F.GameTileHeight=218]="GameTileHeight",F[F.WideTileWidth=272]="WideTileWidth",F[F.WideTileHeight=153]="WideTileHeight",F[F.MobileRenderingWidth=256]="MobileRenderingWidth",t;var F})(),w=(()=>{return(F=w||(w={})).WideTileImageFallback="assets/img/DefaultGameArt.png",F.GameTileImageFallback="assets/img/DefaultGameArt-BoxArt.jpg",w;var F})();const h=200,u=500,o=.563;var f=(()=>{return(F=f||(f={})).FadeIn="FadeIn",F.BottomSlideIn="BottomSlideIn",f;var F})(),c=(()=>{return(F=c||(c={}))[F.AtoZ=0]="AtoZ",F[F.ZtoA=1]="ZtoA",F[F.Relevance=2]="Relevance",c;var F})();const I=300,x=2500,E=400,P=3e3,v=1e4,C="GfnPcOpenPlatform";var _=(()=>{return(F=_||(_={}))[F.Wide=0]="Wide",F[F.Tall=1]="Tall",F[F.Filter=2]="Filter",_;var F})()},17452:(He,de,e)=>{"use strict";e.d(de,{M:()=>I});var n=e(6484),i=e(12556),D=e(79441),m=e(45871),y=e(81134),T=e(61486),r=e(85816),a=e(98636),s=e(33927),p=e(18293),l=e(53466),t=e(71435),w=e(92597),h=e(9170),u=e(67202),o=e(202),c=e(68991),g=e(73159);class I{constructor(x,E,P,v,O,C,_,F,V,b,B,U,A,S,Y,se,fe,$,ae){var me,ye;this.metaData=x,this.loggingService=E,this.networkStatusService=P,this.launchService=v,this.idmService=O,this.idmLoginService=C,this.ecomService=_,this.dialogService=F,this.nesLayoutService=V,this.lcarsService=b,this.telemetryUtilService=B,this.platformPreferenceService=U,this.gameShareUrlService=A,this.ownershipSyncService=S,this.appConfig=Y,this.gfnSdkService=se,this.unsupportedBrowserService=fe,this.pathService=$,this.streamingProfileService=ae,this.genreUILabels=[],this.mobileMode=!1,this.visible=!0,this.clientSupportKBMouseGames=!0,this.metaDataUpdated=new D.xQ,this.metaDataUpdated$=this.metaDataUpdated.asObservable(),this.logger=this.loggingService.getLogger("ApplicationClass"),!this.isMultiPlatformGame()&&this.metaData.variants&&this.setPlatformPrefernceForSinglePlatform(),this.mobileMode=!!(null===(me=null==Y?void 0:Y.featureEnablement)||void 0===me?void 0:me.mobileMode),this.clientSupportKBMouseGames=null===(ye=this.appConfig.client)||void 0===ye?void 0:ye.supportsKeyboardMouseGames,this.mobileMode&&this.overrideSupportedControls()}static onIsInLibraryChanged(){return this.isInLibraryChangedSubject.asObservable()}overrideSupportedControls(){var x;null===(x=this.metaData.variants)||void 0===x||x.forEach(E=>{!this.lcarsService.isFeatureSupportedOnVariant(E,i.xAh[i.xAh.OVERRIDE_TOUCH_ENABLED])||(E.supportedControls?E.supportedControls.includes(i.BwP.TOUCHSCREEN)||E.supportedControls.push(i.BwP.TOUCHSCREEN):E.supportedControls=[i.BwP.TOUCHSCREEN])})}parseDate(x){if(x){const E=new Date(x);return`${E.toLocaleString("default",{month:"short"})} ${E.getDate()}, ${E.getFullYear()}`}return""}get data(){return this.metaData}get boxArtImage(){return this.images.GAME_BOX_ART}get id(){return this.metaData.id}get visibility(){return this.visible}set visibility(x){this.visible=x}get appStore(){var x;return(null===(x=this.metaData.selectedPlatformVariant)||void 0===x?void 0:x.appStore)?this.metaData.selectedPlatformVariant.appStore:this.metaData.appStore}get appStoreInfo(){return i.vAT.getStoreInfoForAppstore(this.appStore)}get releaseDate(){var x,E,P,v,O;const C=(null===(P=null===(E=null===(x=this.metaData)||void 0===x?void 0:x.selectedPlatformVariant)||void 0===E?void 0:E.gfn)||void 0===P?void 0:P.releaseDate)||(null===(O=null===(v=this.metaData)||void 0===v?void 0:v.computedValues)||void 0===O?void 0:O.earliestReleaseDate);return this.parseDate(C)}get streetDate(){var x,E,P,v;const O=(null===(E=null===(x=this.metaData)||void 0===x?void 0:x.selectedPlatformVariant)||void 0===E?void 0:E.streetDate)||(null===(v=null===(P=this.metaData)||void 0===P?void 0:P.computedValues)||void 0===v?void 0:v.earliestStreetDate);return this.parseDate(O)}get action(){return this.metaData.action}get body(){return this.metaData.body}get digitalStoresInfo(){return this.fetchMultiPlatformDigitalStores()}get combinedLabel(){return this.digitalStoresInfo.map(x=>{var E;return(null==x?void 0:x.label)!==i.rVM?null==x?void 0:x.label:null===(E=this.metaData)||void 0===E?void 0:E.publisherName}).join(", ")}get contentRatings(){return this.metaData.contentRatings}get developerName(){var x;return(null===(x=this.metaData.selectedPlatformVariant)||void 0===x?void 0:x.developerName)?this.metaData.selectedPlatformVariant.developerName:this.metaData.developerName}get displaysOwnRatingDuringGameplay(){var x;return(null===(x=this.metaData.selectedPlatformVariant)||void 0===x?void 0:x.displaysOwnRatingDuringGameplay)?this.metaData.selectedPlatformVariant.displaysOwnRatingDuringGameplay:this.metaData.displaysOwnRatingDuringGameplay}get genres(){var x,E,P,v;return(null===(x=this.genreUILabels)||void 0===x?void 0:x.length)?this.genreUILabels:(0,o.isEmpty)(i.vAT.genreDefinitionsMap)?(null===(v=this.metaData)||void 0===v?void 0:v.genres)?this.metaData.genres:[]:(null===(P=null===(E=this.metaData)||void 0===E?void 0:E.genres)||void 0===P||P.forEach(O=>{i.vAT.genreDefinitionsMap.has(O)&&this.genreUILabels.push(i.vAT.genreDefinitionsMap.get(O))}),this.genreUILabels)}get images(){return this.metaData.images}get keywords(){var x;return(null===(x=this.metaData.computedValues)||void 0===x?void 0:x.allKeywords)?this.metaData.computedValues.allKeywords:[]}get longDescription(){return this.metaData.longDescription}get maxOnlinePlayers(){return this.metaData.maxOnlinePlayers}get maxLocalPlayers(){return this.metaData.maxLocalPlayers}get marqueeScrimPrimaryRGB(){return this.metaData.marqueeScrimPrimaryRGB}get publisherName(){var x;return((null===(x=this.metaData.selectedPlatformVariant)||void 0===x?void 0:x.publisherName)?this.metaData.selectedPlatformVariant.publisherName:this.metaData.publisherName)||""}get shortName(){var x;return(null===(x=this.metaData.selectedPlatformVariant)||void 0===x?void 0:x.shortName)?this.metaData.selectedPlatformVariant.shortName:this.metaData.id}get telemetryId(){var x,E;return null!==(E=null===(x=this.metaData.selectedPlatformVariant)||void 0===x?void 0:x.id)&&void 0!==E?E:this.metaData.id}get sortName(){return this.metaData.sortName}get supportedControls(){var x,E;return null!==(E=null===(x=this.metaData.selectedPlatformVariant)||void 0===x?void 0:x.supportedControls)&&void 0!==E?E:this.metaData.supportedControls}get shortDescription(){return this.metaData.shortDescription}get title(){return this.metaData.title}get itemType(){return c._B.GameItem}get type(){return this.metaData.type}get fencedStatus(){var x,E;return(null===(E=null===(x=this.metaData.selectedPlatformVariant)||void 0===x?void 0:x.gfn)||void 0===E?void 0:E.status)?this.metaData.selectedPlatformVariant.gfn.status:i.zu9.UNAVAILABLE}get variants(){return this.metaData.variants}getAppStoreVariant(x){return this.metaData.variants.find(E=>E.appStore===x)}get selectedPlatformVariant(){return this.metaData.selectedPlatformVariant}setSelectedPlatformVariant(x){this.metaData.selectedPlatformVariant=x}get isInLibrary(){return this.metaData.variants.some(x=>x.gfn.isInLibrary)}get isInputControlsSupported(){return this.checkInputSupported()}get isNvidiaStoreGame(){return this.appConfig.client.nvidiaStores.some(x=>x===this.selectedPlatformVariant.appStore.toUpperCase())}updateFencedStatus(x,E){this.metaData.variants.map(P=>{P.id===x&&(P.gfn.status=E)}),this.metaDataUpdated.next(),this.logger.info(`Update patching info for id: ${this.metaData.id} cmsId:[${x}] as ${E}`)}updateData(x){if(this.metaData.variants&&this.metaData.variants.length!==x.variants.length){const E=this.metaData.variants;this.metaData.variants=[];for(let P=0;P<x.variants.length;++P){let v=0;for(;v<E.length;++v)if(x.variants[P].id===E[v].id){this.metaData.variants.push((0,o.merge)(E[v],x.variants[P]));break}v===E.length&&this.metaData.variants.push(x.variants[P])}}this.metaData=(0,o.merge)(this.metaData,x),!this.isMultiPlatformGame()&&this.metaData.variants&&this.setPlatformPrefernceForSinglePlatform(),this.mobileMode&&this.overrideSupportedControls(),this.metaDataUpdated.next()}launch(x,E){if(this.gameLaunch$)return this.logger.info(`Launch game already in progress, returning: ${this.metaData.title} [${this.metaData.id}]`),this.gameLaunch$;this.logger.info(`Launch game ${this.metaData.title} [${this.metaData.id}]`);let P=null,v=Date.now(),O=!1;const C=new D.xQ;return this.gameLaunch$=this.checkNetworkStatus().pipe((0,r.zg)(_=>this.pwaGuardCheck()),(0,r.zg)(_=>this.unsupportedBrowserCheck()),(0,r.zg)(_=>this.checkAuthentication(x)),(0,a.b)(_=>{O=O||_.dialogShown}),(0,r.zg)(_=>this.entitlementCheck(E)),(0,r.zg)(_=>this.fetchSelectedCmsId(E)),(0,r.zg)(_=>(P=parseInt(_.returnValue,10),O=O||_.dialogShown,this.checkFencedtatus())),(0,r.zg)(_=>this.launchService.checkAccountLinking(this.appStore,P).pipe((0,r.zg)(F=>F.returnValue?(0,y.of)(F):(0,m._)("User canceled game launch because account not linked.")))),(0,r.zg)(_=>(O=O||_.dialogShown,this.checkForGamepadNeeded())),(0,s.U)(_=>(O=O||_.dialogShown,this.telemetryUtilService.sendClickEvent(i.lzt.LaunchGame,this.telemetryId,E,!0),this.gameShareUrlService.updateShareUrlInfo(this.metaData.id,this.metaData.images.TV_BANNER))),(0,r.zg)(_=>(v=O?Date.now():v,this.launchVariantGame(P,v))),(0,a.b)(_=>{C.next(_)}),(0,p.K)(_=>{var F,V;const b=`Error while launching ${null===(F=this.metaData)||void 0===F?void 0:F.title} cmsID: ${null===(V=this.metaData.selectedPlatformVariant)||void 0===V?void 0:V.id}`;return _.isIntentionalAbort?this.logger.info(b,_):this.logger.error(b,_),C.next(!1),(0,y.of)(_)}),(0,l.q)(1),(0,t.x)(()=>{this.gameLaunch$=null,C.complete()}),(0,w.d)(1)),this.gameLaunch$.subscribe(),C.asObservable()}checkFencedtatus(){return this.fencedStatus===i.zu9.SERVER_MAINTENANCE||this.fencedStatus===i.zu9.PATCHING?(this.dialogService.openFencedStatusErrorDialog(this.fencedStatus),(0,m._)(`Game is under ${this.fencedStatus}`)):(0,y.of)(!0)}checkForGamepadNeeded(){if(!this.clientSupportKBMouseGames){const x=this.supportedControls;if(this.mobileMode&&(null==x?void 0:x.includes(i.BwP.TOUCHSCREEN)))return(0,y.of)(this.getLaunchStepResult(!0,!1));if((null==x?void 0:x.includes(i.BwP.DIRECT_INPUT_GAMEPAD))||(null==x?void 0:x.includes(i.BwP.X_INPUT_GAMEPAD))||(null==x?void 0:x.includes(i.BwP.GAMEPAD))||(null==x?void 0:x.includes(i.BwP.DIRECT_INPUT_GAMEPAD_PARTIAL))||(null==x?void 0:x.includes(i.BwP.X_INPUT_GAMEPAD_PARTIAL))||(null==x?void 0:x.includes(i.BwP.GAMEPAD_PARTIAL)))return this.dialogService.openGamepadRequiredDialog().pipe((0,r.zg)(E=>E?(0,y.of)(this.getLaunchStepResult(!0,!0)):(0,m._)({errorString:"User canceled the launch from requires a gamepad dialog.",isIntentionalAbort:!0})))}return(0,y.of)(this.getLaunchStepResult(!0,!1))}get launchMode(){var x;return this.mobileMode&&(null===(x=this.supportedControls)||void 0===x?void 0:x.includes(i.BwP.TOUCHSCREEN))?i.xld.TouchFriendly:i.xld.Default}launchVariantGame(x,E){return this.launchService.setGameLaunchData(E,this.shortName),this.lcarsService.setMetadataForCmsId(x,this.metaData),this.ownershipSyncService.isAccountLinkEnabledForGame(this.appStore,x).pipe((0,r.zg)(P=>{var v,O;return this.launchService.launchStreamer(x,this.shortName,this.launchMode,E,P,void 0,void 0,void 0,void 0,this.metaData.title,null===(O=null===(v=this.metaData)||void 0===v?void 0:v.images)||void 0===O?void 0:O.HERO_IMAGE)}),(0,s.U)(P=>(this.logger.info("Launched status - ",P),this.telemetryUtilService.sendUserSessionEvent(i.Vwu.LaunchGame,P?i.N3X.Success:i.N3X.Failure,E),P)),(0,p.K)(P=>(this.logger.error("Launch failed:",P),this.telemetryUtilService.sendUserSessionEvent(i.Vwu.LaunchGame,i.N3X.Failure,E,P),(0,m._)(P))))}setPlatformPrefernceForSinglePlatform(){this.metaData.selectedPlatformVariant=this.metaData.variants[0]}getStoresLabel(x){const E=x.appStoreInfo.label;return E===i.rVM?x.publisherName:E}addToLibrary(x,E){if(this.addToLibrary$)return this.logger.info(`Add game to library for ${this.metaData.title}  [${this.metaData.id}], already in progress, returning`),this.addToLibrary$;this.logger.info(`Add game to library for ${this.metaData.title}  [${this.metaData.id}]`);const P=Date.now();let v=null;const O=new D.xQ;return this.addToLibrary$=this.checkNetworkStatus().pipe((0,r.zg)(C=>this.checkAuthentication(x)),(0,r.zg)(C=>this.fetchSelectedCmsId(E)),(0,r.zg)(C=>(v=C.returnValue,this.addVariantToLibrary(v,P))),(0,a.b)(C=>{this.fetchMissingFields().subscribe(),this.updateLibraryStatus(v,!0),this.telemetryUtilService.sendClickEvent(i.lzt.AddGameToLibrary,this.telemetryId,E,!0),I.isInLibraryChangedSubject.next(this),O.next(!0)}),(0,p.K)(C=>{var _;return this.logger.error(`Error while adding game to library for ${this.metaData.title} cmsID: ${null===(_=this.metaData.selectedPlatformVariant)||void 0===_?void 0:_.id}`,C),O.next(!1),(0,y.of)(C)}),(0,l.q)(1),(0,t.x)(()=>{this.addToLibrary$=null,O.complete()}),(0,w.d)(1)),this.addToLibrary$.subscribe(),O.asObservable()}removeFromLibrary(x,E){if(this.removefromLibrary$)return this.logger.info(`Remove desktop shortcut already in progress for ${this.metaData.title} [${this.metaData.id}], returning`),this.removefromLibrary$;this.logger.info(`Remove game from library for ${this.metaData.title} [${this.metaData.id}]`);const P=Date.now();this.telemetryUtilService.sendClickEvent(i.lzt.UninstallGame,this.telemetryId,E,!0);const v=new D.xQ;return this.removefromLibrary$=this.checkNetworkStatus().pipe((0,r.zg)(O=>this.removeMultipleGames(P)),(0,r.zg)(O=>(I.isInLibraryChangedSubject.next(this),this.removePlatformPreference(x))),(0,a.b)(O=>{v.next(!0)}),(0,p.K)(O=>{var C;return this.logger.error(`Error while removing game from library for ${this.metaData.title} cmsID: ${null===(C=this.metaData.selectedPlatformVariant)||void 0===C?void 0:C.id}`,O),v.next(!1),(0,y.of)(O)}),(0,l.q)(1),(0,t.x)(()=>{this.removefromLibrary$=null,v.complete()}),(0,w.d)(1)),this.removefromLibrary$.subscribe(),v.asObservable()}addDesktopShortCut(x,E){var P,v;if(this.addDesktopShortcut$)return this.logger.info(`Add desktop shortcut already in progress for for parentGameId:${this.metaData.id}, cmsId: ${null===(P=this.metaData.selectedPlatformVariant)||void 0===P?void 0:P.id}, returning`),this.addDesktopShortcut$;this.logger.info(`Adding Desktop Shortcut for parentGameId:${this.metaData.id}, cmsId: ${null===(v=this.metaData.selectedPlatformVariant)||void 0===v?void 0:v.id}`);const O=new D.xQ;return this.addDesktopShortcut$=this.checkAuthentication(x).pipe((0,r.zg)(C=>{const _={cmsId:this.metaData.selectedPlatformVariant.id,parentGameId:this.isMultiPlatformGame()?this.metaData.id:"",title:this.metaData.title,shortName:this.shortName,keyArtUrl:this.metaData.images.KEY_ART};return this.launchService.addDesktopShortcut(_,E)}),(0,s.U)(C=>C.installed),(0,a.b)(C=>{O.next(!0)}),(0,p.K)(C=>(this.logger.error("error while adding desktop shortcut platform",C),O.next(!1),(0,y.of)(C))),(0,l.q)(1),(0,t.x)(()=>{this.addDesktopShortcut$=null,O.complete()}),(0,w.d)(1)),this.addDesktopShortcut$.subscribe(),O.asObservable()}isMultiPlatformGame(){var x;return(null===(x=this.metaData.variants)||void 0===x?void 0:x.length)>1}onPlatformPreferenceSynced(x){this.isMultiPlatformGame()&&(this.metaData.selectedPlatformVariant=this.metaData.variants.find(E=>E.id===x)),this.metaDataUpdated.next()}fetchMultiPlatformDigitalStores(){return[...this.metaData.variants.map(x=>x.appStoreInfo)]}fetchMultiPlatformCMSIds(){return[...this.metaData.variants.map(x=>x.id)]}updateLibraryStatus(x,E){const P=this.metaData.variants.findIndex(v=>v.id===x);this.metaData.variants[P].gfn.isInLibrary=E}resetLibraryStatus(){var x;null===(x=this.metaData.variants)||void 0===x||x.forEach(E=>{E.gfn.isInLibrary=!1}),this.metaDataUpdated.next()}fetchMissingFields(){return this.metaData.hasOwnProperty("developerName")&&this.metaData.hasOwnProperty("contentRatings")?(0,y.of)(!1):this.lcarsService.getAppdata(this.metaData.id).pipe((0,r.zg)(x=>(this.updateData(x[0]),(0,y.of)(!0))),(0,p.K)(x=>(this.logger.error(`Error encountered while fetching app data : ${x}`),(0,y.of)(!1))))}checkNetworkStatus(){return this.networkStatusService.isOnline?(this.logger.info("User is Online"),(0,y.of)(!0)):(this.dialogService.openConnectionErrorDialog(),(0,m._)("User is offline"))}pwaGuardCheck(){return n.ng.isCefPlatform()?(0,y.of)(this.getLaunchStepResult(!0,!1)):this.unsupportedBrowserService.shouldDisplayPWAGuidance$.pipe((0,l.q)(1),(0,r.zg)(x=>x?(this.pathService.navigate([i.fFR.PwaWall],{skipLocationChange:!1}),(0,m._)("Gameplay is only allowed within PWA mode in this browser")):(0,y.of)(this.getLaunchStepResult(!0,!1))))}unsupportedBrowserCheck(){return n.ng.isCefPlatform()?(0,y.of)(this.getLaunchStepResult(!0,!1)):this.idmService.accountStatusChanged.pipe((0,l.q)(1),(0,r.zg)(x=>x.isAuthenticated?(0,y.of)(i.h6o.None):this.unsupportedBrowserService.unsupportedBrowserState$),(0,r.zg)(x=>x!==i.h6o.None?(this.dialogService.openUnsupportedBrowserDialog(x),(0,m._)("Gameplay is not allowed on unsupported system")):(0,y.of)(this.getLaunchStepResult(!0,!1))))}checkAuthentication(x){return this.idmService.accountStatusChanged.pipe((0,l.q)(1),(0,r.zg)(E=>E.isAuthenticated?(this.logger.info("User is LoggedIn"),(0,y.of)(this.getLaunchStepResult(!0,!1))):this.gfnSdkService.getAuthType().pipe((0,r.zg)(P=>{if(P===g.Gr.JWT)return this.logger.info("Skipping login dialog because this is an sdk session with provided credentials, but an anonymous user"),(0,y.of)(this.getLaunchStepResult(!0,!0));this.logger.info("User not logged in, opening alert dialog");const v=this.telemetryUtilService.getJoinTodayAlertDialogHierarchy(x,this.id);return this.dialogService.openJoinTodayAlertDialog(x,v).pipe((0,r.zg)(O=>O===i.V__.Login?this.idmLoginService.login(i.CGJ.ScreenAccountMenu).pipe((0,r.zg)(C=>C?(this.logger.info("Login successful"),(0,y.of)(this.getLaunchStepResult(C,!0))):(0,m._)("Login was not successful."))):(0,m._)("Login cancelled")))}))))}getLaunchStepResult(x,E){return{returnValue:x,dialogShown:E}}entitlementCheck(x){return this.ecomService.getUserMembership().pipe((0,h.h)(E=>E.membershipStatus!==i.Tn6.LoggedOut&&E.membershipStatus!==i.Tn6.UnKnown),(0,l.q)(1),(0,r.zg)(E=>E.eComFeatureEnabled&&E.membershipStatus===i.Tn6.UnEntitled?(this.ecomService.openJoinNowDialog(x),(0,m._)("User is not entitled")):(this.logger.info("User is entitled"),(0,y.of)(!0))))}addVariantToLibrary(x,E){return this.nesLayoutService.addGameToLibrary(x).pipe((0,r.zg)(P=>(this.logger.info(`Successfully added ${this.shortName}[${x}]`),this.telemetryUtilService.sendUserSessionEvent(i.Vwu.AddGameToLibrary,i.N3X.Success,E),(0,y.of)(!0))),(0,p.K)(P=>(this.telemetryUtilService.sendUserSessionEvent(i.Vwu.AddGameToLibrary,i.N3X.Failure,E,P),(0,m._)(`Error encountered while adding ${this.shortName}[${x}] - ${P}`))))}removeMultipleGames(x){const E=this.metaData.variants.filter(v=>v.gfn.isInLibrary),P=[];return E.forEach(v=>{P.push(this.removeVariantFromLibrary(v.id,x).pipe((0,s.U)(O=>(this.updateLibraryStatus(v.id,!1),!0))))}),(0,T.aj)(P)}removeVariantFromLibrary(x,E){return this.nesLayoutService.removeGame(x).pipe((0,r.zg)(P=>(this.logger.info(`Successfully uninstalled ${this.shortName}[${x}]`),this.telemetryUtilService.sendUserSessionEvent(i.Vwu.UninstallGame,i.N3X.Success,E),(0,y.of)(!0))),(0,p.K)(P=>(this.logger.error(`Error encountered while removing ${this.shortName}[${x}]`,P),this.telemetryUtilService.sendUserSessionEvent(i.Vwu.UninstallGame,i.N3X.Failure,E,P),(0,m._)(`Error while removing ${this.shortName}[${x}]`))))}fetchSelectedCmsId(x){return this.isMultiPlatformGame()?this.checkForPlatformPreference():this.isNvidiaStoreGame?(this.logger.info("Game ownership dialog not opened for nvidia store games"),(0,y.of)(this.getLaunchStepResult(this.metaData.variants[0].id,!1))):this.dialogService.checkGameOwnershipDialog(this.appStoreInfo,this.isInLibrary,x).pipe((0,l.q)(1),(0,r.zg)(E=>E?(this.logger.info("Game ownership dialog closed (if open)"),(0,y.of)(this.getLaunchStepResult(this.metaData.variants[0].id,!0))):(0,m._)("Game ownership dialog dismissed")))}checkForPlatformPreference(){if(this.metaData.selectedPlatformVariant)return(0,y.of)(this.getLaunchStepResult(this.metaData.selectedPlatformVariant.id,!1));{let x=null;return this.dialogService.openMultiPlatformSelectionDialog(this.metaData.variants,this.id).pipe((0,r.zg)(E=>E?(x=E.id,this.addPlatformPreference(E.id)):(0,m._)("User cancelled the platform selection operation")),(0,r.zg)(E=>!0===E?(0,y.of)(this.getLaunchStepResult(x,!0)):(0,m._)("Preference not updated successfully")))}}addPlatformPreference(x,E=!1){if(this.addPlatformPreference$)return this.logger.info(`Add Platform Preference already in progress for: ${x}, returning`),this.addPlatformPreference$;this.logger.info("Add Platform Preference:",x),this.metaData.selectedPlatformVariant=this.metaData.variants.find(v=>v.id===x);const P=new D.xQ;return this.addPlatformPreference$=this.platformPreferenceService.addGamePlatformPreference(this.metaData.id,x,this.fetchMultiPlatformCMSIds()).pipe((0,u.h)(!0),(0,a.b)(v=>{P.next(!0)}),(0,p.K)(v=>(this.logger.error("Error saving the game variant preference."+v),P.next(!1),(0,y.of)(v))),(0,l.q)(1),(0,t.x)(()=>{this.addPlatformPreference$=null,P.complete()}),(0,w.d)(1)),this.addPlatformPreference$.subscribe(),P.asObservable()}removePlatformPreference(x){if(this.removePlatformPreference$)return this.removePlatformPreference$;if(this.isMultiPlatformGame()){const E=new D.xQ;return this.removePlatformPreference$=this.checkAuthentication(x).pipe((0,r.zg)(P=>(this.metaData.selectedPlatformVariant=null,this.platformPreferenceService.removeGamePlatformPreference(this.metaData.id,this.fetchMultiPlatformCMSIds()))),(0,a.b)(P=>{E.next(!0)}),(0,r.zg)(P=>(0,y.of)(!0)),(0,p.K)(P=>(this.logger.info("Error updating the game variant preference",P),E.next(!1),(0,y.of)(P))),(0,l.q)(1),(0,t.x)(()=>{this.removePlatformPreference$=null,E.complete()}),(0,w.d)(1)),this.removePlatformPreference$.subscribe(),E.asObservable()}return(0,y.of)(!0)}checkInputSupported(){var x,E;return!!this.clientSupportKBMouseGames||null!==(E=null===(x=this.supportedControls)||void 0===x?void 0:x.some(P=>P!==i.BwP.KEYBOARD&&P!==i.BwP.MOUSE&&P!==i.BwP.MOUSE_KEYBOARD))&&void 0!==E&&E}isFeatureSupportedOnGame(x){return this.variants.some(E=>this.lcarsService.isFeatureSupportedOnVariant(E,x))}featureSupportedOnSystem(x){switch(x){case i.xAh.RTX_ENABLED:return!0;case i.xAh.HDR_ENABLED:return this.streamingProfileService.IsPlatformSupportsHDRDecode}return!1}updateReadyFeatureDescription(x){switch(x.featureKey){case i.xAh.RTX_ENABLED:x.description="layout.evidenceMetadata.paidUserFeatureText",x.icon="check_circle";break;case i.xAh.HDR_ENABLED:this.streamingProfileService.IsPlatformSupportsHDRRendering?this.streamingProfileService.IsHdrToggleTurnedOff?(x.description="layout.evidenceMetadata.hdrFeatureSettingsTip",x.icon="info"):(x.description="layout.evidenceMetadata.paidUserFeatureText",x.icon="check_circle"):(x.description="layout.evidenceMetadata.hdrFeatureDisplayTip",x.icon="info")}}updateLockedFeatureDescription(x){switch(x.featureKey){case i.xAh.RTX_ENABLED:x.description="layout.evidenceMetadata.freeUserFeatureText";break;case i.xAh.HDR_ENABLED:x.description="layout.evidenceMetadata.hdrFeatureUnsubscibedUserUpsell"}x.icon="lock"}updateUnsupportedFeatureDescription(x){switch(x.featureKey){case i.xAh.HDR_ENABLED:x.description="settings.streamingProfiles.hdrSystemUnsupportedTip",x.icon="info",x.systemSupported=!1,x.showSeeWhyLink=!0}}updateFeatureLabel(x){switch(x.featureKey){case i.xAh.RTX_ENABLED:x.label="layout.evidenceMetadata.rtx";break;case i.xAh.HDR_ENABLED:x.label="settings.streamingProfiles.hdrStreaming"}}getFeaturebadgeDetails(x,E){if(this.updateFeatureLabel(x),E.membershipStatus===i.Tn6.Entitled){const P=this.featureSupportedOnSystem(x.featureKey);x.supportedOnSubscription=this.streamingProfileService.isFeatureSubscriptionAvailable(E,x.featureKey),x.supportedOnSubscription?(this.logger.info("Feature supported on game and available in subscription, featureKey: ",x.featureKey),P?this.updateReadyFeatureDescription(x):this.updateUnsupportedFeatureDescription(x)):(x.canUpsell=this.streamingProfileService.isFeatureUpsellAvailable(E,[x.featureUpsellKey])[0],x.canUpsell&&(this.logger.info("Feature supported on game and upsell in subscription, featureKey: ",x.featureKey),P?this.updateLockedFeatureDescription(x):this.updateUnsupportedFeatureDescription(x)))}else x.upsellToUnentitledUsers?(this.logger.info("Feature supported on game, display upsell for unentitled user: ",x.featureKey),this.updateUnentitledFeatureDescription(x)):this.logger.info("Feature supported on game, no upsell for unentitled user: ",x.featureKey)}updateUnentitledFeatureDescription(x){x.description="layout.evidenceMetadata.unknownUserFeatureText",x.icon="info"}getGameFeatures(x){this.featuresForBadge=(0,o.cloneDeep)(i.EvZ);const E=[];return this.featuresForBadge.forEach(P=>{this.isFeatureSupportedOnGame(i.xAh[P.featureKey])&&(this.getFeaturebadgeDetails(P,x),(P.supportedOnSubscription||P.canUpsell||P.upsellToUnentitledUsers)&&E.push(P))}),E}}I.isInLibraryChangedSubject=new D.xQ},74826:(He,de,e)=>{"use strict";e.d(de,{P:()=>W});var n=e(202),i=e(79441),D=e(76491),m=e(80226),y=e(90425),T=e(12702),r=e(28416),a=e(81134),s=e(61486),p=e(8117),l=e(89919),t=e(45871),w=e(89763),h=e(33927),u=e(9170),o=e(96330),f=e(1143),c=e(79902),g=e(98636),I=e(75428),G=e(8095),x=e(85816),E=e(53466),P=e(67202),v=e(18293),O=e(15347),C=e(17163),_=e(12556),F=e(54848),V=e(3076),b=e(17452),B=e(68991),S=e(71258),Y=e(43365),se=e(89166);class fe{constructor(ie,Q){this.filterItem=ie,this.loggingService=Q,this.visible=!0,this.logger=this.loggingService.getLogger("FilterTile")}get serializedFilters(){return this.filterItem.filters}get itemType(){return B._B.FilterItem}get boxArtImage(){return this.filterItem.image}get id(){return this.filterItem.id}get visibility(){return this.visible}set visibility(ie){this.visible=ie}get title(){return this.filterItem.title}updateData(ie){this.filterItem=ie}}var $=e(2316),ae=e(6484),me=e(43124),ye=e(68674),ue=e(58283),X=e(57390),j=e(73159);const Z="TriggerZoneChange",L=864e5;let W=(()=>{class te{constructor(Q,k,oe,N,q,Me,xe,ct,Se,Ge,St,Tt,Te,Je,xt,Ye,rt,ge,Ve,at,ve,Ze,Ie,$e,ze,_t,be,pt,Ot,Kt,nn){this.idmService=k,this.gridService=oe,this.nesLayoutService=N,this.localeService=q,this.networkStatusService=Me,this.telemetryService=xe,this.loggingService=ct,this.pushNotificationService=Se,this.dialogService=Ge,this.idmLoginService=St,this.launchService=Tt,this.telemetryUtilService=Te,this.ecomService=Je,this.translateService=xt,this.ownershipSyncService=Ye,this.appConfig=rt,this.lcarsService=ge,this.platformPreferenceService=Ve,this.sharedStorage=at,this.gameShareUrlService=ve,this.experienceControlService=Ze,this.router=Ie,this.windowService=$e,this.errorHandler=ze,this.gfnSdkService=_t,this.distributedTracingUtilService=be,this.unsupportedBrowserService=pt,this.refreshUiService=Ot,this.pathService=Kt,this.streamingProfileService=nn,this.libraryRefreshReceived=new i.xQ,this.libraryRefreshReceived$=this.libraryRefreshReceived.asObservable(),this.currentProcessedLayoutData=null,this.getPanelError=null,this.triggerLayoutInteraction={name:_.Bbu.TabSwitch},this.triggerAppListInteraction={name:_.Bbu.AppsListRefresh},this.gameFilterSubject=new D.X(B.IM),this.localMyLibraryChangedSubject=new i.xQ,this.enforceGameTileRestore=new i.xQ,this.removeGameChangedSubject=new i.xQ,this.appsListMap=new Map,this.marketingTilesMap=new Map,this.shouldBypassSwCache=!1,this.panelList=[_.whE.Marquee,_.whE.Library,_.whE.Main],this.updatePlatformPreference=new D.X(!0),this.updatePlatformPreference$=this.updatePlatformPreference.asObservable(),this.reapplyExistingLibraryFilter=new i.xQ,this.reapplyExistingLibraryFilter$=this.reapplyExistingLibraryFilter.asObservable(),this.selectedEvidencePanelChange$=new i.xQ,this.logger=ct.getLogger("LayoutService"),this.showLayoutLoading$=new m.t(1),this.showAppsLoading$=new m.t(1),this.silentLayoutRefresh$=new i.xQ,this.layoutState=B.$s.Loading,this.enableSeeMoreTile=this.appConfig.featureEnablement.seeMoreTile,this.layoutEventStreams=new V.Gb(()=>this.fetchLayout(),!0,!0,!1),this.appsEventStream=Q.createStream(()=>this.fetchAppsList()),this.removeGameChangedSubject.next(null),this.triggerOnlineState$={createObservable:()=>this.networkStatusService.onlineStatusChanged,name:_.Bbu.OnlineStatusChange},this.idmService.accountStatusChanged.subscribe(tn=>{this.isUserAuthenticated=tn.isAuthenticated,this.layoutState=B.$s.Loading,this.showLayoutLoading$.next(!0),this.showAppsLoading$.next(!0)}),this.gridService.vpcId$.subscribe(tn=>{this.vpcId=tn},tn=>{this.logger.error("Cannot fetch vpcId",tn)}),this.triggerAccountStatusVpcIdChange$={createObservable:()=>this.gridService.vpcId$.pipe((0,h.U)(tn=>({vpcId:tn,isUserAuthenticated:this.isUserAuthenticated}))),name:_.Bbu.VpcIdRefresh},this.triggerAccountStatusChangeEcomStatus$={createObservable:()=>this.ecomService.getUserMembership().pipe((0,u.h)(tn=>tn.membershipStatus!==_.Tn6.UnKnown),(0,h.U)(tn=>({isUserAuthenticated:tn.membershipStatus!==_.Tn6.LoggedOut,vpcId:this.vpcId}))),name:_.Bbu.EcomStatusChanged},this.triggerZoneChange$={createObservable:()=>this.idmService.accountStatusChanged.pipe((0,o.f)(this.gridService.vpcId$),(0,u.h)(tn=>0===tn.length),(0,f.O)([])),name:Z},this.triggerLocale$={createObservable:()=>this.localeService.localeChanged,name:_.Bbu.LocaleChange},this.triggerTwentyFourHourRefresh$={createObservable:()=>this.refreshUiService.enablePushNotificationFromPNS$.pipe((0,c.w)(tn=>tn?(this.logger.info("Disabling 24hrs refresh"),y.C):(this.logger.info("Enabling 24hrs refresh"),(0,T.H)(L,L))),(0,f.O)(!1)),name:_.Bbu.TwentyFourHourRefresh},this.triggerSessionEndPushNotification$={createObservable:this.createSessionEndPushNotificationTrigger.bind(this),name:_.Bbu.SessionEndPushNotification},this.triggerSteamSyncChanged$={createObservable:()=>this.ownershipSyncService.accountsUpdated().pipe((0,f.O)(_.iDX.Steam),(0,u.h)(tn=>tn===_.iDX.Steam)),name:_.Bbu.IntegrationChanged},this.triggerOnFocusGain$={createObservable:()=>this.refreshDataOnFocusGain().pipe((0,u.h)(tn=>!0===tn),(0,g.b)(()=>this.logger.info("Windows is focused after layout refresh interval, refreshing layout")),(0,f.O)(!1)),name:_.Bbu.FocusGain},this.triggerOnTabSwitch$={createObservable:()=>this.refreshDataOnTabSwitch().pipe((0,u.h)(tn=>!0===tn),(0,g.b)(()=>this.logger.info("Tab switched to home page after layout refresh interval, refreshing layout")),(0,f.O)(!1)),name:_.Bbu.TabSwitch},this.triggerAppsRefreshOnDataExpiry$={createObservable:()=>this.refreshUiService.appsRefresh$.pipe((0,I.g)(5e3),(0,g.b)(tn=>{this.logger.info("AppsRefreshOnDataExpiry, refreshing apps on",null==tn?void 0:tn.source)}),(0,f.O)(!1)),name:_.Bbu.RefreshOnDataExpiry},this.triggerLayoutRefreshOnDataExpiry$={createObservable:()=>this.refreshUiService.layoutRefresh$.pipe((0,I.g)(5e3),(0,g.b)(tn=>this.logger.info(`LayoutRefreshOnDataExpiry, refreshing layout on ${null==tn?void 0:tn.source}`)),(0,f.O)(!1)),name:_.Bbu.RefreshOnDataExpiry},this.initPushNotifications(),this.initLibraryChangedNotification(),this.setShouldBypassSwCache(),this.initPlatformPreference(),this.startSilentLayoutRefreshListener(),this.initLayoutDataUpdatedListener(),this.initAppsDataUpdatedListener(),this.listenLibraryRefreshNotification(),this.listenPanelRefreshNotification(),this.listenAssetChangePushNotification(),this.listenKVStoreRefreshNotification()}get gameFilterSubject$(){return this.gameFilterSubject.asObservable()}get onLocalMyLibraryChanged(){return this.localMyLibraryChangedSubject.asObservable()}get enforceGameTileRestore$(){return this.enforceGameTileRestore}get onRemoveGameChanged(){return this.removeGameChangedSubject.asObservable()}get onShowLayoutLoading(){return this.showLayoutLoading$.asObservable()}get onShowAppsLoading(){return this.showAppsLoading$.asObservable()}notifyEvidencePanelChange(Q,k,oe){this.selectedEvidencePanelChange$.next([Q,k,oe])}startSilentLayoutRefreshListener(){this.silentLayoutRefresh$.pipe((0,G.p)(B.tP),(0,x.zg)(k=>(0,r.S3)((0,T.H)(4e3).pipe((0,E.q)(1),(0,P.h)({options:k,doSilentRefresh:!0})),this.libraryRefreshReceived$.pipe((0,E.q)(1),(0,P.h)({options:k,doSilentRefresh:!1})))),(0,x.zg)(k=>{if(null==k?void 0:k.doSilentRefresh){this.logger.info("No Library Refresh notification after add/remove library operation - waitTime was: ",4e3);const oe=this.distributedTracingUtilService.startSpan(se.j1.ClientGetPanel);return k.options.currentSpan=oe,k.options.triggerName=_.$3D.SilentRefresh,this.getPanelData(k.options,_.whE.Library).pipe((0,P.h)(!0))}return this.logger.info("Library Refresh notification received after add/remove library operation"),(0,a.of)(!1)})).subscribe(k=>{this.logger.info(`Silent layout refresh ${k} ? completed : ignored`)})}fetchPanelAndUpdateLayoutStream(Q,k){const oe={},N=this.distributedTracingUtilService.startSpan(se.j1.ClientGetPanel);return oe.currentSpan=N,oe.triggerName=k,this.getPanelData(oe,Q).pipe((0,g.b)(q=>{this.updateLayoutStream(q)}))}listenLibraryRefreshNotification(){this.refreshUiService.libraryRefresh$.pipe((0,c.w)(()=>{var Q,k,oe;this.libraryRefreshReceived.next();const N=null===(k=null===(Q=this.currentProcessedLayoutData)||void 0===Q?void 0:Q.data)||void 0===k?void 0:k.findIndex(Me=>Me.name===_.whE.Library);let q=null;return-1!==N&&(q=null===(oe=this.currentProcessedLayoutData)||void 0===oe?void 0:oe.data[N]),(0,s.aj)([(0,a.of)(q),this.fetchPanelAndUpdateLayoutStream(_.whE.Library,_.$3D.LibraryRefresh)]).pipe((0,E.q)(1))})).subscribe(([Q,k])=>{var oe,N,q,Me,xe,ct,Se;this.logger.info("Updating Library Panel UI");const Ge=null===(oe=null==Q?void 0:Q.sections)||void 0===oe?void 0:oe.find(Je=>(null==Je?void 0:Je.type)===_.ByO.MyLibrary),St=null===(q=null===(N=k[0])||void 0===N?void 0:N.sections)||void 0===q?void 0:q.find(Je=>(null==Je?void 0:Je.type)===_.ByO.MyLibrary);this.logger.info(`oldLibraySection items length : ${null===(Me=null==Ge?void 0:Ge.items)||void 0===Me?void 0:Me.length} , newLibrarySection items length : ${null===(xe=null==St?void 0:St.items)||void 0===xe?void 0:xe.length}`);const Tt=null===(ct=null==Ge?void 0:Ge.items)||void 0===ct?void 0:ct.filter(Je=>{var xt;return!(null===(xt=null==St?void 0:St.items)||void 0===xt?void 0:xt.some(Ye=>(null==Je?void 0:Je.id)===(null==Ye?void 0:Ye.id)))});this.logger.info("on LIBRARY_REFRESH , Removed Games count: ",null==Tt?void 0:Tt.length),null==Tt||Tt.forEach(Je=>{Je.resetLibraryStatus()});const Te=null===(Se=null==St?void 0:St.items)||void 0===Se?void 0:Se.filter(Je=>{var xt;return!(null===(xt=null==Ge?void 0:Ge.items)||void 0===xt?void 0:xt.some(Ye=>(null==Je?void 0:Je.id)===(null==Ye?void 0:Ye.id)))});this.logger.info("on LIBRARY_REFRESH , Added Games count: ",null==Te?void 0:Te.length),((null==Tt?void 0:Tt.length)>0||(null==Te?void 0:Te.length)>0)&&this.reapplyExistingLibraryFilter.next()})}listenKVStoreRefreshNotification(){this.refreshUiService.kvStorePlatformSelectionRefresh$.subscribe(Q=>{this.logger.info("Refresh KVStore",null==Q?void 0:Q.source),this.updatePlatformPreference.next(!0)})}listenPanelRefreshNotification(){this.refreshUiService.panelRefresh$.pipe((0,c.w)(Q=>{var k,oe;const N=[],q=[_.whE.Main,_.whE.Marquee];return(null==Q?void 0:Q.source)===_.cFU.OnPushNotification?(null===(k=null==Q?void 0:Q.metadata)||void 0===k?void 0:k.changeIdType)===_.F0r.PANEL?null===(oe=null==Q?void 0:Q.metadata)||void 0===oe||oe.changedIds.forEach(Me=>{N.push(this.fetchPanelAndUpdateLayoutStream(Me,_.$3D.PanelRefresh))}):q.forEach(Me=>{N.push(this.fetchPanelAndUpdateLayoutStream(Me,_.$3D.PanelRefresh))}):q.forEach(Me=>{this.refreshUiService.isContentExpired(_.QUw[Me])&&N.push(this.fetchPanelAndUpdateLayoutStream(Me,_.$3D.PanelRefresh))}),(0,s.aj)(N).pipe((0,E.q)(1))})).subscribe(Q=>{this.logger.info("Updating Panels in the UI")})}listenAssetChangePushNotification(){this.refreshUiService.assetRefresh$.pipe((0,x.zg)(Q=>{var k,oe,N;const q=null===(k=Q.metadata)||void 0===k?void 0:k.changedIds,Me=(null===(oe=Q.metadata)||void 0===oe?void 0:oe.changeIdType)===_.F0r.CMSID||!(null===(N=Q.metadata)||void 0===N?void 0:N.changeIdType);return(0,n.isArray)(q)&&(null==q?void 0:q.length)>0?this.lcarsService.getAppdata(q,{isCmsId:Me}):(this.refreshApps(),p.E)})).subscribe(Q=>{this.logger.info("Apps metadata updated after ASSET_CHANGE notification"),null==Q||Q.forEach(k=>{const oe=this.fetchApplication(k.id);oe&&oe.updateData(k)})})}triggerSilentLayoutRefresh(Q={}){this.silentLayoutRefresh$.next(Q)}fetchLayoutRefreshIntervalCloudVariable(){return this.experienceControlService.getCloudVariable(this.appConfig.gxTarget.experiences.layoutRefreshInterval,void 0,{useCache:!0,useNetworkTimeoutForCacheFallback:!0},Y.Z4.GxTargetGetCloudVariable,Y.Qu.GxTargetGetLayoutRefreshInterval).pipe((0,h.U)(Q=>{const k=Q.value.layoutRefreshInterval;return this.logger.info(`Refresh Interval from gxtarget is ${k}`),k}),(0,v.K)(Q=>(this.logger.error("Error while fetching Layout Refresh Interval",Q),(0,a.of)(864e5))))}isLayoutRefreshIntervalLimitReached(){return this.fetchLayoutRefreshIntervalCloudVariable().pipe((0,h.U)(Q=>!!(this.lastLayoutFetchedTime&&Date.now()-this.lastLayoutFetchedTime>Q)&&(this.logger.info("Layout refresh interval limit is reached"),!0)))}refreshDataOnFocusGain(){return this.refreshUiService.enablePushNotificationFromPNS$.pipe((0,c.w)(Q=>Q?(this.logger.info("Disabling refresh on focus gain"),(0,a.of)(!1)):this.windowService.getFocusEvent().pipe((0,u.h)(k=>this.router.url===_.nnJ.Games),(0,x.zg)(k=>this.isLayoutRefreshIntervalLimitReached()),(0,v.K)(k=>(this.logger.error("Error in refreshDataOnFocusGain",k),(0,a.of)(!1))))))}refreshDataOnTabSwitch(){return this.refreshUiService.enablePushNotificationFromPNS$.pipe((0,c.w)(Q=>Q?(this.logger.info("Disabling refresh on tab switch"),(0,a.of)(!1)):this.router.events.pipe((0,u.h)(k=>k instanceof S.R9),(0,O.G)(),(0,h.U)(k=>(k[1]&&k[1].urlAfterRedirects)===_.nnJ.Games),(0,u.h)(k=>!0===k),(0,x.zg)(k=>this.isLayoutRefreshIntervalLimitReached()),(0,v.K)(k=>(this.logger.error("Error in refreshDataOnTabSwitch",k),(0,a.of)(!1))))))}initPlatformPreference(){(0,s.aj)([this.idmService.accountStatusChanged,this.updatePlatformPreference$]).pipe((0,x.zg)(([Q,k])=>Q&&Q.isAuthenticated?this.platformPreferenceService.getPlatformPreferences():(0,a.of)([])),(0,g.b)(Q=>{this.platformPreferenceSubscription&&this.platformPreferenceSubscription.unsubscribe(),this.platformPreferencesAppliedForLayout=!1,this.platformPreferencesAppliedForApps=!1})).subscribe(Q=>{this.processPlatformPreferences(Q)},Q=>{this.logger.error("Error while fetching platform preferences."+Q)})}processPlatformPreferences(Q){const k=this.onShowLayoutLoading.pipe((0,u.h)(q=>!q),(0,x.zg)(q=>this.platformPreferencesAppliedForLayout?(0,a.of)(!0):this.applyPlatformPreferences(Q)),(0,g.b)(q=>{this.platformPreferencesAppliedForLayout=!0,this.isUserAuthenticated&&this.handlePlatformSelectionForLibraryItems(this.myLibrarySection)})),oe=this.onShowAppsLoading.pipe((0,u.h)(q=>!q),(0,x.zg)(q=>this.platformPreferencesAppliedForApps?(0,a.of)(!0):this.applyPlatformPreferences(Q)),(0,g.b)(q=>this.platformPreferencesAppliedForApps=!0)),N=(0,l.T)(k,oe);this.platformPreferenceSubscription=N.subscribe(q=>{q&&this.isUserAuthenticated&&this.platformPreferencesAppliedForApps&&this.platformPreferencesAppliedForLayout&&this.platformPreferenceService.processGamesPostLogin()},q=>{Array.from(this.appsListMap.values()).forEach(Me=>Me.onPlatformPreferenceSynced(null)),this.logger.error("Error received while initializing platform preference ",q)})}applyPlatformPreferences(Q){return(0,a.of)(!0).pipe((0,C.M)(this.idmService.accountStatusChanged),(0,x.zg)(([k,oe])=>{const N=oe&&oe.isAuthenticated&&oe.userId;if(Q&&Q.length>0&&N){this.logger.info("Preferences received successfully");const q={};return q[N]={},Q.forEach(Me=>{try{const xe=JSON.parse(Me),[[ct,Se]]=Object.entries(xe);if(!this.platformPreferenceService.hasLocalOrLoggedOutPreference(ct)){q[N][ct]={variantId:Se};const Ge=this.fetchApplication(ct);Ge&&Ge.onPlatformPreferenceSynced(Se)}}catch(xe){this.logger.info("Error while adding preference to the app list ",xe)}}),this.sharedStorage.writeBlock("PlatformPreference",q)}return this.logger.info("Empty Platform Preference array received, clearing all the platform preferences"),Array.from(this.appsListMap.values()).forEach(q=>{this.platformPreferenceService.hasLocalOrLoggedOutPreference(q.id)||q.onPlatformPreferenceSynced(null)}),(0,a.of)(!0)}),(0,v.K)(k=>(this.logger.info("Error initializing Platform Preference",k),(0,a.of)(!1))))}initLayoutDataUpdatedListener(){this.lcarsService.onLayoutDataUpdated$.subscribe(Q=>{this.updateLayoutStream(null==Q?void 0:Q.panels)},Q=>{this.logger.error("Error while processing updated layout data."+Q)})}initAppsDataUpdatedListener(){this.lcarsService.onAppsDataUpdated$.subscribe(Q=>{this.updateAppsStream(Q)},Q=>{this.logger.error("Error while processing updated apps data."+Q)})}initLibraryChangedNotification(){b.M.onIsInLibraryChanged().pipe((0,x.zg)(Q=>{this.logger.info(`Update local library for Parent-id:${Q.id} CmsId:[${Q.selectedPlatformVariant.id}] as ${Q.isInLibrary}`);const k=Q.id,oe=Q.selectedPlatformVariant.id,N=Q.isInLibrary;return this.layoutState===B.$s.Ready?(0,a.of)(Q):(0,s.aj)([this.onShowLayoutLoading,this.onShowAppsLoading]).pipe((0,u.h)(([q,Me])=>!q&&!Me),(0,E.q)(1),(0,h.U)(([q,Me])=>{this.logger.info("Layout loading response:",q,Me);const xe=this.fetchApplication(k);return null==xe||xe.updateLibraryStatus(oe,N),xe}))}),(0,u.h)(Q=>!(0,n.isNil)(Q)),(0,h.U)(Q=>{Q.isInLibrary?this.addGameToLocalLibrary(Q):this.removeGameFromLocalLibrary(Q)})).subscribe()}addGameToLocalLibrary(Q){if(this.myLibrarySection){this.logger.info("Add game to local library for",Q.id);let k=0;this.myLibrarySection.items.forEach(oe=>{oe.id!==Q.id?oe.id===_.U19.id&&k++:k=null}),(0,n.isNil)(k)||(this.myLibrarySection.items.splice(k,0,Q),this.enableSeeMoreTile&&this.manageSeeMoreTile(this.myLibrarySection),this.localMyLibraryChangedSubject.next(this.myLibrarySection))}else this.logger.error("My library section missing")}removeGameFromLocalLibrary(Q){this.removeGameChangedSubject.next(Q.id),setTimeout(()=>{if(this.myLibrarySection){const k=this.myLibrarySection.items.findIndex(oe=>oe.id===Q.id);-1!==k?(this.logger.info("Remove game from local library for",Q.id),this.myLibrarySection.items.splice(k,1),this.enableSeeMoreTile&&this.manageSeeMoreTile(this.myLibrarySection)):this.logger.info("Game not present in library"),this.localMyLibraryChangedSubject.next(this.myLibrarySection)}else this.logger.info("Library section not present");this.removeGameChangedSubject.next(null)},B.u9)}createSessionEndPushNotificationTrigger(){return this.pushNotificationService.registerPushNotification(_.oWM.SESSION_CHANGE).pipe((0,u.h)(Q=>Q.sessionInfo.event_type===_.OmM.SESSION_END),(0,g.b)(()=>this.logger.info("Received SESSION_END push notification refreshing layout")),(0,f.O)(0))}getLayout(){return this.layoutEventStreams.get$()}getApps(){return this.appsEventStream.get$()}refreshApps(){this.appsEventStream.refresh()}refreshLayout(Q){this.triggerLayoutInteraction.name=Q,this.layoutEventStreams.refresh()}updateAppsStream(Q){var k;if(!Q)return;Q.forEach(N=>this.updateAndFetchApp(N));const oe={data:Array.from(null===(k=this.appsListMap)||void 0===k?void 0:k.values()),cacheKey:B.iX.AppsFetch};this.appsEventStream.setData(oe,!0)}updateLayoutStream(Q){var k,oe;if(!Q||this.areAllSectionsEmpty(Q))return;const N=null===(oe=null===(k=this.currentProcessedLayoutData)||void 0===k?void 0:k.data)||void 0===oe?void 0:oe.findIndex(q=>{var Me;return q.name===(null===(Me=Q[0])||void 0===Me?void 0:Me.name)});if(-1!==N&&this.currentProcessedLayoutData){const q=this.mapToLcarsApplication(Q);this.currentProcessedLayoutData.data[N]=q[0],this.layoutEventStreams.setData(this.currentProcessedLayoutData,!0)}}mapExceptionToLayoutError(Q){let k;return k=Q instanceof _.uaH?new B.oY(_.cPW.VpcId,Q.error):Q instanceof F.Lh?new B.oY(_.cPW.DelegateTokenFetch,Q.error):Q instanceof _.$e1?new B.oY(_.cPW.LayoutFetch,Q.error):Q instanceof _.PT0?new B.oY(_.cPW.AppsListFetch,Q.error):Q instanceof _._Rm?new B.oY(_.cPW.AppMetadataFetch,Q.error):Q instanceof B.LH?new B.oY(_.cPW.EmptyLayout,null):Q instanceof F.gw?new B.oY(_.cPW.SessionToken,null):new B.oY(_.cPW.Unknown,Q),k}handleLayoutException(Q,k,oe){const N=this.mapExceptionToLayoutError(Q);return(0,n.isNil)(N.error)||(0,n.isNil)(N.error.status),(0,n.isNil)(N.error)||(0,n.isNil)(N.error.rawResponse)||(0,n.isNil)(N.error.rawResponse.statusText),{data:null,error:N,metaData:k,cacheKey:oe}}getLiveData(Q,k,oe){return Q(oe).pipe((0,h.U)(N=>({data:N,metaData:oe,cacheKey:k})),(0,v.K)(N=>(0,a.of)(this.handleLayoutException(N,oe,k))),(0,h.U)(N=>N))}getData(Q,k,oe,N,q){return function(te,ie,Q){let k;const oe=[];return ie.forEach(N=>{const q=(0,n.isNil)(N.createObservable)?(0,a.of)(void 0):N.createObservable();let Me=!0;oe.push(q.pipe((0,h.U)(xe=>(Me&&(Me=!1,Q.info("Trigger "+N.name+" initialized.")),{trigger:N,data:xe,timestamp:Date.now()})),(0,v.K)(xe=>(0,a.of)({trigger:N,data:void 0,timestamp:Date.now(),error:xe}))))}),(0,s.aj)(oe).pipe((0,h.U)(N=>{const q=(0,n.merge)({},te),Me={baseTrigger:q,trigger:q,responses:new Map};return k!==q.name?k=q.name:(N=(0,n.sortBy)(N,[xe=>xe.timestamp]),Me.trigger=N[N.length-1].trigger),N.forEach(xe=>{Me.responses.set(xe.trigger.name,xe)}),Me}))}(oe,[this.triggerOnlineState$,this.triggerLocale$,...N],q).pipe((0,c.w)(xe=>this.getLiveData(Q,k,xe).pipe((0,g.b)(ct=>{ct.metaData=xe,ct.cacheKey=k}),(0,v.K)(ct=>(xe.trigger.name===_.Bbu.EcomStatusChanged&&(this.showLayoutLoading$.next(!1),this.showAppsLoading$.next(!1)),(0,t._)(ct))))))}logSummary(Q){return(0,w.z)((0,g.b)(k=>{const oe=k.metaData.responses.get(_.Bbu.OnlineStatusChange).data;let Me=`${k.cacheKey} refreshed by ${k.metaData.trigger.name}`;(0,n.isNil)(k.error)?!oe&&!k.data&&(Me+=" and had no cache while offline.",k.error=new B.oY(_.cPW.OfflineNoCache)):Me=Me+" and got error "+k.error.failurePoint,this.sendTelemetry(k,Q),Q.info(Me)}))}areAllSectionsEmpty(Q){if((0,n.isEmpty)(Q)||(0,n.isNil)(Q)||0===Q.length)return!0;let k=0,oe=0;return Q.forEach(N=>{var q;oe+=null===(q=null==N?void 0:N.sections)||void 0===q?void 0:q.length,N.sections.forEach(Me=>{const xe=null==Me?void 0:Me.items;((0,n.isNil)(xe)||0===xe.length)&&k++})}),k===oe}checkForEmptyLayout(Q){return!Q.data||this.areAllSectionsEmpty(Q.data)}createApplication(Q){return new b.M(Q,this.loggingService,this.networkStatusService,this.launchService,this.idmService,this.idmLoginService,this.ecomService,this.dialogService,this.nesLayoutService,this.lcarsService,this.telemetryUtilService,this.platformPreferenceService,this.gameShareUrlService,this.ownershipSyncService,this.appConfig,this.gfnSdkService,this.unsupportedBrowserService,this.pathService,this.streamingProfileService)}fetchApplication(Q){return this.appsListMap.has(Q)?this.appsListMap.get(Q):null}updateAndFetchApp(Q){_.vAT.sortVariants(Q.variants),Q.variants.forEach(oe=>{oe.appStoreInfo=_.vAT.getStoreInfoForAppstore(oe.appStore)});let k=this.fetchApplication(Q.id);return k?k.updateData(Q):(k=this.createApplication(Q),this.appsListMap.set(Q.id,k)),k}getAppsData(Q){return(0,s.aj)([this.lcarsService.getApps({triggerName:null==Q?void 0:Q.trigger.name,bypassSwCache:this.shouldBypassSwCache}),this.lcarsService.ensureLatestStaticAppData$()]).pipe((0,h.U)(([k,oe])=>k))}fetchAppsList(){const Q=this.loggingService.getLogger("LayoutService:ALF");return this.getData(k=>this.getAppsData(k),B.iX.AppsFetch,this.triggerAppListInteraction,[this.triggerAccountStatusVpcIdChange$,this.triggerTwentyFourHourRefresh$,this.triggerAppsRefreshOnDataExpiry$],Q).pipe(this.logSummary(Q),(0,h.U)(k=>(this.refreshUiService.setContentExpiryInfo(_.Gxu.Apps),k.data=this.mapToLcarsAppsData(k.data),this.showAppsLoading$.next(!1),k)),(0,g.b)(k=>{this.ownershipSyncService.enableAccountLinking(k.data.reduce((oe,N)=>{var q;return(null===(q=N.variants)||void 0===q?void 0:q.reduce((Me,xe)=>(Me.push(xe.id),Me),oe))||[]},[]))}))}mapToLcarsAppsData(Q){let k=[];return(null==Q?void 0:Q.length)&&!(0,n.isEmpty)(this.appsListMap)&&(k=Array.from(this.appsListMap.keys())),null==Q||Q.forEach(oe=>{this.updateAndFetchApp(oe),null==k||k.splice(k.indexOf(oe.id),1)}),(0,n.isEmpty)(k)||k.forEach(oe=>{this.appsListMap.has(oe)&&(this.appsListMap.set(oe,null),this.appsListMap.delete(oe))}),Array.from(this.appsListMap.values())}getPanelData(Q,k){return this.lcarsService.getPanel(Q,k).pipe((0,g.b)(()=>{this.refreshUiService.setContentExpiryInfo(_.QUw[k])}),(0,v.K)(oe=>(this.logger.error(`Error in fetching panel: ${k} `,oe),this.getPanelError=oe,(0,a.of)(null))))}getLibraryPanelData(Q){return this.idmService.accountStatusChanged.pipe((0,E.q)(1),(0,x.zg)(k=>k.isAuthenticated?this.getPanelData(Q,_.whE.Library):(0,a.of)([_.mJI])))}getLayoutData(Q){const k=this.distributedTracingUtilService.startSpan(se.j1.ClientGetLayout);return Q.parentSpan=k,(0,s.aj)([this.getLibraryPanelData(Q),this.getPanelData(Q,_.whE.Main),this.getPanelData(Q,_.whE.Marquee),this.lcarsService.ensureLatestStaticAppData$()]).pipe((0,h.U)(([oe,N,q,Me])=>{let xe=[];if(xe[0]=q&&q[0]?q[0]:null,xe[1]=oe&&oe[0]?oe[0]:null,xe[2]=N&&N[0]?N[0]:null,xe=xe.filter(ct=>null!=ct),(null==xe?void 0:xe.length)>0)return this.getPanelError=null,k.setTag(se.NI.Error,!1),this.distributedTracingUtilService.closeSpan(k),xe;throw k.setTag(se.NI.Error,!0),this.distributedTracingUtilService.closeSpan(k),this.showLayoutLoading$.next(!1),new Error(this.getPanelError)}),(0,g.b)(oe=>this.resetShouldBypassSwCache()))}setShouldBypassSwCache(){this.shouldBypassSwCache=!!window.location.hash.match(_.nnJ.Deeplink)}resetShouldBypassSwCache(){this.shouldBypassSwCache=!1}hasValidLayoutData(){var Q,k;return(null===(k=null===(Q=this.currentProcessedLayoutData)||void 0===Q?void 0:Q.data)||void 0===k?void 0:k.length)>0}fetchLayout(){const Q=this.loggingService.getLogger("LayoutService:LF/");return this.getData(k=>this.getLayoutData({triggerName:null==k?void 0:k.trigger.name,bypassSwCache:this.shouldBypassSwCache}),B.iX.LayoutFetch,this.triggerLayoutInteraction,[this.triggerZoneChange$,this.triggerTwentyFourHourRefresh$,this.triggerSessionEndPushNotification$,this.triggerSteamSyncChanged$,this.triggerAccountStatusChangeEcomStatus$,this.triggerOnFocusGain$,this.triggerOnTabSwitch$,this.triggerLayoutRefreshOnDataExpiry$],Q).pipe(this.logSummary(Q),(0,x.zg)(k=>{if(this.checkForEmptyLayout(k)){if(this.hasValidLayoutData())return y.C;this.currentProcessedLayoutData=this.handleLayoutException(new B.LH,k.metaData,k.cacheKey),this.currentProcessedLayoutData.data=[]}else this.processLayoutResponse(k);return(0,a.of)(this.currentProcessedLayoutData)}),(0,v.K)(k=>(this.logger.error("Error while processing layout. "+k),this.errorHandler.handleError(new Error("Error while processing layout. "+k)),this.hasValidLayoutData()?y.C:(0,a.of)(null))))}processLayoutResponse(Q){this.refreshUiService.setContentExpiryInfo(_.Gxu.Layout),this.lastLayoutFetchedTime=Date.now();const k=Object.assign(Object.assign({},Q),{data:this.mapToLcarsApplication(Q.data)});if(this.hasValidLayoutData()){let oe=0;this.panelList.forEach(N=>{const q=k.data.find(xe=>xe.name===N),Me=this.currentProcessedLayoutData.data.findIndex(xe=>xe.name===N);-1!==Me?(q&&(this.currentProcessedLayoutData.data[Me]=q),oe++):q&&(this.currentProcessedLayoutData.data.splice(oe,0,q),oe++)})}else this.currentProcessedLayoutData=k;this.layoutState=B.$s.Ready,this.showLayoutLoading$.next(!1)}handlePlatformSelectionForLibraryItems(Q){null==Q||Q.items.forEach(k=>{if(k.isMultiPlatformGame()&&!k.selectedPlatformVariant){let N,oe=0;k.variants.forEach(q=>{var Me;(null===(Me=q.gfn)||void 0===Me?void 0:Me.isInLibrary)&&(oe++,N=q.id)}),1===oe&&k.addPlatformPreference(N).subscribe(q=>{this.logger.info("Setting platform preference for In-Library game:",k.id,N)},q=>{this.logger.error("Error while setting platform preference for In-Library game:",k.id,N,q)})}})}mapToLcarsApplication(Q){let k=!1;return Q.map(oe=>(oe.sections.map(N=>(N.items=N.items.reduce((q,Me)=>{if(Me.__typename===_.YUT.Filter)return Me.visibility=!0,q.push(new fe(Me,this.loggingService)),q;if(Me.__typename===_.YUT.Marketing||Me.__typename===_.YUT.Game){try{const xe=this.mapItemsToApplication(Me);q.push(xe)}catch(xe){this.logger.error("Error while mapping LCARS item to Application. "+xe),k||(this.errorHandler.handleError(new Error(`Error while mapping LCARS item to Application: ${Me.id}`)),k=!0)}return q}return q},[]),N.type===_.ByO.MyLibrary&&(this.updateMyLibrary(N),this.myLibrarySection=N),N)),oe))}fetchMarketingTileFromMap(Q){return this.marketingTilesMap.has(Q)?this.marketingTilesMap.get(Q):null}updateAndFetchMarketingTile(Q){let k=this.fetchMarketingTileFromMap(Q.id);return k?k.updateData(Q):(k=this.createApplication(Q),this.marketingTilesMap.set(Q.id,k)),k}mapItemsToApplication(Q){return Q.__typename===_.YUT.Marketing?(Q.app={id:Q.id,appStore:null,variants:[],title:Q.title,images:{MARQUEE_HERO_IMAGE:Q.image||null},action:Q.action,body:Q.body||null,type:Q.__typename},this.updateAndFetchMarketingTile(Q.app)):(Q.app.type=Q.__typename,this.updateAndFetchApp(Q.app))}getTelemetryNameForTrigger(Q){return Q===Z?_.Bbu.VpcIdRefresh:Q}sendTelemetry(Q,k){const oe=Q.metaData.responses;let N=!1,q="undefined";if(oe.has(_.Bbu.EcomStatusChanged)){const xe=oe.get(_.Bbu.EcomStatusChanged).data;xe&&(N=xe.isUserAuthenticated,q=xe.vpcId)}else if(oe.has(_.Bbu.VpcIdRefresh)){const xe=oe.get(_.Bbu.VpcIdRefresh).data;xe&&(N=xe.isUserAuthenticated,q=xe.vpcId)}const Me={layoutKey:Q.cacheKey,trigger:this.getTelemetryNameForTrigger(Q.metaData.trigger.name),failurePoint:_.cPW.NA,errorCode:"",vpcId:q||"undefined",isUserOnline:oe.has(_.Bbu.OnlineStatusChange)&&oe.get(_.Bbu.OnlineStatusChange).data?_.wye.TRUE:_.wye.FALSE,isUserLoggedIn:N?_.wye.TRUE:_.wye.FALSE,cachedDataSuccessful:_.wye.UNDEFINED,liveDataSuccessful:(0,n.isNil)(Q.error)?_.wye.TRUE:_.wye.FALSE,error:""};!Q.error&&Q.cacheKey.includes(B.iX.LayoutFetch)&&this.areAllSectionsEmpty(Q.data)&&(this.logger.error("Server response successful, but received EmptyLayout"),Me.liveDataSuccessful=_.wye.FALSE,Me.failurePoint=_.cPW.EmptyLayout),(0,n.isNil)(Q.error)||(Me.failurePoint=Q.error.failurePoint||_.cPW.Unknown,(0,n.isNil)(Q.error.error)||(Me.errorCode=""+Q.error.error.status),(0,n.isNil)(Q.error.error)||(Me.error=(0,n.isNil)(Q.error.error.rawResponse)?Q.error.error.toString():Q.error.error.rawResponse.statusText)),k.info("Layout Telemetry Data:",Me),this.telemetryService.push(new _.sNt(Me))}applyFilter(Q){this.gameFilterSubject.next(Q)}resetFilter(){this.gameFilterSubject.next(B.IM)}updateMyLibrary(Q){if(!(0,n.isNil)(Q)){if(this.appConfig.featureEnablement.ownershipSync){const k=this.createApplication(_.U19);Q.items.unshift(k)}Q.title=this.translateService.instant("layout.myLibrary")}}initPushNotifications(){const Q=this.refreshUiService.patchingInfoRefresh$.pipe((0,x.zg)(oe=>(this.logger.info("Refresh patchingInfo",null==oe?void 0:oe.source),this.handlePatchingEvent(null==oe?void 0:oe.metadata)))),k=this.pushNotificationService.registerPushNotification(_.oWM.PATCHING_EVENT).pipe((0,x.zg)(oe=>(this.logger.info("receive patching push notification",oe),this.handlePatchingEvent(oe))));this.refreshUiService.enablePushNotificationFromPNS$.pipe((0,c.w)(oe=>oe?Q:k)).subscribe(()=>{},oe=>{this.logger.error("Error handling push notification for patching event",oe)})}handlePatchingEvent(Q){var k,oe;const N=null==Q?void 0:Q.patchingInfo;if(N){const q=this.getAppFencedStateBasedByPatchingPushMessage(Q),Me=(null==Q?void 0:Q.changeIdType)===_.F0r.CMSID||!(null==Q?void 0:Q.changeIdType);return N.resourceId?this.updateFencedStatusForApp(null===(k=N.resourceId)||void 0===k?void 0:k.toString(),q):Me&&(null===(oe=null==Q?void 0:Q.changedIds)||void 0===oe?void 0:oe.length)&&Q.changedIds.forEach(xe=>{this.updateFencedStatusForApp(xe,q)}),(0,a.of)(!0)}return(0,a.of)(!1)}updateFencedStatusForApp(Q,k){const oe=this.getApplicationClassByCmsId(Q);null==oe||oe.updateFencedStatus(Q,k)}getApplicationClassByCmsId(Q){let k;return k=Array.from(this.appsListMap.values()).find(oe=>oe.variants.some(N=>N.id===Q)),this.logger.info(`App meta data parent-id for cmsID: ${Q} is `,null==k?void 0:k.id),k}getAppFencedStateBasedByPatchingPushMessage(Q){let k;if(Q.patchingInfo.resourceId)switch(Q.patchingInfo.patchingState){case _.Ilb.RealTimePatch:k=_.zu9.PATCHING;break;case _.Ilb.ServerMaintenanceStarted:k=_.zu9.SERVER_MAINTENANCE;break;case _.Ilb.PatchCompleted:case _.Ilb.ServerMaintenanceFinished:default:k=_.zu9.UNAVAILABLE}else switch(Q.patchingInfo.patchingState){case _.Fwf.PATCHING_STARTED:k=_.zu9.PATCHING;break;case _.Fwf.SERVER_MAINTENANCE_STARTED:k=_.zu9.SERVER_MAINTENANCE;break;case _.Fwf.PATCHING_COMPLETED:case _.Fwf.SERVE_MAINTENANCE_COMPLETED:default:k=_.zu9.UNAVAILABLE}return k}manageSeeMoreTile(Q){var k,oe,N;const q=Array.isArray(null===(k=null==Q?void 0:Q.seeMoreInfo)||void 0===k?void 0:k.filters)&&(null===(oe=null==Q?void 0:Q.items)||void 0===oe?void 0:oe.length)>(null===(N=null==Q?void 0:Q.seeMoreInfo)||void 0===N?void 0:N.minTiles),Me=Q.items.findIndex(xe=>xe.id===_.Jn8.id);if(q){if(-1===Me){const xe=this.createApplication(_.Jn8);xe.data.title=Q.seeMoreInfo.title,Q.items.push(xe)}}else-1!==Me&&Q.items.splice(Me,1)}}return te.\u0275fac=function(Q){return new(Q||te)($.LFG(V.O_),$.LFG(_.No2),$.LFG(_.rIG),$.LFG(_.JYZ),$.LFG(ae.OL),$.LFG(ae._J),$.LFG(me.y0),$.LFG(ae.ed),$.LFG(_.K23),$.LFG(_.xAy),$.LFG(_.ZB5),$.LFG(ye.rw),$.LFG(_.wU6),$.LFG(_.BHV),$.LFG(ue.sK),$.LFG(_.qMk),$.LFG(_.VKt),$.LFG(_.zcQ),$.LFG(_.S77),$.LFG(X.OA),$.LFG(_.tDF),$.LFG(Y.Q6),$.LFG(S.F0),$.LFG(ae.un),$.LFG($.qLn),$.LFG(j.s),$.LFG(se.Dc),$.LFG(_.rHN),$.LFG(_.ePW),$.LFG(_.unb),$.LFG(_.GKb))},te.\u0275prov=$.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"}),te})()},56725:(He,de,e)=>{"use strict";e.d(de,{ED:()=>i,N3:()=>D,uP:()=>m});const i={steam_client:{sortOrder:0},battle_net_client:{sortOrder:1}};var D=(()=>{return(y=D||(D={}))[y.Default=0]="Default",y[y.Concealed=1]="Concealed",D;var y})();const m=["RTX","Raytracing"]},7415:(He,de,e)=>{"use strict";e.d(de,{C:()=>x});var n=e(76491),i=e(81134),D=e(61486),m=e(202),T=e(6484),r=e(77436),a=e(12556),s=e(56725),p=e(85816),l=e(98636),t=e(33927),w=e(92597),h=e(83720),u=e(67202),o=e(79902),f=e(66883),c=e(2316),g=e(74826),I=e(74984),G=e(71258);let x=(()=>{class E{constructor(v,O,C,_,F,V,b,B,U,A,S,Y){this.indexService=O,this.layoutService=C,this.idmService=_,this.localeService=F,this.searchService=V,this.breakpointObserver=b,this.appBarService=B,this.customLocationService=U,this.pathService=A,this.cloudVarService=S,this.router=Y,this.gameDocumentFields=["title","publisher","genres","platform","keywords"],this.fullPreviewFields=["publisher","genres","keywords"],this.fieldsBoost={title:60,genres:10,publisher:10,platform:10},this.buildTimeConfig={gfngames:{fields:this.gameDocumentFields,fieldsBoost:this.fieldsBoost,fullPreviewFields:this.fullPreviewFields,wildcard:2,boostPhrase:100,boostFirstTitle:10}},this.isSearchActiveSub=new n.X(!1),this.logger=v.getLogger("gfn/SearchManagerService")}updateSearchResultItem(v,O){const C=this.layoutService.fetchApplication(v.param);(0,m.isNil)(C)||(v.telemetryTitle=C.shortName,v.indexInCategory=O)}processSearchedResults(v){let O=0;const C=(0,m.size)(s.ED),_=(0,m.mapValues)(v,F=>{if(O+=(0,m.size)(F),(0,m.size)(F)){const V={};return F.forEach((b,B)=>{this.updateSearchResultItem(b,B),V[b.telemetryTitle]={sortOrder:B}}),(0,m.sortBy)(F,b=>{let B=0;return B=(0,m.has)(s.ED,b.telemetryTitle)?s.ED[b.telemetryTitle].sortOrder:C+V[b.telemetryTitle].sortOrder,B})}});return(0,i.of)({resultsLength:O,categorizedResult:_})}processRecentResultsCallback(v){return v=v.filter(O=>!(0,m.isNil)(this.layoutService.fetchApplication(O.param))),(0,m.forEach)(v,(O,C)=>{this.updateSearchResultItem(O,C)}),(0,i.of)(v)}initIndexService(v,O){return this.indexService.init(r.Bi,v,O).pipe((0,p.zg)(()=>(this.indexService.setCallbacks(this.processSearchedResults.bind(this),this.processRecentResultsCallback.bind(this)),this.indexService.setSearchConfig({buildTimeConfig:this.buildTimeConfig}))))}buildSearchIndexForGames(v){this.indexService.setSearchIndexAvailable(!1);const O=this.getBaselineGameSearchDocList(v);return this.searchService.getGfnSearchDocList(O).pipe((0,p.zg)(C=>this.indexService.buildStateIndex("gfngames",C,{customStopWords:[]})),(0,l.b)(()=>{this.indexService.setSearchIndexAvailable(!0)}))}getBaselineGameSearchDocList(v){return(0,m.map)(v,O=>{const C=[].concat(...O.digitalStoresInfo.map(F=>(null==F?void 0:F.keywords)?F.keywords:[])),_={title:O.title,publisher:[O.publisherName],genres:O.genres,platform:C,keywords:O.keywords,param:O.id};return this.isReservedSkuFeatureEnabled&&O.isFeatureSupportedOnGame(a.xAh[a.xAh.RTX_ENABLED])&&(_.keywords=_.keywords.concat(s.uP)),_})}getAppsAndBuildIndex(){return this.indexService.setSearchIndexAvailable(!1),this.getAppsStream().pipe((0,p.zg)(v=>v?(this.logger.info("Retrieved apps data, building search index"),this.buildSearchIndexForGames(v.data||[])):(0,i.of)(!1)))}getAppsStream(){return this.layoutService.getApps().pipe((0,t.U)(v=>(0,m.isNil)(v.error)?(this.logger.info("apps fetched, replayed as sharable source to multi-subscribers"),v):(this.logger.error("failed to get apps from layout service",v.error),null)))}initSearchFunctionality(v,O){const C=this.localeService.localeChanged,_=this.initIndexService(v,O).pipe((0,w.d)(1)),F=this.cloudVarService.getFeatureToggle(a._P4.ENABLE_RESERVED_SKU_FEATURES).pipe((0,h.x)());_.pipe((0,p.zg)(()=>O?this.getAppsStream().pipe((0,u.h)(!1)):(0,i.of)(!0))).subscribe(V=>{V&&this.indexService.triggerBuildingSearchIndex()}),(0,D.aj)([this.indexService.onTriggerBuildingSearchIndex(),C,F]).pipe((0,o.w)(V=>(this.isReservedSkuFeatureEnabled=V[2],this.logger.info("fetching apps to build search index"),this.getAppsAndBuildIndex())),(0,o.w)(V=>V?(0,i.of)(!0):this.indexService.getSearchIndexAvailability())).subscribe(V=>{this.indexService.setServerConnectivityStatus(V),this.isSearchActive&&this.indexService.triggerSearch()})}searchMode(){return this.breakpointObserver.observe([T.wO.IPhone,f.u3.XSmall]).pipe((0,t.U)(v=>v.matches?s.N3.Concealed:s.N3.Default))}get isSearchActive$(){return this.isSearchActiveSub.asObservable()}set isSearchActive(v){v&&this.router.url!==a.nnJ.GamesSectionGridL1&&this.pathService.navigateByUrl(a.nnJ.GamesSectionGridL1),this.isSearchActiveSub.next(v)}get isSearchActive(){return this.isSearchActiveSub.value}clearSearchQuery(){this.indexService.clearSearchQuery()}init(v){this.logger.info("init searchManager");const O=T.ng.isPWAModeOnSamsungTV();this.initSearchFunctionality(v,O),this.appBarService.actionClicked$.subscribe(C=>{"arrow_left"===C&&this.isSearchActive&&(this.customLocationService.navigateToPreviousRoute(a.MNE.Search),this.indexService.updateSearchActiveState(!1))})}}return E.\u0275fac=function(v){return new(v||E)(c.LFG(T.ed),c.LFG(r.xB),c.LFG(g.P),c.LFG(a.No2),c.LFG(T.OL),c.LFG(r.oD),c.LFG(f.Yg),c.LFG(I.ad),c.LFG(a.X5k),c.LFG(a.unb),c.LFG(a.$lO),c.LFG(G.F0))},E.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},693:(He,de,e)=>{"use strict";e.d(de,{c:()=>a});var n=e(79441),i=e(2316),D=e(6484),m=e(71258),y=e(82883),T=e(30582),r=e(80181);let a=(()=>{class s{constructor(l,t,w){this.loggingService=l,this.activatedRoute=t,this.deeplinkService=w,this.destroy$=new n.xQ}ngOnInit(){this.deeplinkService.handlePath(this.activatedRoute.snapshot.queryParamMap)}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return s.\u0275fac=function(l){return new(l||s)(i.Y36(D.ed),i.Y36(m.gz),i.Y36(y._))},s.\u0275cmp=i.Xpm({type:s,selectors:[["gfn-deeplink"]],decls:3,vars:0,consts:[["fxLayout","column","fxFlexFill","",1,"common-window"],["fxLayoutAlign","center center","fxFlexFill","",1,"layout-spinner-container"],["mode","indeterminate","color","accent","diameter","48","strokeWidth","4",1,"layout-spinner"]],template:function(l,t){1&l&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._UZ(2,"mat-progress-spinner",2),i.qZA(),i.qZA())},directives:[T.xw,T.s9,T.Wh,r.Ou],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{background:transparent;height:100%}body[_ngcontent-%COMP%]{margin:0;overflow:hidden!important;height:100%;max-width:100%;-webkit-touch-callout:none}body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none}.common-window[_ngcontent-%COMP%]   .common-container-overflow[_ngcontent-%COMP%]{overflow-y:overlay;overflow-x:hidden;max-height:100%}.common-window[_ngcontent-%COMP%]   .common-overflow-auto[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden}.common-window[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{background:rgba(51,51,51,.5);border-radius:0}.common-window[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]:not(.mat-card-no-hover):hover{box-shadow:0 3px 15px 1px #000000bf}[_ngcontent-%COMP%]::selection{background:#478b06}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:0;box-shadow:inset 0 0 1px #ffffff40}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:0;background:#343434;box-shadow:inset 0 0 6px #33333380}[_ngcontent-%COMP%]::-webkit-scrollbar-corner{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#cdcdcd}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:active{background:#888888}[_ngcontent-%COMP%]:not(:hover)::-webkit-scrollbar-track{background:transparent;box-shadow:none}.dialog-background[_ngcontent-%COMP%], .final-black-gradient[_ngcontent-%COMP%], .gray-overlay[_ngcontent-%COMP%], .black-gradient[_ngcontent-%COMP%], .white-gradient[_ngcontent-%COMP%], .ext-background-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.center-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.gfn-background-plain[_ngcontent-%COMP%]{background-color:#000}.gfn-background-plain[_ngcontent-%COMP%]   .splash-gfn-logo[_ngcontent-%COMP%]{z-index:1}.gfn-background[_ngcontent-%COMP%]{background-color:#000;background-image:url(assets/hashed/gfn_background_tile.f5b6255f90313d1dc5f0.png);background-repeat:repeat}.gfn-background-grey[_ngcontent-%COMP%]{background-color:#191919;background-repeat:repeat}.gfn-background[_ngcontent-%COMP%]   .splash-gfn-logo[_ngcontent-%COMP%]{z-index:1}@media screen and (max-width: 599px){.splash-gfn-logo[_ngcontent-%COMP%]{width:84px;height:64px;margin-bottom:16px}}@media screen and (min-width: 600px){.splash-gfn-logo[_ngcontent-%COMP%]{width:138px;height:104px;margin-bottom:24px}}@media screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait),screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait),screen and (device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait){.splash-gfn-logo[_ngcontent-%COMP%]{margin-bottom:24px}}@media screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait),screen and (device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait),screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait),screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3),screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2),screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2){.splash-gfn-logo[_ngcontent-%COMP%]{margin-bottom:20px}}@media screen and (device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3),screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3),screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2){.splash-gfn-logo[_ngcontent-%COMP%]{margin-bottom:48px}}@media screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3){.splash-gfn-logo[_ngcontent-%COMP%]{margin-bottom:50px}}@media screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3){.splash-gfn-logo[_ngcontent-%COMP%]{margin-bottom:44px}}.white-gradient[_ngcontent-%COMP%]{background-image:radial-gradient(circle closest-corner at top,rgba(255,255,255,.2),rgba(255,255,255,.05) 50%,rgba(255,255,255,0))}.black-gradient[_ngcontent-%COMP%]{background-image:linear-gradient(to right,rgba(0,0,0,.8) 0%,rgba(0,0,0,.4) 25%,rgba(0,0,0,.2) 35%,rgba(0,0,0,.2) 65%,rgba(0,0,0,.4) 75%,rgba(0,0,0,.8) 100%)}.gray-overlay[_ngcontent-%COMP%]{background-color:#0000002e}.final-black-gradient[_ngcontent-%COMP%]{background-image:linear-gradient(180deg,rgba(0,0,0,0) 0%,black 50% 100%)}.dialog-background[_ngcontent-%COMP%]{flex-direction:column!important}.common-window[_ngcontent-%COMP%]{background:#0e1114 url(assets/hashed/spotlight-bg.f61f4d8cba4a513a9a5c.png) no-repeat center top}.common-window[_ngcontent-%COMP%]   .common-window-content[_ngcontent-%COMP%]{background:#191919;background-attachment:fixed}.common-window[_ngcontent-%COMP%]   .mat-accent.foreground[_ngcontent-%COMP%]{color:#76b900}.common-window[_ngcontent-%COMP%]   div.mat-right-section[_ngcontent-%COMP%]{position:absolute;right:28px;bottom:20px}mat-icon.mat-12[_ngcontent-%COMP%], .font-size-sm[_ngcontent-%COMP%]{font-size:12px!important}mat-icon.mat-16[_ngcontent-%COMP%], .font-size-xl[_ngcontent-%COMP%]{font-size:16px!important}.gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{outline:none;background-color:#464646;min-width:112px;padding:0}.gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{list-style-type:none;min-height:36px;height:36px;min-width:64px;border-radius:0}.isLtr[_nghost-%COMP%]   .gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{--dummy1: 0;padding-left:16px}.isRtl[_nghost-%COMP%]   .gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{--dummy1: 0;padding-right:16px}.isLtr[_nghost-%COMP%]   .gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{--dummy2: 0;padding-right:16px}.isRtl[_nghost-%COMP%]   .gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{--dummy2: 0;padding-left:16px}.gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{line-height:36px}.gfnGamesMenu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover{list-style-type:none;background-color:#9f9f9f}@keyframes createBox{0%{transform:scale(0)}to{transform:scale(1)}}div[aria-label][_ngcontent-%COMP%]:hover:after{content:attr(aria-label);position:absolute;left:-50%;right:-50%;margin-top:15px;background-color:#464646;text-align:center;padding:5px 10px;z-index:100;animation:createBox .25s}.games-filter-menu.mat-focused.mat-primary[_ngcontent-%COMP%]   .mat-select-arrow[_ngcontent-%COMP%]{color:#ffffffb3}.games-filter-menu[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]{height:0}.games-filter-menu[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:none}.games-filter-menu[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0;width:65px;height:45px}.games-filter-menu[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{border-top:0}.isLtr[_nghost-%COMP%]   .settings-streaming-profile-details-container[_ngcontent-%COMP%]   .settings-streaming-profile-details[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-streaming-profile-details-container[_ngcontent-%COMP%]   .settings-streaming-profile-details[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{padding-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .settings-streaming-profile-details-container[_ngcontent-%COMP%]   .settings-streaming-profile-details[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{--dummy2: 0;padding-right:8px}.isRtl[_nghost-%COMP%]   .settings-streaming-profile-details-container[_ngcontent-%COMP%]   .settings-streaming-profile-details[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-streaming-profile-details-container[_ngcontent-%COMP%]   .settings-streaming-profile-details[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{padding-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .settings-streaming-profile-details-container[_ngcontent-%COMP%]   .settings-streaming-profile-details[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{--dummy2: 0;padding-left:8px}.settings-streaming-profile-details-container[_ngcontent-%COMP%]   .settings-streaming-profile-details[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{height:0}a.font-link-state[_ngcontent-%COMP%]:focus:not(:hover){border-bottom:0}.text-button-icon[_ngcontent-%COMP%]{padding:0 12px!important}.text-button-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:20px;font-size:18px;line-height:18px;width:20px}.isLtr[_nghost-%COMP%]   .text-button-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .text-button-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .text-button-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{--dummy2: 0;padding-right:4px}.isRtl[_nghost-%COMP%]   .text-button-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .text-button-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .text-button-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{--dummy2: 0;padding-left:4px}.mat-menu-panel.games-sort-dropdown[_ngcontent-%COMP%], .mat-menu-panel.toolbar-dropdown[_ngcontent-%COMP%]{border-radius:0}.mat-menu-panel.games-sort-dropdown[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .mat-menu-panel.toolbar-dropdown[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3}.mat-select-panel.games-filter-dropdown[_ngcontent-%COMP%]{max-height:calc(min(396px,calc(100vh - 139px)));width:270px;border-radius:0;margin-top:3px}.isLtr[_nghost-%COMP%]   .mat-select-panel.games-filter-dropdown[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .mat-select-panel.games-filter-dropdown[_ngcontent-%COMP%]{margin-left:-212px}html[dir=ltr][_ngcontent-%COMP%]   .mat-select-panel.games-filter-dropdown[_ngcontent-%COMP%]{--dummy3: 0;margin-left:-212px}.isRtl[_nghost-%COMP%]   .mat-select-panel.games-filter-dropdown[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .mat-select-panel.games-filter-dropdown[_ngcontent-%COMP%]{margin-right:-212px}html[dir=rtl][_ngcontent-%COMP%]   .mat-select-panel.games-filter-dropdown[_ngcontent-%COMP%]{--dummy3: 0;margin-right:-212px}.mat-select-panel.games-filter-dropdown.small-screen[_ngcontent-%COMP%]{max-height:calc(min(396px,calc(100vh - 121px)))}.mat-select-panel.games-filter-dropdown.ng-animating[_ngcontent-%COMP%]{display:none}[_ngcontent-%COMP%]:not(.mobile-view).game-section-view   .games-filter-dropdown[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:unset}[_ngcontent-%COMP%]:not(.mobile-view).games-filter-dropdown.mat-primary.mat-select-panel{margin-top:10px}.games-filter-dropdown[_ngcontent-%COMP%]   div.mat-select-arrow[_ngcontent-%COMP%]{margin:-24px 4px}.games-filter-dropdown[_ngcontent-%COMP%]   .mat-optgroup-label[_ngcontent-%COMP%]{color:#ffffffe6;padding:4px 16px 0}.games-filter-dropdown[_ngcontent-%COMP%]   .mat-pseudo-checkbox[_ngcontent-%COMP%]{border-radius:0}.isLtr[_nghost-%COMP%]   .games-filter-dropdown[_ngcontent-%COMP%]   .mat-pseudo-checkbox[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .games-filter-dropdown[_ngcontent-%COMP%]   .mat-pseudo-checkbox[_ngcontent-%COMP%]{margin-right:23px}html[dir=ltr][_ngcontent-%COMP%]   .games-filter-dropdown[_ngcontent-%COMP%]   .mat-pseudo-checkbox[_ngcontent-%COMP%]{--dummy4: 0;margin-right:23px}.isRtl[_nghost-%COMP%]   .games-filter-dropdown[_ngcontent-%COMP%]   .mat-pseudo-checkbox[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .games-filter-dropdown[_ngcontent-%COMP%]   .mat-pseudo-checkbox[_ngcontent-%COMP%]{margin-left:23px}html[dir=rtl][_ngcontent-%COMP%]   .games-filter-dropdown[_ngcontent-%COMP%]   .mat-pseudo-checkbox[_ngcontent-%COMP%]{--dummy4: 0;margin-left:23px}.games-filter-dropdown[_ngcontent-%COMP%]   .mat-pseudo-checkbox-checked[_ngcontent-%COMP%]{background:#76b900}.games-filter-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:0;background:rgba(255,255,255,.16)}.games-filter-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.32)}.games-filter-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:active{background:rgba(255,255,255,.48)}.scroll-view[_ngcontent-%COMP%]   .cdk-virtual-scroll-content-wrapper[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]{flex:1 1 0%;width:100%;height:100%;box-sizing:border-box}"]}),s})()},97497:(He,de,e)=>{"use strict";e.r(de),e.d(de,{DeeplinkModule:()=>s});var n=e(54364),i=e(66660),D=e(12556),m=e(71258),y=e(86392),T=e(6484),r=e(41393),a=e(2316);let s=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=a.oAB({type:p}),p.\u0275inj=a.cJS({imports:[[n.ez,D.lUL,i.o9,r.Q,T.it,(0,T.zv)(),m.Bz.forChild(y.v)]]}),p})()},86392:(He,de,e)=>{"use strict";e.d(de,{v:()=>i});const i=[{path:"",component:e(693).c,runGuardsAndResolvers:"paramsOrQueryParamsChange"}]},82883:(He,de,e)=>{"use strict";e.d(de,{_:()=>P});var n=e(6484),i=e(12556),D=e(79441),m=e(81134),y=e(34361),T=e(61486),r=e(45871),a=e(130),s=e(90490),p=e(85816),l=e(67202),t=e(53466),w=e(98636),h=e(33927),u=e(18293),o=e(9170),f=e(68991),c=e(2316),g=e(71258),I=e(74826),G=e(15643),x=e(68674),E=e(43124);let P=(()=>{class v{constructor(C,_,F,V,b,B,U,A,S,Y,se,fe,$,ae,me,ye,ue,X,j,K,Z){this.loggingService=C,this.router=_,this.pathService=F,this.layoutService=V,this.productTourService=b,this.lcarsService=B,this.gameShareUrlService=U,this.oobeService=A,this.launchService=S,this.gameLaunchAnalyticsService=Y,this.ownershipSyncService=se,this.redirectService=fe,this.deeplinkHelperService=$,this.gridService=ae,this.telemetryUtilService=me,this.telemetryService=ye,this.guestModeService=ue,this.networkConfigurationService=X,this.nativeEventService=j,this.playtestLiveService=K,this.unsupportedBrowserService=Z,this.hideDeeplinkOverlay$=new D.xQ,this.viewGameQueryParams={[i.uE5.GameId]:"",[i.uE5.ShowEvidencePanel]:!1,[i.uE5.SectionId]:""},this.isViewGameInProgress=!1,this.deeplinkedGameChangeSubject=new D.xQ,this.logger=this.loggingService.getLogger("DeeplinkService"),this.handlerMap=new Map([[i.EMz.PlayGame,{handle:this.handlePlayGame.bind(this),canHandle:this.canHandlePlayGame.bind(this)}],[i.EMz.ViewGame,{handle:this.handleViewGame.bind(this),canHandle:this.canHandleViewGame.bind(this)}]]),this.registerURLRouteChangeEvent()}static setIsPlaytestSession(C){v.isPlaytestSession=C}static getIsPlaytestSession(){return v.isPlaytestSession}removeDeeplinkOverlay(){this.hideDeeplinkOverlay$.next(!0)}markViewGameComplete(){this.isViewGameInProgress=!1}getViewGameDeeplinkInfo(){return this.viewGameQueryParams[i.uE5.ShowEvidencePanel]=this.isViewGameInProgress,this.viewGameQueryParams}setViewGameDeeplinkInfo(C,_,F,V){this.viewGameQueryParams={[i.uE5.GameId]:C,[i.uE5.SectionId]:F,[i.uE5.ShowEvidencePanel]:_,[i.uE5.Store]:V}}get deeplinkedGameChanged$(){return this.deeplinkedGameChangeSubject.asObservable()}navigateToGameDeeplink(C,_){this.getDeeplinkLandingInfo(C).pipe((0,p.zg)(F=>this._navigateToGameDeeplink(F,_))).subscribe()}_navigateToGameDeeplink(C,_,F){var V;return C.isGameFound?(this.isViewGameInProgress=!0,this.setViewGameDeeplinkInfo(C.gameId,!0,C.sectionId,F),this.deeplinkedGameChangeSubject.next(!0),C.landingPageUrl===i.nnJ.GamesSectionGridL1&&this.layoutService.applyFilter({serializedFilters:[],hierarchy:_}),(0,y.D)(this.pathService.navigateByUrl(C.landingPageUrl,{skipLocationChange:!0})).pipe((0,l.h)(i.cYw.None))):(0,m.of)(null!==(V=C.errorInfo)&&void 0!==V?V:i.cYw.Unknown)}registerURLRouteChangeEvent(){this.nativeEventService.get$(n.Nx.RouteChange,n.bi.Types.HandlerEventType.StructuredWindowEvent).subscribe(C=>{try{const _=JSON.parse(C);if(_&&_.hasOwnProperty("new-route")&&_["new-route"].includes(i.eKR)){const F=_["new-route"].substring(1);return void this.router.navigateByUrl(F)}this.logger.error("Invalid game change data given, ignoring")}catch(_){this.logger.error("Error while processing url-route change event. ",_)}},C=>{this.logger.error("Received error for RouteChange window event: ",C)})}canHandleViewGame(C){const _=C.has(i.uE5.GameId);return(0,m.of)({canHandle:_,isBadRequest:!_})}getDeeplinkLandingInfo(C){let _=i.cYw.Unknown;return(0,T.aj)([this.layoutService.getLayout(),this.layoutService.getApps()]).pipe((0,t.q)(1),(0,p.zg)(([F,V])=>{var b,B,U,A;let S=!1,Y=!1;const se=null===(b=null==F?void 0:F.data)||void 0===b?void 0:b.find(X=>X.name===i.whE.Main);if(!se)return this.logger.error("Error while fetching layout data, redirecting to default"),_=i.cYw.ServerError,(0,m.of)({gameId:C,isGameFound:!1,errorInfo:i.cYw.ServerError});const ae=((null===(U=null===(B=null==F?void 0:F.data)||void 0===B?void 0:B.find(X=>X.name===i.whE.Library))||void 0===U?void 0:U.sections)||[]).concat((null==se?void 0:se.sections)||[]);let me,ye;for(let X=0;X<ae.length;X++){const j=ae[X];for(let K=0;K<j.items.length;K++)if(j.items[K].id===C){ye=K,me=j,S=!0;break}if(me)break}return(null===(A=null==V?void 0:V.data)||void 0===A?void 0:A.some(X=>X.id===C))&&(Y=!0),Y||S?(0,m.of)({gameId:C,isGameFound:!0,sectionId:null==me?void 0:me.id,errorInfo:i.cYw.None,landingPageUrl:S?i.nnJ.Games:i.nnJ.GamesSectionGridL1}):(this.logger.error("Deeplinked game not present in layout data, redirecting to default"),_=i.cYw.GameNotFound,(0,m.of)({gameId:C,isGameFound:!1,errorInfo:i.cYw.GameNotFound}))}))}handleViewGame(C){const _=C.get(i.uE5.GameId),F=C.get(i.uE5.Store);return this.getDeeplinkLandingInfo(_).pipe((0,w.b)(V=>{V.isGameFound&&this.productTourService.disableProductTour()}),(0,p.zg)(V=>this._navigateToGameDeeplink(V,f.Ju.Deeplink,F)),(0,h.U)(V=>({success:V===i.cYw.None,error:V})))}canHandlePlayGame(C){return C.has(i.uE5.GameId)||C.has(i.uE5.CmsId)?this.unsupportedBrowserService.shouldDisplayPWAGuidance$.pipe((0,t.q)(1),(0,p.zg)(F=>(0,m.of)(F?{canHandle:!1,isBadRequest:!1,redirectLink:i.fFR.PwaWall}:{canHandle:!0,isBadRequest:!1}))):(0,m.of)({canHandle:!1,isBadRequest:!0})}handlePlayGame(C){let _,F,V,b,B,U,A,S,Y;const se=Date.now();if(C.has(i.uE5.GameId))_=C.get(i.uE5.GameId),F=!1;else{if(!C.has(i.uE5.CmsId))return(0,m.of)({success:!1,error:i.cYw.BadRequest});_=C.get(i.uE5.CmsId),F=!0}U=C.get(i.uE5.PartnerData),A=C.get(i.uE5.ExtraData);const fe=this.deeplinkHelperService.getUpdatedPartnerId(C.get(i.uE5.PartnerId))||"";let $=(0,m.of)(!1),ae=null;if(C.has(i.uE5.Nonce)){this.guestModeService.isGuestMode=!0,ae=C.get(i.uE5.Nonce);const me=C.get(i.uE5.Redirect)||"";if(""!==me||0!==this.guestModeService.guestModeAllowedRedirectUrlsList.length){if(!this.guestModeService.guestModeAllowedRedirectUrlsList.includes(me))return(0,m.of)({success:!1,error:i.cYw.RedirectURLNotAllowed});this.guestModeService.initializeGuestModeExitUrl(me,i.et_.Success)}$=this.guestModeService.setAuthDataUsingNonce(ae,fe,_,F)}if(A){S=atob(A);try{JSON.parse(S)[0].id===i.$Yn.VDKPlayTest?B=JSON.parse(S)[0].data:this.logger.error("opaqueData data for unknown client ",JSON.parse(S)[0].id)}catch(me){this.logger.error("invalid opaqueData ",me)}}return $.pipe((0,p.zg)(me=>B?(this.logger.info("isPlaytestSession: true"),v.setIsPlaytestSession(!0),this.playtestLiveService.initiatePlaytestLive(_,B,ae)):(this.logger.info("isPlaytestSession: false"),v.setIsPlaytestSession(!1),(0,m.of)(!0))),(0,w.b)(()=>{U&&this.deeplinkHelperService.setDeeplinkPartnerData(U)}),(0,p.zg)(me=>this.lcarsService.getAppdata(_,{isCmsId:F}).pipe((0,u.K)(ye=>(this.logger.error("Error while fetching appdata",ye),(0,r._)("serverError"))))),(0,p.zg)(me=>{var ye,ue,X;return(null==me?void 0:me.length)?(F&&(V=null===(ye=me[0].variants.find(j=>j.id===_))||void 0===ye?void 0:ye.shortName,b=me[0].title,Y=null!==(X=null===(ue=me[0].images)||void 0===ue?void 0:ue.HERO_IMAGE)&&void 0!==X?X:""),(0,m.of)(this.gameShareUrlService.updateShareUrlInfo(me[0].id,me[0].images.TV_BANNER))):(this.logger.error("Empty/null response in appmetadata"),(0,r._)("serverError"))}),(0,p.zg)(me=>this.oobeService.oobeDialogClosedState),(0,o.h)(me=>!0===me),(0,p.zg)(me=>{if(this.gameLaunchAnalyticsService.setGameLaunchMetadata(void 0,se,this.ownershipSyncService.isAccountLinked(i.iDX.Epic),!1),C.has(i.uE5.WindowedMode)){const ye=JSON.parse(C.get(i.uE5.WindowedMode))||!1;this.deeplinkHelperService.windowedMode=ye}return this.launchService.launchStreamer(F?parseInt(_,10):void 0,F?V:void 0,i.xld.Default,se,void 0,this.guestModeService.isGuestMode?i.zO5.Deeplink:i.zO5.GeForceNOW,this.guestModeService.isGuestMode||this.deeplinkHelperService.isSpecialAffiliatePartner(fe)?fe:void 0,F?void 0:_,this.guestModeService.isGuestMode?this.guestModeService.getGuestModeExitUrl():null,b,Y)}),(0,h.U)(me=>({success:me,error:me?i.cYw.None:i.cYw.Unknown})),(0,u.K)(me=>{let ye=i.cYw.Unknown;switch(this.deeplinkHelperService.resetDeeplinkPartnerData(),me){case"serverError":ye=i.cYw.ServerError;break;case i.cYw.Unauthorized:ye=i.cYw.Unauthorized;break;case i.cYw.PartnerAuthFailed:ye=i.cYw.PartnerAuthFailed}return(0,m.of)({success:!1,error:ye})}))}setDeeplinkZoneOverride(C,_){var F;const V=C.get(i.uE5.Zone);if(V)try{const b=new URL(V).host;(null===(F=this.networkConfigurationService.deeplinkOverrideZone)||void 0===F?void 0:F.address)!==b&&(this.networkConfigurationService.deeplinkOverrideZone=this.deeplinkHelperService.getDeeplinkZoneOverride(V,_),this.gridService.refreshServerInfo())}catch(b){this.logger.error("Incorrect deeplink override zone",b)}}handlePath(C){const _=C.get(i.uE5.Action)||i.iJP;this.handlerMap.get(_).handle(C).pipe((0,w.b)(F=>{this.sendTelemetry(C,F)})).subscribe(F=>{this.logger.info(F),F.success||(F.error===i.cYw.Unauthorized||F.error===i.cYw.PartnerAuthFailed||F.error===i.cYw.RedirectURLNotAllowed?this.oobeService.oobeDialogClosedState.pipe((0,w.b)(()=>{F.error===i.cYw.RedirectURLNotAllowed?(window.location.replace(document.baseURI),window.location.reload()):this.redirectService.redirectToExternalUrl(this.guestModeService.getGuestModeExitUrl(),{replace:!0})})).subscribe():this.pathService.navigateByUrl(i.fFR.DefaultRedirect))},F=>{this.logger.error("Error while handling deeplink, redirecting to mall",F),this.pathService.navigateByUrl(i.fFR.DefaultRedirect)})}canActivate(C,_){const F=C.queryParamMap;return this.setDeeplinkZoneOverride(F,_.url),this.deeplinkHelperService.getFeatureToggle().pipe((0,p.zg)(V=>{var b;const B=F.get(i.uE5.Action)||i.iJP,U={canHandle:!1,isBadRequest:!0};if(!this.handlerMap.has(B))return this.logger.error("No handler for specified action"),(0,m.of)(U);const A=i.g7O[B];return A?V[A]?(F.get(i.uE5.Nonce)&&(this.guestModeService.guestModeAllowedRedirectUrlsList=(null===(b=V.guestMode[F.get(i.uE5.PartnerId)])||void 0===b?void 0:b.allowedRedirectUrls)||[]),this.handlerMap.get(B).canHandle(F).pipe((0,w.b)(se=>{se.canHandle||this.logger.error("Invalid set of parameters")}))):(U.isBadRequest=!1,this.logger.error("Action not enabled in feature toggle"),(0,m.of)(U)):(this.logger.error("Feature toggle not configured for action"),(0,m.of)(U))}),(0,w.b)(V=>{V.isBadRequest&&this.sendTelemetry(F,{success:!1,error:i.cYw.BadRequest})}),(0,h.U)(V=>!!V.canHandle||this.router.createUrlTree(V.redirectLink?[V.redirectLink]:[i.fFR.DefaultRedirect])))}sendTelemetry(C,_){if((C.get(i.uE5.UtmSource)||"")!==i.zVP.Application){const V=i.rmE[C.get(i.uE5.Action)]||i.rmE[i.iJP],b=C.get(i.uE5.GameId)||"",B=parseInt(C.get(i.uE5.CmsId),10)||0,U=[_.error||i.cYw.None],A=C.get(i.uE5.Store)||"",S=C.get(i.uE5.Zone)||"",Y=C.get(i.uE5.UtmSource)||"",se=C.get(i.uE5.UtmCampaign)||"",fe=C.get(i.uE5.UtmMedium)||"",$=C.get(i.uE5.UtmTerm)||"",ae=C.get(i.uE5.UtmContent)||"",me=this.deeplinkHelperService.getUpdatedPartnerId(C.get(i.uE5.PartnerId))||"";this.deeplinkHelperService.getFeatureToggle().pipe((0,o.h)(ye=>ye.sendDeeplinkTelemetry),(0,p.zg)(ye=>(0,a.s)(()=>!!S,this.gridService.deeplinkZoneOverrideStatus,(0,m.of)(!1))),(0,t.q)(1),(0,p.zg)(ye=>(ye&&U.push(i.cYw.ZoneNotFound),(0,s.$R)(this.telemetryService.getDefaultClientConsentObserable(),this.telemetryService.getCommonDataObservable())))).subscribe(([ye,ue])=>{if(ye&&ue){const X=this.guestModeService.isGuestMode||this.deeplinkHelperService.isSpecialAffiliatePartner(me)?{useBeacon:!0}:null;this.telemetryUtilService.sendDeeplinkSourceEvent({gameId:b,cmsId:B,action:V,source:"",store:A,zone:S,errors:U,utmSource:Y,utmCampaign:se,utmMedium:fe,utmTerm:$,utmContent:ae,partnerId:me},X)}})}}}return v.isPlaytestSession=!1,v.\u0275fac=function(C){return new(C||v)(c.LFG(n.ed),c.LFG(g.F0),c.LFG(i.unb),c.LFG(I.P),c.LFG(G.Q3),c.LFG(i.zcQ),c.LFG(i.tDF),c.LFG(i.HKp),c.LFG(x.rw),c.LFG(i.V89),c.LFG(i.qMk),c.LFG(i.VHe),c.LFG(i.gIP),c.LFG(i.rIG),c.LFG(i.wU6),c.LFG(E.y0),c.LFG(i.o15),c.LFG(i.XS0),c.LFG(n.o1),c.LFG(i.Q0y),c.LFG(i.rHN))},v.\u0275prov=c.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},31805:(He,de,e)=>{"use strict";e.d(de,{_x:()=>m._}),e(693),e(86392),e(97497);var m=e(82883)},41393:(He,de,e)=>{"use strict";e.d(de,{Q:()=>P});var n=e(1707),i=e(42118),D=e(22213),m=e(52529),y=e(80221),T=e(80181),r=e(365),a=e(15644),s=e(32080),p=e(50298),l=e(70781),t=e(28417),w=e(64106),h=e(37007),u=e(53616),o=e(86608),f=e(42791),c=e(79243),g=e(1124),I=e(51606),G=e(22573),x=e(2316);const E=[n.u5,l.ot,i.QW,D.Is,g.t,t.ie,y.Tx,w.g0,T.Cq,r.Cv,m.Ps,p.AV,a.Fk,s.rP,h.LD,u.KP,o.SJ,G.hp,f.Cl,c.Hi,I.rt];let P=(()=>{class v{}return v.\u0275fac=function(C){return new(C||v)},v.\u0275mod=x.oAB({type:v}),v.\u0275inj=x.cJS({imports:[[n.u5,...E],n.u5,l.ot,i.QW,D.Is,g.t,t.ie,y.Tx,w.g0,T.Cq,r.Cv,m.Ps,p.AV,a.Fk,s.rP,h.LD,u.KP,o.SJ,G.hp,f.Cl,c.Hi,I.rt]}),v})()},68674:(He,de,e)=>{"use strict";e.d(de,{rw:()=>_,dX:()=>V});var n=e(76491),i=e(81134),D=e(79441),m=e(45871),y=e(92941),T=e(8117),r=e(34361),a=e(85816),s=e(33927),p=e(53466),l=e(9170),t=e(79902),w=e(18293),h=e(33987),u=e(6484),o=e(2984),f=e(12556),c=e(2316),g=e(58283),I=e(22213),G=e(71258),x=e(57390),E=e(22573);const P="Previous game launch is in progress",O_body_text="common.connectionError",O_primaryButton={text:"common.close",accentColor:!0};var C=(()=>{return(b=C||(C={})).GeforceNow="GeForceNOW",b.GeForceNowStreamer="GeForceNOWStreamer",C;var b})();let _=(()=>{class b{constructor(U,A,S,Y,se,fe,$,ae,me,ye,ue,X,j,K,Z,L,W,te,ie,Q){var k;this.loggingService=A,this.bridgeService=S,this.translateService=Y,this.dialog=se,this.telemetryUtilService=fe,this.ecomService=$,this.nativeEventService=ae,this.settingsService=me,this.systemInfoService=ye,this.router=ue,this.gameLaunchAnalyticsService=X,this.gameShareUrlService=j,this.ownershipSyncService=K,this.pathService=Z,this.dialogService=L,this.sharedStorageService=W,this.idmService=te,this.serviceWorkerService=ie,this.genericDialog=Q,this.logger=this.loggingService.getLogger("gfn/launch"),this.isLaunchInProgress$=new n.X(!1),this.mobileMode=!!(null===(k=null==U?void 0:U.featureEnablement)||void 0===k?void 0:k.mobileMode),this.isBrowserPlatform=u.ng.isBrowserPlatform()}initialize(){this.registerURLRouteChangeEvent(),this.registerForegroundEvent()}checkAccountLinking(U,A){return this.ownershipSyncService.getAccountLinkingStateForGame(U,A).pipe((0,a.zg)(S=>{if(S.isEnabled){const Y=this.ownershipSyncService.getAccountState(U);let se=f.ItH.Account_Link_Required;if(!Y.isAccountLinked){let fe=!1;return this.idmService.cachedUser.pipe((0,a.zg)($=>this.sharedStorageService.readBlock("accountLinking_"+$.data.userId)),(0,a.zg)($=>$.hideAccountLinkingDialog?(0,i.of)({returnValue:!0,dialogShown:!1}):(this.telemetryUtilService.sendPopUpDialogShownEvent(se),this.dialogService.openAccountLinkingValuePropDialog(Y).pipe((0,a.zg)(ae=>(fe=ae,this.telemetryUtilService.sendPopUpDialogClosedEvent(se,fe?f.XzU.Goto_Settings:f.XzU.Dialog_Closed),fe?this.ownershipSyncService.connect(U,!0):(0,i.of)(!1))),(0,s.U)(ae=>ae?(this.ownershipSyncService.syncCTATileClicked(),{returnValue:!0,dialogShown:!0}):(fe&&(this.closeOpenDialogs(),this.ownershipSyncService.navigateToAccountsSection()),{returnValue:!(fe||S.isRequired),dialogShown:!0}))))))}{const fe=Y.getExpirationStatus();if(fe===f.hB7.Expired||fe===f.hB7.ExpiresNow)return se=f.hB7.Expired?f.ItH.Account_Link_Expired:f.ItH.Account_Link_Expires_Soon,this.telemetryUtilService.sendPopUpDialogShownEvent(se),this.dialogService.openAccountLinkingExpirationDialog(Y,this.mobileMode).pipe((0,s.U)($=>(this.telemetryUtilService.sendPopUpDialogClosedEvent(se,$?f.XzU.Goto_Settings:f.XzU.Dialog_Closed),$||S.isRequired?(fe===f.hB7.ExpiresNow&&this.ownershipSyncService.setNotificationSettings({hideExpiresToday:!0}).pipe((0,p.q)(1)).subscribe(),this.closeOpenDialogs(),this.ownershipSyncService.navigateToAccountsSection(),{returnValue:!1,dialogShown:!0}):{returnValue:!0,dialogShown:!0})))}}return(0,i.of)({returnValue:!0,dialogShown:!1})}))}setGameLaunchData(U,A){this.gameLaunchAnalyticsService.setGameLaunchMetadata(A,U,this.ownershipSyncService.isAccountLinked(f.iDX.Epic),!0)}addDesktopShortcut(U,A){const S=Date.now(),Y={installed:!1,message:""};this.logger.info(`Adding\xa0Desktop\xa0Shortcut\xa0for\xa0${U.title},\xa0${U.cmsId},\xa0${A}.`);const se=new D.xQ;return this.telemetryUtilService.sendClickEvent(f.lzt.AddGameShortcut,U.cmsId,A,!0),this.ecomService.getUserMembership().pipe((0,l.h)(fe=>fe.membershipStatus!==f.Tn6.LoggedOut&&fe.membershipStatus!==f.Tn6.UnKnown),(0,p.q)(1),(0,a.zg)(fe=>fe.eComFeatureEnabled&&fe.membershipStatus===f.Tn6.UnEntitled?(this.ecomService.openJoinNowDialog(A),this.logger.info("add\xa0to\xa0desktop\xa0canceled\xa0as\xa0user\xa0is\xa0not\xa0entitled."),se.next(Y),se.complete(),(0,i.of)(Y)):this.translateService.get("interface.gametitle",{title:U.title}).pipe((0,t.w)($=>this.createDesktopShortcut($,U)),(0,w.K)($=>(this.telemetryUtilService.sendUserSessionEvent(f.Vwu.AddDesktopShortcut,f.N3X.Failure,S,$),se.next(Y),se.complete(),(0,m._)($))),(0,s.U)($=>{if($.installed){const ae={installed:!0,message:""};return this.logger.info("Created\xa0game\xa0desktop\xa0shortcut\xa0successfully"),this.telemetryUtilService.sendUserSessionEvent(f.Vwu.AddDesktopShortcut,f.N3X.Success,S),se.next(ae),se.complete(),$}{const ae=`Game\xa0desktop\xa0shortcut\xa0creation\xa0failed:\xa0${$}`;throw this.logger.error(ae),this.telemetryUtilService.sendUserSessionEvent(f.Vwu.AddDesktopShortcut,f.N3X.Failure,S,ae),se.next(Y),se.complete(),new Error("Game\xa0Desktop\xa0shortcut\xa0creation\xa0failed")}}))))}createDesktopShortcut(U,A){return this.systemInfoService.getOsInformation().pipe((0,s.U)(S=>{let Y=C.GeforceNow;return this.logger.info("Getting the OS info using System info Service :",S),"Windows"===S.Platform&&(Y=C.GeForceNowStreamer),Y}),(0,a.zg)(S=>{var Y;return this.bridgeService.executeCommand(o.Gh.Gfn.Streamer.AddDesktopShortcut,{streamer:S,parentGameId:null!==(Y=A.parentGameId)&&void 0!==Y?Y:"",cmsId:""+A.cmsId,appName:U,shortName:A.shortName,iconUrl:A.keyArtUrl})}),(0,a.zg)(S=>{if(S)return(0,i.of)(S);{const Y="Null InstallResult received while creating game shortcut";return this.logger.error(Y),(0,m._)(Y)}}))}openConnectionErrorDialog(){const U=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:"common.genericLoadError"},bodyText:{text:O_body_text},primaryButton:Object.assign({},O_primaryButton)}});U.primaryButtonClick.pipe((0,p.q)(1)).subscribe(()=>U.close())}requestUserAttention(){this.bridgeService.executeCommand(o.Gh.Common.Windowcontrol.RequestUserAttention).subscribe()}registerForegroundEvent(){this.nativeEventService.get$(u.Nx.ForegroundEvent,u.bi.Types.HandlerEventType.StructuredWindowEvent).subscribe(()=>{this.requestUserAttention()},U=>{this.logger.error("Received error in Foreground window event: ",U)})}registerURLRouteChangeEvent(){this.nativeEventService.get$(u.Nx.RouteChange,u.bi.Types.HandlerEventType.StructuredWindowEvent).subscribe(U=>{this.checkToLaunchGame(U)},U=>{this.logger.error("Received error for RouteChange window event: ",U)})}checkToLaunchGame(U){try{if((0,f.MAX)(this.router.url))return void this.logger.info("Ignoring RouteChange since we are already in Streamer");const A=JSON.parse(U);if(!(A&&A.hasOwnProperty("current-route")&&A.hasOwnProperty("new-route")&&A["new-route"].includes("cmsId")))return void this.logger.error("Invalid game change data given, ignoring");this.logger.info("Received game change data: ",A);const S=(0,f.A8q)(A["new-route"]),Y=S.cmsId,se=S.shortName,fe=S.launchSource,$=S.parentGameId,ae=S.appLaunchMode,me=S.accountLinked,ye=Date.now();this.gameLaunchAnalyticsService.setGameLaunchMetadata(se,ye,this.ownershipSyncService.isAccountLinked(f.iDX.Epic),!0),this.launchStreamer(Y,se,ae,ye,me,fe,S.sdkClient,$).subscribe(y.Z,y.Z)}catch(A){this.logger.error(`Game change data failed JSON parsing. Error: ${A} | Game change string: ${U}`)}}launchStreamer(U,A,S,Y,se=!1,fe=f.zO5.GeForceNOW,$=null,ae="",me=null,ye,ue){if((0,f.MAX)(this.router.url))return this.logger.info("Ignoring launching game, already in Streamer"),(0,i.of)(!1);window.jsInitStartTs=Y,this.closeOpenDialogs();const X=(0,f.IGn)({cmsId:U,shortName:A,appLaunchMode:S,launchSource:fe,sdkClient:$,parentGameId:ae,accountLinked:se,bgImageUrl:ue});if(!this.isBrowserPlatform&&this.settingsService.isVsyncChangedAndToggleSupported())return this.logger.info("Vsync state changed, need to restart game",X),this.settingsService.resetVsyncChanged(),this.restartAppWithParameters(X),T.E;{this.serviceWorkerService.postMessageSw({type:h.rL.GameLaunched,content:ye}),this.logger.info("Navigating to streamer url",X);let j=!1,K="",Z="";const L=this.router.routerState.snapshot.url,W=window.location.href;return this.logger.info("Router state snapshot url - ",L),this.logger.info("window href before streamer navigation - ",W),this.isLaunchInProgress$.pipe((0,p.q)(1),(0,a.zg)(te=>te?(0,m._)(P):(this.isLaunchInProgress$.next(!0),(0,i.of)(!0))),(0,a.zg)(te=>(0,r.D)(this.pathService.navigateByUrl(X))),(0,w.K)(te=>te===P?(0,m._)(te):(j=!0,K=te,Z=(0,f.bY)({cmsId:U,shortName:A,appLaunchMode:S,launchSource:fe,sdkClient:$,parentGameId:ae},!0),this.logger.error("Error while launching game",te,"attempting to launch with absolute URL",Z),window.location.href=Z,(0,i.of)(!0))),(0,a.zg)(te=>(te&&this.isBrowserPlatform&&!this.mobileMode&&(me?this.gameShareUrlService.setExitUrl(me):this.gameShareUrlService.setGameUrlAsExitUrl()),j?(this.logger.error(`Hit a router error while launching game, streamerUrl: ${X}, routerErrorMessage: ${K}`),this.logger.error(`New URL we set was ${Z}. Previous Href: ${W}, Previous SnapshotURL: ${L}`)):te||this.logger.error("No router error but navigation to streamer failed"),this.isLaunchInProgress$.next(!1),(0,i.of)(te))),(0,w.K)(te=>(this.logger.error("Navigation to streamer failed "+te),(0,i.of)(!1))))}}closeOpenDialogs(){this.dialog.closeAll()}restartAppWithParameters(U){const A="#"+U;this.logger.info("Restart app requested with launchArgument: ","--url-route="+A),this.bridgeService.executeCommand(o.Gh.Common.Applicationcontrol.Restart,{launchArguments:"--url-route="+A}).subscribe()}}return b.\u0275fac=function(U){return new(U||b)(c.LFG(f.VKt),c.LFG(u.ed),c.LFG(u.dF),c.LFG(g.sK),c.LFG(I.uw),c.LFG(f.wU6),c.LFG(f.BHV),c.LFG(u.o1),c.LFG(f.gbG),c.LFG(u.Ob),c.LFG(G.F0),c.LFG(f.V89),c.LFG(f.tDF),c.LFG(f.qMk),c.LFG(f.unb),c.LFG(f.xAy),c.LFG(x.OA),c.LFG(f.No2),c.LFG(h.HR),c.LFG(E.TX))},b.\u0275prov=c.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();var F=e(61486);let V=(()=>{class b{constructor(U,A,S,Y,se){this.loggingService=U,this.nesUserInfoService=A,this.localeService=S,this.idmService=Y,this.configuration=se,this.isRedeemEnabled$=new n.X(!1),this.redeemLinkURL$=new n.X(""),this.logger=this.loggingService.getLogger("RedeemService"),(0,F.aj)([this.idmService.accountStatusChanged,this.nesUserInfoService.providerInfo$]).subscribe(([fe,$])=>{if(fe.isAuthenticated)this.updateRedeemStatus($.gfnServiceEndpoints.find(ae=>ae.idpId===fe.idpId));else switch($.loginPreferredProviders.length){case 0:this.updateRedeemStatus($.gfnServiceEndpoints.find(ae=>ae.loginProvider===$.defaultProvider));break;case 1:this.updateRedeemStatus($.gfnServiceEndpoints.find(ae=>ae.loginProvider===$.loginPreferredProviders[0]));break;default:{const ae=$.gfnServiceEndpoints.filter(me=>$.loginPreferredProviders.includes(me.loginProvider));ae.every(me=>me.redeemRedirectUrl===ae[0].redeemRedirectUrl)?this.updateRedeemStatus(ae[0]):this.updateRedeemStatus({redeemRedirectUrl:this.configuration.redirect.serverUrl.split("?")[0]+"?page="+f.qBq.GFN_PC_REDEEM_MULTI_AFFILIATE});break}}},fe=>{this.logger.info("Error fetching the userinfo/provider info for redeem ",fe),this.isRedeemEnabled$.next(!1),this.redeemLinkURL$.next("")})}updateRedeemStatus(U){if(null==U?void 0:U.redeemRedirectUrl){const A=new URL(U.redeemRedirectUrl);A.searchParams.append("language",this.localeService.getLocale()),this.redeemLinkURL$.next(A.href),this.isRedeemEnabled$.next(!0)}else this.isRedeemEnabled$.next(!1),this.redeemLinkURL$.next("")}isRedeemEnabled(){return this.isRedeemEnabled$.asObservable()}}return b.\u0275fac=function(U){return new(U||b)(c.LFG(u.ed),c.LFG(f.fIQ),c.LFG(u.OL),c.LFG(f.No2),c.LFG(f.VKt))},b.\u0275prov=c.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},69798:(He,de,e)=>{"use strict";var n=e(71570),i=e(2316),m=(e(58256),e(54364)),y=e(71918),T=e(53882),r=e(66660),a=e(71258),s=e(1707),p=e(58283),l=e(41393),t=e(77436),w=e(15643),h=e(59321),u=e(18137),o=e(99520),f=e(6484),c=e(74984);let g=(()=>{class Fe{constructor(he,je,lt){this.uiStateSub=void 0,this.showGrid=!1;const Bt=je.getLogger("OOGG");he.init().then(()=>{Bt.info("OOGG singleton services initialized")}),lt.setDefaultNavButton({})}ngOnDestroy(){this.uiStateSub&&this.uiStateSub.unsubscribe()}prepareRoute(he){return he&&he.isActivated&&he.activatedRoute?"oogg":"void"}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.Y36(o.Vu),i.Y36(f.ed),i.Y36(c.ad))},Fe.\u0275cmp=i.Xpm({type:Fe,selectors:[["nv-oogg"]],decls:4,vars:0,consts:[["fxFlexFill","","fxLayout","column"],["fxFlex","none","logoBehavior","showWhenNoNavButton"],["fxFlex","",1,"master"],["name","oogg"]],template:function(he,je){1&he&&(i.TgZ(0,"div",0),i._UZ(1,"nv-app-bar",1),i.TgZ(2,"div",2),i._UZ(3,"router-outlet",3),i.qZA(),i.qZA())},styles:["[_nghost-%COMP%]{width:100%;height:100%;-webkit-user-select:none;user-select:none;cursor:default;margin:0;background:rgba(0,0,0,0)!important}"]}),Fe})();var I=e(30582),G=e(36371);let x=(()=>{class Fe{}return Fe.\u0275fac=function(he){return new(he||Fe)},Fe.\u0275mod=i.oAB({type:Fe}),Fe.\u0275inj=i.cJS({imports:[[c.ip,m.ez,a.Bz,r.o9,u.Q,p.aw.forChild()]]}),Fe})();i.B6R(g,[I.s9,I.xw,G.w,I.yH,a.lC],[]);var E=e(51711),v=(e(68716),e(84051)),O=e(49436),C=e(22573);let _=(()=>{class Fe{constructor(he){if(he)throw new Error("HomeModule already loaded; Import in root module only.")}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(Fe,12))},Fe.\u0275mod=i.oAB({type:Fe}),Fe.\u0275inj=i.cJS({providers:[],imports:[[m.ez,r.o9,s.u5,a.Bz,l.Q,p.aw.forRoot(),t.t8,w._F,h.n_,x,c.ip,f.it,C.hp]]}),Fe})();var F=e(79441),V=e(53466),b=e(22663),B=e(9170),U=e(68991),A=e(3076),S=e(12556),Y=e(51606),se=e(86608),fe=e(70781),$=e(52529);const ae=["sidenav"];function me(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"button",12,5),i.NdJ("click",function(){return i.CHM(he),i.oxw().onClickGallery()}),i.TgZ(2,"div",6),i.TgZ(3,"div",7),i._UZ(4,"mat-icon",15),i.qZA(),i.TgZ(5,"div",9),i.TgZ(6,"span",10),i._uU(7),i.ALo(8,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}2&Fe&&(i.xp6(7),i.Oqu(i.lcZ(8,1,"menu.gallery")))}const ye=["*"];let ue=(()=>{class Fe{constructor(he,je,lt,Bt,hn,qt){this.loggingService=he,this.router=je,this.idmService=lt,this.pathService=Bt,this.focusMonitor=hn,this.spatialNavigationService=qt,this.isBrowserPlatform=!1,this.showGallery=!1,this.destroy$=new F.xQ,this.logger=this.loggingService.getLogger("sidebar.component"),this.isBrowserPlatform=f.ng.isBrowserPlatform(),this.idmService.accountStatusChanged.pipe((0,b.R)(this.destroy$)).subscribe(sn=>{this.showGallery=!this.isBrowserPlatform&&sn.isAuthenticated})}ngAfterViewInit(){this.spatialNavigationService.enabled&&this.sidenav.openedChange.pipe((0,b.R)(this.destroy$)).subscribe(he=>{he?this.startMonitoringFocus():this.stopMonitoringFocus()})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}toggle(){this.sidenav.toggle()}close(){this.sidenav.close()}startMonitoringFocus(){document.activeElement instanceof HTMLElement&&(this.lastFocusedElement=document.activeElement),this.spatialNavigationService.focusFirstChild(this.container.nativeElement),this.focusMonitorSubscription=this.focusMonitor.monitor(this.container.nativeElement,!0).pipe((0,b.R)(this.destroy$)).subscribe(he=>{this.sidenav.opened&&(he?document.activeElement instanceof HTMLElement&&(this.focusedElement=document.activeElement):this.focusedElement&&this.spatialNavigationService.focusViaLastOrigin(this.focusedElement))})}stopMonitoringFocus(){var he;null===(he=this.focusMonitorSubscription)||void 0===he||he.unsubscribe(),this.focusMonitorSubscription=void 0,this.focusMonitor.stopMonitoring(this.container.nativeElement),this.lastFocusedElement&&(this.spatialNavigationService.focusViaLastOrigin(this.lastFocusedElement),this.lastFocusedElement=void 0),this.focusedElement=void 0}onClickGames(){this.logger.info("Games clicked"),this.onNavigate("/layout/games"),this.logger.trace(A.y$.UserGesture,A.Px.Settings,A.Rf.close," Settings option")}onClickGallery(){this.logger.info("Gallery clicked"),this.onNavigate("/layout/gallery")}onClickSettings(){this.logger.trace(A.y$.UserGesture,A.Px.Settings,A.Rf.open," Settings option"),this.logger.info("Settings clicked?"),this.onNavigate("/layout/settings")}onNavigate(he){this.close(),this.router.url!==he&&this.pathService.navigate([he])}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.Y36(f.ed),i.Y36(a.F0),i.Y36(S.No2),i.Y36(S.unb),i.Y36(Y.tE),i.Y36(C.jr))},Fe.\u0275cmp=i.Xpm({type:Fe,selectors:[["gfn-sidebar"]],viewQuery:function(he,je){if(1&he&&(i.Gf(ae,7),i.Gf(ae,5,i.SBq)),2&he){let lt;i.iGM(lt=i.CRH())&&(je.sidenav=lt.first),i.iGM(lt=i.CRH())&&(je.container=lt.first)}},ngContentSelectors:ye,decls:25,vars:8,consts:[["fxFlexFill","",1,"nv-hig",3,"hasBackdrop"],["autoFocus","false",1,"main-sidebar-drawer"],["sidenav",""],["fxLayout","column","fxFlex",""],["mat-button","","tabIndex","0",1,"nv-item-button-container","complex-button","font-body2",3,"click"],["button",""],["fxFlex","","fxLayout","row","fxLayoutAlign","start start"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"nv-item-icon"],["svgIcon","game_controller"],["fxFlexAlign","center","fxLayout","column","fxLayoutAlign","start start","fxFlex","",1,"nv-item-labels"],[1,"font-body2"],["mat-button","","class","nv-item-button-container complex-button font-body2","tabIndex","1",3,"click",4,"ngIf"],["mat-button","","tabIndex","1",1,"nv-item-button-container","complex-button","font-body2",3,"click"],["svgIcon","settings"],[1,"main-sidebar-content"],["svgIcon","gallery"]],template:function(he,je){1&he&&(i.F$t(),i.TgZ(0,"mat-drawer-container",0),i.TgZ(1,"mat-drawer",1,2),i.TgZ(3,"div",3),i.TgZ(4,"button",4,5),i.NdJ("click",function(){return je.onClickGames()}),i.TgZ(6,"div",6),i.TgZ(7,"div",7),i._UZ(8,"mat-icon",8),i.qZA(),i.TgZ(9,"div",9),i.TgZ(10,"span",10),i._uU(11),i.ALo(12,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.YNc(13,me,9,3,"button",11),i.TgZ(14,"button",12,5),i.NdJ("click",function(){return je.onClickSettings()}),i.TgZ(16,"div",6),i.TgZ(17,"div",7),i._UZ(18,"mat-icon",13),i.qZA(),i.TgZ(19,"div",9),i.TgZ(20,"span",10),i._uU(21),i.ALo(22,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(23,"mat-drawer-content",14),i.Hsn(24),i.qZA(),i.qZA()),2&he&&(i.Q6J("hasBackdrop",!0),i.xp6(11),i.Oqu(i.lcZ(12,4,"menu.games")),i.xp6(2),i.Q6J("ngIf",je.showGallery),i.xp6(8),i.Oqu(i.lcZ(22,6,"toolbar.settings")))},directives:[se.kh,I.s9,se.jA,I.xw,I.yH,fe.lW,I.Wh,$.Hw,I.XD,m.O5,se.LW],pipes:[p.X$],styles:['.nv-custom-icons[_ngcontent-%COMP%]{display:inline-block;font-family:"nvCustomIcons"!important;font-feature-settings:normal;font-variant:normal;color:gray;-webkit-font-smoothing:antialiased}.main-sidebar-drawer[_ngcontent-%COMP%]{width:256px}.main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-button-container[_ngcontent-%COMP%]{height:48px;margin:0;padding:0}.isLtr[_nghost-%COMP%]   .main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{margin-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:16px}.isRtl[_nghost-%COMP%]   .main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{margin-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:16px}.isLtr[_nghost-%COMP%]   .main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{margin-right:20px}html[dir=ltr][_ngcontent-%COMP%]   .main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:20px}.isRtl[_nghost-%COMP%]   .main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{margin-left:20px}html[dir=rtl][_ngcontent-%COMP%]   .main-sidebar-drawer[_ngcontent-%COMP%]   .nv-item-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:20px}.main-sidebar-content[_ngcontent-%COMP%]{overflow:hidden}']}),Fe})();var X=e(66883),j=e(80181),K=e(61486),Z=e(83720),L=e(85816),W=e(17163),te=e(20088),ie=e(68496),Q=e(28389),k=e(61481),oe=e(56725),N=e(7415),q=e(22213),Me=e(43124),xe=e(52825),ct=e(47420),Se=e(80221),Ge=e(98012),St=e(12481),Tt=e(89460),Te=e(31546),Je=e(50298);const xt=["tc"];function Ye(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"nv-product-tour-step",16),i.TgZ(1,"nv-search",17),i.NdJ("searchInputInteraction",function(lt){return i.CHM(he),i.oxw(2).onSearchInputInteraction(lt)})("searchInputFocusOut",function(lt){return i.CHM(he),i.oxw(2).onSearchInputFocusOut(lt)}),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(2);i.s9C("anchorId",he.defaultSearchAnchorId),i.Q6J("hidden",he.shouldDisplaySearchButton),i.xp6(1),i.Q6J("smallWidthMode",he.isConcealedSearchMode)("useNvKeyboard",he.nvKeyboardSupported)("activated",he.searchBarActivated)}}function rt(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"nv-product-tour-step",24),i.TgZ(1,"button",25),i.NdJ("click",function(lt){return i.CHM(he),i.oxw(3).mobileSearchButtonClicked(lt)}),i.ALo(2,"translate"),i._UZ(3,"mat-icon",8),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(3);i.s9C("anchorId",he.lowWidthSearchAnchorId),i.xp6(1),i.s9C("matTooltip",i.lcZ(2,4,"search.search")),i.Q6J("fxHide.lt-360",he.loggedIn)("matTooltipDisabled",he.mobileMode)}}function ge(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"button",26),i.NdJ("click",function(){return i.CHM(he),i.oxw(3).openFeedbackDialog()}),i.ALo(1,"translate"),i._UZ(2,"mat-icon",10),i.qZA()}if(2&Fe){const he=i.oxw(3);i.s9C("matTooltip",i.lcZ(1,3,"feedback.send")),i.Q6J("matTooltipDisabled",he.mobileMode)("disabled",he.isFeedbackCalled)}}function Ve(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"button",27),i.NdJ("click",function(){return i.CHM(he),i.oxw(3).onLogin()}),i.TgZ(1,"div",28),i._UZ(2,"img",29),i.TgZ(3,"span",30),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.qZA(),i.qZA()}2&Fe&&(i.xp6(4),i.Oqu(i.lcZ(5,1,"toolbar.login")))}function at(Fe,Nt){if(1&Fe&&i._UZ(0,"img",41),2&Fe){const he=i.oxw(4);i.s9C("src",he.badgeUrl,i.LSH)}}function ve(Fe,Nt){if(1&Fe&&(i.TgZ(0,"span",42),i._uU(1),i.qZA()),2&Fe){const he=i.oxw(4);i.xp6(1),i.Oqu(he.currentPlanShortName)}}function Ze(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"button",31,32),i.NdJ("touchstart",function(){i.CHM(he);const lt=i.MAs(7),Bt=i.MAs(1);return"none"==lt.style.display?Bt.show(500):null}),i.TgZ(2,"div",33),i.TgZ(3,"div",34),i._UZ(4,"img",29),i.YNc(5,at,1,1,"img",35),i.qZA(),i.TgZ(6,"div",36,37),i.TgZ(8,"span",38),i._uU(9),i.qZA(),i.YNc(10,ve,2,1,"span",39),i.qZA(),i.TgZ(11,"mat-icon",40),i._uU(12,"arrow_drop_down"),i.qZA(),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(3),je=i.MAs(4);i.s9C("matTooltip",he.displayName),i.Q6J("matMenuTriggerFor",je),i.xp6(2),i.Q6J("fxLayoutGap",he.badgeUrl?"0":"8px"),i.xp6(3),i.Q6J("ngIf",he.badgeUrl),i.xp6(4),i.Oqu(he.displayName),i.xp6(1),i.Q6J("ngIf",he.currentPlanShortName)}}function Ie(Fe,Nt){if(1&Fe&&(i.ynx(0),i.YNc(1,rt,4,6,"nv-product-tour-step",18),i.YNc(2,ge,3,5,"button",19),i.TgZ(3,"button",20),i._UZ(4,"mat-icon",21),i.qZA(),i.YNc(5,Ve,6,3,"button",22),i.YNc(6,Ze,13,6,"button",23),i.BQk()),2&Fe){const he=i.oxw(2),je=i.MAs(12);i.xp6(1),i.Q6J("ngIf",he.searchVisible&&he.shouldDisplaySearchButton),i.xp6(1),i.Q6J("ngIf",he.loggedIn),i.xp6(1),i.Q6J("fxShow.lt-360",he.loggedIn)("matMenuTriggerFor",je),i.xp6(2),i.Q6J("ngIf",!he.loggedIn),i.xp6(1),i.Q6J("ngIf",he.loggedIn)}}function $e(Fe,Nt){if(1&Fe&&(i.TgZ(0,"div",13),i.YNc(1,Ye,2,5,"nv-product-tour-step",14),i.YNc(2,Ie,7,6,"ng-container",15),i.qZA()),2&Fe){const he=i.oxw();i.Q6J("fxLayoutGap",he.isConcealedSearchMode?"8px":"16px"),i.xp6(1),i.Q6J("ngIf",he.searchVisible),i.xp6(1),i.Q6J("ngIf",!he.isConcealedSearchMode||he.shouldDisplaySearchButton)}}var ze=(()=>{return(Fe=ze||(ze={})).defaultSearchAnchor="search",Fe.lowWidthSearchAnchor="lowWidthSearch",ze;var Fe})();let _t=(()=>{class Fe{constructor(he,je,lt,Bt,hn,qt,sn,bn,Jn,ai,di,Zi,Li,Ri,eo,Gn,to,po,un,fo,Wi,no,vo){var Pi;this.idmService=je,this.idmLoginService=lt,this.searchManagerService=Bt,this.matDialog=hn,this.telemetryService=qt,this.router=sn,this.nesUserInfoService=bn,this.ecommerceService=Jn,this.loggingService=ai,this.translateService=di,this.toastService=Zi,this.telemetryUtilService=Li,this.customLocationService=Ri,this.pathService=eo,this.gfcHelperService=Gn,this.surveyService=to,this.feedbackService=po,this.appBarService=un,this.oobeService=fo,this.indexService=Wi,this.genericDialog=no,this.destroy$=new F.xQ,this.lastEntitlement=null,this.appInstanceId="",this.searchVisible=!0,this.shouldDisplaySearchButton=!1,this.searchBarActivated=!1,this.isSearchResultRoute=!1,this.isFeedbackCalled=!1,this.nvKeyboardSupported=!1,this.appBarTemplate="",this.defaultSearchAnchorId=ze.defaultSearchAnchor,this.lowWidthSearchAnchorId=ze.lowWidthSearchAnchor,this.menuClicked=new i.vpe,this.closeSidebar=new i.vpe,this.loggedIn=!1,this.logger=this.loggingService.getLogger("toolbar.component"),this.nvKeyboardSupported=vo.enabled,this.mobileMode=!!(null===(Pi=null==he?void 0:he.featureEnablement)||void 0===Pi?void 0:Pi.mobileMode)}ngOnInit(){this.setAppBarInitial(),this.appBarService.actionClicked$.pipe((0,b.R)(this.destroy$)).subscribe(he=>{"menu"===he&&this.menuClicked.emit()}),f.ng.isBrowserPlatform()?(0,K.aj)([this.gfcHelperService.getAppInstanceId(),this.idmService.userDataChanged]).pipe((0,b.R)(this.destroy$)).subscribe(([he,je])=>{this.appInstanceId=he,this.setLoginData(je)}):this.idmService.userDataChanged.pipe((0,b.R)(this.destroy$)).subscribe(he=>{this.setLoginData(he)}),this.idmService.accountStatusChanged.pipe((0,b.R)(this.destroy$)).subscribe(()=>{this.logger.info("User login/logout detected, clearing customLocationService state"),this.customLocationService.clearState(),this.router.url.includes(S.nnJ.GamesSectionGridL1)&&!window.location.hash.match(S.nnJ.Deeplink)&&(this.logger.info("Navigating from L1 game-section-grid view to L0"),this.pathService.navigate([S.nnJ.Games]))}),this.initEcommerce(),this.searchManagerService.searchMode().pipe((0,Z.x)(),(0,b.R)(this.destroy$)).subscribe(he=>{this.isConcealedSearchMode=he===oe.N3.Concealed,this.shouldDisplaySearchButton=he===oe.N3.Concealed,this.searchAnchor=this.shouldDisplaySearchButton?this.lowWidthSearchAnchorId:this.defaultSearchAnchorId}),this.setupListeners(),this.feedbackService.setUpToastContainer(this.tc)}onSearchInputFocusOut(he){this.isConcealedSearchMode&&(this.router.url===S.nnJ.GamesSectionGridL1?0===he.currentQuery.length&&(this.appBarService.setNavButtonArrow(),this.appBarService.setShrinkNavigation(!1),this.shouldDisplaySearchButton=!0):(this.appBarService.setNavButtonMenu(),this.appBarService.setShrinkNavigation(!1),this.shouldDisplaySearchButton=!0))}setupListeners(){this.appBarService.template$.pipe((0,b.R)(this.destroy$)).subscribe(he=>{this.appBarTemplate=he.id,"main"===he.id&&(this.searchVisible=he.params.hasOwnProperty("searchVisible")&&he.params.searchVisible)}),this.oobeService.oobeDialogClosedState.pipe((0,b.R)(this.destroy$)).subscribe(he=>{he&&(this.logger.info("OOBE is closed. Reveal logo slide animation"),this.appBarService.revealLogo())}),this.router.events.pipe((0,B.h)(he=>he instanceof a.m2),(0,b.R)(this.destroy$)).subscribe(()=>{this.router.url!==S.nnJ.GamesSectionGridL1&&(this.enableSearchResultRoute(!1),this.searchManagerService.isSearchActive=!1,this.isConcealedSearchMode&&(this.appBarService.setNavButtonMenu(),this.appBarService.setShrinkNavigation(!1),this.shouldDisplaySearchButton=!0))})}onSearchInputInteraction(he){switch(he.interactionType){case t.af.Click:case t.af.Input:he.currentQuery.length>0&&!this.searchBarActivated&&this.enableSearchResultRoute(!0)}}mobileSearchButtonClicked(he){this.shouldDisplaySearchButton&&this.appBarService.setShrinkNavigation(!0),this.shouldDisplaySearchButton=!1,this.closeSidebar.emit(),this.appBarService.setNavButtonArrow(),setTimeout(()=>this.indexService.clickSearchInput(he))}openFeedbackDialog(){this.isFeedbackCalled=!0;const he=()=>this.surveyService.getAvailableSurvey([ie.TriggerType.Feedback],"0","",0),je=()=>this.surveyService.isSurveyFeatureAvailable([ie.TriggerType.Feedback]),lt=()=>this.surveyService.surveyEventListenerCloseDialog(ie.TriggerType.Feedback);this.nesUserInfoService.fetchUserInfoWithStreamingUrl().pipe((0,L.zg)(Bt=>this.feedbackService.initializeFeedback(Bt.serviceEndpoint.loginProvider,he,je,this.appInstanceId)),(0,B.h)(Bt=>Bt),(0,V.q)(1)).subscribe(()=>{this.feedbackService.onOpenFeedbackDialog(lt),this.isFeedbackCalled=!1},Bt=>{this.isFeedbackCalled=!1,this.logger.error("Error opening feedback dialog",Bt)})}onLogin(){this.idmLoginService.login(S.CGJ.ScreenAccountMenu).pipe((0,b.R)(this.destroy$)).subscribe()}onLogout(){this.sendLogoutAttemptTelemetry(),this.logger.trace(A.y$.UserGesture,A.Px.Login,"clicked on logout"),this.idmService.logout().pipe((0,B.h)(he=>he===k.fH.LogoutCompleted||he===k.fH.LogoutFailed),(0,V.q)(1)).subscribe(he=>{he===k.fH.LogoutCompleted?this.logger.info("User logged out"):this.logger.error("Error logging out"),this.resetTelemetryUserId(),this.feedbackService.closeFeedbackDialog()},he=>{this.logger.error("Error logging out: ",he)})}goToAccount(){this.ecommerceService.openAccountProfilePage(S.CGJ.ScreenAccountMenu,S.D7$.ToolbarComponent)}ngOnDestroy(){this.logger.info("Destroying view!"),this.destroy$.next(!0),this.destroy$.complete(),this.searchManagerService.isSearchActive=!1}onTestNetwork(){this.matDialog.open(S.U5H,{panelClass:"dialog-component-container",disableClose:!0})}onSettingsClicked(){this.telemetryService.setScreen(S.CGJ.ScreenSettings),this.router.url!==S.nnJ.Settings&&(this.router.url===S.nnJ.Surveys?this.checkForSurveyCompletion():(this.navigateToSettingsPage(),this.customLocationService.backNavigationRoute=this.router.url))}setAppBarInitial(){this.logoBehavior=c.tc.ShowInitialReveal,this.appBarService.setAll({title:{entry:"",params:{}},info:{entry:"",params:{}},defaultNavButton:{id:"menu",tooltip:"toolbar.menu"},navButtonSetToDefault:!0,icons:[],template:{id:"main",params:{searchVisible:!0}},active:!1})}navigateToSettingsPage(){this.telemetryUtilService.sendClickEvent(S.lzt.Settings,S.CGJ.ScreenSettings,""),this.pathService.navigate([S.nnJ.Settings])}sendLogoutAttemptTelemetry(){this.telemetryUtilService.sendClickEvent(S.lzt.ManualLogout,"ManualLogout","",!1,{immediateRequest:!0})}resetTelemetryUserId(){this.telemetryService.setEventsCommonData({userId:"undefined",externalUserId:"undefined",idpId:"undefined"},!0)}showPlanUpgradeToast(he,je,lt){if(null!==this.lastEntitlement&&this.lastEntitlement.userId===lt.userId&&this.lastEntitlement.productSku!==he){const Bt=new Q.sB;Bt.textContent=this.translateService.instant("membership.updatedTo",{name:je}),Bt.button={text:this.translateService.instant("common.viewDetails"),action:this.onViewDetailsClicked.bind(this),actionParams:null},this.toastService.show(this.tc,Bt)}this.lastEntitlement={userId:lt.userId,productSku:he}}onViewDetailsClicked(){this.telemetryUtilService.sendClickEvent(S.lzt.ViewMembershipDetails,"",`${S.CGJ.ScreenMainToolbar}/${S.CGJ.ScreenToastMessage}`,!1),this.pathService.navigate([S.nnJ.Settings])}initEcommerce(){this.ecommerceService.getUserMembership().pipe((0,b.R)(this.destroy$),(0,W.M)(this.idmService.userDataChanged)).subscribe(([he,je])=>{var lt,Bt,hn;he.eComFeatureEnabled&&he.membershipStatus===S.Tn6.Entitled?(this.showPlanUpgradeToast(he.subscription.productSku,he.product.shortDescription,je.newUser),this.currentPlanShortName=he.product.shortDescription):he.eComFeatureEnabled?(this.lastEntitlement={userId:je.newUser.userId,productSku:null},this.currentPlanShortName=null):(this.lastEntitlement=null,this.currentPlanShortName=null),this.badgeUrl=null===(hn=null===(Bt=null===(lt=he.product)||void 0===lt?void 0:lt.assets)||void 0===Bt?void 0:Bt.find(qt=>(null==qt?void 0:qt.subType)===S.X92.Badge&&qt.url))||void 0===hn?void 0:hn.url})}setLoginData(he){this.user=he.newUser,this.loggedIn=this.user.isAuthenticated,this.user.isAuthenticated&&(this.displayName=this.user.displayName)}checkForSurveyCompletion(){const he=this.surveyService.getSurveyBannerInProgress();he?this.openEndSurveyConfirmationDialog(he):this.navigateToSettingsPage()}openEndSurveyConfirmationDialog(he){const je=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:S.vzH.header},bodyText:{text:he.triggerType===ie.TriggerType.UXTestBanner?S.vzH.body.text:S.vzH.bodySurvey.text},primaryButton:Object.assign({},S.vzH.primaryButton),secondaryButton:{text:S.vzH.secondaryButton}}});je.primaryButtonClick.pipe((0,te.P)(),(0,L.zg)(()=>this.surveyService.declineSurveys(S._G.DismissManual,S.wN.SurveyScreen,he))).subscribe(()=>{this.navigateToSettingsPage(),je.close()}),je.secondaryButtonClick.pipe((0,te.P)()).subscribe(()=>{je.close()})}enableSearchResultRoute(he){this.searchBarActivated=he,this.isSearchResultRoute=he,this.searchManagerService.isSearchActive=he,this.isSearchResultRoute&&(this.closeSidebar.emit(),this.appBarService.setNavButtonArrow())}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.Y36(S.VKt),i.Y36(S.No2),i.Y36(S.ZB5),i.Y36(N.C),i.Y36(q.uw),i.Y36(Me.y0),i.Y36(a.F0),i.Y36(S.fIQ),i.Y36(S.BHV),i.Y36(f.ed),i.Y36(p.sK),i.Y36(Q.kl),i.Y36(S.wU6),i.Y36(S.X5k),i.Y36(S.unb),i.Y36(S.dgl),i.Y36(S.FR5),i.Y36(h.TB),i.Y36(c.ad),i.Y36(S.HKp),i.Y36(t.xB),i.Y36(C.TX),i.Y36(xe.Ow))},Fe.\u0275cmp=i.Xpm({type:Fe,selectors:[["gfn-toolbar"]],viewQuery:function(he,je){if(1&he&&i.Gf(xt,7,i.s_b),2&he){let lt;i.iGM(lt=i.CRH())&&(je.tc=lt.first)}},outputs:{menuClicked:"menuClicked",closeSidebar:"closeSidebar"},decls:27,vars:19,consts:[["nvSpatialNavigationGroup","","navigateFunction","normal",3,"logoBehavior","searchAnchor"],[3,"ngSwitch"],["fxLayout","row","fxLayoutAlign","end center","fxFlex","grow",3,"fxLayoutGap",4,"ngSwitchCase"],[1,"toolbar-dropdown"],["userInfoMenu","matMenu"],["mat-menu-item","",1,"font-body2",3,"click"],["overflowMenu","matMenu"],["mat-menu-item","",1,"font-body2","hig-button-overlay",3,"click"],["svgIcon","search"],["mat-menu-item","",1,"font-body2","hig-button-overlay",3,"disabled","click"],["svgIcon","feedback"],["toastContainer",""],["tc",""],["fxLayout","row","fxLayoutAlign","end center","fxFlex","grow",3,"fxLayoutGap"],["fxFlex","",3,"hidden","anchorId",4,"ngIf"],[4,"ngIf"],["fxFlex","",3,"hidden","anchorId"],["fxFlex","",1,"search-box-container",3,"smallWidthMode","useNvKeyboard","activated","searchInputInteraction","searchInputFocusOut"],[3,"anchorId",4,"ngIf"],["fxHide.lt-360","","mat-button","","matTooltipClass","mat-tooltip-font-body3","class","phone-button hig-button-icon",3,"matTooltipDisabled","matTooltip","disabled","click",4,"ngIf"],["fxHide","","mat-icon-button","",3,"fxShow.lt-360","matMenuTriggerFor"],["svgIcon","more_vert"],["mat-button","","class","user-info font-button2",3,"click",4,"ngIf"],["mat-button","","class","user-info","matTooltipClass","mat-tooltip-font-body3",3,"matMenuTriggerFor","matTooltip","touchstart",4,"ngIf"],[3,"anchorId"],["mat-icon-button","","matTooltipClass","mat-tooltip-font-body3",1,"phone-button",3,"fxHide.lt-360","matTooltipDisabled","matTooltip","click"],["fxHide.lt-360","","mat-button","","matTooltipClass","mat-tooltip-font-body3",1,"phone-button","hig-button-icon",3,"matTooltipDisabled","matTooltip","disabled","click"],["mat-button","",1,"user-info","font-button2",3,"click"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["src","assets/img/avatar_generic_118.png",1,"avatar-img"],["fxHide.lt-400","",1,"login"],["mat-button","","matTooltipClass","mat-tooltip-font-body3",1,"user-info",3,"matMenuTriggerFor","matTooltip","touchstart"],["accountTooltip","matTooltip"],["fxLayout","row","fxLayoutAlign","start center",3,"fxLayoutGap"],[1,"avatar"],["class","avatar-badge",3,"src",4,"ngIf"],["fxLayout","column","fxHide.lt-md","",1,"display-name"],["accountField",""],[1,"username","font-body2"],["class","font-body3",4,"ngIf"],[1,"material-icons"],[1,"avatar-badge",3,"src"],[1,"font-body3"]],template:function(he,je){1&he&&(i.TgZ(0,"nv-app-bar",0),i.ynx(1,1),i.YNc(2,$e,3,3,"div",2),i.BQk(),i.qZA(),i.TgZ(3,"mat-menu",3,4),i.TgZ(5,"button",5),i.NdJ("click",function(){return je.goToAccount()}),i._uU(6),i.ALo(7,"translate"),i.qZA(),i.TgZ(8,"button",5),i.NdJ("click",function(){return je.onLogout()}),i._uU(9),i.ALo(10,"translate"),i.qZA(),i.qZA(),i.TgZ(11,"mat-menu",3,6),i.TgZ(13,"button",7),i.NdJ("click",function(Bt){return je.mobileSearchButtonClicked(Bt)}),i._UZ(14,"mat-icon",8),i.TgZ(15,"span"),i._uU(16),i.ALo(17,"translate"),i.qZA(),i.qZA(),i.TgZ(18,"button",9),i.NdJ("click",function(){return je.openFeedbackDialog()}),i._UZ(19,"mat-icon",10),i.TgZ(20,"span"),i._uU(21),i.ALo(22,"translate"),i.qZA(),i.qZA(),i.qZA(),i._UZ(23,"div",null,11),i._UZ(25,"div",null,12)),2&he&&(i.ekj("low-width-search-box",je.isConcealedSearchMode),i.Q6J("logoBehavior",je.logoBehavior)("searchAnchor",je.searchAnchor),i.xp6(1),i.Q6J("ngSwitch",je.appBarTemplate),i.xp6(1),i.Q6J("ngSwitchCase","main"),i.xp6(4),i.hij(" ",i.lcZ(7,11,"toolbar.account")," "),i.xp6(3),i.hij(" ",i.lcZ(10,13,"toolbar.logout")," "),i.xp6(7),i.Oqu(i.lcZ(17,15,"search.search")),i.xp6(2),i.Q6J("disabled",je.isFeedbackCalled),i.xp6(3),i.Oqu(i.lcZ(22,17,"feedback.send")))},directives:[G.w,ct.b,m.RF,m.n9,Se.VK,Se.OP,$.Hw,I.xw,I.Wh,I.yH,I.SQ,m.O5,Ge.b,St.g,fe.lW,Tt.b8,Te.W,Se.p6,Je.gM],pipes:[p.X$],styles:['.constants-position-relative[_ngcontent-%COMP%]{position:relative}.nv-custom-icons[_ngcontent-%COMP%]{display:inline-block;font-family:"nvCustomIcons"!important;font-feature-settings:normal;font-variant:normal;color:gray;-webkit-font-smoothing:antialiased}nv-app-bar[_ngcontent-%COMP%]{height:56px;background:#393939;box-shadow:0 3px 3px -1px #000,0 4px 5px #00000019,0 1px 10px #00000015;position:relative;z-index:10}nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{height:40px;width:auto}.isLtr[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{padding:0 0 0 8px}html[dir=ltr][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{--dummy: 0;padding:0 0 0 8px}.isRtl[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{padding:0 8px 0 0}html[dir=rtl][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{--dummy: 0;padding:0 8px 0 0}.isLtr[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}}nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px}nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   img.avatar-img[_ngcontent-%COMP%]{width:24px;height:24px;align-self:center}nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   img.avatar-badge[_ngcontent-%COMP%]{position:relative;height:17px;width:auto;top:9px}.isLtr[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   img.avatar-badge[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   img.avatar-badge[_ngcontent-%COMP%]{right:11px}.isRtl[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   img.avatar-badge[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   img.avatar-badge[_ngcontent-%COMP%]{left:34px}.isLtr[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{padding-left:4px}html[dir=ltr][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{--dummy1: 0;padding-left:4px}.isRtl[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{padding-right:4px}html[dir=rtl][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{--dummy1: 0;padding-right:4px}.isLtr[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{padding-right:8px}html[dir=ltr][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{--dummy2: 0;padding-right:8px}.isRtl[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{padding-left:8px}html[dir=rtl][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{--dummy2: 0;padding-left:8px}.isLtr[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{padding-left:0}html[dir=ltr][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{--dummy1: 0;padding-left:0}.isRtl[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{padding-right:0}html[dir=rtl][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{--dummy1: 0;padding-right:0}.isLtr[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{text-align:left}html[dir=ltr][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{--dummy0: 0;text-align:left}.isRtl[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{text-align:right}html[dir=rtl][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{--dummy0: 0;text-align:right}nv-app-bar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:64px;max-width:144px}nv-app-bar[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{width:24px;height:24px}nv-app-bar[_ngcontent-%COMP%]   .mat-icon-button.phone-button[_ngcontent-%COMP%]{width:40px;height:40px}nv-app-bar[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%], nv-app-bar[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{min-width:40px;line-height:initial}nv-app-bar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#777}.isLtr[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .search-box-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .search-box-container[_ngcontent-%COMP%]{margin-left:20px}html[dir=ltr][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .search-box-container[_ngcontent-%COMP%]{--dummy3: 0;margin-left:20px}.isRtl[_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .search-box-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .search-box-container[_ngcontent-%COMP%]{margin-right:20px}html[dir=rtl][_ngcontent-%COMP%]   nv-app-bar[_ngcontent-%COMP%]   .search-box-container[_ngcontent-%COMP%]{--dummy3: 0;margin-right:20px}nv-app-bar[_ngcontent-%COMP%]   .low-width-search-box[_ngcontent-%COMP%]   .search-box-container[_ngcontent-%COMP%]{margin:0}']}),Fe})();var be=e(25004),pt=e(14304),Ot=e(1180),Kt=e(12204);const nn=["buttonContainer"];function tn(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"button",7),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.sendTourProgressTelemetry(lt.actionTypeEnum.Next),lt.nextStep()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}2&Fe&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"productTour.next")," "))}function Mn(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"button",7),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.sendTourProgressTelemetry(lt.actionTypeEnum.GotIt),lt.sendTourExitTelemetry(),lt.endTour()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}2&Fe&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"productTour.end")," "))}function Un(Fe,Nt){if(1&Fe&&(i.TgZ(0,"p",1),i._uU(1),i.qZA(),i.TgZ(2,"div",2),i.TgZ(3,"span",3),i._uU(4),i.qZA(),i.qZA(),i.TgZ(5,"div",4,5),i.YNc(7,tn,3,3,"button",6),i.YNc(8,Mn,3,3,"button",6),i.qZA()),2&Fe){const he=Nt.step,je=i.oxw();i.xp6(1),i.hij(" ",null==he?null:he.title," "),i.xp6(3),i.hij(" ",null==he?null:he.content," "),i.xp6(3),i.Q6J("ngIf",je.hasNextStep(he)),i.xp6(1),i.Q6J("ngIf",!je.hasNextStep(he))}}let _n=(()=>{class Fe{constructor(he,je,lt){this.productTourService=he,this.tourService=je,this.spatialNavigationService=lt,this.destroy$=new F.xQ,this.nextStep=this.tourService.next.bind(this.tourService),this.endTour=this.tourService.end.bind(this.tourService),this.hasNextStep=this.tourService.hasNext.bind(this.tourService),this.actionTypeEnum=be.Us}sendTourProgressTelemetry(he){this.productTourService.sendProgressTelemetry(he)}sendTourExitTelemetry(){this.productTourService.sendTourExitTelemetry(be.qb.Success)}ngAfterViewInit(){this.tourService.stepShow$.pipe((0,b.R)(this.destroy$)).subscribe(he=>{this.buttonContainer&&this.spatialNavigationService.focusFirstChild(this.buttonContainer.nativeElement)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.Y36(pt.Q),i.Y36(Ot.QL),i.Y36(C.jr))},Fe.\u0275cmp=i.Xpm({type:Fe,selectors:[["nv-product-tour"]],viewQuery:function(he,je){if(1&he&&i.Gf(nn,5),2&he){let lt;i.iGM(lt=i.CRH())&&(je.buttonContainer=lt.first)}},decls:2,vars:0,consts:[["nvTrapFocus","",1,"backdrop"],[1,"nv-product-tour-popover-title","font-header6"],[1,"nv-product-tour-popover-content"],[1,"font-body2"],["nvSpatialNavigationContainer","",1,"nv-product-tour-button-container"],["buttonContainer",""],["mat-button","","class","nv-product-tour-button font-button2",3,"click",4,"ngIf"],["mat-button","",1,"nv-product-tour-button","font-button2",3,"click"]],template:function(he,je){1&he&&(i.TgZ(0,"tour-step-template",0),i.YNc(1,Un,9,4,"ng-template"),i.qZA())},directives:[Ot.R5,Kt.e,ct.N,m.O5,fe.lW],pipes:[p.X$],styles:[".backdrop{position:fixed;background-color:#00000080;top:0;left:0;z-index:200;width:100vw;height:100vh}.nv-product-tour-popover-title{margin:16px;cursor:default}.nv-product-tour-popover-content{margin:16px}.nv-product-tour-button{font-size:12px;min-width:64px!important;margin:8px;color:#76b900!important}.nv-product-tour-button-container{display:flex;justify-content:flex-end}.ngxp__container{padding:0!important;width:min(calc(100vw - 32px),344px);border:none!important;box-shadow:none!important;border-radius:0!important;background-color:#46505a}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.ngxp__container{width:calc(min(100vw,100vh) - 32px)}}.ngxp__container[x-placement^=right]{margin-top:20px}html[dir=ltr] .ngxp__container[x-placement^=right]{margin-left:10px!important}html[dir=rtl] .ngxp__container[x-placement^=right]{margin-right:10px!important}.ngxp__container[x-placement^=bottom]{top:22px!important;margin-top:2px!important}html[dir=ltr] .ngxp__container[x-placement^=bottom]{margin-left:5px!important;margin-right:10px!important}html[dir=rtl] .ngxp__container[x-placement^=bottom]{margin-left:10px!important;margin-right:5px!important}.ngxp__container>.ngxp__arrow{border-color:#46505a!important;border-width:19px!important}.ngxp__container[x-placement^=right]>.ngxp__arrow{border-left-width:0!important;left:-10px!important;border-top-color:transparent!important;border-bottom-color:transparent!important}.ngxp__container[x-placement^=bottom]>.ngxp__arrow{border-top-width:0!important;top:-15px!important;border-right-color:transparent!important;border-left-color:transparent!important}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait){html[dir=ltr] .ngxp__container[x-placement^=bottom]{margin-right:14px!important;margin-left:10px!important}html[dir=rtl] .ngxp__container[x-placement^=bottom]{margin-right:10px!important;margin-left:14px!important}html[dir=ltr] .ngxp__container[x-placement=bottom],html[dir=rtl] .ngxp__container[x-placement=bottom]{left:0px!important;right:0px!important;margin-left:16px!important;margin-right:16px!important;transform:translateY(48px)!important}.ngxp__container>.ngxp__arrow{border-width:24px!important}html[dir=ltr] .ngxp__container[x-placement=bottom]>.ngxp__arrow{transform:translate(-5px)}html[dir=rtl] .ngxp__container[x-placement=bottom]>.ngxp__arrow{transform:translate(5px)}}@media screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){html[dir=ltr] .ngxp__container[x-placement=bottom-end]{margin-left:max(calc(env(safe-area-inset-left) - 5px),11px)!important;margin-right:11px!important}html[dir=rtl] .ngxp__container[x-placement=bottom-end]{margin-left:calc(100vw - 100vh - env(safe-area-inset-right))!important;margin-right:11px!important}html[dir=ltr] .ngxp__container[x-placement=bottom]{margin-left:max(calc(env(safe-area-inset-left) - 5px),11px)!important;margin-right:calc(env(safe-area-inset-right) + 11px)!important}html[dir=rtl] .ngxp__container[x-placement=bottom]{margin-left:calc(env(safe-area-inset-right) + 11px)!important;margin-right:max(calc(env(safe-area-inset-left) - 5px),11px)!important}.ngxp__container>.ngxp__arrow{border-width:24px!important}html[dir=ltr] .ngxp__container[x-placement=bottom-end]>.ngxp__arrow{left:0!important}html[dir=rtl] .ngxp__container[x-placement=bottom-end]>.ngxp__arrow{left:unset!important}}\n"],encapsulation:2}),Fe})();var xn=e(81134),Fn=e(41618),yt=e(98636),Ht=e(33927),Ue=e(18293),Mt=e(202),ft=(()=>{return(Fe=ft||(ft={}))[Fe.OS=0]="OS",Fe[Fe.CriticalUpdate=1]="CriticalUpdate",Fe[Fe.RequiredUpdate=2]="RequiredUpdate",Fe[Fe.RecommendedUpdate=3]="RecommendedUpdate",Fe[Fe.NonAdminRecommendedNotification=4]="NonAdminRecommendedNotification",Fe[Fe.BrowserAppUpdate=5]="BrowserAppUpdate",Fe[Fe.AccountLinkingExpireInDays=6]="AccountLinkingExpireInDays",Fe[Fe.AccountLinkingExpireToday=7]="AccountLinkingExpireToday",Fe[Fe.AccountLinkingExpired=8]="AccountLinkingExpired",Fe[Fe.UsabilityStudy=9]="UsabilityStudy",Fe[Fe.Survey=10]="Survey",Fe[Fe.DownloadNativeClient=11]="DownloadNativeClient",Fe[Fe.InstallPWA=12]="InstallPWA",Fe[Fe.BrowserPushNotification=13]="BrowserPushNotification",Fe[Fe.Games=14]="Games",ft;var Fe})();const st="clientDownloadStatus",Et="installPWAStatus",Ee="browserPushNotification",dt={notificationMsg:"notification.octSurveyMessage",participate:"common.yes",dismiss:"notification.noThanks"},kt={notificationMsg:"notification.octSurveyPostMinimizeMessage",participate:"common.continue",dismiss:"notification.quit"},Zt={notificationMsg:"notification.surveyBannerMessage",participate:"notification.participate",dismiss:"notification.dismiss"},dn={notificationMsg:"notification.usabilitySurveyMessage",participate:"notification.participate",dismiss:"notification.dismiss"};var gn=e(67202),jt=e(87335),En=e(57390),Pn=e(74826);let ht=(()=>{class Fe{constructor(he,je,lt,Bt,hn,qt,sn){this.applicationLifetimeService=he,this.sharedStorageService=je,this.updateService=lt,this.loggingService=Bt,this.layoutService=hn,this.lcarsService=qt,this.router=sn,this.confirmationDialogResult=new F.xQ,this.logger=this.loggingService.getLogger("MallRelaunchService")}startRelaunch(he){return this.ensureNewRelaunchStateMachine(),this.currentStateMachine.startRelaunch(he)}completeRelaunch(){return this.ensureNewRelaunchStateMachine(),this.currentStateMachine.readRelaunchSharedData().pipe((0,L.zg)(he=>this.currentStateMachine.clearRelaunchSharedData().pipe((0,gn.h)(he))),(0,Ht.U)(he=>(0,S.wIc)(this.router.url)?null:he),(0,B.h)(he=>!(0,Mt.isNil)(he)&&!(0,Mt.isNil)(he.cmsId)),(0,L.zg)(he=>(this.logger.info(`Attempting to get application class object for ${he.cmsId}`),this.lcarsService.getMetadataByCmsId(parseInt(he.cmsId,10)))),(0,L.zg)(he=>{const je=this.layoutService.updateAndFetchApp(he);return je?je.launch(S.CGJ.ScreenMallHome,"relaunch"):(this.logger.error("Could not find application class object. Cannot complete relaunch"),(0,xn.of)(!1))}),(0,Ue.K)(he=>(this.logger.error("Relaunch failed.",he),(0,xn.of)(!1))))}ensureNewRelaunchStateMachine(){!(0,Mt.isNil)(this.currentStateMachine)&&this.currentStateMachine.isActive()&&this.currentStateMachine.cancelRelaunch(),this.currentStateMachine=new S.WM6(this.applicationLifetimeService,this.sharedStorageService,this.updateService,this.loggingService)}resolveConfirmationDialog(he){this.confirmationDialogResult.next(he)}getStateMachineState$(){return(0,Mt.isNil)(this.currentStateMachine)?null:this.currentStateMachine.currentState()}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(jt.Ll),i.LFG(En.OA),i.LFG(S.GMF),i.LFG(f.ed),i.LFG(Pn.P),i.LFG(S.zcQ),i.LFG(a.F0))},Fe.\u0275prov=i.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();var Vt=e(68456),ne=e(8869);function Be(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i.TgZ(2,"i",5),i._uU(3,"info"),i.qZA(),i.TgZ(4,"div",6),i._uU(5),i.ALo(6,"translate"),i.qZA(),i.qZA(),i.TgZ(7,"button",7),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickClose(lt.noteTypes.OS)}),i.TgZ(8,"i",8),i._uU(9,"close"),i.qZA(),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(2);i.Q6J("ngClass",he.notificationAvailable?"notification":"notification-animate"),i.xp6(5),i.hij(" ",i.xi3(6,2,"notification.systemcheckInformation",he.os)," ")}}function vt(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i.TgZ(2,"i",5),i._uU(3,"info"),i.qZA(),i.TgZ(4,"div",6),i._uU(5),i.ALo(6,"translate"),i.qZA(),i.qZA(),i.TgZ(7,"button",7),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickClose(lt.noteTypes.Games)}),i.TgZ(8,"i",8),i._uU(9,"close"),i.qZA(),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(2);i.Q6J("ngClass",he.notificationAvailable?"notification":"notification-animate"),i.xp6(5),i.hij(" ",i.lcZ(6,2,"notification.mustOwnGames")," ")}}function Ct(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i.TgZ(2,"i",5),i._uU(3,"info"),i.qZA(),i.TgZ(4,"div",6),i._uU(5),i.ALo(6,"translate"),i.qZA(),i.qZA(),i.TgZ(7,"button",9),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickRestart(lt.noteTypes.RecommendedUpdate)}),i._uU(8),i.ALo(9,"translate"),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(2);i.Q6J("ngClass",he.notificationAvailable?"notification":"notification-animate"),i.xp6(5),i.hij(" ",i.xi3(6,3,"notification.recommendedUpdateAvailable",he.newVersion)," "),i.xp6(3),i.hij(" ",i.lcZ(9,6,"notification.restartNow")," ")}}function gt(Fe,Nt){1&Fe&&i._UZ(0,"div")}function At(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"button",14),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(3);return lt.onClickRefresh(lt.noteTypes.RequiredUpdate)}),i._uU(1),i.ALo(2,"translate"),i.qZA()}2&Fe&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"notification.refreshNow")," "))}function le(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"button",14),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(3);return lt.onClickRestart(lt.noteTypes.RequiredUpdate)}),i._uU(1),i.ALo(2,"translate"),i.qZA()}2&Fe&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"notification.restartNow")," "))}function De(Fe,Nt){if(1&Fe&&(i.TgZ(0,"div",3),i.TgZ(1,"div",4),i.TgZ(2,"i",5),i._uU(3,"info"),i.qZA(),i.TgZ(4,"div",6),i._uU(5),i.ALo(6,"translate"),i.qZA(),i.qZA(),i.TgZ(7,"div",10),i.YNc(8,gt,1,0,"div",11),i.YNc(9,At,3,3,"ng-template",null,12,i.W1O),i.YNc(11,le,3,3,"ng-template",null,13,i.W1O),i.qZA(),i.qZA()),2&Fe){const he=i.MAs(10),je=i.MAs(12),lt=i.oxw(2);i.Q6J("ngClass",lt.notificationAvailable?"notification":"notification-animate"),i.xp6(5),i.hij(" ",i.lcZ(6,5,"common.updateRequiredDescription")," "),i.xp6(3),i.Q6J("ngIf",lt.isBrowserPlatform)("ngIfThen",he)("ngIfElse",je)}}function nt(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i.TgZ(2,"i",5),i._uU(3,"info"),i.qZA(),i.TgZ(4,"div",6),i.TgZ(5,"span"),i._uU(6),i.ALo(7,"translate"),i.qZA(),i.TgZ(8,"span"),i._uU(9),i.qZA(),i.qZA(),i.qZA(),i.TgZ(10,"button",9),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickRestart(lt.noteTypes.CriticalUpdate)}),i._uU(11),i.ALo(12,"translate"),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(2);i.Q6J("ngClass",he.notificationAvailable?"notification":"notification-animate"),i.xp6(6),i.hij(" ",i.lcZ(7,4,"notification.criticalUpdateAvailableAndTimeLeft")," "),i.xp6(3),i.Oqu(he.relaunchDisplayTimeRemaining),i.xp6(2),i.hij(" ",i.lcZ(12,6,"notification.restartNow")," ")}}function bt(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i.TgZ(2,"i",5),i._uU(3,"info"),i.qZA(),i.TgZ(4,"div",6),i._uU(5),i.ALo(6,"translate"),i.qZA(),i.qZA(),i.TgZ(7,"button",9),i.NdJ("click",function(){return i.CHM(he),i.oxw(2).onClickShowMeHow()}),i._uU(8),i.ALo(9,"translate"),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(2);i.Q6J("ngClass",he.notificationAvailable?"notification":"notification-animate"),i.xp6(5),i.hij(" ",i.lcZ(6,3,"notification.showMeHowNotification")," "),i.xp6(3),i.hij(" ",i.lcZ(9,5,"notification.showMeHow")," ")}}function Wt(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i.TgZ(2,"div",6),i._uU(3),i.ALo(4,"translate"),i.qZA(),i.qZA(),i.TgZ(5,"div",10),i.TgZ(6,"button",14),i.NdJ("click",function(){return i.CHM(he),i.oxw(2).onClickParticipate()}),i._uU(7),i.ALo(8,"translate"),i.qZA(),i.TgZ(9,"button",14),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickClose(lt.noteTypes.Survey)}),i._uU(10),i.ALo(11,"translate"),i.qZA(),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(2);i.Q6J("ngClass",he.notificationAvailable?"notification":"notification-animate"),i.xp6(3),i.hij(" ",i.lcZ(4,4,he.surveyBannerText.notificationMsg)," "),i.xp6(4),i.hij(" ",i.lcZ(8,6,he.surveyBannerText.participate)," "),i.xp6(3),i.hij(" ",i.lcZ(11,8,he.surveyBannerText.dismiss)," ")}}function ln(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i.TgZ(2,"i",15),i._uU(3,"get_app"),i.qZA(),i.TgZ(4,"div",6),i._uU(5),i.ALo(6,"translate"),i.qZA(),i.qZA(),i.TgZ(7,"div",10),i.TgZ(8,"button",14),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickClose(lt.noteTypes.DownloadNativeClient)}),i._uU(9),i.ALo(10,"translate"),i.qZA(),i.TgZ(11,"button",14),i.NdJ("click",function(){return i.CHM(he),i.oxw(2).onClickDownload()}),i._uU(12),i.ALo(13,"translate"),i.qZA(),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(2);i.Q6J("ngClass",he.notificationAvailable?"notification":"notification-animate"),i.xp6(5),i.hij(" ",i.lcZ(6,4,"notification.downloadGfnApp")," "),i.xp6(4),i.hij(" ",i.lcZ(10,6,"common.notNow")," "),i.xp6(3),i.hij(" ",i.lcZ(13,8,"notification.download")," ")}}function Sn(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i.TgZ(2,"i",15),i._uU(3,"add_circle_outline"),i.qZA(),i.TgZ(4,"div",6),i._uU(5),i.ALo(6,"translate"),i.qZA(),i.qZA(),i.TgZ(7,"div",10),i.TgZ(8,"button",14),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickClose(lt.noteTypes.InstallPWA)}),i._uU(9),i.ALo(10,"translate"),i.qZA(),i.TgZ(11,"button",14),i.NdJ("click",function(){return i.CHM(he),i.oxw(2).onClickInstallPwa()}),i._uU(12),i.ALo(13,"translate"),i.qZA(),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(2);i.Q6J("ngClass",he.notificationAvailable?"notification":"notification-animate"),i.xp6(5),i.hij(" ",i.lcZ(6,4,"notification.installPwaMessage")," "),i.xp6(4),i.hij(" ",i.lcZ(10,6,"common.notNow")," "),i.xp6(3),i.hij(" ",i.lcZ(13,8,"notification.install")," ")}}function qe(Fe,Nt){1&Fe&&i._UZ(0,"div")}function Ut(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"button",14),i.NdJ("click",function(){return i.CHM(he),i.oxw(3).onClickLearnMore()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}2&Fe&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"common.learnMore")," "))}function M(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"button",14),i.NdJ("click",function(){return i.CHM(he),i.oxw(3).onClickAllowNotification()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}2&Fe&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"notification.letsGo")," "))}function re(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i.TgZ(2,"i",15),i._uU(3,"notifications"),i.qZA(),i.TgZ(4,"div",6),i._uU(5),i.ALo(6,"translate"),i.qZA(),i.qZA(),i.TgZ(7,"div",10),i.TgZ(8,"button",14),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickClose(lt.noteTypes.BrowserPushNotification)}),i._uU(9),i.ALo(10,"translate"),i.qZA(),i.YNc(11,qe,1,0,"div",11),i.YNc(12,Ut,3,3,"ng-template",null,16,i.W1O),i.YNc(14,M,3,3,"ng-template",null,17,i.W1O),i.qZA(),i.qZA()}if(2&Fe){const he=i.MAs(13),je=i.MAs(15),lt=i.oxw(2);i.Q6J("ngClass",lt.notificationAvailable?"notification":"notification-animate"),i.xp6(5),i.hij(" ",i.lcZ(6,6,"notification.browserPushNotificationMessage")," "),i.xp6(4),i.hij(" ",i.lcZ(10,8,"common.notNow")," "),i.xp6(2),i.Q6J("ngIf",lt.isPermissionDenied)("ngIfThen",he)("ngIfElse",je)}}function Ce(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i._UZ(2,"img",18),i.TgZ(3,"div",6),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.qZA(),i.TgZ(6,"div",10),i.TgZ(7,"button",14),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickClose(lt.noteTypes.AccountLinkingExpired)}),i._uU(8),i.ALo(9,"translate"),i.qZA(),i.TgZ(10,"button",19),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickGotoSettings(lt.noteTypes.AccountLinkingExpired)}),i._uU(11),i.ALo(12,"translate"),i.qZA(),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(2);i.Q6J("ngClass",he.notificationAvailable?"notification":"notification-animate"),i.xp6(2),i.s9C("src",he.accountLinking.icon,i.LSH),i.xp6(2),i.hij(" ",i.lcZ(5,5,"common.providers."+he.accountLinking.provider+".warningExpired")," "),i.xp6(4),i.hij(" ",i.lcZ(9,7,"common.notNow")," "),i.xp6(3),i.hij(" ",i.lcZ(12,9,"layout.accountLinkingPrompt.primaryButton")," ")}}function ke(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i._UZ(2,"img",18),i.TgZ(3,"div",6),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.qZA(),i.TgZ(6,"div",10),i.TgZ(7,"button",14),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickClose(lt.noteTypes.AccountLinkingExpireToday)}),i._uU(8),i.ALo(9,"translate"),i.qZA(),i.TgZ(10,"button",19),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickGotoSettings(lt.noteTypes.AccountLinkingExpireToday)}),i._uU(11),i.ALo(12,"translate"),i.qZA(),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(2);i.Q6J("ngClass",he.notificationAvailable?"notification":"notification-animate"),i.xp6(2),i.s9C("src",he.accountLinking.icon,i.LSH),i.xp6(2),i.hij(" ",i.lcZ(5,5,"ownership.providers."+he.accountLinking.provider+".warningToday")," "),i.xp6(4),i.hij(" ",i.lcZ(9,7,"common.notNow")," "),i.xp6(3),i.hij(" ",i.lcZ(12,9,"layout.accountLinkingPrompt.primaryButton")," ")}}function tt(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",3),i.TgZ(1,"div",4),i._UZ(2,"mat-icon",20),i.TgZ(3,"div",6),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.qZA(),i.TgZ(6,"div",10),i.TgZ(7,"button",14),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickClose(lt.noteTypes.AccountLinkingExpireInDays)}),i._uU(8),i.ALo(9,"translate"),i.qZA(),i.TgZ(10,"button",19),i.NdJ("click",function(){i.CHM(he);const lt=i.oxw(2);return lt.onClickGotoSettings(lt.noteTypes.AccountLinkingExpireInDays)}),i._uU(11),i.ALo(12,"translate"),i.qZA(),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw(2);i.Q6J("ngClass",he.notificationAvailable?"notification":"notification-animate"),i.xp6(2),i.s9C("svgIcon",he.accountLinking.icon),i.xp6(2),i.hij(" ",i.xi3(5,5,"ownership.providers."+he.accountLinking.provider+".warning",he.accountLinking)," "),i.xp6(4),i.hij(" ",i.lcZ(9,8,"common.notNow")," "),i.xp6(3),i.hij(" ",i.lcZ(12,10,"layout.accountLinkingPrompt.primaryButton")," ")}}function ut(Fe,Nt){if(1&Fe&&(i.TgZ(0,"div",1),i.YNc(1,Be,10,5,"div",2),i.YNc(2,vt,10,4,"div",2),i.YNc(3,Ct,10,8,"div",2),i.YNc(4,De,13,7,"div",2),i.YNc(5,nt,13,8,"div",2),i.YNc(6,bt,10,7,"div",2),i.YNc(7,Wt,12,10,"div",2),i.YNc(8,ln,14,10,"div",2),i.YNc(9,Sn,14,10,"div",2),i.YNc(10,re,16,10,"div",2),i.YNc(11,Ce,13,11,"div",2),i.YNc(12,ke,13,11,"div",2),i.YNc(13,tt,13,12,"div",2),i.qZA()),2&Fe){const he=i.oxw();i.ekj("ios",he.isIOS),i.Q6J("ngSwitch",he.showNote()),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.OS),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.Games),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.RecommendedUpdate),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.RequiredUpdate),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.CriticalUpdate),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.NonAdminRecommendedNotification),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.Survey),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.DownloadNativeClient),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.InstallPWA),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.BrowserPushNotification),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.AccountLinkingExpired),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.AccountLinkingExpireToday),i.xp6(1),i.Q6J("ngSwitchCase",he.noteTypes.AccountLinkingExpireInDays)}}let Ft=(()=>{class Fe{constructor(he,je,lt,Bt,hn,qt,sn,bn,Jn,ai,di,Zi,Li,Ri,eo,Gn,to,po,un,fo,Wi,no){this.updateService=je,this.oobeService=lt,this.mallRelaunchService=Bt,this.networkStatusService=hn,this.surveyService=qt,this.router=sn,this.dialog=bn,this.appConfig=Jn,this.localeService=ai,this.sharedStorageService=di,this.gfnSwUpdateService=Zi,this.ownershipSyncService=Li,this.customLocationService=Ri,this.pathService=eo,this.pwaService=Gn,this.pwaPromptService=to,this.snackbar=po,this.translateService=un,this.genericDialog=fo,this.systemInfoService=Wi,this.browserPushService=no,this.noteQueue=[],this.displayTimeConfig=[S.Or7.MINUTES,S.Or7.SECONDS],this.defaultVersion="0.0.0.0",this.millisecondsPerDay=864e5,this.snackBarDuration=7e3,this.bannerOverBannerDelay=1e3,this.noteTypes=ft,this.os={minOsVersion:this.oobeService.getMinOsVersion},this.newVersion={updateVersion:this.defaultVersion},this.notificationAvailable=!1,this.isIOS=!1,this.accountLinking={provider:"",arg:"",icon:""},this.logger=he.getLogger("notification.component"),this.destroy$=new F.xQ}get isBrowserPlatform(){return f.ng.isBrowserPlatform()}ngOnInit(){this.relaunchSecondsRemaining=300,this.relaunchDisplayTimeRemaining="",this.oobeService.oobeDialogClosedState.pipe((0,b.R)(this.destroy$)).subscribe({complete:()=>{this.onOobeSkipped()}}),this.getDownloadPageUrl(),this.checkForClientUpdates(),this.checkForServiceWorkerUpdates(),this.checkForSurveys(),this.checkForAccountLinking(),this.checkForPushNotification(),this.systemInfoService.getDeviceOSType().pipe((0,b.R)(this.destroy$),(0,V.q)(1)).subscribe(he=>{this.isIOS=he===f.wi.IOS;const Bt=he===f.wi.Linux,hn=he===f.wi.ChromeOS;this.shouldShowClientDownload(he===f.wi.Windows,he===f.wi.MacOS)&&this.checkForClientDownload(),this.shouldShowPwaInstall(hn,Bt)&&this.checkForPwaInstall()})}getDownloadPageUrl(){const he=this.appConfig.redirect.serverUrl,je=S.qBq.GFN_PC_DOWNLOAD;this.localeService.localeChanged.pipe((0,b.R)(this.destroy$)).subscribe(lt=>{this.downloadNativeClientUrl=`${he}${lt}&page=${je}`})}checkForAccountLinking(){this.ownershipSyncService.accountsUpdated().pipe((0,b.R)(this.destroy$)).subscribe(he=>{he&&(this.logger.info("Account linking provider:",he),this.checkForAccountLinkingExpiration(he))})}checkForClientUpdates(){this.updateService.getUpdates$().pipe((0,b.R)(this.destroy$)).subscribe(he=>{this.logger.info("New udpate available"),this.onUpdateAvailable({update:he,isNonAdmin:!1})},he=>{this.logger.error("Received error from getUpdate$ observable: ",he)}),this.updateService.updateRequiredOnLaunch$().pipe((0,b.R)(this.destroy$)).subscribe(()=>{this.logger.info("Successfully checked for existing update")},he=>{this.logger.error("Failed to check for existing update ticket",he)})}checkForServiceWorkerUpdates(){!f.ng.isBrowserPlatform()||(this.logger.info("Service worker registring for updates"),this.gfnSwUpdateService.updateReady().pipe((0,b.R)(this.destroy$)).subscribe(()=>{this.logger.info("Service worker update ready. Showing notification."),this.onUpdateAvailable({update:{version:null,severity:S.WOA.Required},isNonAdmin:!1})}))}persistPromptState(he){this.sharedStorageService.writeBlock(he,{appVersion:this.appConfig.build.version,isPromptDismissed:!0}).pipe((0,b.R)(this.destroy$)).subscribe()}persistPushNotificationPromptState(){this.sharedStorageService.writeBlock(Ee,{appVersion:this.appConfig.build.version,isPromptDismissed:!0,timeLastShown:Date.now()}).pipe((0,V.q)(1),(0,b.R)(this.destroy$)).subscribe(()=>this.logger.info("persist Push Notification Prompt State is success"),he=>this.logger.error("Error while writing to shared storage for browserPushNotification",he))}isMajorVersionUpdate(he,je){return!he||Number(he.split(".")[2])<Number(je.split(".")[2])}shouldShowClientDownload(he,je){return f.ng.isBrowserPlatform()&&!f.ng.isArmPlatform()&&(je&&!f.ng.isTouchPlatform()||he)}shouldShowPwaInstall(he,je){return he||je}checkForClientDownload(){this.sharedStorageService.readBlock(st).pipe((0,yt.b)(he=>{(!he.appVersion||this.isMajorVersionUpdate(he.appVersion,this.appConfig.build.version)||!he.isPromptDismissed)&&(this.logger.info("Showing download client prompt"),this.addNote(ft.DownloadNativeClient))}),(0,b.R)(this.destroy$)).subscribe()}checkForPwaInstall(){(0,K.aj)([this.sharedStorageService.readBlock(Et),this.pwaService.onPWAModeChange,this.pwaPromptService.pwaInstallPromptCaptured$]).pipe((0,Ht.U)(([he,je,lt])=>{this.logger.info("PWA Prompt: Emitted values:",he,je),he.appVersion&&!this.isMajorVersionUpdate(he.appVersion,this.appConfig.build.version)&&he.isPromptDismissed||je?(this.logger.info("Removing PWA installation prompt"),this.removeNote(ft.InstallPWA)):(this.logger.info("Showing PWA installation prompt"),this.addNote(ft.InstallPWA))}),(0,b.R)(this.destroy$)).subscribe()}checkForPushNotification(){this.pushNotificationBannerSubscription=this.browserPushService.isNotificationAllowed().pipe((0,L.zg)(he=>(this.logger.info("Notification Banner is allowed to show: ",he),he?this.checkForNotificationBanner():(0,xn.of)(!1)))).subscribe(he=>{this.logger.info("Notification Banner is shown: ",he)},he=>{this.logger.error("Error occured while checking for Push Notification Banner",he)})}checkForNotificationBanner(){return this.sharedStorageService.readBlock(Ee).pipe((0,Ht.U)(he=>this.browserPushService.isNotificationSupported()&&Notification.permission!==S.Ad8.Granted&&(!he.appVersion||!he.isPromptDismissed||this.isMajorVersionUpdate(he.appVersion,this.appConfig.build.branch)&&this.checkBannerExpiry(he.timeLastShown,7))?(this.logger.info("Showing Browser Push Notification Permission Prompt"),this.logger.info("Notification.permission from Notification API ",Notification.permission),this.isPermissionDenied=Notification.permission===S.Ad8.Denied,this.addNote(ft.BrowserPushNotification),!0):(this.removeNote(ft.BrowserPushNotification),!1)))}checkBannerExpiry(he,je){return!he||(Date.now()-he)/this.millisecondsPerDay>je}checkForSurveys(){this.logger.info("Check if survey is available"),this.surveyService.checkForAvailableSurvey([ie.TriggerType.SurveyBanner,ie.TriggerType.UXTestBanner,ie.TriggerType.CommunicationBanner]).pipe((0,b.R)(this.destroy$)).subscribe(he=>{this.showSurveyNotification(he)}),this.surveyService.getMinimizedSurvey$().pipe((0,b.R)(this.destroy$)).subscribe(he=>{this.showSurveyNotification(he)})}showSurveyNotification(he){this.logger.info("Received survey from survey service: ",he),this.logger.info("Is a minimized survey ?",null==he?void 0:he.surveyVisited);const je=this.surveyService.getBannerSurveyTriggerType(),lt=ft.Survey;!(0,Mt.isNil)(he)&&this.checkForBrowserPlatform()?(this.logger.info("showing survey notification",je),this.addNote(lt),this.surveyBannerText=this.getSurveyBannerText(je,he.surveyVisited),this.surveyService.sendUserSurveyTelemetry(he.surveyVisited?S._G.NotifyPostMinimize:S._G.Notify,S.wN.MallScreen,je,he),je!==ie.TriggerType.CommunicationBanner&&this.addNoteTimer()):(this.hasSpecificNote(ft.UsabilityStudy)||this.hasSpecificNote(ft.Survey))&&(0,Mt.isNil)(he)?(this.logger.info("usability study or survey already present and result is undefined",lt),this.removeNote(lt)):this.logger.info("Skipping usability study",he)}getSurveyBannerText(he,je=!1){switch(he){case ie.TriggerType.SurveyBanner:return Zt;case ie.TriggerType.UXTestBanner:return dn;case ie.TriggerType.CommunicationBanner:return je?kt:dt}}checkForBrowserPlatform(){return!f.ng.isBrowserPlatform()||f.ng.isBrowserPlatform()&&this.router.url!==S.nnJ.Surveys}stopExistingNotificationTimer(){this.notificationIntervalSubscription&&(this.notificationIntervalSubscription.unsubscribe(),this.notificationIntervalSubscription=null,this.logger.info("notification interval stopped"))}addNoteTimer(){this.stopExistingNotificationTimer();const he=this.surveyService.getBannerNotificationTimer();this.logger.info("config: get timer: ",he),this.notificationIntervalSubscription=(0,Fn.F)(he).pipe((0,te.P)(),(0,B.h)(()=>this.hasSpecificNote(ft.UsabilityStudy)||this.hasSpecificNote(ft.Survey)),(0,L.zg)(()=>{this.logger.info("Survey or usability study notification timed out removing the notification"),this.removeNote(this.hasSpecificNote(ft.Survey)?ft.Survey:ft.UsabilityStudy);const je=this.surveyService.getSurveyBannerInProgress();return this.surveyService.declineSurveys(S._G.DismissTimeout,S.wN.MallScreen,je)})).subscribe()}addNote(he){this.logger.info("Adding note:",he),this.noteQueue.includes(he)||this.noteQueue.push(he),this.noteQueue.sort((je,lt)=>je-lt),this.notificationAvailable=!0}removeNote(he){let je=!1;this.logger.info("Removing note:",he);const lt=this.noteQueue.indexOf(he),Bt=-1===lt?void 0:this.noteQueue.splice(lt,1)[0];return this.notificationAvailable=this.hasAnyNote(),this.notificationAvailable&&(je=!0,this.notificationAvailable=!1,setTimeout(()=>{this.notificationAvailable=je},this.bannerOverBannerDelay)),Bt}onOobeSkipped(){this.showOsNotificationIfNeeded()}onUpdateAvailable(he){var je;const lt=he.isNonAdmin;let Bt;if(this.logger.info("onUpdateAvailable",he,he.update.severity,lt),lt)Bt=ft.NonAdminRecommendedNotification;else switch(he.update.severity){case S.WOA.Recommended:Bt=ft.RecommendedUpdate;break;case S.WOA.Required:Bt=ft.RequiredUpdate;break;case S.WOA.Critical:Bt=ft.CriticalUpdate,this.criticalUpdateCountdown();break;default:return void this.logger.error("Unknown update type : ",he.update.severity)}this.addNote(Bt),this.newVersion.updateVersion=(null===(je=he.update.version)||void 0===je?void 0:je.toString())||this.defaultVersion}updateCountdownTimer(){this.relaunchSecondsRemaining--,this.relaunchDisplayTimeRemaining=(0,S.TWU)(this.relaunchSecondsRemaining,this.displayTimeConfig)}criticalUpdateCountdown(){const he=(0,Fn.F)(1e3).pipe((0,V.q)(this.relaunchSecondsRemaining),(0,yt.b)(je=>{this.logger.info(this.relaunchSecondsRemaining),this.relaunchSecondsRemaining>=1&&this.updateCountdownTimer()}),(0,Ht.U)(()=>this.relaunchSecondsRemaining),(0,B.h)(je=>0===je),(0,yt.b)(je=>this.logger.info("Calling update and restart..")),(0,L.zg)(je=>this.mallRelaunchService.startRelaunch(!0)));this.startUpdate(he,ft.CriticalUpdate)}showOsNotificationIfNeeded(){f.ng.isBrowserPlatform()||this.oobeService.meetSysRequirements().pipe((0,b.R)(this.destroy$)).subscribe(he=>{he||(this.logger.info("OS min. requirement is not met, show OS notification"),setTimeout(()=>{this.addNote(ft.OS)},2e3))})}onUpdateError(){return(0,K.aj)([this.translateService.get("notification.dismiss"),this.translateService.get("notification.updateFailure")]).pipe((0,Ht.U)(([lt,Bt])=>(this.snackbar.open(Bt,lt,{duration:this.snackBarDuration,horizontalPosition:"left",panelClass:["nv-hig"]}),!1)),(0,b.R)(this.destroy$))}startUpdate(he,je){he.pipe((0,Ue.K)(lt=>(this.removeNote(je),this.logger.error("Update error: ",lt),this.onUpdateError())),(0,b.R)(this.destroy$)).subscribe(lt=>{this.logger.info("Update result: ",lt)})}showNote(){return this.noteQueue[0]}hasAnyNote(){return this.noteQueue.length>0}hasSpecificNote(he){return this.noteQueue.includes(he)}onClickClose(he){const je=this.removeNote(he);je===ft.Games?(this.logger.info("closing oobe message: you must own games"),this.showOsNotificationIfNeeded()):je===ft.OS?this.logger.info("closing oobe message: OS requirements"):je===ft.UsabilityStudy?this.declineSurveys():je===ft.DownloadNativeClient?this.persistPromptState(st):je===ft.InstallPWA?this.persistPromptState(Et):je===ft.Survey?this.declineSurveys():je===ft.AccountLinkingExpireToday?this.ownershipSyncService.setNotificationSettings({hideExpiresToday:!0}).pipe((0,V.q)(1),(0,b.R)(this.destroy$)).subscribe():je===ft.AccountLinkingExpireInDays?this.ownershipSyncService.setNotificationSettings({hideExpiresInDays:!0}).pipe((0,V.q)(1),(0,b.R)(this.destroy$)).subscribe():je===ft.BrowserPushNotification?this.persistPushNotificationPromptState():this.logger.info("closing oobe message")}onClickRefresh(he){this.logger.info("REFRESH NOW clicked. Requesting SW to activate"),this.removeNote(he),this.logger.info("Notification removed due to refresh, type: ",he),this.gfnSwUpdateService.activateServiceWorker().pipe((0,b.R)(this.destroy$)).subscribe(je=>this.logger.info("SW activation result",je),je=>this.logger.info("SW activation err",je.toString()))}onClickParticipate(){this.networkStatusService.isOnline?(this.surveyService.participateInUsabilityStudy(),this.removeNote(this.getNotificationSurveyType())):(this.removeNote(this.getNotificationSurveyType()),this.openConnectionErrorDialog())}getNotificationSurveyType(){return this.hasSpecificNote(ft.Survey)?ft.Survey:ft.UsabilityStudy}onClickDownload(){this.persistPromptState(st),this.removeNote(ft.DownloadNativeClient),window.open(this.downloadNativeClientUrl)}onClickInstallPwa(){this.persistPromptState(Et),this.removeNote(ft.InstallPWA),this.pwaPromptService.promptFromDeferredEvent()}onClickAllowNotification(){this.persistPushNotificationPromptState(),this.removeNote(ft.BrowserPushNotification),this.browserPushService.requestPermissionForPushNotification()}onClickLearnMore(){this.persistPushNotificationPromptState(),this.removeNote(ft.BrowserPushNotification),window.open(this.browserPushService.pushNotificationKBAUrl)}declineSurveys(){if(this.networkStatusService.isOnline){const he=this.surveyService.getSurveyBannerInProgress();this.surveyService.declineSurveys(he.surveyVisited?S._G.DismissManualPostMinimize:S._G.DismissManual,S.wN.MallScreen,he).pipe((0,te.P)()).subscribe(()=>{this.removeNote(this.getNotificationSurveyType()),this.logger.info("Notification removed since survey declined")})}else this.openConnectionErrorDialog(!0)}openConnectionErrorDialog(he=!1){const je=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:"notification.errorHeader"},bodyText:{text:"notification.errorDescription"},primaryButton:{text:"common.tryAgain",accentColor:!0},secondaryButton:{text:"common.exit"}}});je.primaryButtonClick.pipe((0,V.q)(1)).subscribe(()=>{je.close(),he?this.onClickClose(this.getNotificationSurveyType()):(this.logger.info("Trying again to participate"),this.onClickParticipate())}),je.secondaryButtonClick.pipe((0,V.q)(1)).subscribe(()=>{je.close()})}onClickRestart(he){this.startUpdate(this.mallRelaunchService.startRelaunch(!1),he)}onClickShowMeHow(){window.open(S.hEi.BaseUrl+"en_US&page=gfn_pc_help_update"),this.removeNote(ft.NonAdminRecommendedNotification)}checkForAccountLinkingExpiration(he){const je=this.ownershipSyncService.getAccountState(he);if(je&&je.enabled&&je.accountType===S.ZCG.AccountLinking&&je.loggedIn){const lt=je.getExpirationStatus();if(this.accountLinking.provider=he,this.accountLinking.icon=je.icon,lt!==S.hB7.NotExpired)switch(lt){case S.hB7.Expired:this.addNote(ft.AccountLinkingExpired),this.dismissNotificationsOnCtaCancel()}}}dismissNotificationsOnCtaCancel(){var he;null===(he=this.launchCTASub)||void 0===he||he.unsubscribe(),this.launchCTASub=this.ownershipSyncService.onCancelCTA().pipe((0,b.R)(this.destroy$),(0,V.q)(1)).subscribe(()=>{this.removeNote(ft.AccountLinkingExpired),this.removeNote(ft.AccountLinkingExpireToday),this.removeNote(ft.AccountLinkingExpireInDays)})}onClickGotoSettings(he){var je;this.removeNote(he),null===(je=this.launchCTASub)||void 0===je||je.unsubscribe(),this.launchCTASub=null,this.ownershipSyncService.syncCTATileClicked(),this.customLocationService.backNavigationRoute=this.router.url,this.pathService.navigate([S.nnJ.Settings],{skipLocationChange:!0,fragment:"settings_integrations"})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete(),this.notificationIntervalSubscription&&this.notificationIntervalSubscription.unsubscribe(),this.snackBarSubscription&&(this.snackBarSubscription.unsubscribe(),this.snackBarSubscription=null),this.pushNotificationBannerSubscription&&(this.pushNotificationBannerSubscription.unsubscribe(),this.pushNotificationBannerSubscription=null)}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.Y36(f.ed),i.Y36(S.GMF),i.Y36(S.HKp),i.Y36(ht),i.Y36(f._J),i.Y36(S.FR5),i.Y36(a.F0),i.Y36(q.uw),i.Y36(S.VKt),i.Y36(f.OL),i.Y36(En.OA),i.Y36(S.m$M),i.Y36(S.qMk),i.Y36(S.X5k),i.Y36(S.unb),i.Y36(S.nG5),i.Y36(S.UJ),i.Y36(Vt.ux),i.Y36(p.sK),i.Y36(C.TX),i.Y36(f.Ob),i.Y36(S.uu8))},Fe.\u0275cmp=i.Xpm({type:Fe,selectors:[["gfn-notification"]],decls:1,vars:1,consts:[["class","notification-container","fxLayout","column","fxLayoutAlign","center","nvSpatialNavigationContainer","","containFocus","false","captureFocusForChild","true","captureAndRestore","false","nvFocusBackToFirstChild","",3,"ngSwitch","ios",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center","nvSpatialNavigationContainer","","containFocus","false","captureFocusForChild","true","captureAndRestore","false","nvFocusBackToFirstChild","",1,"notification-container",3,"ngSwitch"],["class","notification-base",3,"ngClass",4,"ngSwitchCase"],[1,"notification-base",3,"ngClass"],[1,"icon-title-row"],[1,"material-icons","info-icon","notification-info-icon"],[1,"notification-base-message-description","font-body2"],["mat-button","",1,"button-alignment",3,"click"],[1,"material-icons"],["mat-button","","aria-label","now",1,"font-button2","button-alignment",3,"click"],[1,"button-alignment"],[4,"ngIf","ngIfThen","ngIfElse"],["refreshButton",""],["relaunchButton",""],["mat-button","","aria-label","now",1,"font-button2",3,"click"],[1,"material-icons","notification-info-icon"],["learnMoreButton",""],["letsGoButton",""],[1,"al-icon",3,"src"],["mat-button","","aria-label","go to settings",1,"font-button2",3,"click"],[3,"svgIcon"]],template:function(he,je){1&he&&i.YNc(0,ut,14,16,"div",0),2&he&&i.Q6J("ngIf",je.notificationAvailable)},directives:[m.O5,I.xw,I.Wh,ct.N,ne.s,m.RF,m.n9,m.mk,Tt.oO,fe.lW,$.Hw],pipes:[p.X$],styles:['@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.notification-gap[_ngcontent-%COMP%]{height:8px}.notification-base[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#393939;width:100%;z-index:1}.notification-base[_ngcontent-%COMP%]   .icon-title-row[_ngcontent-%COMP%]{display:flex;align-items:center}.notification-base-message-description[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}.isLtr[_nghost-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.isLtr[_nghost-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%]{margin-right:36px}html[dir=ltr][_ngcontent-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%]{--dummy4: 0;margin-right:36px}.isRtl[_nghost-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%]{margin-left:36px}html[dir=rtl][_ngcontent-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%]{--dummy4: 0;margin-left:36px}.notification[_ngcontent-%COMP%]{z-index:1}.notification.ng-hide-add[_ngcontent-%COMP%]{transition:ease-in-out 1s;transition-delay:1s}.notification-animate[_ngcontent-%COMP%]{z-index:1}.notification-animate.ng-hide[_ngcontent-%COMP%]{margin-top:-32px}.notification-animate.ng-hide-add[_ngcontent-%COMP%]{transition:ease-in-out .8s;transition-delay:0s}.notification-animate.ng-hide-remove[_ngcontent-%COMP%]{transition:ease-in-out .8s;transition-delay:0s}.notification-info-icon[_ngcontent-%COMP%]{color:#ffffffbf;font-size:40px}.isLtr[_nghost-%COMP%]   .notification-info-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .notification-info-icon[_ngcontent-%COMP%]{margin-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .notification-info-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:16px}.isRtl[_nghost-%COMP%]   .notification-info-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .notification-info-icon[_ngcontent-%COMP%]{margin-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .notification-info-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:16px}.icon-title-row[_ngcontent-%COMP%]   .al-icon[_ngcontent-%COMP%]{flex-shrink:0;width:40px;height:40px}.isLtr[_nghost-%COMP%]   .icon-title-row[_ngcontent-%COMP%]   .al-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .icon-title-row[_ngcontent-%COMP%]   .al-icon[_ngcontent-%COMP%]{margin-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .icon-title-row[_ngcontent-%COMP%]   .al-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:16px}.isRtl[_nghost-%COMP%]   .icon-title-row[_ngcontent-%COMP%]   .al-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .icon-title-row[_ngcontent-%COMP%]   .al-icon[_ngcontent-%COMP%]{margin-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .icon-title-row[_ngcontent-%COMP%]   .al-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:16px}.notification-container[_ngcontent-%COMP%]   button.mat-accent[_ngcontent-%COMP%]{color:#76b900}.notification-container[_ngcontent-%COMP%]{background:#393939;padding:16px 0}.notification-container.ng-hide[_ngcontent-%COMP%]{margin-top:-32px}.notification-container.ng-hide-add[_ngcontent-%COMP%]{transition:ease-in-out .8s;transition-delay:0s}.notification-container.ng-hide-remove[_ngcontent-%COMP%]{transition:ease-in-out .8s;transition-delay:0s}button[_ngcontent-%COMP%]{height:36px;min-width:36px;border-radius:0}.isLtr[_nghost-%COMP%]   button[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   button[_ngcontent-%COMP%]{padding-left:8px}html[dir=ltr][_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--dummy1: 0;padding-left:8px}.isRtl[_nghost-%COMP%]   button[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   button[_ngcontent-%COMP%]{padding-right:8px}html[dir=rtl][_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--dummy1: 0;padding-right:8px}.isLtr[_nghost-%COMP%]   button[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   button[_ngcontent-%COMP%]{padding-right:8px}html[dir=ltr][_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--dummy2: 0;padding-right:8px}.isRtl[_nghost-%COMP%]   button[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   button[_ngcontent-%COMP%]{padding-left:8px}html[dir=rtl][_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--dummy2: 0;padding-left:8px}.isLtr[_nghost-%COMP%]   button[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   button[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.isLtr[_nghost-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.button-alignment[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-self:flex-end;line-height:36px}.isLtr[_nghost-%COMP%]   .button-alignment[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .button-alignment[_ngcontent-%COMP%]{margin-left:auto}html[dir=ltr][_ngcontent-%COMP%]   .button-alignment[_ngcontent-%COMP%]{--dummy3: 0;margin-left:auto}.isRtl[_nghost-%COMP%]   .button-alignment[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .button-alignment[_ngcontent-%COMP%]{margin-right:auto}html[dir=rtl][_ngcontent-%COMP%]   .button-alignment[_ngcontent-%COMP%]{--dummy3: 0;margin-right:auto}.ios.notification-container[_ngcontent-%COMP%]{background:#191919;padding-bottom:8px;border-bottom:2px solid #393939}.ios.notification-container[_ngcontent-%COMP%]   .notification-base[_ngcontent-%COMP%]{background:#191919;flex-flow:row wrap;justify-content:space-between}.ios.notification-container[_ngcontent-%COMP%]   .notification-base[_ngcontent-%COMP%]   .notification-base-message-description[_ngcontent-%COMP%]{margin:0 16px}']}),Fe})();const zt=["mainRouterOutletContainer"],$t=["mainViewport"];function fn(Fe,Nt){1&Fe&&(i.TgZ(0,"div",4),i._UZ(1,"mat-progress-spinner",5),i.qZA())}function Jt(Fe,Nt){1&Fe&&i._UZ(0,"nv-product-tour")}function yn(Fe,Nt){1&Fe&&i._UZ(0,"gfn-notification")}function An(Fe,Nt){1&Fe&&i._UZ(0,"gfn-notification")}function Pt(Fe,Nt){if(1&Fe){const he=i.EpF();i.TgZ(0,"div",6),i.YNc(1,Jt,1,0,"nv-product-tour",7),i.TgZ(2,"gfn-toolbar",8),i.NdJ("menuClicked",function(){return i.CHM(he),i.oxw().onMenuClicked()})("closeSidebar",function(){return i.CHM(he),i.oxw().onCloseSidebar()}),i.qZA(),i.YNc(3,yn,1,0,"gfn-notification",7),i.TgZ(4,"gfn-sidebar",9),i.TgZ(5,"div",10,11),i.TgZ(7,"div",12),i.YNc(8,An,1,0,"gfn-notification",7),i._UZ(9,"router-outlet"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&Fe){const he=i.oxw();i.xp6(1),i.Q6J("ngIf",he.isTourActive()),i.xp6(2),i.Q6J("ngIf",!he.smallScreen),i.xp6(5),i.Q6J("ngIf",he.smallScreen)}}let Ke=(()=>{class Fe{constructor(he,je,lt,Bt,hn,qt,sn,bn){this.productTourService=he,this.router=Bt,this.titleService=hn,this.breakpointObserver=qt,this.appBarService=sn,this.customLocationService=bn,this.viewState=U.$s,this.activeView=U.$s.Loading,this.smallScreen=!1,this.paddingLeft=0,this.paddingRight=0,this.logger=je.getLogger("main-content.component"),this.destroy$=new F.xQ,(0,A.fO)()&&(this.tizenExitService=lt.get(S.bPm))}ngOnInit(){this.isMacPlatform=navigator.platform.toUpperCase().indexOf("MAC")>=0,this.registerForAffilateInfo(),this.titleService.setTitle("GeForce NOW"),this.breakpointObserver.observe(f.wO.IPhone).pipe((0,V.q)(1),(0,b.R)(this.destroy$)).subscribe(he=>{this.smallScreen=he.matches}),this.appBarService.escapeNavButton$.pipe((0,b.R)(this.destroy$)).subscribe(he=>{var je;"menu"===he?null===(je=this.tizenExitService)||void 0===je||je.exitApp():"arrow_left"===he&&this.customLocationService.navigateToPreviousRoute()})}ngAfterViewInit(){const he=window.getComputedStyle(this.mainViewport.nativeElement);this.paddingLeft=parseInt(he.getPropertyValue("padding-left"),10),this.paddingRight=parseInt(he.getPropertyValue("padding-right"),10),this.mainViewport.nativeElement.addEventListener("touchstart",je=>{const lt=je.touches[0].pageX;this.paddingLeft<lt&&lt<window.innerWidth-this.paddingRight||je.preventDefault()},{passive:!1})}onOrientationChange(){const he=window.getComputedStyle(this.mainViewport.nativeElement);this.paddingLeft=parseInt(he.getPropertyValue("padding-left"),10),this.paddingRight=parseInt(he.getPropertyValue("padding-right"),10)}isTourActive(){return this.productTourService.isTourActive}get isMac(){return this.isMacPlatform}onMenuClicked(){this.gfnSidebar.toggle()}onCloseSidebar(){this.gfnSidebar.close()}registerForAffilateInfo(){this.activeView=U.$s.Ready,this.router.events.pipe((0,B.h)(he=>he instanceof a.m2)).pipe((0,b.R)(this.destroy$)).subscribe(()=>{this.mainRouterOutletContainer&&(this.mainRouterOutletContainer.nativeElement.scrollTop=0)},()=>{this.activeView=U.$s.Ready})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.Y36(w.Q3),i.Y36(f.ed),i.Y36(i.zs3),i.Y36(a.F0),i.Y36(n.Dx),i.Y36(X.Yg),i.Y36(c.ad),i.Y36(S.X5k))},Fe.\u0275cmp=i.Xpm({type:Fe,selectors:[["gfn-main-content"]],viewQuery:function(he,je){if(1&he&&(i.Gf(zt,5,i.SBq),i.Gf(ue,5),i.Gf($t,5,i.SBq)),2&he){let lt;i.iGM(lt=i.CRH())&&(je.mainRouterOutletContainer=lt.first),i.iGM(lt=i.CRH())&&(je.gfnSidebar=lt.first),i.iGM(lt=i.CRH())&&(je.mainViewport=lt.first)}},hostBindings:function(he,je){1&he&&i.NdJ("orientationchange",function(){return je.onOrientationChange()},!1,i.Jf7)},decls:4,vars:3,consts:[["fxLayout","column","fxFlexFill","",1,"common-window","covered-padding",3,"ngSwitch"],["mainViewport",""],["class","layout-spinner-container","fxLayoutAlign","center center","fxFlexFill","",4,"ngSwitchCase"],["fxLayout","column","fxFlexFill","",4,"ngSwitchCase"],["fxLayoutAlign","center center","fxFlexFill","",1,"layout-spinner-container"],["mode","indeterminate","color","accent","diameter","48","strokeWidth","4",1,"layout-spinner"],["fxLayout","column","fxFlexFill",""],[4,"ngIf"],["fxFlex","0 0 auto",1,"main-toolbar",3,"menuClicked","closeSidebar"],["fxFlex","","fxFlexFill","",1,"common-window-content","common-container-overflow"],["fxLayout","row","fxFlex","","fxFlexFill","",1,"common-window-content","common-container-overflow"],["mainRouterOutletContainer",""],["fxFlex","","fxFlexFill",""]],template:function(he,je){1&he&&(i.TgZ(0,"div",0,1),i.YNc(2,fn,2,0,"div",2),i.YNc(3,Pt,10,3,"div",3),i.qZA()),2&he&&(i.Q6J("ngSwitch",je.activeView),i.xp6(2),i.Q6J("ngSwitchCase",je.viewState.Loading),i.xp6(1),i.Q6J("ngSwitchCase",je.viewState.Ready))},directives:[I.xw,I.s9,m.RF,m.n9,I.Wh,j.Ou,m.O5,_t,I.yH,ue,a.lC,_n,Ft],styles:['.nv-custom-icons[_ngcontent-%COMP%]{display:inline-block;font-family:"nvCustomIcons"!important;font-feature-settings:normal;font-variant:normal;color:gray;-webkit-font-smoothing:antialiased}gfn-toolbar[_ngcontent-%COMP%]{z-index:10}nv-product-tour[_ngcontent-%COMP%]{z-index:200}.gfn-main-content-text[_ngcontent-%COMP%]{margin:24px}.isLtr[_nghost-%COMP%]   .covered-padding[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .covered-padding[_ngcontent-%COMP%]{padding-left:env(safe-area-inset-left)}html[dir=ltr][_ngcontent-%COMP%]   .covered-padding[_ngcontent-%COMP%]{--dummy1: 0;padding-left:env(safe-area-inset-left)}.isRtl[_nghost-%COMP%]   .covered-padding[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .covered-padding[_ngcontent-%COMP%]{padding-right:env(safe-area-inset-left)}html[dir=rtl][_ngcontent-%COMP%]   .covered-padding[_ngcontent-%COMP%]{--dummy1: 0;padding-right:env(safe-area-inset-left)}.isLtr[_nghost-%COMP%]   .covered-padding[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .covered-padding[_ngcontent-%COMP%]{padding-right:env(safe-area-inset-right)}html[dir=ltr][_ngcontent-%COMP%]   .covered-padding[_ngcontent-%COMP%]{--dummy2: 0;padding-right:env(safe-area-inset-right)}.isRtl[_nghost-%COMP%]   .covered-padding[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .covered-padding[_ngcontent-%COMP%]{padding-left:env(safe-area-inset-right)}html[dir=rtl][_ngcontent-%COMP%]   .covered-padding[_ngcontent-%COMP%]{--dummy2: 0;padding-left:env(safe-area-inset-right)}']}),Fe})();var Pe=e(31805),it=e(90425);let Lt=(()=>{class Fe{constructor(he,je,lt){var Bt;this.router=lt,this.skipLocationChange=!1,this.shouldHandleTizenDeeplink=f.ng.isPWAModeOnSamsungTV(),this.logger=je.getLogger("RedirectGuard"),this.skipLocationChange=!!(null===(Bt=he.client)||void 0===Bt?void 0:Bt.skipLocationChange)}canActivate(he,je){if(this.skipLocationChange){const lt=this.router.getCurrentNavigation();lt.extras&&(lt.extras.skipLocationChange=!0)}if(this.shouldHandleTizenDeeplink){this.logger.info("Checking if the app is launched by a deeplink...");const{appControl:lt}=(0,A.f6)(),Bt=lt&&(0,A.a_)(lt);if(Bt)return this.logger.info("Launched by a deeplink! Now redirecting to",Bt),this.router.navigateByUrl(Bt,{skipLocationChange:!1,replaceUrl:!0}),it.C}return(0,S.n6x)(he.queryParamMap)?this.router.createUrlTree([S.fFR.StreamerRoot],{queryParams:he.queryParams}):this.router.createUrlTree([S.fFR.DefaultRedirect])}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(S.VKt),i.LFG(f.ed),i.LFG(a.F0))},Fe.\u0275prov=i.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();var Dt=e(92597);let cn=(()=>{class Fe{constructor(he,je,lt,Bt){var hn;this.redirectService=je,this.systemInfoService=lt,this.configuration=Bt,this.logger=he.getLogger("unsupported-device-guard"),this.browserUniversal=null===(hn=this.configuration.featureEnablement)||void 0===hn?void 0:hn.browserClientUniversalEnablement,this.isSupportedDevice$=this.browserUniversal?(0,xn.of)(!0):this.systemInfoService.getSystemInfo().pipe((0,Ht.U)(qt=>{let sn;return f.ng.isBrowserPlatform()?(sn=!0,f.ng.isMobileFromUserAgent()&&(sn=sn&&qt.OSName!==f.wi.Android&&qt.OSName!==f.wi.Undefined)):sn=!0,this.logger.info("Is Browser supported - ",sn),sn}),(0,Dt.d)(1))}canActivateChild(he,je){return this.isSupportedDevice$.pipe((0,L.zg)(lt=>lt?(0,xn.of)(!0):(this.redirectService.handleUnsupportedAndroidPlatform(),it.C)))}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(f.ed),i.LFG(S.VHe),i.LFG(f.Ob),i.LFG(S.VKt))},Fe.\u0275prov=i.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})(),Rn=(()=>{class Fe{constructor(he,je,lt){this.router=he,this.loggingService=je,this.errorHandler=lt,this.logger=this.loggingService.getLogger("unsupported-route.guard")}canActivateChild(he,je){return this.logger.error("Incorrect route url was entered: ",je.url.toString()),this.errorHandler.handleError(new Error("Error while processing an incorrect route: "+je.url.toString())),this.router.createUrlTree([S.fFR.DefaultRedirect])}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(a.F0),i.LFG(f.ed),i.LFG(i.qLn))},Fe.\u0275prov=i.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})(),Wn=(()=>{class Fe{constructor(he,je){this.loggingService=he,this.redirectService=je,this.logger=this.loggingService.getLogger("trailingdot.guard"),this.options={replace:!0}}canActivateChild(he,je){if(window.location.hostname.endsWith(".")){this.logger.info("Trailing Dot Domain was entered");const lt=window.location.origin.replace(window.location.hostname,window.location.hostname.slice(0,-1));return this.redirectService.redirectToExternalUrl(`${lt}${window.location.pathname}`,this.options),!1}return!0}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(f.ed),i.LFG(S.VHe))},Fe.\u0275prov=i.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();var so=e(6381),ki=e(1124),zi=e(84454);let Ki=(()=>{class Fe{constructor(he,je,lt,Bt,hn,qt,sn,bn){this.domSanitizer=lt,this.localeService=Bt,this.settingsService=hn,this.dialogService=qt,this.breakpointObserver=sn,this.genericDialog=bn,this.destroy$=new F.xQ,this.logger=he.getLogger("pwa-wall.component"),je.addSvgIcon("gfnLogo",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/img/Logo_GFN_Lockup.svg"))}ngOnInit(){this.genericDialog.closeAll(),this.logo=this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/icons/GFN-Logo-72.png");let he=this.localeService.getLocale();"en_GB"===he&&(he="en_US");const je=this.settingsService.getLinksUrl(S.qBq.GFN_PC_FAQ_IOS,he),lt=this.settingsService.getLinksUrl(S.qBq.GFN_PC_INFO,he);this.breakpointObserver.observe(f.wO.IPhone).pipe((0,b.R)(this.destroy$)).subscribe(Bt=>{this.smallScreen=Bt.matches;const hn=this.smallScreen?"font-body3-link":"font-body1-link";this.learnArgs={learnMoreLink:`/a><br><a class='${hn}' href='${lt}'`},this.infoArgs={faqLink:`class="${hn}" href="${je}"`},this.helpArgs={helpLink:`class="${hn}"`}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}addToHomeHelp(){this.dialogService.openPwaWallHelpDialog()}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.Y36(f.ed),i.Y36($.jv),i.Y36(n.H7),i.Y36(f.OL),i.Y36(S.gbG),i.Y36(S.xAy),i.Y36(X.Yg),i.Y36(C.TX))},Fe.\u0275cmp=i.Xpm({type:Fe,selectors:[["gfn-pwa-wall"]],decls:57,vars:47,consts:[["fxFlexFill","",1,"parent"],[1,"gfn-background","ext-background-fill"],[1,"white-gradient"],[1,"black-gradient"],[1,"gray-overlay"],[1,"final-black-gradient"],["fxFlexFill","","fxLayoutAlign","start center",1,"dialog-background"],["fxFlex","none","fxLayout","column","fxLayoutAlign","start center",1,"logo-box",3,"fxLayoutGap"],["fxFlex","none","svgIcon","gfnLogo",1,"logo"],[1,"logo-text","blurb-font",3,"innerHTML"],["fxFlex","1 1 0.01%",1,"padding"],["fxFlex","none","fxLayout","column","fxLayoutAlign","start stretch",1,"text-box","mat-elevation-z4"],["fxFlex","none","fxLayout","row","fxLayoutAlign","center center",1,"text-header"],[1,"setup-font"],["fxFlex","noshrink","fxLayout","row","fxLayoutAlign","start center",1,"text-box-row",3,"fxLayoutGap"],["fxLayout","row","fxLayoutAlign","center center",1,"icon"],["svgIcon","ios_share"],["fxLayout","column","fxLayoutAlign","center start"],[1,"instruction-font","green"],[1,"instruction-font"],["fxFlex","none",1,"divider"],["svgIcon","add_square"],[1,"footer-font",3,"innerHTML","click"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"icon"],["svgIcon","nvidia_logo_green"],["fxFlex","none",1,"divider-full"],["fxFlex","none","fxLayout","row","fxLayoutAlign","center center",1,"last-row"],[1,"footer-font",3,"innerHTML"]],template:function(he,je){1&he&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"div",4),i._UZ(5,"div",5),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(6,"div",6),i.TgZ(7,"div",7),i._UZ(8,"mat-icon",8),i._UZ(9,"div",9),i.ALo(10,"trustAsHtml"),i.ALo(11,"translate"),i.qZA(),i._UZ(12,"div",10),i.TgZ(13,"div",11),i.TgZ(14,"div",12),i.TgZ(15,"div",13),i._uU(16),i.ALo(17,"translate"),i.qZA(),i.qZA(),i.TgZ(18,"div",14),i.TgZ(19,"div",15),i._UZ(20,"mat-icon",16),i.qZA(),i.TgZ(21,"div",17),i.TgZ(22,"div",18),i._uU(23),i.ALo(24,"translate"),i.qZA(),i.TgZ(25,"div",19),i._uU(26),i.ALo(27,"translate"),i.qZA(),i.qZA(),i.qZA(),i._UZ(28,"mat-divider",20),i.TgZ(29,"div",14),i.TgZ(30,"div",15),i._UZ(31,"mat-icon",21),i.qZA(),i.TgZ(32,"div",17),i.TgZ(33,"div",18),i._uU(34),i.ALo(35,"translate"),i.qZA(),i.TgZ(36,"div",19),i._uU(37),i.ALo(38,"translate"),i.qZA(),i.TgZ(39,"div",22),i.NdJ("click",function(){return je.addToHomeHelp()}),i.ALo(40,"translate"),i.qZA(),i.qZA(),i.qZA(),i._UZ(41,"mat-divider",20),i.TgZ(42,"div",14),i.TgZ(43,"div",23),i._UZ(44,"mat-icon",24),i.qZA(),i.TgZ(45,"div",17),i.TgZ(46,"div",18),i._uU(47),i.ALo(48,"translate"),i.qZA(),i.TgZ(49,"div",19),i._uU(50),i.ALo(51,"translate"),i.qZA(),i.qZA(),i.qZA(),i._UZ(52,"mat-divider",25),i.TgZ(53,"div",26),i._UZ(54,"div",27),i.ALo(55,"trustAsHtml"),i.ALo(56,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&he&&(i.xp6(1),i.ekj("small",je.smallScreen),i.xp6(5),i.ekj("big",!je.smallScreen)("small",je.smallScreen),i.xp6(1),i.Q6J("fxLayoutGap",je.smallScreen?"24px":"50px"),i.xp6(2),i.Q6J("innerHTML",i.lcZ(10,20,i.xi3(11,22,"iosPWA.promotion.subtitle",je.learnArgs)),i.oJD),i.xp6(7),i.Oqu(i.lcZ(17,25,"iosPWA.instruction.title")),i.xp6(2),i.Q6J("fxLayoutGap",je.smallScreen?"16px":"24px"),i.xp6(5),i.Oqu(i.lcZ(24,27,"iosPWA.instruction.step1")),i.xp6(3),i.Oqu(i.lcZ(27,29,"iosPWA.instruction.step1Text")),i.xp6(3),i.Q6J("fxLayoutGap",je.smallScreen?"16px":"24px"),i.xp6(5),i.Oqu(i.lcZ(35,31,"iosPWA.instruction.step2")),i.xp6(3),i.Oqu(i.lcZ(38,33,"iosPWA.instruction.step2Text")),i.xp6(2),i.Q6J("innerHTML",i.xi3(40,35,"iosPWA.instruction.step2Subtext",je.helpArgs),i.oJD),i.xp6(3),i.Q6J("fxLayoutGap",je.smallScreen?"16px":"24px"),i.xp6(5),i.Oqu(i.lcZ(48,38,"iosPWA.instruction.step3")),i.xp6(3),i.Oqu(i.lcZ(51,40,"iosPWA.instruction.step3Text")),i.xp6(4),i.Q6J("innerHTML",i.lcZ(55,42,i.xi3(56,44,"iosPWA.information",je.infoArgs)),i.oJD))},directives:[I.s9,I.Wh,I.yH,I.xw,I.SQ,$.Hw,so.E,ki.d],pipes:[zi.W,p.X$],styles:['@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%], .big[_ngcontent-%COMP%]   .blurb-font[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%], .big[_ngcontent-%COMP%]   .setup-font[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%], .big[_ngcontent-%COMP%]   .instruction-font.green[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%], .instruction-font.green[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%], .setup-font[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .big[_ngcontent-%COMP%]   .footer-font[_ngcontent-%COMP%], .big[_ngcontent-%COMP%]   .instruction-font[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .instruction-font[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .footer-font[_ngcontent-%COMP%], .blurb-font[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.parent[_ngcontent-%COMP%]{position:relative}@media (orientation: landscape){.small.dialog-background[_ngcontent-%COMP%]{flex-direction:row!important;align-items:center!important}}@media (orientation: landscape){.small.gfn-background[_ngcontent-%COMP%]{width:50%}}.logo-box[_ngcontent-%COMP%]{margin-top:75px}.big[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]{margin-top:150px}.padding[_ngcontent-%COMP%]{max-height:55px;height:55px}.big[_ngcontent-%COMP%]   .padding[_ngcontent-%COMP%]{max-height:60px;height:60px}@media (orientation: landscape){.small[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]{flex:0 0 50%!important;margin-top:0}.big[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]{margin-top:40px}.small[_ngcontent-%COMP%]   .padding[_ngcontent-%COMP%]{height:0;max-height:0}}.logo[_ngcontent-%COMP%]{width:120px;height:24px}.big[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:245px;height:47px}.logo-text[_ngcontent-%COMP%]{padding:0 20% 10px;text-align:center}.text-box[_ngcontent-%COMP%]{background:#292929;margin:0 16px 16px;width:calc(100vw - 32px)}.big[_ngcontent-%COMP%]   .text-box[_ngcontent-%COMP%]{max-width:548px}@media (orientation: landscape){.small[_ngcontent-%COMP%]   .text-box[_ngcontent-%COMP%]{margin:0;width:50vw;flex:0 0 50%!important;align-self:stretch}}.text-header[_ngcontent-%COMP%]{background:#191919;width:100%;height:42px;padding:0 16px}.big[_ngcontent-%COMP%]   .text-header[_ngcontent-%COMP%]{height:55px}.text-box-row[_ngcontent-%COMP%]{padding:14px 16px}.big[_ngcontent-%COMP%]   .text-box-row[_ngcontent-%COMP%]{padding:26px 0}@media (orientation: landscape){.isLtr[_nghost-%COMP%]   .small[_ngcontent-%COMP%]   .text-box-row[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .small[_ngcontent-%COMP%]   .text-box-row[_ngcontent-%COMP%]{padding-right:max(env(safe-area-inset-right,16px),16px)}html[dir=ltr][_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]   .text-box-row[_ngcontent-%COMP%]{--dummy2: 0;padding-right:max(env(safe-area-inset-right,16px),16px)}.isRtl[_nghost-%COMP%]   .small[_ngcontent-%COMP%]   .text-box-row[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .small[_ngcontent-%COMP%]   .text-box-row[_ngcontent-%COMP%]{padding-left:max(env(safe-area-inset-right,16px),16px)}html[dir=rtl][_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]   .text-box-row[_ngcontent-%COMP%]{--dummy2: 0;padding-left:max(env(safe-area-inset-right,16px),16px)}}.last-row[_ngcontent-%COMP%]{height:42px;padding:0 16px}.big[_ngcontent-%COMP%]   .last-row[_ngcontent-%COMP%]{height:55px}.icon[_ngcontent-%COMP%]{width:44px;height:44px;color:#fff}.isLtr[_nghost-%COMP%]   .icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:16px}.isRtl[_nghost-%COMP%]   .icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:16px}.big[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:46px;height:46px}.isLtr[_nghost-%COMP%]   .big[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .big[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:30px}html[dir=ltr][_ngcontent-%COMP%]   .big[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:30px}.isRtl[_nghost-%COMP%]   .big[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .big[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:30px}html[dir=rtl][_ngcontent-%COMP%]   .big[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:30px}.icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:44px;height:44px}.big[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:46px;height:46px}.divider[_ngcontent-%COMP%]{margin:0 16px}.big[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{margin:0 24px}.divider-full[_ngcontent-%COMP%]{margin:0}.blurb-font[_ngcontent-%COMP%]{text-transform:uppercase}.big[_ngcontent-%COMP%]   .blurb-font[_ngcontent-%COMP%]{text-transform:uppercase}.setup-font[_ngcontent-%COMP%]{text-align:center}.instruction-font.green[_ngcontent-%COMP%]{color:#76b900}.big[_ngcontent-%COMP%]   .instruction-font.green[_ngcontent-%COMP%]{color:#76b900}.footer-font[_ngcontent-%COMP%]{text-align:center;margin-top:8px}']}),Fe})(),$i=(()=>{class Fe{constructor(he){this.unsupportedBrowserService=he}canActivate(he,je){return this.unsupportedBrowserService.shouldDisplayPWAGuidance$}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(S.rHN))},Fe.\u0275prov=i.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();var Ei=e(71906);const Yi=[{path:"",pathMatch:"full",canActivate:[Lt],children:[]},{path:"layout",component:Ke,children:[{path:"games",loadChildren:()=>f.OA.retry(()=>Promise.all([e.e(592),e.e(934)]).then(e.bind(e,34934)).then(Fe=>Fe.LayoutModule),"LayoutModule")},{path:"gallery",loadChildren:()=>Promise.resolve().then(e.bind(e,51711)).then(Fe=>Fe.GalleryModule)},{path:"preview",loadChildren:()=>Promise.resolve().then(e.bind(e,68716)).then(Fe=>Fe.PreviewModule)},{path:"settings",loadChildren:()=>f.OA.retry(()=>Promise.all([e.e(592),e.e(519)]).then(e.bind(e,16519)).then(Fe=>Fe.SettingsModule),"SettingsModule"),data:{}},{path:"surveys",loadChildren:()=>Promise.all([e.e(592),e.e(863)]).then(e.bind(e,72863)).then(Fe=>Fe.SurveysModule),data:{}}]},{path:"deeplink",loadChildren:()=>Promise.resolve().then(e.bind(e,97497)).then(Fe=>Fe.DeeplinkModule),canActivate:[Pe._x],data:{}},{path:"",loadChildren:()=>f.OA.retry(()=>Promise.all([e.e(592),e.e(307)]).then(e.bind(e,78307)).then(Fe=>Fe.StreamerModule),"StreamerModule")},{path:"install",canActivate:[$i],component:Ki}],ao=[{path:"",canActivateChild:[cn,Wn],children:Yi},{path:"**",canActivateChild:[Rn],children:Yi}];let Qi=(()=>{class Fe{constructor(he,je){this.appConfig=je,this.logger=he.getLogger("mall/app-routing-module"),f.OA.sendTelemetry(this.logger),this.appConfig.configFetched$.subscribe(()=>{f.OA.retryAttempts=Number(this.appConfig.get().chunkRetry.retryAttempts),f.OA.intervalBetweenRetries=Number(this.appConfig.get().chunkRetry.interval)})}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(f.ed),i.LFG(Ei.XL))},Fe.\u0275mod=i.oAB({type:Fe}),Fe.\u0275inj=i.cJS({imports:[[a.Bz.forRoot(ao,{useHash:!0,relativeLinkResolution:"legacy"})],a.Bz]}),Fe})();var lo=e(12702),co=e(83972),go=e(130),Ui=e(90490),Si=e(79902),ui=e(2984),Ji=e(73159),ho=e(45871),ji=e(92941),Po=e(62167),Xi=e(62558),uo=e(73341),Mi=e(89166),Fi=e(79911),Oo=(e(9637),e(9021)),Mo=e(60867),yo=e(26301),Ne=e(78778),Rt=e(49654);let H=(()=>{class Fe{constructor(he,je,lt,Bt,hn,qt,sn,bn){this.endpointFactory=je,this.distributedtracingUtilService=lt,this.idmService=Bt,this.clientHeaderService=hn,this.appConfig=qt,this.systemInfoService=sn,this.telemetryUtilService=bn,this.gxtRemoteConfigDefaultTimeout=3e3,this.gxtRemoteConfigDefaultTimeBetweenRetries=1e4,this.gxtRemoteConfigDefaultRetries=2,this.logger=he.getLogger("GxtRemoteConfigSdkService")}getRemoteConfig(he,je,lt){return(0,K.aj)([this.clientHeaderService.getCommonHeaders(),this.systemInfoService.getSystemInfo(),this.idmService.getAuthToken(je).pipe((0,V.q)(1))]).pipe((0,V.q)(1),(0,L.zg)(([Bt,hn,qt])=>{var sn,bn,Jn;const ai=Object.assign({project:this.appConfig.gxtRemoteConfig.rconfigProject},{product:this.appConfig.gxtRemoteConfig.rconfigProduct},{clientParams:JSON.stringify(he)}),di={headers:this.createHeader(Bt,hn,qt),reportRequestData:{originalService:Oo.v6v.GxTarget,serviceUseCase:Oo.f$p.GetRemoteConfig,reportSuccessTelemetry:"true"},params:ai,includeRequestId:!0},Zi={timeout:null!==(sn=this.appConfig.gxtRemoteConfig.defaultTimeout)&&void 0!==sn?sn:this.gxtRemoteConfigDefaultTimeout,timeBetweenRetries:null!==(bn=this.appConfig.gxtRemoteConfig.defaultTimeBetweenRetries)&&void 0!==bn?bn:this.gxtRemoteConfigDefaultTimeBetweenRetries,maxRetries:null!==(Jn=this.appConfig.gxtRemoteConfig.defaultRetries)&&void 0!==Jn?Jn:this.gxtRemoteConfigDefaultRetries},eo=this.endpointFactory.createEndpoint({config:Zi}).get((0,A.D5)([this.appConfig.gxtRemoteConfig.server+"/rconfig/v2"]),di);return this.distributedtracingUtilService.handleHttpEndpointSpan(eo,di,Mi.j1.GetRemoteConfigV2,lt).pipe((0,yt.b)(Gn=>(this.logger.info("Successfully got remote config from GXT"),Gn)))}))}createHeader(he,je,lt){const Bt=Object.assign({},he);return Bt["NV-GXT-Device-Id"]=je.DeviceId,Bt["NV-Device-Make"]=(null==je?void 0:je.VendorName)||"undefined",Bt["NV-Client-Variant"]=this.telemetryUtilService.getCommonClientVariant(this.appConfig.build.variant),(null==lt?void 0:lt.token)&&(Bt[Fi.n0.authorization]=`GFNJWT ${lt.token}`),Bt}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(f.ed),i.LFG(Fi.V9),i.LFG(Mi.Dc),i.LFG(Mo.N),i.LFG(yo.x),i.LFG(Ne.V),i.LFG(f.Ob),i.LFG(Rt.w))},Fe.\u0275prov=i.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})(),pe=(()=>{class Fe{constructor(he,je,lt,Bt,hn,qt,sn,bn){this.gridService=je,this.nesUserInfoService=lt,this.remoteConfigService=Bt,this.appConfig=hn,this.gxtRemoteConfigSdkService=qt,this.cloudVariableHelperService=sn,this.telemetryService=bn,this.isCachedRCTelemetrySent=!1,this.logger=he.getLogger("gfn/RemoteConfigTriggerService")}initialize(){this.logger.info("init");const he=[this.gridService.defaultZone$,this.nesUserInfoService.fetchUserInfoWithStreamingUrl()];let je,lt,Bt,hn,qt;(0,K.aj)(he).pipe((0,L.zg)(([sn,bn])=>(0,K.aj)([(0,xn.of)(bn.isAffiliate?bn.serviceEndpoint.loginProviderCode:null),(0,xn.of)(bn),this.gridService.vpcId$.pipe((0,V.q)(1)),this.remoteConfigService.getCurrentZonePrefix()])),(0,B.h)(([sn,bn,Jn,ai])=>(je=sn,lt=bn,Bt=ai,hn=Jn,Bt!==this.remoteConfigService.cachedZonePrefix||lt.user.userId!==this.remoteConfigService.cachedUserId||je!==this.remoteConfigService.cachedProviderCode)),(0,L.zg)(()=>this.queryFetchFromGXTSwitch()),(0,L.zg)(sn=>{var bn;return this.isCachedRCTelemetrySent||(this.sendRCDebugInfoTelemetry(!1,!0,this.remoteConfigService.fetchedFromGXTForCachedRCTelemetry),this.isCachedRCTelemetrySent=!0),sn?(this.logger.info("fetching remote config data from GXT",je,null===(bn=lt.user)||void 0===bn?void 0:bn.userId,Bt,hn),qt=!0,this.fetchRemoteConfigFromGXT(Bt,hn).pipe((0,gn.h)(qt))):(this.logger.info("fetching remote config data from legacy remote config system"),this.remoteConfigService.getRemoteConfig(je,null,lt.user.userId,!1),qt=!1,(0,xn.of)(qt))})).subscribe(sn=>{var bn;this.logger.info("remote config fetched successfully, fetchedFromGXT: ",sn),this.remoteConfigService.cachedProviderCode=je,this.remoteConfigService.cachedUserId=(null===(bn=lt.user)||void 0===bn?void 0:bn.userId)||"",this.remoteConfigService.cachedZonePrefix=Bt,this.remoteConfigService.cachedVPCId=hn,this.sendRCDebugInfoTelemetry(!0,!0,qt)},sn=>{this.sendRCDebugInfoTelemetry(!0,!1,qt,hn,Bt),this.logger.error("Failed to get remote config",sn)})}queryFetchFromGXTSwitch(){return this.cloudVariableHelperService.getFeatureToggle(S._P4.ENABLE_REMOTE_CONFIG_ON_GXT,{configCheckEnabled:!0}).pipe((0,V.q)(1))}fetchRemoteConfigFromGXT(he,je){return this.gxtRemoteConfigSdkService.getRemoteConfig({zoneName:je,regionName:he}).pipe((0,yt.b)(Bt=>{var hn;this.logger.info("remote config data fetched successfully from GXT");const qt=null===(hn=null==Bt?void 0:Bt.params)||void 0===hn?void 0:hn.find(bn=>"rcParamNameToLocalConfigKeyPathMap"===bn.name);let sn=this.appConfig.rcParamNameToLocalConfigKeyPathMap;qt&&(sn=(0,Mt.merge)(this.appConfig.rcParamNameToLocalConfigKeyPathMap,qt.value)),this.remoteConfigService.updateRemoteConfigFromGXT(Bt,he,je,sn)}),(0,Ue.K)(Bt=>(this.logger.error("Failed to get remoteConfig from GXT: ",Bt),this.remoteConfigService.propagatePreviousOverides(),(0,ho._)(Bt))))}sendRCDebugInfoTelemetry(he,je,lt,Bt,hn){const qt=je&&he?this.remoteConfigService.remoteConfigFetched$.pipe((0,gn.h)(!0)):(0,xn.of)(!1);(0,Ui.$R)(this.telemetryService.getDefaultClientConsentObserable(),this.telemetryService.getCommonDataObservable(),qt).pipe((0,V.q)(1),(0,yt.b)(()=>{this.logger.info("Sending RemoteConfigInfo telemetry event");const sn=Bt||(he?this.remoteConfigService.cachedVPCId:this.remoteConfigService.vpcIdForForCachedRCTelemetry),bn=hn||(he?this.remoteConfigService.cachedZonePrefix:this.remoteConfigService.zonePrefixForCachedRCTelemetry),Jn=he?this.remoteConfigService.currentRemoteConfigRevision:this.remoteConfigService.projectRevisionForCachedRCTelemetry,ai=new S.Ran({isLive:he?S.wye.TRUE:S.wye.FALSE,isSuccess:je?S.wye.TRUE:S.wye.FALSE,regionName:null!=bn?bn:"",zoneName:lt&&sn?sn:"",project:lt?this.appConfig.gxtRemoteConfig.rconfigProject:"",product:lt?this.appConfig.gxtRemoteConfig.rconfigProduct:"",revision:null!=Jn?Jn:"",isFetchedFromGXT:lt?S.wye.TRUE:S.wye.FALSE});this.logger.info(`telemetry params for ${he?"live":"cached"} RemoteConfigInfo`,ai),this.telemetryService.push(ai)})).subscribe(ji.Z,sn=>{this.logger.error("Error in sending remoteConfigInfo telemetry",sn)})}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(f.ed),i.LFG(S.rIG),i.LFG(Po.f),i.LFG(Xi.s),i.LFG(uo.VK),i.LFG(H),i.LFG(S.$lO),i.LFG(Me.y0))},Fe.\u0275prov=i.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();var Ae=e(43365),et=e(98221),wt=e(48259),Yt=e(68674),Xt=e(33987),In=e(13335),Tn=e(11479),Qn=e(772);let wn=(()=>{class Fe{constructor(he,je,lt,Bt,hn,qt,sn,bn,Jn,ai,di,Zi,Li,Ri,eo,Gn,to,po,un,fo,Wi,no,vo,Pi,bo,xo,Rr,wr,Dr,Nr,Go,_o,kr,io,Ur,cr,dr,Fr,Gr,gr,Br,Vr,Bo,Hr,Zr,Vo,hr,yi,Oi,Ho,ur,Zo,Wo,Wr,$n,Vn,Nn,zr,Kr,$r){var zo,Ko,$o;this.appConfig=je,this.guestModeService=lt,this.oobeService=Bt,this.userConsentService=hn,this.stringTableSvc=qt,this.localeService=sn,this.startupService=bn,this.mallRelaunchService=Jn,this.confirmationDialogService=ai,this.bridgeService=di,this.remoteConfigTriggerService=Zi,this.experienceControlService=Ri,this.releaseHighlightsService=eo,this.updateService=Gn,this.idmService=to,this.productTourService=fo,this.browserSupportService=Wi,this.gfcHelperService=no,this.telemetryService=vo,this.feedbackService=Pi,this.gfwslParamsService=bo,this.playtestLiveService=xo,this.gfnSdkService=_o,this.pwaService=dr,this.ntEventsHandlerService=Fr,this.networkTestService=Gr,this.backgroundColorService=gr,this.spatialNavigationService=Vr,this.gamepadNavigationService=Bo,this.systemInfoService=Zr,this.browserPushNotificationService=Vo,this.router=hr,this.surveyService=yi,this.snackbar=Ho,this.translateService=ur,this.settingsService=Zo,this.unsupportedBrowserService=Wo,this.resolutionUpscaleService=Wr,this.tizenInputService=$n,this.nvKeyboardService=Nn,this.audioPlayService=zr,this.clipboardService=Kr,this.destroy$=new F.xQ,this.direction="ltr";const{remoteLogging:oo=!1,consoleLogging:mr=!0,telemetryReporting:Yr=!0,devTools:Qr=!0}=je.featureEnablement;he.initialize(oo,mr),this.logger=he.getLogger("app component"),this.logger.info("Using configuration:",je),this.backgroundColorService.init(!0),this.updateLocale(),this.openOsrSubscription=this.bridgeService.executeCommand(ui.Gh.Gfn.Streaming.OpenOsr,{enableInput:!0}).subscribe(),vo.initialize(!Yr),Ri.initialize(io.getClientType(),Li.fetchCountryCode()),Oi.initialize(oo,mr),Go.initialize(),kr.initialize(),this.streamerConfigSubscription=cr.config$.pipe((0,Ht.U)(Yn=>{const gi=!(0,Mt.isNil)(null==Yn?void 0:Yn.sdkClient)&&(null==Yn?void 0:Yn.sdkClient.length)>0;return gi&&_o.setSdkClient(Yn.sdkClient),io.setTelemetryConfig(Yn),gi}),(0,B.h)(Yn=>Yn&&_o.isThisAGFNSDKSession()),(0,L.zg)(()=>_o.getAuthInfo()),(0,L.zg)(Yn=>{var gi;switch(Yn.authType){case Ji.Gr.IDM:if(Yn.authToken)return to.setIdToken(Yn.authToken);break;case Ji.Gr.JWT:return this.guestModeService.isGuestMode&&!(null===(gi=this.guestModeService.getGuestModeConfig())||void 0===gi?void 0:gi.switchToLoggedInUser)?(0,xn.of)(null):po.getUserMembership()}return(0,xn.of)(null)}),(0,B.h)(Yn=>{var gi;return!1===(null===(gi=null==Yn?void 0:Yn.subscription)||void 0===gi?void 0:gi.upsellOptions.canUpsell)})).subscribe(Yn=>{this.logger.info("GaaS session available, but user has a premium account. Using that instead"),_o.forceIDMAuthType()}),to.initialize(this.guestModeService.isGuestMode),Vn.initialize(),je.featureEnablement.remoteLogging&&!this.guestModeService.isGuestMode&&no.initialize(),f.ng.isBrowserPlatform()&&(this.browserSupportService.initialize(!0,!wr.production||Qr),this.ntEventsHandlerService.initiateAnalyticsEvents(),this.browserPushNotificationService.init(),this.oobeService.oobeDialogClosedState.pipe((0,B.h)(gi=>gi),(0,b.R)(this.destroy$)).subscribe(gi=>this.unsupportedBrowserService.initialize())),this.userConsentService.initUserConsent(),Li.initializeDistributedTracing(),this.remoteConfigTriggerService.initialize();const jr=Nr.initialize();po.initialize(),un.initialize(),this.productTourService.initialize(),Rr.initialize(),Dr.initialize(),Ur.init(),dr.initialize(),Br.init(jr),this.surveyService.initialize(),this.clipboardService.setDefaultClipboardSetting(),(null===(zo=je.featureEnablement)||void 0===zo?void 0:zo.openLinksOffDevice)&&(this.logger.info("Enabling off-device link feature"),Hr.enable()),(null===(Ko=this.appConfig.featureEnablement)||void 0===Ko?void 0:Ko.spatialNavigation)&&(this.logger.info("Enabling spatial navigation"),this.spatialNavigationService.enable(!0)),(null===($o=this.appConfig.featureEnablement)||void 0===$o?void 0:$o.nvKeyboard)&&(this.nvKeyboardService.enabled=!0),$r.init()}ngOnInit(){var he;this.telemetryService.setScreen(S.CGJ.ScreenMallHome),this.idmService.accountStatusChanged.pipe((0,b.R)(this.destroy$)).subscribe(qt=>{this.productTourService.onAccountStatusChanged(qt.userId,qt.isAuthenticated),this.feedbackService.onAccountStatusChanged({userId:qt.userId,externalUserId:qt.externalId,idpId:qt.idpId,isAuthenticated:qt.isAuthenticated}),this.gfwslParamsService.onAccountStatusChanged(qt.userId,qt.isAuthenticated,Me.p6.Full,qt.technicalConsent,qt.behavioralConsent),this.networkTestService.initGxTargetConfiguration(f.ng.isBrowserPlatform())}),this.startupService.checkAndFixOverrideZone().pipe((0,b.R)(this.destroy$)).subscribe();const je=(0,xn.of)(null).pipe((0,yt.b)(()=>{this.gfnSdkService.continueStartup()}),(0,L.zg)(()=>this.showReleaseHighlightsOnAppUpdate()),(0,Si.w)(qt=>this.mallRelaunchService.completeRelaunch()),(0,Ue.K)(qt=>(this.logger.error("Failed to launch stored cmsId ",qt),(0,xn.of)(null))),(0,yt.b)(qt=>{qt&&this.logger.info("Successfuly launched stored cmsId")})),lt=(0,lo.H)(0).pipe((0,Si.w)(()=>{const qt=this.confirmationDialogService.open({disableClose:!0,hasBackdrop:!0,data:{message:"install.installFirstMessage",closeButtonText:"common.close",header:"common.productName"}});return(0,co.z)(qt.afterClosed(),this.bridgeService.executeCommand(ui.Gh.Common.Windowcontrol.Close)).pipe((0,Ue.K)(sn=>(this.logger.error("Failed to close the app while app is not installed: ",sn),(0,xn.of)(null))))}));let Bt=je;if(!(0,S.wIc)(this.router.url)){const qt=this.updateService.updateApplication$();Bt=this.updateService.isUpdateAvailable$().pipe((0,yt.b)(sn=>this.logger.info("Update check, isAvailable",sn)),(0,Si.w)(sn=>(0,go.s)(()=>sn,qt,je)))}if((0,Ui.$R)(this.oobeService.oobeDialogClosedState,this.oobeService.launch()).pipe((0,Si.w)(()=>this.bridgeService.executeCommand(ui.Gh.Common.Applicationinfo.IsApplicationInstalled)),(0,Si.w)(qt=>(0,go.s)(()=>qt,Bt,lt))).pipe((0,b.R)(this.destroy$)).subscribe(()=>this.logger.info("Mall AppComponent init finished"),qt=>this.logger.error("Error while starting mall",qt)),this.osType$=this.systemInfoService.getDeviceOSType().pipe((0,V.q)(1),(0,Dt.d)(1)),this.resolutionUpscaleService.initialize(),this.playtestLiveService.initialize(),(null===(he=this.appConfig.featureEnablement)||void 0===he?void 0:he.spatialNavigation)&&this.gamepadNavigationService.initialize(),f.ng.isBrowserPlatform()){this.osType$.pipe((0,L.zg)(bn=>this.bridgeService.executeCommand(ui.Gh.Share.Shareserver.InitOsInfo,{osType:bn})),(0,b.R)(this.destroy$)).subscribe(()=>{this.logger.info("ShareServer Browser plugin Initialized")});const qt=[f.wi.Windows,f.wi.MacOS,f.wi.ChromeOS,f.wi.Linux],sn=S.N0y.RigReadyAndStreamerIdleTimeout;this.osType$.pipe((0,B.h)(bn=>qt.includes(bn)),(0,V.q)(1)).subscribe(bn=>this.audioPlayService.registerAudio(null==sn?void 0:sn.type,null==sn?void 0:sn.src))}this.productTourService.onTourEnd.pipe((0,b.R)(this.destroy$)).subscribe(qt=>{this.showInitToastForXbox()}),this.productTourService.isTourShown$.pipe((0,b.R)(this.destroy$),(0,B.h)(qt=>!qt)).subscribe(qt=>this.showInitToastForXbox()),this.appConfig.instrumentation.isEnabled&&this.systemInfoService.getSystemInfo().pipe((0,V.q)(1)).subscribe(qt=>{const Jn=`\n${JSON.stringify({systemInfo:qt},null,"\t")}`;this.logger.info(`\nINSTRUMENTATION_LOG_BEGIN${Jn}\nINSTRUMENTATION_LOG_END`)}),f.ng.isPWAModeOnSamsungTV()&&this.tizenInputService.initialize()}onInstallingApp(he){this.logger.info("PWA installed: Success")}updateLocale(){this.localeService.isRTLLocaleSupported=this.appConfig.featureEnablement.rtlLocaleSupported;let he=this.localeService.useDefaultLocale();!(0,Mt.isNil)(this.appConfig.locale)&&this.appConfig.locale.value&&(he=this.localeService.setLocale(this.appConfig.locale.value)),this.localeServiceSubscription=he.pipe((0,L.zg)(()=>this.stringTableSvc.load())).subscribe(()=>{this.logger.info("Successfully loaded string table")},je=>{this.logger.error("Failed to load string table with error: ",je)}),this.layoutDirectionUpdateSubscription=this.localeService.layoutDirectionUpdated$.subscribe(()=>{this.direction=this.localeService.isRTLLayoutEnabled?"rtl":"ltr"})}showReleaseHighlightsOnAppUpdate(){if(this.appConfig.featureEnablement.releaseHighlights){const he=this.updateService.isFirstAppRunAfterMajorUpdate$(),je=this.releaseHighlightsService.showReleaseHighlightsFromSharedStorage(this.appConfig.build.version),lt=this.updateService.readUpdateData();return(0,Ui.$R)(lt,he).pipe((0,V.q)(1),(0,Si.w)(([Bt,hn])=>(null==Bt?void 0:Bt.updateFromStreamer)?(this.logger.info("Update was triggered during game launch, do not show RH."),this.updateService.appendUpdateData({updateFromStreamer:!1}).pipe((0,L.zg)(qt=>this.releaseHighlightsService.updateReleaseHighlightsSkippedStatus(this.appConfig.build.version,!0)),(0,gn.h)(!1))):(this.logger.info("StoredUpdateData is null or updateFromStreamer value is false/null."),hn?(this.logger.info("Major update done."),(0,xn.of)(!0)):je.pipe((0,L.zg)(qt=>(this.logger.info("show release highlights SharedStorage value: ",qt),qt?this.releaseHighlightsService.showReleaseHighlightsFromRemoteConfig(this.appConfig.build.version).pipe((0,V.q)(1),(0,L.zg)(sn=>sn?(0,xn.of)(sn):this.releaseHighlightsService.readReleaseHighlightsSkippedStatus(this.appConfig.build.version))):(0,xn.of)(!1)))))),(0,L.zg)(Bt=>!Bt||(0,S.wIc)(this.router.url)||this.guestModeService.isGuestMode?(0,xn.of)(!1):this.idmService.accountStatusChanged.pipe((0,V.q)(1),(0,Ht.U)(()=>(this.logger.info("Opening highlights dialog at startup after an update."),this.releaseHighlightsService.onShowReleaseHighlight(!1,this.appConfig.build.version,"1"),!0)),(0,Ue.K)(hn=>(this.logger.error("Error fetching accountStatusChanged:",hn),(0,xn.of)(!1))))))}return(0,xn.of)(!1)}showInitToastForXbox(){this.osType$.pipe((0,b.R)(this.destroy$),(0,Si.w)(he=>he===f.wi.XBox?this.translateService.get("console.useGameControlsMode"):(0,xn.of)(void 0))).subscribe(he=>{if(he)return this.snackbar.open(he,"",{duration:7e3,horizontalPosition:"left",panelClass:["nv-hig"]})})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete(),this.localeServiceSubscription&&this.localeServiceSubscription.unsubscribe(),this.layoutDirectionUpdateSubscription&&this.layoutDirectionUpdateSubscription.unsubscribe(),this.tracingSubscription&&this.tracingSubscription.unsubscribe(),f.ng.isBrowserPlatform()&&this.browserSupportService.cleanup(),this.openOsrSubscription&&this.openOsrSubscription.unsubscribe(),this.streamerConfigSubscription&&this.streamerConfigSubscription.unsubscribe()}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.Y36(f.ed),i.Y36(S.VKt),i.Y36(S.o15),i.Y36(S.HKp),i.Y36(S.ZZY),i.Y36(S.Drq),i.Y36(f.OL),i.Y36(S.HS8),i.Y36(ht),i.Y36(S.OX4),i.Y36(f.dF),i.Y36(pe),i.Y36(S.hmT),i.Y36(Ae.Q6),i.Y36(S.NS5),i.Y36(S.GMF),i.Y36(S.No2),i.Y36(S.BHV),i.Y36(S.OMY),i.Y36(w.Q3),i.Y36(et.OA),i.Y36(S.dgl),i.Y36(Me.y0),i.Y36(h.TB),i.Y36(wt.sy),i.Y36(S.Q0y),i.Y36(Yt.rw),i.Y36(Ei._c),i.Y36(S.qMk),i.Y36(S.$_t),i.Y36(Xt.HR),i.Y36(Ji.s),i.Y36(S.m$M),i.Y36(S.wU6),i.Y36(O.V),i.Y36(In.o),i.Y36(S.nG5),i.Y36(S.uZ6),i.Y36(S.R2C),i.Y36(f.gN),i.Y36(N.C),i.Y36(C.jr),i.Y36(S.xQn),i.Y36(Tn.q),i.Y36(f.Ob),i.Y36(S.uu8),i.Y36(a.F0),i.Y36(S.FR5),i.Y36(f.Yq),i.Y36(Vt.ux),i.Y36(p.sK),i.Y36(S.gbG),i.Y36(S.rHN),i.Y36(S.zrw),i.Y36(S.JnX),i.Y36(S.ZB5),i.Y36(xe.Ow),i.Y36(f.P),i.Y36(S.YvH),i.Y36(S.ePW))},Fe.\u0275cmp=i.Xpm({type:Fe,selectors:[["gfn-root"]],hostBindings:function(he,je){1&he&&i.NdJ("appinstalled",function(Bt){return je.onInstallingApp(Bt)},!1,i.Jf7)},decls:1,vars:1,consts:[[3,"dir"]],template:function(he,je){1&he&&i._UZ(0,"router-outlet",0),2&he&&i.s9C("dir",je.direction)},directives:[a.lC,Qn.Lv],encapsulation:2}),Fe})();const Bi=Object.assign({bridge:{mocks:[]},logger:{defaultLoggingLevel:f.GJ.Trace},window:{name:f.L6.Gfn},locale:{supportedLang:["bg_BG","cs_CZ","da_DK","de_DE","el_GR","en_GB","en_US","es_ES","es_MX","fi_FI","fr_FR","hr_HR","hu_HU","it_IT","ja_JP","ko_KR","nb_NO","nl_NL","pl_PL","pt_BR","pt_PT","ro_RO","ru_RU","sk_SK","sl_SI","sv_SE","th_TH","tr_TR","uk_UA","zh_CN","zh_TW","ar_SA"]},configFileName:"shared/assets/config/config.json"},{production:!0});var Bn=e(54848),ni=e(56226);let ri=(()=>{class Fe{constructor(he){this.logger=he.getLogger("HttpLoggingService")}intercept(he,je){return je.handle(he).pipe((0,yt.b)(lt=>{},lt=>{this.handleHttpError(lt,he)}))}handleHttpError(he,je){this.logger.info(`Http request method '${je.method}', url '${je.url}' FAILED with response`,he)}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(f.ed))},Fe.\u0275prov=i.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();var ii=e(2335),qi=e(93404),mi=e(83313);const oi={provide:f.m1,useClass:mi.$,multi:!0};var jn=e(48085),vi=e(93937);const _i=ui.Gh.Share.Osc;let Ro=(()=>{class Fe extends f.nM{constructor(he){super(),this.logger=he.getLogger("OscPlugin")}get handlers(){return{module:_i.SetPainting.module,commands:{[_i.SetPainting.method]:this.setPainting.bind(this),[_i.FullscreenState.method]:this.fullscreenState.bind(this)}}}setPainting(){return this.makeResult("true")}fullscreenState(){return this.makeResult(JSON.stringify({fullscreen:!0}))}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(f.ed))},Fe.\u0275prov=i.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();var Ir=e(33392),Vi=e(1558),Hi=e(84239),si=(()=>((si||(si={})).ShowHotkey="showHotkeyMessage",si))(),Xo=e(94377),wo=e(24338),Do=e(52349);const zn=ui.Gh.Share.Shareserver,ko=[{provide:f.m1,useClass:(()=>{class Fe extends f.nM{constructor(he,je,lt,Bt,hn){super(),this.dbCacheService=je,this.browserSupportService=lt,this.hotkeyMonitoringService=Bt,this.projectInterfaceService=hn,this.isDefaultHotkeyMappingInitialized$=new F.xQ,this.logger=he.getLogger("ShareServerPlugin"),this.igoShortcutsDb=this.dbCacheService.getOrCreateCachedGlobalItem(Vi.Vi,Vi.Sk.Shortcuts)}get handlers(){return{module:zn.GetInitData.module,commands:{[zn.GetInitData.method]:this.getInitData.bind(this),[zn.GetHotkeyShortcut.method]:this.getHotkeyShortcut.bind(this),[Hi.e.ResetHotkeysToDefault.method]:this.resetHotkeysToDefault.bind(this),[Hi.e.RegisterHotkeyNotifications.method]:this.registerHotkeyNotifications.bind(this),[Hi.e.GetCaptureProcessInfo.method]:this.getCaptureProcessInfo.bind(this),[Hi.e.RegisterWindowStateChangeNotifications.method]:this.registerWindowStateChangeNotifications.bind(this),[Hi.e.SetHotkeyMonitoring.method]:this.setHotkeyMonitoring.bind(this),[zn.SetHotkeyShortcut.method]:this.setHotkeyShortcut.bind(this),[zn.InitOsInfo.method]:this.initOsInfo.bind(this)}}}initOsInfo(he){return this.hotkeyMonitoringService.initOsInfo(he.payload.osType),this.defaultHotkeyMapping=he.payload.osType===f.wi.MacOS?Vi.u3:Vi.vq,this.isDefaultHotkeyMappingInitialized$.next(!0),this.isDefaultHotkeyMappingInitialized$.complete(),this.logger.info("initialize called with osType",he.payload.osType),this.makeResult("true")}setHotkeyMonitoring(he){return he.payload.enable?(this.logger.info("setHotkeyMonitoring resumeListening"),this.projectInterfaceService.resumeListening()):(this.logger.info("setHotkeyMonitoring pauseListening"),this.projectInterfaceService.pauseListening()),this.makeResult("true")}getCaptureProcessInfo(){return this.makeResult("true")}registerHotkeyNotifications(){return this.makeResult("true")}getInitData(){const he={captureSupported:!1,desktopCaptureSupported:!1,coplayEnabled:!1};return this.logger.info("getInitData response from ShareserverPlugin ",he),this.makeResult(JSON.stringify(he))}setHotkeyShortcut(he){const je={_return_internal:ui.Yk.Share.Shareserver.InternalErrorCodeEnum.GXP_Success_Ok},lt={_return_internal:ui.Yk.Share.Shareserver.InternalErrorCodeEnum.GXP_Error_InvalidArg};if(!he.payload.keys)return this.makeResult(JSON.stringify(lt));{const Bt=he.payload.keys.length;if(he.payload.hotkey===Xo.sW.OpenIGO&&Bt<2)return this.makeResult(JSON.stringify(lt))}return this.igoShortcutsDb.sync_().pipe((0,L.zg)(()=>(this.igoShortcutsDb[he.payload.hotkey]=he.payload.keys,this.hotkeyMonitoringService.updateHotkeyMapping(he.payload.hotkey,he.payload.keys),this.igoShortcutsDb.persist_())),(0,L.zg)(()=>this.makeResult(JSON.stringify(je))))}registerWindowStateChangeNotifications(){const he={windowMsg:si.ShowHotkey};return this.makePersistentResult(this.browserSupportService.fullScreenEventObs$.pipe((0,Ht.U)(je=>{if(je)return JSON.stringify(he)}),(0,yt.b)(()=>this.logger.info("registerWindowStateChange response from ShareserverPlugin ",he))))}getHotkeyShortcut(he){return this.igoShortcutsDb.sync_().pipe((0,Ir.j)(je=>this.isDefaultHotkeyMappingInitialized$),(0,L.zg)(()=>{let je;return je=this.igoShortcutsDb[he.payload.hotkey]?this.igoShortcutsDb[he.payload.hotkey]:this.defaultHotkeyMapping.get(he.payload.hotkey),this.makeResult(JSON.stringify({keys:je||[]}))}))}resetHotkeysToDefault(){return this.hotkeyMonitoringService.resetToDefaultObs$().pipe((0,L.zg)(()=>this.makeResult("true")))}}return Fe.\u0275fac=function(he){return new(he||Fe)(i.LFG(f.ed),i.LFG(f.LA),i.LFG(et.OA),i.LFG(wo.i),i.LFG(Do.m3))},Fe.\u0275prov=i.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})(),multi:!0},{provide:f.m1,useClass:Ro,multi:!0}];var Ii=e(45129),ei=e(17013);e(84538);const er=e(54996);function tr(Fe){return Object.assign({featureId:Fe.gxTarget.experiences&&Fe.gxTarget.experiences.starfleet||S.dvL.featureId},Fe.idm)}function nr(Fe,Nt){const he=Fe.jarvis;return he.sdkClient=Nt.activeConfig.sdkClient,he}function ir(Fe){return Fe.starfleet}function or(Fe){return Fe.gfcFeedbackEvents||ii.a7}function Ti(Fe){return Fe.jsEvents||Me.LP}function rr(Fe){return Fe.exception||ni.Dr}function sr(){return{waitForDialogClose:!0}}function mo(Fe){return Object.assign(Object.assign({appWindowName:f.L6.Gfn,storage:Me.e6.SharedStorage,clientVersion:Fe.build.version,clientVariant:Fe.build.variant},Fe.gxTarget),{openTracingConfig:Fe.tracer})}function ar(Fe){return Object.assign({appVersion:Fe.build.version},Fe.gfwsl)}function Ai(Fe){return Object.assign({},Fe.aem)}function Uo(Fe){var Nt;return{IGOFeatureEnabled:!!(null===(Nt=Fe.featureEnablement)||void 0===Nt?void 0:Nt.igo),branding:"GFN",GFNCefClient:!0,OSDEnabled:!1,NvCameraFeaturesEnabled:"PRODUCTION",GameFilterEnabled:Fe.igo&&Fe.igo.gameFilterEnabled||!1,PhotoModeEnabled:Fe.igo&&Fe.igo.photoModeEnabled||!1,GFNBroadcastEnabled:Fe.igo&&Fe.igo.gfnBroadcastEnabled||!1,DirectBroadcastEnabled:Fe.igo&&Fe.igo.directBroadcastEnabled||!1,ControlUGCEnabled:Fe.igo&&Fe.igo.controlUGCEnabled||!1,Path:S.fFR.StreamerRoot}}function lr(Fe){return()=>{window.addEventListener("beforeinstallprompt",Nt=>{Nt.preventDefault(),Fe.setDeferredPromptEvent(Nt)})}}function Fo(Fe){return{offDeviceLinkConfig:{title:"offDeviceLink.title",primaryButtonText:"offDeviceLink.button"},tvMode:Fe.featureEnablement.tvMode,mobileMode:Fe.featureEnablement.mobileMode,spatialNavigationConfig:Fe.spatialNavigation}}function z(Fe){return Fe.pnsServerConfig||ei.Iv}function ot(){const Fe={systemInfoOverrideConfig:{allowedOSs:[f.wi.WebOS,f.wi.Tizen],override:{}}},Nt=new URLSearchParams(window.location.search);return new Map([["modelName","SystemName"],["osVersion","OSVersion"],["cpuName","CPUName"]]).forEach((je,lt,Bt)=>{const hn=Nt.get(lt);hn&&(Fe.systemInfoOverrideConfig.override[je]=hn)}),Fe}const Tr={enableTelemetry:!1,enableAutoCloseOnLastStep:!1},Ar=[...qi.j,oi,jn.N,...ko];let Lr=(()=>{class Fe{}return Fe.\u0275fac=function(he){return new(he||Fe)},Fe.\u0275mod=i.oAB({type:Fe,bootstrap:[wn]}),Fe.\u0275inj=i.cJS({providers:[{provide:Ei._c,useValue:{filePath:Bi.configFileName,production:Bi.production}},{provide:ii.sy,useFactory:or,deps:[S.VKt]},{provide:S.T6w,useFactory:tr,deps:[S.VKt]},{provide:Bn.tm,useFactory:nr,deps:[S.VKt,In.o]},{provide:k.TR,useFactory:ir,deps:[S.VKt]},Ei.tj,S.OY9,{provide:Me.i8,useFactory:Ti,deps:[S.VKt]},{provide:ni.BU,useFactory:rr,deps:[S.VKt]},{provide:i.qLn,useClass:S.f0},{provide:T.TP,useClass:ri,multi:!0},Mi.Vi,{provide:w.uR,useValue:Tr},{provide:Ae.sY,useFactory:mo,deps:[S.VKt]},{provide:wt.z,useFactory:ar,deps:[S.VKt]},{provide:wt.fS,useFactory:Ai,deps:[S.VKt]},Ar,{provide:vi.gs,useFactory:Uo,deps:[S.VKt]},f.Eo,{provide:i.ip1,useFactory:lr,multi:!0,deps:[S.UJ,f.ed]},{provide:Ii.Xj,useClass:Ii.YJ},{provide:C.iN,useFactory:Fo,deps:[S.VKt]},{provide:qi.LK,useFactory:ot},{provide:Do.mV,useFactory:sr},{provide:ei.DN,useFactory:z,deps:[S.VKt]}],imports:[[Qi,T.JF,m.ez,n.b2,r.o9,ii.sd,Bn.Zl,k.E9,_,l.Q,(0,f.L2)(er),Fi.uW,f.it.configure(Bi),y.PW,S.lUL,En.TC,Ae.$b,Q.EV,Me.do,ni.iX,w._F,Mi.sZ,wt.RC,n.t6,E.GalleryModule,v.I,c.ip,C.hp,ei.cX]]}),Fe})();Bi.production&&(0,i.G48)(),n.q6().bootstrapModule(Lr).catch(Fe=>console.log(Fe))},21532:(He,de,e)=>{"use strict";e.d(de,{LB:()=>B,rH:()=>O,h6:()=>o});var n=e(6484),i=e(12556),D=e(81134),m=e(8117),y=e(90490),T=e(61486),r=e(28416),a=e(53466),s=e(92597),p=e(79902),l=e(33927),t=e(71435),w=e(85816),h=e(98636),u=e(57674),o=(()=>{return(U=o||(o={}))[U.None=0]="None",U[U.UnsupportedOS=1]="UnsupportedOS",U[U.UnsupportedBrowser=2]="UnsupportedBrowser",U[U.PWARequired=3]="PWARequired",U[U.NativeAppOnly=4]="NativeAppOnly",o;var U})(),f=e(2316),c=e(22213),g=e(22573),I=e(38998),G=e(52349),x=e(11635),E=e(58283),P=e(43124);const v_body_text="layout.universalUnsupportedDialogOnLoadText.bodyText",v_body_textPlatform="layout.universalUnsupportedDialogOnLoadText.bodyTextPlatform",v_body_textBrowser="layout.universalUnsupportedDialogOnLoadText.bodyTextBrowser",v_link_unsupportedPlatform="layout.universalUnsupportedDialogText.unsupportedPlatformLinkText",v_link_unsupportedBrowser="layout.universalUnsupportedDialogText.unsupportedBrowserLinkText",v_link_unsupportedBrowserWithNativeApps="layout.universalUnsupportedDialogText.unsupportedBrowserWithNativeAppsLinkText",v_link_unsupportedPlatformOnTV="layout.universalUnsupportedDialogText.unsupportedPlatformLinkTextOnTV",v_link_unsupportedBrowserOnTV="layout.universalUnsupportedDialogText.unsupportedBrowserLinkTextOnTV",v_link_unsupportedBrowserOnIOS="common.setUpOnSafari",v_link_unsupportedBrowserWithNativeAppsOnTV="layout.universalUnsupportedDialogText.unsupportedBrowserWithNativeAppsLinkTextOnTV",v_link_nativeAppOnlyPlatform="layout.universalUnsupportedDialogText.nativeAppOnlyPlatformLinkText",v_link_pwaRequiredGuidance="layout.universalUnsupportedDialogText.pwaRequiredGuidanceLinkText",v_primaryButton={text:"layout.universalUnsupportedDialogOnLoadText.primaryButton"};let O=(()=>{class U{constructor(S,Y,se,fe,$,ae,me,ye,ue,X,j,K,Z){this.appConfig=Y,this.systemInfoService=se,this.dialog=fe,this.genericDialog=$,this.deeplinkHelperService=ae,this.projectInterfaceService=me,this.pwaService=ye,this.redirectService=ue,this.translateService=X,this.telemetryUtilService=j,this.telemetryService=K,this.configuration=Z,this.tvMode=!1,this.openSetupGuidance=()=>{this.genericDialog.closeAll(),this.dialog.open(i.LB$,{autoFocus:!0,hasBackdrop:!0,panelClass:"dialogPaddingRemove"})},this.logger=S.getLogger("gfn/browser-universal-service"),this.tvMode=!!Y.featureEnablement.tvMode,this.unsupportedBrowsersConfig$=this.fetchClientConfiguration().pipe((0,a.q)(1),(0,s.d)(1)),this._unsupportedBrowserState$=this.unsupportedBrowsersConfig$.pipe((0,p.w)(L=>this.getUnsupportedBrowserState$(L)),(0,s.d)(1))}isUnsupported(S){return!(S.supportedBrowser&&S.supportedOS&&(!S.pwaRequired||this.pwaService.isInPWAMode()))}get unsupportedBrowserState$(){return this._unsupportedBrowserState$}get shouldDisplayPWAGuidance$(){return this.unsupportedBrowsersConfig$.pipe((0,a.q)(1),(0,p.w)(S=>S.pwaGuidance?this._unsupportedBrowserState$.pipe((0,l.U)(Y=>Y===o.PWARequired)):(0,D.of)(!1)))}initialize(){this.unsupportedBrowsersConfig$.pipe((0,p.w)(S=>this.isUnsupported(S)&&!this.deeplinkHelperService.isDeeplinkScenario()?this.openUnsupportedBrowserDialogOnLoad$(S):m.E),(0,a.q)(1),(0,t.x)(()=>{this.projectInterfaceService.closeUnsupportedDialog()})).subscribe(()=>this.logger.info("Unsupported browser dialog is not displayed or dismissed by the user."),S=>{this.logger.error("Error displaying unsupported browser dialog",S)})}getUnsupportedBrowserState$(S){return S.nativeAppOnly?(0,D.of)(o.NativeAppOnly):S.supportedOS?S.supportedBrowser?S.pwaRequired?this.pwaService.onPWAModeChange.pipe((0,l.U)(Y=>Y?o.None:o.PWARequired)):(0,D.of)(o.None):(0,D.of)(o.UnsupportedBrowser):(0,D.of)(o.UnsupportedOS)}getRedirectKey(S){switch(S){case o.UnsupportedOS:return i.hEi.GfnPcUnsupportedDevice;case o.UnsupportedBrowser:case o.PWARequired:case o.NativeAppOnly:return i.hEi.GfnPcUnsupportedBrowser;default:throw new Error("should not happen!")}}getBodyText(S){switch(S){case o.UnsupportedOS:return v_body_textPlatform;case o.UnsupportedBrowser:case o.PWARequired:case o.NativeAppOnly:return v_body_textBrowser;default:throw new Error("should not happen!")}}getDialogLink$(S,Y){return this.unsupportedBrowsersConfig$.pipe((0,a.q)(1),(0,p.w)(se=>this._getDialogLink$(S,se,Y)))}_getDialogLink$(S,Y,se){const fe=this.getRedirectKey(S),$=(null==se?void 0:se.anchorLink)||!this.tvMode?this.getLinkText(S,Y):this.getTVModeLinkText(S,Y),ae=S===o.UnsupportedBrowser&&(null==Y?void 0:Y.pwaGuidance);return this.redirectService.getRedirectUrl(fe).pipe((0,l.U)(me=>({url:me,text:$,shortUrl:u.hD[fe],routerLink:this.getRouterLink(S,Y),linkClickedCallback:ae?this.openSetupGuidance.bind(this):void 0})))}getRouterLink(S,Y){if(S===o.PWARequired&&(null==Y?void 0:Y.pwaGuidance))return{commands:i.fFR.PwaWall,skipLocationChange:!1}}getTranslatedBodyText$(){return this.unsupportedBrowserState$.pipe((0,p.w)(Y=>{const se=this.translateService.get(v_body_text),fe=this.translateService.get(this.getBodyText(Y));return(0,y.$R)(se,fe).pipe((0,a.q)(1),(0,l.U)(([$,ae])=>`${$}<br><br>${ae}`))}))}getLinkText(S,Y){switch(S){case o.NativeAppOnly:return v_link_nativeAppOnlyPlatform;case o.UnsupportedOS:return v_link_unsupportedPlatform;case o.UnsupportedBrowser:case o.PWARequired:return(null==Y?void 0:Y.pwaGuidance)?S===o.UnsupportedBrowser?v_link_unsupportedBrowserOnIOS:v_link_pwaRequiredGuidance:(null==Y?void 0:Y.nativeClientSupported)?v_link_unsupportedBrowserWithNativeApps:v_link_unsupportedBrowser;default:throw new Error("should not happen!")}}getTVModeLinkText(S,Y){if(!this.tvMode)throw new Error("Not in TV mode!");switch(S){case o.NativeAppOnly:return v_link_unsupportedBrowserWithNativeAppsOnTV;case o.UnsupportedOS:return v_link_unsupportedPlatformOnTV;case o.UnsupportedBrowser:case o.PWARequired:return(null==Y?void 0:Y.nativeClientSupported)?v_link_unsupportedBrowserWithNativeAppsOnTV:v_link_unsupportedBrowserOnTV;case o.None:throw new Error("should not happen!")}}openUnsupportedBrowserDialogOnLoad$(S){const Y=this.unsupportedBrowserState$.pipe((0,p.w)(se=>this._getDialogLink$(se,S)));return(0,y.$R)(this.telemetryService.getCommonDataObservable(),this.telemetryService.getDefaultClientConsentObserable()).pipe((0,a.q)(1),(0,w.zg)(se=>(0,T.aj)([this.getTranslatedBodyText$(),Y]).pipe((0,a.q)(1),(0,p.w)(([fe,$])=>{const ae=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:"layout.universalUnsupportedDialogOnLoadText.headerText"},bodyText:{text:fe,translated:!0},link:$,primaryButton:Object.assign({},v_primaryButton),autoFocusOnPrimaryButton:!1}},{preferThreeQuarterSheet:!0});this.telemetryUtilService.sendPopUpDialogShownEvent(i.ItH.Unsupported_Browser_Or_Platform_Load);const me=ae.primaryButtonClick.pipe((0,h.b)(ye=>{this.telemetryUtilService.sendPopUpDialogClosedEvent(i.ItH.Unsupported_Browser_Or_Platform_Load,i.XzU.Dialog_Closed),ae.close()}));return(0,r.S3)(me,ae.afterClosed())}))))}isSupportedBrowser(S,Y){if(!Y)return!1;let se=0;return Y.browserVersion&&S.BrowserVersion&&(se=Y.browserVersion.localeCompare(S.BrowserVersion,void 0,{numeric:!0,sensitivity:"base"})),se<=0&&Y.supportedPlatforms.includes(S.OSName)}fetchClientConfiguration(){var S;return n.ng.isCefPlatform()||(null===(S=this.configuration.featureEnablement)||void 0===S?void 0:S.browserClientUniversalEnablement)?(0,D.of)({supportedBrowser:!0,supportedOS:!0,nativeClientSupported:!0,pwaRequired:!1,nativeAppOnly:!1,pwaGuidance:!1}):this.systemInfoService.getStaticSystemInfo().pipe((0,l.U)(Y=>{const se=this.appConfig.supportedBrowsersAndPlatforms,fe=null==se?void 0:se.values.find($=>(null==$?void 0:$.browser)===Y.BrowserName);return this.logger.info("System Info from Config.json",JSON.stringify(fe)),this.logger.info("Current System Info",JSON.stringify(Y)),{supportedBrowser:this.isSupportedBrowser(Y,fe),supportedOS:se.allSupportedPlatforms.includes(Y.OSName),nativeClientSupported:se.nativeClientSupportedPlatforms.includes(Y.OSName),pwaRequired:se.pwaRequiredPlatforms.includes(Y.OSName),nativeAppOnly:se.nativeAppOnlyPlatforms.includes(Y.OSName),pwaGuidance:se.pwaGuideSupportedPlatforms.includes(Y.OSName)}}))}}return U.\u0275fac=function(S){return new(S||U)(f.LFG(n.ed),f.LFG(i.VKt),f.LFG(n.Ob),f.LFG(c.uw),f.LFG(g.TX),f.LFG(I.g),f.LFG(G.m3),f.LFG(x.nG),f.LFG(u.VH),f.LFG(E.sK),f.LFG(i.wU6),f.LFG(P.y0),f.LFG(i.VKt))},U.\u0275prov=f.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();var C=e(79441),_=e(34361),F=e(22663),V=e(30582),b=e(70781);let B=(()=>{class U{constructor(S,Y){this.dialogRef=Y,this.destroy$=new C.xQ,this.dismissMessageDelay=4e3,this.gfnLink=location.hostname,this.logger=S.getLogger("unsupported-browser-help.component")}onClose(){this.dialogRef.close()}onCopy(){(0,_.D)(navigator.clipboard.writeText(this.gfnLink)).pipe((0,F.R)(this.destroy$)).subscribe(S=>{this.successMessageVisible=!0,setTimeout(()=>{this.successMessageVisible=!1},this.dismissMessageDelay)},S=>{this.logger.error(`${this.gfnLink} is copied failed, error: ${S}`)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return U.\u0275fac=function(S){return new(S||U)(f.Y36(n.ed),f.Y36(c.so))},U.\u0275cmp=f.Xpm({type:U,selectors:[["gfn-unsupported-browser-pwa-setup"]],decls:30,vars:24,consts:[["fxFlex","","fxLayout","column",1,"main-container"],["fxLayout","column",1,"content-container"],["fxLayout","column","fxLayoutAlign","start start"],[1,"font-header6","color-white","prompt-header"],[1,"font-body2"],[1,"link-container","font-body2"],["fxLayoutAlign","start center",1,"gfn-link"],["mat-button","","fxLayout","row","fxLayoutAlign","end center",1,"color-white",3,"click"],[1,"success-message","font-body2"],["fxLayout","row","fxLayoutAlign","end end",1,"button-container"],["mat-button","",3,"click"]],template:function(S,Y){1&S&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"span",3),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.TgZ(6,"span",4),f._uU(7),f.ALo(8,"translate"),f.qZA(),f.TgZ(9,"span",4),f._uU(10),f.ALo(11,"translate"),f.qZA(),f.TgZ(12,"span",4),f._uU(13),f.ALo(14,"translate"),f.qZA(),f.qZA(),f.TgZ(15,"div",5),f.TgZ(16,"span",6),f._uU(17),f.qZA(),f.TgZ(18,"button",7),f.NdJ("click",function(){return Y.onCopy()}),f.TgZ(19,"span"),f._uU(20),f.ALo(21,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(22,"span",8),f._uU(23),f.ALo(24,"translate"),f.qZA(),f.qZA(),f.TgZ(25,"div",9),f.TgZ(26,"button",10),f.NdJ("click",function(){return Y.onClose()}),f.TgZ(27,"span"),f._uU(28),f.ALo(29,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&S&&(f.xp6(4),f.Oqu(f.lcZ(5,10,"iosUnsupportedBrowserHelpDialog.title")),f.xp6(3),f.Oqu(f.lcZ(8,12,"iosUnsupportedBrowserHelpDialog.setUpStep1")),f.xp6(3),f.Oqu(f.lcZ(11,14,"iosUnsupportedBrowserHelpDialog.setUpStep2")),f.xp6(3),f.Oqu(f.lcZ(14,16,"iosUnsupportedBrowserHelpDialog.setUpStep3")),f.xp6(4),f.Oqu(Y.gfnLink),f.xp6(3),f.Oqu(f.lcZ(21,18,"iosPWA.copy")),f.xp6(2),f.ekj("visible",Y.successMessageVisible),f.xp6(1),f.Oqu(f.lcZ(24,20,"iosPWA.linkCopied")),f.xp6(5),f.Oqu(f.lcZ(29,22,"common.close")))},directives:[V.yH,V.xw,V.Wh,b.lW],pipes:[E.X$],styles:['@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.main-container[_ngcontent-%COMP%]{width:560px;height:fit-content}.main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{margin:20px 24px 8px}.main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .prompt-header[_ngcontent-%COMP%]{margin-bottom:12px}.main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;margin:16px 0 8px;border:1px solid rgba(255,255,255,.2)}.isLtr[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]{padding-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]{--dummy1: 0;padding-left:8px}.isRtl[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]{padding-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]{--dummy1: 0;padding-right:8px}.main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{visibility:hidden}.isLtr[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{margin:0 0 8px 8px}html[dir=ltr][_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{--dummy: 0;margin:0 0 8px 8px}.isRtl[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{margin:0 8px 8px 0}html[dir=rtl][_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{--dummy: 0;margin:0 8px 8px 0}.main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message.visible[_ngcontent-%COMP%]{visibility:visible}.main-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{margin:0 8px 8px}']}),U})()},96121:(He,de,e)=>{"use strict";e.d(de,{O:()=>t});var n=e(79441),i=e(80226),D=e(53466),m=e(33927),y=e(85816),T=e(6484),r=e(98513),a=e(91991),s=e(2316),p=e(60086),l=e(66883);let t=(()=>{class w{constructor(u,o,f,c){this.idmService=o,this.dbCacheService=f,this.breakpointObserver=c,this.marqueeControl=r.E.Play,this.enableGridResizing=new n.xQ,this.refreshAppsOnEvidencePanelClose=new n.xQ,this.filterPanelToggled=new i.t(1),this.logger=u.getLogger("gfn/shared/browseUx"),this._selectedParentId=""}get filterPanelToggled$(){return this.filterPanelToggled.asObservable()}get selectedParentId(){return this._selectedParentId}get enableGridResizing$(){return this.enableGridResizing}get refreshAppsOnEvidencePanelClose$(){return this.refreshAppsOnEvidencePanelClose}get browseStore(){return this.idmService.accountStatusChanged.pipe((0,D.q)(1),(0,m.U)(u=>(this.browseDbStore=this.dbCacheService.getOrCreateCachedGlobalItem(a.SB.DbStoreName,u.userId||T.kQ),this.logger.info("DB store initialize",a.SB.DbStoreName),this.browseDbStore)))}get fullPagedGameDetailsEnabled$(){return this.breakpointObserver.observe(T.wO.IPhone).pipe((0,m.U)(u=>u.matches))}get gridViewEvidencePanelGameId(){return this._gridViewEvidencePanelGameId}initialize(){this.setMarqueeControlAction(r.E.Play)}getUserPreference(u){return this.browseStore.pipe((0,y.zg)(o=>o.sync_()),(0,m.U)(o=>o[u]))}setGridViewEvidencePanelGameId(u){this._gridViewEvidencePanelGameId=u}setUserPreference(u,o){return this.browseDbStore.sync_().pipe((0,y.zg)(()=>(this.browseDbStore[u]=o,this.browseDbStore.persist_())))}setMarqueeControlAction(u){this.marqueeControl=u}getMarqueeControlAction(){return this.marqueeControl}setSelectedParentId(u){this._selectedParentId=u}emitFilterPanelToggled(u,o){this.filterPanelToggled.next({opened:u,mode:o})}setL1PageTelemetryName(u){this.l1PageTelemetryName=u}getL1PageTelemetryName(){return this.l1PageTelemetryName}}return w.\u0275fac=function(u){return new(u||w)(s.LFG(T.ed),s.LFG(p.No),s.LFG(T.LA),s.LFG(l.Yg))},w.\u0275prov=s.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},48085:(He,de,e)=>{"use strict";e.d(de,{N:()=>h,u:()=>f});var n=e(6484),i=e(79441),D=e(19120),m=e(2984),y=e(20180);const T={result:1},a=new Map([[0,y.Rn.NCT_R_SUCCESS],[1401,y.Rn.NCT_R_AUTH_FAILED],[1509,y.Rn.NCT_R_CAPACITY_FULL]]);var s=e(61607),p=e(2316);let l=(()=>{class c{constructor(I){this.loggingService=I}logBasedOnLevel(I){switch(I.logLevel){case"INFO":case"DEBUG":this.logger.info(I.logstr,I.timeStamp);break;case"ERROR":this.logger.error(I.logstr,I.timeStamp);break;case"WARN":this.logger.warn(I.logstr,I.timeStamp)}}sendNetworkTestLog(I){this.logger=this.loggingService.getLogger(I.logtag),this.logBasedOnLevel(I)}}return c.\u0275fac=function(I){return new(I||c)(p.LFG(n.ed))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const t=m.Gh.Gfn.Networktest,h={provide:n.m1,useClass:(()=>{class c extends n.nM{constructor(I,G,x){super(),this.zone=I,this.networkTestLoggingService=x,this.logger=G.getLogger("network-test-plugin"),this.networkTestEvents=new i.xQ,this.networkTestAnalyticsEvent=new i.xQ}get handlers(){return{module:t.Start.module,commands:{[t.Start.method]:this.startNetworkTest.bind(this),[t.ConfigureNetworkTestSettings.method]:this.ConfigureNetworkTestSettings.bind(this),[t.RegisterCallback.method]:this.registerCallback.bind(this)}}}initializeNetworkTestApp(){if(!this.ntApp){this.logger.info("Initializing Webrtc Network Test"),this.ntApp=new D.NetworkTestApp;const I=(G,x)=>{this.ntApp.addListener(G,(...E)=>{this.zone.run(()=>{x.bind(this)(E[0])})})};I("NetworkTestCompleted",this.onNetworkTestCompleted),I("NetworkTestAnalytics",this.onNetworkTestAnalyticEvent),I("Log",this.onNetworkTestLogEvent)}}getNetworkTestAuthType(I){let G=1;switch(I){case s.q.NVB_AUTH_JWT_GFN:G=1;break;case s.q.NVB_AUTH_JWT:G=2}return G}startNetworkTest(I){return this.zone.runOutsideAngular(()=>{this.displayResolution=I.payload.displayResolution,this.initializeNetworkTestApp();const G={platformId:"gfn_browser_client",serverAddress:I.payload.address,networkTestProfile:[I.payload.displayResolution],authInfo:{type:this.getNetworkTestAuthType(I.payload.authType),token:I.payload.authToken}};return this.logger.info("Network test params for ntwebrtc: ",G.platformId,G.serverAddress,G.networkTestProfile),this.ntApp.startNetworkTest(G)?this.makeResult("true"):this.makeError(500,"Network test application cannot be initialized")}),this.makePersistentResult(this.networkTestEvents.asObservable())}onNetworkTestCompleted(I){if(this.logger.info("Network test completed, result: ",I),I.error){const G={result:{result:a.get(I.error.code)||I.error.code},testResult:{networkSessionId:I.sessionId,resultCode:I.error.code,errorDetails:I.error.errorDetail,zone:I.zone}};this.networkTestEvents.next(JSON.stringify(G))}else{const G={bandwidthLimit:I.testResult.networkTestThreshold.bandwidthLimit,bandwidthRecommended:I.testResult.networkTestThreshold.bandwidthRecommended,packetLossLimit:I.testResult.networkTestThreshold.packetLossLimit,packetLossRecommended:I.testResult.networkTestThreshold.packetLossRecommended,latencyLimit:I.testResult.networkTestThreshold.latencyLimit,latencyRecommended:I.testResult.networkTestThreshold.latencyRecommended,profile:{height:this.displayResolution.height,width:this.displayResolution.width,frameRate:this.displayResolution.frameRate}},x=Object.assign(Object.assign(Object.assign({},I.testResult),I.testResult.networkTestThreshold),{networkSessionId:I.sessionId,zone:I.zone,thresholds:[G],maxPacketSize:0,maxTestBandwidthMbps:0});delete x.networkTestThreshold,this.networkTestEvents.next(JSON.stringify({result:T,testResult:x}))}}onNetworkTestLogEvent(I){this.networkTestLoggingService.sendNetworkTestLog(I)}ConfigureNetworkTestSettings(I){return this.zone.runOutsideAngular(()=>{D.ConfigureNetworkTestSettings(I.payload)}),this.makeResult("true")}onNetworkTestAnalyticEvent(I){this.logger.event("callback onAnalyticsEvent called from ntrtc with eventData, ",I),this.networkTestAnalyticsEvent.next(JSON.stringify(I))}registerCallback(I){return this.makePersistentResult(this.networkTestAnalyticsEvent.asObservable())}}return c.\u0275fac=function(I){return new(I||c)(p.LFG(p.R0b),p.LFG(n.ed),p.LFG(l))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),multi:!0};var u=e(9021),o=e(43124);let f=(()=>{class c{constructor(I,G,x){this.bridgeService=G,this.telemetryService=x,this.logger=I.getLogger("networkTestAnalyticsEventHandlerService")}initiateAnalyticsEvents(){this.bridgeService.executeCommand(m.Gh.Gfn.Networktest.RegisterCallback).subscribe(I=>{this.logger.event("Network test event",I),this.parseAndSendData(I)})}parseAndSendData(I){const G=this.getEventInformation(I);G&&G.name?this.telemetryService.push(G,null,{immediateRequest:!0}):this.logger.info("unable to parse Network Test Analytics event",I)}getEventInformation(I){return I.name===u.GMl.NetworkTest_Http_Event.name?this.prepareNetworkTestHttpEventData(I):I.name===u.GMl.NetworkTest_Exception_Event.name?this.prepareNetworkTestExceptionEventData(I):void this.logger.info("analytics event from Network Test lib not tracked",I.name)}prepareNetworkTestHttpEventData(I){return new u.ORi(Object.assign({url:I.url||"",verb:I.verb||"",statusCode:I.statusCode||"",requestStatusCode:I.requestStatusCode||"",networkSessionId:I.networkSessionId||"",requestId:I.requestId||"",serverId:I.serverId||"",callDuration:I.callDuration||0}))}prepareNetworkTestExceptionEventData(I){return new u.P3M(Object.assign({category:I.category||"",message:I.message||"",networkSessionId:I.networkSessionId||"",stacktrace:I.stacktrace||"",filename:I.filename||"",lineno:I.lineno||0,colno:I.colno||0,handled:I.handled,zoneAddress:I.zoneAddress||""}))}}return c.\u0275fac=function(I){return new(I||c)(p.LFG(n.ed),p.LFG(n.dF),p.LFG(o.y0))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},9637:(He,de,e)=>{"use strict";e.d(de,{J$:()=>i,hc:()=>D,ce:()=>m,lW:()=>y});var n=e(6484);const i=T=>{switch(null==T?void 0:T.toLowerCase()){case"windows":return"WINDOWS";case"mac":case"macos":return"MACOS";case"linux":return"LINUX";case"chrome os":case"chromeos":return"CHROMEOS";case"ios":return"IOS";case"ipados":return"IPADOS";case"webos":return"WEBOS";case"tizen":return"TIZEN";case"xbox":return"XBOX";case"android":return"ANDROID";case"steamos":return"STEAMOS";default:return"UNKNOWN"}},D=T=>{switch(T){case n.z7.Desktop:return"DESKTOP";case n.z7.Laptop:return"LAPTOP";case n.z7.TV:return"TV";case n.z7.Phone:return"PHONE";case n.z7.Tablet:return"TABLET";case n.z7.Console:return"CONSOLE";default:return"DESKTOP"}},m=T=>{switch(T){case"IOS":return"PHONE";case"IPADOS":return"TABLET";case"TIZEN":case"WEBOS":return"TV";case"XBOX":return"CONSOLE";default:return"DESKTOP"}},y=T=>{switch(T){case n.Aq.CHROME:return"CHROME";case n.Aq.SAFARI:return"SAFARI";case n.Aq.YANDEX:return"YANDEX";case n.Aq.EDGE:return"EDGE";case n.Aq.EDGE_LEGACY:return"EDGE_LEGACY";case n.Aq.FIREFOX:return"FIREFOX";case n.Aq.SAMSUNG:return"SAMSUNG";case n.Aq.CHROMIUM:return"CHROMIUM";case n.Aq.OPERA:return"OPERA";case n.Aq.BRAVE:return"BRAVE";case n.Aq.SILK:return"SILK";case n.Aq.Undefined:default:return"UNKNOWN"}}},26301:(He,de,e)=>{"use strict";e.d(de,{x:()=>r});var n=e(6484),i=e(130),D=e(33927),m=e(92597),y=e(12556),T=e(2316);let r=(()=>{class a{constructor(p,l){this.systemInfoService=p,this.appConfig=l}initialize(){this.commonHeaders$=(0,i.s)(n.ng.isBrowserPlatform,this.systemInfoService.getSystemInfo(),this.systemInfoService.getOsInformation()).pipe((0,D.U)(p=>{var l;const t={};if(n.ng.isBrowserPlatform())t["NV-Device-Type"]=(0,y.hcy)(p.DeviceType),t["NV-Device-OS"]=(0,y.J$C)(p.OSName),(null===(l=p)||void 0===l?void 0:l.SystemName)&&(t["NV-Device-Model"]=p.SystemName.toUpperCase()),t["NV-Client-Type"]="BROWSER",t["NV-Client-Streamer"]="WEBRTC",t["NV-Browser-Type"]=(0,y.lWt)(p.BrowserName);else{const w=(0,y.J$C)(p.Platform);t["NV-Device-Type"]=(0,y.cep)(w),t["NV-Device-OS"]=w,t["NV-Client-Type"]="NATIVE",t["NV-Client-Streamer"]="NVIDIA-CLASSIC"}return t["NV-Client-Version"]=this.appConfig.build.version,t}),(0,m.d)(1))}getCommonHeaders(){return this.commonHeaders$||this.initialize(),this.commonHeaders$}}return a.\u0275fac=function(p){return new(p||a)(T.LFG(n.Ob),T.LFG(y.VKt))},a.\u0275prov=T.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},32854:(He,de,e)=>{"use strict";e.d(de,{x5:()=>n.x,lW:()=>i.lW,hc:()=>i.hc,ce:()=>i.ce,J$:()=>i.J$});var n=e(26301),i=e(9637)},23361:(He,de,e)=>{"use strict";e.d(de,{$l:()=>w,_P:()=>T});var n=e(43365),i=e(81134),D=e(33927),m=e(18293),y=e(90722),T=(()=>{return(h=T||(T={})).ENABLE_RESERVED_SKU_FEATURES="enableReservedSKUFeatures",h.RESERVED_SKU_IBETA="reservedSKUiBeta",h.RESOLUTION_UPSCALE_DEFAULT_OPTION_ID="resolutionUpScaleDefaultOptionId",h.WEBRTC_NETWORK_TEST="isWebRtcNetworkTestEnabled",h.CLIPBOARD_PASTE_FEATURE_CONFIG="clipboardPasteFeatureConfig",h.BACKGROUND_WEBRTC_NETWORK_TEST="webRtcNetworkTestV2",h.PATH_TO_PURCHASE="pathToPurchase",h.ENABLE_REMOTE_CONFIG_ON_GXT="enableRemoteConfigOnGXT",T;var h})();const r=new Map([[T.ENABLE_RESERVED_SKU_FEATURES,{defaultValue:!1,subUseCaseName:n.Qu.GxTargetGetReservedSKUEnabled,mapperFn:h=>h.value[T.ENABLE_RESERVED_SKU_FEATURES]}],[T.RESERVED_SKU_IBETA,{defaultValue:!1,subUseCaseName:n.Qu.GxTargetGetReservedSKUIBetaFlag,mapperFn:h=>h.value[T.RESERVED_SKU_IBETA]}],[T.RESOLUTION_UPSCALE_DEFAULT_OPTION_ID,{defaultValue:y.Jr.STANDARD.id,subUseCaseName:n.Qu.Other,mapperFn:h=>h.value[T.RESOLUTION_UPSCALE_DEFAULT_OPTION_ID]}],[T.WEBRTC_NETWORK_TEST,{defaultValue:{value:{enabled:!1,supportedZonesList:[]}},subUseCaseName:n.Qu.Other,mapperFn:h=>h}],[T.CLIPBOARD_PASTE_FEATURE_CONFIG,{defaultValue:{isEnabled:!1,maxPasteBuffer:4096},subUseCaseName:n.Qu.GxTargetGetClipboardPasteConfig,mapperFn:h=>h.value}],[T.PATH_TO_PURCHASE,{defaultValue:!1,subUseCaseName:n.Qu.GxTargetGetPathToPurchaseConfig,mapperFn:h=>h.value.isEnabled}],[T.BACKGROUND_WEBRTC_NETWORK_TEST,{defaultValue:{value:{enabled:!1,supportedZonesList:[],showUI:!1}},subUseCaseName:n.Qu.Other,mapperFn:h=>h}],[T.ENABLE_REMOTE_CONFIG_ON_GXT,{defaultValue:!1,subUseCaseName:n.Qu.GxTargetGetRemoteConfigOnGXTEnabled,mapperFn:h=>h.value[T.ENABLE_REMOTE_CONFIG_ON_GXT]}]]),a=new Map([[T.WEBRTC_NETWORK_TEST,"webrtcNetworkTest"],[T.BACKGROUND_WEBRTC_NETWORK_TEST,"webRtcNetworkTestV2"]]);var s=e(2316),p=e(6484),l=e(73341),t=e(12556);let w=(()=>{class h{constructor(o,f,c,g){this.loggingService=o,this.experienceControlService=f,this.configuration=c,this.idmService=g,this.fetchedFeatureToggleValueMap=new Map,this.logger=this.loggingService.getLogger("CloudVariableHelperService"),this.idmService.accountStatusChanged.subscribe(()=>{var I;return null===(I=this.fetchedFeatureToggleValueMap)||void 0===I?void 0:I.clear()})}getFeatureToggle(o,f={}){return f.configCheckEnabled&&!this.configuration.featureEnablement[f.useDifferentConfigAttributeName?a.get(o):o]?(this.logger.info("Feature disabled in config, returning default value"),(0,i.of)(r.get(o).defaultValue)):this.fetchedFeatureToggleValueMap.has(o)?(0,i.of)(this.fetchedFeatureToggleValueMap.get(o)):this.fetchFeatureToggle(o,f)}fetchFeatureToggle(o,f={}){var c,g;return this.experienceControlService.getCloudVariable(this.configuration.gxTarget.experiences[o],{variant:null!==(c=f.buildVariant)&&void 0!==c?c:null},{useCache:null===(g=f.useCache)||void 0===g||g,useNetworkTimeoutForCacheFallback:!0},n.Z4.GxTargetGetCloudVariable,r.get(o).subUseCaseName).pipe((0,D.U)(I=>{const G=r.get(o).mapperFn(I);return this.fetchedFeatureToggleValueMap.set(o,G),G}),(0,m.K)(I=>{this.logger.error(`Error while fetching feature toggle ${o}:`,I);const G=r.get(o).defaultValue;return(0,i.of)(G)}))}}return h.\u0275fac=function(o){return new(o||h)(s.LFG(p.ed),s.LFG(n.Q6),s.LFG(l.VK),s.LFG(t.No2))},h.\u0275prov=s.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},10343:(He,de,e)=>{"use strict";e.d(de,{d:()=>r});var n=e(202),i=e(2316),D=e(30582),m=e(80181);let y=(()=>{class a{constructor(p){this.viewRef=p,this.diameter=16}}return a.\u0275fac=function(p){return new(p||a)(i.Y36(i.s_b))},a.\u0275cmp=i.Xpm({type:a,selectors:[["gfn-progress-spinner"]],decls:2,vars:1,consts:[["fxLayoutAlign","center center",1,"common-overlay"],["mode","indeterminate",1,"mat-accent",3,"diameter"]],template:function(p,l){1&p&&(i.TgZ(0,"div",0),i._UZ(1,"mat-progress-spinner",1),i.qZA()),2&p&&(i.xp6(1),i.Q6J("diameter",l.diameter))},directives:[D.Wh,m.Ou],styles:[".common-overlay[_ngcontent-%COMP%]{position:absolute;right:0;left:0;display:flex;top:0;bottom:0;z-index:1;background:rgba(0,0,0,.75)}.common-overlay.light-background[_ngcontent-%COMP%]{background-color:#00000080}.common-overlay.no-background[_ngcontent-%COMP%]{background-color:transparent}"]}),a})();var T=e(6484);let r=(()=>{class a{constructor(p,l,t,w){this.viewcontainerRef=p,this.cfResolver=l,this.renderer=t,this.spinnerComponentNativeElement=null,this.logger=w.getLogger("gfnProgressSpinnerDirective")}ngOnChanges(p){p&&p.isVisible&&p.isVisible.currentValue!==p.isVisible.previousValue&&(p.isVisible.currentValue?this.createSpinner():this.destroySpinner())}ngOnDestroy(){this.destroySpinner()}createSpinner(){const p=this.cfResolver.resolveComponentFactory(y);this.spinnerComponentRef=this.viewcontainerRef.createComponent(p),(0,n.isNil)(this.diameter)||(this.spinnerComponentRef.instance.diameter=this.diameter),this.spinnerComponentNativeElement=this.spinnerComponentRef.injector.get(y).viewRef.element.nativeElement,this.renderer.appendChild(this.viewcontainerRef.element.nativeElement,this.spinnerComponentNativeElement)}destroySpinner(){this.spinnerComponentNativeElement&&this.renderer.removeChild(this.viewcontainerRef.element.nativeElement,this.spinnerComponentNativeElement),this.spinnerComponentRef&&this.spinnerComponentRef.destroy(),this.spinnerComponentNativeElement=null}}return a.\u0275fac=function(p){return new(p||a)(i.Y36(i.s_b),i.Y36(i._Vd),i.Y36(i.Qsj),i.Y36(T.ed))},a.\u0275dir=i.lG2({type:a,selectors:[["","gfnProgressSpinner",""]],inputs:{isVisible:"isVisible",diameter:"diameter"},features:[i.TTD]}),a})()},78778:(He,de,e)=>{"use strict";e.d(de,{V:()=>n});class n{}},73341:(He,de,e)=>{"use strict";e.d(de,{VK:()=>n.V,OY:()=>u});var n=e(78778),i=e(2316),D=e(98636),m=e(85816),y=e(18293),T=e(71906),r=e(57390),a=e(6484),s=e(81134),p=e(62558),l=e(40648);const u=[{provide:i.ip1,useFactory:function(o,f,c,g,I){return()=>f.readBlock("overrides").pipe((0,D.b)(G=>{o.setOverrides(G)}),(0,m.zg)(()=>c.getRemoteConfigOnLaunch()),(0,D.b)(()=>g.initialize()),(0,y.K)(G=>(I.getLogger("shared/configuration.provider").error("Failed to fetch overrides",G),(0,s.of)(!0)))).toPromise()},multi:!0,deps:[T.XL,r.OA,p.s,l.E,a.ed]},(0,T.W4)(n.V)]},7883:(He,de,e)=>{"use strict";e.d(de,{qB:()=>n,S5:()=>D,dC:()=>y,Y6:()=>T,yx:()=>r,xl:()=>a,V_:()=>s,e_:()=>p,uV:()=>l,N0:()=>t});const n={NETWORK_TROUBLESHOOT:"gfn_pc_net_help",GFN_PC_INFO:"gfn_pc_info",GFN_PC_HELP:"gfn_pc_help",TERMS_CONDITIONS:"gfn_pc_terms_of_use",ACCOUNT_TERMS:"nvidia_account_tos",OSS_LICENSES:"gfn_pc_oss",PRIVACY_POLICY:"privacy_policy",ACCOUNT_MANAGEMENT:"nvidia_account_management",ACCOUNT_MANAGEMENT_SSO:"nvidia_account_management_default",GFN_MEMBERSHIP_MANAGEMENT:"nvidia_account_management_gfn",SYS_REQUIREMENTS:"gfn_pc_sys_req",UDP_BUFFER_TIPS:"gfn_pc_net_help_udp_socket",GFN_PC_UNSUPPORTED_REGION:"gfn_pc_unsupported_region",GFN_PC_NET_HELP_FIREWALL:"gfn_pc_net_help_firewall",GFN_PC_NET_HELP_WIFI:"gfn_pc_net_help_wifi",GFN_PC_HELP_UPDATE:"gfn_pc_help_update",GFN_PC_HELP_MISSING_DECODER:"gfn_pc_help_missing_decoder",GFN_PC_MEMBERSHIP_JOIN:"gfn_pc_membership",GFN_SERVER_STATUS:"gfn_service_status",GFN_PC_REDEEM_ACTIVATION_CODE:"gfn_pc_redeem_activation_code",GFN_PC_ACCOUNT_NOT_ACTIVATED:"gfn_pc_account_not_activated",GFN_PC_WAITLIST:"gfn_pc_waitlist",DISCORD_TERMS:"discord_terms_of_service",GFN_PC_MEMBERSHIP_UPGRADE:"gfn_pc_membership_upgrade",COOKIE_POLICY:"nvidia_cookie_policy",GFN_PC_KEYBOARD_TROUBLESHOOTING:"gfn_pc_keyboard_troubleshooting",STEAM_ACCOUNT_SETTINGS:"steam_account_settings",GFN_PC_REDEEM_MULTI_AFFILIATE:"gfn_pc_redeem_multi_affiliate",GFN_PC_DOWNLOAD:"gfn_pc_download",GFN_PC_RECOMMENDED_GAMEPADS:"gfn_pc_recommended_gamepads",GFN_PC_FAQ_IOS:"gfn_pc_faq_ios",EPIC_ACCOUNT_SETTINGS:"epic_account_settings",GFN_PC_HELP_KEYBOARD_GAMES_UNAVAILABLE:"gfn_pc_help_keyboard_games_unavailable",GFN_PC_BROWSER_PUSH_NOTIFICATION:"gfn_pc_help_browser_push_notification",GFN_PC_HELP_PASTE:"gfn_pc_help_paste"};var D=(()=>((D||(D={})).US="US",D))();const y="GeForce NOW";var T=(()=>{return(w=T||(T={})).GfnJsInitStart="GfnJsInitStart",w.GfnLayoutComponentLoadStart="GfnLayoutComponentLoadStart",w.GfnLayoutComponentLoadEnd="GfnLayoutComponentLoadEnd",w.GfnLayoutViewInitStart="GfnLayoutViewInitStart",w.GfnLayoutViewInitEnd="GfnLayoutViewInitEnd",T;var w})(),r=(()=>{return(w=r||(r={})).GfnLayoutDataLoad="GfnLayoutDataLoad",w.GfnLayoutComponentLoad="GfnLayoutComponentLoad",w.GfnLayoutViewInit="GfnLayoutViewInit",w.GfnLayoutMarqueeLoad="GfnLayoutMarqueeLoad",r;var w})(),a=(()=>{return(w=a||(a={})).Default="Default",w.GamepadFriendly="GamepadFriendly",w.TouchFriendly="TouchFriendly",a;var w})(),s=(()=>{return(w=s||(s={})).Join="Join",w.Close="Close",w.Login="Login",s;var w})(),p=(()=>{return(w=p||(p={})).Continue="Continue",w.Cancel="Cancel",p;var w})(),l=(()=>((l||(l={})).Cancel="Cancel",l))();const t={RigReadyAndStreamerIdleTimeout:{type:"RIG_READY_AND_STREAMER_IDLE_TIMEOUT",src:"./assets/audio/rig_ready_streamer_timeout.ogg"}}},20180:(He,de,e)=>{"use strict";e.d(de,{dC:()=>n.dC,qB:()=>n.qB,S5:()=>n.S5,N0:()=>n.N0,Y6:()=>n.Y6,yx:()=>n.yx,V_:()=>n.V_,xl:()=>n.xl,uV:()=>n.uV,e_:()=>n.e_,Rn:()=>i.R,qq:()=>i.q});var n=e(7883),i=e(61607)},61607:(He,de,e)=>{"use strict";e.d(de,{q:()=>n,R:()=>i});var n=(()=>{return(D=n||(n={}))[D.NVB_AUTH_INVALID=-1]="NVB_AUTH_INVALID",D[D.NVB_AUTH_NONE=0]="NVB_AUTH_NONE",D[D.NVB_AUTH_OAUTH2_PINGFEDERATE=1]="NVB_AUTH_OAUTH2_PINGFEDERATE",D[D.NVB_AUTH_OAUTH2_GOOGLE=2]="NVB_AUTH_OAUTH2_GOOGLE",D[D.NVB_AUTH_OAUTH2_JANRAIN=3]="NVB_AUTH_OAUTH2_JANRAIN",D[D.NVB_AUTH_ACTIVE_DIRECTORY=4]="NVB_AUTH_ACTIVE_DIRECTORY",D[D.NVB_AUTH_CLIENT_CERTIFICATE=5]="NVB_AUTH_CLIENT_CERTIFICATE",D[D.NVB_AUTH_SESSION_ID=6]="NVB_AUTH_SESSION_ID",D[D.NVB_AUTH_JARVIS=7]="NVB_AUTH_JARVIS",D[D.NVB_AUTH_JWT=8]="NVB_AUTH_JWT",D[D.NVB_AUTH_JWT_GFN=9]="NVB_AUTH_JWT_GFN",n;var D})(),i=(()=>{return(D=i||(i={}))[D.NCT_R_UNKNOWN=0]="NCT_R_UNKNOWN",D[D.NCT_R_SUCCESS=1]="NCT_R_SUCCESS",D[D.NCT_R_INVALID_PARAM=2]="NCT_R_INVALID_PARAM",D[D.NCT_R_SYN_FAILED=3]="NCT_R_SYN_FAILED",D[D.NCT_R_FIN_FAILED=4]="NCT_R_FIN_FAILED",D[D.NCT_R_AUTH_FAILED=5]="NCT_R_AUTH_FAILED",D[D.NCT_R_POST_FAILED=6]="NCT_R_POST_FAILED",D[D.NCT_R_TEST_IN_PROGRESS=7]="NCT_R_TEST_IN_PROGRESS",D[D.NCT_R_CANCELED=8]="NCT_R_CANCELED",D[D.NCT_R_CAPACITY_FULL=9]="NCT_R_CAPACITY_FULL",D[D.NCT_R_SESSION_EXIST=10]="NCT_R_SESSION_EXIST",D[D.NCT_R_INVALID_DATA=11]="NCT_R_INVALID_DATA",D[D.NCT_R_SETUP_FAILED=12]="NCT_R_SETUP_FAILED",D[D.NCT_R_RETRYABLE_POST_FAILURE=13]="NCT_R_RETRYABLE_POST_FAILURE",D[D.NCT_R_BLOCK_STREAM=14]="NCT_R_BLOCK_STREAM",i;var D})()},38998:(He,de,e)=>{"use strict";e.d(de,{g:()=>l});var n=e(81134),i=e(43365),D=e(78778),m=e(33927),y=e(18293),T=e(4906),r=e(60443),a=e(74316),s=e(2316),p=e(6484);let l=(()=>{class t{constructor(h,u){this.injector=h,this.useWindowedMode=!1,this.logger=u.getLogger("deeplink-helper")}getDeeplinkZoneOverride(h,u){if(!(-1!==window.location.href.indexOf(r.nn.Deeplink)||u&&-1!==u.indexOf(r.nn.Deeplink)))return null;{let o=h||(0,r.cj)(T.uE.Zone);try{const f=new URL(o);if(o=f.host,"https:"!==f.protocol||!o.endsWith("nvidiagrid.net"))return null;{const c=null==o?void 0:o.substring(0,null==o?void 0:o.indexOf("."));if(o)return{address:o,runNetworkTest:!0,name:c,isInternal:!0}}}catch(f){return this.logger.error("Incorrect deeplink override zone",f),null}}}isDeeplinkScenario(){return!!window.location.hash.match(r.nn.Deeplink)}getFeatureToggle(){return this.fetchedFeatureToggleValue?(0,n.of)(this.fetchedFeatureToggleValue):this.fetchDeeplinkFeatureToggle()}isSpecialAffiliatePartner(h){return Object.values(T.dp).includes(h)}fetchDeeplinkFeatureToggle(){var h,u,o;if(this.configuration||(this.configuration=this.injector.get(D.V)),this.experienceControlService||(this.experienceControlService=this.injector.get(i.Q6)),this.experienceControlService)return this.experienceControlService.getCloudVariable(null===(h=this.configuration)||void 0===h?void 0:h.gxTarget.experiences.deeplinkSupportV2,void 0,{useCache:!0,useNetworkTimeoutForCacheFallback:!0},i.Z4.GxTargetGetCloudVariable,i.Qu.GxTargetGetDeeplinkSupport).pipe((0,m.U)(f=>(this.fetchedFeatureToggleValue=f.value,this.fetchedFeatureToggleValue)),(0,y.K)(f=>{var c,g;this.logger.error("Error while fetching deeplink feature toggle:",f);const G=null===(g=null===(c=this.configuration)||void 0===c?void 0:c.featureEnablement)||void 0===g?void 0:g.deeplinkSupportV2;return(0,n.of)(G||T.C6)}));{const f=T.C6,c=null===(o=null===(u=this.configuration)||void 0===u?void 0:u.featureEnablement)||void 0===o?void 0:o.deeplinkSupportV2;return(0,n.of)(c||f)}}getDeeplinkPartnerData(){return this.deeplinkPartnerData}setDeeplinkPartnerData(h){this.deeplinkPartnerData=h}resetDeeplinkPartnerData(){this.deeplinkPartnerData=null}allowApplicationReload(){var h;return this.guestModeService||(this.guestModeService=this.injector.get(a.o)),!(null===(h=this.guestModeService)||void 0===h?void 0:h.isGuestMode)&&!this.getDeeplinkPartnerData()}getUpdatedPartnerId(h){return T.X3[h]||h}set windowedMode(h){this.useWindowedMode=h}get windowedMode(){return this.useWindowedMode}}return t.\u0275fac=function(h){return new(h||t)(s.LFG(s.zs3),s.LFG(p.ed))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},91571:(He,de,e)=>{"use strict";e.d(de,{x:()=>Q});var n=e(82516),i=e(8117),D=e(28416),m=e(81134),y=e(61486),T=e(42720),r=e(85816),a=e(53466),s=e(9170),p=e(67202),l=e(33927),t=e(98636),w=e(79902),h=e(18293),u=e(12556),o=e(91991),f=e(202),c=e(95027),g=e(67067),I=e(3773),G=e(20220),x=e(79441),E=e(34361),P=e(22663),v=e(2316),O=e(6484),C=e(22213),_=e(30582),F=e(70781),V=e(58283);let b=(()=>{class k{constructor(N,q){this.dialogRef=q,this.destroy$=new x.xQ,this.dismissMessageDelay=4e3,this.gfnLink=location.hostname,this.logger=N.getLogger("pwa-wall-help.component")}onClose(){this.dialogRef.close()}onCopy(){(0,E.D)(navigator.clipboard.writeText(this.gfnLink)).pipe((0,P.R)(this.destroy$)).subscribe(N=>{this.successMessageVisible=!0,this.logger.info(`${this.gfnLink} is copied`),setTimeout(()=>{this.successMessageVisible=!1},this.dismissMessageDelay)},N=>{this.logger.error(`${this.gfnLink} is copied failed, error: ${N}`)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return k.\u0275fac=function(N){return new(N||k)(v.Y36(O.ed),v.Y36(C.so))},k.\u0275cmp=v.Xpm({type:k,selectors:[["gfn-pwa-wall-help"]],decls:27,vars:21,consts:[["fxFlex","","fxLayout","column",1,"main-container"],["fxLayout","column",1,"content-container"],["fxLayout","column","fxLayoutAlign","start start"],[1,"font-header6","color-white","prompt-header"],[1,"font-body2"],[1,"link-container","font-body2"],["fxLayoutAlign","start center",1,"gfn-link"],["mat-button","","fxLayout","row","fxLayoutAlign","end center",1,"color-white",3,"click"],[1,"success-message","font-body2"],["fxLayout","row","fxLayoutAlign","end end",1,"button-container"],["mat-button","",3,"click"]],template:function(N,q){1&N&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"div",2),v.TgZ(3,"span",3),v._uU(4),v.ALo(5,"translate"),v.qZA(),v.TgZ(6,"span",4),v._uU(7),v.ALo(8,"translate"),v.qZA(),v.TgZ(9,"span",4),v._uU(10),v.ALo(11,"translate"),v.qZA(),v.qZA(),v.TgZ(12,"div",5),v.TgZ(13,"span",6),v._uU(14),v.qZA(),v.TgZ(15,"button",7),v.NdJ("click",function(){return q.onCopy()}),v.TgZ(16,"span"),v._uU(17),v.ALo(18,"translate"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(19,"span",8),v._uU(20),v.ALo(21,"translate"),v.qZA(),v.qZA(),v.TgZ(22,"div",9),v.TgZ(23,"button",10),v.NdJ("click",function(){return q.onClose()}),v.TgZ(24,"span"),v._uU(25),v.ALo(26,"translate"),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&N&&(v.xp6(4),v.Oqu(v.lcZ(5,9,"common.setUpOnSafari")),v.xp6(3),v.Oqu(v.lcZ(8,11,"iosPWA.setUpStep1")),v.xp6(3),v.Oqu(v.lcZ(11,13,"iosPWA.setUpStep2")),v.xp6(4),v.Oqu(q.gfnLink),v.xp6(3),v.Oqu(v.lcZ(18,15,"iosPWA.copy")),v.xp6(2),v.ekj("visible",q.successMessageVisible),v.xp6(1),v.Oqu(v.lcZ(21,17,"iosPWA.linkCopied")),v.xp6(5),v.Oqu(v.lcZ(26,19,"common.gotIt")))},directives:[_.yH,_.xw,_.Wh,F.lW],pipes:[V.X$],styles:['@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.main-container[_ngcontent-%COMP%]{width:560px;height:fit-content}.main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{margin:20px 24px 8px}.main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .prompt-header[_ngcontent-%COMP%]{margin-bottom:12px}.main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;margin:16px 0 8px;border:1px solid rgba(255,255,255,.2)}.isLtr[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]{padding-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]{--dummy1: 0;padding-left:8px}.isRtl[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]{padding-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]{--dummy1: 0;padding-right:8px}.main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{visibility:hidden}.isLtr[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{margin:0 0 8px 8px}html[dir=ltr][_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{--dummy: 0;margin:0 0 8px 8px}.isRtl[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{margin:0 8px 8px 0}html[dir=rtl][_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{--dummy: 0;margin:0 8px 8px 0}.main-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .success-message.visible[_ngcontent-%COMP%]{visibility:visible}.main-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{margin:0 8px 8px}']}),k})();var B=e(60249),U=e(57674),A=e(31454),S=e(21532),Y=e(73341),se=e(96121),fe=e(98221),$=e(57390),ae=e(60086),me=e(22573);const ye_body_text="layout.joinTodayAlertDialogText.bodyText",ye_body_textWithoutLink="layout.joinTodayAlertDialogText.bodyTextWithoutLink",ye_primaryButton={text:"common.joinToday",accentColor:!0},ue_body_text="common.connectionError",ue_primaryButton={text:"common.close",accentColor:!0},X_primaryButton={text:"common.cancel",accentColor:!0},X_checkbox_text="common.dontShowThisAgain",X_checkbox_initialState=!1,j_body={text:"multiplatform.dialog.description"},j_primaryButton={text:"common.continue",isDisabled:!0},K_body_text="fencedStatus.patchingSupplementalText",K_primaryButton_text="common.close",Z_body_text="fencedStatus.offlineSupplementalText",Z_primaryButton_text="common.close",L_body_text="layout.gamepadWarningAlert.body",L_checkbox_text="common.dontShowThisAgain",L_checkbox_initialState=!1,L_primaryButton={text:"common.continue",accentColor:!0},W_primaryButton={text:"common.gotIt"},te_header_unsupportedPlatformText="layout.universalUnsupportedDialogText.unsupportedPlatformHeaderText",te_header_unsupportedBrowserText="layout.universalUnsupportedDialogText.unsupportedBrowserHeaderText",te_body_unsupportedBrowserWithNativeApps="layout.universalUnsupportedDialogText.unsupportedBrowserWithNativeAppsBodyText",te_primaryButton={text:"common.close"},ie_primaryButton={text:"layout.unsupportedSystemLoginDialog.primaryButton"},ie_secondaryButton={text:"common.cancel"};let Q=(()=>{class k{constructor(N,q,Me,xe,ct,Se,Ge,St,Tt,Te,Je,xt,Ye){var rt;this.dialog=Me,this.browseUxService=xe,this.translateService=ct,this.telemetryUtilService=Se,this.browserSupportService=Ge,this.sharedStorageService=St,this.idmService=Tt,this.redirectService=Te,this.genericDialog=Je,this.ecomService=xt,this.unsupportedBrowserService=Ye,this.logger=N.getLogger("DialogService"),this.tvMode=!!(null===(rt=null==q?void 0:q.featureEnablement)||void 0===rt?void 0:rt.tvMode)}openJoinTodayAlertDialog(N,q){const Me=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:this.tvMode?"layout.joinTodayAlertDialogText.headerTextOnTv":"common.joinTodayToPlay"},bodyText:{text:this.tvMode?ye_body_textWithoutLink:ye_body_text,placeholders:this.tvMode?{loginLink:'class="font-tv-body2-link membership-login-link"'}:{loginLink:'class="font-body2-link membership-login-link"'}},primaryButton:Object.assign({},ye_primaryButton),secondaryButton:{text:this.tvMode?"common.login":"common.cancel"},threeQuaterSheetData:{augmentedButtons:[{text:"common.cancel",id:"cancel"}]}}},{preferThreeQuarterSheet:this.tvMode}),xe=Me.afterOpened().pipe((0,r.zg)(Se=>{if(this.tvMode)return Me.secondaryButtonClick;{const Ge=document.getElementsByClassName("membership-login-link");if(Ge&&Ge[0])return(0,n.R)(Ge,"click")}return i.E}),(0,a.q)(1));Me.primaryButtonClick.subscribe(()=>{this.telemetryUtilService.sendJoinTodayAlertDialogUiAction(u.V__.Join),this.ecomService.openJoinMembershipPage(N,q)},Se=>{this.logger.error("join today dialog:",Se)});const ct=this.tvMode?Me.augmentedButtonClick.pipe((0,s.h)(Se=>"cancel"===Se)):Me.secondaryButtonClick;return(0,D.S3)(ct.pipe((0,p.h)(u.V__.Close)),Me.afterClosed().pipe((0,p.h)(u.V__.Close)),xe.pipe((0,p.h)(u.V__.Login))).pipe((0,l.U)(Se=>(this.telemetryUtilService.sendJoinTodayAlertDialogUiAction(Se),Me.close(),Se)))}openUnsupportedBrowserDialog(N){let q;this.openGFNUnsupportedDialog(!1,N).pipe((0,a.q)(1),(0,r.zg)(Me=>(q=Me,q.primaryButtonClick.pipe((0,p.h)(u.uVS.Cancel)))),(0,t.b)(Me=>{this.telemetryUtilService.sendPopUpDialogClosedEvent(g.ItH.Unsupported_Browser_Or_Platform_Game_Launch,g.XzU.Dialog_Closed),q.close()})).subscribe()}openUnsupportedSystemSoftBlockerDialog(N){let q;return this.openGFNUnsupportedDialog(!0,N).pipe((0,a.q)(1),(0,r.zg)(Me=>(q=Me,(0,D.S3)(Me.secondaryButtonClick.pipe((0,p.h)(u.e_2.Cancel)),Me.primaryButtonClick.pipe((0,p.h)(u.e_2.Continue)),Me.afterClosed().pipe((0,p.h)(u.e_2.Cancel))))),(0,l.U)(Me=>(this.telemetryUtilService.sendPopUpDialogClosedEvent(g.ItH.Unsupported_Browser_Or_Platform_Login,Me===u.e_2.Continue?g.XzU.Continue_Login:g.XzU.Dialog_Closed),q.close(),Me)))}openGFNUnsupportedDialog(N,q){return this.unsupportedBrowserService.getDialogLink$(q).pipe((0,a.q)(1),(0,l.U)(Me=>{const xe=this.tvMode?{text:te_body_unsupportedBrowserWithNativeApps,placeholders:{vanityUrl:Me.shortUrl}}:void 0;return this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:this.getUnsupportedHeaderText(q)},link:Me,bodyText:xe,primaryButton:Object.assign({},N?ie_primaryButton:te_primaryButton),secondaryButton:N?Object.assign({},ie_secondaryButton):void 0,autoFocusOnPrimaryButton:!1}},{preferThreeQuarterSheet:!0})}),(0,t.b)(Me=>{this.telemetryUtilService.sendPopUpDialogShownEvent(N?g.ItH.Unsupported_Browser_Or_Platform_Login:g.ItH.Unsupported_Browser_Or_Platform_Game_Launch)}))}getUnsupportedHeaderText(N){switch(N){case S.h6.UnsupportedOS:return te_header_unsupportedPlatformText;case S.h6.UnsupportedBrowser:case S.h6.PWARequired:case S.h6.NativeAppOnly:return te_header_unsupportedBrowserText;default:throw new Error("should not happen!")}}openConnectionErrorDialog(){const N=this.genericDialog.open({disableClose:!0,panelClass:"dialogPaddingRemove",data:{headerText:{text:"common.genericLoadError"},bodyText:{text:ue_body_text},primaryButton:Object.assign({},ue_primaryButton)}});N.primaryButtonClick.pipe((0,a.q)(1)).subscribe(()=>N.close())}checkGameOwnershipDialog(N,q,Me){return this.browseUxService.getUserPreference(o.rL.showGameOwnershipPrompt).pipe((0,r.zg)(xe=>!(0,f.isNil)(xe)&&!xe||q||N.accountLinkingMetadata.isSupported?(0,m.of)(!0):(this.logger.info("Showing game ownership dialog"),this.showGameOwnershipDialog(N,Me))))}setDigitalStore(N,q,Me){const xe=null==N?void 0:N.label;return xe!==I.rV?this.translateService.get(q,{digitalStore:xe}):this.translateService.get(Me)}onGameOwnershipDialogDismissed(N){this.browseUxService.setUserPreference(o.rL.showGameOwnershipPrompt,!N.checkboxState).pipe((0,a.q)(1)).subscribe()}showGameOwnershipDialog(N,q){const Me={panelClass:"dialogPaddingRemove",disableClose:!0,data:{showSpinner:!0,headerText:{text:"common.beforeYouPlay"},primaryButton:Object.assign({},X_primaryButton),secondaryButton:{text:"common.continue"},checkbox:{text:this.tvMode?"layout.continueDontShowAgain":X_checkbox_text,initialState:X_checkbox_initialState}}},xe=this.genericDialog.open(Me);return this.setDigitalStore(N,"layout.gameOwnershipPrompt.bodyTextWithPlatform","layout.gameOwnershipPrompt.bodyText").pipe((0,w.w)(ct=>(Me.data.bodyText={text:ct},Me.data.showSpinner=!1,(0,D.S3)(xe.primaryButtonClick.pipe((0,p.h)(!1)),xe.secondaryButtonClick.pipe((0,p.h)(!0))).pipe((0,t.b)(Se=>{Se&&this.onGameOwnershipDialogDismissed(xe),this.logger.info("Closing game ownership dialog")}),(0,r.zg)(Se=>(xe.close(),(0,m.of)(Se)))))))}openMultiPlatformSelectionDialog(N,q,Me){const xe=N.map(St=>{const Tt=St.appStoreInfo.label;return Object.assign({value:Tt===I.rV?St.publisherName:Tt},St.appStoreInfo.smallImageUrl?{imageUrl:St.appStoreInfo.smallImageUrl}:null)}),Se={panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:"common.beforeYouPlay"},bodyText:Object.assign({},j_body),primaryButton:Object.assign({},j_primaryButton),secondaryButton:{text:"common.cancel"},radioButtonOptions:xe}},Ge=this.genericDialog.open(Se);return Ge.radioButtonClick.pipe((0,a.q)(1),(0,t.b)(()=>{Se.data.primaryButton.isDisabled=!1})).subscribe(),(0,D.S3)(Ge.primaryButtonClick.pipe((0,p.h)(!0)),Ge.secondaryButtonClick.pipe((0,p.h)(!1)),Ge.afterClosed().pipe((0,p.h)(!1))).pipe((0,l.U)(St=>{if(Ge.close(),St){const Tt=(St=>{let Tt;const Te=I.vA.StoresList.find(Je=>Je.label===St);return Tt=N.find(Te?Je=>Je.appStore===Te.store:Je=>Je.publisherName===St&&Je.appStoreInfo.label===I.rV),Tt})(Ge.radioOptionSelected);return this.telemetryUtilService.sendClickEvent(g.lzt.PlatformSelection,Tt.appStore,`${q}/${g.CGJ.ScreenPlatformSelectionDialog}`),Tt}return null}))}openFencedStatusErrorDialog(N){this.logger.info("Show fenced error dialog for",N);const q=this.genericDialog.open({disableClose:!0,panelClass:"dialogPaddingRemove",data:{headerText:{text:N===c.zu.PATCHING?"fencedStatus.gamePatching":"fencedStatus.gameOffline"},bodyText:{text:N===c.zu.PATCHING?K_body_text:Z_body_text},primaryButton:{text:N===c.zu.PATCHING?K_primaryButton_text:Z_primaryButton_text}}});q.primaryButtonClick.pipe((0,a.q)(1)).subscribe(()=>q.close())}gamepadConnected(){return this.browserSupportService.getGamepads().some(N=>null==N?void 0:N.connected)}openGamepadRequiredDialog(){return(0,y.aj)([this.redirectService.getRedirectUrl(U.hE.GfnPcRecommendedGamepads),this.browseUxService.getUserPreference(o.rL.skipGamepadWarningDialog)]).pipe((0,r.zg)(([N,q])=>{if(q||this.gamepadConnected())return(0,m.of)(!0);const Me=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:"layout.gamepadWarningAlert.title"},bodyText:{text:L_body_text,placeholders:this.tvMode?void 0:{gamePadURL:`class="font-body2-link" href="${N}"`}},checkbox:{text:this.tvMode?"layout.continueDontShowAgain":L_checkbox_text,initialState:L_checkbox_initialState,primaryActionInThreeQuarterSheet:!0},primaryButton:Object.assign({},L_primaryButton),secondaryButton:{text:"common.cancel"},link:{text:this.tvMode?"layout.gamepadWarningAlert.supportedGamepad":void 0,url:this.tvMode?N:void 0,shortUrl:U.hD[U.hE.GfnPcRecommendedGamepads]}}});return(0,D.S3)(Me.primaryButtonClick.pipe((0,p.h)(!0)),Me.secondaryButtonClick.pipe((0,p.h)(!1)),Me.afterClosed().pipe((0,p.h)(!1))).pipe((0,l.U)(xe=>(Me.close(),xe&&this.browseUxService.setUserPreference(o.rL.skipGamepadWarningDialog,Me.checkboxState).pipe((0,a.q)(1)).subscribe(),xe)))}))}openGameShortcutDialog(N,q,Me,xe,ct,Se,Ge){const St=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{image:{caption:"interface.gametitle",captionPlaceholder:{title:N},description:"gameShortcut.createShortcutGuidance",url:q,shortcutUrl:Me,isDraggableUrl:!0,dragStartCallback:this.onGameShortcutDragStart.bind(this,ct,Se,Ge)},headerText:{text:"gameShortcut.createShortcutTitle"},primaryButton:Object.assign({},W_primaryButton)}});(0,D.S3)(St.primaryButtonClick.pipe((0,p.h)(!0)),St.afterClosed().pipe((0,p.h)(!0)),xe).subscribe(()=>{St.close()})}onGameShortcutDragStart(N,q,Me){Me&&this.telemetryUtilService.sendDragEvent(g.cjj.GameShortcutUrl,N,q)}showAccountLinkingDialog(N,q,Me,xe,ct){const Ge=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:q},bodyText:{text:N},primaryButton:{text:Me,accentColor:!0},secondaryButton:{text:xe},checkbox:ct?{text:ct,initialState:!1}:void 0}});return(0,D.S3)(Ge.primaryButtonClick.pipe((0,p.h)(!0)),Ge.secondaryButtonClick.pipe((0,p.h)(!1)),Ge.afterClosed().pipe((0,p.h)(!1))).pipe((0,l.U)(St=>(Ge.checkboxState&&this.idmService.cachedUser.pipe((0,r.zg)(Tt=>(0,T.D)([(0,m.of)(Tt.data.userId),this.sharedStorageService.readBlock("accountLinking_"+Tt.data.userId)])),(0,r.zg)(([Tt,Te])=>(Te.hideAccountLinkingDialog=!0,this.sharedStorageService.writeBlock("accountLinking_"+Tt,Te)))).subscribe(),Ge.close(),St)))}openAccountLinkingExpirationDialog(N,q=!1){const Me=N.getExpirationStatus(),xe=N.isAccountLinkingRequired?"ios.":"";let ct=`ownership.providers.${N.providerType}.${xe}`;if(Me===G.hB.Expired)ct=`common.providers.${N.providerType}.${xe}warningExpired`;else if(Me===G.hB.ExpiresToday)ct+="warningToday";else{if(Me!==G.hB.ExpiresNow)return(0,m.of)(!0);ct+="warningSoon"}return this.showAccountLinkingDialog(ct,"common.reconnectAccount","layout.accountLinkingPrompt.primaryButton",q?"common.close":"common.notNow")}openAccountLinkingValuePropDialog(N){return this.showAccountLinkingDialog(N.isAccountLinkingRequired||!N.connectValueProp?`ownership.providers.${N.providerType}.${N.isAccountLinkingRequired?"ios.":""}linkRequired`:N.connectValueProp,"ownership.connectAccount","layout.accountLinkingPrompt.connect",N.isAccountLinkingRequired?"common.close":"common.notNow",N.isAccountLinkingRequired?null:"common.dontShowThisAgain")}openAccountLinkingConnectingDialog(N){const q=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:"ownership.accountLinking.connectionProgressTitle"},bodyText:{text:"ownership.accountLinking.connectionProgress"},primaryButton:{text:"common.cancel"}}});return(0,D.S3)(N,q.primaryButtonClick.pipe((0,p.h)(""))).pipe((0,h.K)(()=>(0,m.of)("")),(0,t.b)(()=>{q.close()}))}openOffDeviceAccountLinkingDialog(N,q){let Me;const xe=q.pipe((0,r.zg)(ct=>(Me=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:(0,A.j7)(ct.verificationUri)},bodyText:{text:"loginBridgeState.deviceAuthLogin",placeholders:{authCode:`<div class="font-header3 white">${(0,A.yY)(ct.userCode)}</div>`}},footerText:{text:"layout.gameOwnershipPrompt.offDeviceHint"},image:{url:ct.verificationUriComplete},primaryButton:{text:"common.cancel"}}},{preferThreeQuarterSheet:!0}),Me.primaryButtonClick.pipe((0,p.h)(!1)))));return(0,D.S3)(N,xe).pipe((0,h.K)(()=>(0,m.of)(!1)),(0,t.b)(()=>{null==Me||Me.close()}))}openAccountLinkingErrorDialog(N,q){const Me=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:"ownership.accountLinking.connectionFailedTitle"},bodyText:{text:"ownership.accountLinking.connectionFailed",placeholders:{arg:N}},primaryButton:{text:"common.close"}}});return Me.primaryButtonClick.pipe((0,a.q)(1),(0,t.b)(()=>{Me.close()}),(0,p.h)(q))}openAccountLinkingSuccessDialog(N,q,Me=!1){const xe=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:"ownership.accountLinking.accountConnectedTitle"},bodyText:{text:Me?"ownership.accountLinking.accountConnectedContinue":"ownership.accountLinking.accountConnected",placeholders:{arg:N}},primaryButton:{text:Me?"common.continue":"common.close"}}});return xe.primaryButtonClick.pipe((0,a.q)(1),(0,t.b)(()=>{xe.close()}),(0,p.h)(q))}openPlaytestLivePermissionHigDialog(N){var q;const Me=this.genericDialog.open({disableClose:!0,panelClass:"dialogPaddingRemove",backdropClass:"dialog-backdrop",data:{headerText:{text:"playtestLive.privacyPermissionsDialog.header"},bodyText:{text:"playtestLive.privacyPermissionsDialog.permissionInfo",placeholders:{gamedeveloper:null===(q=null==N?void 0:N.gameInfo)||void 0===q?void 0:q.gameDeveloper}},primaryButton:{text:"playtestLive.privacyPermissionsDialog.accept"},secondaryButton:{text:"common.cancelTitleCase"}}});return(0,D.S3)(Me.primaryButtonClick.pipe((0,p.h)(!0)),Me.secondaryButtonClick.pipe((0,p.h)(!1)),Me.afterClosed().pipe((0,p.h)(!1))).pipe((0,a.q)(1),(0,t.b)(()=>Me.close()))}openPlaytestLiveFeedbackHigDialog(N){var q;const Me=this.genericDialog.open({disableClose:!0,panelClass:"dialogPaddingRemove",backdropClass:"dialog-backdrop",data:{headerText:{text:"playtestLive.playtestFeedbackDialog.header"},bodyText:{text:"playtestLive.playtestFeedbackDialog.feedbackInfo",placeholders:{gamedeveloper:null===(q=null==N?void 0:N.gameInfo)||void 0===q?void 0:q.gameDeveloper}},primaryButton:{text:"common.done"}}});Me.primaryButtonClick.pipe((0,a.q)(1)).subscribe(xe=>Me.close())}openPlaytestLiveWebcamPreview(){return this.dialog.open(B.Qc,{width:`${B.po}px`,height:`${B.Lm}px`,disableClose:!0,backdropClass:"dialog-backdrop"}).afterClosed()}openPlaytestLiveMicrophonePreview(){return this.dialog.open(B.bW,{width:`${B.po}px`,height:`${B.Lm}px`,disableClose:!0,backdropClass:"dialog-backdrop"}).afterClosed()}openPwaWallHelpDialog(){this.dialog.open(b,{autoFocus:!0,hasBackdrop:!0,panelClass:"dialogPaddingRemove"})}showPlatformOverridePermissionDialog(N,q,Me){const xe=this.genericDialog.open({disableClose:!0,panelClass:"dialogPaddingRemove",data:{headerText:{text:"multiplatform.switchDialog.title"},bodyText:{text:"multiplatform.switchDialog.description",placeholders:{currentStore:q,newStore:Me}},primaryButton:{text:"common.continue"},secondaryButton:{text:"common.cancel"}}});return(0,D.S3)(xe.primaryButtonClick.pipe((0,p.h)(!0)),xe.secondaryButtonClick.pipe((0,p.h)(!1)),xe.afterClosed().pipe((0,p.h)(null))).pipe((0,a.q)(1),(0,t.b)(ct=>{xe.close(),null!==ct&&this.telemetryUtilService.sendClickEvent(g.lzt.PlatformChangeConsent,Me,`${N}/ContinueClicked=${ct}`)}))}showExitAppDialog(){const N=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:"layout.exitAppPrompt.headerText"},primaryButton:{text:"layout.exitAppPrompt.primaryButton"},secondaryButton:{text:"common.cancelTitleCase"}}});return(0,D.S3)(N.primaryButtonClick.pipe((0,p.h)(!0)),N.secondaryButtonClick.pipe((0,p.h)(!1)),N.afterClosed().pipe((0,p.h)(!1))).pipe((0,a.q)(1),(0,t.b)(()=>N.close()))}}return k.\u0275fac=function(N){return new(N||k)(v.LFG(O.ed),v.LFG(Y.VK),v.LFG(C.uw),v.LFG(se.O),v.LFG(V.sK),v.LFG(g.wU6),v.LFG(fe.OA),v.LFG($.OA),v.LFG(ae.No),v.LFG(U.VH),v.LFG(me.TX),v.LFG(u.BHV),v.LFG(S.rH))},k.\u0275prov=v.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})()},45765:(He,de,e)=>{"use strict";e.d(de,{x:()=>n.x});var n=e(91571)},3773:(He,de,e)=>{"use strict";e.d(de,{rV:()=>n,f1:()=>i,vA:()=>y});const n="",i="Other",m={store:"UNKNOWN",label:n};class y{static get StoresList(){return this.digitalStoresList||[]}static buildDigitalStoresMapFromList(){var r;(null===(r=this.digitalStoresList)||void 0===r?void 0:r.length)&&(this.digitalStoresMap={},this.digitalStoresList.forEach(a=>{this.digitalStoresMap[a.store]={store:a.store,label:a.label||n,keywords:a.keywords||[],smallImageUrl:a.smallImageUrl||"",largeImageUrl:a.largeImageUrl||"",sortOrder:a.sortOrder,accountLinkingMetadata:a.accountLinkingMetadata}}))}static get StoresMap(){return this.digitalStoresMap||{}}static getStoreInfoForAppstore(r){return this.StoresMap[r]||m}static setAppStoresDefinitions(r){(null==r?void 0:r.length)&&(this.digitalStoresList=r),this.buildDigitalStoresMapFromList()}static setGenreDefinitions(r){r&&r.forEach(a=>this.genreDefinitionsMap.set(a.genre,a.label))}static sortVariants(r){r.length>1&&r.sort((a,s)=>{var p,l;return(null===(p=this.StoresMap[a.appStore])||void 0===p?void 0:p.sortOrder)-(null===(l=this.StoresMap[s.appStore])||void 0===l?void 0:l.sortOrder)})}}y.digitalStoresMap=null,y.genreDefinitionsMap=new Map},7366:(He,de,e)=>{"use strict";e.d(de,{U:()=>w});var n=e(22213),i=e(84425),D=e(202),y=e(2316),T=e(6484),r=e(78778);function a(h,u){if(1&h){const o=y.EpF();y.TgZ(0,"gfn-join-now",5),y.NdJ("primaryButtonClicked",function(c){return y.CHM(o),y.oxw().onPrimaryButtonClicked(c)})("loginButtonClicked",function(c){return y.CHM(o),y.oxw().onLoginButtonClicked(c)})("closeButtonClicked",function(c){return y.CHM(o),y.oxw().oncloseButtonClicked(c)}),y.qZA()}if(2&h){const o=y.oxw();y.Q6J("data",o.data)}}function s(h,u){if(1&h){const o=y.EpF();y.TgZ(0,"gfn-membership-update-progress",6),y.NdJ("primaryButtonClicked",function(c){return y.CHM(o),y.oxw().onPrimaryButtonClicked(c)})("closeButtonClicked",function(c){return y.CHM(o),y.oxw().oncloseButtonClicked(c)}),y.qZA()}if(2&h){const o=y.oxw();y.Q6J("data",o.data)}}function p(h,u){if(1&h){const o=y.EpF();y.TgZ(0,"gfn-membership-refresh-error",7),y.NdJ("closeButtonClicked",function(c){return y.CHM(o),y.oxw().oncloseButtonClicked(c)}),y.qZA()}if(2&h){const o=y.oxw();y.Q6J("data",o.data)}}function l(h,u){if(1&h){const o=y.EpF();y.TgZ(0,"gfn-membership-not-updated",7),y.NdJ("closeButtonClicked",function(c){return y.CHM(o),y.oxw().oncloseButtonClicked(c)}),y.qZA()}if(2&h){const o=y.oxw();y.Q6J("data",o.data)}}const t=function(h){return[h]};let w=(()=>{class h{constructor(o,f,c,g){this.dialogRef=f,this.appConfig=c,this.data=g,this.currentUIState=i.l2.InitialState,this.ecomUIState=i.l2,this.lastEntitlement=null,this.isEcomPlanChanged=!1,this.membershipUpdateProgressPrimaryButtonClicked=!1,this.logger=o.getLogger("EcomDialogComponent")}ngOnInit(){this.currentUIState=this.data.ecomUIState,this.initEcommerceSub()}onPrimaryButtonClicked(o){if(this.currentUIState===i.l2.InitialState)this.goToNextEcomDlgUIState(i.l2.MembershipUpdateProgress);else if(this.currentUIState===i.l2.MembershipUpdateProgress){if(this.data.useCase===i.vq.GaaSFree1HourExceeded||this.data.useCase===i.vq.GaaSFreeSampleAlreadyUsed||this.data.useCase===i.vq.GaaSUnsupportedFreeTitle)return this.goToNextEcomDlgUIState(i.l2.ExitedToLogin),this.closeDialog(),void this.data.buttonClickCallback(i.l2.ExitedToLogin);this.membershipUpdateProgressPrimaryButtonClicked=!0}}onLoginButtonClicked(o){this.currentUIState===i.l2.InitialState&&(this.goToNextEcomDlgUIState(i.l2.ExitedToLogin),this.closeDialog())}oncloseButtonClicked(o){this.closeDialog()}initEcommerceSub(){this.ecommerceSubscription=this.data.getUserMembership$.subscribe(o=>{const f=(0,D.get)(o,"subscription.productSku");null!==this.lastEntitlement?(this.isEcomPlanChanged=this.isPlanChanged(f),this.isEcomPlanChanged?this.closeDialog():this.membershipUpdateProgressPrimaryButtonClicked&&this.goToErrorOrRefreshState(o),this.lastEntitlement={productSku:f}):this.lastEntitlement={productSku:f}})}isPlanChanged(o){return this.lastEntitlement.productSku!==o}goToErrorOrRefreshState(o){this.goToNextEcomDlgUIState(o.membershipStatus===i.Tn.ServerError||o.membershipStatus===i.Tn.UnKnown?i.l2.MembershipRefreshError:i.l2.MembershipNotUpdated)}closeDialog(){(0,D.isNil)(this.ecommerceSubscription)||this.ecommerceSubscription.unsubscribe(),this.dialogRef.close([this.isEcomPlanChanged,this.currentUIState])}goToNextEcomDlgUIState(o){this.currentUIState=o}}return h.\u0275fac=function(o){return new(o||h)(y.Y36(T.ed),y.Y36(n.so),y.Y36(r.V),y.Y36(n.WI))},h.\u0275cmp=y.Xpm({type:h,selectors:[["gfn-ecom-dialog"]],decls:7,vars:8,consts:[[3,"ngClass"],["fxFlexFill","","fxLayout","column","fxFlex","grow",3,"ngSwitch"],[3,"data","primaryButtonClicked","loginButtonClicked","closeButtonClicked",4,"ngSwitchCase"],[3,"data","primaryButtonClicked","closeButtonClicked",4,"ngSwitchCase"],[3,"data","closeButtonClicked",4,"ngSwitchCase"],[3,"data","primaryButtonClicked","loginButtonClicked","closeButtonClicked"],[3,"data","primaryButtonClicked","closeButtonClicked"],[3,"data","closeButtonClicked"]],template:function(o,f){1&o&&(y.TgZ(0,"div",0),y.TgZ(1,"div",1),y.YNc(2,a,1,1,"gfn-join-now",2),y.YNc(3,s,1,1,"gfn-membership-update-progress",3),y.YNc(4,p,1,1,"gfn-membership-refresh-error",4),y.YNc(5,l,1,1,"gfn-membership-not-updated",4),y._UZ(6,"div"),y.qZA(),y.qZA()),2&o&&(y.Q6J("ngClass",y.VKq(6,t,f.data.isStreamerApp?"joinnow-component-container-streamer":"joinnow-component-container-mall")),y.xp6(1),y.Q6J("ngSwitch",f.currentUIState),y.xp6(1),y.Q6J("ngSwitchCase",f.ecomUIState.InitialState),y.xp6(1),y.Q6J("ngSwitchCase",f.ecomUIState.MembershipUpdateProgress),y.xp6(1),y.Q6J("ngSwitchCase",f.ecomUIState.MembershipRefreshError),y.xp6(1),y.Q6J("ngSwitchCase",f.ecomUIState.MembershipNotUpdated))},styles:[".joinnow-component-container-mall,.joinnow-component-container-streamer{width:470px;height:668px}.joinnow-component-container-mall,.joinnow-component-container-streamer,.mat-dialog-container{border-radius:0;overflow:hidden;transition:height .5s;background-color:#1f2224;padding:0}.joinnow-component-container-streamer{height:618px}@media (max-height: 668px){.joinnow-component-container-mall,.mat-dialog-container{height:100%}.main-content-mall{height:550px}.main-content-mall .dialog-content{height:136px!important}}@media screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.joinnow-component-container-mall,.joinnow-component-container-streamer{width:560px;height:fit-content}.mat-dialog-container{height:fit-content}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 568px) and (max-height: 320px) and (orientation: landscape){.joinnow-component-container-mall,.joinnow-component-container-streamer{width:calc(100vw - 32px);height:fit-content}.mat-dialog-container{height:fit-content}}\n"],encapsulation:2}),h})()},44804:(He,de,e)=>{"use strict";e.d(de,{I:()=>S});var n=e(2316),i=e(202),m=e(79441),y=e(22663),T=e(67067),r=e(84425),a=e(53466),s=e(6484),p=e(73159),l=e(22573),t=e(30582),w=e(47420),h=e(12204),u=e(89460),o=e(54364),f=e(6381),c=e(22213),g=e(70781),I=e(52529),G=e(10343),x=e(48919),E=e(58283),P=e(84454);function v(Y,se){if(1&Y){const fe=n.EpF();n.TgZ(0,"div",14),n.TgZ(1,"button",15),n.NdJ("click",function(){return n.CHM(fe),n.oxw(2).closeDialog()}),n.TgZ(2,"mat-icon",16),n._uU(3,"close"),n.qZA(),n.qZA(),n.qZA()}}function O(Y,se){if(1&Y&&(n.TgZ(0,"div",10),n.TgZ(1,"div",11),n.TgZ(2,"h1",12),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.qZA(),n.YNc(5,v,4,0,"div",13),n.qZA()),2&Y){const fe=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,2,"common.gfn")),n.xp6(2),n.Q6J("ngIf",!fe.isGaaS)}}function C(Y,se){1&Y&&n._UZ(0,"img",17)}function _(Y,se){1&Y&&n._UZ(0,"img",18)}function F(Y,se){if(1&Y){const fe=n.EpF();n.TgZ(0,"button",23),n.NdJ("click",function(){return n.CHM(fe),n.oxw(2).closeDialog()}),n.TgZ(1,"span"),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.qZA()}2&Y&&(n.xp6(2),n.Oqu(n.lcZ(3,1,"common.notNow")))}function V(Y,se){if(1&Y){const fe=n.EpF();n.TgZ(0,"div",19),n.YNc(1,F,4,3,"button",20),n.TgZ(2,"button",21),n.NdJ("click",function(){return n.CHM(fe),n.oxw().joinNowClicked()}),n.TgZ(3,"span",22),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.qZA(),n.qZA()}if(2&Y){const fe=n.oxw();n.xp6(1),n.Q6J("ngIf",!fe.isGaaS||fe.isUpgrade),n.xp6(1),n.Q6J("isVisible",fe.showLoadingOnJoinNow),n.xp6(2),n.Oqu(n.lcZ(5,3,fe.buttonText))}}function b(Y,se){if(1&Y&&(n.TgZ(0,"div",29),n.TgZ(1,"span",30),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.qZA()),2&Y){const fe=n.oxw(2);n.xp6(2),n.Oqu(n.lcZ(3,1,fe.upsellMessage))}}function B(Y,se){if(1&Y){const fe=n.EpF();n.TgZ(0,"button",31),n.NdJ("click",function(){return n.CHM(fe),n.oxw(2).joinNowClicked()}),n.TgZ(1,"span",22),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.qZA()}if(2&Y){const fe=n.oxw(2);n.Q6J("isVisible",fe.showLoadingOnJoinNow),n.xp6(2),n.Oqu(n.lcZ(3,2,fe.buttonText))}}function U(Y,se){if(1&Y){const fe=n.EpF();n.TgZ(0,"div",24),n.YNc(1,b,4,3,"div",25),n.TgZ(2,"div",26),n.TgZ(3,"button",27),n.NdJ("click",function(){return n.CHM(fe),n.oxw().closeDialog()}),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.YNc(6,B,4,4,"button",28),n.qZA(),n.qZA()}if(2&Y){const fe=n.oxw();n.xp6(1),n.Q6J("ngIf",fe.upsellMessage),n.xp6(3),n.hij(" ",n.lcZ(5,3,fe.queueLimitExceededCloseButtonText)," "),n.xp6(2),n.Q6J("ngIf",fe.showUpgradeButtonForQueueLimitExceeded)}}const A=function(Y){return[Y]};let S=(()=>{class Y{constructor(fe,$,ae,me){this.telemetryUtilService=$,this.gfnSdkService=ae,this.spatialNavigationService=me,this.primaryButtonClicked=new n.vpe,this.closeButtonClicked=new n.vpe,this.loginButtonClicked=new n.vpe,this.showUpgradeButtonForQueueLimitExceeded=!0,this.queueLimitExceededCloseButtonText="common.close",this.queueLimitReached=!1,this.showLoadingOnJoinNow=!1,this.isGaaS=!1,this.isUpgrade=!1,this.destroy$=new m.xQ,this.logger=fe.getLogger("JoinNowComponent")}ngOnInit(){switch((this.data.useCase===r.vq.GaaSFree1HourExceeded||this.data.useCase===r.vq.GaaSFreeSampleAlreadyUsed||this.data.useCase===r.vq.GaaSUnsupportedFreeTitle||this.data.useCase===r.vq.GaaSFreeUserCanUpgrade)&&(this.isGaaS=!0,this.isUpgrade=this.data.useCase===r.vq.GaaSFreeUserCanUpgrade),this.getDialogText(this.data),this.data.useCase){case r.vq.MaxSessionLengthExceeded:this.sendUpsellTelemetry(T.N3X.StreamerPostSessionUpsell);break;case r.vq.GaaSFreeUserCanUpgrade:this.sendUpsellTelemetry(T.N3X.StreamerPostSessionFreeGaaSUpsell);break;case r.vq.GaaSFree1HourExceeded:this.sendUpsellTelemetry(T.N3X.StreamerPostSessionAnonGaaSUpsell);break;case r.vq.GaaSFreeSampleAlreadyUsed:this.sendUpsellTelemetry(T.N3X.StreamerUsedFreeUpsell);break;case r.vq.GaaSUnsupportedFreeTitle:this.sendUpsellTelemetry(T.N3X.StreamerNoFreeUpsell)}}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}sendUpsellTelemetry(fe){this.telemetryUtilService.sendUserSessionEvent(T.Vwu.LaunchGame,fe,0,"",this.data.gameLaunchScreen)}sendUIActionTelemetry(fe){let $;switch(this.data.useCase){case r.vq.MaxSessionLengthExceeded:$=T.c8x.StreamerPostSessionUpsell;break;case r.vq.QueueLimitExceeded:$=T.c8x.StreamerQueueUpsell;break;case r.vq.GaaSFree1HourExceeded:$=T.c8x.StreamerPostSessionAnonGaaSUpsell;break;case r.vq.GaaSUnsupportedFreeTitle:$=T.c8x.StreamerNoFreeUpsell;break;case r.vq.GaaSFreeSampleAlreadyUsed:$=T.c8x.StreamerUsedFreeUpsell;break;case r.vq.GaaSFreeUserCanUpgrade:$=T.c8x.StreamerPostSessionFreeGaaSUpsell;break;default:$=T.c8x.StreamerPostSessionUpsell}this.telemetryUtilService.sendUiActionEvent(fe,$)}ngAfterViewInit(){const fe=document.getElementsByClassName("join-now-login-link"),$=(null==fe?void 0:fe.length)>0?fe[0]:void 0;$&&this.spatialNavigationService.onClick($).pipe((0,y.R)(this.destroy$)).subscribe(ae=>{ae&&(this.loginButtonClicked.emit(),this.data.buttonClickCallback(r.l2.ExitedToLogin),this.sendUIActionTelemetry(T.VHB.Login))})}closeDialog(){this.closeButtonClicked.emit(),this.sendUIActionTelemetry(T.VHB.Close)}joinNowClicked(){this.logger.info("User clicked on Join button."),this.data.buttonClickCallback(r.l2.InitialState),this.showLoadingOnJoinNow=!0,setTimeout(()=>{this.primaryButtonClicked.emit(),this.showLoadingOnJoinNow=!1},r.qM),this.sendUIActionTelemetry(T.VHB.Join)}getDialogText(fe){if(this.logger.info("Dialog data received from caller: ",fe),(0,i.isNil)(fe))this.logger.error("recieved null data in join now component");else{switch(this.data.useCase){case r.vq.MaxSessionLengthExceeded:this.dialogTitle="ecommerce.upgradeDialog.title",this.description="ecommerce.upgradeDialog.description",this.buttonText="ecommerce.upgrade";break;case r.vq.QueueLimitExceeded:this.queueLimitReached=!0,fe.getUserMembership$.pipe((0,a.q)(1)).subscribe($=>{var ae;(null===(ae=$.subscription)||void 0===ae?void 0:ae.upsellOptions.betterSessionPriorityProductExists)?(this.description="ecommerce.queueLimitReached.upgradable",this.upsellMessage="ecommerce.upsellPromptForBetterQueuePositionA",this.buttonText="ecommerce.upgrade",this.queueLimitExceededCloseButtonText="common.notNow"):(this.description="ecommerce.queueLimitReached.notUpgradable",this.showUpgradeButtonForQueueLimitExceeded=!1)});break;case r.vq.GaaSFree1HourExceeded:this.dialogTitle="ecommerce.joinNowDialog.gaaSFree1HourExceededTitle",this.description="ecommerce.joinNowDialog.gaaSFree1HourExceededDescription",this.buttonText="common.joinToday";break;case r.vq.GaaSUnsupportedFreeTitle:this.dialogTitle="common.joinTodayToPlay",this.description="ecommerce.joinNowDialog.gaaSUnsupportedFreeDescription",this.buttonText="common.joinToday";break;case r.vq.GaaSFreeSampleAlreadyUsed:this.dialogTitle="common.joinTodayToPlay",this.description="ecommerce.joinNowDialog.gaaSFree1HourExceededDescription",this.buttonText="common.joinToday";break;case r.vq.GaaSFreeUserCanUpgrade:return this.dialogTitle="ecommerce.joinNowDialog.gaaSFreeUserCanUpgradeTitle",this.description="ecommerce.joinNowDialog.gaaSFreeUserCanUpgradeDescription",void(this.buttonText="ecommerce.upgrade");default:this.dialogTitle="common.joinTodayToPlay",this.description="ecommerce.joinNowDialog.description",this.buttonText="common.joinToday"}this.loginButtonText="common.login"}}}return Y.\u0275fac=function(fe){return new(fe||Y)(n.Y36(s.ed),n.Y36(T.wU6),n.Y36(p.s),n.Y36(l.jr))},Y.\u0275cmp=n.Xpm({type:Y,selectors:[["gfn-join-now"]],inputs:{data:"data"},outputs:{primaryButtonClicked:"primaryButtonClicked",closeButtonClicked:"closeButtonClicked",loginButtonClicked:"loginButtonClicked"},decls:14,vars:19,consts:[["fxFlexFill","","fxLayout","column","nvSpatialNavigationContainer","","nvTrapFocus","",3,"ngClass"],["fxFlex","none","class","custom-title-bar","fxLayout","row",4,"ngIf"],["fxFlex","none","fxLayout","column"],["class","dialog-art","src","shared/assets/img/GaaSUpsellBanner.jpg",4,"ngIf"],["class","dialog-art","src","shared/assets/img/GFNUpSellBannerKV_v2.jpg",4,"ngIf"],[3,"ngClass"],[1,"font-header6"],[1,"font-body2",3,"innerHTML"],["fxFlex","none","class","dialog-button","fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",4,"ngIf"],["fxFlex","","fxLayout","column","class","upsell-pane",4,"ngIf"],["fxFlex","none","fxLayout","row",1,"custom-title-bar"],["fxFlex","","fxLayoutAlign","start center"],["mat-dialog-title","",1,"font-header6"],["fxFlex","","fxLayoutAlign","end center",4,"ngIf"],["fxFlex","","fxLayoutAlign","end center"],["mat-icon-button","",3,"click"],["mat-font-set","material-icons"],["src","shared/assets/img/GaaSUpsellBanner.jpg",1,"dialog-art"],["src","shared/assets/img/GFNUpSellBannerKV_v2.jpg",1,"dialog-art"],["fxFlex","none","fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"dialog-button"],["mat-button","","class","not-now-button",3,"click",4,"ngIf"],["mat-raised-button","","gfnProgressSpinner","","nvAutoFocus","",3,"isVisible","click"],[1,"font-button2"],["mat-button","",1,"not-now-button",3,"click"],["fxFlex","","fxLayout","column",1,"upsell-pane"],["fxFlex","","fxLayout","column","fxLayoutAlign","start center","class","upsell-pane-message",4,"ngIf"],["fxFlex","","fxLayout","row","fxLayoutAlign","end end","fxLayoutGap","8px",1,"upgrade-container"],["mat-button","",1,"font-button2",3,"click"],["mat-raised-button","","color","accent","gfnProgressSpinner","","nvAutoFocus","",3,"isVisible","click",4,"ngIf"],["fxFlex","","fxLayout","column","fxLayoutAlign","start center",1,"upsell-pane-message"],[1,"font-sub2"],["mat-raised-button","","color","accent","gfnProgressSpinner","","nvAutoFocus","",3,"isVisible","click"]],template:function(fe,$){1&fe&&(n.TgZ(0,"div",0),n.YNc(1,O,6,4,"div",1),n.TgZ(2,"div",2),n.YNc(3,C,1,0,"img",3),n.YNc(4,_,1,0,"img",4),n.TgZ(5,"div",5),n.TgZ(6,"h2",6),n._uU(7),n.ALo(8,"translate"),n.qZA(),n._UZ(9,"p",7),n.ALo(10,"trustAsHtml"),n.ALo(11,"translate"),n.qZA(),n.qZA(),n.YNc(12,V,6,5,"div",8),n.YNc(13,U,7,5,"div",9),n.qZA()),2&fe&&(n.Q6J("ngClass",n.VKq(15,A,$.data.isStreamerApp?"main-content-streamer":"main-content-mall")),n.xp6(1),n.Q6J("ngIf",!$.data.isStreamerApp),n.xp6(2),n.Q6J("ngIf",$.isGaaS),n.xp6(1),n.Q6J("ngIf",!$.isGaaS),n.xp6(1),n.Q6J("ngClass",n.VKq(17,A,$.queueLimitReached?"dialog-content-queue-limit":"dialog-content")),n.xp6(2),n.Oqu(n.lcZ(8,9,$.dialogTitle)),n.xp6(2),n.Q6J("innerHTML",n.lcZ(10,11,n.lcZ(11,13,$.description)),n.oJD),n.xp6(3),n.Q6J("ngIf",!$.queueLimitReached),n.xp6(1),n.Q6J("ngIf",$.queueLimitReached))},directives:[t.s9,t.xw,w.N,h.e,u.oO,o.mk,o.O5,t.yH,f.E,t.Wh,c.uh,g.lW,I.Hw,t.SQ,G.d,x.h],pipes:[E.X$,P.W],styles:[".main-content-streamer,.main-content-mall{width:470px;overflow:hidden;transition:height .5s}.main-content-streamer .custom-title-bar,.main-content-mall .custom-title-bar{width:470px;height:50px}:host-context(.isLtr) .main-content-streamer .custom-title-bar,:host-context(.isLtr) .main-content-mall .custom-title-bar{padding-left:24px}html[dir=ltr] .main-content-streamer .custom-title-bar,html[dir=ltr] .main-content-mall .custom-title-bar{--dummy1: 0;padding-left:24px}:host-context(.isRtl) .main-content-streamer .custom-title-bar,:host-context(.isRtl) .main-content-mall .custom-title-bar{padding-right:24px}html[dir=rtl] .main-content-streamer .custom-title-bar,html[dir=rtl] .main-content-mall .custom-title-bar{--dummy1: 0;padding-right:24px}:host-context(.isLtr) .main-content-streamer .custom-title-bar,:host-context(.isLtr) .main-content-mall .custom-title-bar{padding-right:24px}html[dir=ltr] .main-content-streamer .custom-title-bar,html[dir=ltr] .main-content-mall .custom-title-bar{--dummy2: 0;padding-right:24px}:host-context(.isRtl) .main-content-streamer .custom-title-bar,:host-context(.isRtl) .main-content-mall .custom-title-bar{padding-left:24px}html[dir=rtl] .main-content-streamer .custom-title-bar,html[dir=rtl] .main-content-mall .custom-title-bar{--dummy2: 0;padding-left:24px}.main-content-streamer .custom-title-bar .mat-dialog-title,.main-content-mall .custom-title-bar .mat-dialog-title{margin-bottom:0}.main-content-streamer .dialog-art,.main-content-mall .dialog-art{width:470px;height:264px;border:transparent;padding-bottom:0}.main-content-streamer .dialog-content,.main-content-mall .dialog-content{padding:24px;height:254px}.main-content-streamer .dialog-content-queue-limit,.main-content-mall .dialog-content-queue-limit{padding:24px;height:91px}.main-content-streamer .dialog-content-queue-limit>p,.main-content-mall .dialog-content-queue-limit>p{text-align:center;margin:4px 0 0}.main-content-streamer .dialog-content-queue-limit>h2,.main-content-mall .dialog-content-queue-limit>h2{display:none}.main-content-streamer .dialog-content>h2,.main-content-mall .dialog-content>h2{margin-top:0}.main-content-streamer .dialog-button,.main-content-mall .dialog-button{flex-wrap:nowrap;margin:8px;position:relative;right:0;bottom:0}.main-content-streamer .upsell-pane,.main-content-mall .upsell-pane{height:215px}.main-content-streamer .upsell-pane-message,.main-content-mall .upsell-pane-message{border-top:1px solid rgba(255,255,255,.15);margin:0 24px;padding:23px 0}.main-content-streamer .upgrade-container,.main-content-mall .upgrade-container{margin:8px}@media (max-width: 469px){.main-content-streamer,.main-content-mall{width:100vw}.main-content-streamer .custom-title-bar,.main-content-mall .custom-title-bar{width:unset}.main-content-streamer .dialog-art,.main-content-mall .dialog-art{width:100vw;height:auto}.main-content-streamer .dialog-content,.main-content-mall .dialog-content{width:unset}.main-content-streamer .dialog-button,.main-content-mall .dialog-button{width:unset}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.main-content-mall .dialog-art,.main-content-streamer .dialog-art{display:none}.main-content-mall .custom-title-bar,.main-content-streamer .custom-title-bar{display:none!important}.main-content-mall .dialog-content,.main-content-streamer .dialog-content{height:fit-content!important}}:host-context(.isLtr) .not-now-button{margin-right:8px}html[dir=ltr] .not-now-button{--dummy4: 0;margin-right:8px}:host-context(.isRtl) .not-now-button{margin-left:8px}html[dir=rtl] .not-now-button{--dummy4: 0;margin-left:8px}\n"],encapsulation:2}),Y})()},84425:(He,de,e)=>{"use strict";e.d(de,{qM:()=>n,u0:()=>i,NV:()=>D,w1:()=>m,X9:()=>y,Tn:()=>T,Vv:()=>r,D7:()=>a,l2:()=>s,vq:()=>p});const n=2e3;var i=(()=>{return(l=i||(i={})).Windows="Windows",l.Mac="Mac",i;var l})();const D={name:"gfn"};var m=(()=>{return(l=m||(m={})).Development="dev",l.Staging="stage",l.Preview="preview",l.Production="prod",m;var l})(),y=(()=>{return(l=y||(y={}))[l.Badge=28]="Badge",y;var l})(),T=(()=>{return(l=T||(T={}))[l.UnKnown=0]="UnKnown",l[l.ServerError=1]="ServerError",l[l.LoggedOut=2]="LoggedOut",l[l.UnEntitled=3]="UnEntitled",l[l.Entitled=4]="Entitled",T;var l})();const r={eComFeatureEnabled:!1,membershipStatus:T.UnKnown,subscription:null,product:null,affiliateStatus:null};var a=(()=>{return(l=a||(a={})).SettingsMembershipPanel="SETTINGS_MEMBERSHIP_PANEL",l.EntitlementErrorComponent="ENTITLEMENT_ERROR_COMPONENT",l.LoadingComponent="LOADING_COMPONENT",l.ToolbarComponent="TOOLBAR_COMPONENT",l.MembershipUpdateProgressEcomUIState="MEMBERSHIP_UPDATE_PROGRESS_ECOM_UI_STATE",l.MembershipNotUpdatedEcomUIState="MEMBERSHIP_NOT_UPDATED_ECOM_UI_STATE",l.SettingsStreamingProfilePanel="SETTINGS_STREAMING_PROFILE_PANEL",l.SettingsInGameGraphicsPanel="SETTINGS_IN_GAME_GRAPHICS_SETTINGS_PANEL",a;var l})(),s=(()=>{return(l=s||(s={}))[l.InitialState=0]="InitialState",l[l.MembershipUpdateProgress=1]="MembershipUpdateProgress",l[l.MembershipRefreshError=2]="MembershipRefreshError",l[l.MembershipNotUpdated=3]="MembershipNotUpdated",l[l.ExitedToLogin=4]="ExitedToLogin",s;var l})(),p=(()=>{return(l=p||(p={}))[l.BridgeState=0]="BridgeState",l[l.Join=1]="Join",l[l.MaxSessionLengthExceeded=2]="MaxSessionLengthExceeded",l[l.QueueLimitExceeded=3]="QueueLimitExceeded",l[l.GaaSFree1HourExceeded=4]="GaaSFree1HourExceeded",l[l.GaaSUnsupportedFreeTitle=5]="GaaSUnsupportedFreeTitle",l[l.GaaSFreeSampleAlreadyUsed=6]="GaaSFreeSampleAlreadyUsed",l[l.GaaSFreeUserCanUpgrade=7]="GaaSFreeUserCanUpgrade",p;var l})()},32839:(He,de,e)=>{"use strict";e.d(de,{BH:()=>i.B,X9:()=>D.X9,Vv:()=>D.Vv,qM:()=>D.qM,l2:()=>D.l2,vq:()=>D.vq,D7:()=>D.D7,u0:()=>D.u0,Tn:()=>D.Tn}),e(44804);var i=e(79352),D=e(84425)},79352:(He,de,e)=>{"use strict";e.d(de,{B:()=>fe});var n=e(3786),i=e(80226),D=e(76491),m=e(79441),y=e(81134),T=e(90425),r=e(12702),a=e(61486),s=e(85816),p=e(79902),l=e(96330),t=e(18293),w=e(9170),h=e(92597),u=e(71435),o=e(53466),f=e(33927),c=e(202),I=e(6484),G=e(84425),x=e(67067),E=e(55302),P=e(7366),v=e(27846),O=e(57674),C=e(68590),_=e(2316),F=e(90470),V=e(43124),b=e(55502),B=e(22213),U=e(71258),A=e(73159),S=e(60086),Y=e(22573),se=e(73341);let fe=(()=>{class ${constructor(me,ye,ue,X,j,K,Z,L,W,te,ie,Q,k,oe,N){this.localeService=me,this.nesEntitlementService=ye,this.systemInfoService=ue,this.telemetryService=X,this.gridService=j,this.telemetryUtilService=K,this.pushNotificationService=Z,this.dialog=L,this.router=W,this.gfnSdkService=te,this.idmService=ie,this.offDeviceLinkService=Q,this.refreshUiService=oe,this.platform$=new i.t(1),this.userMembership$=new D.X(G.Vv),this.userMembership=Object.assign({},G.Vv),this.isManualLogin=null,this.autoRefreshInterval=432e5,this.refreshEntitlement$=null,this.subscriptionProcessed$=new m.xQ,this.userEntitlementSubscription=null,this.logger=k.getLogger("EcommerceService"),this.featureEnabledInConfig=N.featureEnablement.ecommerce,this.openLinksOffDevice=!!N.featureEnablement.openLinksOffDevice,this.detectPlatform(),this.redirectUrl=N.redirect.serverUrl,this.redirectEnv=N.redirect.environment,this.clientVersion=(0,c.get)(N,"build.version"),this.redirectEnvMap=new Map,this.buildRedirectionEnvMap()}initialize(){this.checkUserMembershipStatus(),this.initPushNotifications()}buildRedirectionEnvMap(){this.redirectEnvMap.set(G.w1.Development,"d"),this.redirectEnvMap.set(G.w1.Staging,"s"),this.redirectEnvMap.set(G.w1.Preview,"w"),this.redirectEnvMap.set(G.w1.Production,"p")}listenSubscriptionRefreshNotification(){return this.refreshUiService.subscriptionRefresh$.pipe((0,s.zg)(me=>(this.logger.info("Refresh Subscription",null==me?void 0:me.source),this.checkUsersEntitlement(!0))))}initPushNotifications(){this.refreshUiService.enablePushNotificationFromPNS$.pipe((0,p.w)(me=>me?this.listenSubscriptionRefreshNotification():this.pushNotificationService.registerPushNotification(E.oW.SUBSCRIPTION_CHANGE).pipe((0,s.zg)(ye=>this.checkUsersEntitlement(!0))))).subscribe()}checkUserMembershipStatus(){this.idmService.accountStatusChanged.pipe((0,l.f)(this.gridService.vpcId$.pipe((0,t.K)(()=>(0,y.of)(null)))),(0,w.h)(me=>me.length>0),(0,s.zg)(me=>(me.length&&(this.user=(0,c.last)(me)),this.logger.info("user account change received authentication status:  ",this.user.isAuthenticated),this.userMembership=Object.assign({},G.Vv),this.user.isAuthenticated||(this.userMembership.membershipStatus=G.Tn.LoggedOut),this.logger.info("ecom state config: ",this.featureEnabledInConfig),this.userMembership.eComFeatureEnabled=this.featureEnabledInConfig,this.checkUsersEntitlement())),(0,t.K)(me=>(this.logger.error("Error in get userinfo and affiliate status: ",me),(0,y.of)(null)))).subscribe()}checkUsersEntitlement(me=!1){const ye=(0,v.MA)(this.router.url),ue=!me&&ye&&!this.isManualLogin;return this.userMembership.membershipStatus===G.Tn.LoggedOut?this.getClientResolutions(ye).pipe((0,s.zg)(X=>(this.logger.info("Got ClientResolutions: ",X),this.userMembership.unEntitledUserResolutions=X,this.userMembership$.next(this.userMembership),(0,y.of)(null)))):(this.userEntitlementSubscription&&(this.userEntitlementSubscription.unsubscribe(),this.userEntitlementSubscription=null,this.subscriptionProcessed$&&(this.subscriptionProcessed$.complete(),this.subscriptionProcessed$=null,this.subscriptionProcessed$=new m.xQ)),this.userEntitlementSubscription=this.nesEntitlementService.getUserEntitlement(this.user,{useCache:ue,cacheLifetimeOverride:ye?-1:void 0}).pipe((0,h.d)(1),(0,s.zg)(X=>{if(this.userMembership.membershipStatus===G.Tn.LoggedOut)return this.logger.info("user subscription revolved for last user"),T.C;const K=(0,n._T)(X,["product"]);return this.logger.info("user subscription: ",K),this.userMembership.subscription=X.subscription,this.userMembership.product=X.product,(0,c.isNil)(X.subscription)?(this.userMembership.membershipStatus=G.Tn.UnEntitled,this.getClientResolutions(ye).pipe((0,s.zg)(Z=>(this.logger.info("Got ClientResolutions: ",Z),this.userMembership.unEntitledUserResolutions=Z,this.userMembership$.next(this.userMembership),this.initTimedEntitlementRefresh(),this.subscriptionProcessed$.next(X),(0,y.of)(X))))):(this.userMembership.membershipStatus=G.Tn.Entitled,this.userMembership$.next(this.userMembership),this.initTimedEntitlementRefresh(),this.subscriptionProcessed$.next(X),(0,y.of)(X))}),(0,t.K)(X=>(this.logger.error("error in fetching user entitlement: ",X),this.userMembership.membershipStatus=G.Tn.ServerError,this.userMembership$.next(this.userMembership),this.initTimedEntitlementRefresh(),this.subscriptionProcessed$.next(null),(0,y.of)(null)))).subscribe(()=>{this.refreshUiService.setContentExpiryInfo(C.Gx.Subscription),this.logger.info("User membership fetched")},X=>{this.logger.error("Error while fetched user membership. "+X)}),this.subscriptionProcessed$.asObservable())}getClientResolutions(me){return this.nesEntitlementService.getClientResolutions({useCache:!0,cacheLifetimeOverride:me?-1:void 0}).pipe((0,h.d)(1),(0,t.K)(ye=>(this.logger.error("error in fetching client resolutions: ",ye),(0,y.of)(null))))}initTimedEntitlementRefresh(){this.refreshEntitlement$&&(this.refreshEntitlement$.unsubscribe(),this.refreshEntitlement$=null),this.refreshEntitlement$=(0,r.H)(this.autoRefreshInterval).pipe((0,s.zg)(me=>(this.logger.info("auto refreshing entitlement"),this.checkUsersEntitlement())),(0,u.x)(()=>{this.refreshEntitlement$=null})).subscribe()}getUserMembership(me=!1){return me?this.checkUsersEntitlement(me).pipe((0,s.zg)(()=>this.userMembership$.asObservable())):this.userMembership$.asObservable()}refreshUsersEntitlement(){this.checkUsersEntitlement(!0).subscribe()}openAccountManagementPage(me,ye){this.openBrowserWindow(me,O.hE.GfnAccountManagement,ye,O.hD[O.hE.GfnAccountManagement])}openJoinMembershipPage(me,ye){this.openBrowserWindow(me,O.hE.GfnPcMembershipJoin,ye,O.hD[O.hE.GfnPcMembershipJoin])}openUpgradeMemberShipPage(me,ye){this.openBrowserWindow(me,O.hE.GfnPcMembershipUpgrade,ye,O.hD[O.hE.GfnPcMembershipUpgrade])}openAccountProfilePage(me,ye){this.openBrowserWindow(me,O.hE.GfnAccountManagementSSO,ye,O.hD[O.hE.GfnAccountManagementSSO])}openJoinNowDialog(me,ye=G.vq.Join,ue){var X;const j=this.telemetryService.getScreen();return me=`${me}/${x.CGJ.ScreenJoinGfnDialog}`,ye===G.vq.MaxSessionLengthExceeded&&this.gfnSdkService.isThisAGFNSDKSession()&&(ye=(null===(X=this.userMembership.subscription)||void 0===X?void 0:X.upsellOptions.betterSessionLengthProductExists)?G.vq.GaaSFreeUserCanUpgrade:G.vq.GaaSFree1HourExceeded),this.dialog.open(P.U,{autoFocus:!1,disableClose:!0,data:{isStreamerApp:(0,v.MA)(this.router.url),useCase:ye,gameLaunchScreen:j,ecomUIState:(0,c.isNil)(ue)?G.l2.InitialState:ue,getUserMembership$:this.getUserMembership(),buttonClickCallback:K=>{switch(K){case G.l2.InitialState:ye===G.vq.MaxSessionLengthExceeded||ye===G.vq.QueueLimitExceeded?this.openUpgradeMemberShipPage(j,me):this.openJoinMembershipPage(j,me)}}}})}openBrowserWindow(me,ye,ue,X){this.sendClickTelemetryForBrowserWindow(me,ye,ue);const j=Date.now();this.prepareProductMatrixURL(ye).subscribe(K=>{this.logger.info("opening browser with url: ",K),this.offDeviceLinkService.open(K,{shortUrl:X}),this.sendManageSubscriptionTelemetry(!0,me,j)},K=>{this.logger.error("Failed to open web page "+ye+" with error: ",K.message),this.sendManageSubscriptionTelemetry(!1,me,j,K.message)})}openMembershipPageAndDialog(me,ye){this.openLinksOffDevice?this.openProgressDialog(me).afterOpened().pipe((0,o.q)(1)).subscribe(()=>{null==ye||ye()}):(null==ye||ye(),setTimeout(()=>{this.openProgressDialog(me)},G.qM))}openProgressDialog(me){return this.openJoinNowDialog(me,G.vq.BridgeState,G.l2.MembershipUpdateProgress)}sendClickTelemetryForBrowserWindow(me,ye,ue){switch(ye){case O.hE.GfnAccountManagement:this.telemetryUtilService.sendClickEvent(x.lzt.ManageMembership,"",`${me}/${ue}`,!1);break;case O.hE.GfnPcMembershipJoin:this.telemetryUtilService.sendClickEvent(x.lzt.JoinGfn,"",`${me}/${ue}`,!1);break;case O.hE.GfnPcMembershipUpgrade:this.telemetryUtilService.sendClickEvent(x.lzt.Upgrade,"",`${me}/${ue}`,!1);break;case O.hE.GfnAccountManagementSSO:this.telemetryUtilService.sendClickEvent(x.lzt.AccountManagementSso,"",`${me}/${ue}`,!1)}}prepareProductMatrixURL(me){const ye=this.localeService.localeChanged.pipe((0,o.q)(1));return(0,a.aj)([ye,this.platform$]).pipe((0,f.U)(([ue,X])=>{const j={cNm:G.NV.name,env:this.redirectEnvMap.get(this.redirectEnv),Plt:X,gcV:this.clientVersion,idpId:this.user.idpId,prv:(0,c.get)(this.userMembership,"affiliateStatus.loginProviderCode")},K=new URL(this.redirectUrl+ue);return K.searchParams.append("page",me),K.searchParams.append("jso",btoa(JSON.stringify(j))),K.toString()}))}detectPlatform(){I.ng.isCefPlatform()?this.systemInfoService.getOsInformation().subscribe(me=>{this.platform$.next(me.Platform===G.u0.Mac?O.PY.Mac:O.PY.PC)}):this.platform$.next(O.PY.Browser)}sendManageSubscriptionTelemetry(me,ye,ue,X){const j=new x.$4G({clientType:this.telemetryUtilService.getClientType(),currentScreen:ye,userAction:x.Vwu.ManageECommerceSubscription,status:me?x.N3X.Success:x.N3X.ECommercePaywallLaunchError,errorDetails:X||me.toString(),totalMs:0,errorUri:"",serverErrorCode:""});this.telemetryService.push(j,ue)}}return $.\u0275fac=function(me){return new(me||$)(_.LFG(I.OL),_.LFG(F.l6),_.LFG(I.Ob),_.LFG(V.y0),_.LFG(b.r),_.LFG(x.wU6),_.LFG(E.K2),_.LFG(B.uw),_.LFG(U.F0),_.LFG(A.s),_.LFG(S.No),_.LFG(Y.qA),_.LFG(I.ed),_.LFG(C.eP),_.LFG(se.VK))},$.\u0275prov=_.Yz7({token:$,factory:$.\u0275fac,providedIn:"root"}),$})()},93615:(He,de,e)=>{"use strict";e.d(de,{t:()=>a});var n=e(6484),i=e(53466),D=e(94491),m=e(60443),y=e(2316),T=e(11635),r=e(98221);let a=(()=>{class s{constructor(l,t,w,h,u){this.localeService=l,this.loggingService=t,this.pwaService=w,this.systemInfoService=h,this.browserSupportService=u,this.url="",this.defaultUrl=m.fF.BrowserBookmark,this.shouldAvoidAddressBarUpdateFlag=!1,this.isAddressBarUrlUpdated=!1,this.isShareUrlTypeOGP=!0,this.isShareURLRequireBranch=!1,this.logger=this.loggingService.getLogger("GameShareUrlService"),this.isBrowserPlatform=n.ng.isBrowserPlatform(),this.isShareUrlTypeOGP=!(this.browserSupportService.isLocalDomain()||this.browserSupportService.isPartnerDomain()),this.isShareURLRequireBranch=this.browserSupportService.isStagingDomain(),this.initAvoidAddressBarUpdateFlag()}splitUrl(l){const t=l.split("/");let w=t[t.length-1];return w=w.replace(D.Xf,""),w=w.split(".")[0],w}updateShareUrlInfo(l,t){if(!this.isBrowserPlatform)return!1;this.gameId=l,this.assetIdentifier=t;const w=`${D.uE.GameId}=${this.gameId}`;if(this.isShareUrlTypeOGP){const h=`&${D.uE.Locale}=${this.localeService.getLocale()}`,u=t?this.splitUrl(t):"";if(this.queryParamsString=`${w}${h}${u?`&${D.uE.AssetId}=${u}`:""}`,this.isShareURLRequireBranch){const f=this.browserSupportService.getHostBranchName();this.queryParamsString=`${this.queryParamsString}${f?`&${D.uE.Branch}=${f}`:""}`}this.url=`${window.location.origin}/${D.EM.Games}?${this.queryParamsString}`}else this.queryParamsString=`${w}`,this.url=`${window.location.origin}${window.location.pathname}#/${D.eK}?${this.queryParamsString}`;return!0}initAvoidAddressBarUpdateFlag(){!this.isBrowserPlatform||(this.pwaService.onPWAModeChange.subscribe(l=>{this.shouldAvoidAddressBarUpdateFlag=l},l=>{this.logger.error("Error while setting initial value, defaulting to false"+l),this.shouldAvoidAddressBarUpdateFlag=!1}),this.systemInfoService.getSystemInfo().pipe((0,i.q)(1)).subscribe(l=>{this.isMobileSafari=(l.OSName===n.wi.IOS||l.OSName===n.wi.IPadOS)&&l.BrowserName===n.Aq.SAFARI}))}getIsAddressbarUrlUpdated(){return this.isAddressBarUrlUpdated}setShareUrlInAddressBar(){this.shouldAvoidAddressBarUpdateFlag||!this.isBrowserPlatform||(this.gameId&&-1!==this.url.indexOf(this.gameId)?(window.history.replaceState("","",this.url),this.isAddressBarUrlUpdated=!0):this.resetUrlInAddressBar())}getDeeplinkShareUrl(){return this.url}getShareInfo(l,t,w){if(!(this.gameId===l&&this.assetIdentifier===t||this.updateShareUrlInfo(l,t)))return void this.logger.error("Error while validating gameId");const u=w?`&${D.uE.UtmSource}=${w}`:"";return this.gameId?{url:`${this.url}${u}`,queryParamsString:`${this.queryParamsString}${u}`}:{url:window.location.origin,queryParamsString:""}}resetUrlInAddressBar(l){this.shouldAvoidAddressBarUpdateFlag||this.gameId!==l||!this.isBrowserPlatform||(window.history.replaceState("","",this.defaultUrl),this.isAddressBarUrlUpdated=!1)}setExitUrl(l){!this.isBrowserPlatform||(this.exitUrl=l)}setGameUrlAsExitUrl(){!this.isBrowserPlatform||(this.exitUrl=this.queryParamsString?`${m.nn.Deeplink}?${this.queryParamsString}&${D.uE.UtmSource}=${D.zV.Application}`:m.fF.DefaultRedirect)}getExitUrl(){if(this.isMobileSafari||!this.isBrowserPlatform)return m.fF.DefaultRedirect;let l;return l=this.exitUrl?this.exitUrl:this.queryParamsString?`${m.nn.Deeplink}?${this.queryParamsString}`:m.fF.DefaultRedirect,l}}return s.\u0275fac=function(l){return new(l||s)(y.LFG(n.OL),y.LFG(n.ed),y.LFG(T.nG),y.LFG(n.Ob),y.LFG(r.OA))},s.\u0275prov=y.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},80388:(He,de,e)=>{"use strict";e.d(de,{t:()=>n.t});var n=e(93615)},99296:(He,de,e)=>{"use strict";e.d(de,{Y:()=>s,u:()=>l});var n=e(3076),i=e(67067),D=e(89166),m=e(33987),y=e(2316),T=e(73341),r=e(6484),a=e(79911);let s=(()=>{class t{constructor(h,u,o,f){this.appConfig=h,this.distributedtracingUtilService=o,this.endpointFactory=f,this.logger=u.getLogger("GridSdkService");const{defaultRetries:c=0,defaultTimeBetweenRetries:g=0,defaultTimeout:I=1e4}=h.grid;this.serverInfoEndpoint=this.endpointFactory.createEndpoint({config:{maxRetries:c,timeBetweenRetries:g,timeout:I}}),this.firstFetchSet=new Set}makeUrl(h,u=this.appConfig.grid.server){return(0,n.D5)([u,this.appConfig.grid.version,h])}getSpecificServerInfo(h,u){var o;h.startsWith("http")||(h=(null===(o=this.appConfig.featureEnablement)||void 0===o?void 0:o.enablePassThru)?"http://"+h:"https://"+h);const c={includeRequestId:!0,reportRequestData:{originalService:i.v6v.Grid,serviceUseCase:i.f$p.GetSpecificServerInformation},headers:{}},g=c.reportRequestData.serviceUseCase;this.firstFetchSet.has(g)?c.headers[m.Fk.SwCacheBypass]=JSON.stringify(!0):this.firstFetchSet.add(g);const I=this.serverInfoEndpoint.get(this.makeUrl("/serverInfo",h),c);return this.distributedtracingUtilService.handleHttpEndpointSpan(I,c,D.j1.GetSpecificServerInfo,u)}}return t.\u0275fac=function(h){return new(h||t)(y.LFG(T.VK),y.LFG(r.ed),y.LFG(D.Dc),y.LFG(a.V9))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=e(56226);class l extends p.xv{constructor(w){super("Could not fetch vpcId",w)}}},82146:(He,de,e)=>{"use strict";e.d(de,{r:()=>F});var n=e(80226),i=e(42720),D=e(61486),m=e(81134),y=e(45871),T=e(90490),r=e(9170),a=e(53466),s=e(85816),p=e(33927),l=e(18293),t=e(98636),w=e(71435),h=e(20088),u=e(202),f=e(99296),c=e(33987),g=e(68590),I=e(2316),G=e(6484),x=e(73341),E=e(84934),P=e(29784),v=e(22530),O=e(62167),C=e(3076),_=e(91489);let F=(()=>{class V{constructor(B,U,A,S,Y,se,fe,$,ae,me,ye){this.loggingService=B,this.gridSdk=U,this.appConfig=A,this.serverRouting=S,this.networkConfigurationService=Y,this.zoneStorageService=se,this.nesUserInfoService=fe,this.serviceWorkerService=ae,this.gfnWebWorkerService=me,this.refreshUiService=ye,this.cachedRecommendedZone=null,this.streamingServiceUrl=null,this.hasServerInfoStreamErrored=!1,this.deeplinkZoneOverrideError$=new n.t(1),this.defaultZoneOnError=(ue,X)=>(this.logger.info(ue," : ",X),this.defaultZone$),this.logger=this.loggingService.getLogger("gfn/grid"),this.serverInfoStream=$.createStream(()=>this.requestServerInfo()),this.initServiceWorkerNotifications(),this.listenServerInfoRefreshNotification()}listenServerInfoRefreshNotification(){this.refreshUiService.serverInfoRefresh$.subscribe(B=>{this.logger.info("Refresh ServerInfo",null==B?void 0:B.source),this.refreshServerInfo()})}initServiceWorkerNotifications(){this.serviceWorkerService.swCacheUpdated.pipe((0,r.h)(B=>B.name===c.No.staleWhileRevalidate.server.cacheName),(0,a.q)(1)).subscribe(B=>{const U=this.serverInfoStream.getData();if(!U)return;const A=this.processServerInfo(B.data);(0,i.D)([this.gfnWebWorkerService.hash(U),this.gfnWebWorkerService.hash(A)]).subscribe(([S,Y])=>{Y!==S&&this.serverInfoStream.setData(A,!0)},S=>{this.logger.error("error hashing updated server info",S)})})}findZone(B,U){return(0,u.find)(B,A=>A.name===(null==U?void 0:U.value))}processServerInfo(B){if(this.logger.info("processServerInfo"),(0,u.isNil)(B))throw new Error("Server info was invalid.");const U=B.metaData,A=B.requestStatus;let S,Y,se,fe,$;if((0,u.isNil)(A))throw new Error('Bad schema in server info. Missing "requestStatus".');if(S=A.serverId,(0,u.isNil)(U))throw new Error('Bad schema in server info. Missing "metaData".');(0,u.isEmpty)(U)&&this.logger.warn("Server metadata is empty"),$=B.monitorSettings,Y=B.serverType,se=(0,u.chain)(U).filter(ye=>ye.value.startsWith("http")).map(ye=>{const ue=ye.value.replace("http://","").replace("https://","");return{name:ye.key,address:ue}}).keyBy("address").value();const ae=(0,u.find)(U,ye=>"local-region"===ye.key),me=this.findZone(se,ae);if(this.logger.info("Local region: ",me),this.streamingServiceUrl?fe={address:this.getDefaultZone(),name:this.appConfig.grid.name}:(0,u.isObject)(ae)&&!(0,u.isUndefined)(ae.value)&&(fe=this.findZone(se,ae)),!(0,u.isObject)(fe))if((0,u.isNil)(this.cachedRecommendedZone)){const ye=this.appConfig.grid;fe={name:ye.name,address:ye.server.replace("http://","").replace("https://","").replace("/","")},this.logger.error(`default zone not valid, using config zone: ${fe.name}`)}else fe=this.cachedRecommendedZone,this.logger.error(`default zone not valid, using cached zone: ${fe.name}`);return this.saveDefaultZone(fe),{vpcId:S,serverType:Y,zones:se,defaultZone:fe,monitorSettings:$,detectedLocalZone:me}}saveDefaultZone(B){this.zoneStorageService.setDefaultZone(B).subscribe(()=>u.noop,U=>this.logger.error("failed to set default zone",U))}requestServerInfo(B){let U=null;return this.nesUserInfoService.fetchUserInfoWithStreamingUrl().pipe((0,s.zg)(A=>(0,D.aj)([this.networkConfigurationService.getNetworkOverride(),this.networkConfigurationService.getCurrentCachedZone(),(0,m.of)(A)])),(0,s.zg)(([A,S,Y])=>{this.streamingServiceUrl=Y.serviceEndpoint.streamingServiceUrl;const se=this.getDefaultZone();return this.logger.info("cached zone and override Zone are:",S,A),this.cachedRecommendedZone=(0,u.isNil)(A)?(0,u.isNil)(S)?null:S:A,(0,u.isNil)(this.cachedRecommendedZone)?(this.logger.info("cachedRecommendedZone zone is null. Use new server info"),this.getServerInfo({address:this.streamingServiceUrl,name:""},U,B)):(U=this.checkIfCachedOrOverrideZoneAvailable(se,A,S),this.clearNotAvailableZones(U),U.isOverrideZoneAvailable?(this.logger.info("Override zone available in zonesList. Get serverInfo for override zone"),this.getServerInfo(A,U,B)):U.isCachedZoneAvailable?(this.logger.info("cached zone available in zonesList. Get serverInfo for cached zone"),this.getServerInfo(S,U,B)):(this.logger.info("Override or cached zone present but not available in zonesList, clearing NetworkOverride"),this.getServerInfo({address:this.streamingServiceUrl,name:""},U,B)))}))}getServerInfo(B,U,A){return this.gridSdk.getSpecificServerInfo(B.address,A).pipe((0,p.U)(S=>this.processServerInfo(S)),(0,l.K)(S=>(this.logger.error("error in fetching serverInfo",S),(null==U?void 0:U.isCachedZoneAvailable)||(null==U?void 0:U.isOverrideZoneAvailable)?(this.networkConfigurationService.deeplinkOverrideZone&&this.deeplinkZoneOverrideError$.next(!0),this.clearNotAvailableZones({isCachedZoneAvailable:!U.isCachedZoneAvailable,isOverrideZoneAvailable:!U.isOverrideZoneAvailable}),this.getServerInfo({address:this.streamingServiceUrl,name:""},U,A)):(this.hasServerInfoStreamErrored=!0,(0,y._)(S)))),(0,t.b)(S=>{this.networkConfigurationService.deeplinkOverrideZone&&this.deeplinkZoneOverrideError$.next(!1),this.refreshUiService.setContentExpiryInfo(g.Gx.ServerInfo),this.hasServerInfoStreamErrored=!1}))}checkIfCachedOrOverrideZoneAvailable(B,U,A){let S,Y;return!(0,u.isNil)(U)&&U.isInternal&&(this.logger.info("Internal override is set"),S=!0),!(0,u.isNil)(U)&&!S&&(S=B===U.defaultZone),(0,u.isNil)(A)||(Y=B===A.defaultZone),{isOverrideZoneAvailable:S,isCachedZoneAvailable:Y}}clearNotAvailableZones(B){B.isOverrideZoneAvailable?B.isCachedZoneAvailable?this.logger.info("Both override and cached zones are available in the zonelist"):(this.logger.info("Cached zone is not available in the zonelist. Clearing cached zone"),this.networkConfigurationService.clearCurrentFingerprintCachedZone().subscribe()):(this.logger.info("Override zone is not available in the zonelist. Clearing override zone"),this.networkConfigurationService.clearNetworkOverride().subscribe())}getServerProperty(B){return this.serverInfoStream.get$().pipe((0,p.U)(B))}get deeplinkZoneOverrideStatus(){return this.deeplinkZoneOverrideError$.asObservable().pipe((0,w.x)(()=>{this.deeplinkZoneOverrideError$=new n.t(1)}))}get vpcId$(){return this.getServerProperty(B=>B.vpcId).pipe((0,l.K)(B=>(0,y._)(new f.u(B))))}get defaultZone$(){return this.getProperty(B=>B.defaultZone)}get zoneList$(){return this.getProperty(B=>B.zones)}get serverType$(){return this.getProperty(B=>B.serverType)}get monitorSettings$(){return this.hasServerInfoStreamErrored?(0,m.of)(void 0):this.getProperty(B=>B.monitorSettings)}get detectedLocalZone$(){return this.getProperty(B=>B.detectedLocalZone)}getProperty(B){return this.getServerProperty(B)}getZone(B,U){return(0,T.$R)(this.zoneList$,this.defaultZone$).pipe((0,h.P)(),(0,s.zg)(A=>{const[S,Y]=A;return B.defaultZone=Y.address,this.serverRouting.getFastestRegionalZone(B,S,U).pipe((0,t.b)(se=>{this.logger.info("Got the latency based router zone: ",se),this.serverInfoStream.refresh()}))}))}getCachedZone(){return this.serverRouting.getCachedServerZone().pipe((0,s.zg)(B=>(0,u.isNil)(B)?this.defaultZoneOnError("Empty zone in cache, falling back to default zone"):(0,m.of)(B)),(0,l.K)(B=>this.defaultZoneOnError("No zone in cache, falling back to default zone",B)))}getCachedLatencies(){return this.networkConfigurationService.getCurrentCachedLatencies()}refreshServerInfo(){return this.serverInfoStream.refresh()}getDefaultZone(){return this.streamingServiceUrl?this.streamingServiceUrl.replace("http://","").replace("https://","").replace("/",""):""}}return V.\u0275fac=function(B){return new(B||V)(I.LFG(G.ed),I.LFG(f.Y),I.LFG(x.VK),I.LFG(E.m),I.LFG(P.X),I.LFG(v.W),I.LFG(O.f),I.LFG(C.O_),I.LFG(c.HR),I.LFG(_.$_),I.LFG(g.eP))},V.\u0275prov=I.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})()},55502:(He,de,e)=>{"use strict";e.d(de,{r:()=>n.r});var n=e(82146)},74316:(He,de,e)=>{"use strict";e.d(de,{o:()=>g});var n=e(45871),i=e(33927),D=e(85816),m=e(98636),y=e(18293),T=e(89166),r=e(73159),a=e(43124),s=e(4906),p=e(60443),l=e(9021),t=e(2316),w=e(6484),h=e(78778),u=e(79911),o=e(93615),f=e(43365),c=e(38998);let g=(()=>{class I{constructor(x,E,P,v,O,C,_,F,V,b){if(this.gfnSdkService=E,this.appConfig=P,this.endpointFactory=v,this.distributedtracingUtilService=O,this.telemetryService=C,this.gameShareUrlService=_,this.experienceControlService=F,this.systemInfoService=V,this.deeplinkHelperService=b,this.guestMode=!1,this.guestModeConfig=s.db,this.guestModeExitUrl="",this.guestModeStatusQueryParamKey="status",this.guestModeAllowedRedirectUrls=[],this.logger=x.getLogger("GuestModeService"),(0,p.cj)(s.uE.Nonce)){this.guestMode=!0;const B=this.deeplinkHelperService.getUpdatedPartnerId((0,p.cj)(s.uE.PartnerId))||"";this.setGuestModeConfig(B)}}getAuthConfigFromNonce(x,E,P,v){var O,C;const _={timeout:null!==(O=this.appConfig.accountLinking.defaultTimeout)&&void 0!==O?O:15e3,timeBetweenRetries:0,maxRetries:null!==(C=this.appConfig.accountLinking.defaultRetries)&&void 0!==C?C:1},F=this.endpointFactory.createEndpoint({config:_}),b=this.createRequestOptions({partnerId:E,cmsId:P,nonce:x,deviceId:v},{}),B=F.post(this.buildApiUrl("token"),b);return this.distributedtracingUtilService.handleHttpEndpointSpan(B,b,T.j1.AlsTokenExchange).pipe((0,i.U)(U=>(this.logger.info("Successfully got JWT token from ALS API"),{authType:"jwt",partnerData:"",partnerSecureData:null==U?void 0:U.partnerSecureData,token:null==U?void 0:U.token})))}buildApiUrl(x){var E;return(null===(E=this.appConfig.accountLinking)||void 0===E?void 0:E.server)+"/v2/"+x}createRequestOptions(x={},E={}){return{params:E,body:x}}get isGuestMode(){return this.guestMode}set isGuestMode(x){this.guestMode=x}get guestModeAllowedRedirectUrlsList(){return this.guestModeAllowedRedirectUrls}set guestModeAllowedRedirectUrlsList(x){this.guestModeAllowedRedirectUrls=x}markGuestModeUIFlowComplete(){this.guestMode=!1,this.guestModeConfig=s.db}getGuestModeConfig(){return this.guestModeConfig}setGuestModeConfig(x){this.guestModeConfig=s.T8[x]||s.db}getGuestModeExitUrl(){return this.guestModeExitUrl}initializeGuestModeExitUrl(x,E){this.guestModeExitUrl=(0,p.GW)(x,this.guestModeStatusQueryParamKey,E.toString())}updateGuestModeExitUrl(x){this.guestModeExitUrl=(0,p.GW)(this.guestModeExitUrl,this.guestModeStatusQueryParamKey,x.toString()),this.gameShareUrlService.setExitUrl(this.guestModeExitUrl)}isGuestAppFlow(){var x;return this.isGuestMode&&(null===(x=this.getGuestModeConfig())||void 0===x?void 0:x.isGuestAppFlow)}setAuthDataUsingNonce(x,E,P,v){return E?v?this.systemInfoService.getDeviceId().pipe((0,D.zg)(O=>this.getAuthConfigFromNonce(x,E,parseInt(P,10),O)),(0,m.b)(O=>{if(!O.token||0===O.token.length)return this.logger.error("Invalid JWT token from ALS API"),this.updateGuestModeExitUrl(s.et.GFN_Error),(0,n._)(l.cYw.Unauthorized)}),(0,y.K)(O=>(this.logger.error("Failed to fetch JWT token from ALS API",O),401===O.status?(this.updateGuestModeExitUrl(s.et.Partner_Error),(0,n._)(l.cYw.PartnerAuthFailed)):(this.updateGuestModeExitUrl(s.et.GFN_Error),(0,n._)(l.cYw.Unauthorized)))),(0,m.b)(O=>{this.gfnSdkService.setSdkClient(E,O)}),(0,D.zg)(O=>this.gfnSdkService.getAuthInfo()),(0,i.U)(O=>(O.authType===r.Gr.JWT&&(this.telemetryService.setEventsCommonData({userId:O.userId,externalUserId:O.externalUserId,idpId:O.idpId},!0),this.experienceControlService.setUserInfo({userId:a.wy.Undefined,idpId:a.wy.Undefined})),!0))):(this.logger.error("No cms-id in deeplink with nonce"),this.updateGuestModeExitUrl(s.et.Partner_Error),(0,n._)(l.cYw.Unauthorized)):(this.logger.error("partnerId is missing"),this.updateGuestModeExitUrl(s.et.Partner_Error),(0,n._)(l.cYw.Unauthorized))}}return I.\u0275fac=function(x){return new(x||I)(t.LFG(w.ed),t.LFG(r.s),t.LFG(h.V),t.LFG(u.V9),t.LFG(T.Dc),t.LFG(a.y0),t.LFG(o.t),t.LFG(f.Q6),t.LFG(w.Ob),t.LFG(c.g))},I.\u0275prov=t.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},71959:(He,de,e)=>{"use strict";e.d(de,{o:()=>n.o});var n=e(74316)},40648:(He,de,e)=>{"use strict";e.d(de,{E:()=>o});var n=e(53882),i=e(79911),D=e(43124),m=e(67067),y=e(6484),T=e(202),a=e(62558),s=e(92941),p=e(90490),l=e(81134),t=e(78778),w=e(85816),h=e(33987),u=e(2316);let o=(()=>{class f{constructor(g,I,G,x,E){this.injector=g,this.statusCodeZeroAnalyzerFactoryService=G,this.localeService=x,this.serviceWorkerService=E,this.logger=I.getLogger("http-telemetry.service"),this.reverseOriginalService=new Map,Object.keys(m.v6v).forEach(P=>{this.reverseOriginalService.set(m.v6v[P],P)}),this.reverseServiceUseCase=new Map,Object.keys(m.f$p).forEach(P=>{this.reverseServiceUseCase.set(m.f$p[P],P)}),this.reverseServiceSubUseCase=new Map,Object.keys(m.HGL).forEach(P=>{this.reverseServiceSubUseCase.set(m.HGL[P],P)}),this.pendingNetworkResponseMap=new Map}getStatusCodeZeroAnalyzer(){var g;if(this.statusCodeZeroAnalyzer)return this.statusCodeZeroAnalyzer;const I=null===(g=this.injector.get(t.V))||void 0===g?void 0:g.statusCodeZeroAnalyzerConfig;return this.statusCodeZeroAnalyzer=this.statusCodeZeroAnalyzerFactoryService.createAnalyzer(I),this.statusCodeZeroAnalyzer}sendRemoteConfigTelemetry(){try{const I=this.injector.get(a.s).getCachedError();I&&(this.logger.info("Sending remote config failure telemetry"),this.sendHttpFailureEvent(I))}catch(g){this.logger.error("error trying to send remote config telemetry",g)}}initialize(){this.logger.info("Initializing Http Telemetry Service"),i.ay.httpErrorEvents$().subscribe(g=>{this.sendHttpFailureEvent(g)}),i.ay.httpSuccessEvents$().subscribe(g=>{this.sendHTTPSuccessEvent(g)}),this.sendRemoteConfigTelemetry(),this.sendHTTPGetCallsTelemetry(),this.serviceWorkerService.networkResponseReceived.subscribe(g=>{this.handleNetworkResponseReceived(g)},s.Z)}handleNetworkResponseReceived(g){const I=g.requestId;if(this.pendingNetworkResponseMap.has(I)){const G=this.pendingNetworkResponseMap.get(I);if(this.pendingNetworkResponseMap.delete(I),g.responseStatusCode<=0||g.responseStatusCode>=400){const x=G.httpSuccessEvent.parameters,E=new m.MjV({destinationIp:x.destinationIp,serviceSubUseCase:x.serviceSubUseCase,sourceComponent:x.sourceComponent,serviceUseCase:x.serviceUseCase,originalService:x.originalService,xRequestId:x.xRequestId,url:x.url,retryCount:x.retryCount,wasSWCacheBypassed:x.wasSWCacheBypassed,networkErrorCode:String(g.responseStatusCode)});this.telemetryService.push(E)}else G.httpSuccessEvent.parameters.durationMs=g.responseReceivedTimeMs-G.requestStartTime,this.telemetryService.push(G.httpSuccessEvent)}}sendHTTPGetCallsTelemetry(){!y.ng.isBrowserPlatform()||(y.OA.retrySubject.subscribe(g=>{this.updateAndSendTelemetry(g,m.f$p.FetchJSFile)}),this.localeService.getLocaleDownloadRetryTelemetryData().subscribe(g=>{this.updateAndSendTelemetry(g,m.f$p.FetchLocaleJson)}))}updateAndSendTelemetry(g,I){const G={includeRequestId:!1,reportRequestData:{originalService:m.v6v.AwsS3,serviceUseCase:I,serviceSubUseCase:m.HGL.Other,retryCount:g.attemptCount.toString(),requestEndTime:"0",requestStartTime:"0"}};if(g.isSuccess){const E={response:new n.Zn({status:200,url:g.fileName}),options:G};this.sendHTTPSuccessEvent(E)}else this.sendHttpFailureEvent({response:{url:g.fileName,status:404},options:G})}getRetryCount(g){return(0,T.isNil)(g)||(0,T.isNil)(g.retryCount)?0:parseInt(g.retryCount,10)}getSWCacheBypassInfo(g){let G,I=m.wye.UNDEFINED;return g.headers&&g.headers[h.Fk.SwCacheBypass]&&(G=g.headers[h.Fk.SwCacheBypass],I=G===JSON.stringify(!0)?m.wye.TRUE:m.wye.FALSE),{swCacheBypassHeaderValue:G,wasSWCacheBypassed:I}}sendHttpFailureEvent(g){(0,T.isNil)(this.telemetryService)&&(this.telemetryService=this.injector.get(D.y0)),(0,T.isNil)(this.telemetryUtilService)&&(this.telemetryUtilService=this.injector.get(m.wU6));const I=g.response.xRequestId?g.response.xRequestId:"";(0,T.isNil)(this.telemetryService)||(0,T.isNil)(this.telemetryUtilService)?this.logger.warn("Unable to send event for failed http request: ",g.response.url):(0,p.$R)(this.telemetryService.getCommonDataObservable(),this.telemetryService.getDefaultClientConsentObserable()).pipe((0,w.zg)(G=>0!==g.response.status?(0,l.of)({statusCode:g.response.status}):this.getStatusCodeZeroAnalyzer().getFailureCode({requestUrl:g.response.url,uniqueRequestId:I}))).subscribe(G=>{const x=G.cachedDNSEntry,E=(null==x?void 0:x.destinationIp)||"",P=this.getSWCacheBypassInfo(g.options),v=new m.MjV({sourceComponent:this.telemetryUtilService.getClientType(),originalService:this.getOriginalService(g.options.reportRequestData),serviceUseCase:this.getServiceUseCase(g.options.reportRequestData),serviceSubUseCase:this.getServiceSubUseCase(g.options.reportRequestData),url:g.response.url,networkErrorCode:String(G.statusCode),destinationIp:E,xRequestId:I,retryCount:this.getRetryCount(g.options.reportRequestData),wasSWCacheBypassed:P.wasSWCacheBypassed});this.telemetryService.push(v)})}sendHTTPSuccessEvent(g){(0,T.isNil)(this.telemetryService)&&(this.telemetryService=this.injector.get(D.y0)),(0,T.isNil)(this.telemetryUtilService)&&(this.telemetryUtilService=this.injector.get(m.wU6)),(0,T.isNil)(this.telemetryService)||(0,T.isNil)(this.telemetryUtilService)?this.logger.info("Unable to send event for http success request: ",g.response.url):(0,p.$R)(this.telemetryService.getCommonDataObservable(),this.telemetryService.getDefaultClientConsentObserable()).subscribe(I=>{const G=this.getSWCacheBypassInfo(g.options),x=new m.wEN({sourceComponent:this.telemetryUtilService.getClientType(),originalService:this.getOriginalService(g.options.reportRequestData),serviceUseCase:this.getServiceUseCase(g.options.reportRequestData),serviceSubUseCase:this.getServiceSubUseCase(g.options.reportRequestData),url:g.response.url,httpStatus:g.response.status,durationMs:parseInt(g.options.reportRequestData.requestEndTime,10)-parseInt(g.options.reportRequestData.requestStartTime,10),destinationIp:"",responseData:"",xRequestId:g.options.includeRequestId?g.options.headers[i.n0.xRequestId]:"",retryCount:this.getRetryCount(g.options.reportRequestData),wasSWCacheBypassed:G.wasSWCacheBypassed});x.parameters.xRequestId&&this.serviceWorkerService.willGFNServiceWorkerHandleRequest(g.response.url,G.swCacheBypassHeaderValue)?this.pendingNetworkResponseMap.set(x.parameters.xRequestId,{httpSuccessEvent:x,requestStartTime:parseInt(g.options.reportRequestData.requestStartTime,10)}):this.telemetryService.push(x)})}getOriginalService(g){return(0,T.isNil)(g)||(0,T.isNil)(g.originalService)||(0,T.isNil)(this.reverseOriginalService.get(g.originalService))?m.v6v.Other:m.v6v[this.reverseOriginalService.get(g.originalService)]}getServiceUseCase(g){return(0,T.isNil)(g)||(0,T.isNil)(g.serviceUseCase)||(0,T.isNil)(this.reverseServiceUseCase.get(g.serviceUseCase))?m.f$p.Other:m.f$p[this.reverseServiceUseCase.get(g.serviceUseCase)]}getServiceSubUseCase(g){return(0,T.isNil)(g)||(0,T.isNil)(g.serviceSubUseCase)||(0,T.isNil)(this.reverseServiceSubUseCase.get(g.serviceSubUseCase))?m.HGL.Other:m.HGL[this.reverseServiceSubUseCase.get(g.serviceSubUseCase)]}}return f.\u0275fac=function(g){return new(g||f)(u.LFG(u.zs3),u.LFG(y.ed),u.LFG(y.Ng),u.LFG(y.OL),u.LFG(h.HR))},f.\u0275prov=u.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},14624:(He,de,e)=>{"use strict";e.d(de,{i:()=>s});var n=e(79902),i=e(53466),D=e(85816),m=e(99533),y=e(2984),T=e(2316),r=e(6484),a=e(60086);let s=(()=>{class p{constructor(t,w,h,u){this.ipcService=t,this.idmService=h,this.bridgeService=u,this.logger=w.getLogger("shared/idm-ipc"),this.ipcService.get$(m.oI.LoginStatusChanged).pipe((0,n.w)(o=>h.refreshUser())).subscribe(()=>{this.logger.info("User refreshed successfully")},o=>{this.logger.error("Failed refresh User with error: ",o)})}sendLoginStatusChange(){this.idmService.accountStatusChanged.pipe((0,i.q)(1),(0,D.zg)(t=>this.bridgeService.executeCommand(y.Gh.Common.Ipc.LoginStatus,{data:t}))).subscribe(t=>this.logger.info("success sending LoginStatus",t),t=>this.logger.error("error sending LoginStatus",t))}}return p.\u0275fac=function(t){return new(t||p)(T.LFG(m.uC),T.LFG(r.ed),T.LFG(a.No),T.LFG(r.dF))},p.\u0275prov=T.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},683:(He,de,e)=>{"use strict";e.d(de,{dv:()=>i,KN:()=>D});var n=e(6484);const i={featureId:"",useCachedToggle:!1,defaultStarfleetStatus:!1,toggleRefreshTime:864e5},D={userId:"",externalId:"",idpId:"",displayName:"",isAuthenticated:!1,technicalConsent:n.p6.None,behavioralConsent:n.p6.None}},60867:(He,de,e)=>{"use strict";e.d(de,{N:()=>I});var n=e(80226),i=e(58640),D=e(81134),m=e(90425),y=e(33927),T=e(53466),r=e(85816),a=e(6484),s=e(57674),p=e(73159),l=e(60443),t=e(683),w=e(2316),h=e(43365),u=e(57390),o=e(61481),f=e(54848),c=e(71258),g=e(73341);let I=(()=>{class G{constructor(E,P,v,O,C,_,F,V){this.experienceControlService=P,this.sharedStorageService=v,this.gfnSdkService=O,this.starfleetService=C,this.jarvisService=_,this.router=F,this.appConfig=V,this.isStreamer=!1,this._loginProvider=null,this.disableStarfleetUser=!1,this.notifyLogoutStartedSubject=new n.t(1),this.isSameTabLoginFeatureEnabled=!1,this.logger=E.getLogger("gfn/shared/idm/idmService"),this.starfleetEnabled=!1,this.idmProvider$=new n.t(1),this.isStreamer=(0,l.wI)(this.router.url),this.isSameTabLoginFeatureEnabled=this.appConfig.starfleet.sameTabLogin}get loginProvider(){return this._loginProvider}set loginProvider(E){this._loginProvider=E}initialize(E){this.disableStarfleetUser=null!=E&&E,this.updateIdmProvider(!0),this.accountStatusChanged.subscribe(P=>{this.experienceControlService.setUserInfo(Object.assign({},P)),this.experienceControlService.refreshCloudVariables()})}updateIdmProvider(E){this.starfleetEnabled=E;const P={data:"starfleet"};this.gfnSdkService.getAuthInfo().subscribe(v=>{let O=null;v.authType===p.Gr.IDM&&(O=v.authToken),this.starfleetService.initialize(!0,this.isStreamer,O),this.isStreamer&&this.starfleetService.getAuthToken().subscribe(),this.idmProvider$.next({starfleetEnabled:this.starfleetEnabled,service:this.starfleetService})}),P.data="starfleet",this.sharedStorageService.writeBlock("authProvider",P).subscribe(v=>this.logger.info("success updating authProvider: ",v),v=>this.logger.error("error in updating auth provider: ",v))}get accountStatusChanged(){return this.starfleetService.accountStatusChanged.pipe((0,y.U)(E=>this.disableStarfleetUser?t.KN:this.getUserFromStarfleet(E)))}getUserFromStarfleet(E){var P,v;return{userId:E.sub,externalId:E.external_id,idpId:E.idp_id,displayName:E.preferred_username,isAuthenticated:E.isAuthenticated,technicalConsent:(null===(P=E.consent)||void 0===P?void 0:P.trackTechnicalData)?a.p6.Full:a.p6.None,behavioralConsent:(null===(v=E.consent)||void 0===v?void 0:v.trackBehavioralData)?a.p6.Full:a.p6.None}}get userDataChanged(){return this.starfleetService.starfleetUserDataChanged.pipe((0,y.U)(E=>this.getUserChange(E)))}getUserChange(E){const P=E;return{oldUser:this.getUserFromStarfleet(P.oldStarfleetUser),newUser:this.getUserFromStarfleet(P.newStarfleetUser)}}get isUserTokenAvailable(){return this.starfleetService.isUserLoggedIn}get cachedUser(){return this.getCachedUserForStarfleet().pipe((0,y.U)(E=>{const P={data:{},expired:!0};return P.expired=E.expired,E.data&&(P.data=this.getUserFromStarfleet(E.data)),P}))}get cachedUserAndAffiliateStatus(){return(0,i.P)(()=>this.getCachedUserAndAffiliateStatusForStarfleet()).pipe((0,y.U)(E=>{const P={data:[],expired:!0};return P.expired=E.expired,E.data&&E.data.length&&(P.data.push(this.getUserFromStarfleet(E.data[0])),P.data.push(E.data[1])),P}))}getCachedUserAndAffiliateStatusForStarfleet(){return this.starfleetService.accountStatusChanged.pipe((0,T.q)(1),(0,r.zg)(E=>E.isAuthenticated?this.readStoredStarfleetUserAndAffiliateStatus(E,!0):(0,D.of)({data:[E,null],expired:!0})))}getCachedUserForStarfleet(){return this.starfleetService.accountStatusChanged.pipe((0,T.q)(1),(0,y.U)(E=>E.isAuthenticated?{data:E,expired:!1}:{data:void 0,expired:!0}))}get cachedAffiliateStatus(){return this.getCachedAffiliateStatusForStarfleet()}getCachedAffiliateStatusForStarfleet(){return this.starfleetService.accountStatusChanged.pipe((0,T.q)(1),(0,r.zg)(E=>E.isAuthenticated?this.readStoredStarfleetUserAndAffiliateStatus(E,!1):(0,D.of)({data:void 0,expired:!0})))}readStoredStarfleetUserAndAffiliateStatus(E,P){return this.sharedStorageService.readBlock(`idm_${E.sub}`).pipe((0,y.U)(v=>P?{data:[E,v],expired:!1}:{data:v,expired:!1}))}setCachedAffiliateStatus(E,P){return this.setCachedAffiliateStatusForStarfleet(E,P)}setCachedAffiliateStatusForStarfleet(E,P){return this.sharedStorageService.writeBlock(`idm_${E||a.kQ}`,P)}getAuthToken(E,P){return this.starfleetService.getAuthToken(E,P).pipe((0,y.U)(v=>({token:v})))}setIdToken(E){return this.starfleetService.createNewSessionFromIdToken(E)}login(E){return this.starfleetService.login(E)}logout(){return this.isSameTabLoginFeatureEnabled&&this.notifyLogoutStartedSubject.next(!0),this.starfleetService.logout("",this.appConfig.redirect.serverUrl,s.hE.GfnAccountManagementSSO,document.baseURI)}refreshUser(){return this.starfleetService.refreshUser().pipe((0,y.U)(E=>this.getUserFromStarfleet(E)))}getUserServiceEndpoint(E){return this.getServiceEndpointViaStarfleet(E)}getClientData(E,P){return this.starfleetService.getClientData(E,P)}setClientData(E,P,v){return this.starfleetService.setClientData(E,P,v)}appendClientData(E,P,v){return this.starfleetService.appendClientData(E,P)}deleteClientData(E,P,v){return this.starfleetService.deleteClientData(E,P)}getPushNotificationSettings(E){return this.pushNotificationSettings?(0,D.of)(this.pushNotificationSettings):this.jarvisService.getJarvisClientSettings(E).pipe((0,y.U)(P=>(this.pushNotificationSettings=this.getPushNotificationSettingsFromJarvis(P),this.pushNotificationSettings)))}getPushNotificationSettingsFromJarvis(E){var P,v,O,C,_,F;return{push_notifications:{fcm:{stage:{app_identity_key:null===(P=E.push_notifications.fcm.stage)||void 0===P?void 0:P.app_identity_key,app_id:null===(v=E.push_notifications.fcm.stage)||void 0===v?void 0:v.app_id,sender_id:null===(O=E.push_notifications.fcm.stage)||void 0===O?void 0:O.sender_id,apiKey:null===(C=E.push_notifications.fcm.stage)||void 0===C?void 0:C.apiKey,projectId:null===(_=E.push_notifications.fcm.stage)||void 0===_?void 0:_.projectId,firebaseAppId:null===(F=E.push_notifications.fcm.stage)||void 0===F?void 0:F.firebaseAppId},app_identity_key:E.push_notifications.fcm.app_identity_key,app_id:E.push_notifications.fcm.app_id,sender_id:E.push_notifications.fcm.sender_id,apiKey:E.push_notifications.fcm.apiKey,projectId:E.push_notifications.fcm.projectId,firebaseAppId:E.push_notifications.fcm.firebaseAppId}}}}getServiceEndpointViaStarfleet(E){return this.starfleetService.accountStatusChanged.pipe((0,y.U)(P=>{let v=E.gfnServiceEndpoints.find(O=>O.idpId===P.idp_id);if(!v||this.disableStarfleetUser){this.logger.info("Login provider not found with idp id, returning default provider");const O=E.defaultProvider;v=E.gfnServiceEndpoints.find(C=>C.loginProvider===O)}return{user:this.getUserFromStarfleet(P),serviceEndpoint:v}}))}get accountsUrl$(){return(0,D.of)("")}handleAuthError(E,P,v,...O){return this.starfleetService.handleAuthError(E,P,v,...O)}getLogoutInitializeNotification(){return this.isSameTabLoginFeatureEnabled?this.notifyLogoutStartedSubject.asObservable():m.C}sameTabAuthStarted(){return this.isSameTabLoginFeatureEnabled?this.starfleetService.sameTabAuthStarted():m.C}}return G.\u0275fac=function(E){return new(E||G)(w.LFG(a.ed),w.LFG(h.Q6),w.LFG(u.OA),w.LFG(p.s),w.LFG(o.DO),w.LFG(f.Vg),w.LFG(c.F0),w.LFG(g.VK))},G.\u0275prov=w.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"}),G})()},60086:(He,de,e)=>{"use strict";e.d(de,{dv:()=>D.dv,T6:()=>i,No:()=>m.N});var n=e(2316);let i=(()=>{class T{}return T.\u0275fac=function(a){return new(a||T)},T.\u0275prov=n.Yz7({token:T,factory:T.\u0275fac}),T})();var D=e(683),m=e(60867)},99533:(He,de,e)=>{"use strict";e.d(de,{oI:()=>a.oI,Mx:()=>a.Mx,uC:()=>p,vS:()=>a.vS});var n=e(8117),i=e(98636),D=e(16580),m=e(18511),y=e(202),T=e(2984),r=e(6484),a=e(15480),s=e(2316);let p=(()=>{class l extends r.Il{constructor(w,h,u){const o=h.getLogger("IpcService");super(w,o),this.logger=o,this.defaultHandlerType=r.bi.Types.HandlerEventType.IpcEvent,this.registerNewHandler(r.bi.Types.HandlerEventType.IpcEvent,f=>!0,f=>(Object.values(a.oI).includes(f.type)||this.logger.error("Unrecognized IPC type: ",f.type),f.type),f=>f.content,f=>{const c=JSON.parse(f);return((0,y.isNil)(c)||(0,y.isNil)(c.type)||c.type!==a.oI.QueueEmpty&&(0,y.isNil)(c.content))&&this.logger.error("Improperly formed IPC message received: ",f),c}),u.get$(r.Nx.IpcNewMessage).subscribe(()=>this.checkIpcMessages(),f=>{this.logger.error("Error received from nativeEventService for IpcNewMessage event: ",f)})}pushMessage(w){if((0,y.isNil)(w))throw new Error("Must be a valid message");return this.bridgeService.executeCommand(T.Gh.Common.Ipc.Push,{message:w}).pipe((0,i.b)(h=>this.logger.info(h,w)))}checkIpcMessages(){this.bridgeService.executeCommand(T.Gh.Common.Ipc.Pop).pipe((0,D.jn)(w=>(null==w?void 0:w.type)===a.oI.QueueEmpty?n.E:(0,y.isNil)(null==w?void 0:w.type)?(this.logger.error("Invalid ipc message received: ",w),n.E):this.bridgeService.executeCommand(T.Gh.Common.Ipc.Pop)),(0,m.o)(w=>(null==w?void 0:w.type)!==a.oI.QueueEmpty)).subscribe(w=>{this.processMessage(JSON.stringify(w))})}}return l.\u0275fac=function(w){return new(w||l)(s.LFG(r.dF),s.LFG(r.ed),s.LFG(r.o1))},l.\u0275prov=s.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},15480:(He,de,e)=>{"use strict";e.d(de,{oI:()=>i,Mx:()=>D,vS:()=>m});var n=e(2984),i=(()=>{return(y=i||(i={})).SelfUpdate="IPC_SELF_UPDATE_EVENT",y.RecommendedUpdate="IPC_RECOMMENDED_UPDATE_EVENT",y.RequiredUpdate="IPC_REQUIRED_UPDATE_EVENT",y.CriticalUpdate="IPC_CRITICAL_UPDATE_EVENT",y.PushNotification="IPC_PUSH_NOTIFICATION",y.LoginStatusChanged="IPC_LOGIN_STATUS_CHANGED_EVENT",y.CollectClientLogs="IPC_COLLECT_LOGS",y.UpdateExperimentContext="IPC_UPDATE_EXPERIMENT_CONTEXT",y.ProgressUpdate="IPC_PROGRESS_UPDATE",y.QueueEmpty="IPC_QUEUE_EMPTY",y.UploadExceptionInfo="IPC_UPLOAD_EXCEPTION_INFO",i;var y})(),D=(()=>{return(y=D||(D={})).ExceptionOccurred="ExceptionOccurred",y.UserFeedBack="UserFeedback",y.LoginFailure="LoginFailure",D;var y})(),m=n.Yk.Common.Ipc.IpcTargets},97987:(He,de,e)=>{"use strict";e.d(de,{AB:()=>i,YU:()=>D,$3:()=>m,wh:()=>y,Of:()=>T,ws:()=>r,mJ:()=>a,By:()=>s,Bw:()=>p,ll:()=>l,oo:()=>t,YW:()=>w,kI:()=>h,YH:()=>u});var n=e(80031),i=(()=>{return(o=i||(i={})).GameBoxArt="GAME_BOX_ART",o.GameLog="GAME_LOGO",o.HeroImage="HERO_IMAGE",o.KeyArt="KEY_ART",o.MarqueeHeroImage="MARQUEE_HERO_IMAGE",o.Screenshots="SCREENSHOTS",o.TvBanner="TV_BANNER",i;var o})(),D=(()=>{return(o=D||(D={})).Marketing="MarketingItem",o.Game="GameItem",o.Filter="FilterItem",D;var o})(),m=(()=>{return(o=m||(m={})).SilentRefresh="SilentRefresh",o.LibraryRefresh="LibraryRefresh",o.PanelRefresh="PanelRefresh",m;var o})(),y=(()=>{return(o=y||(y={})).Marquee="MARQUEE",o.Main="MAIN",o.Library="LIBRARY",y;var o})();const T={[y.Main]:n.O.PanelsMain,[y.Marquee]:n.O.PanelsMarquee,[y.Library]:n.O.PanelsLibrary},r={genreDefinitions:[],appStoreDefinitions:[],ratingDefinitions:[],filterGroupDefinitions:[]},a={id:"",name:y.Library,sections:[]};var s=(()=>{return(o=s||(s={})).Feature="FEATURED",o.Wide="WIDE",o.MyLibrary="MY_LIBRARY",o.Generic="GENERIC",s;var o})(),p=(()=>{return(o=p||(p={})).UNKNOWN="UNKNOWN",o.MOUSE="MOUSE",o.MOUSE_KEYBOARD="MOUSE_KEYBOARD",o.X_INPUT_GAMEPAD="X_INPUT_GAMEPAD",o.DIRECT_INPUT_GAMEPAD="DIRECT_INPUT_GAMEPAD",o.JOYSTICK="JOYSTICK",o.WHEEL="WHEEL",o.TOUCHSCREEN="TOUCHSCREEN",o.WII_CONTROLLER="WII_CONTROLLER",o.KINECT_CONTROLLER="KINECT_CONTROLLER",o.KEYBOARD="KEYBOARD",o.X_INPUT_GAMEPAD_PARTIAL="X_INPUT_GAMEPAD_PARTIAL",o.DIRECT_INPUT_GAMEPAD_PARTIAL="DIRECT_INPUT_GAMEPAD_PARTIAL",o.GAMEPAD="GAMEPAD",o.GAMEPAD_PARTIAL="GAMEPAD_PARTIAL",p;var o})(),l=(()=>{return(o=l||(l={})).MyLibrary="MY_LIBRARY",o.RTX="RTX",o.DeviceSupport="DEVICE_SUPPORT",o.HDR="HDR",l;var o})();const t={id:"my_library",label:"",filters:[{label:"layout.myLibrary",id:l.MyLibrary,filters:[JSON.stringify({variants:{gfn:{isInLibrary:{equals:!0}}}})]}]},w={id:"feature",label:"layout.listViewData.feature",filters:[{label:"layout.evidenceMetadata.rtx",id:l.RTX,filters:[JSON.stringify({variants:{gfn:{features:{RTX_ENABLED:{equals:!0}}}}})]}]},h={label:"settings.streamingProfiles.hdrStreaming",id:l.HDR,filters:[JSON.stringify({variants:{gfn:{features:{HDR_ENABLED:{equals:!0}}}}})]},u={id:"device_support",label:"layout.listViewData.deviceSupport",filters:[{label:"layout.listViewData.supportedGames",id:l.DeviceSupport,filters:[JSON.stringify({variants:{supportedControls:{hasOtherThan:[p.KEYBOARD,p.MOUSE,p.MOUSE_KEYBOARD]}}})]}]}},80031:(He,de,e)=>{"use strict";e.d(de,{O:()=>f,m:()=>g});var n=e(79911),i=e(61486),D=e(3076),m=e(89166),y=e(53466),T=e(85816),r=e(33987),a=e(67067),s=e(27846),p=e(12556),l=e(85831),w=e(2316),h=e(73341),u=e(60086),o=e(6484),f=(()=>{return(I=f||(f={})).Apps="apps",I.AppMetadata="appMetaData",I.StaticAppData="staticAppData",I.PanelsMain="panels/MainV2",I.PanelsMarquee="panels/Marquee",I.PanelsLibrary="panels/Library",f;var I})();const c=[f.Apps,f.PanelsMarquee,f.PanelsLibrary,f.PanelsMain];let g=(()=>{class I{constructor(x,E,P,v,O,C){this.appConfig=x,this.endpointFactory=E,this.distributedtracingUtilService=P,this.idmService=v,this.clientHeaderService=C,this.cascadePreviewToken=null,this.logger=O.getLogger("LcarsSdkService");const{defaultRetries:_,defaultTimeBetweenRetries:F,defaultTimeout:V,retryOnTimeout:b,exponentialBackoffMaxDelay:B}=x.lcars;this.queryDataEndpoint=this.endpointFactory.createEndpoint({config:{maxRetries:_,timeout:V,timeBetweenRetries:F,retryOnTimeout:b,exponentialBackoffMaxDelay:B}}),this.firstFetchSet=new Set,this.setCascadePreviewToken()}setCascadePreviewToken(){this.cascadePreviewToken=(0,s.cj)(s.S8.CascadePreviewToken),this.logger.info(this.cascadePreviewToken?`Got cascadePreviewToken: ${this.cascadePreviewToken}`:"No cascadePreviewToken in query params")}createHeader(x,E,P,v){const O=Object.assign({},E);return O["NV-Client-ID"]=this.appConfig.lcars.clientId,O["Content-Type"]="application/graphql",this.firstFetchSet.has(x)||v?O[r.Fk.SwCacheBypass]=JSON.stringify(!0):this.firstFetchSet.add(x),(null==P?void 0:P.token)&&(O[n.n0.authorization]=`GFNJWT ${P.token}`),this.appConfig.lcars.cascadeHeaderValue&&(O["NV-Cascade-Content"]=this.appConfig.lcars.cascadeHeaderValue),this.appConfig.lcars.stageHeaderValue&&(O["NV-Env"]=this.appConfig.lcars.stageHeaderValue),this.cascadePreviewToken&&(O["cache-control"]="no-cache",O[r.Fk.SwCacheBypass]=JSON.stringify(!1),O["NV-Additional"]=this.cascadePreviewToken),"dev"===this.appConfig.build.type&&"2.0.42"===this.appConfig.build.version&&(O["NV-Client-Version"]="2.0.42.51"),O}getServiceUseCase(x){switch(x){case f.AppMetadata:return a.f$p.GetAppData;case f.Apps:return a.f$p.GetApps;case f.PanelsMain:case f.PanelsMarquee:case f.PanelsLibrary:return a.f$p.GetPanel;default:return a.f$p.Other}}fetchQueryData(x,E,P,v,O){return(0,i.aj)([this.clientHeaderService.getCommonHeaders(),this.idmService.accountStatusChanged.pipe((0,y.q)(1))]).pipe((0,T.zg)(([C,_])=>{_.isAuthenticated&&c.includes(E)&&_.userId!==this.lastHashedUserId&&(this.userIdHash=(0,l.sha1)(_.userId),this.lastHashedUserId=_.userId);const F=Object.assign(E?{requestType:E}:null,_.isAuthenticated?{huId:this.userIdHash}:null,{query:x}),V={headers:this.createHeader(E,C,v,O),reportRequestData:{originalService:a.v6v.Lcars,serviceUseCase:this.getServiceUseCase(E),reportSuccessTelemetry:"true"},params:F,includeRequestId:!0},B=this.queryDataEndpoint.get((0,D.D5)([_.isAuthenticated&&E!==f.AppMetadata||_.isAuthenticated&&E===f.AppMetadata&&v?this.appConfig.lcars.serverUrl:this.appConfig.lcars.serverUrlCDN]),V);return this.distributedtracingUtilService.handleHttpEndpointSpan(B,V,m.j1.LcarsFetchQueryData,P)}))}fetchStaticDataQuery(x,E,P,v){const O=Object.assign(E?{requestType:E}:null,v?{"layout-type":v}:null,{query:x});return this.clientHeaderService.getCommonHeaders().pipe((0,T.zg)(C=>{const _={headers:this.createHeader(E,C),reportRequestData:{originalService:a.v6v.Lcars,reportSuccessTelemetry:"true"},params:O,includeRequestId:!0,includeFullResponse:!0},F=this.queryDataEndpoint.get((0,D.D5)([this.appConfig.lcars.serverUrlCDN]),_);return this.distributedtracingUtilService.handleHttpEndpointSpan(F,_,m.j1.LcarsFetchQueryData,P)}))}}return I.\u0275fac=function(x){return new(x||I)(w.LFG(h.VK),w.LFG(n.V9),w.LFG(m.Dc),w.LFG(u.No),w.LFG(o.ed),w.LFG(p.x5h))},I.\u0275prov=w.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},91991:(He,de,e)=>{"use strict";e.d(de,{SB:()=>n,rL:()=>i,Cz:()=>D});var n=(()=>((n||(n={})).DbStoreName="BrowseUxStore",n))(),i=(()=>{return(m=i||(i={})).showDesktopShortcutPrompt="showDesktopShortcutPrompt",m.showSearchTip="showSearchTip",m.showGameOwnershipPrompt="showGameOwnershipPrompt",m.skipGamepadWarningDialog="skipGamepadWarningDialog",i;var m})(),D=(()=>{return(m=D||(D={})).OverLay="over",m.Side="side",D;var m})()},4906:(He,de,e)=>{"use strict";e.d(de,{Xf:()=>D,eK:()=>m,uE:()=>y,EM:()=>T,iJ:()=>r,C6:()=>s,g7:()=>p,zV:()=>l,rm:()=>t,db:()=>h,dp:()=>c,T8:()=>g,X3:()=>I,et:()=>G,$Y:()=>x});var n=e(9021);const D="TV_BANNER_",m="deeplink";var y=(()=>{return(E=y||(y={})).Action="action",E.CmsId="cms-id",E.GameId="game-id",E.Store="store",E.Zone="zone",E.AssetId="asset-id",E.Locale="lang",E.ShowEvidencePanel="showEvidencePanel",E.SectionId="sectionId",E.Nonce="nonce",E.Redirect="redirect",E.PartnerData="partner-data",E.ExtraData="extra-data",E.UtmSource="utm_source",E.UtmCampaign="utm_campaign",E.UtmMedium="utm_medium",E.UtmTerm="utm_term",E.UtmContent="utm_content",E.PartnerId="partner-id",E.WindowedMode="windowed-mode",E.Branch="branch",y;var E})(),T=(()=>{return(E=T||(T={})).ViewGame="view-game",E.PlayGame="play-game",E.Games="games",T;var E})();const r=T.ViewGame;var a=(()=>{return(E=a||(a={})).IsViewGameEnabled="isViewGameEnabled",E.IsPlayGameEnabled="isPlayGameEnabled",E.ShowShortcutButton="showShortcutButton",E.ShowShareButton="showShareButton",E.SendDeeplinkTelemetry="sendDeeplinkTelemetry",E.GuestMode="guestMode",a;var E})();const s={[a.IsViewGameEnabled]:!0,[a.IsPlayGameEnabled]:!0,[a.ShowShareButton]:!1,[a.ShowShortcutButton]:!1,[a.SendDeeplinkTelemetry]:!1,[a.GuestMode]:{daf_guestmode_25cb5a58:{allowedRedirectUrls:["https://www.daf.com/en/sites-landing","https://www.daf.com/vealert/ride-and-drive/redirect"]},"L65LoXgut5_bAQ95JepON01jMMSYxDHB4aa_tHQC-gc":{allowedRedirectUrls:["https://www.daf.com/en/sites-landing","https://www.daf.com/vealert/ride-and-drive/redirect"]},"rbxRjW1aUSsVQyXD7SocAZ5YiX4iW1nrM0e8Q-5v-jg":{allowedRedirectUrls:["https://developer.nvidia.com/nvidia-omniverse-platform"]}}},p={[T.ViewGame]:a.IsViewGameEnabled,[T.PlayGame]:a.IsPlayGameEnabled};var l=(()=>{return(E=l||(l={})).Shortcut="shortcut",E.Application="application",E.Marquee="marquee",l;var E})();const t={[T.ViewGame]:n.oSA.ViewGame,[T.PlayGame]:n.oSA.PlayGame};var w=(()=>{return(E=w||(w={})).IsNetworkTestEnabled="isNetworkTestEnabled",E.IsUpsellAllowed="isUpsellAllowed",E.IsIGOEnabled="isIGOEnabled",E.IsSurveyFeedbackEnabled="isSurveyFeedbackEnabled",E.IsPostSessionTipsEnabled="isPostSessionTipsEnabled",E.IsStreamingTimerEnabled="isStreamingTimerEnabled",E.SwitchToLoggedInUser="switchToLoggedInUser",E.DisableCloseOnStreamExit="disableCloseOnStreamExit",E.IsGuestAppFlow="isGuestAppFlow",w;var E})();const h={[w.IsNetworkTestEnabled]:!1,[w.IsUpsellAllowed]:!1,[w.IsIGOEnabled]:!1,[w.IsSurveyFeedbackEnabled]:!1,[w.IsPostSessionTipsEnabled]:!1,[w.IsStreamingTimerEnabled]:!1,[w.SwitchToLoggedInUser]:!1,[w.DisableCloseOnStreamExit]:!1,[w.IsGuestAppFlow]:!1},o={[w.IsNetworkTestEnabled]:!1,[w.IsUpsellAllowed]:!1,[w.IsIGOEnabled]:!0,[w.IsSurveyFeedbackEnabled]:!1,[w.IsPostSessionTipsEnabled]:!1,[w.IsStreamingTimerEnabled]:!1,[w.SwitchToLoggedInUser]:!1,[w.DisableCloseOnStreamExit]:!0,[w.IsGuestAppFlow]:!1},f={[w.IsNetworkTestEnabled]:!1,[w.IsUpsellAllowed]:!1,[w.IsIGOEnabled]:!1,[w.IsSurveyFeedbackEnabled]:!1,[w.IsPostSessionTipsEnabled]:!1,[w.IsStreamingTimerEnabled]:!1,[w.SwitchToLoggedInUser]:!1,[w.DisableCloseOnStreamExit]:!1,[w.IsGuestAppFlow]:!0},c={DAF_GUESTMODE_25cb5a58:"daf_guestmode_25cb5a58",AC:"82d77512-a90b-42bf-8be9-446fb10341b5",GFN_PLAYTEST:"0F0E5E46-5F1E-42FE-BA5A-74077ED505F1"},g={[c.DAF_GUESTMODE_25cb5a58]:h,"AyLZgPglXtCGoG-lPMe0mxYoP6BH9Jva3vLeerYckFA":o,"YwuYeOqCAwvSS9_ohdam7Bn-SQv0b7rLGP2v9lAZWto":o,"7F2uPUC63HsHxn3wy51IhSmPyXMsr8Wru-mKOREmqfA":f,"nQWjDSkeCnr7RdcnYloMWGxBdMQYf1tK-PtAeiDtuqY":f,"rbxRjW1aUSsVQyXD7SocAZ5YiX4iW1nrM0e8Q-5v-jg":f},I={[c.DAF_GUESTMODE_25cb5a58]:"L65LoXgut5_bAQ95JepON01jMMSYxDHB4aa_tHQC-gc"};var G=(()=>{return(E=G||(G={}))[E.Success=0]="Success",E[E.Partner_Error=1]="Partner_Error",E[E.GFN_Error=2]="GFN_Error",E[E.Campaign_Suspended=3]="Campaign_Suspended",E[E.GFN_Error_SessionLimitReached=4]="GFN_Error_SessionLimitReached",G;var E})(),x=(()=>((x||(x={})).VDKPlayTest="vdkPlaytest",x))()},94491:(He,de,e)=>{"use strict";e.d(de,{rm:()=>D.rm,mp:()=>y,wM:()=>T,uE:()=>D.uE,gO:()=>m,$Y:()=>D.$Y,eK:()=>D.eK,EM:()=>D.EM,iJ:()=>D.iJ,Cz:()=>n.Cz,CK:()=>a,et:()=>D.et,Et:()=>i.E,pv:()=>i.p,g7:()=>D.g7,zV:()=>D.zV,Ev:()=>l,Xf:()=>D.Xf});var n=e(91991),i=e(98513),D=e(4906),m=(()=>{return(t=m||(m={})).Serenity="Serenity",t.UIPlugin="UIPlugin",m;var t})(),y=(()=>{return(t=y||(y={})).default="DEFAULT",t.fullScreen="FULLSCREEN",y;var t})(),T=(()=>{return(t=T||(T={})).zoneMaintenance="ZONE_MAINTENANCE_TIMER",t.paste="PASTE",T;var t})(),r=e(80748),a=(()=>{return(t=a||(a={})).lockState="Locked",t.readyState="Ready",t.systemUnsupportedState="System_Unsupported",a;var t})();const l=[{featureKey:r.xA.RTX_ENABLED,featureUpsellKey:r.$c.SUPPORT_RTX,supportedOnGame:!1,supportedOnSubscription:!1,canUpsell:!1,upsellToUnentitledUsers:!0,systemSupported:!0},{featureKey:r.xA.HDR_ENABLED,featureUpsellKey:r.$c.SUPPORT_HDR,supportedOnGame:!1,supportedOnSubscription:!1,canUpsell:!1,systemSupported:!0}]},98513:(He,de,e)=>{"use strict";e.d(de,{p:()=>n,E:()=>i});var n=(()=>{return(D=n||(n={}))[D.Infinity=0]="Infinity",D[D.Once=1]="Once",n;var D})(),i=(()=>{return(D=i||(i={}))[D.Play=1]="Play",D[D.Pause=2]="Pause",D[D.Resume=3]="Resume",i;var D})()},80748:(He,de,e)=>{"use strict";e.d(de,{pR:()=>i,xA:()=>m,xw:()=>y,$c:()=>T,UM:()=>r});var i=(()=>{return(a=i||(i={}))[a.Unknown=0]="Unknown",a[a.Success=1]="Success",a[a.AuthFailure=14]="AuthFailure",a[a.InviteOnly=44]="InviteOnly",a[a.UnsupportedRegion=45]="UnsupportedRegion",a[a.ZoneOutOfCapacity=51]="ZoneOutOfCapacity",a[a.RegionNotSupportedIndefinitely=52]="RegionNotSupportedIndefinitely",a[a.RegionBanned=53]="RegionBanned",a[a.RegionOnHoldForFree=54]="RegionOnHoldForFree",a[a.RegionOnHoldForPaid=55]="RegionOnHoldForPaid",i;var a})(),m=(()=>{return(a=m||(m={}))[a.UNKNOWN=0]="UNKNOWN",a[a.RTX_ENABLED=1]="RTX_ENABLED",a[a.HDR_ENABLED=2]="HDR_ENABLED",a[a.SUPPORTED_AUDIO_FORMATS=3]="SUPPORTED_AUDIO_FORMATS",a[a.IN_GAME_SETTINGS_PERSISTENCE_ENABLED=4]="IN_GAME_SETTINGS_PERSISTENCE_ENABLED",a[a.OVERRIDE_TOUCH_ENABLED=5]="OVERRIDE_TOUCH_ENABLED",a[a.ENABLE_DEBUG_TOOLS=6]="ENABLE_DEBUG_TOOLS",m;var a})(),y=(()=>{return(a=y||(y={}))[a.UNKNOWN=0]="UNKNOWN",a[a.BALANCED=1]="BALANCED",a[a.DATA_SAVER=2]="DATA_SAVER",a[a.COMPETITIVE=3]="COMPETITIVE",y;var a})(),T=(()=>{return(a=T||(T={}))[a.UNKNOWN=0]="UNKNOWN",a[a.BETTER_PRODUCT=1]="BETTER_PRODUCT",a[a.SUPPORT_IN_GAME_SETTINGS_PERSISTENCE=2]="SUPPORT_IN_GAME_SETTINGS_PERSISTENCE",a[a.HIGHER_SESSION_LENGTH=3]="HIGHER_SESSION_LENGTH",a[a.LOWER_SESSION_QUEUE_WAIT_TIME=4]="LOWER_SESSION_QUEUE_WAIT_TIME",a[a.HIGHER_FPS=5]="HIGHER_FPS",a[a.HIGHER_RESOLUTION=6]="HIGHER_RESOLUTION",a[a.SUPPORT_HDR=7]="SUPPORT_HDR",a[a.SUPPORT_RTX=8]="SUPPORT_RTX",T;var a})(),r=(()=>{return(a=r||(r={}))[a.UNKNOWN=0]="UNKNOWN",a[a.STEREO=2]="STEREO",a[a.UP_TO_5_1_SURROUND_PCM=6]="UP_TO_5_1_SURROUND_PCM",a[a.UP_TO_7_1_SURROUND_PCM=8]="UP_TO_7_1_SURROUND_PCM",r;var a})()},95027:(He,de,e)=>{"use strict";e.d(de,{zu:()=>c,_R:()=>w,PT:()=>u,pR:()=>o.pR,$e:()=>h,gM:()=>l,xA:()=>o.xA,$c:()=>o.$c,U1:()=>I,Jn:()=>G});var n=e(79911),i=e(3076),D=e(67067),m=e(89166),y=e(33987),T=e(85816),r=e(12556),a=e(2316),s=e(73341),p=e(6484);let l=(()=>{class x{constructor(P,v,O,C,_){this.appConfig=P,this.endpointFactory=v,this.distributedtracingUtilService=O,this.clientHeaderService=_,this.logger=C.getLogger("NesSdkService");const{defaultRetries:F=0,defaultTimeBetweenRetries:V=0,defaultTimeout:b=15e3}=P.nes,B={maxRetries:F,timeout:b,timeBetweenRetries:V};this.subscriptionsEndpoint=this.createEndpoint({config:B}),this.libraryOperationsEndpoint=this.createEndpoint({config:B}),this.serviceUrlEndpoint=this.createEndpoint({config:Object.assign(Object.assign({},B),{maxRetries:P.nes.serviceUrlsMaxRetries})}),this.productEndpoint=this.createEndpoint(),this.firstFetchSet=new Set}buildUrl(P,v=!1,O=!1){return(0,i.D5)(v?[this.appConfig.nes.layoutServer,this.appConfig.nes.layoutServerVersion,P]:[this.appConfig.nes.server,O?this.appConfig.nes.versionV3:this.appConfig.nes.version,P])}createEndpoint(P){return this.endpointFactory.createEndpoint(P)}createHeader(P){return{[n.n0.authorization]:`GFNJWT ${P.token}`}}createRequestOptions(P,v,O){const C={params:Object.assign({},P),includeRequestId:!0,reportRequestData:Object.assign({},v)},_=v.serviceUseCase;return C.headers={},(null==O?void 0:O.token)&&(C.headers=this.createHeader(O)),this.firstFetchSet.has(_)?C.headers[y.Fk.SwCacheBypass]=JSON.stringify(!0):this.firstFetchSet.add(_),C}createAndCallNesServerAPI(P,v,O,C,_){return this.clientHeaderService.getCommonHeaders().pipe((0,T.zg)(F=>{const V=this.createRequestOptions(Object.assign({serviceName:"gfn_pc"},O),{originalService:D.v6v.NES,serviceUseCase:v},C);Object.assign(V.headers,F),V.headers["NV-Client-ID"]=this.appConfig.lcars.clientId;const b=this.subscriptionsEndpoint.get(this.buildUrl(P,!1,!0),V);return this.distributedtracingUtilService.handleHttpEndpointSpan(b,V,m.j1.FetchSubscriptions,_)}))}getSubscriptions(P,v,O){const C=this.createRequestOptions(Object.assign({serviceName:"gfn_pc"},P),{originalService:D.v6v.Cms,serviceUseCase:D.f$p.NES_Get_Subscriptions},v),_=this.subscriptionsEndpoint.get(this.buildUrl("/subscriptions"),C);return this.distributedtracingUtilService.handleHttpEndpointSpan(_,C,m.j1.FetchSubscriptions,O)}getUserSubscription(P,v,O){return this.createAndCallNesServerAPI("/subscriptions",D.f$p.NES_Get_Subscriptions,P,v,O)}getClientResolutions(P,v){return this.createAndCallNesServerAPI("/client/resolutions",D.f$p.Other,P,null,v)}getProductInfo(P){return this.productEndpoint.get(P)}removeGameFromLibrary(P,v){return this.libraryOperationsEndpoint.delete(this.buildUrl("/cloudmatch/apps/:appId"),this.createRequestOptions(P,{originalService:D.v6v.Cms,serviceUseCase:D.f$p.NES_Uninstall},v))}getLoginProviderInfo(P,v){return this.serviceUrlEndpoint.get(this.buildUrl("/serviceUrls",!0),this.createRequestOptions(null,{originalService:D.v6v.Cms,serviceUseCase:D.f$p.NES_Get_ServiceUrls},v))}addGameToLibrary(P,v){return this.libraryOperationsEndpoint.put(this.buildUrl("/cloudmatch/apps/:appId"),this.createRequestOptions(P,{originalService:D.v6v.Cms,serviceUseCase:D.f$p.NES_Install},v))}}return x.\u0275fac=function(P){return new(P||x)(a.LFG(s.VK),a.LFG(n.V9),a.LFG(m.Dc),a.LFG(p.ed),a.LFG(r.x5h))},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();var t=e(56226);class w extends t.xv{constructor(E,P){super("Could not fetch app metadata for "+E,P)}}class h extends t.xv{constructor(E){super("Could not fetch layout",E)}}class u extends t.xv{constructor(E){super("Could not fetch appsList",E)}}var o=e(80748),c=(()=>{return(x=c||(c={})).UNAVAILABLE="UNAVAILABLE",x.AVAILABLE="AVAILABLE",x.PATCHING="PATCHING",x.SERVER_MAINTENANCE="SERVER_MAINTENANCE",c;var x})();const I={title:"mockIntegrationTile",shortName:"mockIntegrationTile",id:"12345",variants:[],images:{GAME_BOX_ART:"http://mock-box-art-url",KEY_ART:"http://mock-key-art-url",TV_BANNER:"http://wide-art-url"}},G={title:"mockSeeMoreTile",shortName:"mockSeeMoreTile",id:"123456",variants:[],images:{GAME_BOX_ART:"http://mock-box-art-url",KEY_ART:"http://mock-key-art-url",TV_BANNER:"http://wide-art-url"}}},90470:(He,de,e)=>{"use strict";e.d(de,{BP:()=>C,Fo:()=>O,l6:()=>_,JY:()=>r,fI:()=>F.f});var n=e(85816),i=e(18293),D=e(2316),m=e(95027),y=e(60086),T=e(6484);let r=(()=>{class V{constructor(B,U,A){this.nesSdk=B,this.idmService=U,this.logger=A.getLogger("NesLayoutService")}removeGame(B,U=!1){const A={appId:B};return this.idmService.getAuthToken(U).pipe((0,n.zg)(S=>this.nesSdk.removeGameFromLibrary(A,S)),(0,i.K)(S=>this.idmService.handleAuthError(S,U,this.removeGame.bind(this),B)))}addGameToLibrary(B,U=!1){const A={appId:B};return this.idmService.getAuthToken(U).pipe((0,n.zg)(S=>this.nesSdk.addGameToLibrary(A,S)),(0,i.K)(S=>this.idmService.handleAuthError(S,U,this.addGameToLibrary.bind(this),B)))}}return V.\u0275fac=function(B){return new(B||V)(D.LFG(m.gM),D.LFG(y.No),D.LFG(T.ed))},V.\u0275prov=D.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();var a=e(80226),s=e(8117),p=e(81134),l=e(45871),t=e(61486),w=e(9170),h=e(53466),u=e(17163),o=e(33927),f=e(83720),c=e(98636),g=e(202),I=e(89166),G=e(2281),x=e(33987),E=e(55502),P=e(73341),v=e(57390),O=(()=>{return(V=O||(O={}))[V.NesError=-1]="NesError",V[V.Ok=1]="Ok",V[V.InvalidDelegateToken=2]="InvalidDelegateToken",O;var V})();const C={id:null,title:null,shortDescription:null,longDescription:null,assets:null};let _=(()=>{class V{constructor(B,U,A,S,Y,se,fe,$,ae){this.nesSdk=B,this.idmService=U,this.gridService=A,this.appConfig=S,this.localeService=Y,this.sharedStorageService=se,this.serviceWorkerService=fe,this.distributedTracingUtilService=$,this.storageKeySubscription="Subscription",this.storageKeyNesResolutions="NesResolutions_v2",this.storageKeyOldNesResolutions="NesResolutions",this.clearedOldResolutions=!1,this.logger=ae.getLogger("NesEntitlementService"),this.processedSubscriptionResponse$=new a.t(1),this.initServiceWorkerNotifications()}initServiceWorkerNotifications(){this.serviceWorkerService.swCacheUpdated.pipe((0,w.h)(B=>B.name===x.No.staleWhileRevalidate.subscriptions.cacheName),(0,h.q)(1),(0,u.M)(this.idmService.accountStatusChanged),(0,n.zg)(([B,U])=>{this.logger.info("Subscription SW Cache updated, relaying updated data.",B.data);const A=new URL(B.url);if(A.searchParams.has("userId")){const S=A.searchParams.get("userId");return U.isAuthenticated&&U.userId===S?this.handleSubscriptionResponse(B.data,U):s.E}return s.E})).subscribe(B=>{this.processedSubscriptionResponse$.next(B)})}getEntitlementStatus(B,U=!1){return this.getVpcIdLocaleAndToken(B).pipe((0,n.zg)(([A,S,Y])=>{if(this.logger.info("vpcId and delegate token resolved: getEntitlementStatus ",A),(0,g.isNil)(Y))return this.logger.error("invalid delegate token"),(0,p.of)({status:O.InvalidDelegateToken});const se={languageCode:S,vpcId:A};return U?se.iBetaEnabled=!0:se.features="auto_registration",this.getSubscriptions(se,Y,B)}))}getUserEntitlement(B,U,A,S){if(null==U?void 0:U.useCache)return this.getSubscriptionSharedStorageBlock(B).pipe((0,n.zg)(Y=>{const se=Y.data;if(this.cacheIsCurrent(se,U.cacheLifetimeOverride))return this.returnSubscriptionResponse(se);if(A)return(0,l._)(S);{const fe=this.distributedTracingUtilService.startSpan(I.j1.GetEntitlementStatus);return this.getUserEntitlementFromServer(fe,B)}}));{const Y=this.distributedTracingUtilService.startSpan(I.j1.GetEntitlementStatus);return this.getUserEntitlementFromServer(Y,B)}}getClientResolutions(B){if(this.clearedOldResolutions||(this.clearedOldResolutions=!0,this.clearOldNesResolutionSharedStorageBlock()),null==B?void 0:B.useCache)return this.unEntitledResolutions?(0,p.of)(this.unEntitledResolutions):this.getNesResolutionSharedStorageBlock().pipe((0,n.zg)(U=>{const A=U.data;if((null==A?void 0:A.resolutions)&&A.resolutions.length>0&&this.cacheIsCurrent(A,B.cacheLifetimeOverride))return this.unEntitledResolutions=A.resolutions,(0,p.of)(A.resolutions);{const S=this.distributedTracingUtilService.startSpan(I.j1.ClientResolutions);return this.getClientResolutionsFromServer(S)}}));{const U=this.distributedTracingUtilService.startSpan(I.j1.ClientResolutions);return this.getClientResolutionsFromServer(U)}}getUserEntitlementFromServer(B,U,A=!1){return this.getVpcIdLocaleAndToken(B,A).pipe((0,h.q)(1),(0,n.zg)(([S,Y,se])=>{if(this.logger.info("vpcId and delegate token resolved ",S),(0,g.isNil)(se))return this.logger.error("invalid auth token"),(0,l._)("failed to get auth token");const fe={languageCode:Y,vpcId:S,userId:U.userId};return B.setTag(I.NI.VpcId,S),B.setTag(I.NI.Locale,Y),this.nesSdk.getUserSubscription(fe,se,B).pipe((0,n.zg)($=>this.handleSubscriptionResponse($,U)),(0,n.zg)($=>(this.processedSubscriptionResponse$.next($),this.distributedTracingUtilService.closeSpan(B),this.processedSubscriptionResponse$.asObservable())),(0,i.K)($=>this.idmService.handleAuthError($,A,this.getUserEntitlementFromServer.bind(this),B,U)))}),(0,i.K)(S=>(B.setTag(I.NI.Error,!0),this.distributedTracingUtilService.closeSpan(B),this.handleServerErrorResponse(S,U))))}handleServerErrorResponse(B,U){return this.getUserEntitlement(U,{useCache:!0},!0,B)}handleSubscriptionResponse(B,U){const A=B.requestStatus.statusCode;switch(A){case m.pR.InviteOnly:case m.pR.RegionBanned:case m.pR.RegionNotSupportedIndefinitely:case m.pR.RegionOnHoldForFree:case m.pR.RegionOnHoldForPaid:case m.pR.UnsupportedRegion:case m.pR.ZoneOutOfCapacity:case m.pR.Success:if(!(0,g.isNil)(B.subscription)&&!(0,g.isNil)(B.subscription.productUri))return this.nesSdk.getProductInfo(B.subscription.productUri).pipe((0,o.U)(S=>Object.assign({product:S},B)),(0,i.K)(S=>(this.logger.error("failed to get product info: ",S),(0,p.of)(Object.assign({product:C},B)))),(0,n.zg)(S=>(this.setSubscriptionSharedStorageBlock(S,U),this.returnSubscriptionResponse(S))));{const S=Object.assign({product:C},B);return this.setSubscriptionSharedStorageBlock(S,U),this.returnSubscriptionResponse(S)}default:return this.logger.error("failed to fetch user entitlement with error: ",A),(0,l._)("failed to get entitlement")}}returnSubscriptionResponse(B){const U=(0,g.omit)(B,"cacheRefreshDate");return(0,p.of)(U)}getVpcIdLocaleAndToken(B,U=!1){const A=this.localeService.localeChanged,S=this.gridService.vpcId$.pipe((0,f.x)());return(0,t.aj)([S,A]).pipe((0,n.zg)(([Y,se])=>this.idmService.getAuthToken(U,B).pipe((0,o.U)(fe=>[Y,se,fe||null]))))}getSubscriptions(B,U,A){return this.nesSdk.getSubscriptions(B,U,A).pipe((0,o.U)(S=>(this.logger.info("GET subscriptions response",this.subscriptionSummary(S)),this.prepareEntitlementResult(S))))}prepareEntitlementResult(B){let A;return A=(0,g.get)(B,"requestStatus.statusCode")===m.pR.Success&&(0,g.isArray)(B.subscriptions)&&B.subscriptions.length>=1?O.Ok:O.NesError,Object.assign({status:A},B)}subscriptionSummary(B){const U=(0,g.get)(B,"requestStatus.statusCode",null),A=(0,g.first)(B.subscriptions);return`status: ${U} | plan id: ${(0,g.get)(A,"product.id",null)} | cancelled: ${(0,g.get)(A,"isCancellationRequested",null)} | renewal: ${(0,g.get)(A,"renewalDate",null)}`}getSubscriptionSharedStorageBlock(B){return this.sharedStorageService.readBlock(this.getSubscriptionStorageKey(B)).pipe((0,n.zg)(U=>(0,p.of)(U||{})))}setSubscriptionSharedStorageBlock(B,U){this.updateExperimentRefreshDate(B);const A={data:B};this.sharedStorageService.writeBlock(this.getSubscriptionStorageKey(U),A).subscribe(S=>{this.logger.verbose(`write status to shared storage: ${S}`)},S=>{this.logger.error("Error while writing to shared storage",S)})}updateExperimentRefreshDate(B){return B.cacheRefreshDate=new Date,B}getSubscriptionStorageKey(B){return this.storageKeySubscription+"_"+(B&&B.isAuthenticated?B.userId:void 0)}cacheIsCurrent(B,U=this.appConfig.nes.cacheMaxAge){return-1===U?!!B:!!(B&&G(new Date).diff(G(this.getExperimentRefreshDate(B)),"minutes")<=U)}getExperimentRefreshDate(B){return B.cacheRefreshDate}getClientResolutionsFromServer(B){const U=this.localeService.localeChanged,A=this.gridService.vpcId$.pipe((0,f.x)());return(0,t.aj)([A,U]).pipe((0,n.zg)(([S,Y])=>(this.logger.info("getClientResolutionsFromServer vpcId,Locale resolved: ",S),this.nesSdk.getClientResolutions({languageCode:Y,vpcId:S},B).pipe((0,c.b)(fe=>{this.logger.info("getClientResolutions response from server: ",fe),this.unEntitledResolutions=fe,this.setNesResolutionSharedStorageBlock(fe)}),(0,i.K)(fe=>(this.logger.error("getClientResolutionsFromServer error: ",fe),(0,l._)(fe)))))),(0,i.K)(S=>(this.logger.error("getClientResolutionsFromServer vpcId/Locale error: ",S),(0,l._)(S))),(0,h.q)(1))}getNesResolutionSharedStorageBlock(){return this.sharedStorageService.readBlock(this.storageKeyNesResolutions).pipe((0,n.zg)(B=>(0,p.of)(B||{})))}clearOldNesResolutionSharedStorageBlock(){var B;null===(B=this.sharedStorageService.removeBlock(this.storageKeyOldNesResolutions))||void 0===B||B.subscribe()}setNesResolutionSharedStorageBlock(B){const U={data:{resolutions:B}};this.updateExperimentRefreshDate(U.data),this.sharedStorageService.writeBlock(this.storageKeyNesResolutions,U).subscribe(A=>{this.logger.info("write status to shared storage: ",A)},A=>{this.logger.error("Error while writing to shared storage",A)})}}return V.\u0275fac=function(B){return new(B||V)(D.LFG(m.gM),D.LFG(y.No),D.LFG(E.r),D.LFG(P.VK),D.LFG(T.OL),D.LFG(v.OA),D.LFG(x.HR),D.LFG(I.Dc),D.LFG(T.ed))},V.\u0275prov=D.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();var F=e(62167)},62167:(He,de,e)=>{"use strict";e.d(de,{f:()=>E});var n=e(45871),i=e(81134),D=e(9170),m=e(53466),y=e(33927),T=e(85816),r=e(98636),a=e(1143),s=e(18293),p=e(202),t=e(67067),w=e(20180),h=e(96767),u=e(33987),o=e(2316),f=e(95027),c=e(6484),g=e(60086),I=e(43124),G=e(1054),x=e(3076);let E=(()=>{class P{constructor(O,C,_,F,V,b,B,U){this.nesSdk=O,this.loggingService=C,this.idmService=_,this.telemetryService=F,this.oobeService=V,this.eventStreamFactory=b,this.sharedStorageCachingService=B,this.serviceWorkerService=U,this.isUserInfoAffiliate=!1,this.logger=this.loggingService.getLogger("gfn/shared/NesUserInfoService"),this.serverUrlsStream=this.eventStreamFactory.createStream(()=>this.fetchProviderInfo()),this.userInfoStream=this.eventStreamFactory.createStream(()=>this.userInfoWithStreamingUrl()),this.countryCodeStream=this.eventStreamFactory.createStream(()=>this.fetchCountryCode()),this.initServiceWorkerNotifications()}initServiceWorkerNotifications(){this.serviceWorkerService.swCacheUpdated.pipe((0,D.h)(O=>O.name===u.No.staleWhileRevalidate.serviceUrls.cacheName),(0,m.q)(1)).subscribe(O=>{this.serverUrlsStream.setData(O.data,!0)})}fetchProviderInfo(){return this.logger.info("Calling NES server urls to get affiliate information"),this.nesSdk.getLoginProviderInfo().pipe((0,y.U)(O=>this.validateLoginProviderInfo(O)))}validateLoginProviderInfo(O){if(this.logger.info("processServiceUrls"),(0,p.isNil)(O)||(0,p.isNil)(O.gfnServiceInfo)||(0,p.isNil)(O.gfnServiceInfo.loginRequired))throw new Error("Server info was invalid.");const C=O.gfnServiceInfo;if(C.loginRequired&&((0,p.isNil)(C.loginPreferredProviders)||(0,p.isEmpty)(C.loginPreferredProviders)))throw new Error('Missing "loginPreferredProviders".');return O}getServerProperty(O){return this.serverUrlsStream.get$().pipe((0,y.U)(O))}fetchUserInfoWithStreamingUrl(){return this.userInfoStream.get$()}userInfoWithStreamingUrl(){let O;return this.serverUrlsStream.get$().pipe((0,T.zg)(C=>(O=C,this.idmService.getUserServiceEndpoint(O.gfnServiceInfo))),(0,y.U)(C=>{const _=C.serviceEndpoint.loginProvider;return this.sendProviderInfoTelemetry(_,O,C.user.isAuthenticated),{user:C.user,serviceEndpoint:C.serviceEndpoint,isAffiliate:_!==O.gfnServiceInfo.defaultProvider}}),(0,r.b)(C=>{this.isUserInfoAffiliate=C.isAffiliate,this.idmService.setCachedAffiliateStatus(C.user.userId,{loginProvider:C.serviceEndpoint.loginProvider,loginProviderCode:C.serviceEndpoint.loginProviderCode,isAffiliate:C.isAffiliate}).subscribe()}))}cachedUserAndAffiliateStatus(){return this.idmService.cachedUserAndAffiliateStatus}sendProviderInfoTelemetry(O,C,_){this.oobeService.oobeDialogClosedState.pipe((0,a.O)(!1)).subscribe(()=>{const F=new t.zZ4({isAffiliateRegion:C.gfnServiceInfo.loginRequired?t.wye.TRUE:t.wye.FALSE,supportedProviders:(0,p.isEmpty)(C.gfnServiceInfo.loginPreferredProviders)?"":C.gfnServiceInfo.loginPreferredProviders.toString(),providerName:_?O:""});this.telemetryService.push(F,null,{immediateRequest:!0})})}get providerInfo$(){return this.getServerProperty(O=>(0,p.isNil)(O)||(0,p.isNil)(O.gfnServiceInfo)?null:O.gfnServiceInfo).pipe((0,s.K)(O=>(this.logger.error("failed to get provider info",O),(0,n._)(O))))}get loginPreferredProviders$(){return this.getServerProperty(O=>(0,p.isNil)(O)||(0,p.isNil)(O.gfnServiceInfo)?null:O.gfnServiceInfo.loginPreferredProviders).pipe((0,s.K)(O=>(this.logger.error("failed to get login provider",O),(0,n._)(O))))}get loginRequired$(){return this.getServerProperty(O=>!(!O||!O.gfnServiceInfo)&&O.gfnServiceInfo.loginRequired)}fetchProviderUserAction(){return this.logger.info("fetchProviderUserAction"),this.serverUrlsStream.get$().pipe((0,m.q)(1),(0,T.zg)(O=>this.idmService.getUserServiceEndpoint(O.gfnServiceInfo)),(0,y.U)(O=>(0,p.isNil)(O)?t.Vwu.LoginWithJarvisOAuth:t.Vwu.LoginWithFacebook.includes(O.serviceEndpoint.loginProvider.toUpperCase())?t.Vwu.LoginWithFacebook:t.Vwu.LoginWithGoogle.includes(O.serviceEndpoint.loginProvider.toUpperCase())?t.Vwu.LoginWithGoogle:this.isUserInfoAffiliate?t.Vwu.LoginWithAffiliate:t.Vwu.LoginWithOther))}fetchCountryCode(){return this.serverUrlsStream.get$().pipe((0,y.U)(O=>O.gfnServiceInfo.clientCountryCode),(0,s.K)(O=>(this.logger.error("Could not fetch NES login provider info for country code",O),(0,i.of)(w.S5.US))),(0,T.zg)(O=>this.sharedStorageCachingService.saveItem(h.RI.CountryCode,O)))}getCountryCode(){return this.countryCodeStream.get$()}}return P.\u0275fac=function(O){return new(O||P)(o.LFG(f.gM),o.LFG(c.ed),o.LFG(g.No),o.LFG(I.y0),o.LFG(G.H),o.LFG(x.O_),o.LFG(h.sB),o.LFG(u.HR))},P.\u0275prov=o.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})()},34277:(He,de,e)=>{"use strict";e.d(de,{Y:()=>s});var n=e(57674),i=e(2316),D=e(19211),m=e(6484),y=e(54364),T=e(6381),r=e(58283);function a(p,l){if(1&p&&(i.TgZ(0,"div",1),i.TgZ(1,"a",2),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.qZA()),2&p){const t=i.oxw();i.xp6(1),i.Q6J("href",t.serverStatusUrl,i.LSH)("shortUrl",t.serverStatusShortUrl),i.xp6(1),i.hij(" ",i.lcZ(3,3,"common.viewServerStatus")," ")}}let s=(()=>{class p{constructor(t,w){this.networkTestService=t,this.localeService=w,this.serverStatusShortUrl=n.hD[n.hE.GfnServerStatus]}ngOnInit(){this.isOnline=this.networkTestService.isSystemOnline(),this.localeSubscription=this.localeService.localeChanged.subscribe(t=>{this.serverStatusUrl=n.hE.BaseUrl+t+"&page="+n.hE.GfnServerStatus})}ngOnDestroy(){this.localeSubscription&&this.localeSubscription.unsubscribe()}}return p.\u0275fac=function(t){return new(t||p)(i.Y36(D.R),i.Y36(m.OL))},p.\u0275cmp=i.Xpm({type:p,selectors:[["gfn-server-status-link"]],decls:1,vars:1,consts:[["class","redirect-page-div",4,"ngIf"],[1,"redirect-page-div"],["target","_blank",1,"font-body2-link",3,"href","shortUrl"]],template:function(t,w){1&t&&i.YNc(0,a,4,5,"div",0),2&t&&i.Q6J("ngIf",w.isOnline)},directives:[y.O5,T.E],pipes:[r.X$],styles:[".font-size-xxxs[_ngcontent-%COMP%]{font-size:8px}.font-size-xxs[_ngcontent-%COMP%]{font-size:11px}.font-size-sm[_ngcontent-%COMP%]{font-size:12px}.font-size-sm1[_ngcontent-%COMP%]{font-size:13px}.font-size-lg[_ngcontent-%COMP%]{font-size:14px}.font-size-xl[_ngcontent-%COMP%]{font-size:16px}.font-size-xl1[_ngcontent-%COMP%]{font-size:18px}.font-size-20[_ngcontent-%COMP%]{font-size:20px}.font-size-xxl[_ngcontent-%COMP%]{font-size:24px}.font-size-32[_ngcontent-%COMP%]{font-size:32px}.font-size-xxxl[_ngcontent-%COMP%]{font-size:40px}.line-height-sm[_ngcontent-%COMP%]{line-height:.75em}.line-height-sm1[_ngcontent-%COMP%]{line-height:1em}.line-height-14[_ngcontent-%COMP%]{line-height:14px}.line-height-12[_ngcontent-%COMP%]{line-height:12px}.line-height-16[_ngcontent-%COMP%]{line-height:16px}.line-height-md[_ngcontent-%COMP%]{line-height:1.5em}.line-height-lg[_ngcontent-%COMP%]{line-height:3em}.line-height-30[_ngcontent-%COMP%]{line-height:30px}.line-height-36[_ngcontent-%COMP%]{line-height:36px}.line-height-lg1[_ngcontent-%COMP%]{line-height:40px}.font-style-italic[_ngcontent-%COMP%]{font-style:italic}.font-style-bold[_ngcontent-%COMP%]{font-weight:bold}.font-style-normal[_ngcontent-%COMP%]{font-weight:normal}.font-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.font-lowercase[_ngcontent-%COMP%]{text-transform:lowercase}.text-transform-none[_ngcontent-%COMP%]{text-transform:none}.common-ui-network-container[_ngcontent-%COMP%]{background-color:#1f2224;max-width:789px}.common-ui-network-header[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:0;height:24px}.isLtr[_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.result-icon[_ngcontent-%COMP%]{font-size:24px;color:#76b900;vertical-align:middle}.isLtr[_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.result-text-container[_ngcontent-%COMP%]{margin-bottom:6px}.result-text[_ngcontent-%COMP%]{margin-top:1px}.nw-icon[_ngcontent-%COMP%]{height:24px;line-height:24px;width:auto;speak:none;font-size:48px;font-feature-settings:normal;font-variant:normal;align-self:center;color:#fff;opacity:.9;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;vertical-align:middle}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:22px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:22px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:22px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:22px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:22px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:22px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:22px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:22px}.icon-alert-bang[_ngcontent-%COMP%]{margin:0}.common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{font-size:24px;color:#76b900}.isLtr[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.common-ui-network-container[_ngcontent-%COMP%]   .result-icon.error[_ngcontent-%COMP%]{color:#ed1c24}.warn[_ngcontent-%COMP%]{color:#ffb538}.error[_ngcontent-%COMP%]{color:#ed1c24}.common-ui-errorDetails[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#76b900}.flex-1[_ngcontent-%COMP%]{flex:1}.nv-ui-assets[_ngcontent-%COMP%]{height:140px;line-height:138px;display:flex;flex-direction:row;overflow:hidden;justify-content:center;align-items:center}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:79px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:79px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:79px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:79px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:79px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:79px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:79px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:79px}.nv-dot-icons[_ngcontent-%COMP%]{border-radius:50%;width:8px;height:8px;align-self:center;display:-webkit-inline-box;background:rgba(255,255,255,.45)}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.animated[_ngcontent-%COMP%]{animation-duration:2s;animation-iteration-count:infinite;animation-fill-mode:both;animation-delay:1s}.caption[_ngcontent-%COMP%]{display:block;width:92px;text-align:center;margin-bottom:0}.caption.zone[_ngcontent-%COMP%]{margin-top:0}.common-ui-errorDetails[_ngcontent-%COMP%]{height:72px;display:flex;justify-content:center;margin:0 24px}.connect-error-details[_ngcontent-%COMP%]{display:flex}.common-ui-network-container[_ngcontent-%COMP%]   .common-ui-resultDetails[_ngcontent-%COMP%]{height:24px;margin-bottom:30px;align-self:center;margin-top:22px}.common-ui-network-content[_ngcontent-%COMP%]{height:181px;background-color:#0000004d}.common-ui-network-content[_ngcontent-%COMP%]   .nv-button-class[_ngcontent-%COMP%]{height:84px;display:flex}.common-ui-network-content[_ngcontent-%COMP%]   .override-warning-container[_ngcontent-%COMP%]{margin-top:5px;padding:0 24px;align-items:center}.common-ui-network-content[_ngcontent-%COMP%]   span.icon-alert-circle_reg[_ngcontent-%COMP%]{font-size:11px}.common-ui-network-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px;margin-top:0}.div-table[_ngcontent-%COMP%]{display:table!important;width:101%;padding-top:24px;padding-bottom:24px;max-width:100%}.div-table-row[_ngcontent-%COMP%]{display:table-row;width:auto;clear:both;height:28px}.div-table-col[_ngcontent-%COMP%]{display:table-column;width:140px;text-align:center}.isLtr[_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%]{float:left}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col[_ngcontent-%COMP%]{--dummy0: 0;float:left}.isRtl[_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col[_ngcontent-%COMP%]{--dummy0: 0;float:right}.div-table-col-header[_ngcontent-%COMP%]{display:table-column;width:236px}.isLtr[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{float:left}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy0: 0;float:left}.isRtl[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isLtr[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:inline-block;border:16px;border-top:.1rem solid #ffb538;width:177px}.yellowstyle[_ngcontent-%COMP%]   .narrowstyle[_ngcontent-%COMP%]{width:26px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:inline-block;border:16px;border-top:.1rem solid #ed1c24;width:177px}.redstyle[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ed1c24}.yellowstyle[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ffb538}.wifi_2_4_warn[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ffb538}.network-test-warning-icons[_ngcontent-%COMP%]   md-icon[_ngcontent-%COMP%]{color:#ffb538}.network-test-warning-icons[_ngcontent-%COMP%]{display:table}.network-assets[_ngcontent-%COMP%]{display:flex}.error-details[_ngcontent-%COMP%]{display:flex;margin-top:24px}.isLtr[_nghost-%COMP%]   .error-details[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-details[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .error-details[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-details[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.common-ui-error[_ngcontent-%COMP%]{width:480px}.redirect-page-div[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:center}.redirect-page-link[_ngcontent-%COMP%]{text-decoration:none}.vertical-gap-24[_ngcontent-%COMP%]{height:24px}.isLtr[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.isLtr[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{padding-right:48px}html[dir=ltr][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy2: 0;padding-right:48px}.isRtl[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{padding-left:48px}html[dir=rtl][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy2: 0;padding-left:48px}.network-progress-fill[_ngcontent-%COMP%]{height:50px;background-color:#1f2224}.network-test-icons[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:36px}.error-dlg-content[_ngcontent-%COMP%]{margin:24px;min-height:32px}.error-dlg-buttons[_ngcontent-%COMP%]{min-height:52px}.isLtr[_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{float:right}html[dir=ltr][_ngcontent-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isRtl[_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{float:left}html[dir=rtl][_ngcontent-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{--dummy0: 0;float:left}.error-dialog-button[_ngcontent-%COMP%]{margin:8px!important}.error-icon[_ngcontent-%COMP%]{font-size:32px!important}.isLtr[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.error-icon-error-dialog[_ngcontent-%COMP%]{font-size:32px;margin-top:20px;min-width:32px;line-height:5px}.isLtr[_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.isLtr[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{margin:23px 8px 23px 23px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{--dummy: 0;margin:23px 8px 23px 23px}.isRtl[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{margin:23px 23px 23px 8px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{--dummy: 0;margin:23px 23px 23px 8px}.active[_ngcontent-%COMP%]{background:#76b900;opacity:1;width:12px;height:12px;margin-bottom:-2px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.normal[_ngcontent-%COMP%]{background:rgba(255,255,255,.45);width:8px;height:8px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.error-background-active-btn[_ngcontent-%COMP%]{background-color:#76b900}.custom-svg-icon[_ngcontent-%COMP%]{width:48px;height:auto;margin-top:-10px;margin-bottom:-15px}.network-isp-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.network-test-warning-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.nv-dot-icons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}@media (max-width: 960px){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:60px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:60px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:60px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:60px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:60px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:60px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:60px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:60px}.network-test-results[_ngcontent-%COMP%]{min-width:80vw}.div-table-col-header[_ngcontent-%COMP%]{width:30%}.div-table-col[_ngcontent-%COMP%]{width:18%}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:120px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:120px}}@media (max-width: 790px){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:48px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:48px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:48px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:48px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:48px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:48px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:48px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:48px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80px}}@media (max-width: 690px){.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:60px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:60px}}@media screen and (max-width: 834px) and (max-height: 1194px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:36px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:36px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:36px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:36px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:36px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:36px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:36px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:36px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:87px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:87px}.nv-dot-icons[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.active[_ngcontent-%COMP%]{width:10px;height:10px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.normal[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.div-table-col-header[_ngcontent-%COMP%]{width:160px}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.network-test-content[_ngcontent-%COMP%]{display:block;max-height:65vh;overflow-y:auto;overflow-x:unset}.common-ui-network-container[_ngcontent-%COMP%]{margin:0;overflow:unset}.common-ui-network-header[_ngcontent-%COMP%]{margin:0}.common-ui-network-content[_ngcontent-%COMP%]{background-color:transparent}.nv-ui-assets[_ngcontent-%COMP%]{height:100px;line-height:0;margin-bottom:24px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:0}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:0}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:0}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:0}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.network-test-icons[_ngcontent-%COMP%]{height:16px;margin-top:0}.network-isp-icons[_ngcontent-%COMP%]{align-items:center}.nv-dot-icons[_ngcontent-%COMP%]{width:4px;height:4px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.active[_ngcontent-%COMP%]{width:8px;height:8px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.normal[_ngcontent-%COMP%]{width:4px;height:4px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.custom-svg-icon[_ngcontent-%COMP%]{width:24px}.caption[_ngcontent-%COMP%]{width:fit-content;margin-top:24px;align-self:center}.common-ui-errorDetails[_ngcontent-%COMP%]{height:fit-content;display:flex;justify-content:center}.isLtr[_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{margin:0 24px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{--dummy: 0;margin:0 24px}.isRtl[_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{margin:0 24px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{--dummy: 0;margin:0 24px}.network-test-error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;justify-content:center;align-items:stretch;max-width:100%}.icon-alert-bang[_ngcontent-%COMP%]{font-size:36px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:57px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:57px}.result-text[_ngcontent-%COMP%]{margin-top:0}.network-test-results[_ngcontent-%COMP%]{padding-top:16px}.mat-tab-group[_ngcontent-%COMP%]{background-color:#0000004d}.isLtr[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.div-table-row[_ngcontent-%COMP%]{justify-content:space-between;max-width:240px}.isLtr[_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{padding-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{--dummy2: 0;padding-right:8px}.isRtl[_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{padding-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{--dummy2: 0;padding-left:8px}}@media screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.network-test-content[_ngcontent-%COMP%]{max-height:50vh}.common-ui-network-container[_ngcontent-%COMP%]{width:536px;max-height:80vh}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait){.common-ui-network-container[_ngcontent-%COMP%]{width:fit-content}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}}@media screen and (max-width: 320px) and (max-height: 568px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-left:16px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-right:16px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-right:16px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-left:16px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.active[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:1px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:1px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:1px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:1px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:1px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:1px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:1px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:1px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:40px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:40px}.result-text[_ngcontent-%COMP%]{width:70%}}"]}),p})()},26222:(He,de,e)=>{"use strict";e.d(de,{CS:()=>i,AS:()=>D,Ir:()=>y,VR:()=>T,eT:()=>s,mM:()=>p,pU:()=>h,wC:()=>u,JO:()=>o,Ih:()=>c,Q1:()=>g});var n=e(57674),i=(()=>{return(I=i||(i={})).mall="gfnpc mall_client",I.streamer="gfnpc streamer_client",I.browser="gfn_browser_client",i;var I})(),D=(()=>{return(I=D||(D={}))[I.Progress=-1]="Progress",I[I.Excellent=0]="Excellent",I[I.Poor=1]="Poor",I[I.PoorWifi_2_4=2]="PoorWifi_2_4",I[I.Bad=3]="Bad",I[I.Error=4]="Error",I[I.NA=5]="NA",D;var I})(),y=(()=>{return(I=y||(y={})).NetworkTestFailed="NetworkTestFailed",I.NetworkTestAutoRunDone="NetworkTestAutoRunDone",I.NetworkTestAutoRunTryAgain="NetworkTestAutoRunTryAgain",I.NetworkTestClosed="NetworkTestClosed",I.NetworkTestClosedOnError="NetworkTestClosedOnError",I.LBRAutoRunDone="LBRAutoRunDone",y;var I})(),T=(()=>{return(I=T||(T={})).NetworkTestFailed="NetworkTestFailed",I.NetworkTestCancelled="NetworkTestCancelled",I.RedResult="RedResult",I.StreamerNetworkError="StreamerNetworkError",I.StreamerFrameLossTimeoutError="StreamerFrameLossTimeoutError",I.None="None",T;var I})(),s=(()=>{return(I=s||(s={})).Started="Started",I.Finished="Finished",s;var I})(),p=(()=>{return(I=p||(p={})).NetworkTest="NETWORKTEST",I.Error="ERROR",p;var I})(),h=(()=>{return(I=h||(h={}))[I.NCT_R_UNKNOWN=0]="NCT_R_UNKNOWN",I[I.NCT_R_SUCCESS=1]="NCT_R_SUCCESS",I[I.NCT_R_INVALID_PARAM=2]="NCT_R_INVALID_PARAM",I[I.NCT_R_SYN_FAILED=3]="NCT_R_SYN_FAILED",I[I.NCT_R_FIN_FAILED=4]="NCT_R_FIN_FAILED",I[I.NCT_R_AUTH_FAILED=5]="NCT_R_AUTH_FAILED",I[I.NCT_R_POST_FAILED=6]="NCT_R_POST_FAILED",I[I.NCT_R_TEST_IN_PROGRESS=7]="NCT_R_TEST_IN_PROGRESS",I[I.NCT_R_CANCELED=8]="NCT_R_CANCELED",I[I.NCT_R_CAPACITY_FULL=9]="NCT_R_CAPACITY_FULL",I[I.NCT_R_SESSION_EXIST=10]="NCT_R_SESSION_EXIST",I[I.NCT_R_INVALID_DATA=11]="NCT_R_INVALID_DATA",I[I.NCT_R_SETUP_FAILED=12]="NCT_R_SETUP_FAILED",I[I.NCT_R_RETRYABLE_POST_FAILURE=13]="NCT_R_RETRYABLE_POST_FAILURE",I[I.NCT_R_BLOCK_STREAM=14]="NCT_R_BLOCK_STREAM",h;var I})(),u=(()=>{return(I=u||(u={}))[I.Success=0]="Success",u;var I})();const o={"WiFi 5.0":"5GHz","WiFi 2.4":"2.4GHz"};var c=(()=>{return(I=c||(c={}))[I.Any=0]="Any",I[I.VPN=1]="VPN",I[I.ZoneOverride=2]="ZoneOverride",I[I.Latency_more_150=3]="Latency_more_150",I[I.Latency_more_80=4]="Latency_more_80",I[I.Wifi_2_4=5]="Wifi_2_4",I[I.Wifi_2_4_or_5=6]="Wifi_2_4_or_5",I[I.Bandwidth_less_15=7]="Bandwidth_less_15",I[I.Offline=8]="Offline",c;var I})();const g=[{priority:0,text:"networkTest.youAreOfflineCheckConnection",condition:c.Offline,hasLink:!1,linkUrl:null},{priority:1,text:"networkTest.disconnectFromVpn",condition:c.VPN,hasLink:!1,linkUrl:null},{priority:2,text:"networkTest.youHaveZoveOverride",condition:c.ZoneOverride,hasLink:!1,linkUrl:null},{priority:3,text:"networkTest.farAwayFromServers",condition:c.Latency_more_150,hasLink:!0,linkUrl:n.hE.GfnServerStatus},{priority:4,text:"networkTest.wifi_2_4_Message",condition:c.Wifi_2_4,hasLink:!1,linkUrl:null},{priority:5,text:"networkTest.connectToEthernet",condition:c.Wifi_2_4_or_5,hasLink:!1,linkUrl:null},{priority:6,text:"networkTest.stopOtherStreaming",condition:c.Any,hasLink:!1,linkUrl:null},{priority:7,text:"networkTest.restartRouter",condition:c.Any,hasLink:!1,linkUrl:null},{priority:8,text:"networkTest.farAwayFromServers",condition:c.Latency_more_80,hasLink:!0,linkUrl:n.hE.GfnServerStatus},{priority:9,text:"networkTest.contactIspProvider",condition:c.Bandwidth_less_15,hasLink:!1,linkUrl:null}]},19211:(He,de,e)=>{"use strict";e.d(de,{R:()=>j});var n=e(2984),i=e(6484),D=e(202),y=e(80226),T=e(79441),r=e(76491),a=e(61486),s=e(81134),p=e(90490),l=e(45871),t=e(9170),w=e(79902),h=e(33927),u=e(85816),o=e(53466),f=e(18293),c=e(17163),g=e(1143),I=e(67202),G=e(20088),x=e(22663),E=e(98636),P=e(20882),v=e(67067),O=e(26222),C=e(71316),_=e(73159),F=e(20180),V=e(27846),b=e(57674),B=e(32839),U=e(23361),A=e(12556),S=e(2316),Y=e(60086),se=e(55502),fe=e(29784),$=e(62558),ae=e(73341),me=e(3076),ye=e(71258),ue=e(28723);let j=(()=>{class K{constructor(L,W,te,ie,Q,k,oe,N,q,Me,xe,ct,Se,Ge,St,Tt,Te,Je){this.systemInfo=W,this.streamingProfileService=te,this.idmService=ie,this.gridService=Q,this.bridgeService=k,this.networkConfigurationService=oe,this.remoteConfigurationService=N,this.appConfig=q,this.gfnSdkService=Me,this.localeService=xe,this.telemetryUtil=ct,this.ecomService=Se,this.eventStreamFactory=Ge,this.cloudVariableHelperService=St,this.router=Tt,this.clientHeaderService=Te,this.zoneStorage=Je,this.selectedZone$=new y.t(1),this.messages=new T.xQ,this.networkTestCancelled$=new T.xQ,this.retriggerPolicy$=new r.X(v.Yk9.Manual),this.startedListenToTokenRequest=!1,this.networkTestRun=!1,this.networkTestState$=new T.xQ,this.lbrState$=new T.xQ,this.networkLinksSubject=new y.t(1),this.isWebrtcNetworktestEnabledSubject=new y.t(1),this.isStreamer=!1,this.cachedWebrtcSupportedZonesList=[],this.prod="Prod",this.isWebrtcNTSupportedOnUpdatedZoneSubject=new y.t(1),this.capableSupportedResolutions=null,this.rskuFeatureToggle$=new r.X(!1),this.maxSubscriptionProfile=null,this.isInitCalled=!1,this.logger=L.getLogger("shared/network-test.service"),this.isNetworkTestInProgress=!1,this.initCurrentDisplayResolutionStream(),this.initCurrentMaxSubscriptionProfileStream(),this.initSupportedResolutionsStream(),this.initCapableResolutionsStream(),this.initRSKUFeatureToggle()}initRSKUFeatureToggle(){this.ecomService.getUserMembership().pipe((0,t.h)(L=>L.membershipStatus!==B.Tn.ServerError&&L.membershipStatus!==B.Tn.UnKnown),(0,w.w)(L=>this.cloudVariableHelperService.getFeatureToggle(U._P.ENABLE_RESERVED_SKU_FEATURES))).subscribe(L=>{this.rskuFeatureToggle$.next(L)})}initCurrentDisplayResolutionStream(){this.currentDisplayResolutionStream=this.eventStreamFactory.createStream(()=>this.streamingProfileService.getPrimaryDisplayResolution().pipe((0,h.U)(L=>({width:L.width,height:L.height,frameRate:L.fps}))))}initCurrentMaxSubscriptionProfileStream(){this.currentMaxSubscriptionProfileStream=this.eventStreamFactory.createStream(()=>(0,a.aj)([this.ecomService.getUserMembership().pipe((0,t.h)(L=>L.membershipStatus!==B.Tn.UnKnown)),this.rskuFeatureToggle$,this.streamingProfileService.init$()]).pipe((0,h.U)(([L,W,te])=>{var ie,Q;const k=(null===(Q=null===(ie=L.subscription)||void 0===ie?void 0:ie.features)||void 0===Q?void 0:Q.resolutions)?this.streamingProfileService.getSubscriptionPresetResolution(L.subscription.features.resolutions):null;return this.maxSubscriptionProfile=W&&k?{height:k.heightInPixels,width:k.widthInPixels,frameRate:k.framesPerSecond}:{height:P.yD.balanced.height,width:P.yD.balanced.width,frameRate:P.yD.balanced.fps},this.maxSubscriptionProfile})))}initSupportedResolutionsStream(){this.supportedResolutionsStream=this.eventStreamFactory.createStream(()=>(0,a.aj)([this.gridService.monitorSettings$,this.streamingProfileService.getSubscriptionResolutions(),this.cloudVariableHelperService.getFeatureToggle(U._P.RESERVED_SKU_IBETA)]).pipe((0,h.U)(([L,W,te])=>{const ie=new Map;null==W||W.forEach(oe=>{oe.isEntitled&&ie.set(`$h-${oe.heightInPixels}-w-${oe.widthInPixels}-f-${oe.framesPerSecond}`,{height:oe.heightInPixels,width:oe.widthInPixels,frameRate:oe.framesPerSecond})});const Q=new Map;if(null==L||L.forEach(oe=>{Q.set(`$h-${oe.heightInPixels}-w-${oe.widthInPixels}-f-${oe.framesPerSecond}`,{height:oe.heightInPixels,width:oe.widthInPixels,frameRate:oe.framesPerSecond})}),0===ie.size)return Array.from(Q.values());if(te)return Array.from(ie.values());let k=[];return Q.forEach((oe,N)=>{ie.has(N)&&k.push(oe)}),k.length||(k=Array.from(Q.values())),k})))}initCapableResolutionsStream(){this.capableResolutionsStream=this.eventStreamFactory.createStream(()=>(0,a.aj)([this.currentDisplayResolutionStream.get$(),this.supportedResolutionsStream.get$()]).pipe((0,u.zg)(([L,W])=>(this.logger.info("Primary display resolution: ",L.width,"x",L.height," @",L.frameRate),this.getDynamicStreamingProfilesByRatio(W,L.width/L.height,16/9).pipe((0,h.U)(Q=>(this.capableSupportedResolutions=Q,this.capableSupportedResolutions)))))))}initGxTargetConfiguration(L){if(this.isStreamer=(0,V.MA)(this.router.url),!L)return this.isWebrtcNetworkTestEnabled=!1,void this.isWebrtcNetworktestEnabledSubject.next({enabled:this.isWebrtcNetworkTestEnabled,showUI:!1});this.queryGxTarget()}initialize(){this.isInitCalled||(this.isInitCalled=!0,this.networkConfigurationService.readNetworkSessionId(),this.platform$=this.telemetryUtil.getPlatform(),this.remoteConfig$=this.remoteConfigurationService.remoteConfigFetched$,(0,a.aj)([this.webrtcNetworkTestEnabled,this.remoteConfig$]).subscribe(([L,W])=>{L.enabled&&this.configureWebrtcNetworkSettings(W)},L=>this.logger.error("Error fetching remote config and configuring Network Test settings."+L)),this.constructHelpLinks().pipe((0,h.U)(L=>{this.networkLinksSubject.next(L)})).subscribe())}get isNetworkTestRequired(){return this.networkTestRequired}set isNetworkTestRequired(L){this.networkTestRequired=L}get networkTestMessages(){return this.messages.asObservable()}get zoneName(){return this.selectedZone$}get isNetworkTestRun(){return this.networkTestRun}get networkTestState(){return this.networkTestState$.asObservable()}get lbrState(){return this.lbrState$.asObservable()}get networkLinks(){return this.networkLinksSubject.asObservable()}get webrtcNetworkTestEnabled(){return this.isWebrtcNetworktestEnabledSubject.asObservable()}get webrtcNTSupportForZone(){return this.isWebrtcNTSupportedOnUpdatedZoneSubject.asObservable()}resetNetworkTestStatus(){this.networkTestRun=!1}getRetriggerPolicy(){return this.retriggerPolicy$.asObservable()}setRetriggerPolicy(L){this.retriggerPolicy$.next(L)}setParentSpanForNetworkTest(L){this.parentSpan=L}setNetworkTestState(L){this.networkTestState$.next(L)}setLbrState(L){this.lbrState$.next(L)}sendMessage(L,W){this.messages.next({message:L,data:W})}getNetworkInfo(){return i.ng.isBrowserPlatform()?(0,s.of)({}):this.systemInfo.getNetworkInformation()}isSystemOnline(){return window.navigator.onLine}isZoneSupported(L,W){return!!this.allZonesSupported||(this.isProdZone(L)?this.cachedWebrtcSupportedZonesList.includes(null==W?void 0:W.address):this.cachedWebrtcSupportedZonesList.includes(null==L?void 0:L.address))}isUpdatedZoneSupported(L,W){return this.isWebrtcNTSupportedOnUpdatedZone=this.isZoneSupported(L,W),this.isWebrtcNTSupportedOnUpdatedZoneSubject.next(this.isWebrtcNTSupportedOnUpdatedZone),this.isWebrtcNTSupportedOnUpdatedZone}isProdZone(L){return L.name===this.prod}queryGxTarget(){const L=!!this.isStreamer,W=this.gridService.getCachedZone(),te=this.gridService.detectedLocalZone$,ie=this.cloudVariableHelperService.getFeatureToggle(U._P.BACKGROUND_WEBRTC_NETWORK_TEST,{configCheckEnabled:!0,useDifferentConfigAttributeName:!0,buildVariant:this.appConfig.build.variant,useCache:L});this.idmService.accountStatusChanged.pipe((0,t.h)(Q=>Q.isAuthenticated),(0,u.zg)(Q=>(0,p.$R)(W,ie,te))).subscribe(([Q,k,oe])=>{this.logger.info("GxTarget webrtc network test response: ",k.value);const N=this.isProdZone(Q)?oe:null;this.logger.info("Current zone:",Q,", detected local zone: ",N),k.value.enabled&&k.value.supportedZonesList&&0!==k.value.supportedZonesList.length?(this.cachedWebrtcSupportedZonesList=Object.assign([],k.value.supportedZonesList),this.allZonesSupported=!1,this.isWebrtcNetworkTestEnabled=!0,this.isWebrtcNetworktestEnabledSubject.next({enabled:this.isWebrtcNetworkTestEnabled,showUI:k.value.showUI}),this.isWebrtcNTSupportedOnUpdatedZoneSubject.next(this.isZoneSupported(Q,N))):k.value.enabled&&k.value.supportedZonesList&&0===k.value.supportedZonesList.length?(this.allZonesSupported=!0,this.isWebrtcNetworkTestEnabled=!0,this.isWebrtcNetworktestEnabledSubject.next({enabled:this.isWebrtcNetworkTestEnabled,showUI:k.value.showUI}),this.isWebrtcNTSupportedOnUpdatedZoneSubject.next(this.isWebrtcNetworkTestEnabled)):(this.isWebrtcNetworkTestEnabled=!1,this.isWebrtcNetworktestEnabledSubject.next({enabled:this.isWebrtcNetworkTestEnabled,showUI:k.value.showUI}),this.isWebrtcNTSupportedOnUpdatedZoneSubject.next(this.isWebrtcNetworkTestEnabled))},Q=>{this.logger.info("Failed to resolve gx-target cloud variable isWebRtcNetworkTestEnabled:",Q),this.isWebrtcNetworkTestEnabled=!1,this.isWebrtcNetworktestEnabledSubject.next({enabled:this.isWebrtcNetworkTestEnabled,showUI:!1}),this.isWebrtcNTSupportedOnUpdatedZoneSubject.next(!1)})}configureWebrtcNetworkSettings(L){var W;let te;const ie=null==L?void 0:L.overrides;if(null==ie?void 0:ie.isFetchedFromGXT)te={gxtOverrideData:JSON.stringify(null==ie?void 0:ie.data)},this.logger.info("Sending rconfig data from GXT to ConfigureNetworkTestSettings"),this.bridgeService.executeCommand(n.Gh.Gfn.Networktest.ConfigureNetworkTestSettings,te).subscribe();else{const Q=null===(W=L.config)||void 0===W?void 0:W.rtcNetworkTest;(null==Q?void 0:Q.remoteConfigData)?(te={remoteConfigData:{common:JSON.stringify(Q.remoteConfigData.common),rtcnetworktest:JSON.stringify(Q.remoteConfigData.rtcnetworktest),version:JSON.stringify(Q.remoteConfigData.version)}},this.logger.info("Sending Network Test rconfig: ",te),this.bridgeService.executeCommand(n.Gh.Gfn.Networktest.ConfigureNetworkTestSettings,te).subscribe()):this.logger.info("No Network Test remote overrides available.")}}getRemoteConfigForIndirectPolicy(L){let W;switch(L){case O.VR.RedResult:W=this.appConfig.featureEnablement.networkTestPolicy.isRedResultEnabled;break;case O.VR.StreamerFrameLossTimeoutError:W=this.appConfig.featureEnablement.networkTestPolicy.isFrameLossTimeoutErrorEnabled;break;default:W=!0}return W}hasMaxSubscriptionProfileUpgraded(L,W){return!i.ng.isBrowserPlatform()&&(L?W.height*W.width>L.height*L.width:W.width>=P.iq.QHD.width)}shouldNetworkTestRun(){return(0,a.aj)([this.networkConfigurationService.getCurrentFingerprintInfo(),this.currentMaxSubscriptionProfileStream.get$().pipe((0,o.q)(1))]).pipe((0,h.U)(([L,W])=>{let te=!1;return(0,D.isNil)(L)?(this.logger.info("This fingerprint is observed for the first time, on which Network Test was never run."),this.setRetriggerPolicy(v.Yk9.FingerprintChanged),te=!0):(0,D.isNil)(L.runNetworkTest)?(this.logger.info("Client upgraded to the version having the decoupling feature."),this.setRetriggerPolicy(v.Yk9.ClientUpdated),te=!0):L.runNetworkTest?(te=this.getRemoteConfigForIndirectPolicy(L.indirectNetworkTestPolicy),this.logger.info(`An indirect policy: ${L.indirectNetworkTestPolicy} got triggered. Network test will ${te?"":"not "}be run.`),te&&(L.indirectNetworkTestPolicy.startsWith("Streamer")&&(L.indirectNetworkTestPolicy=O.VR.StreamerNetworkError),this.setRetriggerPolicy(L.indirectNetworkTestPolicy))):this.hasMaxSubscriptionProfileUpgraded(null==L?void 0:L.maxSubscriptionProfile,W)&&(this.logger.info("Network test should run again as maxSubscriptionProfile has changed"),this.setRetriggerPolicy(v.Yk9.MaxSubscriptionProfileUpgraded),te=!0),te}),(0,f.K)(L=>(this.logger.error("Error trying to determine if Network Test should run, therefore run Network Test.",L),this.setRetriggerPolicy(v.Yk9.PolicyCheckFailed),(0,s.of)(!0))))}launchNetworkTest(L){return this.networkConfigurationService.getNetworkOverride().pipe((0,c.M)(this.remoteConfig$.pipe((0,g.O)({overrides:{},config:this.appConfig}))),(0,w.w)(([W,te])=>(this.appConfig=te.config,this.startedListenToTokenRequest||this.listenToTokenRequest(),this.executeNetworkTest(L).pipe((0,u.zg)(ie=>this.updateNetworkTestOverrideFlag(ie)),(0,u.zg)(ie=>this.networkTestPolicyChecks(ie)),(0,u.zg)(ie=>this.updateMaxDisplay(ie)),(0,u.zg)(ie=>this.updateNetworkTestSession(ie))))))}updateNetworkTestSession(L){return L.isSuccess?this.networkConfigurationService.setCachedNetworkSessionId(L.networkSessionId).pipe((0,I.h)(L)):(0,s.of)(L)}updateNetworkTestInfoInFingerprint(L,W,te){return L.result.result===O.pU.NCT_R_SUCCESS&&W&&te?this.networkConfigurationService.updateNetworkTestInfoInFingerprint(W,L,te):(0,s.of)(!1)}executeNetworkTest(L,W=!1){let te,ie,Q,k,oe;return(0,a.aj)([this.prepareNetworkParams(L,W),this.getResolutionForThresholdComparision()]).pipe((0,u.zg)(([N,q])=>(te=q,ie=N,this.bridgeService.executeCommand(n.Gh.Gfn.Networktest.Start,N))),(0,u.zg)(N=>{var q;return this.logger.info("Network Test result received: ",N),(null===(q=null==N?void 0:N.result)||void 0===q?void 0:q.result)===F.Rn.NCT_R_AUTH_FAILED?!1===W?(this.logger.info("Auth error, attempting to refresh credentials"),(0,l._)(F.Rn.NCT_R_AUTH_FAILED)):(0,l._)("Auth error, will not attempt to refresh credentials"):(0,s.of)(N)}),(0,u.zg)(N=>{var q;return(null===(q=null==N?void 0:N.result)||void 0===q?void 0:q.result)===F.Rn.NCT_R_SUCCESS&&(Q=this.selectThresholdForResolution(N.testResult.thresholds,te)),k=N,this.analyzeNetworkTestResults(N,Q)}),(0,u.zg)(N=>(oe=N,this.updateNetworkTestInfoInFingerprint(k,null==ie?void 0:ie.maxDisplayResolution,null==Q?void 0:Q.profile))),(0,h.U)(N=>oe),(0,f.K)(N=>N===F.Rn.NCT_R_AUTH_FAILED?this.executeNetworkTest(L,!0):(this.logger.error("Failed executing Network test command, error: ",N),(0,l._)(N))))}networkTestPolicyChecks(L){const W=this.appConfig.featureEnablement.networkTestPolicy.isRedResultEnabled&&L.analysis.networkQuality===O.AS.Bad;let te=O.VR.None;return W&&(te=O.VR.RedResult,this.logger.info("Got a red result on analysis, hence Network Test will run on next streamer launch.")),this.networkConfigurationService.updateCurrentFingerprintNetworkTestFlag(W,te).pipe((0,I.h)(L))}updateMaxDisplay(L){return this.appConfig.featureEnablement.dynamicStreamingResolution?(this.logger.info("Dynamic res. is enabled by Remote config"),L.isSuccess?this.networkConfigurationService.setCurrentFingerprintMaxDisplay(L.capableProfile).pipe((0,I.h)(L)):(0,s.of)(L)):(this.logger.info("Dynamic res. is disabled by remote config, remove maxDisplay from sharedstorage"),this.networkConfigurationService.clearCurrentFingerprintMaxDisplay().pipe((0,I.h)(L)))}updateNetworkTestOverrideFlag(L){return this.networkConfigurationService.updateNetworkOverrideNetworkTestFlag(!1).pipe((0,G.P)(),(0,I.h)(L))}startNetworkTest(L){return this.isNetworkTestInProgress=!0,this.networkTestRun=!0,this.launchNetworkTest(L).pipe((0,x.R)(this.networkTestCancelled$),(0,E.b)(W=>{this.logger.info("Network Test completed: ",W),this.isNetworkTestInProgress=!1}),(0,f.K)(W=>(this.isNetworkTestInProgress=!1,this.logger.info("Network Test failed, hence Network Test will run on next streamer launch."),this.networkConfigurationService.updateCurrentFingerprintNetworkTestFlag(!0,O.VR.NetworkTestFailed).pipe((0,u.zg)(()=>(0,l._)(W))))))}listenToTokenRequest(){this.logger.info("Network Test starts listening to auth token request: "),this.bridgeService.executeCommand(n.Gh.Gfn.Networktest.AuthTokenRequest,{}).pipe((0,u.zg)(()=>(this.logger.info("Got token REQUEST from NetworkTest SDK "),this.idmService.getAuthToken(!1,this.parentSpan))),(0,u.zg)(L=>{if((0,D.isNil)(L)||(0,D.isNil)(L.token))return this.logger.info("Jarvis failed to return token, do not send command UpdateAuthToken..."),(0,s.of)({});{const W={authToken:L.token};return this.logger.info("Sending delegate token to NT2 SDK, using command UpdateAuthToken"),this.bridgeService.executeCommand(n.Gh.Gfn.Networktest.UpdateAuthToken,W)}})).subscribe(()=>this.startedListenToTokenRequest=!0,L=>this.logger.error("Error sending oauth token to NetworkTest",L))}sendNetworkTroubleshootClickedTelemetry(L){this.telemetryUtil.sendClickEvent(v.lzt.NetworkTroubleshooting,"Network troubleshoot clicked",L)}selectThresholdForResolution(L,W){L.sort((ie,Q)=>{const k=ie.profile.height*ie.profile.width-Q.profile.height*Q.profile.width;return 0===k?ie.profile.frameRate-Q.profile.frameRate:k});let te=-1;for(let ie=L.length-1;ie>=0;ie--)if(W.width*W.height>=L[ie].profile.width*L[ie].profile.height){if(ie-1>=0){const Q=L[ie],k=L[ie-1];Q.profile.width===k.profile.width&&Q.profile.height===k.profile.width&&W.frameRate<Q.profile.frameRate&&(ie-=1)}te=ie;break}return-1===te&&(te=0),L[te]}getResolutionForThresholdComparision(){return(0,a.aj)([this.currentDisplayResolutionStream.get$().pipe((0,o.q)(1)),this.currentMaxSubscriptionProfileStream.get$().pipe((0,o.q)(1))]).pipe((0,h.U)(([L,W])=>{let te;return te=L.width<=W.width&&L.height<=W.height?L:W,te}))}roundTestResultNumbers(L){var W;return this.logger.info("Rounding of network test results"),L.testResult.downlinkBandwidth=Math.round(L.testResult.downlinkBandwidth/1e6),L.testResult.uplinkBandwidth=Math.round(L.testResult.uplinkBandwidth/1e6)||0,null===(W=L.testResult.thresholds)||void 0===W||W.forEach(te=>{te.bandwidthLimit=Math.round(te.bandwidthLimit),te.bandwidthRecommended=Math.round(te.bandwidthRecommended)}),L.testResult.packetLoss=Math.round(100*L.testResult.packetLoss)/100,L.testResult.latency=Math.round(L.testResult.latency),L.testResult.percentile99thFrameJitter=L.testResult.percentile99thFrameJitter/1e3||0,L}filterResolutionsByRatio(L,W,te){this.logger.info("filter Resolutions By Ratio, targetRatio: ",W);let ie=null==L?void 0:L.filter(Q=>W===Q.width/Q.height);return 0===(null==ie?void 0:ie.length)&&(this.logger.info("filter Resolutions By Ratio, fallbackRatio: ",te),ie=null==L?void 0:L.filter(Q=>te===Q.width/Q.height)),this.streamingProfileService.getAutoMaxBitrateValueForResolutionArray(ie)}getDynamicStreamingProfilesByRatio(L,W,te){return this.filterResolutionsByRatio(L,W,te).pipe((0,h.U)(ie=>{let Q=ie;Q.sort((N,q)=>{const Me=q.width*q.height-N.width*N.height;return 0===Me?q.fps-N.fps:Me});const k=Q[Q.length-1],oe=Q.filter(N=>30===N.fps&&N.width===k.width&&N.height===k.height);return Q=Q.filter(N=>30!==N.fps).concat(oe),Q=Q.map(N=>Object.assign(Object.assign({},N),{pixelCount:N.width*N.height})),Q=(0,D.orderBy)(Q,["pixelCount","maxBandwidth"],["desc","desc"]),this.logger.info("supportedResolutions filtered by ratio, 30fps removed + smallest resolution with 30fps: ",Q),Q}))}getCapableProfileForNetworkTest(L){return this.capableResolutionsStream.get$().pipe((0,o.q)(1),(0,h.U)(W=>{const te=W[W.length-1],ie=L.testResult.downlinkBandwidth;let Q={width:te.width,height:te.height,frameRate:te.fps};for(const oe of W)if(ie>=oe.maxBandwidth){Q={frameRate:oe.fps,height:oe.height,width:oe.width};break}return this.logger.info("estimated streaming resolution for Network Test: ",Q),Q}),(0,f.K)(W=>(this.logger.error("Error in estimating streaming resolution for network test. error:",W),this.isWebrtcNetworkTestEnabled?(this.logger.error("Returning dummy profile info for webclient"),(0,s.of)({width:0,height:0,frameRate:0})):(0,l._)("Failed estimating streaming resolution for network test"))))}analyzeNetworkTestResults(L,W,te=!0){const ie=te?this.roundTestResultNumbers(L):L;return this.logger.info("Network test analysis results are: ",ie,this.zone),this.getCapableProfileForNetworkTest(ie).pipe((0,h.U)(Q=>{let k;const oe=ie.result.result!==O.pU.NCT_R_SUCCESS?O.AS.NA:this.compareMetric(ie.testResult.downlinkBandwidth,null==W?void 0:W.bandwidthLimit,null==W?void 0:W.bandwidthRecommended,!0),N=ie.result.result!==O.pU.NCT_R_SUCCESS?O.AS.NA:this.compareMetric(ie.testResult.packetLoss,null==W?void 0:W.packetLossLimit,null==W?void 0:W.packetLossRecommended,!1),q=ie.result.result!==O.pU.NCT_R_SUCCESS?O.AS.NA:this.compareMetric(ie.testResult.latency,null==W?void 0:W.latencyLimit,null==W?void 0:W.latencyRecommended,!1),Me=ie.result.result!==O.pU.NCT_R_SUCCESS?O.AS.NA:this.calculateNetworkQuality(oe,N,q);return k={bandwidth:{measured:ie.testResult.downlinkBandwidth,limit:null==W?void 0:W.bandwidthLimit,recommended:null==W?void 0:W.bandwidthRecommended},uplinkBandwidth:ie.testResult.uplinkBandwidth,latency:{measured:ie.testResult.latency,limit:null==W?void 0:W.latencyLimit,recommended:null==W?void 0:W.latencyRecommended},latencyWithStream:ie.testResult.latencyWithStream,measuredPathMtu:ie.testResult.measuredPathMtu,frameLoss:{measured:ie.testResult.packetLoss,limit:null==W?void 0:W.packetLossLimit,recommended:null==W?void 0:W.packetLossRecommended},analysis:{networkQuality:Me,bandwidthQuality:oe,frameLossQuality:N,latencyQuality:q},capableProfile:Q,percentile99thFrameJitter:ie.testResult.percentile99thFrameJitter,networkSessionId:ie.testResult.networkSessionId,result:ie.result.result,isNetworkTest2:!0,isSuccess:ie.result.result===O.pU.NCT_R_SUCCESS,zone:ie.testResult.zone?{name:this.zone.name,address:ie.testResult.zone}:this.zone,errorDetails:ie.testResult.errorDetails||"",thresholds:ie.testResult.thresholds,maxUserCapableProfile:this.capableSupportedResolutions[0],maxPacketSize:ie.testResult.maxPacketSize,maxTestBandwidthMbps:ie.testResult.maxTestBandwidthMbps},k}),(0,f.K)(Q=>(this.logger.error("Error in analyzing network test result: ",Q),(0,l._)(Q))))}calculateNetworkQuality(L,W,te){let ie;return L===O.AS.Excellent&&W===O.AS.Excellent&&te===O.AS.Excellent?ie=O.AS.Excellent:L===O.AS.Bad||W===O.AS.Bad||te===O.AS.Bad?ie=O.AS.Bad:(L===O.AS.Poor||W===O.AS.Poor||te===O.AS.Poor)&&(ie=O.AS.Poor),ie}compareMetric(L,W,te,ie){let Q;return Q=ie?L>=te?O.AS.Excellent:L<W?O.AS.Bad:O.AS.Poor:L<te?O.AS.Excellent:L>=W?O.AS.Bad:O.AS.Poor,Q}runLbrAndSaveOptimalZone(L){return this.gfnSdkService.getAuthType().pipe((0,u.zg)(W=>{let te=(0,s.of)(null);(W===_.Gr.IDM||W===_.Gr.IDM_FALLBACK)&&(te=this.idmService.accountStatusChanged);const ie=[te,this.systemInfo.getDeviceId()];return(0,p.$R)(...ie).pipe((0,w.w)(([Q,k])=>{const oe={userId:Q&&!(0,D.isEmpty)(Q.userId)?Q.userId:"UnknownUser",platformId:L,deviceId:k};return this.gridService.getZone(oe,this.parentSpan)}))}))}prepareNetworkParams(L,W=!1){return this.logger.info("Getting network test parameters"),(0,p.$R)(this.idmService.accountStatusChanged,this.systemInfo.getDeviceId(),this.currentDisplayResolutionStream.get$().pipe((0,o.q)(1)),this.gridService.getCachedZone(),this.idmService.getAuthToken(W,this.parentSpan),this.gfnSdkService.getAuthInfo(),this.currentMaxSubscriptionProfileStream.get$().pipe((0,o.q)(1)),this.capableResolutionsStream.get$().pipe((0,o.q)(1)),this.clientHeaderService.getCommonHeaders()).pipe((0,u.zg)(([te,ie,Q,k,oe,N,q,Me,xe])=>{this.logger.info("Preparing Network Test parameters"),this.zone=k,this.selectedZone$.next(k);let ct=F.qq.NVB_AUTH_JWT_GFN,Se=oe.token;(!Se||0===Se.length)&&N.authType===_.Gr.JWT&&(ct=F.qq.NVB_AUTH_JWT,Se=N.authToken);const Ge={platformId:L,user:(0,D.isEmpty)(te.userId)?"UnknownUser":te.userId,authType:ct,authToken:Se||"",address:k.address,deviceId:ie,displayResolution:{width:Q.width,height:Q.height,frameRate:Q.frameRate},profiles:Me.map(Tt=>({height:Tt.height,width:Tt.width,frameRate:Tt.fps})),maxDisplayResolution:q,httpHeaders:this.getHttpHeaders(xe)},St=(0,D.cloneDeep)(Ge);return delete St.authToken,this.logger.info("Network test parameters: ",St),(0,s.of)(Ge)}))}translateGFWSLSupportedString(L){switch(L){case i.wi.XBox:case i.wi.Windows:return"Windows";case i.wi.ChromeOS:return"Chrome OS";case i.wi.MacOS:return"macOS";case i.wi.IOS:case i.wi.IPadOS:return"iOS";case i.wi.Linux:return"Linux";case i.wi.Android:return"Android";case i.wi.WebOS:return"WebOS";case i.wi.Tizen:return"Tizen";case i.wi.SteamOS:return"SteamOS";default:return i.wi.Undefined}}getHttpHeaders(L){if(i.ng.isBrowserPlatform())return[];const W=Object.keys(L).map(te=>({headerName:te,headerValue:L[te]}));return W.push({headerName:"NV-Client-ID",headerValue:this.appConfig.lcars.clientId}),W}constructHelpLinks(){const L=this.localeService.localeChanged.pipe((0,G.P)());return(0,p.$R)(L,this.systemInfo.getDeviceOSType()).pipe((0,h.U)(te=>{const ie={cNm:i.ng.isBrowserPlatform()?C.w.gfnWebClient:C.w.gfn,Plt:this.translateGFWSLSupportedString(te[1])},Q=new URL(b.hE.BaseUrl+te[0]);Q.searchParams.append("page",b.hE.NetworkTroubleshoot),Q.searchParams.append("jso",btoa(JSON.stringify(ie))),this.logger.info("Network Troubleshooting tips link: ",Q.toString());const k=b.hD[b.hE.NetworkTroubleshoot],oe=`${b.hE.BaseUrl}${te[0]}&page=${b.hE.RecommendedRoutersProductPage}`,N=b.hD[b.hE.RecommendedRoutersProductPage];return this.logger.info("Recommended Routers link: ",oe),[Q.toString(),k,oe,N]}))}cleanupOnCancel(){return this.networkTestCancelled$.next(),this.isNetworkTestInProgress?(this.logger.info("Cancelled network test, hence Network Test will run on next streamer launch."),this.networkConfigurationService.updateCurrentFingerprintNetworkTestFlag(!0,O.VR.NetworkTestCancelled)):(0,s.of)(!0)}isCachedZone(L,W){return L===W}isSupportedAndCachedZone(L,W,te){return(null==L?void 0:L.address)&&this.isZoneSupported(L,te)&&this.isCachedZone(L.address,null==W?void 0:W.address)}checkExpiry(L){var W,te;if(!(null===(W=null==L?void 0:L.networkTestExpiry)||void 0===W?void 0:W.expiryTime))return!0;if(null===(te=null==L?void 0:L.networkTestExpiry)||void 0===te?void 0:te.expiryTime){const ie=new Date,Q=new Date(L.networkTestExpiry.expiryTime);return this.logger.info("Webrtc Network Test Expiry time "+Q+", time now "+ie),Q<ie}}isWebrtcNetworkTestExpiryTimeElapsed(L){return(0,p.$R)(this.zoneStorage.getDefaultZone(),this.networkConfigurationService.getNetworkConfig(),this.gridService.detectedLocalZone$).pipe((0,h.U)(([W,te,ie])=>{var Q,k,oe,N,q;return this.isSupportedAndCachedZone(L,null===(Q=null==te?void 0:te.networkTestExpiry)||void 0===Q?void 0:Q.zone,ie)||!L&&this.isSupportedAndCachedZone(W,null===(k=null==te?void 0:te.networkTestExpiry)||void 0===k?void 0:k.zone,ie)?this.checkExpiry(te):!(!L||!this.isZoneSupported(L,ie)||this.isCachedZone(L.address,null===(oe=null==te?void 0:te.networkTestExpiry)||void 0===oe?void 0:oe.zone.address))||!(L||!this.isZoneSupported(W,ie)||this.isCachedZone(W.address,null===(q=null===(N=null==te?void 0:te.networkTestExpiry)||void 0===N?void 0:N.zone)||void 0===q?void 0:q.address))}))}isWebrtcNetworkTestRequired(L,W=!1){return(0,a.aj)([this.webrtcNetworkTestEnabled,this.webrtcNTSupportForZone]).pipe((0,u.zg)(([te,ie])=>(this.isWebrtcNetworkTestEnabled=W?te.enabled&&!te.showUI&&ie:te.enabled&&te.showUI&&ie,this.isWebrtcNetworkTestEnabled?this.isWebrtcNetworkTestExpiryTimeElapsed(L).pipe((0,h.U)(Q=>Q?L?L&&L.runNetworkTest?(this.logger.info("Override zone has been set, hence run webrtc network test"),this.setRetriggerPolicy(v.Yk9.OverrideFlagSet),!0):(this.logger.info("runNetworkTest for set override zone is false, not running Network test."),!1):(this.logger.info("Webrtc network test is enabled, run Network test."),!0):(this.logger.info("Network Test expiry time has not elapsed yet, not running Network test."),!1))):(this.logger.info("Network Test disabled, skipping Network test."),(0,s.of)(!1)))))}setNetworkTestExpiryTime(){var L;const W=new Date,te=null===(L=this.appConfig.networkTest)||void 0===L?void 0:L.expiryTime;return this.isWebrtcNetworkTestEnabled&&!(0,D.isNil)(te)?(W.setDate(W.getDate()+te),(0,p.$R)(this.gridService.getCachedZone(),this.networkConfigurationService.getNetworkConfig()).pipe((0,w.w)(([ie,Q])=>{this.logger.info(`Updating Network Test Expiry time for zone ${ie.name}: `+W);const k={zone:ie,expiryTime:null==W?void 0:W.toISOString()};return Q=(0,D.extend)(Q,{networkTestExpiry:k}),this.networkConfigurationService.writeNetworkConfig(Q,!0)}),(0,f.K)(ie=>(this.logger.error("Set Network Test expiry time failed: ",ie),(0,s.of)(!1))))):(0,s.of)(!1)}}return K.\u0275fac=function(L){return new(L||K)(S.LFG(i.ed),S.LFG(i.Ob),S.LFG(P.GK),S.LFG(Y.No),S.LFG(se.r),S.LFG(i.dF),S.LFG(fe.X),S.LFG($.s),S.LFG(ae.VK),S.LFG(_.s),S.LFG(i.OL),S.LFG(v.wU6),S.LFG(B.BH),S.LFG(me.O_),S.LFG(U.$l),S.LFG(ye.F0),S.LFG(A.x5h),S.LFG(ue.W))},K.\u0275prov=S.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})()},71316:(He,de,e)=>{"use strict";e.d(de,{w:()=>n});const n={gfn:"gfn",gfnWebClient:"gfnb"}},8382:(He,de,e)=>{"use strict";e.d(de,{q:()=>x});var n=e(6484),i=e(26222),D=e(202),y=e(79441),T=e(22663),r=e(20088),a=e(57674),s=e(2316),p=e(19211),l=e(67067),t=e(30582),w=e(54364),h=e(6381),u=e(58283);function o(E,P){if(1&E&&(s.TgZ(0,"span",7),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&E){const v=s.oxw().$implicit;s.xp6(1),s.Oqu(s.lcZ(2,1,v.text))}}const f=function(E){return{serversLink:E}};function c(E,P){if(1&E&&(s._UZ(0,"span",8),s.ALo(1,"translate")),2&E){const v=s.oxw().$implicit,O=s.oxw();s.Q6J("innerHTML",s.xi3(1,1,O.tipLinkString,s.VKq(4,f,'href="'+v.linkUrl+'" class="font-body2-link"')),s.oJD)}}function g(E,P){if(1&E&&(s.TgZ(0,"div"),s.TgZ(1,"div",3),s._UZ(2,"span",4),s.YNc(3,o,3,3,"span",5),s.YNc(4,c,2,6,"span",6),s.qZA(),s.qZA()),2&E){const v=P.$implicit;s.xp6(3),s.Q6J("ngIf",!v.hasLink),s.xp6(1),s.Q6J("ngIf",v.hasLink)}}const I=function(E){return{troubleshootLink:E}},G=function(E){return{routersLink:E}};let x=(()=>{class E{constructor(v,O,C,_){this.localeService=O,this.networkTestService=C,this.telemetryUtil=_,this.tipLinkString="networkTest.farAwayFromServers",this.logger=v.getLogger("libraries/network-test/NetworkTipsComponent"),this.destroy$=new y.xQ}ngOnInit(){this.updateTips(),this.networkTestService.networkLinks.pipe((0,T.R)(this.destroy$)).subscribe(v=>{this.troubleshootLink=v[0],this.troubleshootShortUrl=v[1],this.routersLink=v[2],this.routersShortUrl=v[3]})}ngOnChanges(){this.updateTips()}updateTips(){this.logger.info("update network tips, network conditions: ",this.networkConditionsData),(0,D.isNil)(this.networkConditionsData)||(this.networkConditions=[],this.trobleshootTips=[],this.getNetworkConditions(),this.getTroubleshootTips())}getNetworkConditions(){this.logger.info("Current network conditions passed from parent component: ",this.networkConditionsData),this.networkConditionsData.isVpn&&this.networkConditions.push(i.Ih.VPN),(0,D.isNil)(this.networkConditionsData.zoneOverride)||this.networkConditions.push(i.Ih.ZoneOverride),(0,D.isNil)(this.networkConditionsData.latency)||(this.networkConditionsData.latency>150&&this.networkConditions.push(i.Ih.Latency_more_150),this.networkConditionsData.latency>80&&this.networkConditionsData.latency<=150&&this.networkConditions.push(i.Ih.Latency_more_80)),(0,D.isNil)(this.networkConditionsData.bandwidth)||this.networkConditionsData.bandwidth<15&&this.networkConditions.push(i.Ih.Bandwidth_less_15),(0,D.isNil)(this.networkConditionsData.networkType)||(this.networkConditionsData.networkType===n.VV.WiFi2_4&&this.networkConditions.push(i.Ih.Wifi_2_4),(this.networkConditionsData.networkType===n.VV.WiFi2_4||this.networkConditionsData.networkType===n.VV.WiFi5_0)&&this.networkConditions.push(i.Ih.Wifi_2_4_or_5)),this.networkConditionsData.isOffline&&this.networkConditions.push(i.Ih.Offline),this.logger.info("Current network conditions are: ",this.networkConditions)}getTroubleshootTips(){const v=[],O=this.networkConditionsData.isOffline?2:this.networkConditionsData.isVpn?1:3;this.networkConditions.forEach(C=>{const _=(0,D.cloneDeep)(i.Q1.find(F=>F.condition===C));_.hasLink&&this.localeService.localeChanged.pipe((0,r.P)()).subscribe(F=>{_.linkUrl=`${a.hE.BaseUrl}${F}&page=${_.linkUrl}`}),v.push(_)}),i.Q1.forEach(C=>{C.condition===i.Ih.Any&&v.push(C)}),v.sort((C,_)=>C.priority-_.priority),this.networkConditionsData.isOffline&&(v[1]=i.Q1.find(C=>"networkTest.restartRouter"===C.text)),this.trobleshootTips=v.slice(0,O),this.logger.info("Show top trobleshoot tips for current network: ",this.trobleshootTips)}onClickTroubleshoot(){this.networkTestService.sendNetworkTroubleshootClickedTelemetry(this.telemetryUtil.getClientType())}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return E.\u0275fac=function(v){return new(v||E)(s.Y36(n.ed),s.Y36(n.OL),s.Y36(p.R),s.Y36(l.wU6))},E.\u0275cmp=s.Xpm({type:E,selectors:[["gfn-network-tips"]],inputs:{networkConditionsData:"networkConditionsData"},features:[s.TTD],decls:8,vars:15,consts:[["fxLayout","column","fxLayoutAlign","space-between start",1,"network-tips","tips-results"],[4,"ngFor","ngForOf"],[1,"font-body3","help-links",3,"innerHTML","shortUrl","click"],["fxLayout","row","fxLayoutAlign","start start"],[1,"bullet-unordered-tips","font-body2"],["class","font-body2",4,"ngIf"],["class","font-body2",3,"innerHTML",4,"ngIf"],[1,"font-body2"],[1,"font-body2",3,"innerHTML"]],template:function(v,O){1&v&&(s.TgZ(0,"div",0),s.TgZ(1,"div"),s.YNc(2,g,5,2,"div",1),s.qZA(),s.TgZ(3,"div"),s.TgZ(4,"span",2),s.NdJ("click",function(){return O.onClickTroubleshoot()}),s.ALo(5,"translate"),s.qZA(),s.TgZ(6,"span",2),s.NdJ("click",function(){return O.onClickTroubleshoot()}),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.qZA()),2&v&&(s.xp6(2),s.Q6J("ngForOf",O.trobleshootTips),s.xp6(2),s.Q6J("innerHTML",s.xi3(5,5,"networkTest.viewMoreTroubleshootTips",s.VKq(11,I,'href="'+O.troubleshootLink+'" class="font-body3-link", target="_blank"')),s.oJD)("shortUrl",O.troubleshootShortUrl),s.xp6(2),s.Q6J("innerHTML",s.xi3(7,8,"networkTest.checkRecommendedRouters",s.VKq(13,G,'href="'+O.routersLink+'" class="font-body3-link"')),s.oJD)("shortUrl",O.routersShortUrl))},directives:[t.xw,t.Wh,w.sg,h.E,w.O5],pipes:[u.X$],styles:['.network-tips[_ngcontent-%COMP%]{height:181px;padding:24px}.tips-results[_ngcontent-%COMP%]{background-color:#0000004d}.help-links[_ngcontent-%COMP%]{margin-top:24px}.bullet-unordered-tips[_ngcontent-%COMP%]:before{content:"-"}.isLtr[_nghost-%COMP%]   .bullet-unordered-tips[_ngcontent-%COMP%]:before, .isLtr   [_nghost-%COMP%]   .bullet-unordered-tips[_ngcontent-%COMP%]:before{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .bullet-unordered-tips[_ngcontent-%COMP%]:before{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .bullet-unordered-tips[_ngcontent-%COMP%]:before, .isRtl   [_nghost-%COMP%]   .bullet-unordered-tips[_ngcontent-%COMP%]:before{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .bullet-unordered-tips[_ngcontent-%COMP%]:before{--dummy4: 0;margin-left:8px}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.tips-results[_ngcontent-%COMP%]{background-color:transparent}}']}),E})()},65298:(He,de,e)=>{"use strict";e.d(de,{C:()=>y});var n=e(2316),i=e(61977),D=e(73341);const m=function(T){return{tv:T}};let y=(()=>{class T{constructor(a){var s;this.closeOobeDialog=new n.vpe,this.tvMode=!!(null===(s=null==a?void 0:a.featureEnablement)||void 0===s?void 0:s.tvMode)}ngOnInit(){this.nvActiveView=i.QF.Welcome}closeDialog(){this.nvActiveView="",this.closeOobeDialog.emit(i.eE.Close)}}return T.\u0275fac=function(a){return new(a||T)(n.Y36(D.VK))},T.\u0275cmp=n.Xpm({type:T,selectors:[["gfn-oobe"]],inputs:{nvActiveView:"nvActiveView"},outputs:{closeOobeDialog:"closeOobeDialog"},decls:2,vars:4,consts:[[1,"oobe-dialog",3,"ngClass"],[1,"oobe-screen",3,"tvMode","closeOobeDialog"]],template:function(a,s){1&a&&(n.TgZ(0,"div",0),n.TgZ(1,"gfn-oobe-welcome",1),n.NdJ("closeOobeDialog",function(){return s.closeDialog()}),n.qZA(),n.qZA()),2&a&&(n.Q6J("ngClass",n.VKq(2,m,s.tvMode)),n.xp6(1),n.Q6J("tvMode",s.tvMode))},styles:[".oobe-dialog[_ngcontent-%COMP%]{width:705px;height:auto;max-height:100vh;-webkit-backface-visibility:hidden;background:#393939}.oobe-dialog.tv[_ngcontent-%COMP%]{width:100vw;height:100vh;display:flex;justify-content:center;align-items:flex-start}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.oobe-dialog[_ngcontent-%COMP%]{width:100vw;height:100%}}.oobe-screen[_ngcontent-%COMP%]{-webkit-font-smoothing:antialiased;width:100%;height:100%;padding-top:max(24px,env(safe-area-inset-top));padding-bottom:env(safe-area-inset-bottom);max-width:100vw;max-height:100vh}.isLtr[_nghost-%COMP%]   .oobe-screen[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .oobe-screen[_ngcontent-%COMP%]{padding-left:max(24px,env(safe-area-inset-left))}html[dir=ltr][_ngcontent-%COMP%]   .oobe-screen[_ngcontent-%COMP%]{--dummy1: 0;padding-left:max(24px,env(safe-area-inset-left))}.isRtl[_nghost-%COMP%]   .oobe-screen[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .oobe-screen[_ngcontent-%COMP%]{padding-right:max(24px,env(safe-area-inset-left))}html[dir=rtl][_ngcontent-%COMP%]   .oobe-screen[_ngcontent-%COMP%]{--dummy1: 0;padding-right:max(24px,env(safe-area-inset-left))}.isLtr[_nghost-%COMP%]   .oobe-screen[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .oobe-screen[_ngcontent-%COMP%]{padding-right:max(24px,env(safe-area-inset-right))}html[dir=ltr][_ngcontent-%COMP%]   .oobe-screen[_ngcontent-%COMP%]{--dummy2: 0;padding-right:max(24px,env(safe-area-inset-right))}.isRtl[_nghost-%COMP%]   .oobe-screen[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .oobe-screen[_ngcontent-%COMP%]{padding-left:max(24px,env(safe-area-inset-right))}html[dir=rtl][_ngcontent-%COMP%]   .oobe-screen[_ngcontent-%COMP%]{--dummy2: 0;padding-left:max(24px,env(safe-area-inset-right))}"]}),T})()},61977:(He,de,e)=>{"use strict";e.d(de,{QF:()=>n,tC:()=>i,eE:()=>D});const n={Welcome:"welcome",SystemCheck:"systemcheck",GamesInfo:"gamesinfo"},i={Oobe:"oobe"},D={Close:"Oobe dialog closed"}},1054:(He,de,e)=>{"use strict";e.d(de,{H:()=>n.H,u:()=>r});var n=e(23550),i=e(67067),D=e(202),m=e(6484),y=e(2316),T=e(43124);let r=(()=>{class a{constructor(p,l){this.telemetryService=p,this.telemetryUtilService=l,this._oobeCompleted=!1,this.asyncActions={}}set oobeCompleted(p){this._oobeCompleted=p}get oobeCompleted(){return this._oobeCompleted}startActionAsync(p){this.asyncActions[p]={currentScreen:this.telemetryService.getScreen(),startTime:Date.now()}}endActionAsync(p,l,t){if(!(0,D.isNil)(p)&&!(0,D.isNil)(this.asyncActions[p])){const w=this.asyncActions[p];l===i.N3X.AppExit&&this.telemetryService.changeSync(!0);const h=new i.$4G({currentScreen:w.currentScreen,clientType:this.telemetryUtilService.getClientType(),userAction:p,status:l,errorDetails:t||"",totalMs:0,errorUri:"",serverErrorCode:""});this.telemetryService.push(h,w.startTime),delete this.asyncActions[p]}}sendOobeAcceptEvent(p,l,t){let w=i._K5.NotShown;l&&(w=t===m.p6.Full?i._K5.UserConsented:i._K5.UserDidNotConsent);const h={currentScreen:this.telemetryService.getScreen(),action:p,technicalConsent:w},u=new i.Wb4(h);this.telemetryService.push(u)}}return a.\u0275fac=function(p){return new(p||a)(y.LFG(T.y0),y.LFG(i.wU6))},a.\u0275prov=y.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},23550:(He,de,e)=>{"use strict";e.d(de,{H:()=>_});var n=e(6484),i=e(202),m=e(80226),y=e(42720),T=e(61486),r=e(81134),a=e(28416),s=e(33927),p=e(85816),l=e(53466),t=e(22663),w=e(29322),h=e(65298),u=e(61977),o=e(43124),f=e(92377),c=e(3076),g=e(94491),I=e(2316),G=e(57390),x=e(22213),E=e(73341),P=e(56409),v=e(73159),O=e(71959),C=e(21532);let _=(()=>{class F{constructor(b,B,U,A,S,Y,se,fe,$,ae,me){var ye;this.sharedStorageService=b,this.dialog=B,this.appConfig=U,this.systemInfoService=A,this.userConsentService=S,this.localeService=Y,this.gfnSdkService=fe,this.guestModeService=$,this.injector=ae,this.unsupportedBrowserService=me,this.globalDialogref=null,this.isOobeDialogClosedSubject=new m.t(1),this.logger=se.getLogger("OobeService/Logger"),this.tvMode=!!(null===(ye=null==U?void 0:U.featureEnablement)||void 0===ye?void 0:ye.tvMode)}get oobeDialogClosedState(){return this.isOobeDialogClosedSubject.asObservable()}get getProductVersion(){return this.appConfig.build.version}get getMinOsVersion(){return this.appConfig.oobe.minMacOsVersion}getOobeDataFromSharedStorage(){return this.sharedStorageService.readBlock(u.tC.Oobe)}loadTermsOfUseAcceptedVersion(){return this.getOobeDataFromSharedStorage().pipe((0,s.U)(b=>null===b?null:b.termsOfUseAcceptedVersion))}isTermsOfUseChangedSinceAccepted(){return this.loadTermsOfUseAcceptedVersion().pipe((0,s.U)(b=>!!(0,i.isNil)(b)||+this.appConfig.oobe.termsOfUseVersion>+b))}saveTermsOfUseAcceptedVersion(){return this.getOobeDataFromSharedStorage().pipe((0,p.zg)(b=>(b.termsOfUseAcceptedVersion=this.appConfig.oobe.termsOfUseVersion,this.saveOobeDataInSharedStorage(b))))}saveOobeDataInSharedStorage(b){return this.sharedStorageService.writeBlock(u.tC.Oobe,b)}launch(){return(0,y.D)({isTouChanged:this.isTermsOfUseChangedSinceAccepted(),isAnonUser:this.gfnSdkService.getIsAnonymousUser()}).pipe((0,p.zg)(b=>(b.isTouChanged||b.isAnonUser&&!this.guestModeService.isGuestMode)&&!this.guestModeService.isGuestAppFlow()?(0,T.aj)([this.localeService.layoutDirectionUpdated$,this.unsupportedBrowserService.shouldDisplayPWAGuidance$]).pipe((0,l.q)(1),(0,p.zg)(([B,U])=>window.location.hash.includes(g.EM.PlayGame)&&U?(0,r.of)(!1):this.openOobeDialog())):(this.isOobeDialogClosedSubject.next(!0),this.isOobeDialogClosedSubject.complete(),this.logger.event("no oobe setDefaultConsentData"),this.userConsentService.setDefaultConsentData(this.guestModeService.isGuestMode?o.$P:o.l3))))}openOobeDialog(){return this.globalDialogref?(0,r.of)(!1):this.systemInfoService.getDeviceOSType().pipe((0,l.q)(1),(0,p.zg)(b=>{const B={panelClass:"dialogWelcome",disableClose:!0,autoFocus:!1,maxWidth:"100vw"};if((b===n.wi.IOS||this.tvMode)&&(B.height="100%"),this.globalDialogref=this.dialog.open(h.C,B),(0,c.fO)()){const U=this.injector.get(f.b);U&&this.globalDialogref.keydownEvents().pipe((0,t.R)(this.isOobeDialogClosedSubject)).subscribe(A=>{"Escape"===A.key&&(A.stopPropagation(),U.exitApp())})}return(0,a.S3)(this.globalDialogref.componentInstance.closeOobeDialog,this.globalDialogref.afterClosed())}),(0,s.U)(()=>(0===this.globalDialogref.getState()&&this.globalDialogref.close(),this.globalDialogref=null,this.isOobeDialogClosedSubject.next(!0),this.isOobeDialogClosedSubject.complete(),this.logger.info("oobe closed"),!0)))}meetSysRequirements(){return this.systemInfoService.getOsInformation().pipe((0,s.U)(b=>{if("macOS"===b.OSName){const B=new w.b(b.OSVersion);let U;U=[0,0],!(0,i.isNil)(this.appConfig.oobe)&&!(0,i.isNil)(this.appConfig.oobe.minMacOsVersion)&&(U=new w.b(this.appConfig.oobe.minMacOsVersion));const A=B.compare(U)!==w.A.Greater;return this.logger.info(`system ${A?"meet":"does not meet"} min. OS requirements - your MAC OS version: `,b.OSVersion),A}return!0}))}}return F.\u0275fac=function(b){return new(b||F)(I.LFG(G.OA),I.LFG(x.uw),I.LFG(E.VK),I.LFG(n.Ob),I.LFG(P.Z),I.LFG(n.OL),I.LFG(n.ed),I.LFG(v.s),I.LFG(O.o),I.LFG(I.zs3),I.LFG(C.rH))},F.\u0275prov=I.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})()},20220:(He,de,e)=>{"use strict";e.d(de,{DG:()=>m,iD:()=>y,ZC:()=>T,nO:()=>r,hG:()=>a,Wx:()=>p,hB:()=>l,vw:()=>t,D1:()=>h,$N:()=>o});const m=-1;var y=(()=>{return(f=y||(y={})).Steam="steam",f.Epic="epic",f.Uplay="uplay",f.Gog="gog",f.Nvidia="nvidia",f.Unknown="unknown",f.None="none",y;var f})(),T=(()=>{return(f=T||(T={}))[f.OwnershipSync=0]="OwnershipSync",f[f.AccountLinking=1]="AccountLinking",T;var f})(),r=(()=>{return(f=r||(r={}))[f.UNKNOWN=0]="UNKNOWN",f[f.UPLAY=1]="UPLAY",f[f.GOG=2]="GOG",f[f.EPIC=3]="EPIC",f[f.STEAM=4]="STEAM",r;var f})(),a=(()=>{return(f=a||(a={})).UNKNOWN="UNKNOWN",f.SUCCESS="SUCCESS",f.RATE_LIMITED="RATE_LIMITED",f.NVIDIA_ACCESS_DENIED="NVIDIA_ACCESS_DENIED",f.PLATFORM_ACCESS_DENIED="PLATFORM_ACCESS_DENIED",f.PLATFORM_PROFILE_DENIED="PLATFORM_PROFILE_DENIED",f.UNABLE_TO_CONNECT="UNABLE_TO_CONNECT",a;var f})();class p{constructor(c=36e5,g=864e5,I=12096e5){this.now=c,this.today=g,this.soon=I}}var l=(()=>{return(f=l||(l={}))[f.NotExpired=0]="NotExpired",f[f.ExpiresNow=1]="ExpiresNow",f[f.ExpiresToday=2]="ExpiresToday",f[f.ExpiresSoon=3]="ExpiresSoon",f[f.Expired=4]="Expired",l;var f})();class t{constructor(c=y.Steam,g=!1,I="",G="",x=T.OwnershipSync,E=a.UNKNOWN,P=new Date(0),v=null,O=0,C=0,_=new p,F=!0,V){this.providerType=c,this.loggedIn=g,this.persona=I,this.userId=G,this.accountType=x,this.state=E,this.syncTime=P,this.expirationTime=v,this.numberOfSyncedGames=O,this.numberOfGames=C,this.expirations=_,this.enabled=F,this.alProvider=V}get isExpired(){return this.accountType!==T.OwnershipSync&&null!==this.expirationTime&&(0===this.expirationTime.getTime()||this.expirationTime.getTime()<Date.now())}get isSynced(){return this.syncTime.getTime()>0&&(this.state===a.SUCCESS||this.state===a.RATE_LIMITED)}get isAccountLinkingAvailable(){var c;return this.accountType===T.AccountLinking&&(!this.alProvider||(null===(c=this.alProvider)||void 0===c?void 0:c.isEnabled))}get icon(){var c;return(null===(c=this.alProvider)||void 0===c?void 0:c.digitalStoreInfo.smallImageUrl)||""}get connectValueProp(){var c,g;return(null===(g=null===(c=this.alProvider)||void 0===c?void 0:c.digitalStoreInfo.accountLinkingMetadata)||void 0===g?void 0:g.connectValueProposition)||""}get isAccountLinkingRequired(){var c;return!!(null===(c=this.alProvider)||void 0===c?void 0:c.digitalStoreInfo.accountLinkingMetadata.isRequired)}get isAccountLinked(){return this.isAccountLinkingAvailable&&this.isSynced}getExpirationStatus(){return this.isExpired?l.Expired:this.checkExpiration(this.expirations.now)?l.ExpiresNow:this.checkExpiration(this.expirations.today)?l.ExpiresToday:this.checkExpiration(this.expirations.soon)?l.ExpiresSoon:l.NotExpired}checkExpiration(c){var g;return!!this.isExpired||(null===(g=this.expirationTime)||void 0===g?void 0:g.getTime())<Date.now()+c}}class w{constructor(){this.hideExpiresInDays=!1,this.hideExpiresToday=!1}}class h{constructor(){this.shouldShowCTA=void 0,this.notificationSettings=new w}}class o{}},27846:(He,de,e)=>{"use strict";e.d(de,{lW:()=>n.lW,fF:()=>n.fF,un:()=>l,S8:()=>n.S8,nn:()=>n.nn,zJ:()=>n.zJ,cj:()=>n.cj,n6:()=>n.n6,wI:()=>n.wI,MA:()=>n.MA,A8:()=>n.A8,bY:()=>n.bY,IG:()=>n.IG});var n=e(60443),i=e(71258),D=e(9170),m=e(79902),y=e(33927),T=e(53466),r=e(2316),a=e(6484),s=e(73341),p=e(80388);let l=(()=>{class t{constructor(h,u,o,f){var c;this.router=o,this.gameShareUrlService=f,this.defaultNavigationBehaviorOptions={},this.logger=h.getLogger("gfn/PathService"),this.defaultNavigationBehaviorOptions.skipLocationChange=!!(null===(c=u.client)||void 0===c?void 0:c.skipLocationChange),this.logger.info("Using default navigation options:",this.defaultNavigationBehaviorOptions)}get onExitingStreamer(){return this.router.events.pipe((0,D.h)(h=>h instanceof i.OD&&(0,n.MA)(this.router.url)&&h.url!==n.nn.Base&&!(0,n.MA)(h.url)),(0,m.w)(h=>this.router.events.pipe((0,D.h)(u=>u instanceof i.m2||u instanceof i.Q3||u instanceof i.gk),(0,y.U)(u=>u instanceof i.m2),(0,T.q)(1))))}navigateByUrl(h,u){return this.router.navigateByUrl(h,Object.assign(Object.assign({},this.defaultNavigationBehaviorOptions),u))}navigate(h,u){return this.router.navigate(h,Object.assign(Object.assign({},this.defaultNavigationBehaviorOptions),u))}getStreamerExitUrl(){return this.exitUrl?this.exitUrl:n.nn.DefaultStreamerExitUrl}setStreamerExitUrl(h){this.exitUrl=h||n.nn.DefaultStreamerExitUrl}resetStreamerExitUrl(){this.exitUrl=n.nn.DefaultStreamerExitUrl}getCurrentUrl(){let h;return h=this.gameShareUrlService.getIsAddressbarUrlUpdated()?this.gameShareUrlService.getDeeplinkShareUrl():document.baseURI+this.router.url,this.logger.info("return URL is ",h,this.gameShareUrlService.getIsAddressbarUrlUpdated()),h}isMallOrSettingsUrl(h){return n.Bi.includes(h)||n.YZ.includes(h)}}return t.\u0275fac=function(h){return new(h||t)(r.LFG(a.ed),r.LFG(s.VK),r.LFG(i.F0),r.LFG(p.t))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},60443:(He,de,e)=>{"use strict";e.d(de,{nn:()=>D,fF:()=>m,S8:()=>y,wI:()=>T,MA:()=>r,lW:()=>a,IG:()=>s,bY:()=>p,n6:()=>l,A8:()=>t,zJ:()=>w,cj:()=>h,GW:()=>u,Bi:()=>o,YZ:()=>f});var n=e(9021),i=e(20180),D=(()=>{return(c=D||(D={})).Base="/",c.Games="/layout/games",c.Settings="/layout/settings",c.Surveys="/layout/surveys",c.GamesSectionGridL1="/layout/games/gameSectionGrid",c.Deeplink="/deeplink",c.PwaWall="/install",c.DefaultStreamerExitUrl="/layout/games",D;var c})(),m=(()=>{return(c=m||(m={})).Home="layout/games",c.BrowserBookmark="",c.DefaultRedirect="layout/games",c.StreamerRoot="streamer",c.PwaWall="install",m;var c})(),y=(()=>{return(c=y||(y={})).CmsId="cmsId",c.LaunchSource="launchSource",c.ShortName="shortName",c.AppLaunchMode="appLaunchMode",c.SdkClient="sdkClient",c.ParentGameId="parentGameId",c.AccountLinked="accountLinked",c.CascadePreviewToken="cascadePreviewToken",c.BgImageUrl="bgImageUrl",y;var c})();function T(c){const g=window.location.href;return r(c)||-1!==g.indexOf("launchSource=External")||-1!==g.indexOf("action=play-game")}function r(c){return c.startsWith(`/${m.StreamerRoot}`)}var a=(()=>{return(c=a||(a={})).Mall="GeForceNOW",c.Streamer="GeForceNOWStreamer",a;var c})();function s(c){return`/${m.StreamerRoot}?${y.LaunchSource}=${c.launchSource}${c.cmsId?`&${y.CmsId}=${c.cmsId}`:""}${c.shortName?`&${y.ShortName}=${c.shortName}`:""}${c.appLaunchMode?`&${y.AppLaunchMode}=${c.appLaunchMode}`:""}${c.sdkClient?`&${y.SdkClient}=${c.sdkClient}`:""}${c.accountLinked?`&${y.AccountLinked}=true`:""}${c.parentGameId?`&${y.ParentGameId}=${c.parentGameId}`:""}${c.bgImageUrl?`&${y.BgImageUrl}=${c.bgImageUrl}`:""}`}function p(c,g=!1){return`${g?window.geForceNowStartLocationOrigin:window.location.origin}${g?window.geForceNowStartLocationPathName:window.location.pathname}#${s(c)}`}function l(c){return(c.has(y.ParentGameId)||c.has(y.CmsId))&&c.has(y.LaunchSource)}function t(c){const g=c.indexOf("?");return w(new URLSearchParams(c.slice(g)))}function w(c){let E,g=0,I="",G=n.zO5.Unknown,x="",P=i.xl.Default,v=!1,O="";if(c.has(y.ParentGameId)&&(I=c.get(y.ParentGameId)),c.has(y.CmsId)&&(g=+c.get(y.CmsId)),c.has(y.AppLaunchMode)){const C=c.get(y.AppLaunchMode);switch(C){case i.xl.GamepadFriendly:case i.xl.TouchFriendly:P=C;break;default:P=i.xl.Default}}if(c.has(y.LaunchSource)){const C=c.get(y.LaunchSource);switch(C){case n.zO5.GeForceNOW:case n.zO5.External:case n.zO5.Deeplink:G=C;break;case n.zO5.Unknown:default:G=n.zO5.Unknown}}return c.has(y.ShortName)&&(x=c.get(y.ShortName)),c.has(y.SdkClient)&&(E=c.get(y.SdkClient)),c.has(y.AccountLinked)&&(v="true"===c.get(y.AccountLinked)),c.has(y.BgImageUrl)&&(O=c.get(y.BgImageUrl)),{parentGameId:I,cmsId:g,appLaunchMode:P,launchSource:G,shortName:x,sdkClient:E,accountLinked:v,bgImageUrl:O}}function h(c){var g;const I=null===(g=window)||void 0===g?void 0:g.geForceNowStartLocationHref;if((null==I?void 0:I.indexOf("?"))>-1){const G=I.slice(I.indexOf("?"));return new URLSearchParams(G).get(c)||null}return null}function u(c,g,I){const G=new RegExp("([?&])"+g+"=.*?(&|$)","i"),x=-1!==c.indexOf("?")?"&":"?";return c.match(G)?c.replace(G,"$1"+g+"="+I+"$2"):c+x+g+"="+I}const o=[D.Games,D.GamesSectionGridL1],f=[D.Settings]},88639:(He,de,e)=>{"use strict";e.d(de,{o:()=>n});const n={webcam:"",webcamDevId:"",microphone:"",micDevId:""}},27779:(He,de,e)=>{"use strict";e.d(de,{po:()=>n,Lm:()=>i,n1:()=>D,K7:()=>m,CJ:()=>y,ez:()=>T,YQ:()=>r,M4:()=>a,tX:()=>s,Tz:()=>p,Py:()=>l,n_:()=>t});const n=560,i=600,D=525,m=348,y=512,T=-127,r=0,a=.4,s=100,p="standardWebrtc",l="red5ProPublisherSdk",t=6e4},28619:(He,de,e)=>{"use strict";e.d(de,{$:()=>r});var n=e(34361),i=e(53466),D=e(33927),m=e(88639),y=e(2316),T=e(6484);let r=(()=>{class a{constructor(p){this.loggingService=p,this.audioInputDevices=[],this.videoInputDevices=[],this.logger=this.loggingService.getLogger("GFNWebcamService"),this.mediaSetup=m.o}getMediaDeviceInfo(){return(0,n.D)(navigator.mediaDevices.enumerateDevices()).pipe((0,i.q)(1),(0,D.U)(p=>(p.forEach(l=>{"audioinput"===l.kind?this.audioInputDevices.push({deviceId:l.deviceId,label:l.label,groupId:l.groupId}):"videoinput"===l.kind&&this.videoInputDevices.push({deviceId:l.deviceId,label:l.label,groupId:l.groupId})}),this.audioInputDevices=this.audioInputDevices.filter((l,t,w)=>w.findIndex(h=>h.groupId===l.groupId)===t),this.videoInputDevices=this.videoInputDevices.filter((l,t,w)=>w.findIndex(h=>h.groupId===l.groupId)===t),{videoInput:this.videoInputDevices,audioInput:this.audioInputDevices})))}}return a.\u0275fac=function(p){return new(p||a)(y.LFG(T.ed))},a.\u0275prov=y.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},60249:(He,de,e)=>{"use strict";e.d(de,{bW:()=>f,Qc:()=>v,po:()=>m.po,Lm:()=>m.Lm});var n=e(2316),i=e(79441),D=e(22663),m=e(27779),y=e(28619),T=e(6484),r=e(72946),a=e(30582),s=e(37007),p=e(54364),l=e(365),t=e(22213),w=e(70781),h=e(24298),u=e(58283);function o(O,C){if(1&O&&(n.TgZ(0,"mat-option",11),n._uU(1),n.qZA()),2&O){const _=C.$implicit;n.Q6J("value",_.deviceId),n.xp6(1),n.hij(" ",_.label," ")}}let f=(()=>{class O{constructor(_,F,V){this.gfnWebcamService=_,this.loggingService=F,this.playtestLiveService=V,this.primaryButtonClick=new n.vpe,this.micSensitivity=0,this.isMicReady=!1,this.destroy$=new i.xQ,this.selectedMicrophoneId="",this.onAudioProcess=()=>{if(this.playtestLiveService.audioAnalyzer){const b=new Uint8Array(this.playtestLiveService.audioAnalyzer.frequencyBinCount);this.playtestLiveService.audioAnalyzer.getByteFrequencyData(b);let B=0;const U=Array.from(b);for(const A of U)B+=A;this.micSensitivity=B/b.length}else this.micSensitivity=0}}ngOnInit(){this.logger=this.loggingService.getLogger("MicrophonePreview"),this.audioDevices=[],this.gfnWebcamService.getMediaDeviceInfo().pipe((0,D.R)(this.destroy$)).subscribe(_=>{this.audioDevices=_.audioInput.map(F=>F),this.onMicrophoneSelected(this.audioDevices[0].deviceId),this.selectedMicrophoneId=this.audioDevices[0].deviceId},_=>{this.logger.info("Error fetching webcam: ",_)}),this.audioIntervalHandle=window.setInterval(this.onAudioProcess,m.tX)}onMicrophoneSelected(_){const F=this.audioDevices.find(V=>V.deviceId===_);!F||(this.gfnWebcamService.mediaSetup.microphone=F.label,this.gfnWebcamService.mediaSetup.micDevId=F.deviceId,this.playtestLiveService.stopMic(),this.playtestLiveService.startMic(F.deviceId))}onPrimaryButtonClick(){this.primaryButtonClick.emit(!0)}ngOnDestroy(){window.clearInterval(this.audioIntervalHandle),this.audioIntervalHandle=null,this.destroy$.next(!0),this.destroy$.complete(),this.audioDevices=[]}}return O.\u0275fac=function(_){return new(_||O)(n.Y36(y.$),n.Y36(T.ed),n.Y36(r.Q))},O.\u0275cmp=n.Xpm({type:O,selectors:[["gfn-playtestlive-microphonepreview"]],inputs:{primaryButton:"primaryButton"},outputs:{primaryButtonClick:"primaryButtonClick"},decls:18,vars:16,consts:[["fxLayout","column",1,"microphone-dialog-container"],[1,"microphone-dialog-header"],[1,"font-header6"],[1,"font-body2","microphone-dialog-select",3,"disableOptionCentering","value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutGap","15px",1,"microphone-dialog-mictest"],[1,"font-body2","nowrap"],["mode","determinate",1,"mic-progress",3,"value"],[1,"microphone-dialog-actions"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","60px"],["mat-button","",1,"font-button2","hig-button",3,"mat-dialog-close"],[3,"value"]],template:function(_,F){1&_&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"span",2),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"mat-select",3),n.NdJ("valueChange",function(b){return F.selectedMicrophoneId=b})("selectionChange",function(b){return F.onMicrophoneSelected(b.value)}),n.YNc(6,o,2,2,"mat-option",4),n.qZA(),n.qZA(),n.TgZ(7,"div",5),n.TgZ(8,"span",6),n._uU(9),n.ALo(10,"translate"),n.qZA(),n._UZ(11,"mat-progress-bar",7),n.qZA(),n.TgZ(12,"div",8),n.TgZ(13,"mat-dialog-actions",9),n.TgZ(14,"button",10),n._uU(15),n.ALo(16,"uppercase"),n.ALo(17,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&_&&(n.xp6(3),n.hij(" ",n.lcZ(4,8,"playtestLive.selectMicrophoneDialog.selectYourMicrophone")," "),n.xp6(2),n.Q6J("disableOptionCentering",!0)("value",F.selectedMicrophoneId),n.xp6(1),n.Q6J("ngForOf",F.audioDevices),n.xp6(3),n.hij(" ",n.lcZ(10,10,"playtestLive.selectMicrophoneDialog.inputLevel")," "),n.xp6(2),n.Q6J("value",F.micSensitivity),n.xp6(3),n.Q6J("mat-dialog-close",!0),n.xp6(1),n.hij(" ",n.lcZ(16,12,n.lcZ(17,14,"playtestLive.selectMicrophoneDialog.joinPlaytest"))," "))},directives:[a.xw,s.gD,p.sg,a.SQ,l.pW,t.H8,a.Wh,w.lW,t.ZT,h.ey],pipes:[u.X$,p.gd],styles:[".microphone-dialog-header[_ngcontent-%COMP%]{margin-bottom:35px}.microphone-dialog-header[_ngcontent-%COMP%] > .microphone-dialog-select[_ngcontent-%COMP%]{margin-top:16px}.microphone-dialog-container[_ngcontent-%COMP%]{max-width:100%}.microphone-dialog-feedback[_ngcontent-%COMP%]{margin-bottom:35px}.microphone-dialog-mictest[_ngcontent-%COMP%]{margin-bottom:240px}.microphone-dialog-actions[_ngcontent-%COMP%]{margin-top:150px}.mic-progress[_ngcontent-%COMP%]{margin-top:8px}.nowrap[_ngcontent-%COMP%]{white-space:nowrap}.b-width[_ngcontent-%COMP%]{min-width:100px}"]}),O})();var c=e(34361),g=e(81134),I=e(45871),G=e(53466),x=e(98636);const E=["webcamHolder"];function P(O,C){if(1&O&&(n.TgZ(0,"mat-option",12),n._uU(1),n.qZA()),2&O){const _=C.$implicit;n.Q6J("value",_.deviceId),n.xp6(1),n.hij(" ",_.label," ")}}let v=(()=>{class O{constructor(_,F){this.gfnWebcamService=_,this.loggingService=F,this.destroy$=new i.xQ,this.isWebcamReady=!1,this.selectedWebcamId=""}ngOnInit(){this.logger=this.loggingService.getLogger("WebcamPreview"),this.videoDevices=[],this.gfnWebcamService.getMediaDeviceInfo().pipe((0,D.R)(this.destroy$)).subscribe(_=>{this.videoDevices=_.videoInput.map(F=>F),this.onWebcamSelected(this.videoDevices[0].deviceId),this.selectedWebcamId=this.videoDevices[0].deviceId},_=>{this.logger.info("Error fetching webcam: ",_)})}onWebcamSelected(_){const F=this.videoDevices.find(V=>V.deviceId===_);this.isWebcamReady=!1,F&&(0,c.D)(navigator.mediaDevices.getUserMedia({audio:!1,video:{width:m.n1,height:m.K7,deviceId:F.deviceId}})).pipe((0,G.q)(1),(0,D.R)(this.destroy$),(0,x.b)(V=>V.getVideoTracks().some(b=>b.enabled&&"live"===b.readyState)?(0,g.of)(V):(0,I._)("Webcam not ready"))).subscribe(V=>{this.clearTracks(),this.webcamHolder.nativeElement.srcObject=V,this.webcamHolder.nativeElement.onloadedmetadata=b=>{this.isWebcamReady=!0,this.webcamHolder.nativeElement.play(),this.gfnWebcamService.mediaSetup.webcam=F.label,this.gfnWebcamService.mediaSetup.webcamDevId=F.deviceId}},V=>{this.isWebcamReady=!1,this.clearTracks(),this.logger.info("Error accessing your webcam: ",V)})}clearTracks(){var _,F;const V=null===(F=null===(_=this.webcamHolder.nativeElement)||void 0===_?void 0:_.srcObject)||void 0===F?void 0:F.getTracks();null==V||V.forEach(b=>b.stop())}ngOnDestroy(){this.clearTracks(),this.destroy$.next(!0),this.destroy$.complete()}}return O.\u0275fac=function(_){return new(_||O)(n.Y36(y.$),n.Y36(T.ed))},O.\u0275cmp=n.Xpm({type:O,selectors:[["gfn-playtestlive-webcampreview"]],viewQuery:function(_,F){if(1&_&&n.Gf(E,5),2&_){let V;n.iGM(V=n.CRH())&&(F.webcamHolder=V.first)}},decls:17,vars:13,consts:[["fxLayout","column","fxFlex","",1,"webcam-dialog-container"],[1,"webcam-dialog-header"],[1,"font-header6"],[1,"font-body2","webcam-dialog-select",3,"disableOptionCentering","value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"webcam-dialog-preview"],["fxLayout","row","fxLayoutAlign","center center"],["width","525","height","348"],["webcamHolder",""],[1,"webcam-dialog-actions"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","60px"],["mat-button","",1,"font-button2","hig-button",3,"mat-dialog-close","disabled"],[3,"value"]],template:function(_,F){1&_&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"span",2),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"mat-select",3),n.NdJ("valueChange",function(b){return F.selectedWebcamId=b})("selectionChange",function(b){return F.onWebcamSelected(b.value)}),n.YNc(6,P,2,2,"mat-option",4),n.qZA(),n.qZA(),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n._UZ(9,"video",7,8),n.qZA(),n.qZA(),n.TgZ(11,"div",9),n.TgZ(12,"mat-dialog-actions",10),n.TgZ(13,"button",11),n._uU(14),n.ALo(15,"uppercase"),n.ALo(16,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&_&&(n.xp6(3),n.hij(" ",n.lcZ(4,7,"playtestLive.selectWebcamDialog.selectYourWebcam")," "),n.xp6(2),n.Q6J("disableOptionCentering",!0)("value",F.selectedWebcamId),n.xp6(1),n.Q6J("ngForOf",F.videoDevices),n.xp6(7),n.Q6J("mat-dialog-close",!0)("disabled",!F.isWebcamReady),n.xp6(1),n.hij(" ",n.lcZ(15,9,n.lcZ(16,11,"playtestLive.selectWebcamDialog.next"))," "))},directives:[a.xw,a.yH,s.gD,p.sg,a.Wh,t.H8,a.SQ,w.lW,t.ZT,h.ey],pipes:[u.X$,p.gd],styles:[".webcam-dialog-header[_ngcontent-%COMP%]{margin-bottom:35px}.webcam-dialog-header[_ngcontent-%COMP%] > .webcam-dialog-select[_ngcontent-%COMP%]{margin-top:16px}.webcam-dialog-preview[_ngcontent-%COMP%]{margin-bottom:60px}.webcam-dialog-actions[_ngcontent-%COMP%]{margin-top:auto}.webcam-dialog-container[_ngcontent-%COMP%]{max-width:100%}"]}),O})()},72946:(He,de,e)=>{"use strict";e.d(de,{Q:()=>ae});var n=e(3786),i=e(2984),D=e(6484),m=e(79441),y=e(81134),T=e(45871),r=e(34361),a=e(12702),s=e(85816),p=e(53466),l=e(18293),t=e(22663),w=e(98636);const h={protocol:"",host:"",port:443,app:"",streamName:"",iceServers:[],tcpMuxPolicy:"",mediaElementId:void 0,mediaConstraints:{audio:{deviceId:"",echoCancellation:!0},video:{deviceId:"",width:{min:320,ideal:640,max:640},height:{min:240,ideal:360,max:480},frameRate:30}},connectionParams:{host:"",app:"live"},bandwidth:{audio:56,video:512},cameraWidth:640,cameraHeight:360},c={rcMode:"cbr",videoAvgBitrate:25e5,videoMaxBitrate:35e5,gopLength:60},g={videoWidth:1280,videoHeight:720,videoFPS:30,metaDataPacketSizeInBytes:16e3};var I=e(27779),G=e(12556),x=e(43124),E=e(4906),P=e(2316),v=e(79911),O=e(28619),C=e(91571),_=e(61786),F=e(79902),V=e(33927),b=e(27354),B=e(88639);const U={offerToReceiveAudio:!0,offerToReceiveVideo:!0};let S=(()=>{class me{constructor(ue){this.loggingService=ue,this.messagesSubject=new m.xQ,this.signalingMessages$=this.messagesSubject.asObservable(),this.numIceCandidates=0,this.signalingUrl="",this.streamName="",this.handleICECandidateEvent=X=>{this.logger.info(X),X.candidate&&this.sendCandidateMessage({handleCandidate:this.streamName,data:{candidate:X.candidate}})},this.handleNegotiationNeededEvent=X=>{this.logger.info(X)},this.handleICEConnectionStateChangeEvent=X=>{switch(this.logger.info(X),this.rtcPeerConnection.iceConnectionState){case"closed":case"failed":case"disconnected":this.closeWebRtc()}},this.handleSignalingStateChangeEvent=X=>{switch(this.logger.info(X),this.rtcPeerConnection.signalingState){case"closed":this.closeWebRtc()}},this.handleTrackEvent=X=>{this.logger.info(X)},this.reportError=X=>{this.logger.error("got Error: "+X.name)},this.logger=this.loggingService.getLogger("WebrtcService"),this.mediaSetup=B.o}connect(){(!this.socket$||this.socket$.closed)&&(this.socket$=this.createWebSocket(),this.socket$.subscribe(ue=>{this.logger.verbose("Received a message: send to msgHandler"),this.messagesSubject.next(ue)}))}createWebSocket(){return(0,b.j)({url:this.signalingUrl,protocol:"json",openObserver:{next:()=>{this.logger.info("WebrtcService: connected to websocket")}},closeObserver:{next:()=>{this.logger.info("WebrtcService: websocket connection closed"),this.socket$=void 0}}})}setUrlAndStreamName(ue,X){this.signalingUrl=ue,this.streamName=X,this.logger.info("setUrlAndStreamName "+this.signalingUrl+": "+this.streamName)}initSignalingConnection(){return this.logger.info("initSignalingConnection"),""===this.signalingUrl?(this.logger.error("invalid signaling url"),!1):"ws"!==this.signalingUrl.substr(0,2)?(this.logger.error("invalid protocol requested"),!1):(this.addIncomingMessageHandler(),this.requestMediaDevices().pipe((0,p.q)(1)).subscribe(ue=>{this.logger.info("got media: signaling initialized"),this.initRtcPeerConnection()}),!0)}requestMediaDevices(){return new _.y(ue=>{this.logger.info("requestMediaDevices");try{this.logger.info("selected devices: "+this.mediaSetup.micDevId+": "+this.mediaSetup.webcamDevId),(0,r.D)(navigator.mediaDevices.getUserMedia({audio:{deviceId:this.mediaSetup.micDevId,echoCancellation:!0},video:{width:864,height:480,deviceId:this.mediaSetup.webcamDevId}})).subscribe(X=>{X.getTracks().forEach(j=>{this.logger.info("track: "+j.id+" readyState: "+j.readyState)}),this.mediaStream=X,ue.next()})}catch(X){ue.error(X),this.logger.error(`getUserMedia() error: ${X.name}`)}})}initRtcPeerConnection(){this.logger.info("initRtcPeerConnetion"),this.createPeerConnection(),this.mediaStream.getTracks().forEach(ue=>this.rtcPeerConnection.addTrack(ue,this.mediaStream));try{let ue;(0,r.D)(this.rtcPeerConnection.createOffer(U)).pipe((0,p.q)(1),(0,w.b)(X=>{ue=X}),(0,F.w)(X=>(0,r.D)(this.rtcPeerConnection.setLocalDescription(ue)))).subscribe(X=>{this.logger.info("offer created and set"),this.sendOfferMessage({handleOffer:this.streamName,transport:"udp",data:{sdp:ue}})})}catch(ue){this.handleGetUserMediaError(ue)}}addIncomingMessageHandler(){this.connect(),this.logger.info("connect() done: addIncomingMessageHandler"),this.signalingMessages$.subscribe(ue=>{if(this.logger.info("Received message obj:"),this.logger.info(ue.data),ue.data.type)switch(ue.data.type){case"status":this.logger.info("Received message status");break;case"offer":this.logger.info("Received message offer"),this.handleOfferMessage(ue.data);break;case"answer":this.logger.info("Received message answer"),this.handleAnswerMessage(ue.data);break;case"hangup":this.handleHangupMessage(ue);break;case"ice-candidate":case"candidate":this.logger.info("Received message ice-candidate"),this.handleICECandidateMessage(ue.data.candidate);break;default:this.logger.info("unknown message of type "+ue.type)}else ue.data.sdp&&(this.logger.info("Received message is SDP"),"answer"===ue.data.sdp.type&&(this.logger.info("Received message sdp-answer"),this.handleAnswerMessage(ue.data.sdp)))},ue=>this.logger.error(ue)),this.logger.info("addIncomingMessageHandler done")}sendMessage(ue){this.logger.info("sending message: "+ue.type),this.socket$.next(ue)}sendOfferMessage(ue){this.logger.info("sending offerMessage"),this.socket$.next(ue)}sendCandidateMessage(ue){this.logger.info("sending candidateMessage"),this.socket$.next(ue)}sendPublishMessage(ue){this.logger.info("sending PUBLISH msg"),this.socket$.next(ue)}handleOfferMessage(ue){this.logger.info("handle incoming offer"),this.rtcPeerConnection||this.createPeerConnection(),this.mediaStream||this.startWebRtc(),(0,r.D)(this.rtcPeerConnection.setRemoteDescription(new RTCSessionDescription(ue))).pipe((0,p.q)(1),(0,w.b)(X=>{this.mediaStream.getTracks().forEach(j=>this.rtcPeerConnection.addTrack(j,this.mediaStream)),this.logger.info("setRemoteDescription done")}),(0,F.w)(X=>(0,r.D)(this.rtcPeerConnection.createAnswer())),(0,w.b)(X=>{this.logger.info(`createAnswer done: ${X}`)}),(0,F.w)(X=>(0,r.D)(this.rtcPeerConnection.setLocalDescription(X))),(0,p.q)(1),(0,V.U)(X=>{this.logger.info(`localDescription done: ${this.rtcPeerConnection.localDescription}`),this.sendMessage({type:"answer",data:this.rtcPeerConnection.localDescription})})).subscribe(X=>{this.logger.info("Negotiation succeeded: ",X)},X=>{this.logger.info("Negotiation error: ",X),this.handleGetUserMediaError(X)},()=>{this.logger.info("Negotiation success")})}handleAnswerMessage(ue){this.logger.info("handle incoming answer"),this.rtcPeerConnection.setRemoteDescription(ue)}handleHangupMessage(ue){this.logger.info(ue),this.closeWebRtc()}handleICECandidateMessage(ue){const X=new RTCIceCandidate(ue);this.rtcPeerConnection.addIceCandidate(X).catch(this.reportError),this.numIceCandidates++,this.numIceCandidates>1&&(this.logger.info("PUBLISH NOW"),this.sendPublishMessage({publish:this.streamName,mode:"live",keyFramerate:3e3}))}createPeerConnection(){this.logger.info("creating PeerConnection"),this.rtcPeerConnection=new RTCPeerConnection({iceServers:[{urls:"stun:stun2.l.google.com:19302"}]}),this.rtcPeerConnection.onicecandidate=this.handleICECandidateEvent,this.rtcPeerConnection.oniceconnectionstatechange=this.handleICEConnectionStateChangeEvent,this.rtcPeerConnection.onsignalingstatechange=this.handleSignalingStateChangeEvent,this.rtcPeerConnection.onnegotiationneeded=this.handleNegotiationNeededEvent,this.rtcPeerConnection.ontrack=this.handleTrackEvent}startWebRtc(){this.logger.info("starting local stream"),this.mediaStream.getTracks().forEach(ue=>{ue.enabled=!0,this.logger.info("track: "+ue+" readyState: "+ue.readyState)})}closeWebRtc(){this.logger.info("Close webrtc"),this.rtcPeerConnection&&(this.rtcPeerConnection.ontrack=null,this.rtcPeerConnection.onicecandidate=null,this.rtcPeerConnection.oniceconnectionstatechange=null,this.rtcPeerConnection.onsignalingstatechange=null,this.mediaStream.getTracks().forEach(ue=>{ue.stop()}),this.rtcPeerConnection.getTransceivers().forEach(ue=>{ue.stop()}),this.rtcPeerConnection.close(),this.rtcPeerConnection=null)}handleGetUserMediaError(ue){switch(null==ue?void 0:ue.name){case"NotFoundError":this.logger.info("Unable to start streaming because no camera and/or microphone found");break;case"SecurityError":case"PermissionDeniedError":break;case null:case void 0:this.logger.error("Undefined error message.");break;default:this.logger.error("Error opening your camera and/or microphone: "+ue.message)}this.closeWebRtc()}}return me.\u0275fac=function(ue){return new(ue||me)(P.LFG(D.ed))},me.\u0275prov=P.Yz7({token:me,factory:me.\u0275fac,providedIn:"root"}),me})();var Y=e(52164);let se=(()=>{class me{constructor(ue){this.loggingService=ue,this.logger=this.loggingService.getLogger("Red5PublisherService"),this.mediaSetup=B.o,this.rtcPublisher=new Y.RTCPublisher}startRed5RtcPublish(ue){this.logger.info("[startRed5RtcPublish]: started"),this.logger.info("Connecting using rtcConfig: ",ue),(0,r.D)(this.rtcPublisher.init(ue)).pipe((0,w.b)(this.rtcPublisher.on("*",this.onRed5PublisherEvent.bind(this))),(0,s.zg)(X=>this.rtcPublisher.publish()),(0,p.q)(1)).subscribe(X=>{this.logger.info("[startRed5RtcPublish]: Red5Publish succeeded: ",X)},X=>{this.logger.error("[startRed5RtcPublish]: Publisher Failed",X)})}onRed5PublisherEvent(ue){this.logger.info("[onRed5PublisherEvent]:",ue.type)}stopRed5RtcPublish(){this.logger.info("[stopRed5RtcPublish]: Stop Red5Pro streaming"),this.rtcPublisher.unpreview(),(0,r.D)(this.rtcPublisher.unpublish()).pipe((0,p.q)(1)).subscribe(ue=>{this.rtcPublisher.off("*",this.onRed5PublisherEvent),this.logger.info("[stopRed5RtcPublish]: Unpublish Complete")},ue=>{this.logger.error("[stopRed5RtcPublish]: Unpublish Failed: ",ue)})}}return me.\u0275fac=function(ue){return new(ue||me)(P.LFG(D.ed))},me.\u0275prov=P.Yz7({token:me,factory:me.\u0275fac,providedIn:"root"}),me})();var fe=e(73341),$=e(52349);let ae=(()=>{class me{constructor(ue,X,j,K,Z,L,W,te,ie,Q,k,oe){this.loggingService=ue,this.bridgeService=X,this.endpointFactory=j,this.gfnWebcamService=K,this.dialogService=Z,this.webrtcService=L,this.red5PublisherService=W,this.appConfig=te,this.idmService=ie,this.telemetryUtilService=Q,this.telemetryService=k,this.projectInterfaceService=oe,this.clientIngestURL="",this.webCamSupport=I.Py,this.playtestPermissionsGranted=!1,this.playtestLiveRunning=!1,this.validIngest=!1,this.encConfig=c,this.streamConfig=g,this.id="",this.timerSource=void 0,this.micTested=!1,this.streamerSessionId="",this.vdkSessionId="",this.nonce=null,this.stop$=new m.xQ,this.audioContext=null,this.audioSource=null,this.mediaStream=null,this.audioAnalyzer=null,this.logger=this.loggingService.getLogger("PlaytestLiveService"),this.vdkPlaytestConfig=this.appConfig.vdkPlaytestConfig}initialize(){var ue;(null===(ue=this.appConfig.featureEnablement)||void 0===ue?void 0:ue.playtest)&&(this.projectInterfaceService.streamingSessionSetupSuccess$.subscribe(X=>{this.logger.info("Received streaming streamingSessionSetupSuccess notification:",X),this.setStreamingSessionId(X.sessionId)},X=>{this.logger.error("Error while receiving streamingSessionSetupSuccess:",X)}),this.projectInterfaceService.streamingBegin$.subscribe(X=>{this.logger.info("Received streaming streamingBegin notification:",X),this.startPlaytestLive()},X=>{this.logger.error("Error while receiving streamingBegin:",X)}),this.projectInterfaceService.streamingEnd$.subscribe(X=>{this.logger.info("Received streaming streamingEnd notification:",X),this.stopPlaytestLive()},X=>{this.logger.error("Error while receiving streamingEnd:",X)}))}initiatePlaytestLive(ue,X,j){var K;if(null===(K=this.appConfig.featureEnablement)||void 0===K?void 0:K.playtest){this.logger.info("Initiating playtest"),this.streamerSessionId="",this.id=ue,this.vdkSessionId=X,this.nonce=j,this.telemetryService.setEventsCommonData({integrationId:E.dp.GFN_PLAYTEST},!1,!0);const L=!0,W=!0;return(D.ng.isBrowserPlatform()?(0,y.of)(!0):this.bridgeService.executeCommand(i.Gh.Gfn.Streaming.AuthorizeAVDevices,{mic:L,camera:W})).pipe((0,s.zg)(ie=>ie?this.idmService.getAuthToken(!1):(0,T._)("AuthorizeAVDevices Error")),(0,s.zg)(ie=>((null==ie?void 0:ie.token)&&(this.authToken=ie.token),this.getSessionInfo())),(0,s.zg)(ie=>ie?this.dialogService.openPlaytestLivePermissionHigDialog(this.playtestSession):(0,T._)("HIG dialog Error")),(0,s.zg)(ie=>ie?this.dialogService.openPlaytestLiveWebcamPreview():(this.sendTelemetry(G.p3A.SessionConsentDenied,G.Xj5.Success),(0,T._)("Permissions not granted"))),(0,s.zg)(ie=>this.dialogService.openPlaytestLiveMicrophonePreview()),(0,s.zg)(ie=>ie?(this.logger.info("Permissions granted"),this.playtestPermissionsGranted=!0,(0,y.of)(!0)):(0,T._)("Launch Cancelled")),(0,p.q)(1),(0,l.K)(ie=>(this.logger.error("initiatePlaytestLive error:",ie),(0,T._)("initiatePlaytestLive Error"))))}}startMic(ue){var X;(null===(X=this.appConfig.featureEnablement)||void 0===X?void 0:X.playtest)&&(0,r.D)(navigator.mediaDevices.getUserMedia({audio:{deviceId:ue,echoCancellation:!0}})).pipe((0,p.q)(1),(0,t.R)(this.stop$),(0,w.b)(j=>j.getAudioTracks().some(K=>K.enabled&&"live"===K.readyState)?(0,y.of)(j):(0,T._)("Microphone not ready"))).subscribe(j=>{this.mediaStream=j,this.audioContext=new AudioContext,this.audioAnalyzer=this.audioContext.createAnalyser(),this.audioSource=this.audioContext.createMediaStreamSource(this.mediaStream),this.audioAnalyzer.fftSize=I.CJ,this.audioAnalyzer.minDecibels=I.ez,this.audioAnalyzer.maxDecibels=I.YQ,this.audioAnalyzer.smoothingTimeConstant=I.M4,this.audioSource.connect(this.audioAnalyzer),this.logger.info("Starting mic")},j=>{this.logger.info("Error accessing microphone: ",j)})}stopMic(){var ue,X;(null===(ue=this.appConfig.featureEnablement)||void 0===ue?void 0:ue.playtest)&&(this.logger.info("Stopping mic"),this.audioSource&&this.audioAnalyzer&&this.audioSource.disconnect(this.audioAnalyzer),this.audioSource=null,this.audioAnalyzer=null,this.audioContext&&this.audioContext.close(),this.audioContext=null,this.mediaStream&&(null===(X=this.mediaStream.getTracks())||void 0===X||X.forEach(j=>{j.stop()})),this.mediaStream=null,this.stop$.next(!0),this.stop$.complete())}createEndpoint(ue){return this.endpointFactory.createEndpoint({config:{timeout:this.vdkPlaytestConfig.defaultTimeout,timeBetweenRetries:this.vdkPlaytestConfig.defaultTimeBetweenRetries,maxRetries:ue?1:3}})}ptmsHeartbeatPing(){const ue=`${this.vdkPlaytestConfig.ptmsUrl}/v1/playtest/session/${this.playtestSession.sessionID}/heartbeat`;this.logger.verbose("Heartbeat API call");const X=this.nonce?`Nonce ${this.nonce}`:`Bearer ${this.authToken}`;this.endPoint=this.createEndpoint(!0),this.endPoint.post(ue,{headers:{Authorization:X}}).pipe((0,p.q)(1)).subscribe(j=>{this.logger.verbose("Heartbeat ping success")},j=>{401===j.status?this.idmService.getAuthToken(!0).pipe((0,p.q)(1)).subscribe(K=>{this.logger.info("Heartbeat getAuthToken refreshed"),this.authToken=K.token,this.ptmsHeartbeatPing()}):this.logger.error("Heartbeat ping error: ",j)})}getIngestUrls(){const ue=`${this.vdkPlaytestConfig.ptmsUrl}/v1/playtest/session/${this.playtestSession.sessionID}/ingest`,X=this.nonce?`Nonce ${this.nonce}`:`Bearer ${this.authToken}`;return this.endPoint=this.createEndpoint(!0),this.endPoint.post(ue,{headers:{Authorization:X}}).pipe((0,w.b)(j=>{this.validIngest=!0,this.startHeartbeatPing(),this.ingestDetails=Object.assign({},{ingest:j.ingest},{webcam:j.webcam},{streamProperties:j.streamProperties})},j=>{this.logger.error("Ingest url error: ",j),(0,T._)("getIngestUrls Error")}))}getSessionInfo(){const ue=`${this.vdkPlaytestConfig.ptmsUrl}/v1/playtest/session/${this.vdkSessionId}`,X=this.nonce?`Nonce ${this.nonce}`:`Bearer ${this.authToken}`;return this.endPoint=this.createEndpoint(!0),this.endPoint.get(ue,{headers:{Authorization:X}}).pipe((0,w.b)(j=>{this.playtestSession=j},j=>{this.logger.error("getSessionInfo error: ",j),(0,T._)("getSessionInfo Error")}))}clientWebcamStart(){const ue=this.clientIngestURL.lastIndexOf("/"),X=this.clientIngestURL.slice(ue+1,this.clientIngestURL.length);return this.webCamSupport===I.Tz?(this.logger.info("Standard WebRTC streaming started"),this.webrtcService.setUrlAndStreamName(this.clientIngestURL,X),this.webrtcService.mediaSetup.micDevId=this.gfnWebcamService.mediaSetup.micDevId,this.webrtcService.mediaSetup.webcamDevId=this.gfnWebcamService.mediaSetup.webcamDevId,this.webrtcService.initSignalingConnection()):this.webCamSupport===I.Py?(this.logger.info("Red5Pro PublisherSDK streaming started"),this.red5PublisherService.mediaSetup.micDevId=this.gfnWebcamService.mediaSetup.micDevId,this.red5PublisherService.mediaSetup.webcamDevId=this.gfnWebcamService.mediaSetup.webcamDevId,this.ingestDetails.webcam=Object.assign({},this.ingestDetails.webcam,{mediaConstraints:h.mediaConstraints,mediaElementId:void 0}),this.ingestDetails.webcam.mediaConstraints.audio.deviceId=this.gfnWebcamService.mediaSetup.micDevId,this.ingestDetails.webcam.mediaConstraints.video.deviceId=this.gfnWebcamService.mediaSetup.webcamDevId,this.ingestDetails.webcam.cameraWidth=h.cameraWidth,this.ingestDetails.webcam.cameraHeight=h.cameraHeight,this.ingestDetails.webcam.bandwidth=h.bandwidth,this.red5PublisherService.startRed5RtcPublish(this.ingestDetails.webcam)):void 0}clientWebcamStop(){"standardWebrtc"===this.webCamSupport?this.webrtcService.closeWebRtc():"red5ProPublisherSdk"===this.webCamSupport&&this.red5PublisherService.stopRed5RtcPublish()}setStreamingSessionId(ue){this.streamerSessionId=ue}startPlaytestLive(){null==this.playtestSession||!this.playtestPermissionsGranted||this.getIngestUrls().pipe((0,p.q)(1),(0,w.b)(ue=>{this.encConfig.videoAvgBitrate=Number(this.ingestDetails.streamProperties.videoBW),this.encConfig.videoMaxBitrate=Number(this.ingestDetails.streamProperties.videoBW),this.streamConfig.videoWidth=this.ingestDetails.streamProperties.videoWidth,this.streamConfig.videoHeight=this.ingestDetails.streamProperties.videoHeight,this.streamConfig.videoFPS=this.ingestDetails.streamProperties.videoFPS}),(0,s.zg)(ue=>{const j=this.ingestDetails.ingest,K=Object.assign({},this.encConfig),Z=Object.assign({},this.streamConfig);return this.bridgeService.executeCommand(i.Gh.Gfn.Gfnbroadcast.BroadcastConnect,{protocol:"rtmp",ingestURL:j,encoderConfig:K,streamingConfig:Z})})).subscribe(ue=>{this.clientWebcamStart(),this.logger.info("Playtest started"),this.playtestLiveRunning=!0,this.sendTelemetry(G.p3A.SessionStart,G.Xj5.Success)},ue=>{this.logger.info("Playtest broadcast connection error: ",ue),this.clientWebcamStop(),this.ptmsStopIngest(),this.heartbeatSubscription.unsubscribe(),this.authToken=null,this.playtestSession=null,this.stopMic(),this.sendTelemetry(G.p3A.SessionStart,G.Xj5.Failure),this.telemetryService.setEventsCommonData({integrationId:x.wy.Undefined},!1,!0)})}ptmsStopIngest(){if(!this.validIngest)return;const ue=`${this.vdkPlaytestConfig.ptmsUrl}/v1/playtest/session/${this.playtestSession.sessionID}/ingest`,X=this.nonce?`Nonce ${this.nonce}`:`Bearer ${this.authToken}`;this.endPoint=this.createEndpoint(!0),this.endPoint.delete(ue,{headers:{Authorization:X}}).subscribe(j=>{this.validIngest=!1},j=>{this.logger.error("Stop ingest error: ",j),401===j.status?this.idmService.getAuthToken(!0).pipe((0,p.q)(1)).subscribe(K=>{this.authToken=K.token,this.ptmsStopIngest()}):(0,T._)("ptmsStopIngest Error")})}stopPlaytestLive(){this.playtestLiveRunning&&(this.bridgeService.executeCommand(i.Gh.Gfn.Gfnbroadcast.BroadcastDisconnect).pipe((0,p.q)(1)).subscribe(ue=>{this.logger.info("Playtest ended"),this.sendTelemetry(G.p3A.SessionStop,G.Xj5.Success,!0)},ue=>{this.logger.info("Playtest broadcast disconnection error: ",ue),this.sendTelemetry(G.p3A.SessionStop,G.Xj5.Failure,!0)}),this.clientWebcamStop(),this.ptmsStopIngest(),this.heartbeatSubscription.unsubscribe(),this.playtestLiveRunning=!1,this.stopMic(),this.dialogService.openPlaytestLiveFeedbackHigDialog(this.playtestSession)),this.playtestPermissionsGranted=!1,this.authToken=null,this.playtestSession=null}startHeartbeatPing(){this.timerSource=(0,a.H)(1e3,I.n_),this.heartbeatSubscription=this.timerSource.subscribe(ue=>{this.logger.verbose("HeartBeating every 60 seconds call "),this.ptmsHeartbeatPing()})}sendTelemetry(ue,X,j=!1){var K,Z,L,W,te,ie,Q,k,oe,N,q,Me,xe,ct,Se,Ge,St;return(0,n.mG)(this,void 0,void 0,function*(){try{yield this.telemetryUtilService.sendPlaytesterSessionEvent(ue,X,null!==(Z=null===(K=this.playtestSession)||void 0===K?void 0:K.sessionID)&&void 0!==Z?Z:"",null!==(L=this.streamerSessionId)&&void 0!==L?L:"",null!==(ie=null===(te=null===(W=this.playtestSession)||void 0===W?void 0:W.gameInfo)||void 0===te?void 0:te.gameDeveloper)&&void 0!==ie?ie:"",null!==(oe=null===(k=null===(Q=this.playtestSession)||void 0===Q?void 0:Q.gameInfo)||void 0===k?void 0:k.gameName)&&void 0!==oe?oe:"",null!==(Me=null===(q=null===(N=this.playtestSession)||void 0===N?void 0:N.gameInfo)||void 0===q?void 0:q.gameBuild)&&void 0!==Me?Me:"",null!==(Se=null===(ct=null===(xe=this.playtestSession)||void 0===xe?void 0:xe.gameInfo)||void 0===ct?void 0:ct.gameCMSID)&&void 0!==Se?Se:"",null!==(Ge=this.gfnWebcamService.mediaSetup.webcam)&&void 0!==Ge?Ge:"",null!==(St=this.gfnWebcamService.mediaSetup.microphone)&&void 0!==St?St:"",this.micTested?G.PoW.Yes:G.PoW.No,"")}catch(Tt){this.logger.error("Telemetry send failed",Tt)}j&&this.telemetryService.setEventsCommonData({integrationId:x.wy.Undefined},!1,!0)})}}return me.\u0275fac=function(ue){return new(ue||me)(P.LFG(D.ed),P.LFG(D.dF),P.LFG(v.V9),P.LFG(O.$),P.LFG(C.x),P.LFG(S),P.LFG(se),P.LFG(fe.VK),P.LFG(G.No2),P.LFG(G.wU6),P.LFG(x.y0),P.LFG($.m3))},me.\u0275prov=P.Yz7({token:me,factory:me.\u0275fac,providedIn:"root"}),me})()},55302:(He,de,e)=>{"use strict";e.d(de,{uu:()=>fe,F0:()=>i.F0,R7:()=>i.R7,PT:()=>ae,Il:()=>i.Il,Fw:()=>i.Fw,oW:()=>i.oW,Ad:()=>i.Ad,K2:()=>n.K,Om:()=>i.Om,$U:()=>i.$U});var n=e(98135),i=e(57673),D=e(90490),m=e(81134),y=e(61486),T=e(85816),r=e(33927),a=e(18293),s=e(53466),p=e(9170),l=e(79902),t=e(202),w=e(67067),h=e(89166),u=e(2316),o=e(6484),f=e(54364),c=e(60086),g=e(73341),I=e(33987),G=e(43124);let x=(()=>{class me{constructor(ue,X,j,K,Z){this.serviceWorkerService=X,this.telemetryService=j,this.idmService=K,this.configuration=Z,this.logger=ue.getLogger("PushNotificationTelemetryService"),this.serviceWorkerService.swPushNotificationTelemetryListener.subscribe(this.onNewTelemetryEvent.bind(this))}sendTokenRegisteredSuccessTelemetry(ue){this.fetchFirebaseProjectID().pipe((0,s.q)(1)).subscribe(X=>{this.logger.info("sending Token Registered Success Telemetry"),this.telemetryService.push(this.createPushNotificationTokenRegisteredDef(ue,X))},X=>{this.logger.info("Error while fetching firebase Project Id",X),this.telemetryService.push(this.createPushNotificationTokenRegisteredDef(ue))})}sendPushNotificationFailureTelemetry(ue,X){this.fetchFirebaseProjectID().pipe((0,s.q)(1)).subscribe(j=>{this.logger.info("sending Token Failure Telemetry"),this.telemetryService.push(this.createPushNotificationErrorDef(ue,X,j))},j=>{this.logger.info("Error while fetching firebase Project Id",j),this.telemetryService.push(this.createPushNotificationErrorDef(ue,X))})}sendPushNotificationCleanUpTelemetry(ue){this.fetchFirebaseProjectID().pipe((0,s.q)(1)).subscribe(X=>{this.logger.info("sending KV Store CleanUp Telemetry"),this.telemetryService.push(this.createPushNotificationPurgedEntriesDef(ue,X))},X=>{this.logger.info("Error while fetching firebase Project Id",X),this.telemetryService.push(this.createPushNotificationPurgedEntriesDef(ue))})}fetchFirebaseProjectID(){return this.firebaseProjectId?(0,m.of)(this.firebaseProjectId):this.idmService.getPushNotificationSettings().pipe((0,r.U)(ue=>{var X,j;return(null===(j=null===(X=this.configuration)||void 0===X?void 0:X.firebase)||void 0===j?void 0:j.useStage)?ue.push_notifications.fcm.stage.projectId:ue.push_notifications.fcm.projectId}),(0,a.K)(ue=>(this.logger.error("Some error occured while fetching Jarvis Settings",ue),(0,m.of)(""))))}onNewTelemetryEvent(ue){var X,j,K,Z,L,W,te,ie,Q,k,oe,N;if(this.logger.info("Telemetry message recieved from SW",ue),(null==ue?void 0:ue.type)===I.rL.PushNotificationTelemetry&&(null==ue?void 0:ue.content)){const q=JSON.parse(null==ue?void 0:ue.content);if(this.logger.info("Telemetry Message Type is: ",null==q?void 0:q.type),(null==q?void 0:q.type)===I.nz.PushNotificationReceived){const Me=new w.xNG({requestId:null!==(j=null===(X=null==q?void 0:q.data)||void 0===X?void 0:X.requestId)&&void 0!==j?j:"",projectId:null!==(Z=null===(K=null==q?void 0:q.data)||void 0===K?void 0:K.projectId)&&void 0!==Z?Z:"",sentTs:null!==(W=null===(L=null==q?void 0:q.data)||void 0===L?void 0:L.sentTs)&&void 0!==W?W:0,ttl:null!==(ie=null===(te=null==q?void 0:q.data)||void 0===te?void 0:te.ttl)&&void 0!==ie?ie:0,type:null!==(k=null===(Q=null==q?void 0:q.data)||void 0===Q?void 0:Q.type)&&void 0!==k?k:w.nfD.UNKNOWN});this.telemetryService.push(Me)}else(null==q?void 0:q.type)===I.nz.PushNotificationError&&this.sendPushNotificationFailureTelemetry(null===(oe=null==q?void 0:q.data)||void 0===oe?void 0:oe.errorDetails,null===(N=null==q?void 0:q.data)||void 0===N?void 0:N.errorCategory)}}createPushNotificationErrorDef(ue,X,j){return new w.TK_({errorDetails:null!=ue?ue:"",errorCategory:null!=X?X:w.F9b.GENERAL,projectId:null!=j?j:""})}createPushNotificationTokenRegisteredDef(ue,X){return new w.iB_({registrationProvider:ue,projectId:null!=X?X:""})}createPushNotificationPurgedEntriesDef(ue,X){return new w.GtW({deviceIds:ue,projectId:null!=X?X:""})}}return me.\u0275fac=function(ue){return new(ue||me)(u.LFG(o.ed),u.LFG(I.HR),u.LFG(G.y0),u.LFG(c.No),u.LFG(g.VK))},me.\u0275prov=u.Yz7({token:me,factory:me.\u0275fac,providedIn:"root"}),me})();var E=e(32854),P=e(17013);let O=(()=>{class me{constructor(ue,X,j,K,Z,L,W,te,ie){var Q,k;this.datePipe=X,this.idmService=j,this.systemInfoService=K,this.configuration=Z,this.distributedTracingUtilService=L,this.pushNotificationTelemetryService=W,this.clientHeadersService=te,this.pnsEndpointSdk=ie,this.browserProviderId=5,this.client="client_",this.uniqueClientsKey="client_unique_ids",this.dateFormat="yyyy-MM-dd HH:mm:ss +zzzz",this.kvStoreInfoArray=[],this.sortedKvStoreInfoArray=[],this.logger=ue.getLogger("PushNotificationRegistationService"),this.maxClientSize=null!==(k=null===(Q=this.configuration.pushNotification)||void 0===Q?void 0:Q.maxDeviceIds)&&void 0!==k?k:8,this.systemInfoService.getDeviceId().subscribe(oe=>{this.deviceId=oe})}updateUserKVStoreData(ue,X){return this.idmService.getClientData([],X).pipe((0,T.zg)(j=>{if(j){this.logger.info("Complete Client Data is received from KV Data store");const K=this.prepareUniqueClientData(j),Z=this.prepareMessagingData(ue);return this.logger.info(`kvStoreUniqueData: ${K} and kvStoreFirebaseData: ${Z} before calling KV Store`),(0,D.$R)(this.idmService.setClientData(this.uniqueClientsKey,K,X),this.idmService.setClientData(this.fetchCurrentClient(),Z,X))}}),(0,r.U)(()=>(this.logger.info("Firebase messaging information is set in KV Store"),this.pushNotificationTelemetryService.sendTokenRegisteredSuccessTelemetry(w.att.NNS),this.kvStoreInfoArray&&this.kvStoreInfoArray.length>this.maxClientSize&&(this.logger.info(`Total Browser Entries are ${this.kvStoreInfoArray.length}, Hence cleaning up the stale enteries in KV Store`),this.initializeCleanup(X)),!0)),(0,a.K)(j=>(this.pushNotificationTelemetryService.sendPushNotificationFailureTelemetry(JSON.stringify(j),w.F9b.DEVICE_REGISTRATION),X&&(X.setTag(h.NI.ErrorDetails,"Error interacting with KV Store"),this.distributedTracingUtilService.closeSpan(X)),this.logger.error("Some error occured while setting firebase information into KV Store",j),(0,m.of)(!1))))}registerDeviceForPns(ue,X){return this.idmService.accountStatusChanged.pipe((0,s.q)(1),(0,p.h)(j=>j.isAuthenticated),(0,l.w)(j=>(0,y.aj)([(0,m.of)(j),this.idmService.getAuthToken(!1),this.clientHeadersService.getCommonHeaders().pipe((0,s.q)(1)),this.systemInfoService.getDeviceId()])),(0,l.w)(([j,K,Z,L])=>(this.commonHeaders=Object.assign({},Object.assign(Object.assign({},Z),{Authorization:`GFNJWT ${K.token}`})),this.cachedPnsData=Object.assign({},{fcmToken:ue,authToken:K.token}),this.pnsEndpointSdk.pnsRegister({registrationToken:ue,deviceId:L},this.commonHeaders,X))),(0,r.U)(j=>(this.logger.info("PNS registration response: ",j),this.pushNotificationTelemetryService.sendTokenRegisteredSuccessTelemetry(w.att.PNS),!0)),(0,a.K)(j=>{var K;return this.logger.error("Error registering device with PNS: ",j),this.pushNotificationTelemetryService.sendPushNotificationFailureTelemetry(JSON.stringify(null!==(K=null==j?void 0:j.status)&&void 0!==K?K:j),w.F9b.DEVICE_REGISTRATION),X&&(X.setTag(h.NI.ErrorDetails,"Error registering device with PNS"),this.distributedTracingUtilService.closeSpan(X)),(0,m.of)(!1)}))}unregisterFromPns(){var ue;this.logger.info("User is logging out, unregister from PNS.");const X=this.distributedTracingUtilService.startSpan(h.j1.PnsUnregister);this.commonHeaders=(0,t.merge)(this.commonHeaders,this.pnsEndpointSdk.getCommonHeaders()),fetch(this.pnsEndpointSdk.generateUrl("unregister"),{method:"POST",body:JSON.stringify({previousRegistrationTokens:[null===(ue=this.cachedPnsData)||void 0===ue?void 0:ue.fcmToken]}),headers:this.commonHeaders,keepalive:!0}).then(j=>{this.distributedTracingUtilService.closeSpan(X),this.logger.info("Unregister Fetch api call successful: ",j)}).catch(j=>{X.setTag(h.NI.ErrorDetails,"Error unregistering device from PNS"),this.distributedTracingUtilService.closeSpan(X),this.logger.error("Unregister Fetch api call failed: ",j)})}initializeCleanup(ue){const X=[];for(this.sortedKvStoreInfoArray=this.kvStoreInfoArray.sort((j,K)=>{var Z,L;return(null===(Z=this.parseDateString(K.messagingData.lastSeen))||void 0===Z?void 0:Z.getTime())-(null===(L=this.parseDateString(j.messagingData.lastSeen))||void 0===L?void 0:L.getTime())});this.sortedKvStoreInfoArray&&this.sortedKvStoreInfoArray.length>this.maxClientSize;){const j=this.sortedKvStoreInfoArray.pop();j.clientId!==this.fetchCurrentClient()&&(this.uniqueClients.splice(this.uniqueClients.findIndex(K=>K===j.clientId),1),X.push(j.clientId),this.deleteClientId(j.clientId,ue))}if(this.idmService.setClientData(this.uniqueClientsKey,this.uniqueClients,ue).pipe((0,a.K)(j=>(this.logger.error("Some error occured while setting unique Clients in KV Store",j),(0,m.of)(!1)))).subscribe(),X.length>0){const j=X.map(K=>K.split("_")[1]);this.pushNotificationTelemetryService.sendPushNotificationCleanUpTelemetry(j)}}parseDateString(ue){if(void 0!==ue){const X=ue.split(" ")[0],j=Number(X.split("-")[0]),K=Number(X.split("-")[1]),Z=Number(X.split("-")[2]),L=ue.split(" ")[1],W=Number(L.split(":")[0]),te=Number(L.split(":")[1]),ie=Number(L.split(":")[2]);return new Date(j,K,Z,W,te,ie)}return new Date}prepareMessagingData(ue){const X=[],j={cloudMessagingId:ue,providerId:this.browserProviderId,uniqueId:this.deviceId,lastSeen:this.generateDate()};return X.push(JSON.stringify(j)),X}generateDate(){const ue=this.datePipe.transform(new Date,this.dateFormat).split(" ");return ue[0]+" "+ue[1]+" +"+ue[2].replace(/\D/g,"")}prepareUniqueClientData(ue){let X=[];return this.processClientData(ue),this.uniqueClients?this.isClientExists()?X=this.uniqueClients.slice():(X=this.uniqueClients.slice(),X.push(this.fetchCurrentClient()),this.uniqueClients=X):(X.push(this.fetchCurrentClient()),this.uniqueClients=[this.fetchCurrentClient()]),X}processClientData(ue){this.kvStoreInfoArray=[];const X=null==ue?void 0:ue.data,j=null==X?void 0:X.find(K=>K.key===this.uniqueClientsKey);X&&j&&(this.uniqueClients=j.value,X.forEach(K=>{if(j.value.includes(K.key)){const Z=JSON.parse(K.value[0]);Z.providerId===this.browserProviderId&&this.kvStoreInfoArray.push({clientId:K.key,messagingData:Z})}}))}deleteClientId(ue,X){this.idmService.deleteClientData(ue,[],X).pipe((0,a.K)(j=>(this.logger.error("Some error occured while deleting uniqueClient in KV Store",j),(0,m.of)(!1)))).subscribe()}isClientExists(){return void 0!==this.kvStoreInfoArray.find(ue=>ue.clientId===this.fetchCurrentClient())}fetchCurrentClient(){return this.client+this.deviceId}}return me.\u0275fac=function(ue){return new(ue||me)(u.LFG(o.ed),u.LFG(f.uU),u.LFG(c.No),u.LFG(o.Ob),u.LFG(g.VK),u.LFG(h.Dc),u.LFG(x),u.LFG(E.x5),u.LFG(P.o_))},me.\u0275prov=u.Yz7({token:me,factory:me.\u0275fac,providedIn:"root"}),me})();var C=e(92597),_=e(8095),F=e(98636),V=e(43365),b=e(12556),B=e(61481),U=e(68456),A=e(58283),S=e(52349),Y=e(71959),se=e(68590);let fe=(()=>{class me{constructor(ue,X,j,K,Z,L,W,te,ie,Q,k,oe,N){this.configuration=X,this.idmService=j,this.serviceWorkerService=K,this.experienceControl=Z,this.localeService=L,this.snackbar=W,this.translateService=te,this.projectInterfaceService=ie,this.guestModeService=Q,this.distributedTracingUtilService=k,this.pushNotificationRegistationService=oe,this.refreshUiService=N,this.throttleTime=2e4,this.snackBarDuration=7e3,this.isPnsEnabled=!1,this.logger=ue.getLogger("BrowserPushNotificationService"),this.firebaseStatusToSpanName=new Map,this.projectInterfaceService.setNotificationAllowedCallBack(this.isNotificationAllowed.bind(this))}init(){this.pushNotificationConfiguration$=this.fetchPushNotificationConfig().pipe((0,C.d)(1)),this.registerDeviceForPushNotifications().subscribe(ue=>{ue?this.logger.info("Device Registration is Sucessful"):this.logger.error("Error while Registering the Device")}),this.initializePushNotifications().subscribe(ue=>{ue&&this.logger.info("Push Notification is Sucessfully initiated for permission = granted users")}),this.initializePushNotificationKBAUrl(),this.listenToTracingEventsFromServiceWorker(),this.unregisterFromPnsOnUserLogout()}get pushNotificationKBAUrl(){return this.pushNotificationUrl}requestPermissionForPushNotification(){Notification.requestPermission().then(ue=>{ue===i.Ad.Granted?(this.logger.info("Browser Push Notification Permissions are Success"),this.showSuccessMessage(),this.initialize().subscribe(X=>{this.logger.info("Push Notification initialization is Success",X)})):ue===i.Ad.Denied?(this.logger.info("Browser Push Notification Permissions are denied"),this.showSnackBarWithKBA()):this.logger.info(ue===i.Ad.Default?"User has closed the Dialog without granting / denying the permissions":"Something unexpected happened, please check further logs")})}initialize(){return this.logger.info("initialize() is called"),this.isNotificationSupported()&&!this.registrationInProgress?(this.registrationInProgress=!0,(0,y.aj)([this.pushNotificationConfiguration$,this.idmService.accountStatusChanged]).pipe((0,_.p)(this.throttleTime),(0,T.zg)(([ue,X])=>ue&&X.isAuthenticated?(this.parentSpan=this.distributedTracingUtilService.startSpan(h.j1.PushNotificationRegistration),this.idmService.getPushNotificationSettings(this.parentSpan)):(0,m.of)(!1)),(0,a.K)(ue=>(this.logger.error("Some error occured while fetching Jarvis Settings",ue),this.parentSpan&&(this.parentSpan.setTag(h.NI.ErrorDetails,"Unable to fetch Jarvis Settings"),this.distributedTracingUtilService.closeSpan(this.parentSpan)),(0,m.of)(!1))),(0,r.U)(ue=>{var X,j;if(ue){this.logger.info("Push Notification Settings are fetched :",ue);const K=(null===(j=null===(X=this.configuration)||void 0===X?void 0:X.firebase)||void 0===j?void 0:j.useStage)?JSON.stringify(ue.push_notifications.fcm.stage):JSON.stringify(ue.push_notifications.fcm);return this.logger.info("Sending Push Notification Settings to SW: ",K),this.serviceWorkerService.postMessageSw({type:I.rL.PushNotification,content:K}),this.registrationInProgress=!1,!0}return this.logger.info("Push Notifications are not Supported for this session"),this.registrationInProgress=!1,!1}))):(this.logger.info("Push Notifications are not Supported"),(0,m.of)(!1))}showSuccessMessage(){this.translateService.get("notification.notificationSuccessMessage").pipe((0,s.q)(1)).subscribe(X=>this.snackbar.open(X,"",{duration:this.snackBarDuration,horizontalPosition:"left",panelClass:["nv-hig"]}),X=>{this.logger.info("Error getting the toast message",X)})}showSnackBarWithKBA(){(0,y.aj)([this.translateService.get("common.learnMore"),this.translateService.get("notification.notificationBlockMessage")]).pipe((0,r.U)(([j,K])=>{this.snackbar.open(K,j,{duration:this.snackBarDuration,horizontalPosition:"left",panelClass:["nv-hig"]}).onAction().subscribe(Z=>window.open(this.pushNotificationKBAUrl))})).subscribe(()=>this.logger.info("show Snack Bar With KBA is success"),j=>this.logger.error("Error while showing snackbar wirh KBAs",j))}initializePushNotificationKBAUrl(){const ue=this.configuration.redirect.serverUrl,X=b.qBq.GFN_PC_BROWSER_PUSH_NOTIFICATION;this.localeService.localeChanged.subscribe(j=>{this.pushNotificationUrl=`${ue}${j}&page=${X}`},j=>{this.logger.error("Some error occured while fetching locale for push Notification KBAUrl",j)})}initializePushNotifications(){if(this.logger.info("Initialising Push Notifications on Refresh"),this.isNotificationSupported()){if(Notification.permission===i.Ad.Granted)return this.logger.info("Permission is granted"),this.initialize();Notification.permission===i.Ad.Denied?this.logger.info("Permission is denied"):Notification.permission===i.Ad.Default&&this.logger.info("Permission is set to default")}return(0,m.of)(!1)}isNotificationAllowed(){return(0,y.aj)([this.pushNotificationConfiguration$,(0,m.of)(this.isNotificationSupported()),(0,m.of)(this.guestModeService.isGuestMode)]).pipe((0,s.q)(1),(0,r.U)(ue=>ue[0]&&ue[1]&&!ue[2]))}registerDeviceForPushNotifications(){return this.serviceWorkerService.swPushNotificationListener.pipe((0,T.zg)(ue=>(null==ue?void 0:ue.type)===I.rL.PushNotification?(this.registrationInProgress=!0,this.logger.info("message recieved from Service Worker, updating the KV Store",null==ue?void 0:ue.content),this.refreshUiService.enablePushNotificationFromPNS$.pipe((0,l.w)(X=>(this.logger.info("Is PNS enabled: ",X),X?(this.isPnsEnabled=X,this.pushNotificationRegistationService.registerDeviceForPns(ue.content,this.parentSpan)):this.pushNotificationRegistationService.updateUserKVStoreData(ue.content,this.parentSpan))))):(0,m.of)(!1)),(0,T.zg)(ue=>ue?(this.logger.info("NNS/PNS registration response: ",ue),this.registrationInProgress=!1,this.parentSpan&&(this.parentSpan.setTag(h.NI.Error,!1),this.distributedTracingUtilService.closeSpan(this.parentSpan)),(0,m.of)(!0)):(0,m.of)(!1)),(0,a.K)(ue=>(this.logger.error("Error registering device with NNS/PNS: ",ue),(0,m.of)(!1))))}unregisterFromPnsOnUserLogout(){this.idmService.sameTabAuthStarted().pipe((0,F.b)(ue=>{this.isPnsEnabled&&ue===B.fH.LogoutStarted&&this.pushNotificationRegistationService.unregisterFromPns()})).subscribe()}listenToTracingEventsFromServiceWorker(){this.serviceWorkerService.swPushNotificationTracingListener.pipe((0,r.U)(ue=>{if((null==ue?void 0:ue.type)===I.rL.PushNotificationTracing){this.logger.info("message recieved from Service Worker, updating open traceing flow",null==ue?void 0:ue.content);const X=JSON.parse(null==ue?void 0:ue.content);if(null==X?void 0:X.start){const j=this.distributedTracingUtilService.startSpan(X.spanName,this.parentSpan);this.firebaseStatusToSpanName.set(X.spanName,j)}else{const j=this.firebaseStatusToSpanName.get(X.spanName);j&&(this.logger.info("Closing the Span. Span is open for ",X.spanName),j.setTag(h.NI.Error,X.error),this.distributedTracingUtilService.closeSpan(j),X.error&&(this.logger.info("Error is received with Close Span Event"),this.parentSpan.setTag(h.NI.ErrorDetails,"Unexpected Error with FCM"),this.distributedTracingUtilService.closeSpan(this.parentSpan)))}return!0}return!1}),(0,a.K)(ue=>(this.logger.error("Some error occured while listening to Span Events from SW",ue),this.parentSpan&&(this.parentSpan.setTag(h.NI.ErrorDetails,"Error while listening to Child Span Events from SW"),this.distributedTracingUtilService.closeSpan(this.parentSpan)),(0,m.of)(!1)))).subscribe(ue=>{ue?this.logger.info("Child Span is received from SW"):this.logger.error("Error while updating Firebase Spans from SW")})}isNotificationSupported(){return"Notification"in window}fetchPushNotificationConfig(){return this.experienceControl.getCloudVariable(this.configuration.gxTarget.experiences.enableBrowserPushNotification,{},{useCache:!1},V.Z4.GxTargetGetCloudVariable,V.Qu.GxTargetGetKBLayoutsConfig).pipe((0,r.U)(ue=>ue.value.enableBrowserPushNotifications),(0,a.K)(ue=>(this.logger.error("Failed to resolve gx-target cloud variable:",ue),(0,m.of)(!1))))}}return me.\u0275fac=function(ue){return new(ue||me)(u.LFG(o.ed),u.LFG(g.VK),u.LFG(c.No),u.LFG(I.HR),u.LFG(V.Q6),u.LFG(o.OL),u.LFG(U.ux),u.LFG(A.sK),u.LFG(S.m3),u.LFG(Y.o),u.LFG(h.Dc),u.LFG(O),u.LFG(se.eP))},me.\u0275prov=u.Yz7({token:me,factory:me.\u0275fac,providedIn:"root"}),me})();var $=e(2984);let ae=(()=>{class me{constructor(ue,X,j,K,Z,L){this.translateService=X,this.localeService=j,this.bridgeService=K,this.guestModeService=Z,this.audioPlayService=L,this.notificationBody="notification.body",this.logger=ue.getLogger("BrowserNotificationUiService")}show(ue){if(!this.guestModeService.isGuestMode&&o.ng.isBrowserPlatform()){this.logger.verbose("inside show method");const X={title:this.getTitlemessage(ue),body:this.translateService.instant(this.notificationBody),language:this.localeService.getLocale(),direction:this.localeService.isRTLLocale(this.localeService.getLocale())?"rtl":"ltr",tag:ue.notificationId,silent:!0};this.bridgeService.executeCommand($.Gh.Common.Clientnotification.ShowClientNotifications,X).subscribe(j=>{if(j===$.Yk.Common.Clientnotification.InternalErrorCodeEnum.Success){this.logger.info("Notifications are sent to Framework");const K=ue.notificationType;(K===b.$Uz.RigIsReady||K===b.$Uz.CountdownTimerBegins)&&this.audioPlayService.playAudio(b.N0y.RigReadyAndStreamerIdleTimeout.type)}else this.logger.info("Notifications are not sent. Result is ",j)})}}deleteNotification(ue){o.ng.isBrowserPlatform()&&this.bridgeService.executeCommand($.Gh.Common.Clientnotification.DeleteNotification,{uniqueId:ue}).subscribe(X=>{X===$.Yk.Common.Clientnotification.InternalErrorCodeEnum.Success?this.logger.info("Notifications is deleted from Notification Center"):this.logger.info("Notifications clear request is not executed. Result is",X)})}clearNotificationsQueue(){o.ng.isBrowserPlatform()&&this.bridgeService.executeCommand($.Gh.Common.Clientnotification.ClearNotificationsQueue,{clear:!0}).subscribe(ue=>{ue===$.Yk.Common.Clientnotification.InternalErrorCodeEnum.Success?this.logger.info("Notification Centre is cleared"):this.logger.info("Notifications Centre clear request is not executed. Result is ",ue)})}getTitlemessage(ue){const X=b.R76.get(ue.notificationType);return ue.notificationType===b.$Uz.CountdownTimerBegins?this.translateService.instant(X,{timeLeft:ue.countdownTime}):this.translateService.instant(X)}}return me.\u0275fac=function(ue){return new(ue||me)(u.LFG(o.ed),u.LFG(A.sK),u.LFG(o.OL),u.LFG(o.dF),u.LFG(Y.o),u.LFG(o.P))},me.\u0275prov=u.Yz7({token:me,factory:me.\u0275fac,providedIn:"root"}),me})()},98135:(He,de,e)=>{"use strict";e.d(de,{K:()=>w});var n=e(79441),i=e(15480),D=e(57673),m=e(202),T=e(3076),r=e(61074),s=e(89166),p=e(2316),l=e(6484),t=e(99533);let w=(()=>{class h{constructor(o,f,c){this.distributedTracingUtilService=c,this.messageTypeObservableMap=new Map,this.routePushNotification=g=>{(0,m.isNil)(g)||(0,m.isNil)(g.messageType)?this.logger.error("Invalid content received: ",g):(0,m.isNil)(this.messageTypeObservableMap[g.messageType])||this.messageTypeObservableMap[g.messageType].forEach(I=>{this.logger.info("routing push notification for ",g.messageType),this.logger.trace(T.y$.PushNotification,"Received push notification for",D.oW[g.messageType]),I.next(g)})},this.logger=o.getLogger("PushNotificationService"),f.get$(i.oI.PushNotification).subscribe(g=>{var I,G;const x=JSON.parse(g).data;(0,m.isNil)(x)&&this.logger.error("Push notification data received is: ",x);const E={};null===(G=null===(I=null==x?void 0:x.requestMetadata)||void 0===I?void 0:I.traceContext)||void 0===G||G.forEach(C=>{E[C.key]=C.value});const P=this.distributedTracingUtilService.extract(r.FORMAT_TEXT_MAP,E),v=this.distributedTracingUtilService.startSpan(s.j1.PushMessageReceived,P);this.distributedTracingUtilService.closeSpan(v);const O={messageType:null==x?void 0:x.messageType};(0,m.isNil)(null==x?void 0:x.regionIdType)||(O.regionIdType=x.regionIdType),(0,m.isNil)(null==x?void 0:x.regionIds)||(O.regionIds=JSON.parse(x.regionIds)),(0,m.isNil)(null==x?void 0:x.changeIdType)||(O.changeIdType=x.changeIdType),(0,m.isNil)(null==x?void 0:x.changedIds)||(O.changedIds=JSON.parse(x.changedIds)),(0,m.isNil)(null==x?void 0:x.sessionInfo)||(O.sessionInfo=JSON.parse(x.sessionInfo)),(0,m.isNil)(null==x?void 0:x.patchingInfo)||(O.patchingInfo=JSON.parse(x.patchingInfo)),(0,m.isNil)(null==x?void 0:x.accountLinkedInfo)||(O.accountLinkedInfo=this.handleAccountLinkedInfo(JSON.parse(x.accountLinkedInfo))),this.routePushNotification(O)})}handleAccountLinkedInfo(o){return Object.keys(o).reduce((c,g)=>c&&D.$V.includes(g),!0)?{account_type:o.accountType,linked:o.linked,matched_count:o.matchedCount,expires_at:o.expiresAt}:o}registerPushNotification(o){this.logger.info("registerPushNotification map: ",o),(0,m.isNil)(this.messageTypeObservableMap[o])&&(this.messageTypeObservableMap[o]=[]);const f=new n.xQ;return this.messageTypeObservableMap[o].push(f),f.asObservable()}}return h.\u0275fac=function(o){return new(o||h)(p.LFG(l.ed),p.LFG(t.uC),p.LFG(s.Dc))},h.\u0275prov=p.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},57673:(He,de,e)=>{"use strict";e.d(de,{Ad:()=>n,$U:()=>i,oW:()=>D,Om:()=>m,Il:()=>y,Fw:()=>T,$V:()=>r,JK:()=>a,F0:()=>s,R7:()=>p});var n=(()=>{return(l=n||(n={})).Granted="granted",l.Denied="denied",l.Default="default",n;var l})(),i=(()=>{return(l=i||(i={})).RigIsReady="RigIsReady",l.CountdownTimerBegins="CountdownTimerBegins",i;var l})(),D=(()=>{return(l=D||(D={}))[l.UNKNOWN=0]="UNKNOWN",l[l.SESSION_CHANGE=1]="SESSION_CHANGE",l[l.APP_CHANGE=2]="APP_CHANGE",l[l.PRODUCT_CHANGE=3]="PRODUCT_CHANGE",l[l.SUBSCRIPTION_CHANGE=4]="SUBSCRIPTION_CHANGE",l[l.ASSET_CHANGE=5]="ASSET_CHANGE",l[l.GSWS_SYNC=6]="GSWS_SYNC",l[l.SERVER_INFO_SYNC=7]="SERVER_INFO_SYNC",l[l.CONFIGURATION_CHANGE=8]="CONFIGURATION_CHANGE",l[l.LAYOUT_CHANGE=9]="LAYOUT_CHANGE",l[l.SECTION_CHANGE=10]="SECTION_CHANGE",l[l.LINKEDACCOUNT_CHANGE=11]="LINKEDACCOUNT_CHANGE",l[l.PATCHING_EVENT=12]="PATCHING_EVENT",l[l.LIBRARY_CHANGE=13]="LIBRARY_CHANGE",l[l.KV_STORE_CHANGE=14]="KV_STORE_CHANGE",D;var l})(),m=(()=>{return(l=m||(m={}))[l.UNKNOWN=0]="UNKNOWN",l[l.SESSION_READY=1]="SESSION_READY",l[l.SESSION_END=2]="SESSION_END",m;var l})(),y=(()=>{return(l=y||(y={}))[l.Unknown=0]="Unknown",l[l.ServerMaintenanceScheduled=1]="ServerMaintenanceScheduled",l[l.ServerMaintenanceStarted=2]="ServerMaintenanceStarted",l[l.ServerMaintenanceFinished=3]="ServerMaintenanceFinished",l[l.RealTimePatch=4]="RealTimePatch",l[l.FuturePatch=5]="FuturePatch",l[l.PatchCompleted=6]="PatchCompleted",y;var l})(),T=(()=>{return(l=T||(T={}))[l.UNKNOWN=0]="UNKNOWN",l[l.SERVER_MAINTENANCE_STARTED=1]="SERVER_MAINTENANCE_STARTED",l[l.SERVE_MAINTENANCE_COMPLETED=2]="SERVE_MAINTENANCE_COMPLETED",l[l.PATCHING_STARTED=3]="PATCHING_STARTED",l[l.PATCHING_COMPLETED=4]="PATCHING_COMPLETED",T;var l})();const r=["accountType","linked","matchedCount","expiresAt"];var a=(()=>{return(l=a||(a={})).REGION="REGION",l.VPC="VPC",a;var l})(),s=(()=>{return(l=s||(s={})).APPID="APPID",l.CMSID="CMSID",l.PANEL="PANEL",s;var l})();const p=new Map([[i.CountdownTimerBegins,"notification.CountdownTimerBegins"],[i.RigIsReady,"notification.RigIsReady"]])},11635:(He,de,e)=>{"use strict";e.d(de,{UJ:()=>g,nG:()=>f});var n=e(6484),i=e(81134),D=e(90490),m=e(9170),y=e(33927),T=e(1143),r=e(83720),a=e(92597),s=e(85816),p=e(67202),l=(()=>{return(I=l||(l={})).CacheName="offlineStore",I.DBKey="hitOfflineState",l;var I})(),h=e(2316),u=e(66883);const o=I=>`(display-mode: ${I})`;let f=(()=>{class I{constructor(x,E,P,v){this.dbService=E,this.dbCacheService=P,this.breakpointObserver=v,this.logger=x.getLogger("gfn-shared/PWAService"),this.isInPWAMode$=void 0!==window.navigator.standalone?(0,i.of)(window.navigator.standalone):(0,D.$R)(v.observe(o("standalone")),v.observe(o("browser"))).pipe((0,m.h)(([O,C])=>O.matches||C.matches),(0,y.U)(([O,C])=>O.matches||this.isInPWAMode()),(0,T.O)(this.isInPWAMode()),(0,r.x)(),(0,a.d)({bufferSize:1,refCount:!0}))}isInPWAMode(){return window.navigator.standalone||n.ng.isPWAModeOnLGTV()||n.ng.isPWAModeOnSamsungTV()||this.breakpointObserver.isMatched(o("standalone"))}get onPWAModeChange(){return this.isInPWAMode$}initialize(){this.logger.info("initialising Offline Datastore"),this.dbCacheService.getOrCreateCachedGlobalItem(l.CacheName,l.DBKey).sync_().subscribe()}checkForOfflineLaunch(){return this.dbService.getGlobalStore(l.CacheName).length().pipe((0,s.zg)(x=>x>0?(this.logger.info("offlineStoreValue is present in database"),this.dbService.getGlobalStore(l.CacheName).clear().pipe((0,p.h)(!0))):(this.logger.info("offlineStoreValue is not present in database"),(0,i.of)(!1))))}}return I.\u0275fac=function(x){return new(x||I)(h.LFG(n.ed),h.LFG(n.MC),h.LFG(n.LA),h.LFG(u.Yg))},I.\u0275prov=h.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();var c=e(80226);let g=(()=>{class I{constructor(x){this.pwaInstallPromptEvent=null,this.pwaInstallPromptCaptured=new c.t(1),this.logger=x.getLogger("gfn-shared/PWAPromptService")}get pwaInstallPromptCaptured$(){return this.pwaInstallPromptCaptured.asObservable()}setDeferredPromptEvent(x){this.pwaInstallPromptEvent=x,this.logger.info("PWA event captured",x),this.pwaInstallPromptCaptured.next()}promptFromDeferredEvent(){this.logger.info("PWA event requested"),this.pwaInstallPromptEvent?(this.pwaInstallPromptEvent.prompt(),this.pwaInstallPromptEvent=null):this.logger.info("No PWA beforeinstallprompt event was captured")}}return I.\u0275fac=function(x){return new(x||I)(h.LFG(n.ed))},I.\u0275prov=h.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},57674:(He,de,e)=>{"use strict";e.d(de,{hE:()=>m,hD:()=>y,PY:()=>D,VH:()=>a});var n=e(53466),i=e(33927),D=(()=>{return(s=D||(D={})).PC="pc",s.Mac="mac",s.Browser="browser",D;var s})(),m=(()=>{return(s=m||(m={})).BaseUrl="https://www.nvidia.com/content/drivers/redirect.asp?language=",s.NetworkTroubleshoot="gfn_pc_net_help",s.RecommendedRoutersProductPage="gfn_pc_recommended_routers_product_page",s.GfnPcInfo="gfn_pc_info",s.GfnPcHelp="gfn_pc_help",s.TermsConditions="gfn_pc_terms_of_use",s.AccountTerms="nvidia_account_tos",s.OssLicenses="gfn_pc_oss",s.PrivacyPolicy="privacy_policy",s.AccountManagement="nvidia_account_management",s.SysRequirements="gfn_pc_sys_req",s.UdpBufferTips="gfn_pc_net_help_udp_socket",s.GfnPcUnSupportedRegion="gfn_pc_unsupported_region",s.GfnPcUnsupportedDevice="gfn_pc_unsupported_device",s.GfnPcUnsupportedDeviceAndroid="gfn_pc_unsupported_device_android",s.GfnPcUnsupportedBrowser="gfn_pc_unsupported_browser",s.GfnPcNetHelpFirewall="gfn_pc_net_help_firewall",s.GfnPcNetHelpWifi="gfn_pc_net_help_wifi",s.GfnPcHelpUpdate="gfn_pc_help_update",s.GfnPcHelpMissingDecoder="gfn_pc_help_missing_decoder",s.GfnServerStatus="gfn_service_status",s.GfnHelpFirewallNetworkTest="gfn_pc_net_help_firewall_net_test",s.GfnPcDirectMouseInputHelp="gfn_pc_direct_mouse_input_help",s.CookiePolicy="nvidia_cookie_policy",s.GfnPcRecommendedGamepads="gfn_pc_recommended_gamepads",s.GfnAccountManagementSSO="nvidia_account_management_default",s.GfnAccountManagement="nvidia_account_management_gfn",s.GfnPcMembershipJoin="gfn_pc_membership",s.GfnPcMembershipUpgrade="gfn_pc_membership_upgrade",s.GfnPcRedeemActivationCode="gfn_pc_redeem_activation_code",s.GfnPcHelpKeyboardGamesUnavailable="gfn_pc_help_keyboard_games_unavailable",s.GfnPcHelpTvGamepadOnly="gfn_pc_help_tv_gamepad_only",s.GfnPcWaitList="gfn_pc_waitlist",s.GfnPcAccountNotActivated="gfn_pc_account_not_activated",s.GfnPcKeyboardTroubleshooting="gfn_pc_keyboard_troubleshooting",s.GfnPcCustomProfileLearnMore="gfn_pc_custom_profile_learn_more",s.GfnPcResolutionProfileUpscalingLearnMore="gfn_pc_resolution_upscaling_learn_more",m;var s})();const y={[m.PrivacyPolicy]:"nvidia.com/privacy",[m.CookiePolicy]:"nvidia.com/cookies",[m.TermsConditions]:"nvidia.com/geforcenow/termsofuse",[m.AccountTerms]:"nvidia.com/account/terms",[m.OssLicenses]:"nvidia.com/geforcenow/oss",[m.GfnPcRecommendedGamepads]:"nvidia.com/gfngamepads",[m.GfnAccountManagement]:"nvidia.com/account/gfn",[m.GfnAccountManagementSSO]:"account.nvidia.com",[m.GfnPcMembershipJoin]:"nvidia.com/gfn/membership",[m.GfnPcMembershipUpgrade]:"nvidia.com/gfn/upgrade",[m.GfnPcRedeemActivationCode]:"nvidia.com/gfn/activate",[m.GfnServerStatus]:"nvidia.com/gfn/status",[m.GfnPcHelpTvGamepadOnly]:"geforcenow.com/help/gamepadonly",[m.UdpBufferTips]:"geforcenow.com/help/udp",[m.GfnPcNetHelpFirewall]:"geforcenow.com/help/firewall",[m.GfnHelpFirewallNetworkTest]:"geforcenow.com/help/firewall-2",[m.GfnPcNetHelpWifi]:"geforcenow.com/help/wifi",[m.GfnPcHelpUpdate]:"geforcenow.com/help/update",[m.GfnPcUnSupportedRegion]:"nvidia.com/geforcenow/availability",[m.GfnPcHelpMissingDecoder]:"geforcenow.com/help/decoder",[m.GfnPcWaitList]:"nvidia.com/geforcenow/waitlist",[m.RecommendedRoutersProductPage]:"geforcenow.com/routers",[m.NetworkTroubleshoot]:"nvidia.com/geforcenow/help/network",[m.GfnPcKeyboardTroubleshooting]:"geforcenow.com/help/keyboard",[m.GfnPcUnsupportedDevice]:"geforcenow.com/unsupported-device",[m.GfnPcUnsupportedBrowser]:"geforcenow.com/unsupported-browser"};var T=e(2316),r=e(6484);let a=(()=>{class s{constructor(l,t){this.localeService=t,this.logger=l.getLogger("gfn/RedirectService")}handleUnsupportedAndroidPlatform(){this.redirectTo(m.GfnPcUnsupportedDeviceAndroid,{replace:!0})}handleUnsupportedBrowser(){this.redirectTo(m.GfnPcUnsupportedDevice,{replace:!0,jso:{Plt:D.Browser}})}redirectTo(l,t){this.getRedirectUrl(l,null==t?void 0:t.jso).subscribe(w=>{this.logger.info("Redirecting to",w),(null==t?void 0:t.replace)?window.location.replace(w):window.location.href=w})}redirectToExternalUrl(l,t){(null==t?void 0:t.replace)?window.location.replace(l):window.location.href=l}getRedirectUrl(l,t){return this.localeService.localeChanged.pipe((0,n.q)(1)).pipe((0,i.U)(w=>{let h=`${m.BaseUrl}${w}&page=${l}`;return t&&(h+=`&jso=${window.btoa(JSON.stringify(t))}`),h}))}}return s.\u0275fac=function(l){return new(l||s)(T.LFG(r.ed),T.LFG(r.OL))},s.\u0275prov=T.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},68590:(He,de,e)=>{"use strict";e.d(de,{Gx:()=>t,QU:()=>w,cF:()=>h,eP:()=>C});var n=e(71258),i=e(33927),D=e(18293),m=e(53466),y=e(98636),T=e(22663),r=e(9170),a=e(15347),s=e(85816),p=e(60443),l=e(97987),t=(()=>{return(_=t||(t={})).ServerInfo="ServerInfo",_.Apps="Apps",_.Layout="Layout",_.Subscription="Subscription",_.ALS="ALS",_.KVStorePlatformSelection="KVStore_PlatformSelection",_.KVStoreAls="KVStore_Als",_.PanelLibrary="Panel_Library",_.PanelMain="Panel_Main",_.PanelMarquee="Panel_Marquee",_.LinkedAccountChanged="Linked_Account_Changed",t;var _})();const w={[l.wh.Main]:t.PanelMain,[l.wh.Marquee]:t.PanelMarquee,[l.wh.Library]:t.PanelLibrary};var h=(()=>{return(_=h||(h={})).OnFocus="onFocus",_.OnScreenChange="onScreenChange",_.OnPushNotification="onPushNotification",h;var _})(),u=e(79441),o=e(80226),f=e(81134),c=e(61486),g=e(45871),I=e(57673),G=e(82146),x=e(43365),E=e(2316),P=e(6484),v=e(98135),O=e(12556);let C=(()=>{class _{constructor(V,b,B,U,A,S,Y,se,fe,$){this.windowService=b,this.router=B,this.pushNotificationService=U,this.experienceControlService=A,this.pathService=S,this.idmService=Y,this.appConfig=se,this.remoteConfigService=fe,this.injector=$,this.contentExpiryInfo={},this.serverInfoRefresh=new u.xQ,this.subscriptionRefresh=new u.xQ,this.appsRefresh=new u.xQ,this.layoutRefresh=new u.xQ,this.kvStorePlatformSelectionRefresh=new u.xQ,this.kvStoreALSRefresh=new u.xQ,this.skuDataRefresh=new u.xQ,this.assetRefresh=new u.xQ,this.libraryRefresh=new u.xQ,this.panelRefresh=new u.xQ,this.patchingInfoRefresh=new u.xQ,this.linkedAccountRefresh=new u.xQ,this.stopPNSFlow=new u.xQ,this.gxtPunctualUIConfigFetched=new o.t(1),this.enablePunctualUIPNS=new o.t(1),this.serverInfoRefresh$=this.serverInfoRefresh.asObservable(),this.subscriptionRefresh$=this.subscriptionRefresh.asObservable(),this.appsRefresh$=this.appsRefresh.asObservable(),this.layoutRefresh$=this.layoutRefresh.asObservable(),this.kvStorePlatformSelectionRefresh$=this.kvStorePlatformSelectionRefresh.asObservable(),this.kvStoreALSRefresh$=this.kvStoreALSRefresh.asObservable(),this.skuDataRefresh$=this.skuDataRefresh.asObservable(),this.assetRefresh$=this.assetRefresh.asObservable(),this.libraryRefresh$=this.libraryRefresh.asObservable(),this.panelRefresh$=this.panelRefresh.asObservable(),this.patchingInfoRefresh$=this.patchingInfoRefresh.asObservable(),this.linkedAccountRefresh$=this.linkedAccountRefresh.asObservable(),this.currentPNSEnabledFlag=null,this.logger=V.getLogger("RefreshUiService"),this.pushNotificationHandlerMap=new Map([[I.oW.APP_CHANGE,{info:[{refreshTrigger:this.appsRefresh,contentExpiryFlagToCheck:t.Apps}]}],[I.oW.SUBSCRIPTION_CHANGE,{info:[{refreshTrigger:this.subscriptionRefresh,contentExpiryFlagToCheck:t.Subscription}]}],[I.oW.SERVER_INFO_SYNC,{info:[{refreshTrigger:this.serverInfoRefresh,contentExpiryFlagToCheck:t.ServerInfo}]}],[I.oW.LAYOUT_CHANGE,{info:[{refreshTrigger:this.panelRefresh}],shouldHandle:this.shouldHandleLayoutChangeNotification.bind(this)}],[I.oW.PRODUCT_CHANGE,{info:[{refreshTrigger:this.subscriptionRefresh,contentExpiryFlagToCheck:t.Subscription}]}],[I.oW.ASSET_CHANGE,{info:[{refreshTrigger:this.assetRefresh}],shouldHandle:this.shouldHandleAssetChangeNotification.bind(this)}],[I.oW.PATCHING_EVENT,{info:[{refreshTrigger:this.patchingInfoRefresh}],shouldHandle:this.shouldHandlePatchingNotification.bind(this)}],[I.oW.LIBRARY_CHANGE,{info:[{refreshTrigger:this.libraryRefresh,contentExpiryFlagToCheck:t.PanelLibrary}]}],[I.oW.KV_STORE_CHANGE,{info:[{refreshTrigger:this.kvStorePlatformSelectionRefresh,contentExpiryFlagToCheck:t.KVStorePlatformSelection},{refreshTrigger:this.kvStoreALSRefresh,contentExpiryFlagToCheck:t.KVStoreAls}]}],[I.oW.LINKEDACCOUNT_CHANGE,{info:[{refreshTrigger:this.linkedAccountRefresh,contentExpiryFlagToCheck:t.LinkedAccountChanged}]}]])}get stopPNSFlow$(){return this.stopPNSFlow.asObservable()}get getPunctualUIConfig$(){return this.gxtPunctualUIConfigFetched.asObservable()}get enablePushNotificationFromPNS$(){return this.enablePunctualUIPNS.asObservable()}init(){this.fetchPunctualUIConfigFlag().subscribe(V=>{var b,B;V!==this.currentPNSEnabledFlag&&(this.logger.info("PNS enablement toggled to",V),V?(this.stopPNSFlow||(this.stopPNSFlow=new u.xQ),this.fetchPunctualUIConfigCloudVariable(),this.refreshDataOnScreenChange(),this.refreshDataOnFocusGain(),this.handlePushNotifications()):(null===(b=this.stopPNSFlow)||void 0===b||b.next(!0),null===(B=this.stopPNSFlow)||void 0===B||B.complete(),this.stopPNSFlow=null),this.enablePunctualUIPNS.next(V),this.currentPNSEnabledFlag=V)},V=>{this.logger.error("Error while fetching puntual UI remote config",V),this.enablePunctualUIPNS.next(!1),this.currentPNSEnabledFlag=!1})}fetchPunctualUIConfigFlag(){return this.remoteConfigService.remoteConfigFetched$.pipe((0,i.U)(V=>{var b,B;const U=null===(B=null===(b=V.config)||void 0===b?void 0:b.featureEnablement)||void 0===B?void 0:B.enablePushNotifciationFromPNS;return this.logger.info("Fetched PNS enablement flag",U),!!U}),(0,D.K)(()=>(this.logger.error("Error while fetching PNS enablement flag"),(0,f.of)(!1))))}getContentExpiryInfo(V){return this.contentExpiryInfo[V]}setContentExpiryInfo(V){(0,c.aj)([this.getPunctualUIConfig$,this.idmService.accountStatusChanged]).pipe((0,m.q)(1),(0,i.U)(([b,B])=>B.isAuthenticated?b.refreshIntervalLoggedInUser:b.refreshIntervalLoggedOutUser),(0,y.b)(b=>{this.contentExpiryInfo[V]=Date.now()+60*b*1e3})).subscribe(()=>{},b=>this.logger.error("Error setting content expiry info",b))}resetContentExpiryInfo(V){V&&(this.contentExpiryInfo[V]=0)}fetchPunctualUIConfigCloudVariable(){this.experienceControlService.getCloudVariable(this.appConfig.gxTarget.experiences.punctualUIConfig,{},{useCache:!0,useNetworkTimeoutForCacheFallback:!0},x.Z4.GxTargetGetCloudVariable,x.Qu.GxTargetGetPunctualUIConfig).pipe((0,T.R)(this.stopPNSFlow$),(0,y.b)(V=>{var b;const B=null!==(b=null==V?void 0:V.value)&&void 0!==b?b:this.appConfig.defaultPunctualUIConfig;this.gxtPunctualUIConfigFetched.next(B)}),(0,D.K)(V=>(this.gxtPunctualUIConfigFetched.next(this.appConfig.defaultPunctualUIConfig),(0,g._)(V)))).subscribe(()=>this.logger.info("Successfully fetched punctualUIConfig cv"),V=>this.logger.info("Error while fetching punctualUIConfig cv",V))}triggerRefresh(V,b,B){b.next({source:V,metadata:B})}isContentExpired(V){return 0===this.contentExpiryInfo[V]||Date.now()>this.contentExpiryInfo[V]}triggerExpiredDataRefresh(V,b){let B=!1,U=!1,A=!1;const S=null!=b?b:this.router.url;this.logger.info("triggerExpiredDataRefresh if needed on ",V),this.idmService.accountStatusChanged.pipe((0,m.q)(1),(0,y.b)(Y=>{this.pathService.isMallOrSettingsUrl(S)&&(this.isContentExpired(t.ServerInfo)&&(this.triggerRefresh(V,this.serverInfoRefresh),B=!0),this.isContentExpired(t.Subscription)&&(this.triggerRefresh(V,this.subscriptionRefresh),U=!0),Y.isAuthenticated&&this.isContentExpired(t.LinkedAccountChanged)&&this.triggerRefresh(V,this.linkedAccountRefresh),Y.isAuthenticated&&this.isContentExpired(t.KVStoreAls)&&this.triggerRefresh(V,this.kvStoreALSRefresh)),p.Bi.includes(S)&&(!U&&!B&&this.isContentExpired(t.Apps)&&this.triggerRefresh(V,this.appsRefresh),!U&&!B&&this.isContentExpired(t.Layout)&&(this.triggerRefresh(V,this.layoutRefresh),A=!0),!A&&(this.isContentExpired(t.PanelMain)||this.isContentExpired(t.PanelMarquee))&&this.triggerRefresh(V,this.panelRefresh),Y.isAuthenticated&&!A&&this.isContentExpired(t.PanelLibrary)&&this.triggerRefresh(V,this.libraryRefresh),this.isContentExpired(t.KVStorePlatformSelection)&&this.triggerRefresh(V,this.kvStorePlatformSelectionRefresh))})).subscribe()}refreshDataOnFocusGain(){return this.windowService.getFocusEvent().pipe((0,T.R)(this.stopPNSFlow$)).subscribe(()=>{this.triggerExpiredDataRefresh(h.OnFocus)})}refreshDataOnScreenChange(){let V;return this.router.events.pipe((0,T.R)(this.stopPNSFlow$),(0,r.h)(b=>b instanceof n.R9),(0,a.G)(),(0,i.U)(b=>(V=b[1]&&b[1].urlAfterRedirects,!!this.pathService.isMallOrSettingsUrl(V))),(0,D.K)(b=>(this.logger.error("Error in refreshDataOnScreenChange",b),(0,f.of)(!1)))).subscribe(b=>{b&&this.triggerExpiredDataRefresh(h.OnScreenChange,V)})}refreshCheckForRegionIds(V){const b=this.injector.get(G.r);return(null==V?void 0:V.regionIdType)&&(null==V?void 0:V.regionIdType)===I.JK.REGION?null==b?void 0:b.getCachedZone().pipe((0,m.q)(1),(0,i.U)(B=>{var U;const A=null===(U=null==B?void 0:B.address)||void 0===U?void 0:U.split(".",1);if(A.length>0){const S=A[0];return this.logger.info("Zone Prefix",S),null==V?void 0:V.regionIds.includes(S)}return!1}),(0,D.K)(B=>(this.logger.error("Error in getting cached zone",B),(0,f.of)(!1)))):null==b?void 0:b.vpcId$.pipe((0,m.q)(1),(0,i.U)(B=>(this.logger.info("current VpcID",B),null==V?void 0:V.regionIds.includes(B))),(0,D.K)(B=>(this.logger.error("Error in getting current VPC ID",B),(0,f.of)(!1))))}defaultShouldHandlePushNotification(V,b){var B;return this.logger.info("pushNotification data handling for message type: "+I.oW[V.messageType]),this.logger.info("Is window active: "+document.hasFocus()),this.logger.info("current screen url"+this.router.url),document.hasFocus()&&this.pathService.isMallOrSettingsUrl(this.router.url)?(null===(B=null==V?void 0:V.regionIds)||void 0===B?void 0:B.length)>0?this.refreshCheckForRegionIds(V):(0,f.of)(!0):(b.forEach(U=>{this.resetContentExpiryInfo(null==U?void 0:U.contentExpiryFlagToCheck)}),(0,f.of)(!1))}handlePushNotifications(){this.pushNotificationHandlerMap.forEach((V,b)=>{this.pushNotificationService.registerPushNotification(b).pipe((0,T.R)(this.stopPNSFlow$),(0,s.zg)(B=>(0,c.aj)((null==V?void 0:V.shouldHandle)?[V.shouldHandle(B,null==V?void 0:V.info),(0,f.of)(B)]:[this.defaultShouldHandlePushNotification(B,null==V?void 0:V.info),(0,f.of)(B)]))).subscribe(([B,U])=>{B&&setTimeout(()=>{this.logger.info("Handling Push Messgae for ",I.oW[b]),(null==V?void 0:V.handle)?null==V||V.handle(U):null==V||V.info.forEach(A=>{null==A||A.refreshTrigger.next({source:h.OnPushNotification,metadata:U})})},60*Math.random()*1e3)})})}shouldHandleAssetChangeNotification(V,b){return this.defaultShouldHandlePushNotification(V,b).pipe((0,y.b)(B=>{B||this.resetContentExpiryInfo(t.Apps)}))}shouldHandleLayoutChangeNotification(V,b){return this.defaultShouldHandlePushNotification(V,b).pipe((0,y.b)(B=>{var U;B||((null==V?void 0:V.changeIdType)===I.F0.PANEL?null===(U=null==V?void 0:V.changedIds)||void 0===U||U.forEach(A=>{this.resetContentExpiryInfo(w[A])}):this.resetContentExpiryInfo(t.Layout))}))}shouldHandlePatchingNotification(V){var b;return(null===(b=null==V?void 0:V.regionIds)||void 0===b?void 0:b.length)>0?this.refreshCheckForRegionIds(V):(0,f.of)(!0)}}return _.\u0275fac=function(V){return new(V||_)(E.LFG(P.ed),E.LFG(P.un),E.LFG(n.F0),E.LFG(v.K),E.LFG(x.Q6),E.LFG(O.unb),E.LFG(O.No2),E.LFG(O.VKt),E.LFG(O.s$G),E.LFG(E.zs3))},_.\u0275prov=E.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},62558:(He,de,e)=>{"use strict";e.d(de,{s:()=>b});var n=e(6484),i=e(33927),D=e(18293),m=e(85816),y=e(79902),T=e(98636),r=e(77879),a=e(80226),s=e(79441),p=e(81134),l=e(90425),t=e(92941),w=e(45871),h=e(202),u=e(67067),o=e(3076),f=e(2281),c=e(2984),g=e(31454),I=e(2316),G=e(29784),x=e(22530),E=e(57390),P=e(89166),v=e(79911);let O=(()=>{class B{constructor(A,S,Y){this.endpointFactory=S,this.distributedtracingUtilService=Y,this.logger=A.getLogger("RemoteConfigSdkService")}getRemoteConfig(A,S,Y,se){this.logger.info("getRemoteConfig",A,S);const $=this.endpointFactory.createEndpoint({config:A}).get(S,Y);return this.distributedtracingUtilService.handleHttpEndpointSpan($,Y,P.j1.GetRemoteConfig,se)}}return B.\u0275fac=function(A){return new(A||B)(I.LFG(n.ed),I.LFG(v.V9),I.LFG(P.Dc))},B.\u0275prov=I.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})();var C=e(71906);const F="remoteOverrides";let b=(()=>{class B{constructor(A,S,Y,se,fe,$,ae,me){this.networkConfig=S,this.zoneStorage=Y,this.sharedStorageService=se,this.remoteConfigSdkService=fe,this.appConfig=$,this.systemInfoService=ae,this.bridgeService=me,this.platformMap={Mac:"gfn-mac",Windows:"gfn-pc",Web:"gfn-webrtc",Chromebook:"gfn-chromebook",WebIOS:"gfn-ios",WebWin:"gfn-webrtc-win",WebMac:"gfn-webrtc-mac",WebLinux:"gfn-webrtc-linux",WebWebOS:"gfn-webrtc-webos",WebXbox:"gfn-webrtc-xbox",WebTizen:"gfn-webrtc-tizen"},this.options={includeRequestId:!0,reportRequestData:{originalService:u.v6v.RemoteConfig,serviceUseCase:u.f$p.GetRemoteConfig}},this.cachedHttpError=null,this.remoteConfigFetchedSubject=new a.t(1),this.fetchRemoteConfig$=new s.xQ,this.zonePrefixForCachedRCTelemetry="",this.vpcIdForForCachedRCTelemetry="",this.projectRevisionForCachedRCTelemetry="",this.fetchedFromGXTForCachedRCTelemetry=!1,this.currentRemoteConfigRevision="",this.logger=A.getLogger("shared/remote-config.service"),this.lastSavedUserId$=this.sharedStorageService.readBlock("session").pipe((0,i.U)(ye=>{if((0,h.isNil)(ye)||(0,h.isEmpty)(ye))return null;const ue=r.L.decode(ye);return(0,h.get)(ue,"user.userId")}),(0,D.K)(ye=>(this.logger.error("failed to read session object",ye),(0,p.of)(null)))),this.lastCachedZone$=this.networkConfig.getCurrentCachedZone().pipe((0,m.zg)(ye=>(0,h.isNil)(ye)||(0,h.isEmpty)(ye)?this.zoneStorage.getDefaultZone():(this.logger.info("got cached zone",ye),(0,p.of)(ye)))),this.lastSavedZone$=this.networkConfig.getNetworkOverride().pipe((0,m.zg)(ye=>(0,h.isNil)(ye)||(0,h.isEmpty)(ye)?(this.logger.info("get cached zone"),this.lastCachedZone$):(this.logger.info("got override zone",ye),(0,p.of)(ye))),(0,D.K)(ye=>(this.logger.error("failed to fetch zone",ye),(0,p.of)(null)))),this.osInfo$=this.systemInfoService.getOsInformation().pipe((0,D.K)(ye=>(this.logger.error("failed to get OS info",ye),(0,p.of)(null)))),this.fetchRemoteConfig$.pipe((0,y.w)(ye=>this.startFetch(ye))).subscribe(ye=>{this.logger.info("fire config fetched notification"),this.remoteConfigFetchedSubject.next({overrides:ye,config:this.appConfig.get()})},ye=>this.logger.error("failed to fetch remote overrides",ye))}get remoteConfigFetched$(){return this.remoteConfigFetchedSubject.asObservable()}getLastSavedZone(){return this.lastSavedZone$}mergeWebrtcStreamingRemoteConfig(A){let S={};return A.data.common&&(S=(0,h.set)(S,"remoteConfigData.common",JSON.stringify(A.data.common))),A.data.ragnarok&&(S=(0,h.set)(S,"remoteConfigData.ragnarok",JSON.stringify(A.data.ragnarok))),S}mergeWebrtcNetworkTestRemoteConfig(A){let S={};return A.data.common&&(S=(0,h.set)(S,"remoteConfigData.common",JSON.stringify(A.data.common))),A.data.rtcnetworktest&&(S=(0,h.set)(S,"remoteConfigData.rtcnetworktest",JSON.stringify(A.data.rtcnetworktest))),A.data.version&&(S=(0,h.set)(S,"remoteConfigData.version",JSON.stringify(A.data.version))),S}configureRemoteOverrides(A){var S;if(null==A?void 0:A.isFetchedFromGXT)this.appConfig.setRemoteOverridesFromGXT(A.data,null===(S=A.metaData)||void 0===S?void 0:S.rcParamNameToLocalConfigKeyPathMap);else if(n.ng.isCefPlatform())this.appConfig.setRemoteOverrides(A.data.gfnpcClient);else{A.data.gfnpcClient=Object.assign({},A.data.gfnWebClient);const Y=this.mergeWebrtcStreamingRemoteConfig(A),se=this.mergeWebrtcNetworkTestRemoteConfig(A),fe=Object.assign(Object.assign({},A.data.gfnpcClient),{ragnarok:Y,rtcNetworkTest:se});this.appConfig.setRemoteOverrides(fe)}}startFetch(A){return this.appConfig.configFetched$.pipe((0,m.zg)(()=>(A.config=this.appConfig.get(),this.getRemoteConfigUrl(A))),(0,m.zg)(S=>!1===S.alwaysFetch&&S.zonePrefix===this.cachedZonePrefix&&S.userId===this.cachedUserId&&S.providerCode===this.cachedProviderCode?(this.logger.info("overrides cached, skip emit",S,this.cachedZonePrefix,this.cachedUserId),l.C):this.fetchConfig(S)),(0,D.K)(S=>(this.logger.error("failed to fetch remoteOverrides",S),this.loadPreviousOverrides())),(0,T.b)(S=>{this.configureRemoteOverrides(S)}))}constructOverrides(A,S,Y,se,fe){return{metaData:{lastFetchedFrom:A,lastFetchedAt:f.utc().valueOf(),regionName:Y,zoneName:se,rcParamNameToLocalConfigKeyPathMap:fe},data:S}}saveRemoteOverrides(A){this.logger.info("save remote overides",A);const S={overrideData:{data:A.data},isFetchedFromGXT:null==A?void 0:A.isFetchedFromGXT};this.sharedStorageService.writeBlock(F,A).pipe((0,m.zg)(()=>(this.logger.info("notify geronimo"),this.bridgeService.executeCommand(c.Gh.Gfn.Streaming.UpdateRemoteConfig,S)))).subscribe(()=>t.Z,Y=>this.logger.error("failed to save remoteOverrides",Y))}loadPreviousOverrides(){return this.sharedStorageService.readBlock(F).pipe((0,D.K)(A=>(this.logger.info("failed to fetch overrides",A),(0,p.of)({}))))}isValidObject(A,S){return!(0,h.isNil)(A)&&!(0,h.isEmpty)(A)&&!(0,h.isEmpty)(A[S])}isValidString(A){return!(0,h.isNil)(A)&&!(0,h.isEmpty)(A)}getZonePrefix(A){let S="";if(this.isValidObject(A,"address")){const Y=A.address.split(".",1);Y.length>0&&(S=Y[0])}return S}getRemoteConfigUrl(A){return this.logger.info("getRemoteConfigUrl",A.currentUrl),(0,h.isNil)(A.config)||!this.isValidObject(A.config.remoteConfig,"server")?(this.logger.error("invalid config",A),(0,w._)("invalid remote config")):A.providerCodeOb$.pipe((0,m.zg)(S=>{if(this.logger.info("getRemoteConfigUrl providerCode",S),(0,h.isNil)(S)){const Y=(0,o.D5)([A.config.remoteConfig.server]);A.currentUrl=Y+"/"+A.config.remoteConfig.branch+"/"}else{A.providerCode=S.toLowerCase();const Y=(0,o.D5)([A.config.remoteConfig.server]);A.currentUrl=Y+"/",A.currentUrl+=A.providerCode+"/"}return this.getPlatform(A)}),(0,D.K)(S=>(this.logger.error("unexpected error",S),(0,p.of)(A))))}getUnderlyingWebPlatform(A){let S="";switch(this.logger.info("Underlying web platform: ",A),A){case n.wi.Windows:S=this.platformMap.WebWin;break;case n.wi.MacOS:S=this.platformMap.WebMac;break;case n.wi.Linux:S=this.platformMap.WebLinux;break;case n.wi.WebOS:S=this.platformMap.WebWebOS;break;case n.wi.XBox:S=this.platformMap.WebXbox;break;case n.wi.IOS:case n.wi.IPadOS:S=this.platformMap.WebIOS;break;case n.wi.Tizen:S=this.platformMap.WebTizen;break;case n.wi.SteamOS:default:S=this.platformMap.Web}return S}getPlatform(A){return this.logger.info("getPlatform"),this.osInfo$.pipe((0,m.zg)(S=>{if(this.isValidObject(S,"Platform")){let Y="";return Y="ChromeOS"===(0,g.Jk)(S.OSName.toString())?this.platformMap.Chromebook:n.ng.isBrowserPlatform()?this.getUnderlyingWebPlatform(S.OSName):this.platformMap[S.Platform],(0,h.isNil)(Y)?(this.logger.error("unknown platform",S),(0,p.of)(A)):(A.currentUrl+=Y+"/",this.getZone(A))}return this.logger.error("invalid platform",S),(0,p.of)(A)}))}getZone(A){return this.logger.info("getZone"),A.zoneOb$.pipe((0,m.zg)(S=>{const Y=this.getZonePrefix(S);return this.isValidString(Y)?(A.currentUrl+=Y+"/",A.zonePrefix=Y,this.getUserId(A)):(this.logger.info("invalid zone",S),(0,p.of)(A))}))}getUserId(A){return this.logger.info("getUserId"),A.userIdOb$.pipe((0,i.U)(S=>(this.isValidString(S)?(A.currentUrl+=S+"_",A.userId=S):this.logger.info("invalid userid",S),A)))}cacheHttpError(A){this.cachedHttpError={response:A,options:this.options}}fetchConfig(A){const{defaultRetries:S=0,defaultTimeBetweenRetries:Y=0,defaultTimeout:se=500}=A.config.remoteConfig,$=A.currentUrl+"config.json";return this.remoteConfigSdkService.getRemoteConfig({maxRetries:S,timeout:se,timeBetweenRetries:Y},$,this.options).pipe((0,D.K)(ae=>(this.cacheHttpError(ae),(0,w._)(ae))),(0,i.U)(ae=>this.constructOverrides($,ae,A.zonePrefix)),(0,T.b)(ae=>{var me;this.cachedZonePrefix=A.zonePrefix,this.cachedUserId=A.userId,this.cachedProviderCode=A.providerCode,this.currentRemoteConfigRevision=null===(me=ae.data)||void 0===me?void 0:me.version,this.saveRemoteOverrides(ae)}))}getRemoteConfig(A,S,Y,se=!0){this.logger.info("getRemoteConfig",A,S,Y);const fe=(0,h.isNil)(S)?this.lastSavedZone$:(0,p.of)(S),$=(0,h.isNil)(Y)?this.lastSavedUserId$:(0,p.of)(Y),ae=(0,h.isNil)(A)?(0,p.of)(null):(0,p.of)(A);this.fetchRemoteConfig$.next({zoneOb$:fe,userIdOb$:$,providerCodeOb$:ae,currentUrl:"",config:null,zonePrefix:"",userId:"",providerCode:null,alwaysFetch:se})}getCachedError(){return this.cachedHttpError}getRemoteConfigOnLaunch(){return this.loadPreviousOverrides().pipe((0,T.b)(A=>{var S,Y,se,fe,$,ae;this.zonePrefixForCachedRCTelemetry=null===(S=null==A?void 0:A.metaData)||void 0===S?void 0:S.regionName,this.vpcIdForForCachedRCTelemetry=null===(Y=null==A?void 0:A.metaData)||void 0===Y?void 0:Y.zoneName,(null==A?void 0:A.isFetchedFromGXT)?(this.appConfig.setRemoteOverridesFromGXT(A.data,null===(se=null==A?void 0:A.metaData)||void 0===se?void 0:se.rcParamNameToLocalConfigKeyPathMap),this.projectRevisionForCachedRCTelemetry=null===($=null===(fe=null==A?void 0:A.data)||void 0===fe?void 0:fe.debugInfo)||void 0===$?void 0:$.revision,this.fetchedFromGXTForCachedRCTelemetry=!0):(this.appConfig.setRemoteOverrides((0,h.get)(A,"data.gfnpcClient",{})),this.projectRevisionForCachedRCTelemetry=null===(ae=null==A?void 0:A.data)||void 0===ae?void 0:ae.version,this.fetchedFromGXTForCachedRCTelemetry=!1)}))}getCurrentZonePrefix(){return this.logger.info("getCurrentZone"),this.lastSavedZone$.pipe((0,i.U)(A=>{const S=this.getZonePrefix(A);return this.isValidString(S)?S:(this.logger.info("invalid zone",A),null)}))}propagatePreviousOverides(){this.loadPreviousOverrides().subscribe(A=>{this.remoteConfigFetchedSubject.next({overrides:A,config:this.appConfig.get()})})}updateRemoteConfigFromGXT(A,S,Y,se){var fe,$;const me=this.constructOverrides("",A,S,Y,se);me.isFetchedFromGXT=!0,this.currentRemoteConfigRevision=null===($=null===(fe=null==me?void 0:me.data)||void 0===fe?void 0:fe.debugInfo)||void 0===$?void 0:$.revision,this.saveRemoteOverrides(me),this.configureRemoteOverrides(me),this.logger.info("fire config fetched from GXT notification"),this.remoteConfigFetchedSubject.next({overrides:me,config:this.appConfig.get()})}}return B.\u0275fac=function(A){return new(A||B)(I.LFG(n.ed),I.LFG(G.X),I.LFG(x.W),I.LFG(E.OA),I.LFG(O),I.LFG(C.XL),I.LFG(n.Ob),I.LFG(n.dF))},B.\u0275prov=I.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()},27320:(He,de,e)=>{"use strict";e.d(de,{FJ:()=>i,lz:()=>m});const i=5,m="Unknown"},81665:(He,de,e)=>{"use strict";e.d(de,{XS:()=>i.X,mw:()=>n.m});var n=e(84934),i=e(29784);e(202)},29784:(He,de,e)=>{"use strict";e.d(de,{X:()=>G});var n=e(80226),i=e(81134),D=e(53466),m=e(20088),y=e(33927),T=e(85816),r=e(83720),a=e(98636),s=e(18293),p=e(12556),l=e(202),w=e(27320),h=e(6484),u=e(2316),o=e(57390),f=e(38998);const c="networkConfig",I="zones";let G=(()=>{class x{constructor(P,v,O,C,_){this.systemInfo=v,this.sharedStorage=O,this.deeplinkHelperService=C,this.injector=_,this.currentFingerprint="",this.networkSessionIdUpdated$=new n.t(1),this.logger=P.getLogger("gfn/networkConfiguration"),this.isBrowserPlatform=h.ng.isBrowserPlatform(),this.isBrowserPlatform&&(this.deeplinkOverrideZone=this.deeplinkHelperService.getDeeplinkZoneOverride())}get networkSessionId$(){return this.networkSessionIdUpdated$.asObservable()}readNetworkSessionId(){this.getCachedNetworkSessionId().pipe((0,D.q)(1)).subscribe(P=>this.networkSessionIdUpdated$.next(null!=P?P:""),P=>{this.logger.error("Error fetching cached networkSessionId",P),this.networkSessionIdUpdated$.next("")})}set deeplinkOverrideZone(P){this._deeplinkOverrideZone=P}get deeplinkOverrideZone(){return this._deeplinkOverrideZone}getFingerprint(){return this.systemInfo.getNetworkInformation().pipe((0,m.P)(),(0,y.U)(P=>((null==P?void 0:P.Fingerprint)&&this.updateFingerPrintIfChanged(P.Fingerprint),(0,l.isNil)(P)||(0,l.isEmpty)(P.Fingerprint)?null:P.Fingerprint)))}updateFingerPrintIfChanged(P){if(this.currentFingerprint!==P)return this.currentFingerprint=P,this.modifyNetworkConfig(v=>((0,l.isNil)(P)||(v.currentFingerPrint=P),v),"Failed tp update fingerprint").subscribe()}cacheCurrentFingerprint(){return this.getFingerprint().pipe((0,y.U)(P=>!(0,l.isNil)(P)&&(this.lastCachedFingerprint=P,!0)))}getFingerprintInfo(P){return this.getNetworkConfig().pipe((0,y.U)(v=>(0,l.isNil)(v.networks[P])?null:v.networks[P]))}getCurrentFingerprintInfo(){return this.getFingerprint().pipe((0,T.zg)(P=>this.getFingerprintInfo(P)))}getCachedZone(P){return this.getNetworkConfig().pipe((0,y.U)(v=>(0,l.isNil)(v.networks[P])||(0,l.isNil)(v.networks[P].lbrZone)?null:v.networks[P].lbrZone))}getCurrentCachedZone(){return this.getFingerprint().pipe((0,T.zg)(P=>this.getCachedZone(P)))}getCurrentCachedZone$(){return this.cachedZone$||(this.cachedZone$=new n.t(1),this.getCurrentCachedZone().pipe((0,D.q)(1)).subscribe(P=>this.cachedZone$.next(P))),this.cachedZone$.asObservable().pipe((0,r.x)())}getCachedLatencies(P){return this.getNetworkConfig().pipe((0,y.U)(v=>(0,l.isNil)(v.networks[P])||(0,l.isNil)(v.networks[P].zonesLatencies)?null:v.networks[P].zonesLatencies))}getCurrentCachedLatencies(){return this.getFingerprint().pipe((0,T.zg)(P=>this.getCachedLatencies(P)))}getCachedNetworkSessionId(){return this.getFingerprint().pipe((0,T.zg)(P=>this.getNetworkConfig().pipe((0,y.U)(v=>(0,l.isNil)(v.networks[P])||(0,l.isNil)(v.networks[P].networkSessionId)?null:v.networks[P].networkSessionId))))}updateCurrentFingerprintNetworkTestFlag(P,v){return this.getFingerprint().pipe((0,T.zg)(O=>this.modifyNetworkConfig(C=>{const _=(0,l.isNil)(O)?this.lastCachedFingerprint:O;return(0,l.isNil)(_)||(C.networks[_]=C.networks[_]||{},(0,l.merge)(C.networks[_],{runNetworkTest:P,indirectNetworkTestPolicy:v})),C},`Unable to ${P?"set":"reset"} the network test requirement with policy: ${v}.`)))}setCachedLatencies(P,v){var O;const C={},_=[];if(!(0,l.isNil)(v)&&v!==w.lz)for(const b of v.split(/[|]/)){const B=b.split(":"),U=2===B.length?Number(B[1]):NaN;isNaN(U)||_.push({key:B[0],val:B[1]})}const F=this.injector.get(p.VKt),V=(null===(O=null==F?void 0:F.lbrConfig)||void 0===O?void 0:O.cachedLatencyCount)||w.FJ;for(const b of _.sort((B,U)=>B.val-U.val).slice(0,V))C["latency@"+b.key]=b.val;return this.modifyNetworkConfig(b=>(b.networks[P]=b.networks[P]||{},b.networks[P].zonesLatencies=(0,l.isEmpty)(C)?null:C,b),`Unable to save latency information for ${P}.`)}setCachedZone(P,v){return this.modifyNetworkConfig(O=>(O.networks[P]=O.networks[P]||{},O.networks[P].lbrZone=v,O),`Unable to save zone information for ${P}.`).pipe((0,a.b)(O=>{O&&this.cachedZone$&&this.cachedZone$.next(v)}))}setCachedNetworkSessionId(P){return this.getFingerprint().pipe((0,T.zg)(v=>this.modifyNetworkConfig(O=>(O.networks[v]=O.networks[v]||{},O.networks[v].networkSessionId=P,O),`Unable to save networkSessionId information for ${v}.`).pipe((0,a.b)(O=>{O&&this.networkSessionIdUpdated$.next(P)}))))}updateNetworkTestInfoInFingerprint(P,v,O){return this.getFingerprint().pipe((0,T.zg)(C=>C?this.modifyNetworkConfig(_=>(_.networks[C]=_.networks[C]||{},_.networks[C].maxSubscriptionProfile=P,_.networks[C].networkTestReturn=v,_.networks[C].lastShownThresholdProfile=O,_),`Unable to save maxSubscriptionProfile, networkTestReturn, lastShownThresholdProfile information for ${C}.`):(0,i.of)(!1)))}updateNetworkTestThresholdProfile(P){return this.getFingerprint().pipe((0,T.zg)(v=>this.modifyNetworkConfig(O=>(O.networks[v]=O.networks[v]||{},O.networks[v].lastShownThresholdProfile=P,O),`Unable to save lastShownThresholdProfile information for ${v}.`)))}clearFingerprintCachedZone(P){return this.modifyNetworkConfig(v=>(this.logger.info("clear Cached Zone for fingerprint: ",P),(0,l.isNil)(v.networks[P])||delete v.networks[P].lbrZone,v),`Unable to clear zone information for ${P}.`)}clearCachedDisplayForFingerprint(P){return this.modifyNetworkConfig(v=>(this.logger.info("clear Cached Display for fingerprint: ",P),(0,l.isNil)(v.networks[P])||delete v.networks[P].maxDisplay,v),`Unable to clear display information for ${P}.`)}clearCachedCurrentFingerprint(){return this.getFingerprint().pipe((0,T.zg)(P=>this.modifyNetworkConfig(v=>(this.logger.info("clear the network fingerprint: ",P),(0,l.isNil)(v.networks[P])||delete v.networks[P],v),`Unable to clear information for ${P}.`)))}setZoneList(P){return this.sharedStorage.writeBlock(I,P)}getZoneList(){return this.sharedStorage.readBlock(I)}setFingerprintMaxDisplay(P,v){return this.modifyNetworkConfig(O=>(this.logger.info(`fingerprint ${v} display set to ${P.width}x${P.height}@${P.frameRate}`),O.networks[v]=O.networks[v]||{},O.networks[v].maxDisplay=P,O),`Unable to save information for ${v}.`)}setCurrentFingerprintMaxDisplay(P){return this.getFingerprint().pipe((0,T.zg)(v=>this.setFingerprintMaxDisplay(P,v)))}getFingerprintMaxDisplay(P){return this.getNetworkConfig().pipe((0,y.U)(v=>(0,l.isNil)(v.networks[P])||(0,l.isNil)(v.networks[P].maxDisplay)?null:v.networks[P].maxDisplay))}getFingerprintMaxPacketSize(P){return this.getNetworkConfig().pipe((0,y.U)(v=>{var O,C;return(0,l.isNil)(v.networks[P])||(0,l.isNil)(null===(C=null===(O=v.networks[P].networkTestReturn)||void 0===O?void 0:O.testResult)||void 0===C?void 0:C.maxPacketSize)?null:v.networks[P].networkTestReturn.testResult.maxPacketSize}))}getCurrentFingerprintMaxDisplay(){return this.getFingerprint().pipe((0,T.zg)(P=>this.getFingerprintMaxDisplay(P)),(0,a.b)(P=>{(0,l.isNil)(P)||this.logger.info(`Get Current maxDisplay: ${P.width}x${P.height}@${P.frameRate}`)}))}getCurrentFingerprintMaxPacketSize(){return this.getFingerprint().pipe((0,T.zg)(P=>this.getFingerprintMaxPacketSize(P)),(0,a.b)(P=>{(0,l.isNil)(P)||this.logger.info(`Get Current maxPacketSize: ${P}`)}))}getNetworkOverride(){return this.deeplinkOverrideZone?(0,i.of)(this.deeplinkOverrideZone):this.sharedStorage.readBlock(c).pipe((0,y.U)(P=>P.routingOverride||null))}setNetworkOverride(P){return this.modifyNetworkConfig(v=>(v.routingOverride=P,v),`Unable to save zone override information for ${P}.`)}updateNetworkOverrideNetworkTestFlag(P){return this.modifyNetworkConfig(v=>(v.routingOverride&&(v.routingOverride.runNetworkTest=!!this.isBrowserPlatform||P),v),`Unable to ${P?"set":"clear"} the network test requirement.`)}clearNetworkOverride(){return this.deeplinkOverrideZone?(this.deeplinkOverrideZone=null,(0,i.of)(!0)):this.modifyNetworkConfig(P=>(delete P.routingOverride,P),"Unable to clear zone override.")}clearCurrentFingerprintCachedZone(){return this.logger.info("deleting CachedZone for current fingerprint"),this.getFingerprint().pipe((0,T.zg)(P=>this.clearFingerprintCachedZone(P)))}clearCurrentFingerprintMaxDisplay(){return this.logger.info("deleting Cached Display for current fingerprint"),this.getFingerprint().pipe((0,T.zg)(P=>this.clearCachedDisplayForFingerprint(P)))}modifyNetworkConfig(P,v){return this.getNetworkConfig().pipe((0,T.zg)(O=>this.sharedStorage.writeBlock(c,P(O))),(0,s.K)(this.logError(v,!1)))}getNetworkConfig(){return this.sharedStorage.readBlock(c).pipe((0,y.U)(P=>(0,l.merge)(P,{networks:{}})))}logError(P,v){return O=>(this.logger.error(P,O),(0,i.of)(v))}writeNetworkConfig(P,v){return this.sharedStorage.writeBlock(c,P,v)}}return x.\u0275fac=function(P){return new(P||x)(u.LFG(h.ed),u.LFG(h.Ob),u.LFG(o.OA),u.LFG(f.g),u.LFG(u.zs3))},x.\u0275prov=u.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()},84934:(He,de,e)=>{"use strict";e.d(de,{m:()=>x});var n=e(79441),i=e(76491),D=e(90490),m=e(81134),y=e(45871),T=e(33927),r=e(85816),a=e(67202),s=e(18293),p=e(22663),l=e(20088),t=e(2984),w=e(202),u=e(27320),o=e(67067),f=e(89166),c=e(2316),g=e(29784),I=e(6484),G=e(43124);let x=(()=>{class E{constructor(v,O,C,_,F){this.networkConfig=v,this.bridgeService=O,this.telemetryService=C,this.telemetryUtilService=_,this.lbrCancelled$=new n.xQ,this.retriggerPolicy$=new i.X(o.OR5.Manual),this.logger=F.getLogger("gfn/serverRouting"),this.isLbrInProgress=!1,this.lbrRun=!1}get isLbrRequired(){return this.lbrRequired}set isLbrRequired(v){this.lbrRequired=v}get isLbrRun(){return this.lbrRun}resetLbrStatus(){this.lbrRequired=!1,this.lbrRun=!1}setRetriggerPolicy(v){this.retriggerPolicy$.next(v)}getCachedServerZone(){const v=[this.networkConfig.getNetworkOverride(),this.networkConfig.getCurrentCachedZone()];return(0,D.$R)(...v).pipe((0,T.U)(O=>{const[C,_]=O;return(0,w.isNil)(C)?(this.logger.info("DiskCachedZone is: ",_," and cachedZone is: ",this.cachedZone),(0,w.isNil)(this.cachedZone)?_:this.cachedZone):(this.logger.info("Latency-based routing override found.",C),C)}))}getFastestRegionalZone(v,O,C){const _=(0,w.keys)(O);this.isLbrInProgress=!0;const F={user:v.userId,deviceId:v.deviceId,platformId:v.platformId,addresses:_},V=this.cacheZoneList(O),b=this.networkConfig.getNetworkOverride(),B=this.networkConfig.getCurrentCachedLatencies();return(0,D.$R)(V,b,B).pipe((0,r.zg)(([,U,A])=>(0,w.isNil)(U)?(this.logger.info("override zone is not found, run LBR"),(0,w.isNil)(C)||C.setTag(f.NI.UsedLatencyBasedRouting,!0),this.performLbr(F,O,U,v.defaultZone)):(this.logger.info("Latency-based routing override found: ",U),(0,w.isNil)(C)||(this.logger.info("Setting isLBRRun to false"),C.setTag(f.NI.UsedLatencyBasedRouting,!1)),this.performLbr(F,O,U,v.defaultZone).pipe((0,a.h)(U),(0,s.K)(S=>(this.logger.error("Failed to perform LBR, returning overriden zone.",S),(0,m.of)(U)))))))}shouldLbrRun(v){if((0,w.isEmpty)(v))return this.logger.info("Call to ServerInfo failed, therefore run LBR."),this.setRetriggerPolicy(o.OR5.ServerInfoFailed),this.cacheZoneList(v).pipe((0,a.h)(!0));const O=[this.networkConfig.getZoneList(),this.networkConfig.getCurrentFingerprintInfo()];return(0,D.$R)(...O).pipe((0,r.zg)(([C,_])=>{const F=(0,w.isNil)(this.cachedZone)&&!(0,w.isNil)(_)?_.lbrZone:this.cachedZone,V=(0,w.keys)(v),b=(0,w.keys)(C);let B=!1;return(0,w.isNil)(_)?(this.logger.info("This fingerprint is observed for the first time, on which LBR was never run."),this.setRetriggerPolicy(o.OR5.FingerprintChanged),B=!0):(0,w.isEmpty)(C)||(0,w.isNil)(_.zonesLatencies)||-1===(0,w.keys)(_.zonesLatencies)[0].indexOf(".")?(this.logger.info("Zone list or zonesLatencies not saved, therefore run LBR."),this.setRetriggerPolicy(o.OR5.ZoneListEmpty),B=!0):(0,w.isNil)(F)?(this.logger.info("The user didn't have a cached zone, therefore run LBR."),this.setRetriggerPolicy(o.OR5.CachedZoneNotStored),B=!0):V.includes(F.address)?(0,w.difference)(V,b).length>0&&(this.logger.info("New zones have been added to the pool."),this.setRetriggerPolicy(o.OR5.NewZonesAdded),B=!0):(this.logger.info("The user's cached zone is no longer available."),this.setRetriggerPolicy(o.OR5.CachedZoneNotAvailable),B=!0),this.cacheZoneList(v).pipe((0,a.h)(B))}),(0,s.K)(C=>(this.logger.error("Error trying to determine if LBR should run, therefore run LBR.",C),this.setRetriggerPolicy(o.OR5.PolicyCheckFailed),this.cacheZoneList(v).pipe((0,a.h)(!0)))))}cacheZoneList(v){return this.networkConfig.setZoneList(v).pipe((0,T.U)(()=>(this.logger.info("Successfully stored zone list in shared storage"),!0)),(0,s.K)(O=>(this.logger.warn("Failed to store zone list: ",O),(0,m.of)(!1))))}performLbr(v,O,C,_){if((0,w.isEmpty)(O))return this.logger.error("Cannot perform latency based routing as zones is empty"),(0,y._)("zones is empty.");this.lbrRun=!0;const F=Date.now();return this.networkConfig.getFingerprint().pipe((0,r.zg)(V=>this.bridgeService.executeCommand(t.Gh.Gfn.Serverrouting.PerformRouting,v).pipe((0,p.R)(this.lbrCancelled$),(0,r.zg)(b=>{this.cachedZone=O[null==b?void 0:b.url],this.cachedZone.defaultZone=_;const B=this.networkConfig.setCachedZone(V,this.cachedZone).pipe((0,r.zg)(A=>b.cacheResult?(this.isLbrInProgress=!1,(0,m.of)(A)):this.networkConfig.clearFingerprintCachedZone(V))),U=this.networkConfig.setCachedLatencies(V,b.results);return this.logRoutingSuccess(b),(0,D.$R)(B,U).pipe((0,r.zg)(()=>this.sendRoutingStatusTelemetry(b,C,b.cacheResult?o.N3X.Success:o.N3X.Other,F)),(0,a.h)(this.cachedZone))}),(0,s.K)(b=>{const B=b,U=(()=>{try{return JSON.parse(B.message)}catch(Y){return this.logger.error(`Unable to determine error from ${B.message}`),{results:u.lz,ipAddresses:u.lz,networkSessionId:u.lz,resultCode:B.code,resultText:B.message}}})();this.logRoutingFailure(U);const A=this.networkConfig.clearFingerprintCachedZone(V),S=this.networkConfig.setCachedLatencies(V,U.results);return(0,D.$R)(A,S).pipe((0,r.zg)(()=>this.sendRoutingStatusTelemetry(U,C,o.N3X.ClientError,F)),(0,r.zg)(()=>(0,y._)(b)))}))))}getRoutingInfoWithPolicy(v){return this.retriggerPolicy$.pipe((0,l.P)(),(0,T.U)(O=>(v.policy=O,v)))}sendRoutingStatusTelemetry(v,O,C,_){const F={clientType:this.telemetryUtilService.getClientType(),serverRecommendedZone:"",clientRecommendedZone:v.url||"",clientRecommendedZoneLatency:v.latency||0,results:v.results,ipAddresses:v.ipAddresses,status:C,errorCode:""+v.resultCode,errorDetails:v.resultText,networkSessionId:v.networkSessionId,totalMs:Date.now()-_,overrideZone:(0,w.isNil)(O)?"":O.address,overrideActive:(0,w.isNil)(O)?o.wye.FALSE:o.wye.TRUE};return this.getRoutingInfoWithPolicy(F).pipe((0,T.U)(V=>this.telemetryService.push(new o.OSH(V))))}logRoutingSuccess(v){this.logger.info(`Latency-based routing ${v.cacheResult?"":"partially"} succeeded with code: '${v.resultText}'`),this.logger.info(`Least latency zone is ${v.url} with ${v.latency}ms`),this.logger.info("Results",v.results),this.logger.info("IP addresses",v.ipAddresses)}logRoutingFailure(v){this.logger.error(`Latency-based routing failed with code: '${v.resultText}'`),this.logger.info("Results",v.results),this.logger.info("IP addresses",v.ipAddresses)}cleanupOnCancel(){return this.lbrCancelled$.next(),this.isLbrInProgress?this.networkConfig.clearCurrentFingerprintCachedZone():(0,m.of)(!0)}}return E.\u0275fac=function(v){return new(v||E)(c.LFG(g.X),c.LFG(I.dF),c.LFG(G.y0),c.LFG(o.wU6),c.LFG(I.ed))},E.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},90722:(He,de,e)=>{"use strict";e.d(de,{db:()=>n,M1:()=>i,fy:()=>D,_8:()=>y,BT:()=>T,Z6:()=>r,QZ:()=>a,Bq:()=>s,ZP:()=>p,n:()=>l,V9:()=>t,MD:()=>w,Jr:()=>h,OA:()=>u,yD:()=>I,vG:()=>x,HQ:()=>E,zP:()=>P,HH:()=>v,nF:()=>O,OK:()=>C,WU:()=>_,iq:()=>F,gK:()=>V,EG:()=>B});var n=(()=>{return(U=n||(n={}))[U.Loading=0]="Loading",U[U.Ready=1]="Ready",n;var U})(),i=(()=>{return(U=i||(i={})).Balanced="balanced",U.DataSaver="dataSaver",U.Competitive="competitive",U.Custom="custom",i;var U})(),D=(()=>{return(U=D||(D={})).Low="Low",U.Medium="Medium",U.High="High",U.Off="Off",D;var U})(),m=(()=>{return(U=m||(m={})).Standard="Standard",U.Enhanced="Enhanced",U.AiEnhanced="AI-enhanced",U.NvScaler="NvScaler",U.NvSharpen="NvSharpen",m;var U})(),y=(()=>{return(U=y||(y={})).Standard="Standard",U.Enhanced="Enhanced",U.AiEnhanced="AiEnhanced",U.NvScaler="NvScaler",U.NvSharpen="NvSharpen",y;var U})(),T=(()=>{return(U=T||(T={})).Warnings="WARNINGS",U.On="ON",U.Off="OFF",T;var U})();const r=[{value:!0,displayName:"common.auto",enabled:!0},{value:!1,displayName:"settings.streamingProfiles.custom",enabled:!0}];var a=(()=>{return(U=a||(a={})).Resolution="UpScalingResolutionId",U.AiSharpness="AiSharpnessValue",U.EnhSharpness="EnhancedSharpnessValue",a;var U})();const s={BlockName:"appSettingsConfig",LatencyPropertyName:"advancedLatencyOptimization",DirectInputPropertyName:"directInput",NetworkQuality:"networkQuality",StreamingProfiles:"streamingProfiles",CustomProfile:"customProfile",DiscordRichPresence:"discordRpEnabled",DirectInputCatalinaOsOrHigher:"directInputCatalinaOsOrHigher",InGameGraphics:"inGameGraphics",UpScalingResolutionId:"upScalingResolutionId",AiSharpnessValue:"aiSharpnessValue",EnhancedSharpnessValue:"enhancedSharpnessValue",UpscalingModeUpdatedByUser:"upscalingModeUpdatedByUser",ClipboardPaste:"clipboardPaste"},p={OFF:{value:0,displayName:"common.off"},WARNINGS:{value:1,displayName:"settings.network.networkQualitySettingWarnings"}},l={advancedLatencyOptimization:!1,directInput:!0,networkQuality:p.WARNINGS.value,discordRpEnabled:!0,directInputCatalinaOsOrHigher:!1,clipboardPaste:!1},t={BALANCED:{value:i.Balanced,displayName:"settings.streamingProfiles.balanced",translatedDisplayName:""},DATA_SAVER:{value:i.DataSaver,displayName:"settings.streamingProfiles.dataSaver",translatedDisplayName:""},COMPETITIVE:{value:i.Competitive,displayName:"settings.streamingProfiles.competitive",translatedDisplayName:""},CUSTOM:{value:i.Custom,displayName:"settings.streamingProfiles.custom",translatedDisplayName:""}},w={OFF:{id:0,label:"common.off",value:4,name:D.Off},LOW:{id:1,label:"settings.resolutionUpscaling.sharpnessLow",value:0,name:D.Low},MEDIUM:{id:2,label:"settings.resolutionUpscaling.sharpnessMed",value:2,name:D.Medium},HIGH:{id:3,label:"settings.resolutionUpscaling.sharpnessHigh",value:3,name:D.High}},h={STANDARD:{id:0,checked:!1,disabled:!1,value:m.Standard,displayName:"settings.resolutionUpscaling.standard",resolutionInfo:"settings.resolutionUpscaling.standardInfo"},ENHANCED:{id:1,checked:!0,disabled:!1,value:m.Enhanced,displayName:"settings.resolutionUpscaling.enhanced",resolutionInfo:"settings.resolutionUpscaling.enhancedInfo"},AI_ENHANCED:{id:2,checked:!1,disabled:!1,value:m.AiEnhanced,displayName:"settings.resolutionUpscaling.aiEnhanced",resolutionInfo:"settings.resolutionUpscaling.aiInfo",error:{1:"",2:"settings.resolutionUpscaling.aiWarning.dispFlagErrMinDrv",4:"",8:"",16:"",32:"",64:"",128:"settings.resolutionUpscaling.aiWarning.dispFlagErrNvPixelsLoad",512:"",1024:"",4096:""}},NV_SCALER:{id:3,value:m.NvScaler},NV_SHARP:{id:4,value:m.NvSharpen}},u={ValueOff:{value:0,displayName:"common.off",enabled:!0},ValueOn:{value:1,displayName:"settings.streamingProfiles.on",enabled:!0},ValueAdaptive:{value:2,displayName:"settings.streamingProfiles.adaptive",enabled:!0}},I={balanced:{name:i.Balanced,description:"settings.streamingProfiles.balancedDescription",width:1920,height:1080,fps:60,maxBitrate:0,dataUsage:10,drc:!0,vSync:u.ValueAdaptive.value,networkInfo:{},hdrStreaming:!0},dataSaver:{name:i.DataSaver,description:"settings.streamingProfiles.dataSaverDescription",width:1280,height:720,fps:60,maxBitrate:12,dataUsage:4,drc:!0,vSync:u.ValueAdaptive.value,networkInfo:{},hdrStreaming:!1},competitive:{name:i.Competitive,description:"settings.streamingProfiles.competitiveDescription",width:1280,height:720,fps:60,maxBitrate:0,dataUsage:6,drc:!0,vSync:u.ValueOff.value,networkInfo:{},hdrStreaming:!1}},x={Value120:{value:120,displayName:"120 FPS",enabled:!1},Value60:{value:60,displayName:"60 FPS",enabled:!0},Value30:{value:30,displayName:"30 FPS",enabled:!0}},E=59,P=119,v=" FPS",O={Ar_16_10:1.6,Ar_16_9:16/9,Ar_4_3:4/3,Ar_5_4:5/4,Ar_19_5_9:2.15,Ar_24_10:2.4,Ar_32_9:32/9,Ar_21_9_1:3440/1440,Ar_21_9_2:2560/1080,Ar_21_9_3:1680/720},C=[{ratio:O.Ar_16_10,formattedRatio:"(16:10)"},{ratio:O.Ar_16_9,formattedRatio:"(16:9)"},{ratio:O.Ar_4_3,formattedRatio:"(4:3)"},{ratio:O.Ar_5_4,formattedRatio:"(5:4)"},{ratio:O.Ar_19_5_9,formattedRatio:"(19.5:9)"},{ratio:O.Ar_24_10,formattedRatio:"(24:10)"},{ratio:O.Ar_32_9,formattedRatio:"(32:9)"},{ratio:O.Ar_21_9_1,formattedRatio:"(21:9)"},{ratio:O.Ar_21_9_2,formattedRatio:"(21:9)"},{ratio:O.Ar_21_9_3,formattedRatio:"(21:9)"}],_={Value16_10:{aspectRatio:O.Ar_16_10,width:1280,height:800},Value16_9:{aspectRatio:O.Ar_16_9,width:1280,height:720},Value4_3:{aspectRatio:O.Ar_4_3,width:1024,height:768},Value5_4:{aspectRatio:O.Ar_5_4,width:1280,height:1024},Value195_9:{aspectRatio:O.Ar_19_5_9,width:640,height:1376},Value24_10:{aspectRatio:O.Ar_24_10,width:2560,height:1080},Value32_9:{aspectRatio:O.Ar_32_9,width:3840,height:1080},Value21_9_1:{aspectRatio:O.Ar_21_9_1,width:3440,height:1440},Value21_9_2:{aspectRatio:O.Ar_21_9_2,width:2560,height:1080},Value21_9_3:{aspectRatio:O.Ar_21_9_3,width:1680,height:720}},F={FHD:{width:1920,height:1200},QHD:{width:2560,height:1600},UHD:{width:3840,height:2400}};var V=(()=>{return(U=V||(V={}))[U.bitRateMin=5]="bitRateMin",U[U.bitRateMax=75]="bitRateMax",V;var U})(),B=(()=>{return(U=B||(B={})).maxBitrate="maxBitrate",U.maxBitrateValue="maxBitrateValue",U.resolution="resolution",U.frameRate="frameRate",U.drc="drc",U.vSync="vSync",U.hdr="hdr",B;var U})()},20882:(He,de,e)=>{"use strict";e.d(de,{gK:()=>r.gK,EG:()=>r.EG,db:()=>r.db,ZP:()=>r.ZP,yD:()=>r.yD,M1:()=>r.M1,MD:()=>r.MD,zr:()=>C,Jr:()=>r.Jr,DI:()=>p,iq:()=>r.iq,QZ:()=>r.QZ,n:()=>r.n,gb:()=>I,Bq:()=>r.Bq,fy:()=>r.fy,GK:()=>_.G,V9:()=>r.V9,_8:()=>r._8,OA:()=>r.OA});var n=e(202),i=e(33927),D=e(83720),m=e(92597),y=e(6484),T=e(2984),r=e(90722),a=e(67067),s=e(12556);class p{static getUpScaleSettingList(){return Object.values(s.JrW)}static getSharpnessList(){return Object.values(s.MDl)}static getUpScaleSetting(V){const b=p.getUpScaleSettingList().find(B=>B.id===V);return b&&Object.assign(Object.assign({},b),{checked:!0})}static getSharpnessbyProperty(V,b){return Object.values(s.MDl).find(B=>B[b]===V)||s.MDl.LOW}static getSharpnessbyId(V){return p.getSharpnessbyProperty(V,"id")}static getSharpnessbyValue(V){return p.getSharpnessbyProperty(V,"value")}static isEnhanced(V){return V===s.JrW.ENHANCED.id}static isAiEnhanced(V){return V===s.JrW.AI_ENHANCED.id}static isNvScaler(V){return V===s.JrW.NV_SCALER.id}static isNvSharpen(V){return V===s.JrW.NV_SHARP.id}static isNvScalerOrNvSharpen(V){return p.isNvScaler(V)||p.isNvSharpen(V)}static isSharpnessOff(V){return V.name===s.fyj.Off}}class l{static getTelemetrySettingDescription(V,b){let B="";switch(V){case r.Bq.UpScalingResolutionId:B=p.getUpScaleSetting(b).value;break;case r.Bq.AiSharpnessValue:case r.Bq.EnhancedSharpnessValue:B=p.getSharpnessbyValue(b).name;break;case r.Bq.UpscalingModeUpdatedByUser:B=b?a.wye.TRUE:a.wye.FALSE;break;case r.Bq.NetworkQuality:B=this.getNetworkSettingTelemetryName(b);break;case r.Bq.DiscordRichPresence:case r.Bq.DirectInputPropertyName:case r.Bq.InGameGraphics:B=this.getBooleanSettingTelemetryName(b);break;case r.Bq.StreamingProfiles:B=b}return B}static getNetworkSettingTelemetryName(V){let b="";switch(V){case 0:b=r.BT.Off;break;case 1:b=r.BT.Warnings;break;case 2:b=r.BT.On}return b}static getBooleanSettingTelemetryName(V){return V?a._So.Enabled:a._So.Disabled}}var t=e(20180),w=e(9021),h=e(2316),u=e(57390),o=e(43124),f=e(49654),c=e(73341),g=e(3076);let I=(()=>{class F{constructor(b,B,U,A,S,Y,se,fe){this.loggingService=b,this.sharedStorageService=B,this.bridgeService=U,this.telemetryService=A,this.telemetryUtilService=S,this.appConfig=Y,this.systemInfoService=se,this.logger=this.loggingService.getLogger("gfn/settingsService"),this.sharedSettingsStream=fe.createStream(this.getSettingsData.bind(this)),this.bridgeService.executeCommand(T.Gh.Gfn.Streaming.VsyncToggle).subscribe($=>{this.platformSupportsVsyncToggle=$})}get networkWarningsEnabled$(){return this.sharedSettingsStream.get$().pipe((0,i.U)(b=>{var B;return(null!==(B=null==b?void 0:b.networkQuality)&&void 0!==B?B:r.n.networkQuality)===r.ZP.WARNINGS.value}),(0,D.x)())}setNetworkWarningsEnabled(b){this.logger.info(b?"Enabling":"Disabling","network warnings"),this.storeChangedSettings({settingType:r.Bq.NetworkQuality,selectedOption:b?r.ZP.WARNINGS.value:r.ZP.OFF.value})}isVsyncChangedAndToggleSupported(){return void 0!==this.currentVsyncValue&&void 0!==this.firstVsyncValue&&this.currentVsyncValue!==this.firstVsyncValue&&!this.platformSupportsVsyncToggle}setVsyncValue(b){void 0===this.firstVsyncValue?this.firstVsyncValue=b:this.currentVsyncValue=b}resetVsyncChanged(){this.firstVsyncValue=void 0,this.currentVsyncValue=void 0}getLinksUrl(b,B){b===t.qB.OSS_LICENSES&&(B="en_US");const U=this.appConfig.redirect.serverUrl+B+"&page="+b;return this.logger.info(b+"url",U),U}getIohidConfigurable(){return this.ioHidConfig$||(this.ioHidConfig$=this.bridgeService.executeCommand(T.Gh.Common.Applicationcontrol.ReadConfig,{appname:"GeForceNOW"}).pipe((0,m.d)(1))),this.ioHidConfig$}getSwitchValue(b,B){let U=!1;return(0,n.toArray)(b).forEach(S=>{if((0,n.includes)(S,B))return U="true"===S.split("=")[1].trim(),U}),U}getSettingsData(){return this.sharedStorageService.readBlock(r.Bq.BlockName)}storeChangedSettings(b,B=!0){const U={};this.getSettingsData().subscribe(A=>{(0,n.isNull)(A)?(U[b.settingType]=b.selectedOption,A=U):A[b.settingType]=b.selectedOption,this.writeData(A,b,B)})}isCatalinaOsOrHigher(){return this.isMinCatalinaOs$||(this.isMinCatalinaOs$=this.systemInfoService.getOsInformation().pipe((0,i.U)(b=>{if(this.logger.info("current OS: ",b.OSName,b.OSVersion),"macos"===b.OSName.toLowerCase()){const B=b.OSVersion.split("."),U=parseInt(B[0],10),A=parseInt(B[1],10);return U>=10&&A>=15}return!1}),(0,m.d)(1))),this.isMinCatalinaOs$}getClientPlatform(){return this.clientPlatform$||(this.clientPlatform$=this.systemInfoService.getOsInformation().pipe((0,i.U)(b=>y.ng.isBrowserPlatform()?"browser"+b.Platform:"desktop"+b.Platform),(0,m.d)(1))),this.clientPlatform$}writeData(b,B,U=!0){this.sharedStorageService.writeBlock(r.Bq.BlockName,b,!0).subscribe(A=>{U&&this.sendTelemetry(B),this.sharedSettingsStream.refresh()},A=>{U&&this.sendTelemetry(B,A.errorMessage)})}sendTelemetry(b,B=""){const U={clientType:this.telemetryUtilService.getClientType(),settingLabel:b.settingType,settingValue:l.getTelemetrySettingDescription(b.settingType,b.selectedOption),errorDetails:B},A=new w.J8H(U);this.telemetryService.push(A)}persistInGameGraphicsEnabled(){return this.getSettingsData().pipe((0,i.U)(b=>!!(null==b?void 0:b.inGameGraphics)&&b.inGameGraphics))}}return F.\u0275fac=function(b){return new(b||F)(h.LFG(y.ed),h.LFG(u.OA),h.LFG(y.dF),h.LFG(o.y0),h.LFG(f.w),h.LFG(c.VK),h.LFG(y.Ob),h.LFG(g.O_))},F.\u0275prov=h.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();var G=e(80226),x=e(90490),E=e(61486),P=e(98636),v=e(53466);const O=T.Gh.Gfn.Streaming;let C=(()=>{class F{constructor(b,B,U,A,S){this.loggingService=b,this.bridgeService=B,this.cloudVarService=U,this.settingsService=A,this.telemetryService=S,this.isUpscalingVisibleSubject=new G.t(1),this.isAiSupportedSubject=new G.t(1),this.uiUpScaleDisplaySettingSubject=new G.t(1),this.aiSharpnessSettingSubject=new G.t(1),this.enhSharpnessSettingSubject=new G.t(1),this.nvScalerNvSharpSupportSubject=new G.t(1),this.logger=this.loggingService.getLogger("gfn/resolutionUpscaleService")}initialize(){this.setUpScalingOnAppLaunch()}saveSetting(b,B,U=!1){this.settingsService.storeChangedSettings({settingType:s.BqE[b],selectedOption:B},U),U&&b===s.QZM.Resolution&&this.settingsService.storeChangedSettings({settingType:s.BqE.UpscalingModeUpdatedByUser,selectedOption:!0})}fetchUpScaleDefaultOptionId(){return this.cloudVarService.getFeatureToggle(s._P4.RESOLUTION_UPSCALE_DEFAULT_OPTION_ID).pipe((0,P.b)(b=>{this.logger.info(`Resolution upscale default Id from gxtarget is ${b}`)}))}isValidId(b){return"number"==typeof b&&!Number.isNaN(b)}sendUpscalingErrorTelemetry(b,B){const U={settingType:b,selectedOption:null};(0,x.$R)(this.telemetryService.getDefaultClientConsentObserable(),this.telemetryService.getCommonDataObservable()).pipe((0,v.q)(1)).subscribe(A=>{this.settingsService.sendTelemetry(U,B.toString())})}getNvScalerNvSharpSupport(){return this.nvScalerNvSharpSupportSubject.asObservable()}setNvScalerNvSharpSupport(b){this.nvScalerNvSharpSupportSubject.next(b)}getUpscalingVisibility(){return this.isUpscalingVisibleSubject.asObservable()}setUpscalingVisibility(b){this.isUpscalingVisibleSubject.next(b)}getAiSupport(){return this.isAiSupportedSubject.asObservable()}setAiSupport(b){this.isAiSupportedSubject.next(b)}getUpScaleDisplaySetting(){return this.uiUpScaleDisplaySettingSubject.asObservable()}setUpScaleDisplaySetting(b){const B=p.isNvScalerOrNvSharpen(b.id)?s.JrW.ENHANCED:p.getUpScaleSetting(b.id);this.uiUpScaleDisplaySettingSubject.next(B)}getAiSharpnessSetting(){return this.aiSharpnessSettingSubject.asObservable()}setAiSharpnessSetting(b){this.aiSharpnessSettingSubject.next(b)}getEnhSharpnessSetting(){return this.enhSharpnessSettingSubject.asObservable()}setEnhSharpnessSetting(b){this.enhSharpnessSettingSubject.next(b)}setUpScalingOnAppLaunch(){if(y.ng.isBrowserPlatform())return;const b={filterSupportList:p.getUpScaleSettingList().map(B=>({filterId:B.id}))};this.bridgeService.executeCommand(O.GetMagnificationFilterSupportList,b).pipe((0,v.q)(1)).subscribe(B=>{if(this.logger.info("Supported magnification filters.",B),B.filterSupportList){const U=B.filterSupportList.find(fe=>p.isEnhanced(fe.filterId)),A=Boolean(null==U?void 0:U.MagnificationFilterSupport);if(this.setUpscalingVisibility(A),!A)return void this.sendUpscalingErrorTelemetry(s._87.Enhanced,null==U?void 0:U.FrameFilterErrorInfo);const S=B.filterSupportList.find(fe=>p.isNvScaler(fe.filterId)),Y=B.filterSupportList.find(fe=>p.isNvSharpen(fe.filterId)),se=B.filterSupportList.find(fe=>p.isAiEnhanced(fe.filterId));this.handleUpScaleSetting(S,Y,se)}},B=>{this.logger.error("Magnification filter error.",B)})}handleUpScaleSetting(b,B,U){const A=Boolean(null==b?void 0:b.MagnificationFilterSupport),S=Boolean(null==B?void 0:B.MagnificationFilterSupport),Y=Boolean(null==U?void 0:U.MagnificationFilterSupport),se=null==U?void 0:U.FrameFilterErrorInfo,fe=s.JrW.AI_ENHANCED.error[se];this.setNvScalerNvSharpSupport({isNvScalerSupported:A,isNvSharpenSupported:S}),this.setAiSupport({isAiSupported:Y,aiErrorMessage:fe}),this.settingsService.getSettingsData().pipe((0,v.q)(1)).subscribe($=>{let ae=null==$?void 0:$.upScalingResolutionId;const me=null==$?void 0:$.upscalingModeUpdatedByUser,ye=p.getSharpnessbyValue(null==$?void 0:$.aiSharpnessValue),ue=p.getSharpnessbyValue(null==$?void 0:$.enhancedSharpnessValue);if(this.setAiSharpnessSetting(ye),this.setEnhSharpnessSetting(ue),Y||(this.sendUpscalingErrorTelemetry(s._87.AiEnhanced,se),p.isAiEnhanced(ae)&&(ae=null)),this.isValidId(ae)&&me)switch(this.setMagnificationFilter(ae),ae){case s.JrW.AI_ENHANCED.id:this.setSharpnessFilter(ye);break;case s.JrW.ENHANCED.id:(A||S)&&this.setSharpnessFilter(ue)}else this.fetchUpScaleDefaultOptionId().pipe((0,v.q)(1)).subscribe(X=>{this.setMagnificationFilter(X),this.saveSetting(s.QZM.Resolution,X,!1),(A||S)&&this.setSharpnessFilter(ue)},X=>{this.logger.error("Failed to get default upscale id from GXT ",X)})},$=>{this.logger.error("Failed to get settings ",$)})}setMagnificationFilter(b){let B;(0,E.aj)([this.getNvScalerNvSharpSupport(),this.getEnhSharpnessSetting()]).pipe((0,v.q)(1)).subscribe(([U,A])=>{if(!p.isSharpnessOff(A)&&p.isEnhanced(b)){const Y=U.isNvSharpenSupported&&s.JrW.NV_SHARP.id;B=U.isNvScalerSupported&&s.JrW.NV_SCALER.id||Y}this.processMagnificationFilter(B||b)})}processMagnificationFilter(b){const B=p.getUpScaleSetting(b);B&&this.bridgeService.executeCommand(O.SetMagnificationFilter,{filterId:B.id}).pipe((0,v.q)(1)).subscribe(()=>{this.setUpScaleDisplaySetting(B),this.logger.info("Resolution upscaling changed to ",B.id,B.value)},A=>{this.logger.error("Failed to change resolution upscaling to ",B.id,B.value,A)})}setSharpnessFilter(b){const B=b.value;this.bridgeService.executeCommand(O.SetMagnificationFilterSharpness,{sharpness:B}).pipe((0,v.q)(1)).subscribe(()=>{this.logger.info("Sharpness changed to ",B)},A=>{this.logger.error("Failed to change sharpness to ",B,A)})}}return F.\u0275fac=function(b){return new(b||F)(h.LFG(y.ed),h.LFG(y.dF),h.LFG(s.$lO),h.LFG(s.gbG),h.LFG(o.y0))},F.\u0275prov=h.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();var _=e(75270)},75270:(He,de,e)=>{"use strict";e.d(de,{G:()=>b});var n=e(80226),i=e(76491),D=e(79441),m=e(61486),y=e(81134),T=e(83720),r=e(85816),a=e(53466),s=e(33927),p=e(92597),l=e(18293),t=e(98636),w=e(9170),h=e(202),o=e(88689),c=e(6484),g=e(90722),I=e(2984),G=e(32839),x=e(23361),E=e(80748),P=e(3076),v=e(2316),O=e(55502),C=e(57390),_=e(81665),F=e(73341),V=e(60086);let b=(()=>{class B{constructor(A,S,Y,se,fe,$,ae,me,ye,ue,X){var j,K,Z,L,W,te,ie,Q;this.gridService=A,this.loggingService=S,this.sharedStorageService=Y,this.systemInfoService=se,this.bridgeService=fe,this.networkConfigService=$,this.config=ae,this.ecommerceService=me,this.cloudVarService=ye,this.idmService=ue,this.nativeEventService=X,this.fpsListWith120=[g.vG.Value120,g.vG.Value60,g.vG.Value30],this.fpsList=[g.vG.Value60,g.vG.Value30],this.previousStreamingProfile=Object.assign({},g.yD.balanced),this.streamingProfileGuid=(0,P.Rl)(),this.streamingProfileGuidSubject=new n.t(1),this.audioModeFormat$=new i.X(E.UM.STEREO),this.displayModeChanged$=new D.xQ,this.hdrSubscribed=!1,this.isPresetProfileDetailsExpanded=!1,this.isCustomProfileDetailsExpanded=!0,this.logger=this.loggingService.getLogger("streaming-profile.service"),this.isBrowserPlatform=c.ng.isBrowserPlatform(),this.idmService.accountStatusChanged.subscribe(oe=>{this.clearCachedStreamingProfile()}),this.registerDisplayModeChangeEvent();const k=null===(K=null===(j=null==ae?void 0:ae.client)||void 0===j?void 0:j.streamingModeResolutionsConfiguration)||void 0===K?void 0:K.resolutionBadges;this.resolutionBadges=k?Object.entries(k).map(oe=>oe[1]):[],this.unsupportedHiddenResolutionDef=null===(W=null===(L=null===(Z=null==ae?void 0:ae.client)||void 0===Z?void 0:Z.streamingModeResolutionsConfiguration)||void 0===L?void 0:L.unsupportedResolution)||void 0===W?void 0:W.filter(oe=>oe.hidden)[0],this.unsupportedDisabledResolutionsDef=null===(Q=null===(ie=null===(te=null==ae?void 0:ae.client)||void 0===te?void 0:te.streamingModeResolutionsConfiguration)||void 0===ie?void 0:ie.unsupportedResolution)||void 0===Q?void 0:Q.filter(oe=>oe.disabled)[0]}get IntersectedResolutionList(){return this.intersectedResolutionList}get GridServerResolutionsList(){return this.gridServerResolutionsList}get UnsupportedDisabledResolutionsList(){return this.unsupportedDisabledResolutionsList}get IsPlatformSupportsHDRDecode(){return this.isHdrDecodeSupported}get IsPlatformSupportsHDRRendering(){return this.isHdrRenderingSupported}get IsHdrToggleTurnedOff(){return!(0,h.isUndefined)(this.settingsBlock[g.Bq.StreamingProfiles])&&this.settingsBlock[g.Bq.StreamingProfiles]===g.M1.Custom&&!(0,h.isUndefined)(this.settingsBlock[g.Bq.CustomProfile].hdrStreaming)&&!this.settingsBlock[g.Bq.CustomProfile].hdrStreaming}init$(){const A=this.systemInfoService.getNetworkInformation().pipe((0,T.x)());return(0,m.aj)([A,this.ecommerceService.getUserMembership(),this.getNvSupportedResolutions(),this.cloudVarService.getFeatureToggle(x._P.RESERVED_SKU_IBETA),this.initializeHdrProperties$(),this.isHEVCDecodingSupportedOnDevice()]).pipe((0,r.zg)(S=>this.cloudVarService.getFeatureToggle(x._P.ENABLE_RESERVED_SKU_FEATURES).pipe((0,r.zg)(Y=>(0,y.of)([Y,...S])),(0,a.q)(1))),(0,s.U)(([S,Y,se,fe,$,ae,me])=>{var ye,ue;this.networkInfo=Y,this.isReservedSkuFeatureEnabled=S,this.membership=se;const X=this.membership.membershipStatus!==G.Tn.Entitled&&this.isReservedSkuFeatureEnabled;return this.subscriptionResolutionList=null===(ue=null===(ye=this.membership.subscription)||void 0===ye?void 0:ye.features)||void 0===ue?void 0:ue.resolutions,X&&(this.subscriptionResolutionList=this.membership.unEntitledUserResolutions,this.subscriptionResolutionList=this.subscriptionResolutionList.map(K=>Object.assign(Object.assign({},K),{isEntitled:!0}))),this.gridServerResolutionsList=this.populateGridServerResolutionsList(S&&$&&this.subscriptionResolutionList?this.subscriptionResolutionList:fe,S),this.intersectedResolutionList=this.intersectServerSubscriptionResolutions(this.gridServerResolutionsList,this.subscriptionResolutionList),this.availableResolutionList=this.intersectedResolutionList.filter(K=>K.enabled),this.hdrSubscribed=this.isFeatureSubscriptionAvailable(se,E.xA.HDR_ENABLED),!0}))}initializeHdrProperties$(){return this.hdrProperties$||(this.hdrProperties$=(0,m.aj)([this.sharedStorageService.readBlock(g.Bq.BlockName),this.isPlatformSupportsHDRDecode(),this.isPlatformSupportsHDRRendering()]).pipe((0,s.U)(([A,S,Y])=>(this.settingsBlock=(0,h.merge)({},A),!0)),(0,p.d)(1))),this.hdrProperties$}clearCachedHdrProperties(){this.hdrProperties$=null}getStreamingProfileGuid(){return this.streamingProfileGuidSubject.asObservable()}updateStreamingProfileGuid(A){(0,h.isEqual)(A,this.previousStreamingProfile)||(this.streamingProfileGuid=(0,P.Rl)(),this.previousStreamingProfile=A),this.streamingProfileGuidSubject.next(this.streamingProfileGuid)}getSpecificPresetProfile(A){const S=(0,h.find)(Object.keys(g.yD),Y=>Y===A);return g.yD[S]}getNvSupportedResolutions(){return this.gridService.monitorSettings$}getAutoMaxBitrateValue(A,S,Y){const se=[];return se.push({frameRate:Y,height:S,width:A}),this.getAutoMaxBitrateValueForResolutionArray(se).pipe((0,a.q)(1),(0,s.U)(fe=>fe[0].maxBandwidth))}getAutoMaxBitrateValueForResolutionArray(A){return this.bridgeService.executeCommand(I.Gh.Gfn.Streaming.PlatformGetMaxBitRateForArray,{resolutions:A}).pipe((0,a.q)(1),(0,s.U)(Y=>{this.logger.info("PlatformGetMaxBitRateForArray response: ",Y);const se=Y.resolutions;return null==se||se.forEach(fe=>{fe.maxBandwidth=Math.round(fe.maxBandwidth/1e3)}),se}),(0,l.K)(Y=>{this.logger.error("Error in PlatformGetMaxBitRateForArray bridge command: ",Y);const se=[];return A.forEach(fe=>{se.push({width:fe.width,height:fe.height,fps:fe.frameRate,maxBandwidth:0})}),(0,y.of)(se)}))}adjustResolutionHeightToPrimaryAspectRatio(A,S,Y,se){return Y!==A/S&&(S=Math.round(A/Y)),!se||-1!==se.findIndex($=>$.width===A&&$.height===S)||(this.logger.info("Finding closest supported resolution for: w, h ",A,S),this.logger.info("Finding closest supported resolution from: ",se),S=this.findResolutionFromSupportedList(A,S,se)),S}populateGridServerResolutionsList(A,S,Y){null==A||A.sort(function(fe,$){return $.widthInPixels*$.heightInPixels-fe.widthInPixels*fe.heightInPixels});const se=[];if(null==A?void 0:A.length)(S?A:A.filter($=>$.widthInPixels<=g.iq.FHD.width)).forEach($=>{const ae=this.getResolution($.widthInPixels,$.heightInPixels);-1===se.findIndex(me=>me.width===ae.width&&me.height===ae.height)&&se.push(ae)});else{Y||(Y=this.getDefaultProfileData());const fe=this.getResolution(Y.width,Y.height);se.push(fe)}return se}findResolutionFromSupportedList(A,S,Y){const se=Y.filter(fe=>fe.width===A);if(se[0]){if(se[0].height<S)return se[0].height;if(se[se.length-1].height>S)return se[se.length-1].height;{let fe=se[0];for(const $ of se)Math.abs(S-$.height)<Math.abs(S-fe.height)&&(fe=$);return fe.height}}return S}getBalancedProfile(A,S,Y,se,fe,$){const ae=Object.assign({},g.yD[g.M1.Balanced]);if(ae.width=(null==se?void 0:se.widthInPixels)?se.widthInPixels:ae.width,ae.height=(null==se?void 0:se.heightInPixels)?se.heightInPixels:ae.height,ae.fps=(null==se?void 0:se.framesPerSecond)?se.framesPerSecond:ae.fps,(0,h.isNil)(S))return this.logger.info("primaryResolution was null! Keeping balanced preset"),ae;if((0,h.isNil)(Y)&&!A)return this.logger.info("maxDisplay was null! Keeping balanced preset"),ae;let me;me=!A&&(Y.width!==S.width?Y.width<S.width:Y.frameRate!==S.fps?Y.frameRate<S.fps:Y.height<=S.height);const ye=me?Y.width:S.width;return ye<ae.width&&(ae.width=ye,ae.height=me?Y.height:S.height),ae.fps=Math.min(ae.fps,me?Y.frameRate:S.fps,S.fps),ae.fps===g.zP&&(ae.fps=g.vG.Value120.value),this.adjustBalanceProfileForNetworkAndDisplay(fe,S,ae,$),this.updateSupportedBalanceProfile(ae,$),ae.fps!==g.vG.Value120.value&&(ae.fps=ae.fps>=g.HQ?g.vG.Value60.value:g.vG.Value30.value),this.logger.info("Balanced profile - use resolution: ",me?Y:S),this.logger.info("Balanced profile: ",ae),ae}adjustBalanceProfileForNetworkAndDisplay(A,S,Y,se){if(A||Y.fps!==g.vG.Value120.value){if(A&&S.fps>=g.zP&&Y.width>=g.iq.QHD.width&&Y.fps<g.vG.Value120.value){if(Y.width!==g.iq.QHD.width){const fe=Y.width/Y.height;Y.width=g.iq.QHD.width,Y.height=this.adjustResolutionHeightToPrimaryAspectRatio(Y.width,Y.height,fe,se)}Y.fps=g.vG.Value120.value}}else Y.fps=g.vG.Value60.value}updateSupportedBalanceProfile(A,S){if(!S.some(Y=>Y.height===A.height&&Y.width===A.width)){this.logger.info("Balance profile is not from subscribed list: updating: ",A);const Y=this.getResolutionFromSubscribedList(A.width,A.height);A.width=Y.width,A.height=Y.height,this.logger.info("Balance profile is not from subscribed list: updated: ",A)}}getRagnarokStreamingResolution(A,S){let Y;switch(A){case g.M1.Balanced:Y=0;break;case g.M1.Competitive:Y=2;break;case g.M1.DataSaver:Y=1;break;default:this.logger.error("Unsupported profile",A)}return void 0!==Y?(0,o.ChooseStreamingResolution)(Y,null==S?void 0:S.map(se=>({width:se.width,height:se.height}))):null}getProfileBasedOnType(A,S,Y,se,fe,$,ae){var me;let ye=Object.assign({},g.yD[A]);if(this.isBrowserPlatform){let ue=[...this.GridServerResolutionsList];if($){ue=[...this.availableResolutionList];const j=!!(null===(me=this.config.featureEnablement)||void 0===me?void 0:me.skipFilteringBalancedProfileWithGES);this.isBrowserPlatform&&A===g.M1.Balanced&&!j&&(ue=this.filterGesRecommendedBalancedResolutions(this.availableResolutionList,ae))}const X=this.getRagnarokStreamingResolution(A,ue);X&&(ye.width=X.width,ye.height=X.height)}else if(A===g.M1.Balanced)ye=this.getBalancedProfile(fe,S,Y,se,!(0,h.isNil)(this.networkInfo)&&this.networkInfo.NetworkType===c.VV.Ethernet,this.availableResolutionList);else if(A===g.M1.DataSaver||A===g.M1.Competitive){let ue=1280,X=720;se&&se.widthInPixels&&se.heightInPixels&&se.framesPerSecond&&(ue=se.widthInPixels,X=se.heightInPixels,ye.fps=se.framesPerSecond);const j=this.adjustResolutionToAspectRatio(S,ue,X);ye.width=j.width,ye.height=j.height,this.logger.info("Data saver/Competitive profile - use resolution: ",j)}return ye}prepareSettingsForStreaming(A){let S;return S=Object.assign({},A),S.maxBitrate=1e3*A.maxBitrate,S.aspectRatio=this.calculateAspectRatio(A.width,A.height),this.logger.info("Settings for streaming are: ",S),S}updateCustomProfileVSyncValue(A){const S=A.vSync;!(0,h.isUndefined)(S)&&(0,h.isBoolean)(S)&&(A.vSync=S?g.OA.ValueAdaptive.value:g.OA.ValueOff.value,this.storeCustomProfileData(A).subscribe())}getResolutionLabel(A,S){var Y;return null===(Y=this.resolutionBadges.filter(se=>se.resolutions.some(fe=>fe.height===S&&fe.width===A))[0])||void 0===Y?void 0:Y.badgeUrl}isCustomDataInSubscription(A,S){return void 0!==(null==S?void 0:S.find(se=>se.heightInPixels===A.height&&se.widthInPixels===A.width))}getResolutionFromSubscribedList(A,S){const Y=this.calculateAspectRatioValue(A,S);let se;switch(Y){case g.nF.Ar_16_10:se=g.WU.Value16_10.width;break;case g.nF.Ar_4_3:se=g.WU.Value4_3.width;break;case g.nF.Ar_5_4:se=g.WU.Value5_4.width;break;case g.nF.Ar_16_9:se=g.WU.Value16_9.width;break;case g.nF.Ar_19_5_9:se=g.WU.Value195_9.width;break;case g.nF.Ar_24_10:se=g.WU.Value24_10.width;break;case g.nF.Ar_32_9:se=g.WU.Value32_9.width;break;case g.nF.Ar_21_9_1:se=g.WU.Value21_9_1.width;break;case g.nF.Ar_21_9_2:se=g.WU.Value21_9_2.width;break;case g.nF.Ar_21_9_3:se=g.WU.Value21_9_3.width}const fe=this.availableResolutionList.filter(me=>me.width/me.height===Y&&me.width>=se),$=fe.length>0?fe:this.availableResolutionList;let ae=$[0];for(const me of $)Math.abs(A*S-me.width*me.height)<Math.abs(A*S-ae.width*ae.height)&&(ae=me);return ae}adjustBalancePresetResolution(A,S,Y,se,fe){var $;if(A){const ae=this.GridServerResolutionsList;!this.isHevcDecodeSupported&&A.widthInPixels>g.iq.QHD.width&&(A.widthInPixels=g.iq.QHD.width),A.heightInPixels=this.adjustResolutionHeightToPrimaryAspectRatio(A.widthInPixels,A.heightInPixels,S,ae);const me=this.getProfileBasedOnType(g.M1.Balanced,Y,null,A,!0,se,fe);if(A.framesPerSecond=me.fps,A.widthInPixels=me.width,A.heightInPixels=me.height,!(null===($=this.availableResolutionList)||void 0===$?void 0:$.some(ye=>ye.width===me.width&&ye.height===me.height))){const ye=this.getResolutionFromSubscribedList(me.width,me.height);ye.height=this.adjustResolutionHeightToPrimaryAspectRatio(ye.width,ye.height,S,ae),A.widthInPixels=ye.width,A.heightInPixels=ye.height}}}adjustResolutionToAspectRatio(A,S,Y){const se={width:S,height:Y},ae="(16:10)",me=this.calculateAspectRatio(S,Y),ye=this.calculateAspectRatio(A.width,A.height);return me===ye||(se.height=this.adjustResolutionHeightToPrimaryAspectRatio(S,Y,me!==ae&&ye===ae?1.6:16/9)),se}calculateDataUsage(A,S,Y,se){return this.logger.info("Calculate data usage, params: ",A,S,Y,se),0===se?this.getAutoMaxBitrateValue(A,S,Y).pipe((0,s.U)(fe=>this.getDataUsage(Y,fe)),(0,l.K)(fe=>(this.logger.error("Error in getAutoMaxBitrateValue",fe),(0,y.of)(0)))):(0,y.of)(this.getDataUsage(Y,se))}getDataUsage(A,S){const ye=1e6*S;let X=3600*(this.isBrowserPlatform&&120===A?.916*ye+293098:.678*ye+910569)/1e9/8;return 30===A&&(X*=.625),X*=.95,X=Math.round(X),this.logger.info("Estimated data usage, in GB: ",X),X}updateProfileData(A,S,Y,se){return A.sharedSettings=S,A.primaryDisplayResolution=Y,A.networkInfo=this.networkInfo,A.currentFingerprintMaxDisplay=se,this.prepareSettingsForStreaming(A)}updateStreamingAudioFormat(A){var S,Y;const se=null===(Y=null===(S=null==A?void 0:A.features)||void 0===S?void 0:S.find($=>$.key===E.xA.SUPPORTED_AUDIO_FORMATS))||void 0===Y?void 0:Y.textValue;this.audioModeFormat$.next(se&&se!==E.UM[0]?E.UM[se]:E.UM.STEREO)}calculateAspectRatio(A,S){const Y=A/S;let se=g.OK[0];for(const fe of g.OK)Math.abs(Y-fe.ratio)<Math.abs(Y-se.ratio)&&(se=fe);return this.logger.info("Calculate Formatted Aspect Ratio for resolution: ",A,S,se.formattedRatio),se.formattedRatio}calculateAspectRatioValue(A,S){const Y=A/S;let se=g.OK[0];for(const fe of g.OK)Math.abs(Y-fe.ratio)<Math.abs(Y-se.ratio)&&(se=fe);return this.logger.info("Calculate Aspect Ratio value for resolution: ",A,S,se.ratio),se.ratio}getResolution(A,S){return{width:A,height:S,ratio:this.calculateAspectRatio(A,S),enabled:!0,label:this.getResolutionLabel(A,S)}}getPrimaryDisplayResolution(){return this.isBrowserPlatform?this.systemInfoService.getDisplays().pipe((0,s.U)(A=>{const S=A[0].LogicalResolution.split("x"),Y={width:parseInt(S[0],10),height:parseInt(S[1],10),fps:parseInt(A[0].RefreshRate,10)};return this.logger.info("Primary display logical resolution: ",Y),Y})):this.bridgeService.executeCommand(I.Gh.Gfn.Streaming.GetDisplayMode).pipe((0,a.q)(1),(0,s.U)(A=>{const S={width:A.width,height:A.height,fps:A.refreshRate};return this.logger.info("Active display mode resolution: ",A),S}))}getDefaultProfileData(A,S){const Y=(0,h.merge)({},g.yD[g.M1.Balanced]);return(0,h.isNil)(A)||(Y.name=A),Y.maxBitrateAuto=!0,Y.width=(null==S?void 0:S.widthInPixels)?S.widthInPixels:Y.width,Y.height=(null==S?void 0:S.heightInPixels)?S.heightInPixels:Y.height,Y.fps=(null==S?void 0:S.framesPerSecond)?S.framesPerSecond:Y.fps,Y.maxBitrate=0,Y.hdrStreaming=!!this.isFeatureSubscriptionAvailable(this.membership,E.xA.HDR_ENABLED),Y}getStreamingProfile(){if(this.streamingProfile$)return this.streamingProfile$;let A;return this.streamingProfile$=(0,m.aj)([this.sharedStorageService.readBlock(g.Bq.BlockName),this.getPrimaryDisplayResolution(),this.networkConfigService.getCurrentFingerprintMaxDisplay(),this.networkConfigService.getCurrentFingerprintMaxPacketSize(),this.init$()]).pipe((0,a.q)(1),(0,r.zg)(([S,Y,se,fe,$])=>{var ae,me,ye;let ue;if(this.settingsBlock=(0,h.merge)({},S),this.isReservedSkuFeatureEnabled){const j=this.subscriptionResolutionList?this.getSubscriptionPresetResolution(this.subscriptionResolutionList):null;ue=j?Object.assign({},j):null,ue&&(ue.heightInPixels=this.adjustResolutionHeightToPrimaryAspectRatio(ue.widthInPixels,ue.heightInPixels,Y.width/Y.height,this.GridServerResolutionsList)),se&&((se=Object.assign({},se)).height=this.adjustResolutionHeightToPrimaryAspectRatio(se.width,se.height,Y.width/Y.height,this.GridServerResolutionsList))}this.updateStreamingAudioFormat(null===(ae=this.membership.subscription)||void 0===ae?void 0:ae.features);let X=this.settingsBlock[g.Bq.StreamingProfiles];if(X=(0,h.isUndefined)(X)?g.M1.Balanced:X,X===g.M1.Custom)A=this.settingsBlock[g.Bq.CustomProfile],(0,h.isUndefined)(A)||this.isReservedSkuFeatureEnabled&&!this.isCustomDataInSubscription(A,this.subscriptionResolutionList)?(this.adjustBalancePresetResolution(ue,Y.width/Y.height,Y,this.isReservedSkuFeatureEnabled,this.subscriptionResolutionList),A=this.getDefaultProfileData(X,ue)):this.updateCustomProfileVSyncValue(A),A.width=Number(A.width),A.height=Number(A.height);else{let j=null;if(this.isReservedSkuFeatureEnabled&&(X===g.M1.Balanced?j=ue:X===g.M1.Competitive?j=null===(me=this.subscriptionResolutionList)||void 0===me?void 0:me.find(K=>{var Z;return K.isDefault&&(null===(Z=K.clientStreamingQualityModes)||void 0===Z?void 0:Z.includes(E.xw.COMPETITIVE))}):X===g.M1.DataSaver&&(j=null===(ye=this.subscriptionResolutionList)||void 0===ye?void 0:ye.find(K=>{var Z;return K.isDefault&&(null===(Z=K.clientStreamingQualityModes)||void 0===Z?void 0:Z.includes(E.xw.DATA_SAVER))}))),A=this.getProfileBasedOnType(X,Y,se,j,!this.config.featureEnablement.dynamicStreamingResolution,this.isReservedSkuFeatureEnabled,this.subscriptionResolutionList),X===g.M1.Balanced&&!(0,h.isNil)(this.networkInfo)&&this.networkInfo.NetworkType===c.VV.WiFi2_4&&A.width>g.iq.QHD.width){const K=A.width/A.height;A.width=g.iq.QHD.width,A.height=this.adjustResolutionHeightToPrimaryAspectRatio(A.width,A.height,K,this.GridServerResolutionsList)}}if(A.name=X,fe&&(A.maxPacketSize=fe),A.hdrStreaming=this.hdrSubscribed&&A.hdrStreaming&&this.isHdrDecodeSupported&&this.isHdrRenderingSupported,A.fps!==g.vG.Value120.value&&(A.fps=A.fps>=g.HQ?g.vG.Value60.value:g.vG.Value30.value),!(0,h.isNil)(this.networkInfo)&&this.networkInfo.NetworkType===c.VV.WiFi2_4&&this.config.featureEnablement.cap24GhzWifi){const j=this.adjustResolutionToAspectRatio(Y,1280,720);if(A.width=j.width,A.height=j.height,A.fps===g.vG.Value120.value&&(A.fps=g.vG.Value60.value),0===A.maxBitrate||"Auto"===A.maxBitrate)return this.getAutoMaxBitrateValue(A.width,A.height,A.fps).pipe((0,s.U)(K=>(A.maxBitrate=K<=7?K:7,this.updateProfileData(A,S,Y,se))));A.maxBitrate=A.maxBitrate<=7?A.maxBitrate:7,this.logger.info("WiFi 2.4 connection - adjusting resolution to: ",j)}return(0,y.of)(this.updateProfileData(A,S,Y,se))}),(0,l.K)(S=>(this.logger.error("Error getting profiles settings from sharedStorage: ",S),A=this.getDefaultProfileData(),(0,y.of)(this.prepareSettingsForStreaming(A)))),(0,t.b)(S=>this.updateStreamingProfileGuid(S)),(0,p.d)(1)),this.streamingProfile$}clearCachedStreamingProfile(){this.streamingProfile$=null}readCustomProfileData(){return this.sharedStorageService.readBlock(g.Bq.BlockName).pipe((0,s.U)(A=>{this.settingsBlock=(0,h.merge)({},A),this.logger.info("Read settings block from sharedStorage: ",A);const S=A[g.Bq.CustomProfile];return S&&this.updateCustomProfileVSyncValue(S),S}))}storeCustomProfileData(A){return this.sharedStorageService.readBlock(g.Bq.BlockName).pipe((0,r.zg)(S=>(this.settingsBlock=(0,h.merge)({},S),this.settingsBlock[g.Bq.CustomProfile]=A,this.sharedStorageService.writeBlock(g.Bq.BlockName,this.settingsBlock))))}saveVSyncInStreamerConfig(A){this.logger.info("Saving VSync value in GeForceNOWStreamer config: ",A),this.bridgeService.executeCommand(I.Gh.Common.Applicationcontrol.WriteConfig,{appname:"GeForceNOW",data:["nv-sdl-vsync="+(0===A?"false":"true"),"nv-sdl-vsync-adaptive="+A]}).subscribe($=>{this.logger.info("nv-sdl-vsync flag is written successfully in overrides.json")},$=>{this.logger.error("Error in writing nv-sdl-vsync flag in overrides.json",$)})}getFpsListwith120(){return this.fpsListWith120}getFpsList(){return this.fpsList}filterGesRecommendedBalancedResolutions(A,S){const Y=[],se=null==S?void 0:S.find(fe=>{var $;return null===($=fe.clientStreamingQualityModes)||void 0===$?void 0:$.includes(E.xw.BALANCED)});return se?(A.forEach(fe=>{fe.width<=se.widthInPixels&&fe.height<=se.heightInPixels&&Y.push(fe)}),Y):A}getFpsOption(A){return{value:A.framesPerSecond,displayName:A.framesPerSecond+g.HH,enabled:A.isEntitled}}intersectServerSubscriptionResolutions(A,S,Y){const se=[];if(this.unsupportedHiddenResolutionsList=[],this.unsupportedDisabledResolutionsList=[],S&&0!==S.length)A.forEach(fe=>{var $,ae,me,ye,ue;if(S.some(X=>X.widthInPixels===fe.width&&X.heightInPixels===fe.height)){const X=S.filter(j=>j.widthInPixels===fe.width&&j.heightInPixels===fe.height);if(!this.isHevcDecodeSupported&&(null===(ae=null===($=this.unsupportedHiddenResolutionDef)||void 0===$?void 0:$.resolutions)||void 0===ae?void 0:ae.some(j=>j.height===fe.height&&j.width===fe.width)))return void this.unsupportedHiddenResolutionsList.push(fe);if(!this.isHevcDecodeSupported&&(null===(ye=null===(me=this.unsupportedDisabledResolutionsDef)||void 0===me?void 0:me.resolutions)||void 0===ye?void 0:ye.some(j=>j.height===fe.height&&j.width===fe.width)))return this.unsupportedDisabledResolutionsList.push(fe),void(fe.enabled=!1);fe.enabled=null==X?void 0:X.some(j=>j.isEntitled),fe.enabled&&(fe.fpsList=X.map(j=>this.getFpsOption(j)),null===(ue=fe.fpsList)||void 0===ue||ue.sort((j,K)=>K.value-j.value)),se.push(fe)}});else{Y||(Y=this.getDefaultProfileData());const fe=this.getResolution(Y.width,Y.height);se.push(fe)}return se}isHEVCDecodingSupportedOnDevice(){return this.config.featureEnablement.bypassHevcDecodeSupport?(this.isHevcDecodeSupported=!0,this.logger.info("IsPlatformSupportsUHD bypassed base on config. ",this.isHevcDecodeSupported),(0,y.of)(this.isHevcDecodeSupported)):this.isBrowserPlatform?(this.isHevcDecodeSupported=!1,this.logger.info("IsPlatformSupportsUHD not checked for Web client. ",this.isHevcDecodeSupported),(0,y.of)(this.isHevcDecodeSupported)):(this.hevcDecodeSupported$||(this.hevcDecodeSupported$=this.bridgeService.executeCommand(I.Gh.Gfn.Streaming.IsPlatformSupportsUHD).pipe((0,a.q)(1),(0,t.b)(A=>{this.isHevcDecodeSupported=A,this.logger.info("IsPlatformSupportsUHD response: ",this.isHevcDecodeSupported)}),(0,l.K)(A=>(this.isHevcDecodeSupported=!1,this.logger.info("IsPlatformSupportsUHD error: ",A),(0,y.of)(this.isHevcDecodeSupported))),(0,p.d)(1))),this.hevcDecodeSupported$)}getResolutionUpsellMessage(A){return this.isHEVCDecodingSupportedOnDevice().pipe((0,s.U)(S=>S&&(null==A?void 0:A.some(se=>se.widthInPixels===g.iq.UHD.width))?"settings.membership.upgradeDetail4KResolution":"settings.membership.upgradeDetailResolution"))}getSubscriptionPresetResolution(A,S=E.xw.BALANCED){const Y=null==A?void 0:A.find(fe=>{var $;return fe.isDefault&&fe.isEntitled&&(null===($=fe.clientStreamingQualityModes)||void 0===$?void 0:$.includes(S))}),se=this.GridServerResolutionsList;if(se.some(fe=>fe.height===(null==Y?void 0:Y.heightInPixels)&&fe.width===(null==Y?void 0:Y.widthInPixels)))return Y;if(Y&&S===E.xw.BALANCED){const fe=Object.assign({},Y);return fe.widthInPixels=se[0].width,fe.heightInPixels=se[0].height,fe.framesPerSecond=A.filter($=>$.widthInPixels===fe.widthInPixels).some($=>$.framesPerSecond===g.vG.Value120.value)?g.vG.Value120.value:g.vG.Value60.value,fe}return null}updateSupportedResolutions(A,S,Y){var se,fe;return S&&(Y.membershipStatus===G.Tn.Entitled&&(null===(fe=null===(se=Y.subscription)||void 0===se?void 0:se.features)||void 0===fe?void 0:fe.resolutions)?A=Y.subscription.features.resolutions:(null==Y?void 0:Y.unEntitledUserResolutions)&&Y.membershipStatus!==G.Tn.Entitled&&(A=Y.unEntitledUserResolutions)),A}getSubscriptionBalancePreset(A){var S,Y;const se=(null===(Y=null===(S=A.subscription)||void 0===S?void 0:S.features)||void 0===Y?void 0:Y.resolutions)?this.getSubscriptionPresetResolution(A.subscription.features.resolutions):null;return se?Object.assign({},se):null}getSubscriptionCompetitivePreset(A){var S,Y;const se=(null===(Y=null===(S=A.subscription)||void 0===S?void 0:S.features)||void 0===Y?void 0:Y.resolutions)?this.getSubscriptionPresetResolution(A.subscription.features.resolutions,E.xw.COMPETITIVE):null;return se?Object.assign({},se):null}getSubscriptionDataSaverPreset(A){var S,Y;const se=(null===(Y=null===(S=A.subscription)||void 0===S?void 0:S.features)||void 0===Y?void 0:Y.resolutions)?this.getSubscriptionPresetResolution(A.subscription.features.resolutions,E.xw.DATA_SAVER):null;return se?Object.assign({},se):null}getMaxbitRateList(){return(0,h.cloneDeep)(g.Z6)}getvSyncList(){return(0,h.cloneDeep)([g.OA.ValueOn,g.OA.ValueOff,g.OA.ValueAdaptive])}initializeFpsList(){return(0,h.cloneDeep)(this.getFpsList())}getSubscriptionResolutions(){return(0,m.aj)([this.ecommerceService.getUserMembership().pipe((0,w.h)(A=>A.membershipStatus!==G.Tn.UnKnown)),this.init$()]).pipe((0,s.U)(([A,S])=>{var Y,se,fe,$,ae;return this.isHevcDecodeSupported?null===(se=null===(Y=A.subscription)||void 0===Y?void 0:Y.features)||void 0===se?void 0:se.resolutions:null===(ae=null===($=null===(fe=A.subscription)||void 0===fe?void 0:fe.features)||void 0===$?void 0:$.resolutions)||void 0===ae?void 0:ae.filter(me=>me.widthInPixels<=g.iq.QHD.width)}))}getStreamingAudioMode(){return this.audioModeFormat$.asObservable()}isPlatformSupportsHDRDecode(){return this.config.featureEnablement.bypassHdrSupportCheck?(this.isHdrDecodeSupported=!0,this.logger.info("isPlatformSupportsHDRDecode bypassed base on config. ",this.isHdrDecodeSupported),(0,y.of)(this.isHdrDecodeSupported)):this.isBrowserPlatform?(this.isHdrDecodeSupported=!1,this.logger.info("isPlatformSupportsHDRDecode not checked for Web client. ",this.isHdrDecodeSupported),(0,y.of)(this.isHdrDecodeSupported)):(this.hdrDecodeSupported$||(this.hdrDecodeSupported$=this.bridgeService.executeCommand(I.Gh.Gfn.Streaming.IsPlatformSupportsHDRDecode).pipe((0,a.q)(1),(0,t.b)(A=>{this.isHdrDecodeSupported=A,this.logger.info("isPlatformSupportsHDRDecode response: ",this.isHdrDecodeSupported)}),(0,l.K)(A=>(this.isHdrDecodeSupported=!1,this.logger.info("isPlatformSupportsHDRDecode error: ",A),(0,y.of)(this.isHdrDecodeSupported))),(0,p.d)(1))),this.hdrDecodeSupported$)}isPlatformSupportsHDRRendering(){return this.config.featureEnablement.bypassHdrSupportCheck?(this.isHdrRenderingSupported=!0,this.logger.info("IsPlatformSupportsHDRRendering bypassed base on config. ",this.isHdrRenderingSupported),(0,y.of)(this.isHdrRenderingSupported)):this.isBrowserPlatform?(this.isHdrRenderingSupported=!1,this.logger.info("IsPlatformSupportsHDRRendering not checked for Web client. ",this.isHdrRenderingSupported),(0,y.of)(this.isHdrRenderingSupported)):(this.hdrRenderingSupported$||(this.hdrRenderingSupported$=this.bridgeService.executeCommand(I.Gh.Gfn.Streaming.IsPlatformSupportsHDRRendering).pipe((0,a.q)(1),(0,t.b)(A=>{this.isHdrRenderingSupported=A,this.logger.info("IsPlatformSupportsHDRRendering response: ",this.isHdrRenderingSupported)}),(0,l.K)(A=>(this.isHdrRenderingSupported=!1,this.logger.info("IsPlatformSupportsHDRRendering error: ",A),(0,y.of)(this.isHdrRenderingSupported))),(0,p.d)(1))),this.hdrRenderingSupported$)}registerDisplayModeChangeEvent(){this.nativeEventService.get$(c.Nx.DisplayModeChange,c.bi.Types.HandlerEventType.SimpleWindowEvent).subscribe(()=>{this.hdrRenderingSupported$=null,this.clearCachedHdrProperties(),this.displayModeChanged$.next(!0)},A=>{this.logger.error("Error in DisplayModeChange event.",A)})}onDisplayModeChanged(){return this.displayModeChanged$.asObservable()}isHdrAvailableToUser(A){return this.isFeatureSubscriptionAvailable(A,E.xA.HDR_ENABLED)||this.isFeatureUpsellAvailable(A,[E.$c.SUPPORT_HDR])[0]}getHdrLabel(A,S){return this.IsPlatformSupportsHDRDecode?S?"settings.streamingProfiles.inactive":A&&!this.IsPlatformSupportsHDRRendering?"settings.streamingProfiles.hdrDisplayTip":A?"settings.streamingProfiles.active":"settings.streamingProfiles.inactive":"settings.streamingProfiles.hdrSystemUnsupportedTip"}isFeatureSubscriptionAvailable(A,S){var Y,se,fe;return null===(fe=null===(se=null===(Y=null==A?void 0:A.subscription)||void 0===Y?void 0:Y.features)||void 0===se?void 0:se.features)||void 0===fe?void 0:fe.some($=>$.key===S&&"true"===$.textValue)}isFeatureUpsellAvailable(A,S){const Y=[];return S.forEach(se=>{var fe,$;const ae=null===($=null===(fe=A.subscription)||void 0===fe?void 0:fe.upsellFeatures)||void 0===$?void 0:$.some(me=>me.key===se&&!0===me.booleanValue);Y.push(ae)}),Y}}return B.\u0275fac=function(A){return new(A||B)(v.LFG(O.r),v.LFG(c.ed),v.LFG(C.OA),v.LFG(c.Ob),v.LFG(c.dF),v.LFG(_.XS),v.LFG(F.VK),v.LFG(G.BH),v.LFG(x.$l),v.LFG(V.No),v.LFG(c.o1))},B.\u0275prov=v.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()},96767:(He,de,e)=>{"use strict";e.d(de,{RI:()=>n,sB:()=>w});var n=(()=>{return(h=n||(n={})).ServerInfo="ServerInfo",h.AppMetadata="AppMetadata",h.CountryCode="CountryCode",n;var h})();const i="SharedStorageCache";var D=e(81134),m=e(18293),y=e(85816),T=e(67202),r=e(33927),a=e(202),s=e(2316),p=e(6484),l=e(57390),t=e(73341);let w=(()=>{class h{constructor(o,f,c){this.sharedStorageService=f,this.appConfig=c,this.logger=o.getLogger("gfn/Shared-Storage-Caching")}readSharedStorageCache(){return this.sharedStorageService.readBlock(i).pipe((0,m.K)(o=>(this.logger.info("Got error reading cache from shared storage:",o),(0,D.of)({}))))}saveItem(o,f){this.logger.info(`Saving the Item ${o} to shared storage cache`);const c={data:f,creationTs:Date.now()};return this.readSharedStorageCache().pipe((0,y.zg)(g=>(g[o]=c,this.sharedStorageService.writeBlock(i,g))),(0,m.K)(g=>(this.logger.info(`Error saving the item to the block ${i}: ${g}`),(0,D.of)(c))),(0,T.h)(f))}getItem(o){const f=this.appConfig.sharedStorageCache[o];return this.logger.info(`Get Item ${o}`),this.readSharedStorageCache().pipe((0,r.U)(c=>{const g={};if((0,a.has)(c,o)){this.logger.info(`Found the item ${o} in shared storage cache`);const I=c[o];g.data=I.data,g.expired=I.creationTs+f.cacheDuration<=Date.now()}return g}))}deleteItem(o){return this.logger.info(`Deleting the item: ${o}`),this.readSharedStorageCache().pipe((0,r.U)(f=>(delete f[o],f)),(0,y.zg)(f=>this.sharedStorageService.writeBlock(i,f)),(0,m.K)(f=>(this.logger.info(`Error deleting the item ${o} from shared storage cache - ${f}`),(0,D.of)(!1))))}isExpiredValueAllowed(o){return this.appConfig.sharedStorageCache[o].allowExpiredValue}}return h.\u0275fac=function(o){return new(o||h)(s.LFG(p.ed),s.LFG(l.OA),s.LFG(t.VK))},h.\u0275prov=s.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},52477:(He,de,e)=>{"use strict";e.d(de,{Iv:()=>n,re:()=>i,OD:()=>m,FR:()=>y,_S:()=>T,gx:()=>r,ve:()=>a});var n=(()=>{return(s=n||(n={}))[s.MaxGpu=2]="MaxGpu",s[s.MaxDisk=3]="MaxDisk",s[s.MaxDisplay=3]="MaxDisplay",s[s.MaxInputDevicePerType=3]="MaxInputDevicePerType",n;var s})(),i=(()=>{return(s=i||(i={})).GameDetails="GAME_DETAILS",s.MarqueeTile="MARQUEE_TILE",i;var s})(),m=(()=>{return(s=m||(m={}))[s.UNKNOWN=0]="UNKNOWN",s[s.SUCCESS=1]="SUCCESS",s[s.INVALID_PARAM=2]="INVALID_PARAM",s[s.SYN_FAILED=3]="SYN_FAILED",s[s.FIN_FAILED=4]="FIN_FAILED",s[s.AUTH_FAILED=5]="AUTH_FAILED",s[s.POST_FAILED=6]="POST_FAILED",s[s.TEST_IN_PROGRESS=7]="TEST_IN_PROGRESS",s[s.CANCELED=8]="CANCELED",s[s.CAPACITY_FULL=9]="CAPACITY_FULL",s[s.SESSION_EXIST=10]="SESSION_EXIST",s[s.INVALID_DATA=11]="INVALID_DATA",s[s.SETUP_FAILED=12]="SETUP_FAILED",s[s.RETRYABLE_POST_FAILURE=13]="RETRYABLE_POST_FAILURE",s[s.BLOCK_STREAM=14]="BLOCK_STREAM",m;var s})(),y=(()=>{return(s=y||(y={})).InitialLaunch="initialLaunch",s.StreamerCefInit="streamerCefInit",s.StreamerJsInit="streamerJsInit",s.UpdateCheck="updateCheck",s.PreStreaming="preStreaming",s.ManualLoginEntry="manualLoginEntry",s.AutoLogin="autoLogin",s.PlatformSelection="platformSelection",s.NesAuthorization="nesAuthorization",s.Lbr="Lbr",s.NetworkTest="networkTest",s.SessionCleanup="sessionCleanup",s.SessionQueue="sessionQueue",s.StartSession="startSession",s.StreamerClientSetupDuration="streamerClientSetupDuration",s.StreamerConnectionDuration="streamerConnectionDuration",s.SeatConfigDuration="seatConfigDuration",s.StreamingStartDuration="streamingStartDuration",y;var s})(),T=(()=>{return(s=T||(T={})).Enabled="ENABLED",s.Disabled="DISABLED",T;var s})(),r=(()=>{return(s=r||(r={})).Native="Native",s.Browser="Browser",s.GFNSDK="GFNSDK",s.Undefined="undefined",r;var s})(),a=(()=>{return(s=a||(a={})).iBeta="iBeta",s.Release="Release",s.Undefined="undefined",a;var s})()},9021:(He,de,e)=>{"use strict";e.d(de,{nfD:()=>m,_LZ:()=>T,NlQ:()=>r,cjj:()=>a,Vwu:()=>s,v6v:()=>p,pjt:()=>l,Y7V:()=>t,cPW:()=>w,DYb:()=>h,Ydg:()=>o,ee7:()=>f,NuE:()=>c,HGL:()=>g,OR5:()=>I,XzU:()=>E,ItH:()=>P,DwO:()=>v,Mlh:()=>O,_G:()=>C,WUy:()=>F,hAb:()=>V,BhR:()=>B,_K5:()=>U,ef6:()=>A,lzt:()=>$,s8B:()=>ae,SzM:()=>me,c8x:()=>ue,T44:()=>X,wye:()=>j,Tbl:()=>Z,ztj:()=>W,zhv:()=>te,oSA:()=>ie,f$p:()=>Q,jzO:()=>k,YbQ:()=>xe,AUc:()=>ct,Ols:()=>Se,PoW:()=>Ge,cYw:()=>St,ZQU:()=>Tt,Yk9:()=>Te,bOD:()=>xt,u_Q:()=>rt,PyH:()=>Ve,ryx:()=>at,RRm:()=>ve,YXu:()=>Ze,Bbu:()=>Ie,p7_:()=>$e,N3X:()=>_t,DCd:()=>be,YwJ:()=>Kt,NX4:()=>tn,CGJ:()=>Mn,_cC:()=>Un,zO5:()=>_n,nrY:()=>Ue,F9b:()=>Mt,VHB:()=>ft,att:()=>st,MsO:()=>Et,E5O:()=>Ee,GVq:()=>dt,YyK:()=>Zt,p3A:()=>En,Xj5:()=>Pn,GMl:()=>ne,HyT:()=>Ct,W9g:()=>Wt,qmX:()=>ln,vkU:()=>Sn,Hj8:()=>qe,XPX:()=>Ut,_js:()=>M,P3M:()=>re,U4l:()=>Ce,aGN:()=>tt,BgF:()=>ut,syg:()=>Jt,XHw:()=>An,kr1:()=>Pt,Tn7:()=>Ke,xNG:()=>Pe,Wb4:()=>Lt,OSH:()=>Dt,MjV:()=>ki,iB_:()=>Ki,J2u:()=>$i,sNt:()=>lo,wEN:()=>co,r_X:()=>Ui,WLf:()=>ui,yVM:()=>ho,MF$:()=>ji,AGB:()=>Xi,sYX:()=>uo,gZv:()=>Fi,$4G:()=>Ne,zDK:()=>H,tZp:()=>pe,DL8:()=>Ae,cym:()=>et,_63:()=>Xt,zZ4:()=>Tn,nLL:()=>Xn,J8H:()=>wn,tyl:()=>Gi,Y_M:()=>ci,ORi:()=>qn,yOt:()=>Hn,X02:()=>fi,pDK:()=>Bi,QuF:()=>ri,ig$:()=>ii,AVX:()=>jn,ZIE:()=>vi,Mbw:()=>_i,QqN:()=>Ro,O9g:()=>Vi,XBX:()=>Hi,DUy:()=>si,vlM:()=>wo,VIQ:()=>zn,TK_:()=>ko,GtW:()=>Ii,LMI:()=>qo,g7J:()=>nr,HUU:()=>mo,GbY:()=>Ai,uXL:()=>Uo,Ran:()=>Fo});var i=(()=>{return(z=i||(i={})).Functional="functional",z.Technical="technical",z.Behavioral="behavioral",i;var z})(),m=(()=>{return(z=m||(m={})).PRODUCT_CHANGE="PRODUCT_CHANGE",z.ASSET_CHANGE="ASSET_CHANGE",z.SESSION_CHANGE="SESSION_CHANGE",z.LAYOUT_CHANGE="LAYOUT_CHANGE",z.GSWS_SYNC="GSWS_SYNC",z.SECTION_CHANGE="SECTION_CHANGE",z.LINKEDACCOUNT_CHANGE="LINKEDACCOUNT_CHANGE",z.APP_CHANGE="APP_CHANGE",z.SERVER_INFO_SYNC="SERVER_INFO_SYNC",z.CONFIGURATION_CHANGE="CONFIGURATION_CHANGE",z.SUBSCRIPTION_CHANGE="SUBSCRIPTION_CHANGE",z.UNKNOWN="UNKNOWN",z.PATCHING_EVENT="PATCHING_EVENT",z.KV_STORE_CHANGE="KV_STORE_CHANGE",z.LIBRARY_CHANGE="LIBRARY_CHANGE",m;var z})(),T=(()=>{return(z=T||(T={})).Oldest="Oldest",z.AtoZ="AtoZ",z.Newest="Newest",z.ZtoA="ZtoA",T;var z})(),r=(()=>{return(z=r||(r={})).Highlights="Highlights",z.Game="Game",z.Media="Media",r;var z})(),a=(()=>((a||(a={})).GameShortcutUrl="GameShortcutUrl",a))(),s=(()=>{return(z=s||(s={})).AddDesktopShortcut="AddDesktopShortcut",z.LaunchGame="LaunchGame",z.NesAutoAuthorization="NesAutoAuthorization",z.LoginWithJarvisOAuth="LoginWithJarvisOAuth",z.LoginWithFacebook="LoginWithFacebook",z.NesGetCompleteLayouts="NesGetCompleteLayouts",z.LoginWithAffiliate="LoginWithAffiliate",z.LoginWithGoogle="LoginWithGoogle",z.Continue="Continue",z.ManageECommerceSubscription="ManageECommerceSubscription",z.UninstallGame="UninstallGame",z.LoginWithOther="LoginWithOther",z.AddGameToLibrary="AddGameToLibrary",z.Resend="Resend",z.LoginWithStarfleet="LoginWithStarfleet",z.ServiceWorkerActivation="ServiceWorkerActivation",z.SilentLoginDirectLaunch="SilentLoginDirectLaunch",z.SilentLoginRedirectFromDMO="SilentLoginRedirectFromDMO",s;var z})(),p=(()=>{return(z=p||(p={})).Jarvis="Jarvis",z.Gfc="Gfc",z.Lcars="Lcars",z.Grid="Grid",z.Cms="Cms",z.Aem="Aem",z.Survey="Survey",z.DR="DR",z.RemoteConfig="RemoteConfig",z.Starfleet="Starfleet",z.Other="Other",z.Rating="Rating",z.Gfwsl="Gfwsl",z.KVStore="KVStore",z.GxTarget="GxTarget",z.NES="NES",z.ALS="ALS",z.AwsS3="AwsS3",z.PNS="PNS",p;var z})(),l=(()=>{return(z=l||(l={})).COMMUNICATION_BANNER="COMMUNICATION_BANNER",z.UXTEST_BANNER="UXTEST_BANNER",z.SURVEY_BANNER="SURVEY_BANNER",z.POST_GAME="POST_GAME",z.FEEDBACK="FEEDBACK",l;var z})(),t=(()=>{return(z=t||(t={})).ProviderCreateProfile="ProviderCreateProfile",z.Sync="Sync",z.Resync="Resync",z.ProviderAccountSettings="ProviderAccountSettings",t;var z})(),w=(()=>{return(z=w||(w={})).NA="NA",z.EmptyLayout="EmptyLayout",z.AppsListFetch="AppsListFetch",z.VpcId="VpcId",z.Unknown="Unknown",z.SessionToken="SessionToken",z.DelegateTokenFetch="DelegateTokenFetch",z.LayoutFetch="LayoutFetch",z.OfflineNoCache="OfflineNoCache",z.DiskCache="DiskCache",z.AppMetadataFetch="AppMetadataFetch",w;var z})(),h=(()=>{return(z=h||(h={})).Passed="Passed",z.Unknown="Unknown",z.LbrDone="LbrDone",z.Skipped="Skipped",z.DialogShown="DialogShown",h;var z})(),o=(()=>{return(z=o||(o={})).IO="IO",z.Network="Network",z.General="General",z.JSON="JSON",z.None="None",z.File="File",z.Optimization="Optimization",z.IPC="IPC",o;var z})(),f=(()=>{return(z=f||(f={})).Success="Success",z.Failure="Failure",f;var z})(),c=(()=>{return(z=c||(c={})).AutoResume="AutoResume",z.DeviceTransition="DeviceTransition",z.None="None",c;var z})(),g=(()=>{return(z=g||(g={})).GetFreestyleFeature="GetFreestyleFeature",z.SendUsabilityStudyResponse="SendUsabilityStudyResponse",z.GetDeeplinkSupport="GetDeeplinkSupport",z.GetCloudSearch="GetCloudSearch",z.GetSurveyFeature="GetSurveyFeature",z.GetLayoutRefreshInterval="GetLayoutRefreshInterval",z.GetUsabilityStudy="GetUsabilityStudy",z.GetIgoSupportOnBrowserClient="GetIgoSupportOnBrowserClient",z.GetECommerceFeature="GetECommerceFeature",z.GetKeyboardLayout="GetKeyboardLayout",z.GetAutohighlightFeature="GetAutohighlightFeature",z.GetStarfleetPhase1="GetStarfleetPhase1",z.GetStarfleetPhase2="GetStarfleetPhase2",z.GetQueueETAConfig="GetQueueETAConfig",z.GetUpsellMessage="GetUpsellMessage",z.GetAutoInvokeKbEnabled="GetAutoInvokeKbEnabled",z.GetAllCloudVariables="GetAllCloudVariables",z.GetBrowserClientCanary="GetBrowserClientCanary",z.GetReservedSKUEnabled="GetReservedSKUEnabled",z.GetReservedSKUIBetaFlag="GetReservedSKUIBetaFlag",z.GetAnselFeature="GetAnselFeature",z.GetGfnBroadcastFeature="GetGfnBroadcastFeature",z.GetKBLayoutsConfig="GetKBLayoutsConfig",z.GetClipboardPasteConfig="GetClipboardPasteConfig",z.GetPathToPurchaseConfig="GetPathToPurchaseConfig",z.GetEnableRemoteConfigOnGXT="GetEnableRemoteConfigOnGXT",z.GetPunctualUIConfig="GetPunctualUIConfig",z.Other="Other",g;var z})(),I=(()=>{return(z=I||(I={})).FingerprintChanged="FingerprintChanged",z.ZoneListEmpty="ZoneListEmpty",z.PolicyCheckFailed="PolicyCheckFailed",z.Manual="Manual",z.CachedZoneNotStored="CachedZoneNotStored",z.ServerInfoFailed="ServerInfoFailed",z.CachedZoneNotAvailable="CachedZoneNotAvailable",z.NewZonesAdded="NewZonesAdded",I;var z})(),E=(()=>{return(z=E||(E={})).App_Exit="App_Exit",z.Dialog_Closed="Dialog_Closed",z.Goto_Settings="Goto_Settings",z.Continue_Login="Continue_Login",E;var z})(),P=(()=>{return(z=P||(P={})).Release_Highlights="Release_Highlights",z.Account_Link_Required="Account_Link_Required",z.Account_Link_Expired="Account_Link_Expired",z.Account_Link_Expires_Today="Account_Link_Expires_Today",z.Account_Link_Expires_Soon="Account_Link_Expires_Soon",z.Scheduled_Maintenance_Warning="Scheduled_Maintenance_Warning",z.Unsupported_Browser_Or_Platform_Load="Unsupported_Browser_Or_Platform_Load",z.Unsupported_Browser_Or_Platform_Login="Unsupported_Browser_Or_Platform_Login",z.Unsupported_Browser_Or_Platform_Game_Launch="Unsupported_Browser_Or_Platform_Game_Launch",z.Unknown="Unknown",P;var z})(),v=(()=>{return(z=v||(v={})).NVB_PROFILE_ROAMING_720P_30FPS="NVB_PROFILE_ROAMING_720P_30FPS",z.NVB_PROFILE_GAMING_1080P_60FPS="NVB_PROFILE_GAMING_1080P_60FPS",z.NT_1280_800_60="NT_1280_800_60",z.NVB_PROFILE_PROFESSIONAL="NVB_PROFILE_PROFESSIONAL",z.NVB_PROFILE_GAMING_720P_30FPS="NVB_PROFILE_GAMING_720P_30FPS",z.NT_1920_1200_60="NT_1920_1200_60",z.NT_1920_1200_30="NT_1920_1200_30",z.NT_1366_768_30="NT_1366_768_30",z.NT_1366_768_60="NT_1366_768_60",z.NT_1680_1050_30="NT_1680_1050_30",z.NT_1280_800_30="NT_1280_800_30",z.NT_1440_900_30="NT_1440_900_30",z.NT_1680_1050_60="NT_1680_1050_60",z.NVB_PROFILE_GAMING="NVB_PROFILE_GAMING",z.NVB_PROFILE_ROAMING_720P_60FPS="NVB_PROFILE_ROAMING_720P_60FPS",z.NT_1440_900_60="NT_1440_900_60",z.NVB_PROFILE_GAMING_720P_60FPS="NVB_PROFILE_GAMING_720P_60FPS",z.NVB_PROFILE_GAMING_1080P_30FPS="NVB_PROFILE_GAMING_1080P_30FPS",z.NVB_PROFILE_DEFAULT="NVB_PROFILE_DEFAULT",v;var z})(),O=(()=>{return(z=O||(O={})).Nvidia_Access_Denied="Nvidia_Access_Denied",z.Unknown="Unknown",z.Rate_Limited="Rate_Limited",z.Platform_Access_Denied="Platform_Access_Denied",z.Platform_Profile_Denied="Platform_Profile_Denied",z.Success="Success",O;var z})(),C=(()=>{return(z=C||(C={})).DismissManual="DismissManual",z.Completed="Completed",z.Notify="Notify",z.DismissAppExit="DismissAppExit",z.DismissLogout="DismissLogout",z.DismissSleep="DismissSleep",z.DismissTimeout="DismissTimeout",z.Participate="Participate",z.DismissManualPostMinimize="DismissManualPostMinimize",z.NotifyPostMinimize="NotifyPostMinimize",z.ParticpatePostMinimize="ParticpatePostMinimize",z.Minimized="Minimized",z.Deferred="Deferred",C;var z})(),F=(()=>{return(z=F||(F={})).Dev="Dev",z.Release="Release",z.IBeta="IBeta",z.Autoplay="Autoplay",F;var z})(),V=(()=>{return(z=V||(V={})).Video="Video",z.Image="Image",V;var z})(),B=(()=>{return(z=B||(B={})).StreamingClient="StreamingClient",z.MallClient="MallClient",z.StoreLibrary="StoreLibrary",z.Unknown="Unknown",z.BackgroundAgent="BackgroundAgent",B;var z})(),U=(()=>{return(z=U||(U={})).UserConsented="UserConsented",z.NotShown="NotShown",z.UserDidNotConsent="UserDidNotConsent",U;var z})(),A=(()=>{return(z=A||(A={})).Adaptive="Adaptive",z.Off="Off",z.On="On",A;var z})(),$=(()=>{return(z=$||($={})).UpdBufferTips="UpdBufferTips",z.PlatformSelection="PlatformSelection",z.PlatformChangeConsent="PlatformChangeConsent",z.Redeem="Redeem",z.ManualLogout="ManualLogout",z.StreamerBackNavigation="StreamerBackNavigation",z.Settings="Settings",z.NetworkTroubleshooting="NetworkTroubleshooting",z.AllGames="AllGames",z.JoinGfn="JoinGfn",z.AddGameToLibrary="AddGameToLibrary",z.ManageMembership="ManageMembership",z.ViewMembershipDetails="ViewMembershipDetails",z.MarketingMarquee="MarketingMarquee",z.ReleaseHighlights="ReleaseHighlights",z.ShareGame="ShareGame",z.LaunchGame="LaunchGame",z.AddGameShortcut="AddGameShortcut",z.MyLibrary="MyLibrary",z.ViewGameDetails="ViewGameDetails",z.UninstallGame="UninstallGame",z.AccountManagementSso="AccountManagementSso",z.Upgrade="Upgrade",z.InvokeSearch="InvokeSearch",z.AddBrowserShortcut="AddBrowserShortcut",z.AccountMenu="AccountMenu",z.OpenClientIME="OpenClientIME",z.OpenFeedbackDialog="OpenFeedbackDialog",z.OpenOnScreenKeyboard="OpenOnScreenKeyboard",z.CloseOnScreenKeyboard="CloseOnScreenKeyboard",z.PasteClipboardText="PasteClipboardText",z.ShowVirtualGamepad="ShowVirtualGamepad",z.ToggleMicrophone="ToggleMicrophone",z.ToggleNetworkWarnings="ToggleNetworkWarnings",z.QuitGame="QuitGame",z.LearnMoreAboutStreamingProfiles="LearnMoreAboutStreamingProfiles",z.SeeMore="SeeMore",z.FilterTile="FilterTile",z.PathToPurchase="PathToPurchase",$;var z})(),ae=(()=>{return(z=ae||(ae={})).Keyboard="Keyboard",z.Gamepad="Gamepad",z.Mouse="Mouse",z.Touch="Touch",z.Unknown="Unknown",ae;var z})(),me=(()=>{return(z=me||(me={})).Joystick="Joystick",z.Mouse="Mouse",z.Unknown="Unknown",z.Keyboard="Keyboard",z.GamePad="GamePad",me;var z})(),ue=(()=>{return(z=ue||(ue={})).StreamerUsedFreeUpsell="StreamerUsedFreeUpsell",z.StreamerQueueUpsell="StreamerQueueUpsell",z.StreamerNoFreeUpsell="StreamerNoFreeUpsell",z.StreamerPostSessionFreeGaaSUpsell="StreamerPostSessionFreeGaaSUpsell",z.StreamerPostSessionUpsell="StreamerPostSessionUpsell",z.StreamerPostSessionAnonGaaSUpsell="StreamerPostSessionAnonGaaSUpsell",z.Standard="Standard",ue;var z})(),X=(()=>{return(z=X||(X={})).Clicked="Clicked",z.Dismissed="Dismissed",X;var z})(),j=(()=>{return(z=j||(j={})).UNDEFINED="UNDEFINED",z.TRUE="TRUE",z.FALSE="FALSE",j;var z})(),Z=(()=>{return(z=Z||(Z={})).AUTH_FAILED="AUTH_FAILED",z.SESSION_EXIST="SESSION_EXIST",z.RETRYABLE_POST_FAILURE="RETRYABLE_POST_FAILURE",z.BLOCK_STREAM="BLOCK_STREAM",z.WIFI_2_4="WIFI_2_4",z.INVALID_PARAM="INVALID_PARAM",z.TEST_IN_PROGRESS="TEST_IN_PROGRESS",z.POST_FAILED="POST_FAILED",z.NA="NA",z.FAILED="FAILED",z.INVALID_DATA="INVALID_DATA",z.CANCELED="CANCELED",z.SETUP_FAILED="SETUP_FAILED",z.PacketLoss="PacketLoss",z.UNKNOWN="UNKNOWN",z.SYN_FAILED="SYN_FAILED",z.FIN_FAILED="FIN_FAILED",z.CAPACITY_FULL="CAPACITY_FULL",Z;var z})(),W=(()=>{return(z=W||(W={})).Cancel="Cancel",z.Send="Send",W;var z})(),te=(()=>{return(z=te||(te={})).Unknown="Unknown",z.Windows="Windows",z.Mac="Mac",z.Android="Android",z.Web="Web",te;var z})(),ie=(()=>{return(z=ie||(ie={})).PlayGame="PlayGame",z.ViewGame="ViewGame",z.None="None",ie;var z})(),Q=(()=>{return(z=Q||(Q={})).GetServerInformation="GetServerInformation",z.JARVIS_Get_User_Token="JARVIS_Get_User_Token",z.Image_Retrieval_Tile_Feature="Image_Retrieval_Tile_Feature",z.JARVIS_Set_Pin="JARVIS_Set_Pin",z.JARVIS_Redeem_Delegate_Token="JARVIS_Redeem_Delegate_Token",z.Append_Client_Data="Append_Client_Data",z.Get_Client_Settings="Get_Client_Settings",z.NES_Cancel_Subscription="NES_Cancel_Subscription",z.Get_Client_Data="Get_Client_Data",z.GetAppVariants="GetAppVariants",z.NES_Update_Subscription="NES_Update_Subscription",z.GetAppData="GetAppData",z.Layout_Get_Tile_Data="Layout_Get_Tile_Data",z.NES_Get_PlayTime="NES_Get_PlayTime",z.InitiateDownload="InitiateDownload",z.DR_Get_Product="DR_Get_Product",z.NES_Install="NES_Install",z.NES_Get_Subscriptions="NES_Get_Subscriptions",z.NES_Get_Products="NES_Get_Products",z.JARVIS_Chain_Session="JARVIS_Chain_Session",z.FCM_Checkin="FCM_Checkin",z.GetPrivacyPolicy="GetPrivacyPolicy",z.NES_Get_Credits="NES_Get_Credits",z.JARVIS_Get_Third_Party_Provider_Info="JARVIS_Get_Third_Party_Provider_Info",z.FCM_Subscribe="FCM_Subscribe",z.FCM_Unregister="FCM_Unregister",z.JARVIS_Request_Email_Verify="JARVIS_Request_Email_Verify",z.JARVIS_Verify_Pin="JARVIS_Verify_Pin",z.GetCloudVariable="GetCloudVariable",z.CheckForUpdate="CheckForUpdate",z.DR_Put_Cart="DR_Put_Cart",z.Get_Client_Token="Get_Client_Token",z.FCM_Unsubscribe="FCM_Unsubscribe",z.Streaming_GetFeedbackToken="Streaming_GetFeedbackToken",z.GetRemoteConfig="GetRemoteConfig",z.Get_Release_Highlights="Get_Release_Highlights",z.Get_User_Info="Get_User_Info",z.PrepareToDownload="PrepareToDownload",z.NES_Get_Resource="NES_Get_Resource",z.DR_Get_Payment="DR_Get_Payment",z.GetFeatureRollout="GetFeatureRollout",z.NES_Get_ServiceUrls="NES_Get_ServiceUrls",z.JARVIS_Get_Login_Token="JARVIS_Get_Login_Token",z.JARVIS_Get_Delegate_Token="JARVIS_Get_Delegate_Token",z.Set_Client_Data="Set_Client_Data",z.Layout_Get_Section="Layout_Get_Section",z.DR_Edit_Payment="DR_Edit_Payment",z.FeedbackHead="FeedbackHead",z.DR_Empty_Cart="DR_Empty_Cart",z.NES_Get_Apps="NES_Get_Apps",z.DR_Get_Orders="DR_Get_Orders",z.FCM_Register="FCM_Register",z.DR_Apply_Shopper="DR_Apply_Shopper",z.DR_Get_Token="DR_Get_Token",z.GetTermsAndConditions="GetTermsAndConditions",z.GetSurvey="GetSurvey",z.Layout_Get_Sections="Layout_Get_Sections",z.JARVIS_Get_Pin="JARVIS_Get_Pin",z.Get_Access_Token="Get_Access_Token",z.Delete_Client_Data="Delete_Client_Data",z.GetRatingsInfo="GetRatingsInfo",z.FeedbackAttachment="FeedbackAttachment",z.Image_Retrieval_Tile_Game="Image_Retrieval_Tile_Game",z.NES_Uninstall="NES_Uninstall",z.DR_Submit_Cart="DR_Submit_Cart",z.GetLayout="GetLayout",z.SendSurveyResponse="SendSurveyResponse",z.Feature_Tile_Image_Retrieval="Feature_Tile_Image_Retrieval",z.JARVIS_Get_Session_Token="JARVIS_Get_Session_Token",z.GetSpecificServerInformation="GetSpecificServerInformation",z.Layout_Manager_Data_Retrieval="Layout_Manager_Data_Retrieval",z.JARVIS_Get_User_Info="JARVIS_Get_User_Info",z.Streaming_GetJarvisDelegateToken="Streaming_GetJarvisDelegateToken",z.NES_Get_Product_Credits="NES_Get_Product_Credits",z.DR_Get_Cart="DR_Get_Cart",z.GetApps="GetApps",z.LinkAccount="LinkAccount",z.UnlinkAccount="UnlinkAccount",z.GetOAuthURL="GetOAuthURL",z.Other="Other",z.FetchJSFile="FetchJSFile",z.FetchLocaleJson="FetchLocaleJson",z.GetPanel="GetPanel",z.PNS_Registrations="PNS_Registrations",z.PNS_Unregister="PNS_Unregister",Q;var z})(),k=(()=>{return(z=k||(k={})).Unknown="Unknown",z.Connected="Connected",z.Disconnected="Disconnected",k;var z})(),xe=(()=>{return(z=xe||(xe={})).Excellent="Excellent",z.Poor="Poor",z.Bad="Bad",z.Unknown="Unknown",xe;var z})(),ct=(()=>{return(z=ct||(ct={})).SelfUpdateInstallAuto="SelfUpdateInstallAuto",z.SelfUpdateInstallManual="SelfUpdateInstallManual",z.CustomOfflinePage="CustomOfflinePage",z.LaunchUI="LaunchUI",z.FirstApplicationInstall="FirstApplicationInstall",z.LaunchPwaUI="LaunchPwaUI",z.ScheduledMaintenanceTimer="ScheduledMaintenanceTimer",z.SessionLengthTimer="SessionLengthTimer",ct;var z})(),Se=(()=>{return(z=Se||(Se={})).OobeAgreeAndContinue="OobeAgreeAndContinue",z.OobeTermsOfUseHyperlink="OobeTermsOfUseHyperlink",Se;var z})(),Ge=(()=>{return(z=Ge||(Ge={})).No="No",z.Yes="Yes",Ge;var z})(),St=(()=>{return(z=St||(St={})).GameNotFound="GameNotFound",z.BadRequest="BadRequest",z.Unknown="Unknown",z.ServerError="ServerError",z.ClipboardError="ClipboardError",z.Unauthorized="Unauthorized",z.PartnerAuthFailed="PartnerAuthFailed",z.ZoneNotFound="ZoneNotFound",z.RedirectURLNotAllowed="RedirectURLNotAllowed",z.None="None",St;var z})(),Tt=(()=>{return(z=Tt||(Tt={})).AccountLinked="AccountLinked",z.Disconnect="Disconnect",z.ResyncAfterResolve="ResyncAfterResolve",z.ResyncAfterProfileCreate="ResyncAfterProfileCreate",z.Sync="Sync",z.Resync="Resync",Tt;var z})(),Te=(()=>{return(z=Te||(Te={})).FingerprintChanged="FingerprintChanged",z.ClientUpdated="ClientUpdated",z.StreamerNetworkError="StreamerNetworkError",z.NetworkTestCancelled="NetworkTestCancelled",z.OverrideFlagSet="OverrideFlagSet",z.MaxDisplayRequired="MaxDisplayRequired",z.PolicyCheckFailed="PolicyCheckFailed",z.Manual="Manual",z.RedResult="RedResult",z.NetworkTestFailed="NetworkTestFailed",z.MaxSubscriptionProfileUpgraded="MaxSubscriptionProfileUpgraded",Te;var z})(),xt=(()=>{return(z=xt||(xt={})).Cancel="Cancel",z.Create="Create",z.Complete="Complete",z.Enter="Enter",xt;var z})(),rt=(()=>{return(z=rt||(rt={})).SolidState="SolidState",z.Unknown="Unknown",z.Rotational="Rotational",rt;var z})(),Ve=(()=>{return(z=Ve||(Ve={})).Streamer="Streamer",z.Gallery="Gallery",z.Layout_L0="Layout_L0",z.Settings="Settings",z.Layout_L1="Layout_L1",Ve;var z})(),at=(()=>{return(z=at||(at={})).Add="Add",z.Delete="Delete",z.TrimNew="TrimNew",z.Play="Play",z.OpenLocation="OpenLocation",z.TrimReplace="TrimReplace",z.Preview="Preview",at;var z})(),ve=(()=>{return(z=ve||(ve={})).Other="Other",z.Ethernet="Ethernet",z.Unknown="Unknown",z.Wifi_2_4="Wifi_2_4",z.Wifi_5_0="Wifi_5_0",ve;var z})(),Ze=(()=>{return(z=Ze||(Ze={})).Manual="Manual",z.Automatic="Automatic",Ze;var z})(),Ie=(()=>{return(z=Ie||(Ie={})).TabSwitch="TabSwitch",z.SessionEndPushNotification="SessionEndPushNotification",z.LocaleChange="LocaleChange",z.StreamerInstanceClosed="StreamerInstanceClosed",z.ClickRetry="ClickRetry",z.TwentyFourHourRefresh="TwentyFourHourRefresh",z.AppMetadataRefresh="AppMetadataRefresh",z.FocusGain="FocusGain",z.StreamerTerminated="StreamerTerminated",z.LoginStatusChange="LoginStatusChange",z.RemoveGame="RemoveGame",z.VpcIdRefresh="VpcIdRefresh",z.RemoveGameFailed="RemoveGameFailed",z.IntegrationChanged="IntegrationChanged",z.EcomStatusChanged="EcomStatusChanged",z.OnlineStatusChange="OnlineStatusChange",z.AppsListRefresh="AppsListRefresh",z.RefreshOnDataExpiry="RefreshOnDataExpiry",Ie;var z})(),$e=(()=>(($e||($e={})).SystemInfo="SystemInfo",$e))(),_t=(()=>{return(z=_t||(_t={})).StreamerConnecting="StreamerConnecting",z.CancelledLoginCompleted="CancelledLoginCompleted",z.RagnarokLaunchError="RagnarokLaunchError",z.Success="Success",z.StreamerQueueUpsell="StreamerQueueUpsell",z.HTTPError="HTTPError",z.StreamerPostSessionFreeGaaSUpsell="StreamerPostSessionFreeGaaSUpsell",z.StreamerQueueApology="StreamerQueueApology",z.StreamerPostSessionUpsell="StreamerPostSessionUpsell",z.NesAuthFailed="NesAuthFailed",z.StreamerPostSessionAnonGaaSUpsell="StreamerPostSessionAnonGaaSUpsell",z.GeronimoLaunchError="GeronimoLaunchError",z.Failure="Failure",z.AppExit="AppExit",z.StreamerUsedFreeUpsell="StreamerUsedFreeUpsell",z.JarvisPinAuthFailed="JarvisPinAuthFailed",z.StreamerLoading="StreamerLoading",z.StreamerNoFreeUpsell="StreamerNoFreeUpsell",z.NesNotEntitled="NesNotEntitled",z.EmailNotVerified="EmailNotVerified",z.ServerError="ServerError",z.ECommercePaywallLaunchError="ECommercePaywallLaunchError",z.NetworkInfoError="NetworkInfoError",z.LoginFailed="LoginFailed",z.GeronimoNetworkTestError="GeronimoNetworkTestError",z.NetworkTestSdkError="NetworkTestSdkError",z.EmptyLibrary="EmptyLibrary",z.GetLayoutError="GetLayoutError",z.ClientError="ClientError",z.ClientOffline="ClientOffline",z.Other="Other",z.ServiceWorkerActivationOngoing="ServiceWorkerActivationOngoing",z.ServiceWorkerActivated="ServiceWorkerActivated",_t;var z})(),be=(()=>{return(z=be||(be={})).DeleteUndo="DeleteUndo",z.Enter="Enter",z.FiltersCleared="FiltersCleared",z.TrimCancel="TrimCancel",z.Montage="Montage",z.Edit="Edit",be;var z})(),Kt=(()=>{return(z=Kt||(Kt={})).UpdateSuccess="UpdateSuccess",z.UpdateFailure="UpdateFailure",z.QueryFailure="QueryFailure",z.DownloadStarted="DownloadStarted",z.Query="Query",z.IPCReceived="IPCReceived",z.UpdateInitiated="UpdateInitiated",z.IPCSent="IPCSent",z.DownloadFailure="DownloadFailure",z.Error="Error",z.Optimization="Optimization",z.Downloaded="Downloaded",z.Cancelled="Cancelled",Kt;var z})(),tn=(()=>{return(z=tn||(tn={})).UGC="UGC",z.Game="Game",tn;var z})(),Mn=(()=>{return(z=Mn||(Mn={})).ScreenOobeWelcome="ScreenOobeWelcome",z.ScreenToastMessage="ScreenToastMessage",z.ScreenMainToolbar="ScreenMainToolbar",z.ScreenMarquee="ScreenMarquee",z.ScreenAllGames="ScreenAllGames",z.ScreenAccountMenu="ScreenAccountMenu",z.ScreenSettings="ScreenSettings",z.ScreenAutoLogin="ScreenAutoLogin",z.ScreenMontage="ScreenMontage",z.ScreenEmailVerification="ScreenEmailVerification",z.ScreenPreview="ScreenPreview",z.ScreenGallery="ScreenGallery",z.ScreenStreamer="ScreenStreamer",z.ScreenMyLibrary="ScreenMyLibrary",z.ScreenJoinGfnDialog="ScreenJoinGfnDialog",z.ScreenGridView="ScreenGridView",z.ScreenEvidencePanel="ScreenEvidencePanel",z.ScreenMallHome="ScreenMallHome",z.ScreenPlatformSelectionDialog="ScreenPlatformSelectionDialog",z.ScreenSwitchProvider="ScreenSwitchProvider",Mn;var z})(),Un=(()=>{return(z=Un||(Un={})).Unknown="Unknown",z.Cancel="Cancel",z.Create="Create",z.Failure="Failure",Un;var z})(),_n=(()=>{return(z=_n||(_n={})).Unknown="Unknown",z.GeForceNOW="GeForceNOW",z.External="External",z.Deeplink="Deeplink",_n;var z})(),Ue=(()=>{return(z=Ue||(Ue={})).Relevance="Relevance",z.AtoZ="AtoZ",z.ZtoA="ZtoA",Ue;var z})(),Mt=(()=>{return(z=Mt||(Mt={})).TOKEN_REGISTRATION="TOKEN_REGISTRATION",z.DISPATCH_NOTIFICATION="DISPATCH_NOTIFICATION",z.DEVICE_REGISTRATION="DEVICE_REGISTRATION",z.CLIENT_SERVER_COMMUNICATION="CLIENT_SERVER_COMMUNICATION",z.SUBSCRIPTION="SUBSCRIPTION",z.PAYLOAD_DECRYPTION="PAYLOAD_DECRYPTION",z.GENERAL="GENERAL",Mt;var z})(),ft=(()=>{return(z=ft||(ft={})).Join="Join",z.Close="Close",z.Login="Login",ft;var z})(),st=(()=>{return(z=st||(st={})).NNS="NNS",z.PNS="PNS",st;var z})(),Et=(()=>{return(z=Et||(Et={})).InstantReplay="InstantReplay",z.Highlight="Highlight",z.Manual="Manual",z.Montage="Montage",z.Screenshot="Screenshot",z.Normal="Normal",Et;var z})(),Ee=(()=>{return(z=Ee||(Ee={})).Video="Video",z.Audio="Audio",Ee;var z})(),dt=(()=>{return(z=dt||(dt={})).Success="Success",z.Failure="Failure",dt;var z})(),Zt=(()=>{return(z=Zt||(Zt={})).EventNone="EventNone",z.EditBox="EditBox",Zt;var z})(),En=(()=>{return(z=En||(En={})).SessionStart="SessionStart",z.SessionStop="SessionStop",z.SessionConsentDenied="SessionConsentDenied",En;var z})(),Pn=(()=>{return(z=Pn||(Pn={})).Success="Success",z.Failure="Failure",z.Unknown="Unknown",Pn;var z})();const ne={CaptureEvent:{name:"CaptureEvent",gdprLevel:i.Functional},GalleryContentEvent:{name:"GalleryContentEvent",gdprLevel:i.Functional},ClientAudioError:{name:"ClientAudioError",gdprLevel:i.Technical},AnselFreestyleError:{name:"AnselFreestyleError",gdprLevel:i.Functional},HighlightsGameSetting:{name:"HighlightsGameSetting",gdprLevel:i.Functional},TextSearch:{name:"TextSearch",gdprLevel:i.Behavioral},Geronimo_Feature_Event:{name:"Geronimo_Feature_Event",gdprLevel:i.Functional},ProcessStarted:{name:"ProcessStarted",gdprLevel:i.Functional},MicrophoneSettingChange:{name:"MicrophoneSettingChange",gdprLevel:i.Functional},MicrophoneInitialized:{name:"MicrophoneInitialized",gdprLevel:i.Functional},CheckGFN:{name:"CheckGFN",gdprLevel:i.Functional},UIAction:{name:"UIAction",gdprLevel:i.Functional},QueueEtaUpgradeClicked:{name:"QueueEtaUpgradeClicked",gdprLevel:i.Functional},PopUpDialogClosed:{name:"PopUpDialogClosed",gdprLevel:i.Technical},NetworkTest_Exception_Event:{name:"NetworkTest_Exception_Event",gdprLevel:i.Technical},Game_Launch_Event:{name:"Game_Launch_Event",gdprLevel:i.Functional},LaunchProcess:{name:"LaunchProcess",gdprLevel:i.Functional},ClientImeOpenEvent:{name:"ClientImeOpenEvent",gdprLevel:i.Technical},OwnershipClickEvent:{name:"OwnershipClickEvent",gdprLevel:i.Technical},OpenedIGO:{name:"OpenedIGO",gdprLevel:i.Functional},GalleryPlayedVideo:{name:"GalleryPlayedVideo",gdprLevel:i.Behavioral},AnselFreestyleFeatureDisabled:{name:"AnselFreestyleFeatureDisabled",gdprLevel:i.Technical},SettingSnapshot:{name:"SettingSnapshot",gdprLevel:i.Behavioral},Application_Install:{name:"Application_Install",gdprLevel:i.Functional},Ragnarok_Exception_Event:{name:"Ragnarok_Exception_Event",gdprLevel:i.Technical},QueueAbandoned:{name:"QueueAbandoned",gdprLevel:i.Functional},OwnershipSyncEvent:{name:"OwnershipSyncEvent",gdprLevel:i.Functional},PopUpDialogShown:{name:"PopUpDialogShown",gdprLevel:i.Functional},PushNotificationReceived:{name:"PushNotificationReceived",gdprLevel:i.Functional},UITransition:{name:"UITransition",gdprLevel:i.Behavioral},OOBE_Accept:{name:"OOBE_Accept",gdprLevel:i.Functional},RoutingStatus:{name:"RoutingStatus",gdprLevel:i.Functional},Geronimo_Stream_Exit_Event:{name:"Geronimo_Stream_Exit_Event",gdprLevel:i.Functional},Ragnarok_Sleep_Event:{name:"Ragnarok_Sleep_Event",gdprLevel:i.Technical},RagnarokGamepadEvent:{name:"RagnarokGamepadEvent",gdprLevel:i.Technical},CrashInfo:{name:"CrashInfo",gdprLevel:i.Functional},HTTPFailure:{name:"HTTPFailure",gdprLevel:i.Functional},AnselFreestyleSession:{name:"AnselFreestyleSession",gdprLevel:i.Functional},PushNotificationTokenRegistered:{name:"PushNotificationTokenRegistered",gdprLevel:i.Functional},AutoUpdate:{name:"AutoUpdate",gdprLevel:i.Functional},Ragnarok_Stream_Exit_Event:{name:"Ragnarok_Stream_Exit_Event",gdprLevel:i.Functional},Geronimo_SystemApi_Event:{name:"Geronimo_SystemApi_Event",gdprLevel:i.Functional},GeronimoGamepadEvent:{name:"GeronimoGamepadEvent",gdprLevel:i.Technical},ClientMetricEvent:{name:"ClientMetricEvent",gdprLevel:i.Functional},LayoutTelemetry:{name:"LayoutTelemetry",gdprLevel:i.Functional},HTTPSuccess:{name:"HTTPSuccess",gdprLevel:i.Functional},SDKCallResult:{name:"SDKCallResult",gdprLevel:i.Functional},Drag:{name:"Drag",gdprLevel:i.Technical},HighlightsIndividualGameToggle:{name:"HighlightsIndividualGameToggle",gdprLevel:i.Behavioral},NetworkTest:{name:"NetworkTest",gdprLevel:i.Functional},GFNSession:{name:"GFNSession",gdprLevel:i.Functional},DeeplinkSource:{name:"DeeplinkSource",gdprLevel:i.Functional},HIDInfo:{name:"HIDInfo",gdprLevel:i.Functional},NvstDebug_Event:{name:"NvstDebug_Event",gdprLevel:i.Functional},SystemInfo:{name:"SystemInfo",gdprLevel:i.Functional},GamesMenu:{name:"GamesMenu",gdprLevel:i.Functional},GalleryOpenedFileLocation:{name:"GalleryOpenedFileLocation",gdprLevel:i.Behavioral},Click:{name:"Click",gdprLevel:i.Technical},AnselFreestyleFilters:{name:"AnselFreestyleFilters",gdprLevel:i.Functional},GalleryFilterUsed:{name:"GalleryFilterUsed",gdprLevel:i.Behavioral},Geronimo_Launch_Event:{name:"Geronimo_Launch_Event",gdprLevel:i.Functional},Nvst_RealTimeMetrics:{name:"Nvst_RealTimeMetrics",gdprLevel:i.Technical},UserSession:{name:"UserSession",gdprLevel:i.Functional},Geronimo_Connectivity_Event:{name:"Geronimo_Connectivity_Event",gdprLevel:i.Functional},NavigationPerformanceMetrics:{name:"NavigationPerformanceMetrics",gdprLevel:i.Technical},GalleryDeleteCountEvent:{name:"GalleryDeleteCountEvent",gdprLevel:i.Functional},MontageEvent:{name:"MontageEvent",gdprLevel:i.Functional},CreateHTTPServerError:{name:"CreateHTTPServerError",gdprLevel:i.Functional},Geronimo_Debug_Event:{name:"Geronimo_Debug_Event",gdprLevel:i.Technical},AnselScreenshotEvent:{name:"AnselScreenshotEvent",gdprLevel:i.Functional},Hit_Event:{name:"Hit_Event",gdprLevel:i.Functional},CloudSearch:{name:"CloudSearch",gdprLevel:i.Functional},AuthenticationProvider:{name:"AuthenticationProvider",gdprLevel:i.Functional},ExperienceControlInfo:{name:"ExperienceControlInfo",gdprLevel:i.Functional},PageLoadPerformanceMetrics:{name:"PageLoadPerformanceMetrics",gdprLevel:i.Technical},SettingState:{name:"SettingState",gdprLevel:i.Technical},DeeplinkShare:{name:"DeeplinkShare",gdprLevel:i.Functional},Game_Launch_Metrics:{name:"Game_Launch_Metrics",gdprLevel:i.Functional},NetworkTest_Http_Event:{name:"NetworkTest_Http_Event",gdprLevel:i.Functional},GalleryAction:{name:"GalleryAction",gdprLevel:i.Functional},GFNPCLogsInfo:{name:"GFNPCLogsInfo",gdprLevel:i.Functional},SyncCTATileEvent:{name:"SyncCTATileEvent",gdprLevel:i.Technical},StreamingProfile:{name:"StreamingProfile",gdprLevel:i.Technical},ClientAudioSkewedEvent:{name:"ClientAudioSkewedEvent",gdprLevel:i.Technical},Geronimo_Http_Event:{name:"Geronimo_Http_Event",gdprLevel:i.Functional},ClientImeInteractionEvent:{name:"ClientImeInteractionEvent",gdprLevel:i.Technical},StreamNowButtonClick:{name:"StreamNowButtonClick",gdprLevel:i.Functional},HighlightCapture:{name:"HighlightCapture",gdprLevel:i.Functional},GalleryFileRemoved:{name:"GalleryFileRemoved",gdprLevel:i.Behavioral},Ragnarok_Http_Event:{name:"Ragnarok_Http_Event",gdprLevel:i.Functional},GalleryFilterEvent:{name:"GalleryFilterEvent",gdprLevel:i.Functional},LCARSPaginationCallInfo:{name:"LCARSPaginationCallInfo",gdprLevel:i.Functional},MontageAction:{name:"MontageAction",gdprLevel:i.Functional},UserSurvey:{name:"UserSurvey",gdprLevel:i.Functional},Ragnarok_Launch_Event:{name:"Ragnarok_Launch_Event",gdprLevel:i.Functional},PluginAPIStatus:{name:"PluginAPIStatus",gdprLevel:i.Technical},GPUInfo:{name:"GPUInfo",gdprLevel:i.Functional},GallerySortEvent:{name:"GallerySortEvent",gdprLevel:i.Functional},OverrideKeyboardLayout:{name:"OverrideKeyboardLayout",gdprLevel:i.Functional},Exception:{name:"Exception",gdprLevel:i.Functional},HighlightsCancelled:{name:"HighlightsCancelled",gdprLevel:i.Functional},Ragnarok_Debug_Event:{name:"Ragnarok_Debug_Event",gdprLevel:i.Technical},GalleryAccess:{name:"GalleryAccess",gdprLevel:i.Functional},PushNotificationError:{name:"PushNotificationError",gdprLevel:i.Functional},PushNotificationPurgedEntries:{name:"PushNotificationPurgedEntries",gdprLevel:i.Functional},FreestyleStylesApplied:{name:"FreestyleStylesApplied",gdprLevel:i.Functional},MediaPlay:{name:"MediaPlay",gdprLevel:i.Technical},StatsClosedEvent:{name:"StatsClosedEvent",gdprLevel:i.Functional},StatsViewChangedEvent:{name:"StatsViewChangedEvent",gdprLevel:i.Functional},GFNEventStatus:{name:"GFNEventStatus",gdprLevel:i.Functional},GameplayEntryEvent:{name:"GameplayEntryEvent",gdprLevel:i.Functional},StreamingQualityChangedEvent:{name:"StreamingQualityChangedEvent",gdprLevel:i.Functional},ResolutionUpscalingChangedEvent:{name:"ResolutionUpscalingChangedEvent",gdprLevel:i.Functional},WidgetViewChangedEvent:{name:"WidgetViewChangedEvent",gdprLevel:i.Functional},NotificationChangedEvent:{name:"NotificationChangedEvent",gdprLevel:i.Functional},PlaytesterSessionEvent:{name:"PlaytesterSessionEvent",gdprLevel:i.Functional},System_WifiInfo_Event:{name:"System_WifiInfo_Event",gdprLevel:i.Functional},ClipboardPasteEvent:{name:"ClipboardPasteEvent",gdprLevel:i.Functional},StorageUsageMetrics:{name:"StorageUsageMetrics",gdprLevel:i.Technical},LoginStart:{name:"LoginStart",gdprLevel:i.Functional},RemoteConfigInfo:{name:"RemoteConfigInfo",gdprLevel:i.Functional}};class Be{constructor(ot){this.parameters=ot,this.ts=(new Date).toISOString()}}class Ct extends Be{constructor(ot){super(ot),this.name=ne.GalleryContentEvent.name,this.gdprLevel=ne.GalleryContentEvent.gdprLevel}}class Wt extends Be{constructor(ot){super(ot),this.name=ne.MicrophoneSettingChange.name,this.gdprLevel=ne.MicrophoneSettingChange.gdprLevel}}class ln extends Be{constructor(ot){super(ot),this.name=ne.MicrophoneInitialized.name,this.gdprLevel=ne.MicrophoneInitialized.gdprLevel}}class Sn extends Be{constructor(ot){super(ot),this.name=ne.CheckGFN.name,this.gdprLevel=ne.CheckGFN.gdprLevel}}class qe extends Be{constructor(ot){super(ot),this.name=ne.UIAction.name,this.gdprLevel=ne.UIAction.gdprLevel}}class Ut extends Be{constructor(ot){super(ot),this.name=ne.QueueEtaUpgradeClicked.name,this.gdprLevel=ne.QueueEtaUpgradeClicked.gdprLevel}}class M extends Be{constructor(ot){super(ot),this.name=ne.PopUpDialogClosed.name,this.gdprLevel=ne.PopUpDialogClosed.gdprLevel}}class re extends Be{constructor(ot){super(ot),this.name=ne.NetworkTest_Exception_Event.name,this.gdprLevel=ne.NetworkTest_Exception_Event.gdprLevel}}class Ce extends Be{constructor(ot){super(ot),this.name=ne.Game_Launch_Event.name,this.gdprLevel=ne.Game_Launch_Event.gdprLevel}}class tt extends Be{constructor(ot){super(ot),this.name=ne.ClientImeOpenEvent.name,this.gdprLevel=ne.ClientImeOpenEvent.gdprLevel}}class ut extends Be{constructor(ot){super(ot),this.name=ne.OwnershipClickEvent.name,this.gdprLevel=ne.OwnershipClickEvent.gdprLevel}}class Jt extends Be{constructor(ot){super(ot),this.name=ne.Application_Install.name,this.gdprLevel=ne.Application_Install.gdprLevel}}class An extends Be{constructor(ot){super(ot),this.name=ne.QueueAbandoned.name,this.gdprLevel=ne.QueueAbandoned.gdprLevel}}class Pt extends Be{constructor(ot){super(ot),this.name=ne.OwnershipSyncEvent.name,this.gdprLevel=ne.OwnershipSyncEvent.gdprLevel}}class Ke extends Be{constructor(ot){super(ot),this.name=ne.PopUpDialogShown.name,this.gdprLevel=ne.PopUpDialogShown.gdprLevel}}class Pe extends Be{constructor(ot){super(ot),this.name=ne.PushNotificationReceived.name,this.gdprLevel=ne.PushNotificationReceived.gdprLevel}}class Lt extends Be{constructor(ot){super(ot),this.name=ne.OOBE_Accept.name,this.gdprLevel=ne.OOBE_Accept.gdprLevel}}class Dt extends Be{constructor(ot){super(ot),this.name=ne.RoutingStatus.name,this.gdprLevel=ne.RoutingStatus.gdprLevel}}class ki extends Be{constructor(ot){super(ot),this.name=ne.HTTPFailure.name,this.gdprLevel=ne.HTTPFailure.gdprLevel}}class Ki extends Be{constructor(ot){super(ot),this.name=ne.PushNotificationTokenRegistered.name,this.gdprLevel=ne.PushNotificationTokenRegistered.gdprLevel}}class $i extends Be{constructor(ot){super(ot),this.name=ne.AutoUpdate.name,this.gdprLevel=ne.AutoUpdate.gdprLevel}}class lo extends Be{constructor(ot){super(ot),this.name=ne.LayoutTelemetry.name,this.gdprLevel=ne.LayoutTelemetry.gdprLevel}}class co extends Be{constructor(ot){super(ot),this.name=ne.HTTPSuccess.name,this.gdprLevel=ne.HTTPSuccess.gdprLevel}}class Ui extends Be{constructor(ot){super(ot),this.name=ne.Drag.name,this.gdprLevel=ne.Drag.gdprLevel}}class ui extends Be{constructor(ot){super(ot),this.name=ne.NetworkTest.name,this.gdprLevel=ne.NetworkTest.gdprLevel}}class ho extends Be{constructor(ot){super(ot),this.name=ne.DeeplinkSource.name,this.gdprLevel=ne.DeeplinkSource.gdprLevel}}class ji extends Be{constructor(ot){super(ot),this.name=ne.HIDInfo.name,this.gdprLevel=ne.HIDInfo.gdprLevel}}class Xi extends Be{constructor(ot){super(ot),this.name=ne.SystemInfo.name,this.gdprLevel=ne.SystemInfo.gdprLevel}}class uo extends Be{constructor(ot){super(ot),this.name=ne.GamesMenu.name,this.gdprLevel=ne.GamesMenu.gdprLevel}}class Fi extends Be{constructor(ot){super(ot),this.name=ne.Click.name,this.gdprLevel=ne.Click.gdprLevel}}class Ne extends Be{constructor(ot){super(ot),this.name=ne.UserSession.name,this.gdprLevel=ne.UserSession.gdprLevel}}class H extends Be{constructor(ot){super(ot),this.name=ne.NavigationPerformanceMetrics.name,this.gdprLevel=ne.NavigationPerformanceMetrics.gdprLevel}}class pe extends Be{constructor(ot){super(ot),this.name=ne.GalleryDeleteCountEvent.name,this.gdprLevel=ne.GalleryDeleteCountEvent.gdprLevel}}class Ae extends Be{constructor(ot){super(ot),this.name=ne.MontageEvent.name,this.gdprLevel=ne.MontageEvent.gdprLevel}}class et extends Be{constructor(ot){super(ot),this.name=ne.CreateHTTPServerError.name,this.gdprLevel=ne.CreateHTTPServerError.gdprLevel}}class Xt extends Be{constructor(ot){super(ot),this.name=ne.Hit_Event.name,this.gdprLevel=ne.Hit_Event.gdprLevel}}class Tn extends Be{constructor(ot){super(ot),this.name=ne.AuthenticationProvider.name,this.gdprLevel=ne.AuthenticationProvider.gdprLevel}}class Xn extends Be{constructor(ot){super(ot),this.name=ne.PageLoadPerformanceMetrics.name,this.gdprLevel=ne.PageLoadPerformanceMetrics.gdprLevel}}class wn extends Be{constructor(ot){super(ot),this.name=ne.SettingState.name,this.gdprLevel=ne.SettingState.gdprLevel}}class Gi extends Be{constructor(ot){super(ot),this.name=ne.DeeplinkShare.name,this.gdprLevel=ne.DeeplinkShare.gdprLevel}}class ci extends Be{constructor(ot){super(ot),this.name=ne.Game_Launch_Metrics.name,this.gdprLevel=ne.Game_Launch_Metrics.gdprLevel}}class qn extends Be{constructor(ot){super(ot),this.name=ne.NetworkTest_Http_Event.name,this.gdprLevel=ne.NetworkTest_Http_Event.gdprLevel}}class Hn extends Be{constructor(ot){super(ot),this.name=ne.GalleryAction.name,this.gdprLevel=ne.GalleryAction.gdprLevel}}class fi extends Be{constructor(ot){super(ot),this.name=ne.SyncCTATileEvent.name,this.gdprLevel=ne.SyncCTATileEvent.gdprLevel}}class Bi extends Be{constructor(ot){super(ot),this.name=ne.StreamingProfile.name,this.gdprLevel=ne.StreamingProfile.gdprLevel}}class ri extends Be{constructor(ot){super(ot),this.name=ne.ClientImeInteractionEvent.name,this.gdprLevel=ne.ClientImeInteractionEvent.gdprLevel}}class ii extends Be{constructor(ot){super(ot),this.name=ne.StreamNowButtonClick.name,this.gdprLevel=ne.StreamNowButtonClick.gdprLevel}}class jn extends Be{constructor(ot){super(ot),this.name=ne.GalleryFilterEvent.name,this.gdprLevel=ne.GalleryFilterEvent.gdprLevel}}class vi extends Be{constructor(ot){super(ot),this.name=ne.LCARSPaginationCallInfo.name,this.gdprLevel=ne.LCARSPaginationCallInfo.gdprLevel}}class _i extends Be{constructor(ot){super(ot),this.name=ne.MontageAction.name,this.gdprLevel=ne.MontageAction.gdprLevel}}class Ro extends Be{constructor(ot){super(ot),this.name=ne.UserSurvey.name,this.gdprLevel=ne.UserSurvey.gdprLevel}}class Vi extends Be{constructor(ot){super(ot),this.name=ne.PluginAPIStatus.name,this.gdprLevel=ne.PluginAPIStatus.gdprLevel}}class Hi extends Be{constructor(ot){super(ot),this.name=ne.GPUInfo.name,this.gdprLevel=ne.GPUInfo.gdprLevel}}class si extends Be{constructor(ot){super(ot),this.name=ne.GallerySortEvent.name,this.gdprLevel=ne.GallerySortEvent.gdprLevel}}class wo extends Be{constructor(ot){super(ot),this.name=ne.Exception.name,this.gdprLevel=ne.Exception.gdprLevel}}class zn extends Be{constructor(ot){super(ot),this.name=ne.Ragnarok_Debug_Event.name,this.gdprLevel=ne.Ragnarok_Debug_Event.gdprLevel}}class ko extends Be{constructor(ot){super(ot),this.name=ne.PushNotificationError.name,this.gdprLevel=ne.PushNotificationError.gdprLevel}}class Ii extends Be{constructor(ot){super(ot),this.name=ne.PushNotificationPurgedEntries.name,this.gdprLevel=ne.PushNotificationPurgedEntries.gdprLevel}}class qo extends Be{constructor(ot){super(ot),this.name=ne.MediaPlay.name,this.gdprLevel=ne.MediaPlay.gdprLevel}}class nr extends Be{constructor(ot){super(ot),this.name=ne.GFNEventStatus.name,this.gdprLevel=ne.GFNEventStatus.gdprLevel}}class mo extends Be{constructor(ot){super(ot),this.name=ne.PlaytesterSessionEvent.name,this.gdprLevel=ne.PlaytesterSessionEvent.gdprLevel}}class Ai extends Be{constructor(ot){super(ot),this.name=ne.ClipboardPasteEvent.name,this.gdprLevel=ne.ClipboardPasteEvent.gdprLevel}}class Uo extends Be{constructor(ot){super(ot),this.name=ne.StorageUsageMetrics.name,this.gdprLevel=ne.StorageUsageMetrics.gdprLevel}}class Fo extends Be{constructor(ot){super(ot),this.name=ne.RemoteConfigInfo.name,this.gdprLevel=ne.RemoteConfigInfo.gdprLevel}}},67067:(He,de,e)=>{"use strict";e.d(de,{reR:()=>n.re,FRL:()=>n.FR,OD0:()=>n.OD,_So:()=>n._S,syg:()=>i.syg,zZ4:()=>i.zZ4,J2u:()=>i.J2u,Ydg:()=>i.Ydg,YwJ:()=>i.YwJ,wye:()=>i.wye,lzt:()=>i.lzt,ztj:()=>i.ztj,QuF:()=>i.QuF,aGN:()=>i.aGN,BhR:()=>i.BhR,cym:()=>i.cym,cYw:()=>i.cYw,NX4:()=>i.NX4,XzU:()=>i.XzU,DwO:()=>i.DwO,cjj:()=>i.cjj,N3X:()=>i.N3X,vlM:()=>i.vlM,g7J:()=>i.g7J,YyK:()=>i.YyK,yOt:()=>i.yOt,ryx:()=>i.ryx,HyT:()=>i.HyT,tZp:()=>i.tZp,AVX:()=>i.AVX,NlQ:()=>i.NlQ,MsO:()=>i.MsO,hAb:()=>i.hAb,DUy:()=>i.DUy,_LZ:()=>i._LZ,DCd:()=>i.DCd,zO5:()=>i.zO5,NuE:()=>i.NuE,jzO:()=>i.jzO,Mlh:()=>i.Mlh,ZQU:()=>i.ZQU,U4l:()=>i.U4l,Y_M:()=>i.Y_M,sYX:()=>i.sYX,nrY:()=>i.nrY,PyH:()=>i.PyH,MjV:()=>i.MjV,wEN:()=>i.wEN,AUc:()=>i.AUc,_63:()=>i._63,OR5:()=>i.OR5,ZIE:()=>i.ZIE,cPW:()=>i.cPW,Bbu:()=>i.Bbu,sNt:()=>i.sNt,LMI:()=>i.LMI,GVq:()=>i.GVq,qmX:()=>i.qmX,W9g:()=>i.W9g,Mbw:()=>i.Mbw,DL8:()=>i.DL8,_cC:()=>i._cC,bOD:()=>i.bOD,YbQ:()=>i.YbQ,WLf:()=>i.WLf,Tbl:()=>i.Tbl,YXu:()=>i.YXu,Yk9:()=>i.Yk9,DYb:()=>i.DYb,RRm:()=>i.RRm,Wb4:()=>i.Wb4,_K5:()=>i._K5,Ols:()=>i.Ols,v6v:()=>i.v6v,BgF:()=>i.BgF,Y7V:()=>i.Y7V,kr1:()=>i.kr1,Xj5:()=>i.Xj5,p3A:()=>i.p3A,ItH:()=>i.ItH,F9b:()=>i.F9b,TK_:()=>i.TK_,nfD:()=>i.nfD,GtW:()=>i.GtW,xNG:()=>i.xNG,att:()=>i.att,iB_:()=>i.iB_,XHw:()=>i.XHw,XPX:()=>i.XPX,VIQ:()=>i.VIQ,Ran:()=>i.Ran,OSH:()=>i.OSH,CGJ:()=>i.CGJ,HGL:()=>i.HGL,f$p:()=>i.f$p,E5O:()=>i.E5O,pDK:()=>i.pDK,_G:()=>i._G,pjt:()=>i.pjt,X02:()=>i.X02,T44:()=>i.T44,PoW:()=>i.PoW,VHB:()=>i.VHB,c8x:()=>i.c8x,Vwu:()=>i.Vwu,$4G:()=>i.$4G,QqN:()=>i.QqN,ef6:()=>i.ef6,wU6:()=>D.w});var n=e(52477),i=e(9021),D=e(49654)},49654:(He,de,e)=>{"use strict";e.d(de,{w:()=>me});var n=e(80226),i=e(76491),D=e(90490),m=e(61486),y=e(12702),T=e(81134),r=e(85816),a=e(53466),s=e(33927),p=e(18293),l=e(98636),t=e(91992),w=e(92597),h=e(202),o=e(6484),f=e(43124),c=e(52477),g=e(9021),I=e(99533),G=e(3076),x=e(60443),E=e(20180),P=e(4906),v=e(99652),O=e(2316),C=e(78778),_=e(57390),F=e(71906),V=e(73159),b=e(11635),B=e(77436),U=e(71258),A=e(74316),S=e(38998),Y=e(60086),se=e(96121);const fe="gfnTelemetry",$={cmsId:null,shortName:"",appLaunchMode:E.xl.Default,launchSource:g.zO5.Unknown,sdkClient:""},ae="telemetrySessionId";let me=(()=>{class ye{constructor(X,j,K,Z,L,W,te,ie,Q,k,oe,N,q,Me,xe,ct,Se){this.loggingService=X,this.appConfig=j,this.sharedStorageService=K,this.telemetryService=Z,this.systemInfoService=L,this.ipcService=W,this.appConfigParams=te,this.gfnsdkService=ie,this.pwaService=Q,this.indexService=k,this.router=oe,this.guestModeService=N,this.deeplinkHelper=q,this.inputModalityService=Me,this.ngZone=xe,this.idmService=ct,this.browseUxService=Se,this.HIDInfo=void 0,this.clientType=g.BhR.Unknown,this.deviceIdSetSubject=new n.t(1),this.sendAppLaunchTelemetrySubject=new i.X(!1),this.streamerTelemetryConfig=$,this.isBrowserClient=!1,this.isGpuEventSent=!1,this.lastClickInputSource=g.s8B.Unknown,this.logger=this.loggingService.getLogger("telemetry-util.service"),this.setClientType((0,x.wI)(this.router.url)?x.lW.Streamer:x.lW.Mall),this.initialize().subscribe(Ge=>{this.logger.info("Successfully generated and stored device id"),this.deviceIdSetSubject.next(),this.deviceIdSetSubject.complete()},Ge=>{this.logger.error("Error fetching deviceId: ",Ge)}),this.isBrowserClient=o.ng.isBrowserPlatform()}restoreTelemetrySessionId(){null!==window.sessionStorage.getItem(ae)&&(this.telemetryService.updateTelemetrySessionId(window.sessionStorage.getItem(ae)),window.sessionStorage.removeItem(ae))}saveTelmetrySessionIdOnLoginAndLogout(){this.logger.info("Subscribing to Login initiated notification"),this.idmService.sameTabAuthStarted().subscribe(X=>{this.logger.info("Received notification for ",X),window.sessionStorage.setItem(ae,this.telemetryService.telemetrySessionId),this.logger.info("Completed saving telemetrySessionId")})}initialize(){this.restoreTelemetrySessionId(),this.saveTelmetrySessionIdOnLoginAndLogout(),this.ngZone.runOutsideAngular(()=>{this.inputModalityService.inputModalityChanged$.subscribe(K=>{switch(K){case v.q.Keyboard:this.lastClickInputSource=g.s8B.Keyboard;break;case v.q.Gamepad:this.lastClickInputSource=g.s8B.Gamepad;break;case v.q.Mouse:this.lastClickInputSource=g.s8B.Mouse;break;case v.q.Touch:this.lastClickInputSource=g.s8B.Touch}})});let X=this.appConfig.build.version;this.isBrowserClient&&void 0!==this.appConfigParams.production&&!1===this.appConfigParams.production&&(X="dev-"+this.appConfig.build.version);const j=this.systemInfoService.getSystemInfo();return(0,D.$R)(this.systemInfoService.getDeviceOSType(),j).pipe((0,r.zg)(([K,Z])=>{const L={deviceOS:K,clientType:this.isBrowserClient?c.gx.Browser:c.gx.Native,clientVer:X,systemInfo:Z,integrationId:this.getIntegrationId()};return this.initCommonData(L)}))}initCommonData(X){const j=X.systemInfo;return this.telemetryService.setEventsCommonData({clientVer:X.clientVer,deviceId:j.DeviceId,platform:this.getCommonPlatformType(j.Platform),clientType:X.clientType,clientVariant:this.getCommonClientVariant(this.appConfig.build.variant),deviceOS:X.deviceOS,deviceOSVersion:j.OSVersion,deviceMake:j.VendorName||o.kQ,deviceModel:j.SystemName||o.kQ,deviceType:j.DeviceType,integrationId:X.integrationId,browserType:j.BrowserName},!1),this.sharedStorageService.readBlock(fe).pipe((0,r.zg)(K=>(K.clientVersion=this.appConfig.build.version,K.deviceId=j.DeviceId,this.sharedStorageService.writeBlock(fe,K))))}setTelemetryConfig(X){this.streamerTelemetryConfig=null!=X?X:$,this.sendSystemInfoTelemetry()}getIntegrationId(){let X=o.kQ;const j=this.deeplinkHelper.getUpdatedPartnerId((0,x.cj)(P.uE.PartnerId));return(this.guestModeService.isGuestMode||this.deeplinkHelper.isSpecialAffiliatePartner(j))&&(X=j||o.kQ),X}getPlatformType(X){switch(X){case"Mac":return g.zhv.Mac;case"Windows":return g.zhv.Windows;case"Android":return g.zhv.Android;case"Unknown":default:return g.zhv.Unknown}}getCommonClientVariant(X){switch(X){case"ibeta":return c.ve.iBeta;case"release":return c.ve.Release;default:return c.ve.Undefined}}getCommonPlatformType(X){return o.ng.isBrowserPlatform()?g.zhv.Web:"Windows"===X?"Win":X}getDisplayDetails(X){const j=[];for(let K=0;K<c.Iv.MaxDisplay;K++){const Z={physicalRes:X&&X[K]&&X[K].PhysicalResolution||"",logicalRes:X&&X[K]&&X[K].LogicalResolution||"",refreshRate:X&&X[K]&&parseInt(X[K].RefreshRate,10)||0,displayNumber:K};j.push(Z)}return j}getGpuDetails(X){const j=[];for(let K=0;K<c.Iv.MaxGpu;K++){const Z={gpuLongName:"",gpuVDSR:""};Z.gpuLongName=X&&X[K]&&X[K].LongGPUName||"",Z.gpuVDSR=X&&X[K]&&X[K].VDSR||"",j.push(Z)}return j}getApiStatus(X){switch(X){case"Success":return g.ee7.Success;case"Failure":default:return g.ee7.Failure}}getPluginName(X){switch(X){case"SystemInfo":return g.p7_.SystemInfo}}getDiskMediumType(X){switch(X){case"SolidState":return g.u_Q.SolidState;case"Rotational":return g.u_Q.Rotational;default:return g.u_Q.Unknown}}getClientVariantType(X){switch(X){case"ibeta":return g.WUy.IBeta;case"release":return g.WUy.Release;case"autoplay":return g.WUy.Autoplay;case"dev":default:return g.WUy.Dev}}getDiskInfo(X){const j=[];for(let K=0;K<c.Iv.MaxDisk;K++){const Z={FreeSpace:0,MediumType:"",TotalSize:0};Z.FreeSpace=X&&X[K]&&X[K].FreeSpace&&parseInt(X[K].FreeSpace,10)||0,Z.MediumType=X&&X[K]&&this.getDiskMediumType(X[K].MediumType)||g.u_Q.Unknown,Z.TotalSize=X&&X[K]&&X[K].TotalSize&&parseInt(X[K].TotalSize,10)||0,j.push(Z)}return j}getInputDeviceInfo(X,j){let K;switch(X){case g.SzM.Keyboard:K=j.Keyboard;break;case g.SzM.Mouse:K=j.Mouse;break;case g.SzM.GamePad:K=j.GamePad;break;case g.SzM.Joystick:K=j.Joystick}return K}getNetworkType(X){let j;switch(X){case o.VV.WiFi5_0:j=g.RRm.Wifi_5_0;break;case o.VV.WiFi2_4:j=g.RRm.Wifi_2_4;break;case o.VV.Ethernet:j=g.RRm.Ethernet;break;case o.VV.Other:j=g.RRm.Other;break;case o.VV.Unknown:default:j=g.RRm.Unknown}return j}setClientType(X){this.clientType=X===x.lW.Mall?g.BhR.MallClient:X===x.lW.Streamer?g.BhR.StreamingClient:g.BhR.Unknown}getClientType(){return this.clientType}parseAndSendInputDeviceTelemetry(X,j){for(let K=0;K<c.Iv.MaxInputDevicePerType;K++)if(!(0,h.isUndefined)(j[K])){const Z={clientType:this.getClientType(),inputDevice:g.SzM[X],manufacturer:j[K].manufacturer,versionNumber:j[K].versionNumber,productID:j[K].productID,reportIntervalMicroSeconds:parseInt(j[K].reportIntervalUs,10),transport:j[K].transport,vendorID:j[K].vendorID},L=new g.MF$(Z);this.telemetryService.push(L)}}sendHIDTelemetry(){if((0,h.isUndefined)(this.HIDInfo))this.logger.info("HID info is undefined");else for(const X in g.SzM)if(this.HIDInfo.hasOwnProperty(g.SzM[X])){const j=this.getInputDeviceInfo(g.SzM[X],this.HIDInfo);this.parseAndSendInputDeviceTelemetry(g.SzM[X],j)}}sendGpuInfoTelemetry(X){let j;if(X?j={gpuProduct:X.GpuProduct||"",gpuRevision:X.GpuRevision||"",gpuBuildNumHi:X.GpuBuildNumHi||"",gpuBuildNumLo:X.GpuBuildNumLo||"",gpuDriverName:X.GpuDriverName||"",gpuDetails:this.getGpuDetails(X.GPU)}:this.logger.error("No GPU Information available"),(0,h.isUndefined)(j))this.logger.info("GpuInfo event is undefined");else{const K=new g.XBX(j);this.telemetryService.push(K),this.isGpuEventSent=!0}}sendApiStatusTelemetry(X){let j;if(X?j={apiName:X.ApiName||"",subApiName:X.SubApiName||"",errorMessage:X.ErrorMessage||"",pluginName:this.getPluginName(X.PluginName),status:this.getApiStatus(X.ApiStatus)}:this.logger.error("No System Information"),(0,h.isUndefined)(j)||this.getPluginName(X.PluginName)!==g.p7_.SystemInfo)this.logger.info("API status info is undefined");else{const K=new g.O9g(j);this.telemetryService.push(K)}}prepareSystemInfoTelemetryObject(X,j){let Z,L=[];return this.sendApiStatusTelemetry(X),this.isGpuEventSent||this.sendGpuInfoTelemetry(X),X?(L=this.getDiskInfo(X.Disk),X.Display=X.Display.slice(0,3),X.GPU=X.GPU.slice(0,2),this.HIDInfo=X.HID,Z={vendorName:X.VendorName||"",systemName:X.SystemName||"",userDefaultUILanguage:X.UserDefaultUILanguage||"",osName:X.OSName||"",osVersion:X.OSVersion||"",physicalMemoryCapacity:parseInt(X.PhysicalMemoryCapacity,10)||0,processorArchitecture:X.ProcessorArchitecture||"",cpuName:X.CPUName||"",networkType:X.Network&&X.Network.NetworkType?this.getNetworkType(X.Network.NetworkType):g.RRm.Unknown,gpuCount:X.GPU.length||0,gpu0LongName:X.GPU&&X.GPU[0]&&X.GPU[0].LongGPUName||"",gpu1LongName:X.GPU&&X.GPU[1]&&X.GPU[1].LongGPUName||"",diskCount:X.Disk.length||0,disk0FreeSpace:L[0].FreeSpace||0,disk0MediumType:L[0].MediumType||g.u_Q.Unknown,disk0TotalSize:L[0].TotalSize||0,disk1FreeSpace:L[1].FreeSpace||0,disk1MediumType:L[1].MediumType||g.u_Q.Unknown,disk1TotalSize:L[1].TotalSize||0,disk2FreeSpace:L[2].FreeSpace||0,disk2MediumType:L[2].MediumType||g.u_Q.Unknown,disk2TotalSize:L[2].TotalSize||0,displayCount:X.Display.length||0,displayDetails:this.getDisplayDetails(X.Display),routerMacAddress:X.Network&&X.Network.RouterMACAddress?X.Network.RouterMACAddress.substring(0,8).toUpperCase():"Unknown",platform:this.getPlatformType(X.Platform)||g.zhv.Unknown,clientVariant:this.getClientVariantType(this.appConfig.build.variant),launchSource:this.getLaunchSource(),userAgent:X.BrowserName+" "+X.BrowserVersion||o.kQ,dxVersion:X.DxVersion||"",browserName:X.BrowserName||o.kQ,browserVersion:X.BrowserVersion||o.kQ,confidenceInBrowser:o.ng.isCefPlatform()?99:X.ConfidenceInBrowser,isBrowserForged:o.ng.isCefPlatform()?g.wye.UNDEFINED:X.IsBrowserForged?g.wye.TRUE:g.wye.FALSE,systemInfoGuid:j}):this.logger.error("No System Information"),Z}getSystemInformationForTelemetry(){return(0,m.aj)([this.systemInfoService.getSystemInfo(),this.systemInfoService.getSystemInfoGuid()]).pipe((0,a.q)(1),(0,s.U)(([X,j])=>this.prepareSystemInfoTelemetryObject(X,j)))}getLaunchSource(){return this.gfnsdkService.isThisAGFNSDKSession()&&!this.guestModeService.isGuestMode?this.streamerTelemetryConfig.sdkClient||"Unknown":this.streamerTelemetryConfig.launchSource===g.zO5.External?"External":this.streamerTelemetryConfig.launchSource===g.zO5.GeForceNOW?"Mall":this.streamerTelemetryConfig.launchSource===g.zO5.Deeplink?"Deeplink":"Unknown"}sendLaunchUiTelemetry(){const X=new g._63({clientType:this.getClientType(),type:g.AUc.LaunchUI});this.telemetryService.push(X)}sendSystemInfoTelemetry(){this.sharedSystemInfoSub||(this.sharedSystemInfoSub=(0,y.H)(this.appConfig.jsEvents.systemInfoEventDelay).pipe((0,r.zg)(()=>this.getSystemInformationForTelemetry()),(0,p.K)(X=>(this.logger.error("Error when getting system info: ",X),(0,T.of)(null))),(0,l.b)(X=>{if((0,h.isUndefined)(X))this.logger.error("No system information found for telemetry");else{const j=new g.AGB(X);this.telemetryService.push(j),this.sendHIDTelemetry()}}),(0,t.B)())),this.sharedSystemInfoSub.subscribe()}sendSDKTelemetry(){this.gfnsdkService.getTelemetryData().subscribe(X=>{this.logger.info("Parsing sdk client events for ",X.platformName),this.logger.info(`Sending ${X.checkGFNItems.length} CheckGFN events`),this.logger.info(`Sending ${X.streamNowButtonClickItems.length} StreamNowButtonClick events`);for(const j of X.checkGFNItems)this.telemetryService.push(new g.vkU({status:j.status,timeTaken:j.timeTaken,gfnSDKVersion:j.version,gfnDLLVersion:j.dllVersion,originalTimestamp:j.originalTimestamp,originalSource:X.platformName||"Unspecified",originalCmsId:j.originalCmsId,originalShortname:j.originalShortname,originalAuthMethod:j.originalAuthMethod}));for(const j of X.streamNowButtonClickItems)this.logger.info("StreamNowButtonClick event found",this.streamerTelemetryConfig),this.telemetryService.push(new g.ig$({status:j.status,timeTaken:j.timeTaken,gfnSDKVersion:j.version,cmsId:""+this.streamerTelemetryConfig.cmsId,gameShortName:this.streamerTelemetryConfig.shortName||"",gfnDLLVersion:j.dllVersion,originalTimestamp:j.originalTimestamp,originalSource:X.platformName||"Unspecified",originalCmsId:j.originalCmsId,originalShortname:j.originalShortname,originalAuthMethod:j.originalAuthMethod,timeRemaining:j.timeRemaining,hasPartnerData:j.hasPartnerData?g.PoW.Yes:g.PoW.No,hasPartnerSecureData:j.hasPartnerSecureData?g.PoW.Yes:g.PoW.No}));this.gfnsdkService.clearTelemetryData(X)})}sendPwaTelemetry(){this.pwaService.onPWAModeChange.pipe((0,a.q)(1),(0,l.b)(X=>{if(X){this.logger.info("Sending PWA launch event");const j=new g._63({clientType:this.getClientType(),type:g.AUc.LaunchPwaUI});this.telemetryService.push(j)}})).subscribe()}sendOfflineLaunchTelemetry(){this.pwaService.checkForOfflineLaunch().subscribe(X=>{if(X){this.logger.info("Sending Offline Launch Event");const j=new g._63({clientType:this.getClientType(),type:g.AUc.CustomOfflinePage});this.telemetryService.push(j)}else this.logger.info("No offline data present")})}sendStorageUsageEvent(){if(!this.isBrowserClient)return;const X=navigator.storage;(null==X?void 0:X.estimate)?X.estimate().then(j=>{var K,Z,L,W,te,ie,Q,k;this.logger.info("Sending storage usage metrics");const oe=new g.uXL({totalQuota:null!==(K=j.quota)&&void 0!==K?K:0,totalUsage:null!==(Z=j.usage)&&void 0!==Z?Z:0,cacheUsage:null!==(W=null===(L=j.usageDetails)||void 0===L?void 0:L.caches)&&void 0!==W?W:0,indexedDBUsage:null!==(ie=null===(te=j.usageDetails)||void 0===te?void 0:te.indexedDB)&&void 0!==ie?ie:0,serviceWorkerRegistrationsUsage:null!==(k=null===(Q=j.usageDetails)||void 0===Q?void 0:Q.serviceWorkerRegistrations)&&void 0!==k?k:0});this.telemetryService.push(oe)}).catch(j=>{this.logger.error("Failed to obtain storage estimate:",j)}):this.logger.info("StorageManager#estimate is not supported. Skipping sending storage metrics")}sendLaunchTimeTelemetry(){this.deviceIdSetSubject.subscribe(()=>{const X=this.telemetryService.getLaunchUiEventSent();X||(this.sendLaunchUiTelemetry(),this.sendSystemInfoTelemetry(),this.sendSDKTelemetry(),this.sendPwaTelemetry(),this.sendOfflineLaunchTelemetry(),this.sendStorageUsageEvent(),this.telemetryService.setLaunchUiEventSent(!0)),this.sendAppLaunchTelemetrySubject.next(!X)})}getAppLaunchTelemetryObservable(){return this.sendAppLaunchTelemetrySubject.asObservable()}getPlatform(){return this.systemInfoService.getOsInformation().pipe((0,s.U)(X=>this.getPlatformType(X.Platform)),(0,w.d)(1))}getClientVariant(){return this.getClientVariantType(this.appConfig.build.variant)}sendLoginTelemetry(X,j,K,Z){const L=new g.$4G({clientType:this.getClientType(),currentScreen:K,userAction:j,status:X?g.N3X.Success:g.N3X.LoginFailed,errorDetails:X.toString(),totalMs:0,errorUri:"",serverErrorCode:""});this.telemetryService.push(L,Z)}triggerExceptionInfoUpload(X){X.logsFeedbackId=this.telemetryService.telemetrySessionId;const j={type:I.oI.UploadExceptionInfo,content:JSON.stringify(X),sender:this.getClientType()===g.BhR.MallClient?I.vS.GfnMall:I.vS.GfnStreamer,recipient:I.vS.GfnUpdater};this.logger.info("Sending IPC message:",j),this.ipcService.pushMessage(j).subscribe(K=>this.logger.info("Exception info upload triggered: ",K),K=>this.logger.error("Error triggering exception info upload: ",K))}getXRequestIdForHttpEvent(X){let j="";return X&&X.config&&X.config.headers&&X.config.headers["x-request-id"]&&(j=X.config.headers["x-request-id"]),j}getGameHierarchy(X,j){if(j)return this.indexService.getSearchHierarchy();const K=this.browseUxService.getL1PageTelemetryName();return null!=K?K:X}sendUiActionEvent(X,j){const K=new g.Hj8({actionTaken:X,uiVariant:j});this.telemetryService.push(K)}sendJoinTodayAlertDialogUiAction(X){let j;switch(X){case E.V_.Close:j=g.VHB.Close;break;case E.V_.Join:j=g.VHB.Join;break;case E.V_.Login:j=g.VHB.Login}j&&this.sendUiActionEvent(j,g.c8x.Standard)}getJoinTodayAlertDialogHierarchy(X,j){let K;switch(X){case g.CGJ.ScreenEvidencePanel:K=j;break;case g.CGJ.ScreenMarquee:K=`${g.CGJ.ScreenMallHome}`;break;default:K=""}return K&&(K=`${K}/${X}`),K}sendUserSessionEvent(X,j,K,Z,L){const W=L||this.telemetryService.getScreen(),te=new g.$4G({currentScreen:W,clientType:this.clientType,userAction:X,status:j,errorDetails:(0,G.KF)(Z,f.YM),totalMs:0,errorUri:"",serverErrorCode:""});this.telemetryService.push(te,K)}sendClickEvent(X,j,K,Z=!1,L){const W=Z?`${this.telemetryService.getScreen()}/${K}`:K,te=new g.gZv({itemType:X,itemLabel:j,hierarchy:W||"",inputSource:this.lastClickInputSource});this.telemetryService.push(te,null,L)}sendDragEvent(X,j,K,Z=!1){const L=Z?`${this.telemetryService.getScreen()}/${K}`:K,W=new g.r_X({itemType:X,itemLabel:j,hierarchy:L||""});this.telemetryService.push(W)}sendPageLoadPerfEvent(X,j=0,K=["","","","",""],Z=[0,0,0,0,0],L=[0,0,0,0,0]){let W=j;for(const ie of L)W+=ie;const te=new g.nLL({viewName:X,viewDataLoadDuration:Math.round(j),sectionOneName:K[0],sectionOneDataLoadDuration:Math.round(Z[0]),sectionOneTotalLoadDuration:Math.round(L[0]),sectionTwoName:K[1],sectionTwoDataLoadDuration:Math.round(Z[1]),sectionTwoTotalLoadDuration:Math.round(L[1]),sectionThreeName:K[2],sectionThreeDataLoadDuration:Math.round(Z[2]),sectionThreeTotalLoadDuration:Math.round(L[2]),sectionFourName:K[3],sectionFourDataLoadDuration:Math.round(Z[3]),sectionFourTotalLoadDuration:Math.round(L[3]),sectionFiveName:K[4],sectionFiveDataLoadDuration:Math.round(Z[4]),sectionFiveTotalLoadDuration:Math.round(L[4]),totalViewLoadDuration:Math.round(W)});this.telemetryService.push(te)}sendNavigationPerfEvent(){const X=window.performance.timing,j=new g.zDK({domainLookupDuration:X.domainLookupEnd-X.domainLookupStart,connectDuration:X.connectEnd-X.connectStart,requestResponseDuration:X.responseEnd-X.requestStart,responseDuration:X.responseEnd-X.responseStart,timeToFirstByte:X.responseStart-X.requestStart,pageRenderDuration:X.domComplete-X.domLoading,pageLoadDuration:X.loadEventEnd-X.fetchStart,redirectDuration:X.redirectEnd-X.redirectStart});this.telemetryService.push(j)}sendDeeplinkShareEvent(X,j,K=g.cYw.None,Z=""){const L=new g.tyl({queryParamsString:X,shareType:j,serviceName:Z,error:K});this.telemetryService.push(L)}sendDeeplinkSourceEvent(X,j){const K=new g.yVM(X);this.telemetryService.push(K,void 0,j)}sendPopUpDialogShownEvent(X){const j=new g.Tn7({name:X});this.telemetryService.push(j)}sendPopUpDialogClosedEvent(X,j,K=0,Z=0,L=g.wye.FALSE){const W=new g._js({name:X,exitTriggerPoint:j,totalMs:K,inWindowClicks:Z,scrolled:L});this.telemetryService.push(W)}sendClipboardPasteEvent(X){const j=new g.GbY({clientClipboardRead:X.clientClipboardRead,clipboardDataSent:X.clipboardDataSent,clipboardDataLength:X.clipboardDataLength,streamSessionId:X.streamSessionId||"",streamSubSessionId:X.streamSubSessionId||"",requestId:X.requestId||""});this.telemetryService.push(j)}sendPlaytesterSessionEvent(X,j,K,Z,L,W,te,ie,Q,k,oe,N){const q=new g.HUU({userAction:X,status:j,sessionId:null!=K?K:"",streamSessionId:null!=Z?Z:"",gameDeveloperName:null!=L?L:"",gameName:null!=W?W:"",gameBuildNumber:null!=te?te:"",cmsId:null!=ie?ie:"",webcamName:null!=Q?Q:"",microphoneName:null!=k?k:"",microphoneTested:null!=oe?oe:g.PoW.No,errorInfo:null!=N?N:""});return this.telemetryService.pushWithPromise(q,null,{immediateRequest:!0})}}return ye.\u0275fac=function(X){return new(X||ye)(O.LFG(o.ed),O.LFG(C.V),O.LFG(_.OA),O.LFG(f.y0),O.LFG(o.Ob),O.LFG(I.uC),O.LFG(F._c),O.LFG(V.s),O.LFG(b.nG),O.LFG(B.xB),O.LFG(U.F0),O.LFG(A.o),O.LFG(S.g),O.LFG(v.b),O.LFG(O.R0b),O.LFG(Y.No),O.LFG(se.O))},ye.\u0275prov=O.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye})()},92377:(He,de,e)=>{"use strict";e.d(de,{b:()=>T});var n=e(9170),i=e(53466),D=e(3076),m=e(2316),y=e(45765);let T=(()=>{class r{constructor(s){this.dialogService=s}exitApp(){!(0,D.fO)()||this.dialogService.showExitAppDialog().pipe((0,n.h)(s=>!0===s),(0,i.q)(1)).subscribe(s=>{(0,D.rV)()})}}return r.\u0275fac=function(s){return new(s||r)(m.LFG(y.x))},r.\u0275prov=m.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},29322:(He,de,e)=>{"use strict";e.d(de,{A:()=>D,b:()=>m});var n=e(202),D=(()=>{return(y=D||(D={}))[y.Greater=0]="Greater",y[y.Lesser=1]="Lesser",y[y.Equal=2]="Equal",D;var y})();class m{constructor(T,r="."){if(this.versionStr=T,this.delimiter=r,(0,n.isNil)(T)||0===T.length)throw new Error("invalid version string: "+T);this.versionComponents=[];const a=T.split(r);for(const s of a)this.versionComponents.push(+s)}compare(T){const r=Math.min(this.versionComponents.length,T.versionComponents.length);for(let a=0;a<r;a++)if(this.versionComponents[a]!==T.versionComponents[a])return this.versionComponents[a]>T.versionComponents[a]?D.Lesser:D.Greater;return this.versionComponents.length>T.versionComponents.length?D.Lesser:this.versionComponents.length<T.versionComponents.length?D.Greater:D.Equal}compareMajorVersion(T){const r=Math.min(this.versionComponents.length,T.versionComponents.length);for(let a=0;a<r-1;a++)if(this.versionComponents[a]!==T.versionComponents[a])return this.versionComponents[a]>T.versionComponents[a]?D.Lesser:D.Greater;return this.versionComponents.length>T.versionComponents.length?D.Lesser:this.versionComponents.length<T.versionComponents.length?D.Greater:D.Equal}toString(){return this.versionStr}}},56409:(He,de,e)=>{"use strict";e.d(de,{Z:()=>P});var n=e(202),i=e(80226),D=e(42720),m=e(61486),y=e(8117),T=e(81134),r=e(41618),a=e(33927),s=e(85816),p=e(18293),l=e(67202),t=e(43124),w=e(2984),h=e(6484),u=e(67067),o=e(73734),f=e(73159),c=e(3076),g=e(2316),I=e(12556),G=e(57390),x=e(60086),E=e(14624);let P=(()=>{class v{constructor(C,_,F,V,b,B,U,A,S){this.appConfig=C,this.loggingService=_,this.sharedStorageService=F,this.idmService=V,this.telemetryService=b,this.telemetryUtilService=B,this.gfnSdkService=U,this.idmIpcService=A,this.bridgeService=S,this.blockName="userConsentInfo",this.userConsentExpirationHours=24,this.isClientGdprConsentSet=!1,this.isManualLogin=null,this.userConsentSubject=new i.t(1),this.deviceConsentSubject=new i.t(1),this.logger=this.loggingService.getLogger("user-consent.service"),this.initLoginStatusSubscription(),this.sendEventDataElementsToRagnarok()}initUserConsent(){this.sharedStorageService.readBlock(this.blockName).pipe((0,a.U)(C=>!(0,n.isEmpty)(C)&&((0,n.isNil)(C.userId)||(0,n.isEmpty)(C.userId)?(this.logger.event("no stored consent setDefaultClientConsent",C.userConsent),this.telemetryService.setDefaultClientConsent(C.userConsent)):this.telemetryService.setUserConsent([C]),!0))).subscribe(C=>{C?this.logger.info("Consent read from userConsentInfo block sent to jsevents for initialization."):this.logger.error("No client consent sent to jsevents.")},C=>{this.logger.error("Reading UserConsentInfo block failed with error: ",C)})}writeUserConsent(C){return this.sharedStorageService.writeBlock(this.blockName,C,!0)}getDeviceConsent$(){return this.deviceConsentSubject.asObservable()}getUserConsent$(){return this.userConsentSubject.asObservable()}fetchAndUpdateUserConsent(C){return(0,D.D)([this.sharedStorageService.readBlock(this.blockName),this.telemetryService.getDefaultClientConsentObserable()]).pipe((0,s.zg)(([_,F])=>(_=this.refreshExpiryTime(_),this.updateUserConsentTelemetry(_,C),this.logger.info("Send app launch telemetry for valid userId"),this.telemetryUtilService.sendLaunchTimeTelemetry(),this.setExpiryIntervalSubscription(C),this.userConsentSubject.next(_.userConsent),this.writeUserConsent(_))))}sendEventDataElementsToRagnarok(){h.ng.isBrowserPlatform()&&(this.telemetryService.getCommonData$().pipe((0,s.zg)(C=>{const _={commonData:C,config:{server:this.appConfig.jsEvents.server,version:this.appConfig.jsEvents.version}};return _.commonData.sentTs=void 0,_.commonData.events=void 0,this.bridgeService.executeCommand(w.Gh.Gfn.Streaming.UpdateEventDataElements,_)})).subscribe(),(0,m.aj)([this.getDeviceConsent$(),this.getUserConsent$()]).pipe((0,s.zg)(([C,_])=>{const F={commonData:{}};return F.commonData.deviceGdprFuncOptIn=C.functional,F.commonData.deviceGdprTechOptIn=C.technical,F.commonData.deviceGdprBehOptIn=C.behavioral,F.commonData.gdprFuncOptIn=_.functional,F.commonData.gdprTechOptIn=_.technical,F.commonData.gdprBehOptIn=_.behavioral,this.bridgeService.executeCommand(w.Gh.Gfn.Streaming.UpdateEventDataElements,F)})).subscribe(),this.telemetryService.getExperiments$().pipe((0,s.zg)(C=>this.bridgeService.executeCommand(w.Gh.Gfn.Streaming.UpdateEventDataElements,{experiments:C}))).subscribe())}createConsentBlock(C){const _=(0,n.merge)({},t.XA);return _.userConsent=C,_}createConsentBlockWithAuthInfo(C,_){const F=(0,n.merge)(t.XA,{userId:C.userId,externalUserId:C.externalUserId,idpId:C.idpId});return F.userConsent=_,F}initLoginStatusSubscription(){this.idmService.cachedUser.pipe((0,s.zg)(C=>(this.isManualLogin=!C.data.isAuthenticated,(0,m.aj)([this.gfnSdkService.getAuthInfo(),this.idmService.accountStatusChanged]).pipe((0,s.zg)(([F,V])=>{let b=V;if(!b.isAuthenticated&&this.checkIntervalSubscription)this.checkIntervalSubscription.unsubscribe();else if(b.isAuthenticated||F.authType===f.Gr.JWT){let B={userId:b.userId,externalUserId:b.externalId,idpId:b.idpId};return F.authType===f.Gr.JWT&&(B={userId:F.userId,externalUserId:F.externalUserId,idpId:F.idpId},b=Object.assign(Object.assign({},b),{userId:F.userId,externalId:F.externalUserId,idpId:F.idpId})),(""===b.idpId||(0,n.isNil)(b.idpId))&&(B={userId:t.wy.Undefined,externalUserId:b.userId,idpId:t.wy.Undefined}),this.telemetryService.setEventsCommonData(B,!0),this.fetchAndUpdateUserConsent(b)}return b.isAuthenticated?y.E:this.updateUserConsentInfoOnLogout()})))),(0,p.K)(C=>(this.logger.error("Error in getting/setting consent data on user refresh, Setting to default",C),(0,T.of)(!1)))).subscribe(C=>{this.logger.info("Updated user consent result successfully:",C),this.idmIpcService.sendLoginStatusChange()})}isExpired(C){let _=!0;const F=new Date;if(C&&C.expiryTime){const V=new Date(C.expiryTime);this.logger.info("Expiry time "+V+" now "+F),_=V<F}return _}refreshExpiryTime(C){if((0,n.isNil)(C.expiryTime)||this.telemetryUtilService.getClientType()!==u.BhR.StreamingClient){const _=new Date;_.setDate(_.getDate()+1),C.expiryTime=_.toISOString(),this.logger.event("LocalConsent expiryTime updated: ",C)}return C}updateUserConsentTelemetry(C,_){_.isAuthenticated&&(C.userConsent=(0,o.WF)(_),C.userId=_.userId,C.externalUserId=_.externalId,C.idpId=_.idpId,this.telemetryService.setUserConsent([C]))}checkConsentInterval(){return this.sharedStorageService.readBlock(this.blockName).pipe((0,s.zg)(C=>{if(!(0,n.isEmpty)(C))return this.isExpired(C)?this.idmService.refreshUser().pipe((0,l.h)(!0)):(this.logger.info("Consent data is still valid"),this.updateUserConsentTelemetry(C,this.currentUser),y.E)}))}setExpiryIntervalSubscription(C){if(this.currentUser=C,this.telemetryUtilService.getClientType()!==u.BhR.StreamingClient){const _=(0,r.F)(60*this.userConsentExpirationHours*60*1e3);this.checkIntervalSubscription=_.pipe((0,s.zg)(()=>this.checkConsentInterval())).subscribe()}else this.logger.info("Not checking consent info on regular intervals for streamer")}setUpJarvisUserChangedSubscription(){this.idmService.userDataChanged.subscribe(C=>{!C.newUser.isAuthenticated&&!this.telemetryService.getLaunchUiEventSent()&&(this.logger.info("No user present, send launch time telemetry for undefined userId"),this.telemetryUtilService.sendLaunchTimeTelemetry())})}setDefaultConsentData(C){return this.logger.trace(c.y$.UserDetails,c.Px.UserInfo,"User consent is Behavioral:"+C.behavioral+" Functional:"+C.functional+" Technical:"+C.technical),this.isClientGdprConsentSet?(this.logger.info("Client GDPR consent is already set."),(0,T.of)(!1)):(this.logger.event("client consent not yet set - setDefaultClientConsent",C),this.telemetryService.setDefaultClientConsent(C),this.setUpJarvisUserChangedSubscription(),this.isClientGdprConsentSet=!0,this.deviceConsentSubject.next(C),this.writeUserConsent(this.createConsentBlock(C)))}setAnonUserConsentData(C){return this.logger.event("client consent not yet set - setAnonUserConsentData",C),this.telemetryService.setDefaultClientConsent(C),this.setUpJarvisUserChangedSubscription(),this.isClientGdprConsentSet=!0,this.gfnSdkService.getAuthInfo().pipe((0,s.zg)(_=>this.writeUserConsent(this.createConsentBlockWithAuthInfo(_,C))))}getAnonUserConsentData(){return this.sharedStorageService.readBlock(this.blockName).pipe((0,s.zg)(C=>(0,T.of)(C)))}updateUserConsentInfoOnLogout(){return this.sharedStorageService.readBlock(this.blockName).pipe((0,s.zg)(C=>(0,n.isEmpty)(C)?(this.logger.warn("UserConsentInfo section is empty in sharedstorage"),(0,T.of)(!1)):(C.userConsent=t.l3,delete C.userId,C.externalUserId&&delete C.externalUserId,C.idpId&&delete C.idpId,C.expiryTime&&delete C.expiryTime,this.userConsentSubject.next(C.userConsent),this.writeUserConsent(C))))}ngOnDestroy(){this.checkIntervalSubscription&&this.checkIntervalSubscription.unsubscribe()}}return v.\u0275fac=function(C){return new(C||v)(g.LFG(I.VKt),g.LFG(h.ed),g.LFG(G.OA),g.LFG(x.No),g.LFG(t.y0),g.LFG(u.wU6),g.LFG(f.s),g.LFG(E.i),g.LFG(h.dF))},v.\u0275prov=g.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},31454:(He,de,e)=>{"use strict";e.d(de,{pU:()=>n,tr:()=>y,a9:()=>m,qr:()=>T.qr,X4:()=>T.X4,h6:()=>T.h6,Or:()=>T.Or,TW:()=>T.TW,yY:()=>T.yY,j7:()=>T.j7,tE:()=>i,_6:()=>T._6,Q2:()=>T.Q2,Jk:()=>T.Jk});var n=(()=>{return(r=n||(n={}))[r.Up=0]="Up",r[r.Down=1]="Down",r[r.Left=2]="Left",r[r.Right=3]="Right",r[r.Enter=4]="Enter",r[r.Escape=5]="Escape",n;var r})();function i(){var r;return null!==(r=document.activeElement)&&void 0!==r?r:document}function m(r,a,s){r instanceof HTMLIFrameElement||r.dispatchEvent(new KeyboardEvent(a,Object.assign(Object.assign({},function(r){let a,s;switch(r){case n.Up:a="ArrowUp",s=38;break;case n.Down:a="ArrowDown",s=40;break;case n.Left:a="ArrowLeft",s=37;break;case n.Right:a="ArrowRight",s=39;break;case n.Enter:a="Enter",s=13;break;case n.Escape:a="Escape",s=27}return{key:a,keyCode:s}}(s)),{view:window,bubbles:!0,cancelable:!0})))}function y(r){r instanceof HTMLIFrameElement||r.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}var T=e(73734)},73734:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Or:()=>formatTimeConfig,TW:()=>formatTimeString,h6:()=>formatHexString,X4:()=>extractCmsId,WF:()=>formatConsentData,Jk:()=>removeSpacesInString,j7:()=>formatVanityUrlForDisplay,yY:()=>formatUserCodeForDisplay,Q2:()=>getUserFacingOSName,_6:()=>getUserFacingDeviceType,qr:()=>evalCss});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(202),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),moment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2281),moment__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__),crimson__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6484),js_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43124);const HTTP_RESPONSE_STATES={UNDEFINED_RESPONSE:"undefined-response",NULL_URL:"null-url"},formatTimeConfig={HOURS:"hours",MINUTES:"minutes",SECONDS:"seconds"};function formatTimeString(He,de){const e=moment__WEBPACK_IMPORTED_MODULE_1__.duration(He,"seconds"),n=[];if(-1!==de.indexOf(formatTimeConfig.HOURS)){const i=leftPad(e.hours().toString(),"0",2);n.push(i)}if(-1!==de.indexOf(formatTimeConfig.MINUTES)){const i=leftPad(e.minutes().toString(),"0",2);n.push(i)}if(-1!==de.indexOf(formatTimeConfig.SECONDS)){const i=leftPad(e.seconds().toString(),"0",2);n.push(i)}return n.join(":")}function formatHexString(He){if(Number.isInteger(He)){let de=(He>>>=0).toString(16).toUpperCase();return de=leftPad(de,"0",8),"0x"+de}return""}function leftPad(He,de,e){const n=e-He.length;return n>0?Array(n+1).join(de)+He:He}function hasValue(He,de){return!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isNil)(He)}function getUrl(He,de){let e="";return e=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isUndefined)(He)?de+"/"+HTTP_RESPONSE_STATES.UNDEFINED_RESPONSE:(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isNull)(He.url)?de+"/"+HTTP_RESPONSE_STATES.NULL_URL:He.url,e}function getHttpResponseStatus(He){let de;return de=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isUndefined)(He)?HTTP_RESPONSE_STATES.UNDEFINED_RESPONSE:He.status,de}function validateObject(He,de,e=hasValue){const n=!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isNil)(He);return(0,lodash__WEBPACK_IMPORTED_MODULE_0__.reduce)(de,(i,D)=>i&&e(He[D],i),n)}function validateJson(He,de,e){const n={isValid:!1,data:null,error:""};try{n.data=JSON.parse(He),n.isValid=!0}catch(i){n.error=i.message}return n.isValid=n.isValid&&validateObject(n.data,de,e),n}function extractCmsId(He,de){const e=He.search("cmsId");if(e<0)return de.info("cmsId not found, ignoring event"),null;let n=He.substring(e),i=n.split("&");return i.length<=0?(de.error("cmsId found, but string splitting on & returned 0 strings"),null):(n=i[0],i=n.split("="),i.length<=1?(de.error("cmsId key found, but no value was found"),null):+i[1])}function formatConsentData(He){const de=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.merge)({},js_events__WEBPACK_IMPORTED_MODULE_3__.l3);return He&&(de.technical=He.technicalConsent,de.behavioral=He.behavioralConsent),de}function removeSpacesInString(He){return He.replace(/\s/g,"")}function formatVanityUrlForDisplay(He){return He.replace(/(^\w+:|^)\/\//,"")}function formatUserCodeForDisplay(He){if(He.length<6)return He;const de=Math.round(He.length/2);return He.slice(0,de)+" - "+He.slice(de)}function getUserFacingOSName(He){switch(He){case crimson__WEBPACK_IMPORTED_MODULE_2__.wi.WebOS:return"webOS";case crimson__WEBPACK_IMPORTED_MODULE_2__.wi.Tizen:return"Tizen";case crimson__WEBPACK_IMPORTED_MODULE_2__.wi.XBox:return"Xbox";case crimson__WEBPACK_IMPORTED_MODULE_2__.wi.SteamOS:return"SteamOS";default:return}}function getUserFacingDeviceType(He){switch(He){case crimson__WEBPACK_IMPORTED_MODULE_2__.z7.TV:return"TV";case crimson__WEBPACK_IMPORTED_MODULE_2__.z7.Console:return"Console";default:return}}function evalCss(expr){return eval(expr.trim().replace(/calc/g,"").replace(/px/g,"").replace(/100vw/g,window.innerWidth.toString()).replace(/100vh/g,window.innerHeight.toString()).replace(/[^-()\d/*+.]/g,""))}},91489:(He,de,e)=>{"use strict";e.d(de,{$_:()=>l,Em:()=>r});var n=e(94085),i=e(34361),D=e(41618),m=e(81134),y=e(53466),T=e(67202),r=(()=>{return(t=r||(r={})).Timeout="Timeout",t.Cleared="Cleared",r;var t})(),s=e(2316),p=e(6484);let l=(()=>{class t{constructor(h){this.logger=h.getLogger("GfnWebWorkerService")}initialize(){if("undefined"!=typeof Worker){const h=new Worker(e.tu(new URL(e.p+e.u(144),e.b)),{type:void 0,name:"gfn-web"});this.gfnWorker=(0,n.Ud)(h)}else this.logger.warn("Web workers not supported, will use fallback mechanism");return this.gfnWorker}hash(h){return(0,i.D)(this.gfnWorker.sha1(h))}intervalHandler(h,u){return this.gfnWorker?(0,i.D)(this.gfnWorker.registerTimer(h,(0,n.sj)(u))):h.startTimer?(this.logger.info("Fallback mechanism triggered, starting timer"),this.timer$=(0,D.F)(h.timeout).pipe((0,y.q)(1),(0,T.h)(r.Timeout)),this.timer$):(this.logger.info("Fallback mechanism triggered, clearing timer"),this.timer$=null,(0,m.of)(r.Cleared))}}return t.\u0275fac=function(h){return new(h||t)(s.LFG(p.ed))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},28723:(He,de,e)=>{"use strict";e.d(de,{W:()=>n.W});var n=e(22530)},22530:(He,de,e)=>{"use strict";e.d(de,{W:()=>m});var n=e(2316),i=e(57390);const D="defaultZone";let m=(()=>{class y{constructor(r){this.sharedStorage=r}setDefaultZone(r){return this.sharedStorage.writeBlock(D,r)}getDefaultZone(){return this.sharedStorage.readBlock(D)}}return y.\u0275fac=function(r){return new(r||y)(n.LFG(i.OA))},y.\u0275prov=n.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},12556:(He,de,e)=>{"use strict";e.d(de,{hB7:()=>pn.hB,vw4:()=>pn.vw,rmE:()=>ti.rm,dCY:()=>ri.dC,X92:()=>Gn.X9,wvY:()=>nn,gK6:()=>Bn.gK,wye:()=>ge.wye,OMY:()=>bs.O,uu8:()=>ni.uu,qBq:()=>ri.qB,F0r:()=>ni.F0,lzt:()=>ge.lzt,x5h:()=>Yo.x5,ztj:()=>ge.ztj,QuF:()=>ge.QuF,aGN:()=>ge.aGN,mpd:()=>ti.mp,wMv:()=>ti.wM,BhR:()=>ge.BhR,Ktt:()=>ro,YvH:()=>qa,$lO:()=>_r.$l,_P4:()=>_r._P,Ujf:()=>Q,uE5:()=>ti.uE,hEi:()=>at.hE,hD7:()=>at.hD,reR:()=>ge.reR,VKt:()=>_n.VK,OX4:()=>wt,Gxu:()=>xi.Gx,HOt:()=>Ca,f0:()=>hn,X5k:()=>ts,gOl:()=>ti.gO,EG8:()=>Bn.EG,lJR:()=>Ri,KNS:()=>ol,cYw:()=>ge.cYw,gIP:()=>Us.g,$Yn:()=>ti.$Y,eKR:()=>ti.eK,EMz:()=>ti.EM,NX4:()=>ge.NX4,iJP:()=>ti.iJ,dvL:()=>Kt.dv,Vvs:()=>Gn.Vv,BPY:()=>ci.BP,XzU:()=>ge.XzU,xAy:()=>qr.x,rVM:()=>yi.rV,f1U:()=>yi.f1,vAT:()=>yi.vA,hHP:()=>bn,hmT:()=>vo,qMw:()=>Gn.qM,l2p:()=>Gn.l2,vq_:()=>Gn.vq,BHV:()=>Gn.BH,D7$:()=>Gn.D7,mJI:()=>$n.mJ,vzH:()=>Ba,Foe:()=>ci.Fo,N3X:()=>ge.N3X,$TJ:()=>Bi,zu9:()=>qn.zu,llk:()=>$n.ll,CzD:()=>ti.Cz,OY9:()=>_n.OY,g7J:()=>ge.g7J,YyK:()=>ge.YyK,yOt:()=>ge.yOt,ryx:()=>ge.ryx,HyT:()=>ge.HyT,tZp:()=>ge.tZp,AVX:()=>ge.AVX,NlQ:()=>ge.NlQ,MsO:()=>ge.MsO,hAb:()=>ge.hAb,DUy:()=>ge.DUy,_LZ:()=>ge._LZ,DCd:()=>ge.DCd,CK8:()=>ti.CK,V89:()=>Ga,zO5:()=>ge.zO5,FRL:()=>ge.FRL,NuE:()=>ge.NuE,tDF:()=>za.t,BwP:()=>$n.Bw,U4l:()=>ge.U4l,Y_M:()=>ge.Y_M,xQn:()=>tl,sYX:()=>ge.sYX,nrY:()=>ge.nrY,dgl:()=>Bt,N0y:()=>ri.N0,fFR:()=>ve.fF,Y6V:()=>ri.Y6,yxz:()=>ri.yx,m$M:()=>Ua,dbe:()=>Bn.db,lUL:()=>Qn,Drq:()=>tr,PyH:()=>ge.PyH,$_t:()=>Fe.$_,rIG:()=>Xn.r,o15:()=>Lt.o,et_:()=>ti.et,AUc:()=>ge.AUc,_63:()=>ge._63,T6w:()=>Kt.T6,ZB5:()=>ys,No2:()=>Kt.No,CQ2:()=>ir,VRd:()=>rt.VR,oIn:()=>Hn.oI,MxV:()=>Hn.Mx,uCR:()=>Hn.uC,vSX:()=>Hn.vS,V__:()=>ri.V_,xld:()=>ri.xl,cPW:()=>ge.cPW,Bbu:()=>ge.Bbu,sNt:()=>ge.sNt,zcQ:()=>Ho,Etx:()=>ti.Et,pvZ:()=>ti.pv,LMI:()=>ge.LMI,GVq:()=>ge.GVq,qmX:()=>ge.qmX,W9g:()=>ge.W9g,Mbw:()=>ge.Mbw,DL8:()=>ge.DL8,_cC:()=>ge._cC,bOD:()=>ge.bOD,qql:()=>ri.qq,AB$:()=>$n.AB,MNE:()=>bi,_Rm:()=>qn._R,PT0:()=>qn.PT,l6l:()=>ci.l6,pRd:()=>qn.pR,$e1:()=>qn.$e,JYZ:()=>ci.JY,fIQ:()=>ci.fI,XS0:()=>ze.XS,ZPL:()=>Bn.ZP,uZ6:()=>Fa.u,U5H:()=>tn,Irw:()=>rt.Ir,Eum:()=>Jt,Yk9:()=>ge.Yk9,R2C:()=>Ze.R,eTr:()=>rt.eT,ASW:()=>rt.AS,DYb:()=>ge.DYb,nzn:()=>$t,DL7:()=>vr,R76:()=>ni.R7,PTF:()=>ni.PT,HKp:()=>Pe.H,u4N:()=>Pe.u,ZCG:()=>pn.ZC,BgF:()=>ge.BgF,Y7V:()=>ge.Y7V,iDX:()=>pn.iD,qMk:()=>ja,hGQ:()=>pn.hG,UJ:()=>ns.UJ,nG5:()=>ns.nG,$3D:()=>$n.$3,whE:()=>$n.wh,QUw:()=>xi.QU,Ilb:()=>ni.Il,Fwf:()=>ni.Fw,unb:()=>ve.un,g7O:()=>ti.g7,S77:()=>Wr,Q0y:()=>el.Q,Xj5:()=>ge.Xj5,p3A:()=>ge.p3A,ItH:()=>ge.ItH,yD3:()=>Bn.yD,M1b:()=>Bn.M1,oWM:()=>ni.oW,Ad8:()=>ni.Ad,K23:()=>ni.K2,XHw:()=>ge.XHw,XPX:()=>ge.XPX,VIQ:()=>ge.VIQ,V5e:()=>gi,VHe:()=>at.VH,cFU:()=>xi.cF,ePW:()=>xi.eP,WM6:()=>Zi,NS5:()=>_o,Ran:()=>ge.Ran,s$G:()=>mo.s,MDl:()=>Bn.MD,zrw:()=>Bn.zr,JrW:()=>Bn.Jr,DIV:()=>Bn.DI,CGJ:()=>ge.CGJ,mw3:()=>ze.mw,OmM:()=>ni.Om,QZM:()=>Bn.QZ,nau:()=>Bn.n,gbG:()=>Bn.gb,zVP:()=>ti.zV,BqE:()=>Bn.Bq,fyj:()=>Bn.fy,HS8:()=>ai,elb:()=>os,E5O:()=>ge.E5O,pDK:()=>ge.pDK,GKb:()=>Bn.GK,V9P:()=>Bn.V9,xAh:()=>qn.xA,$cB:()=>qn.$c,EvZ:()=>ti.Ev,wN:()=>Ci,FR5:()=>Wa,_G:()=>ge._G,X02:()=>ge.X02,T44:()=>ge.T44,PoW:()=>ge.PoW,wU6:()=>ge.wU6,ByO:()=>$n.By,YUT:()=>$n.YU,bPm:()=>il.b,JnX:()=>nl,$Uz:()=>ni.$U,uVS:()=>ri.uV,LB$:()=>Eo.LB,rHN:()=>Eo.rH,h6o:()=>Eo.h6,e_2:()=>ri.e_,GMF:()=>ei,WOA:()=>jn,_87:()=>Bn._8,nnJ:()=>ve.nn,Vwu:()=>ge.Vwu,ZZY:()=>Ke.Z,Tn6:()=>Gn.Tn,OAB:()=>Bn.OA,ef6:()=>ge.ef6,uaH:()=>Gi.u,WIQ:()=>Xa.W,k2x:()=>Yn,zJp:()=>ve.zJ,qrs:()=>wn.qr,lWt:()=>Yo.lW,X4o:()=>wn.X4,hcy:()=>Yo.hc,h6z:()=>wn.h6,Or7:()=>wn.Or,TWU:()=>wn.TW,cep:()=>Yo.ce,n6x:()=>ve.n6,wIc:()=>ve.wI,MAX:()=>ve.MA,J$C:()=>Yo.J$,U19:()=>qn.U1,Jn8:()=>qn.Jn,A8q:()=>ve.A8,bY:()=>ve.bY,IGn:()=>ve.IG});var n=e(54364),i=e(66660),D=e(1707),m=e(58283),y=e(22213),T=e(61786);var a=e(43124);const s={PopUpDialogShown:{name:"PopUpDialogShown",gdprLevel:a.KM.Functional},PopUpDialogClosed:{name:"PopUpDialogClosed",gdprLevel:a.KM.Technical}};var p=(()=>{return(J=p||(p={})).UNDEFINED="UNDEFINED",J.TRUE="TRUE",J.FALSE="FALSE",p;var J})(),l=(()=>{return(J=l||(l={})).App_Exit="App_Exit",J.Dialog_Closed="Dialog_Closed",J.Goto_Settings="Goto_Settings",l;var J})(),t=(()=>{return(J=t||(t={})).Release_Highlights="Release_Highlights",J.Account_Link_Required="Account_Link_Required",J.Account_Link_Expired="Account_Link_Expired",J.Account_Link_Expires_Today="Account_Link_Expires_Today",J.Account_Link_Expires_Soon="Account_Link_Expires_Soon",J.Unknown="Unknown",t;var J})();class w extends a.MW{constructor(Oe){super(Oe),this.name=s.PopUpDialogShown.name,this.gdprLevel=s.PopUpDialogShown.gdprLevel}}class h extends a.MW{constructor(Oe){super(Oe),this.name=s.PopUpDialogClosed.name,this.gdprLevel=s.PopUpDialogClosed.gdprLevel}}var u=e(202),o=e(2316),f=e(6484),c=e(87335),g=e(63806),I=e(12204),G=e(30582),x=e(89460),E=e(80181),P=e(70781),v=e(52529),O=e(1124),C=e(6381),_=e(84454);function F(J,Oe){1&J&&(o.TgZ(0,"div",5),o._UZ(1,"mat-progress-spinner",6),o.qZA())}function V(J,Oe){if(1&J){const d=o.EpF();o.ynx(0),o.TgZ(1,"div",9),o.TgZ(2,"i",10),o._uU(3,"info"),o.qZA(),o.TgZ(4,"p",11),o._uU(5),o.ALo(6,"translate"),o.qZA(),o.qZA(),o.TgZ(7,"button",12),o.NdJ("click",function(){return o.CHM(d),o.oxw(3).closeDialog()}),o._uU(8),o.ALo(9,"translate"),o.qZA(),o.BQk()}if(2&J){const d=o.oxw(3);o.xp6(5),o.hij(" ",o.lcZ(6,2,d.articleDataParams.noInformationAvailableTxt)," "),o.xp6(3),o.hij(" ",o.lcZ(9,4,d.articleDataParams.closeTxt)," ")}}function b(J,Oe){if(1&J&&(o.TgZ(0,"span",22),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&J){const d=o.oxw(4);o.xp6(1),o.Oqu(o.lcZ(2,1,d.articleDataParams.subTitle))}}function B(J,Oe){1&J&&o._UZ(0,"div",23)}function U(J,Oe){if(1&J&&(o._UZ(0,"span",26),o.ALo(1,"trustAsHtml")),2&J){const d=o.oxw(5);o.Q6J("innerHTML",o.lcZ(1,1,d.articleDataParams.content),o.oJD)}}function A(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"mat-dialog-content",24),o.NdJ("scroll",function(ce){return o.CHM(d),o.oxw(4).onScroll(ce)}),o.YNc(1,U,2,3,"span",25),o.qZA()}if(2&J){const d=o.oxw(4);o.xp6(1),o.Q6J("ngIf",d.articleDataParams.content)}}function S(J,Oe){1&J&&o._UZ(0,"div",27)}function Y(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"div",13),o.TgZ(1,"span",14),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"div",15),o.TgZ(5,"mat-icon",16),o.NdJ("click",function(){return o.CHM(d),o.oxw(3).closeDialog()}),o.qZA(),o.qZA(),o.qZA(),o._UZ(6,"mat-divider"),o.YNc(7,b,3,3,"span",17),o.TgZ(8,"div",18),o.YNc(9,B,1,0,"div",19),o.qZA(),o.YNc(10,A,2,1,"mat-dialog-content",20),o.YNc(11,S,1,0,"div",21)}if(2&J){const d=o.oxw(3);o.xp6(2),o.Oqu(o.lcZ(3,5,d.articleDataParams.title)),o.xp6(5),o.Q6J("ngIf",d.articleDataParams.subTitle),o.xp6(2),o.Q6J("ngIf",d.showTopOverlay),o.xp6(1),o.Q6J("ngIf",!d.error),o.xp6(1),o.Q6J("ngIf",d.showBottomOverlay)}}function se(J,Oe){if(1&J&&(o.TgZ(0,"div"),o.YNc(1,V,10,6,"ng-container",7),o.YNc(2,Y,12,7,"ng-template",null,8,o.W1O),o.qZA()),2&J){const d=o.MAs(3),R=o.oxw(2);o.xp6(1),o.Q6J("ngIf",R.error)("ngIfElse",d)}}function fe(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"div",2),o.NdJ("click",function(){return o.CHM(d),o.oxw().OnDialogClick()}),o.YNc(1,F,2,0,"div",3),o.YNc(2,se,4,2,"div",4),o.qZA()}if(2&J){const d=o.oxw();o.Q6J("ngClass",d.articleDataParams.style),o.xp6(1),o.Q6J("ngIf",d.waiting),o.xp6(1),o.Q6J("ngIf",!d.waiting)}}let $=(()=>{class J{constructor(d,R,ce,_e,Le,Re){this.el=d,this.telemetryService=ce,this.applicationLifetimeService=_e,this.dialogRef=Le,this.articleDataParams=Re,this.waiting=!0,this.loadingContent=!0,this.showBottomOverlay=!1,this.showTopOverlay=!1,this.showDialog=!1,this.maxScrollPercent=0,this.errorTimeoutPromise=null,this.dialogShownStartTime=0,this.dialogClickedCount=0,this.isTelemetrySent=!1,this.logger=R.getLogger("information-dialog"),this.logger.info("component created"),Le.disableClose=!0}onKeyUp(){this.closeDialog()}ngOnInit(){this.waiting=!0,this.articleDataParams.style="article-content",this.articleSubscription=this.articleDataParams.getArticleCallback().subscribe(d=>{this.waiting=!1,this.dialogShownStartTime=Date.now(),d&&d.body?(this.articleDataParams.title=d.title,this.articleDataParams.subTitle=d.subTitle,this.articleDataParams.content=d.body,this.articleDataParams.style=d.style,this.showBottomOverlay=!0,this.currentDialogName=this.articleDataParams.dialogType,this.showDialog=!0,this.sendDialogShownTelemetry()):(this.error=!0,this.logger.error("get article returned null"))},d=>{this.waiting=!1,this.error=!0,this.logger.error("get article information failed with error: ",d),"1"!==this.articleDataParams.isInstallationScenario||(0,u.isNil)(d.status)?this.showDialog=!0:this.dialogRef.close(),!(0,u.isNil)(this.dialogRef)&&this.articleDataParams.autoCloseOnError&&(this.errorTimeoutPromise=setTimeout(()=>{this.errorTimeoutPromise=null,this.dialogRef.close()},3e3))}),this.applicationLifetimeService.addWorkOnShutdown(()=>new T.y(d=>{d.next(this.sendDialogClosedTelemetry(l.App_Exit)),d.complete()}))}onScroll(d){d.stopPropagation(),d.preventDefault();const R=Math.round((d.target.scrollTop+d.target.clientHeight)/d.target.scrollHeight*100);R>this.maxScrollPercent&&(this.maxScrollPercent=R),setTimeout(()=>{this.showTopOverlay=d.target.scrollTop>0,this.showBottomOverlay=R<100})}closeDialog(){this.dialogRef.close(),this.sendDialogClosedTelemetry(l.Dialog_Closed)}sendDialogShownTelemetry(){const d=new w({name:this.currentDialogName||t.Unknown});this.telemetryService.push(d)}sendDialogClosedTelemetry(d){if(!this.error&&!this.isTelemetrySent){const R=new h({name:this.currentDialogName||t.Unknown,totalMs:0,scrolled:0!==this.maxScrollPercent?p.TRUE:p.FALSE,inWindowClicks:this.dialogClickedCount,exitTriggerPoint:d});this.telemetryService.push(R,this.dialogShownStartTime,{immediateRequest:!0}),this.isTelemetrySent=!0}}OnDialogClick(){this.dialogClickedCount++}ngOnDestroy(){this.logger.info("destroying article-content dialog"),clearTimeout(this.errorTimeoutPromise),this.articleSubscription&&this.articleSubscription.unsubscribe()}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(o.SBq),o.Y36(f.ed),o.Y36(a.y0),o.Y36(c.Ll),o.Y36(y.so),o.Y36(y.WI))},J.\u0275cmp=o.Xpm({type:J,selectors:[["nv-information-dialog"]],hostBindings:function(d,R){1&d&&o.NdJ("keyup.esc",function(){return R.onKeyUp()},!1,o.Jf7)},decls:2,vars:3,consts:[["ngClass.iphone","small-screen","nvTrapFocus",""],["fxLayout","column","class","article-dialog",3,"ngClass","click",4,"ngIf"],["fxLayout","column",1,"article-dialog",3,"ngClass","click"],["fxFlex","","fxFill","","fxLayoutAlign","center center","class","waiting-overlay",4,"ngIf"],[4,"ngIf"],["fxFlex","","fxFill","","fxLayoutAlign","center center",1,"waiting-overlay"],["id","progressIndicator","color","accent","mode","indeterminate","strokeWidth","5","diameter","35","value","15",1,"mat-accent"],[4,"ngIf","ngIfElse"],["hasInfo",""],["fxLayout","row","fxLayoutAlign","start center",1,"margin-bottom-32"],[1,"color-dark-gray","material-icons","font-size-32"],[1,"common-nv-no-content-fallback-tip"],["mat-button","",3,"click"],["fxLayout","row","fxLayoutAlign","start center"],[1,"font-header6"],["fxFlex","","fxLayoutAlign","end center"],["svgIcon","close",1,"closeStyle",3,"click"],["class","font-sub1",4,"ngIf"],[1,"constants-position-relative"],["class","common-overlay scroll-overlay-top-gradient",4,"ngIf"],["cdkFocusInitial","","class","font-body2",3,"scroll",4,"ngIf"],["class","common-overlay scroll-overlay-bottom-gradient",4,"ngIf"],[1,"font-sub1"],[1,"common-overlay","scroll-overlay-top-gradient"],["cdkFocusInitial","",1,"font-body2",3,"scroll"],["class","mat-primary mat-hue-2",3,"innerHTML",4,"ngIf"],[1,"mat-primary","mat-hue-2",3,"innerHTML"],[1,"common-overlay","scroll-overlay-bottom-gradient"]],template:function(d,R){1&d&&(o.TgZ(0,"div",0),o.YNc(1,fe,3,3,"div",1),o.qZA()),2&d&&(o.ekj("error-info",R.error),o.xp6(1),o.Q6J("ngIf",R.showDialog))},directives:[g.r,I.e,n.O5,G.xw,n.mk,x.oO,G.yH,G.s9,G.Wh,E.Ou,P.lW,v.Hw,O.d,y.xY,C.E],pipes:[m.X$,_.W],styles:['@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1,.font-body1-link,.font-body1-italic{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2,.font-body2-link,.font-body2-italic{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3,.font-caption1,.font-overline1,.font-body3-link,.font-body3-italic{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic{font-style:italic}.font-body2-italic{font-style:italic}.font-body3-italic{font-style:italic}.font-body3-link,.font-body2-link,.font-body1-link{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link:hover,.font-body2-link:hover,.font-body1-link:hover,.font-body3-link:focus,.font-body2-link:focus,.font-body1-link:focus,.cdk-keyboard-focused.font-body3-link,.cdk-keyboard-focused.font-body2-link,.cdk-keyboard-focused.font-body1-link{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link:active,.font-body2-link:active,.font-body1-link:active{opacity:.45}.font-body1-link{color:#76b900}.font-body2-link{color:#76b900}.font-body3-link{color:#76b900}.font-caption1,.font-overline1{color:#fff9;letter-spacing:.4px}.font-overline1{text-transform:uppercase}.font-button2,.font-button1{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1{color:#76b900}.font-button2{color:#fff}.font-color-primary{color:#ffffffe6}.font-color-secondary{color:#ffffffb3}.font-color-tertiary{color:#fff9}html,body{margin:0}img{-webkit-user-drag:none}.toast.mat-snack-bar-container{padding:0!important;max-width:100%;margin:16px}.mat-snack-bar-handset .toast.mat-snack-bar-container{width:unset;margin:16px;min-width:344px}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait){.mat-snack-bar-handset .toast.mat-snack-bar-container{min-width:0;width:100%}}.no-wrap{white-space:nowrap}@font-face{font-family:"Material Icons 2";font-style:normal;font-weight:400;font-display:block;src:url(assets/hashed/MaterialIcons-Regular.4674f8ded773cb03e824.eot),url(assets/hashed/MaterialIcons-Regular.cff684e59ffb052d72cb.woff2) format("woff2"),url(assets/hashed/MaterialIcons-Regular.83bebaf37c09c7e1c3ee.woff) format("woff"),url(assets/hashed/MaterialIcons-Regular.5e7382c63da0098d634a.ttf) format("truetype")}.common-window .material-icons{font-family:"Material Icons 2"}.constants-position-relative{position:relative}.constants-position-absolute{position:absolute}.constants-display-none{display:none}.font-size-xxxs{font-size:8px}.font-size-xxs{font-size:11px}.font-size-sm{font-size:12px}.font-size-sm1{font-size:13px}.font-size-lg{font-size:14px}.font-size-xl{font-size:16px}.font-size-xl1{font-size:18px}.font-size-20{font-size:20px}.font-size-xxl{font-size:24px}.font-size-32{font-size:32px}.font-size-xxxl{font-size:40px}.line-height-sm{line-height:.75em}.line-height-sm1{line-height:1em}.line-height-14{line-height:14px}.line-height-12{line-height:12px}.line-height-16{line-height:16px}.line-height-md{line-height:1.5em}.line-height-lg{line-height:3em}.line-height-30{line-height:30px}.line-height-36{line-height:36px}.line-height-lg1{line-height:40px}.font-style-italic{font-style:italic}.font-style-bold{font-weight:bold}.font-style-normal{font-weight:normal}.font-uppercase{text-transform:uppercase}.font-lowercase{text-transform:lowercase}.text-transform-none{text-transform:none}.common-overlay{position:absolute;right:0;left:0;display:flex;top:0;bottom:0;z-index:1;background-color:#000000bf}.common-overlay.light-background{background-color:#00000080}.common-overlay.no-background{background-color:transparent}button mat-icon{display:block;color:#ffffffb3}.article-dialog{min-width:408px;max-width:560px;max-height:538px;overflow-x:hidden;border-radius:0;padding:24px}mat-content,mat-dialog-content{overflow-y:overlay;overflow-x:hidden}.article-dialog mat-dialog-content{font-size:12px;font-weight:400;color:#fff9;padding:24px;width:inherit;overflow-x:hidden}.article-dialog.article-content mat-dialog-content{overflow-x:hidden;margin:0 0 5px;padding:0}.article-dialog.article-content{background-image:none;max-height:80vh;min-height:250px;min-width:560px;max-width:678px;transition:all;transform:translate(0) scale(1);animation-delay:0s;transition-delay:0s}@media (max-width: 599px){.article-dialog.article-content{min-width:0}}.article-dialog.dialog-service-container-size{background-image:none;max-height:80vh;min-height:250px;width:560px;max-width:678px;position:relative;transition:all;transform:translate(0) scale(1);animation-delay:0s;transition-delay:0s;background-color:#292929;overflow-y:hidden}.dialog-service-container-size a{color:#76b900;opacity:1;text-decoration:none}.dialog-service-container-size img{width:512px}.article-dialog.dialog-service-container-size .common-overlay{display:none}.article-dialog.dialog-service-container-size mat-divider{margin-top:16px;margin-bottom:16px}.common-window .dialog-no-transition{transition:none}.article-dialog .scroll-overlay-top-gradient{height:30px;background:linear-gradient(#1c1c1c,rgba(28,28,28,0));top:0}:host-context(.isLtr) .article-dialog .scroll-overlay-top-gradient{margin-left:24px}html[dir=ltr] .article-dialog .scroll-overlay-top-gradient{--dummy3: 0;margin-left:24px}:host-context(.isRtl) .article-dialog .scroll-overlay-top-gradient{margin-right:24px}html[dir=rtl] .article-dialog .scroll-overlay-top-gradient{--dummy3: 0;margin-right:24px}:host-context(.isLtr) .article-dialog .scroll-overlay-top-gradient{margin-right:24px}html[dir=ltr] .article-dialog .scroll-overlay-top-gradient{--dummy4: 0;margin-right:24px}:host-context(.isRtl) .article-dialog .scroll-overlay-top-gradient{margin-left:24px}html[dir=rtl] .article-dialog .scroll-overlay-top-gradient{--dummy4: 0;margin-left:24px}.article-dialog .scroll-overlay-bottom-gradient{height:30px;background:linear-gradient(rgba(28,28,28,0),#1c1c1c);bottom:24px;top:auto}:host-context(.isLtr) .article-dialog .scroll-overlay-bottom-gradient{margin-left:24px}html[dir=ltr] .article-dialog .scroll-overlay-bottom-gradient{--dummy3: 0;margin-left:24px}:host-context(.isRtl) .article-dialog .scroll-overlay-bottom-gradient{margin-right:24px}html[dir=rtl] .article-dialog .scroll-overlay-bottom-gradient{--dummy3: 0;margin-right:24px}:host-context(.isLtr) .article-dialog .scroll-overlay-bottom-gradient{margin-right:24px}html[dir=ltr] .article-dialog .scroll-overlay-bottom-gradient{--dummy4: 0;margin-right:24px}:host-context(.isRtl) .article-dialog .scroll-overlay-bottom-gradient{margin-left:24px}html[dir=rtl] .article-dialog .scroll-overlay-bottom-gradient{--dummy4: 0;margin-left:24px}.mat-dialog-container{padding-top:32px;z-index:82;transform:none;opacity:1;padding-bottom:24px;background-color:#191919;color:#fff;overflow:hidden}::selection{background:#478b06}.article-dialog mat-dialog-content:last-child,.article-dialog mat-dialog-content ng-form:last-child{margin-bottom:0}.article-dialog mat-dialog-content p:first-child{margin-top:0}.article-dialog mat-dialog-content .last-dialog-child{margin-bottom:0}.waiting-overlay{background-color:#0e0e0eb3}.article-dialog .closeStyle{cursor:pointer}.small-screen .article-dialog.dialog-service-container-size{max-height:100vh;width:100vw;height:100vh;max-width:100vw}.small-screen .article-dialog,.small-screen .article-dialog.article-content{min-width:320px;max-height:100vh;min-height:320px;max-width:100vw}.mat-dialog-container .error-info{background-color:#393939}:host-context(.isLtr) .error-info .article-dialog{padding:20px 8px 8px 24px}html[dir=ltr] .error-info .article-dialog{--dummy: 0;padding:20px 8px 8px 24px}:host-context(.isRtl) .error-info .article-dialog{padding:20px 24px 8px 8px}html[dir=rtl] .error-info .article-dialog{--dummy: 0;padding:20px 24px 8px 8px}.error-info .article-dialog.article-content{max-width:min(calc(100vw - 32px),560px);min-width:min(calc(80vw - 32px),560px);min-height:0}.error-info p{margin:0 16px;color:#ffffffb3}.error-info .mat-button{display:flex;justify-content:flex-end;min-width:0;font-size:14px;line-height:20px;padding:8px}:host-context(.isLtr) .error-info .mat-button{margin-left:auto}html[dir=ltr] .error-info .mat-button{--dummy3: 0;margin-left:auto}:host-context(.isRtl) .error-info .mat-button{margin-right:auto}html[dir=rtl] .error-info .mat-button{--dummy3: 0;margin-right:auto}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait){.article-dialog mat-dialog-content{max-height:75vh}.dialog-service-container-size img{width:80vw}}@media screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.article-dialog mat-dialog-content{max-height:60vh}:host-context(.isLtr) .article-dialog.dialog-service-container-size{padding-left:max(env(safe-area-inset-left),24px)}html[dir=ltr] .article-dialog.dialog-service-container-size{--dummy1: 0;padding-left:max(env(safe-area-inset-left),24px)}:host-context(.isRtl) .article-dialog.dialog-service-container-size{padding-right:max(env(safe-area-inset-left),24px)}html[dir=rtl] .article-dialog.dialog-service-container-size{--dummy1: 0;padding-right:max(env(safe-area-inset-left),24px)}:host-context(.isLtr) .article-dialog.dialog-service-container-size{padding-right:max(env(safe-area-inset-right),24px)}html[dir=ltr] .article-dialog.dialog-service-container-size{--dummy2: 0;padding-right:max(env(safe-area-inset-right),24px)}:host-context(.isRtl) .article-dialog.dialog-service-container-size{padding-left:max(env(safe-area-inset-right),24px)}html[dir=rtl] .article-dialog.dialog-service-container-size{--dummy2: 0;padding-left:max(env(safe-area-inset-right),24px)}}\n'],encapsulation:2}),J})();var ae=e(22573);let me=(()=>{class J{}return J.\u0275fac=function(d){return new(d||J)},J.\u0275mod=o.oAB({type:J}),J.\u0275inj=o.cJS({providers:[],imports:[[n.ez,D.u5,i.o9,y.Is,v.Ps,E.Cq,P.ot,O.t,f.it,ae.hp,m.aw.forChild()],n.ez,D.u5]}),J})();var ye=e(42118),ue=e(74058),X=e(37007),j=e(28417),K=e(80221),Z=e(64106),L=e(68456),W=e(365);const te=[D.u5,P.ot,ye.QW,ue.p9,j.ie,K.Tx,Z.g0,E.Cq,v.Ps,y.Is,L.ZX,X.LD,W.Cv];let ie=(()=>{class J{}return J.\u0275fac=function(d){return new(d||J)},J.\u0275mod=o.oAB({type:J}),J.\u0275inj=o.cJS({imports:[[D.u5,...te,ae.hp],D.u5,P.ot,ye.QW,ue.p9,j.ie,K.Tx,Z.g0,E.Cq,v.Ps,y.Is,L.ZX,X.LD,W.Cv]}),J})(),Q=(()=>{class J{}return J.\u0275fac=function(d){return new(d||J)},J.\u0275mod=o.oAB({type:J}),J.\u0275inj=o.cJS({imports:[[n.ez,m.aw,ie,P.ot,i.o9]]}),J})();var k=e(9348),oe=e(79441),N=e(81134),q=e(45871),Me=e(12702),xe=e(22663),ct=e(20088),Se=e(85816),Ge=e(53466),St=e(98636),Tt=e(67202),Te=e(56816),Je=e(33927),xt=e(18293),Ye=e(71435),rt=e(26222),ge=e(67067),Ve=e(90722),at=e(57674),ve=e(27846),Ze=e(19211),Ie=e(29784),$e=e(75270),ze=e(81665),be=(e(71316),e(61486)),pt=e(9170),Ot=e(79902),Kt=e(60086);let nn=(()=>{class J{constructor(d,R,ce,_e,Le){this.loggingService=d,this.networkTestService=R,this.networkConfigurationService=ce,this.networkTestTelemetry=_e,this.idmService=Le,this.logger=this.loggingService.getLogger("shared/background-network-test.service"),this.isWebrtcNT=!!f.ng.isBrowserPlatform()}initNetworkTest(){return this.networkTestService.initialize(),(0,be.aj)([this.idmService.accountStatusChanged.pipe((0,Ge.q)(1),(0,pt.h)(d=>d.isAuthenticated)),this.networkConfigurationService.getNetworkOverride()]).pipe((0,Ge.q)(1),(0,Ot.w)(([d,R])=>((0,u.isNil)(R)||(this.overrideZone=R,this.logger.info(`The user selected a zone ${R.name} manually and runNetworkTest is: `,R.runNetworkTest)),this.networkTestService.isWebrtcNetworkTestRequired(R,!0).pipe((0,Ge.q)(1)))),(0,Ot.w)(d=>d?(this.logger.info("Background Network test will be run."),this.launchNetworkTest()):(0,N.of)(null)),(0,Ot.w)(d=>this.sendTelemetry(d)),(0,Ot.w)(d=>d?(this.networkTestService.setNetworkTestState(rt.eT.Finished),this.networkTestService.setNetworkTestExpiryTime()):(0,N.of)(!1)),(0,xt.K)(d=>(this.logger.info("Background Network Test failed, error: ",d),this.networkTestTelemetryStatus=d.status?ge.N3X.HTTPError:ge.N3X.Other,this.networkTestTelemetry.sendTestDoneTelemetry({autoRun:!0,isWebRtcNetworkTest:this.isWebrtcNT,testData:d.result,zoneOverride:this.overrideZone,networkTestTelemetryStatus:this.networkTestTelemetryStatus,startTime:this.startTime}).pipe((0,Tt.h)(!0)))))}launchNetworkTest(){return this.startTime=Date.now(),this.networkTestService.startNetworkTest(rt.CS.browser)}sendTelemetry(d){return d?(this.networkTestTelemetryStatus=d.errorDetails?ge.N3X.Failure:ge.N3X.Success,this.logger.info("Background Network Test result:",d),this.networkTestTelemetry.sendTestDoneTelemetry({autoRun:!0,isWebRtcNetworkTest:this.isWebrtcNT,testData:{result:d},zoneOverride:this.overrideZone,networkTestTelemetryStatus:this.networkTestTelemetryStatus,startTime:this.startTime},d).pipe((0,Tt.h)(!0))):(this.logger.info("Background network test was not run as it did not meet the expiry duration requirements."),(0,N.of)(!1))}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(Ze.R),o.LFG(ze.XS),o.LFG(Un),o.LFG(Kt.No))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})(),tn=(()=>{class J{constructor(d){this.networkTestDialogData=d}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(y.WI))},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-network-test-dialog"]],decls:2,vars:2,consts:[["fxFill",""],["fxFill","",3,"nvClientApp","networkTestResult"]],template:function(d,R){1&d&&(o.TgZ(0,"div",0),o._UZ(1,"gfn-network-test",1),o.qZA()),2&d&&(o.xp6(1),o.Q6J("nvClientApp",R.networkTestDialogData.nvClientApp)("networkTestResult",R.networkTestDialogData.networkTestResult))},encapsulation:2}),J})();var Mn=e(34277);let Un=(()=>{class J{constructor(d,R,ce,_e){this.loggingService=d,this.telemetryUtil=R,this.networkTestService=ce,this.telemetryService=_e,this.isSilentWebrtcNT=!1,this.logger=this.loggingService.getLogger("shared/network-test-telemetry.service"),this.networkTestService.webrtcNetworkTestEnabled.subscribe(Le=>{var Re;this.isSilentWebrtcNT=null!==(Re=Le.enabled)&&void 0!==Re&&Re})}getNetworkTestDataWithPolicy(d){return this.networkTestService.getRetriggerPolicy().pipe((0,ct.P)(),(0,Je.U)(R=>(d.policy=R,d)))}sendTestDoneTelemetry(d,R){const ce=this.constructTestDoneTelemetryData(d,R);return this.isSilentWebrtcNT?(ce.policy=ge.Yk9.Manual,(0,N.of)(this.telemetryService.push(new ge.WLf(ce),d.startTime))):this.getNetworkTestDataWithPolicy(ce).pipe((0,Je.U)(_e=>this.telemetryService.push(new ge.WLf(_e),d.startTime)))}constructTestDoneTelemetryData(d,R){var ce,_e,Le,Re,Xe,mt,Gt,Qt,an;const vn=this.networkTestService.maxSubscriptionProfile,Cn=null==R?void 0:R.maxUserCapableProfile,kn={networkTestVersion:2,bandwidth:R&&R.bandwidth.measured?R.bandwidth.measured:0,uplinkBandwidth:R&&R.uplinkBandwidth?R.uplinkBandwidth:0,clientType:this.telemetryUtil.getClientType(),displayProfile:(0,u.isNil)(R)?ge.DwO.NVB_PROFILE_DEFAULT:this.formatDisplayProfile(R.capableProfile),userCapableProfileWidth:(null===(ce=null==R?void 0:R.capableProfile)||void 0===ce?void 0:ce.width)||0,userCapableProfileHeight:(null===(_e=null==R?void 0:R.capableProfile)||void 0===_e?void 0:_e.height)||0,userCapableProfileFrameRate:(null===(Le=null==R?void 0:R.capableProfile)||void 0===Le?void 0:Le.frameRate)||0,maxUserCapableProfileWidth:(null==Cn?void 0:Cn.width)||0,maxUserCapableProfileHeight:(null==Cn?void 0:Cn.height)||0,maxUserCapableProfileFrameRate:(null==Cn?void 0:Cn.fps)||0,maxSubscriptionProfileWidth:(null==vn?void 0:vn.width)||0,maxSubscriptionProfileHeight:(null==vn?void 0:vn.height)||0,maxSubscriptionProfileFrameRate:(null==vn?void 0:vn.frameRate)||0,maxTestBandwidthMbps:(null==R?void 0:R.maxTestBandwidthMbps)||0,errorCode:(0,u.isNil)(R)?0:R.result,status:d.networkTestTelemetryStatus,errorReason:(0,u.isNil)(R)?this.formatNetworkErrorReason(d.networkTestTelemetryStatus):this.formatNetworkErrorReason(d.networkTestTelemetryStatus,R.result),dataLoss:R&&R.frameLoss.measured?R.frameLoss.measured:0,latency:R&&R.latency.measured?R.latency.measured:0,latencyWithStream:R&&R.latencyWithStream?R.latencyWithStream:0,measuredPathMtu:R&&R.measuredPathMtu?R.measuredPathMtu:0,networkQuality:(0,u.isNil)(R)?ge.YbQ.Unknown:this.formatNetworkQuality(R.analysis.networkQuality),networkSessionId:R&&R.networkSessionId?R.networkSessionId:"",networkTestMode:d.autoRun?ge.YXu.Automatic:ge.YXu.Manual,networkType:(0,u.isNil)(R)?ge.RRm.Unknown:this.telemetryUtil.getNetworkType(null===(Xe=null===(Re=null==d?void 0:d.testData)||void 0===Re?void 0:Re.networkInfo)||void 0===Xe?void 0:Xe.NetworkType),totalMs:0,VPNConnection:(0,u.isNil)(null===(mt=null==d?void 0:d.testData)||void 0===mt?void 0:mt.networkInfo)||(0,u.isNil)(null===(Gt=d.testData.networkInfo)||void 0===Gt?void 0:Gt.IsVPN)?ge.wye.UNDEFINED:"1"===(null===(an=null===(Qt=null==d?void 0:d.testData)||void 0===Qt?void 0:Qt.networkInfo)||void 0===an?void 0:an.IsVPN)?ge.wye.TRUE:ge.wye.FALSE,zone:(0,u.isNil)(R)?"":R.zone.address,overrideZone:(0,u.isNil)(d.zoneOverride)?"":d.zoneOverride.address,overrideActive:(0,u.isNil)(d.zoneOverride)?ge.wye.FALSE:ge.wye.TRUE,percentile99thFrameJitter:R&&R.percentile99thFrameJitter?R.percentile99thFrameJitter:0,resultCode:(0,u.isNil)(R)?0:R.result,errorDetails:(0,u.isNil)(R)?this.formatNetworkErrorReason(d.networkTestTelemetryStatus):d.isWebRtcNetworkTest?null==R?void 0:R.errorDetails:this.formatNetworkErrorReason(d.networkTestTelemetryStatus,R.result),policy:ge.Yk9.Manual,maxPacketSize:(null==R?void 0:R.maxPacketSize)||0};return this.logger.info("Network test telemetry data: ",kn),kn}formatDisplayProfile(d){let R=ge.DwO.NVB_PROFILE_DEFAULT;return 1366===d.width&&768===d.height?R=30===d.frameRate?ge.DwO.NT_1366_768_30:ge.DwO.NT_1366_768_60:1920===d.width&&1080===d.height?R=30===d.frameRate?ge.DwO.NVB_PROFILE_GAMING_1080P_30FPS:ge.DwO.NVB_PROFILE_GAMING_1080P_60FPS:1280===d.width&&720===d.height?R=30===d.frameRate?ge.DwO.NVB_PROFILE_GAMING_720P_30FPS:ge.DwO.NVB_PROFILE_GAMING_720P_60FPS:1920===d.width&&1200===d.height?R=30===d.frameRate?ge.DwO.NT_1920_1200_30:ge.DwO.NT_1920_1200_60:1680===d.width&&1050===d.height?R=30===d.frameRate?ge.DwO.NT_1680_1050_30:ge.DwO.NT_1680_1050_60:1440===d.width&&900===d.height?R=30===d.frameRate?ge.DwO.NT_1440_900_30:ge.DwO.NT_1440_900_60:1280===d.width&&800===d.height&&(R=30===d.frameRate?ge.DwO.NT_1280_800_30:ge.DwO.NT_1280_800_60),R}formatNetworkErrorReason(d,R){let ce;return ce=d===ge.N3X.NetworkTestSdkError?this.formatNetworkTestV2ErrorReason(R):d===ge.N3X.Success?ge.Tbl.NA:(0,u.isNil)(R)||151!==R?(0,u.isNil)(R)||204!==R?ge.Tbl.UNKNOWN:ge.Tbl.PacketLoss:ge.Tbl.FAILED,ce}formatNetworkTestV2ErrorReason(d){let R;switch(d){case ge.OD0.UNKNOWN:R=ge.Tbl.UNKNOWN;break;case ge.OD0.SUCCESS:R=ge.Tbl.NA;break;case ge.OD0.INVALID_PARAM:R=ge.Tbl.INVALID_PARAM;break;case ge.OD0.SYN_FAILED:R=ge.Tbl.SYN_FAILED;break;case ge.OD0.FIN_FAILED:R=ge.Tbl.FIN_FAILED;break;case ge.OD0.AUTH_FAILED:R=ge.Tbl.AUTH_FAILED;break;case ge.OD0.POST_FAILED:R=ge.Tbl.POST_FAILED;break;case ge.OD0.TEST_IN_PROGRESS:R=ge.Tbl.TEST_IN_PROGRESS;break;case ge.OD0.CANCELED:R=ge.Tbl.CANCELED;break;case ge.OD0.CAPACITY_FULL:R=ge.Tbl.CAPACITY_FULL;break;case ge.OD0.SESSION_EXIST:R=ge.Tbl.SESSION_EXIST;break;case ge.OD0.INVALID_DATA:R=ge.Tbl.INVALID_DATA;break;case ge.OD0.SETUP_FAILED:R=ge.Tbl.SETUP_FAILED;break;case ge.OD0.RETRYABLE_POST_FAILURE:R=ge.Tbl.RETRYABLE_POST_FAILURE;break;case ge.OD0.BLOCK_STREAM:R=ge.Tbl.BLOCK_STREAM;break;default:R=ge.Tbl.UNKNOWN}return R}formatNetworkQuality(d){let R=ge.YbQ.Unknown;switch(d){case rt.AS.Excellent:R=ge.YbQ.Excellent;break;case rt.AS.Poor:R=ge.YbQ.Poor;break;case rt.AS.Bad:R=ge.YbQ.Bad}return R}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(ge.wU6),o.LFG(Ze.R),o.LFG(a.y0))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var _n=e(73341),xn=e(66883);function Fn(J,Oe){if(1&J&&o._UZ(0,"gfn-network-completed",13),2&J){const d=o.oxw(4);o.Q6J("nvTestData",d.testData)("isIPhone",d.isIPhone)}}function yt(J,Oe){if(1&J&&(o.TgZ(0,"mat-tab-group",14),o.TgZ(1,"mat-tab",15),o.ALo(2,"translate"),o._UZ(3,"gfn-network-tips",16),o.qZA(),o.TgZ(4,"mat-tab",15),o.ALo(5,"translate"),o._UZ(6,"gfn-network-completed",13),o.qZA(),o.qZA()),2&J){const d=o.oxw(4);o.xp6(1),o.s9C("label",o.lcZ(2,5,"common.troubleshootingTips")),o.xp6(2),o.Q6J("networkConditionsData",d.networkConditionsData),o.xp6(1),o.s9C("label",o.lcZ(5,7,"networkTest.detailsTag")),o.xp6(2),o.Q6J("nvTestData",d.testData)("isIPhone",d.isIPhone)}}function Ht(J,Oe){if(1&J&&(o.TgZ(0,"div",10),o.YNc(1,Fn,1,2,"gfn-network-completed",11),o.YNc(2,yt,7,9,"mat-tab-group",12),o.qZA()),2&J){const d=o.oxw(3);o.xp6(1),o.Q6J("ngIf",!d.showTroubleshootTips),o.xp6(1),o.Q6J("ngIf",d.showTroubleshootTips)}}function Ue(J,Oe){if(1&J&&(o.TgZ(0,"div",7),o._UZ(1,"gfn-network-icons",8),o.YNc(2,Ht,3,2,"div",9),o.qZA()),2&J){const d=o.oxw(2);o.xp6(1),o.Q6J("progressState",d.progressState)("nvTestData",d.testData)("maxDisplayState",d.maxDisplayState)("isWebRtcNetworkTest",d.isWebRtcNetworkTestEnabled),o.xp6(1),o.Q6J("ngIf",-1!==d.progressState)}}function Mt(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"div",17),o.TgZ(1,"gfn-network-test-error",18),o.NdJ("close",function(){return o.CHM(d),o.oxw(2).onClickClose()})("tryAgain",function(){return o.CHM(d),o.oxw(2).onClickTryAgain()}),o.qZA(),o.qZA()}if(2&J){const d=o.oxw(2);o.xp6(1),o.Q6J("zoneName",d.zoneName)("networkTestErrorText",d.networkTestErrorText)("showFirewallHelpLink",d.showFirewallHelpLink)("firewallHelpUrl",d.firewallHelpUrl)("firewallHelpShortUrl",d.firewallHelpShortUrl)("firewallLinkText",d.firewallLinkText)("nvClient",d.nvClientApp)("isWebRtcNetworkTest",d.isWebRtcNetworkTestEnabled)}}const ft=function(J,Oe,d){return{autoRun:J,showAdditionalActions:Oe,progressState:d}};function st(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"div",19),o.TgZ(1,"gfn-nw-test-button-placer",20),o.NdJ("tryAgain",function(){return o.CHM(d),o.oxw(2).onClickTryAgain()})("close",function(){return o.CHM(d),o.oxw(2).onClickClose()})("continue",function(){return o.CHM(d),o.oxw(2).onClickContinue()}),o.qZA(),o.qZA()}if(2&J){const d=o.oxw(2);o.xp6(1),o.Q6J("placementCriteria",o.kEZ(1,ft,d.autoRun,d.showAdditionalActions,d.progressState))}}function Et(J,Oe){if(1&J&&(o.TgZ(0,"div",1),o.TgZ(1,"div",2),o.TgZ(2,"p"),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA(),o.TgZ(5,"div",3),o.YNc(6,Ue,3,5,"div",4),o.YNc(7,Mt,2,8,"div",5),o.qZA(),o.YNc(8,st,2,5,"div",6),o.qZA()),2&J){const d=o.oxw();o.Q6J("ngSwitch",d.uiState),o.xp6(1),o.Q6J("ngClass",d.isIPhone?"font-header6":"font-header5"),o.xp6(2),o.Oqu(o.lcZ(4,6,d.networkTestHeaderText)),o.xp6(3),o.Q6J("ngSwitchCase","NETWORKTEST"),o.xp6(1),o.Q6J("ngSwitchCase","ERROR"),o.xp6(1),o.Q6J("ngIf","NETWORKTEST"===d.uiState&&-1!==d.progressState)}}let Ee=(()=>{class J{constructor(d,R,ce,_e,Le,Re,Xe,mt,Gt,Qt,an,vn,Cn){var kn,Zn;this.dialogRef=R,this.networkTestService=ce,this.telemetryUtil=_e,this.networkConfigurationService=Le,this.redirectService=Re,this.applicationLifetimeService=Xe,this.networkStatusService=mt,this.streamingProfileService=Gt,this.serverRouting=Qt,this.networkTestTelemetryService=an,this.appConfig=vn,this.breakpointObserver=Cn,this.nvClientApp=ge.BhR.MallClient,this.testData={},this.shutdownHandler=null,this.delayRetry=0,this.logger=d.getLogger("libraries/network-test/NetworkTestComponent"),this.destroy$=new oe.xQ,this.mobileMode=!!(null===(Zn=null===(kn=this.appConfig)||void 0===kn?void 0:kn.featureEnablement)||void 0===Zn?void 0:Zn.mobileMode),this.networkTestHeaderText="networkTest.networkTestHeader",this.showNetworkTest=!f.ng.isBrowserPlatform()}ngOnInit(){this.autoRun=this.nvClientApp===ge.BhR.StreamingClient,this.telemetryUtil.setClientType(this.autoRun?ve.lW.Streamer:ve.lW.Mall),this.platform=f.ng.isBrowserPlatform()?rt.CS.browser:this.autoRun?rt.CS.streamer:rt.CS.mall,this.showTroubleshootTips=!1,this.networkTestService.initialize(),f.ng.isBrowserPlatform()&&this.networkTestService.webrtcNetworkTestEnabled.pipe((0,xe.R)(this.destroy$)).subscribe(d=>{this.isWebRtcNetworkTestEnabled=d.enabled,this.showNetworkTest=d.showUI}),this.networkStatusService.onlineStatusChanged.pipe((0,ct.P)(),(0,Se.zg)(d=>d?this.networkTestResult?this.networkTestService.getNetworkInfo().pipe((0,Ge.q)(1),(0,St.b)(R=>{R?(this.testData.networkInfo=R,this.testData.result=this.networkTestResult,this.showNetworkTestDialog(this.networkTestResult),this.populateNetworkConditions(),this.uiState=rt.mM.NetworkTest):this.logger.error("Invalid Network Info")}),(0,Tt.h)(d)):this.initiateNetworkAnalysis().pipe((0,Tt.h)(d)):(this.showNetworkTestError({networkTestStatus:ge.N3X.ClientOffline,errorDetails:ge.N3X.ClientOffline,errorCode:rt.wC.Success}),(0,N.of)(d)))).subscribe(d=>{this.logger.info(`Network analysis was ${d?"":"not "}started on init.`)}),this.networkConfigurationService.getNetworkOverride().pipe((0,Ge.q)(1)).subscribe(d=>{this.zoneOverride=d}),this.shutdownHandler=this.applicationLifetimeService.addWorkOnShutdown(()=>this.serverRouting.cleanupOnCancel().pipe((0,Se.zg)(()=>this.networkTestService.cleanupOnCancel()),(0,Tt.h)(void 0))),this.updateZoneName(),this.breakpointObserver.observe(f.wO.IPhone).pipe((0,xe.R)(this.destroy$)).subscribe(d=>{this.isIPhone=d.matches})}initiateNetworkAnalysis(d=!1){return this.attemptLbr().pipe((0,Se.zg)(R=>(this.logger.info(`LBR was ${R?"":"not "}attempted.`),this.attemptNetworkTest(d))),(0,St.b)(R=>{this.logger.info(`Network Test was ${R?"":"not "}attempted.`)}))}attemptLbr(){return this.isWebRtcNetworkTestEnabled||this.autoRun&&!this.serverRouting.isLbrRequired?(0,N.of)(!1):(this.networkTestService.setLbrState(rt.eT.Started),this.networkTestService.getNetworkInfo().pipe((0,Te.b)(d=>(0,u.isNil)(d)&&!f.ng.isBrowserPlatform()?(0,q._)("Invalid Network Info"):(this.testData.networkInfo=d,this.progressState=rt.AS.Progress,this.uiState=rt.mM.NetworkTest,this.networkTestService.runLbrAndSaveOptimalZone(this.platform))),(0,Ge.q)(1),(0,Je.U)(d=>(this.logger.info("LBR attempt succeeded with fetched zone: ",d),!0)),(0,xt.K)(d=>(this.logger.info("LBR attempt failed with: ",d),(0,N.of)("Invalid Network Info"!==d))),(0,St.b)(()=>{this.autoRun&&!this.networkTestService.isNetworkTestRequired&&this.networkTestService.sendMessage(rt.Ir.LBRAutoRunDone,{networkTestStatus:this.progressState,isLbrRun:this.serverRouting.isLbrRun})}),(0,Ye.x)(()=>this.networkTestService.setLbrState(rt.eT.Finished))))}attemptNetworkTest(d=!1){if(!this.autoRun||this.networkTestService.isNetworkTestRequired||d){this.networkTestService.setNetworkTestState(rt.eT.Started),this.showAdditionalActions=!1;const R=Date.now();return this.networkTestService.getNetworkInfo().pipe((0,Te.b)(ce=>(0,u.isNil)(ce)&&!f.ng.isBrowserPlatform()?(0,q._)("Invalid Network Info"):(this.testData.networkInfo=ce,this.progressState=rt.AS.Progress,this.uiState=rt.mM.NetworkTest,(0,Me.H)(this.delayRetry).pipe(()=>this.networkTestService.startNetworkTest(this.platform)))),(0,Ge.q)(1),(0,Se.zg)(ce=>(this.delayRetry=ce.result===rt.pU.NCT_R_CAPACITY_FULL?2*(this.delayRetry||this.appConfig.networkTest.delayFactorCapacityFull):0,this.logger.info(`Network Test Delay Retry Time: ${this.delayRetry}`),this.networkTestTelemetryStatus=ge.N3X.Success,this.showNetworkTestDialog(ce),ce.isSuccess&&this.populateNetworkConditions(),this.networkTestTelemetryService.sendTestDoneTelemetry({autoRun:this.autoRun,isWebRtcNetworkTest:this.isWebRtcNetworkTestEnabled,testData:this.testData,zoneOverride:this.zoneOverride,networkTestTelemetryStatus:this.networkTestTelemetryStatus,startTime:R},ce).pipe((0,Tt.h)(!0)))),(0,xt.K)(ce=>(this.logger.info("Network Test failed, error code: ",ce),this.networkTestTelemetryStatus=ce.status?ge.N3X.HTTPError:ge.N3X.Other,this.showNetworkTestError({networkTestStatus:this.networkTestTelemetryStatus,errorDetails:(0,u.toString)(ce&&ce.status||ce),errorCode:ce.code}),this.networkTestTelemetryService.sendTestDoneTelemetry({autoRun:this.autoRun,isWebRtcNetworkTest:this.isWebRtcNetworkTestEnabled,testData:this.testData,zoneOverride:this.zoneOverride,networkTestTelemetryStatus:this.networkTestTelemetryStatus,startTime:R}).pipe((0,Tt.h)("Invalid Network Info"!==ce)))),(0,Ye.x)(()=>this.networkTestService.setNetworkTestState(rt.eT.Finished)))}return(0,N.of)(!1)}updateZoneName(){this.logger.info("Subscribe to zone name: "),this.networkTestService.zoneName.pipe((0,xe.R)(this.destroy$)).subscribe(d=>{this.zoneName=d.name})}showNetworkTestDialog(d){if(this.networkTestHeaderText="networkTest.networkTestResultsHeader",d.isSuccess){if(this.testData.result=d,this.progressState=d.analysis.networkQuality,(this.progressState!==rt.AS.Excellent||this.testData.networkInfo.NetworkType===f.VV.WiFi2_4||"1"===this.testData.networkInfo.IsVPN)&&(this.showAdditionalActions=!0),this.showTroubleshootTips=this.progressState===rt.AS.Poor||this.progressState===rt.AS.Bad||this.progressState===rt.AS.Excellent&&(this.testData.networkInfo.NetworkType===f.VV.WiFi2_4||"1"===this.testData.networkInfo.IsVPN),this.populateMaxDisplayTestData(d),this.autoRun){let R=this.progressState;this.progressState===rt.AS.Excellent&&(this.testData.networkInfo.NetworkType===f.VV.WiFi2_4||"1"===this.testData.networkInfo.IsVPN)&&(R=rt.AS.Poor),this.networkTestService.sendMessage(rt.Ir.NetworkTestAutoRunDone,{networkTestStatus:R})}}else this.networkTestTelemetryStatus=ge.N3X.NetworkTestSdkError,this.showNetworkTestError({networkTestStatus:this.networkTestTelemetryStatus,errorDetails:d.errorDetails||(0,u.toString)(d.result),errorCode:d.result})}populateNetworkConditions(){this.networkConditionsData={isVpn:"1"===this.testData.networkInfo.IsVPN,zoneOverride:this.zoneOverride,bandwidth:this.testData.result.bandwidth.measured,latency:this.testData.result.latency.measured,networkType:this.testData.networkInfo.NetworkType},this.logger.info("Current network conditions: : ",this.networkConditionsData)}populateMaxDisplayTestData(d){(0,u.isNil)(d.capableProfile)||this.testData.networkInfo.NetworkType===f.VV.WiFi2_4?this.maxDisplayState=null:this.streamingProfileService.getStreamingProfile().pipe((0,Ge.q)(1),(0,Se.zg)(R=>{const ce=null==R?void 0:R.primaryDisplayResolution,_e=(null==ce?void 0:ce.fps)>=59?60:30,Le=!(0,u.isNil)(R)&&(R.width!==(null==ce?void 0:ce.width)||R.fps!==_e||R.height!==(null==ce?void 0:ce.height));return!(0,u.isNil)(R)&&R.name===Ve.M1.Balanced&&Le?this.isDisplayHighestForAspectRatio(R).pipe((0,Je.U)(Re=>Re?null:R)):(0,N.of)(null)}),(0,xe.R)(this.destroy$)).subscribe(R=>{this.maxDisplayState=(0,u.isNil)(R)?null:{width:R.width,height:R.height,frameRate:R.fps}})}isDisplayHighestForAspectRatio(d){return this.streamingProfileService.getNvSupportedResolutions().pipe((0,Je.U)(R=>{if((0,u.isNil)(R)||(0,u.isNil)(d))return!1;for(const ce of R)if(ce.widthInPixels/ce.heightInPixels==d.width/d.height&&(ce.widthInPixels>d.width||ce.framesPerSecond>d.fps))return!1;return!0}))}showNetworkTestError(d){this.logger.info("Error in network test, errorDetails: ",d),this.uiState=rt.mM.Error,d.errorCode===rt.pU.NCT_R_BLOCK_STREAM?(this.networkTestErrorText="common.genericLoadError",this.showFirewallHelpLink=!0,this.redirectService.getRedirectUrl(at.hE.GfnHelpFirewallNetworkTest).pipe((0,Ge.q)(1),(0,xe.R)(this.destroy$)).subscribe(R=>{this.firewallHelpUrl=R,this.firewallHelpShortUrl=at.hD[at.hE.GfnHelpFirewallNetworkTest]}),this.firewallLinkText="networkTest.networkTestFirefallIssue",this.logger.info("Firewall URL: ",this.firewallHelpUrl)):(this.networkTestErrorText=d.networkTestStatus!==ge.N3X.ClientOffline?"networkTest.encounteredProblem":"common.connectionError",this.showFirewallHelpLink=!1),this.networkTestService.sendMessage(rt.Ir.NetworkTestFailed,d)}onClickTryAgain(){this.networkTestHeaderText="networkTest.networkTestHeader",this.networkStatusService.onlineStatusChanged.pipe((0,ct.P)(),(0,Se.zg)(d=>d?(this.autoRun&&this.networkTestService.sendMessage(rt.Ir.NetworkTestAutoRunTryAgain),this.initiateNetworkAnalysis(!0).pipe((0,Tt.h)(d))):(this.uiState=rt.mM.Error,this.showNetworkTestError({networkTestStatus:ge.N3X.ClientOffline,errorDetails:ge.N3X.ClientOffline,errorCode:rt.wC.Success}),(0,N.of)(d)))).subscribe(d=>{this.logger.info(`Network analysis was ${d?"":"not "}started on Try Again.`)})}onClickClose(){this.dialogRef&&this.dialogRef.close(),this.autoRun&&this.networkTestService.sendMessage(rt.Ir.NetworkTestClosedOnError,{networkTestStatus:this.progressState})}onClickContinue(){this.showNetworkTest=!1,this.dialogRef&&this.dialogRef.close(),this.networkTestService.sendMessage(rt.Ir.NetworkTestClosed,{networkTestStatus:this.progressState})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete(),this.serverRouting.cleanupOnCancel().pipe((0,Se.zg)(()=>this.networkTestService.cleanupOnCancel()),(0,Ge.q)(1)).subscribe(()=>{this.logger.info("destroying component: network analysis cleanup is done!"),this.shutdownHandler&&this.shutdownHandler.remove()})}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(f.ed),o.Y36(y.so),o.Y36(Ze.R),o.Y36(ge.wU6),o.Y36(Ie.X),o.Y36(at.VH),o.Y36(c.Ll),o.Y36(f._J),o.Y36($e.G),o.Y36(ze.mw),o.Y36(Un),o.Y36(_n.VK),o.Y36(xn.Yg))},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-network-test"]],inputs:{nvClientApp:"nvClientApp",networkTestResult:"networkTestResult"},decls:1,vars:1,consts:[["class","common-ui-network-container","nvTrapFocus","",3,"ngSwitch",4,"ngIf"],["nvTrapFocus","",1,"common-ui-network-container",3,"ngSwitch"],[1,"common-ui-network-header",3,"ngClass"],[1,"network-test-content"],["fxLayout","column","fxLayoutAlign","center stretch",4,"ngSwitchCase"],["class","network-test-error-container",4,"ngSwitchCase"],["class","nv-button-class","fxLayout","row","fxLayoutAlign","end stretch",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center stretch"],["fxLayout","column",3,"progressState","nvTestData","maxDisplayState","isWebRtcNetworkTest"],["class","network-test-results",4,"ngIf"],[1,"network-test-results"],[3,"nvTestData","isIPhone",4,"ngIf"],["ngClass","mat-tabs-font-button1",4,"ngIf"],[3,"nvTestData","isIPhone"],["ngClass","mat-tabs-font-button1"],[3,"label"],[3,"networkConditionsData"],[1,"network-test-error-container"],[3,"zoneName","networkTestErrorText","showFirewallHelpLink","firewallHelpUrl","firewallHelpShortUrl","firewallLinkText","nvClient","isWebRtcNetworkTest","close","tryAgain"],["fxLayout","row","fxLayoutAlign","end stretch",1,"nv-button-class"],[1,"network-test-action-buttons",3,"placementCriteria","tryAgain","close","continue"]],template:function(d,R){1&d&&o.YNc(0,Et,9,8,"div",0),2&d&&o.Q6J("ngIf",R.showNetworkTest)},styles:[".font-size-xxxs[_ngcontent-%COMP%]{font-size:8px}.font-size-xxs[_ngcontent-%COMP%]{font-size:11px}.font-size-sm[_ngcontent-%COMP%]{font-size:12px}.font-size-sm1[_ngcontent-%COMP%]{font-size:13px}.font-size-lg[_ngcontent-%COMP%]{font-size:14px}.font-size-xl[_ngcontent-%COMP%]{font-size:16px}.font-size-xl1[_ngcontent-%COMP%]{font-size:18px}.font-size-20[_ngcontent-%COMP%]{font-size:20px}.font-size-xxl[_ngcontent-%COMP%]{font-size:24px}.font-size-32[_ngcontent-%COMP%]{font-size:32px}.font-size-xxxl[_ngcontent-%COMP%]{font-size:40px}.line-height-sm[_ngcontent-%COMP%]{line-height:.75em}.line-height-sm1[_ngcontent-%COMP%]{line-height:1em}.line-height-14[_ngcontent-%COMP%]{line-height:14px}.line-height-12[_ngcontent-%COMP%]{line-height:12px}.line-height-16[_ngcontent-%COMP%]{line-height:16px}.line-height-md[_ngcontent-%COMP%]{line-height:1.5em}.line-height-lg[_ngcontent-%COMP%]{line-height:3em}.line-height-30[_ngcontent-%COMP%]{line-height:30px}.line-height-36[_ngcontent-%COMP%]{line-height:36px}.line-height-lg1[_ngcontent-%COMP%]{line-height:40px}.font-style-italic[_ngcontent-%COMP%]{font-style:italic}.font-style-bold[_ngcontent-%COMP%]{font-weight:bold}.font-style-normal[_ngcontent-%COMP%]{font-weight:normal}.font-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.font-lowercase[_ngcontent-%COMP%]{text-transform:lowercase}.text-transform-none[_ngcontent-%COMP%]{text-transform:none}.common-ui-network-container[_ngcontent-%COMP%]{background-color:#1f2224;max-width:789px}.common-ui-network-header[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:0;height:24px}.isLtr[_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.result-icon[_ngcontent-%COMP%]{font-size:24px;color:#76b900;vertical-align:middle}.isLtr[_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.result-text-container[_ngcontent-%COMP%]{margin-bottom:6px}.result-text[_ngcontent-%COMP%]{margin-top:1px}.nw-icon[_ngcontent-%COMP%]{height:24px;line-height:24px;width:auto;speak:none;font-size:48px;font-feature-settings:normal;font-variant:normal;align-self:center;color:#fff;opacity:.9;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;vertical-align:middle}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:22px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:22px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:22px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:22px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:22px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:22px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:22px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:22px}.icon-alert-bang[_ngcontent-%COMP%]{margin:0}.common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{font-size:24px;color:#76b900}.isLtr[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.common-ui-network-container[_ngcontent-%COMP%]   .result-icon.error[_ngcontent-%COMP%]{color:#ed1c24}.warn[_ngcontent-%COMP%]{color:#ffb538}.error[_ngcontent-%COMP%]{color:#ed1c24}.common-ui-errorDetails[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#76b900}.flex-1[_ngcontent-%COMP%]{flex:1}.nv-ui-assets[_ngcontent-%COMP%]{height:140px;line-height:138px;display:flex;flex-direction:row;overflow:hidden;justify-content:center;align-items:center}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:79px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:79px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:79px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:79px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:79px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:79px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:79px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:79px}.nv-dot-icons[_ngcontent-%COMP%]{border-radius:50%;width:8px;height:8px;align-self:center;display:-webkit-inline-box;background:rgba(255,255,255,.45)}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.animated[_ngcontent-%COMP%]{animation-duration:2s;animation-iteration-count:infinite;animation-fill-mode:both;animation-delay:1s}.caption[_ngcontent-%COMP%]{display:block;width:92px;text-align:center;margin-bottom:0}.caption.zone[_ngcontent-%COMP%]{margin-top:0}.common-ui-errorDetails[_ngcontent-%COMP%]{height:72px;display:flex;justify-content:center;margin:0 24px}.connect-error-details[_ngcontent-%COMP%]{display:flex}.common-ui-network-container[_ngcontent-%COMP%]   .common-ui-resultDetails[_ngcontent-%COMP%]{height:24px;margin-bottom:30px;align-self:center;margin-top:22px}.common-ui-network-content[_ngcontent-%COMP%]{height:181px;background-color:#0000004d}.common-ui-network-content[_ngcontent-%COMP%]   .nv-button-class[_ngcontent-%COMP%]{height:84px;display:flex}.common-ui-network-content[_ngcontent-%COMP%]   .override-warning-container[_ngcontent-%COMP%]{margin-top:5px;padding:0 24px;align-items:center}.common-ui-network-content[_ngcontent-%COMP%]   span.icon-alert-circle_reg[_ngcontent-%COMP%]{font-size:11px}.common-ui-network-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px;margin-top:0}.div-table[_ngcontent-%COMP%]{display:table!important;width:101%;padding-top:24px;padding-bottom:24px;max-width:100%}.div-table-row[_ngcontent-%COMP%]{display:table-row;width:auto;clear:both;height:28px}.div-table-col[_ngcontent-%COMP%]{display:table-column;width:140px;text-align:center}.isLtr[_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%]{float:left}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col[_ngcontent-%COMP%]{--dummy0: 0;float:left}.isRtl[_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col[_ngcontent-%COMP%]{--dummy0: 0;float:right}.div-table-col-header[_ngcontent-%COMP%]{display:table-column;width:236px}.isLtr[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{float:left}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy0: 0;float:left}.isRtl[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isLtr[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:inline-block;border:16px;border-top:.1rem solid #ffb538;width:177px}.yellowstyle[_ngcontent-%COMP%]   .narrowstyle[_ngcontent-%COMP%]{width:26px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:inline-block;border:16px;border-top:.1rem solid #ed1c24;width:177px}.redstyle[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ed1c24}.yellowstyle[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ffb538}.wifi_2_4_warn[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ffb538}.network-test-warning-icons[_ngcontent-%COMP%]   md-icon[_ngcontent-%COMP%]{color:#ffb538}.network-test-warning-icons[_ngcontent-%COMP%]{display:table}.network-assets[_ngcontent-%COMP%]{display:flex}.error-details[_ngcontent-%COMP%]{display:flex;margin-top:24px}.isLtr[_nghost-%COMP%]   .error-details[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-details[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .error-details[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-details[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.common-ui-error[_ngcontent-%COMP%]{width:480px}.redirect-page-div[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:center}.redirect-page-link[_ngcontent-%COMP%]{text-decoration:none}.vertical-gap-24[_ngcontent-%COMP%]{height:24px}.isLtr[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.isLtr[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{padding-right:48px}html[dir=ltr][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy2: 0;padding-right:48px}.isRtl[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{padding-left:48px}html[dir=rtl][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy2: 0;padding-left:48px}.network-progress-fill[_ngcontent-%COMP%]{height:50px;background-color:#1f2224}.network-test-icons[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:36px}.error-dlg-content[_ngcontent-%COMP%]{margin:24px;min-height:32px}.error-dlg-buttons[_ngcontent-%COMP%]{min-height:52px}.isLtr[_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{float:right}html[dir=ltr][_ngcontent-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isRtl[_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{float:left}html[dir=rtl][_ngcontent-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{--dummy0: 0;float:left}.error-dialog-button[_ngcontent-%COMP%]{margin:8px!important}.error-icon[_ngcontent-%COMP%]{font-size:32px!important}.isLtr[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.error-icon-error-dialog[_ngcontent-%COMP%]{font-size:32px;margin-top:20px;min-width:32px;line-height:5px}.isLtr[_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.isLtr[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{margin:23px 8px 23px 23px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{--dummy: 0;margin:23px 8px 23px 23px}.isRtl[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{margin:23px 23px 23px 8px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{--dummy: 0;margin:23px 23px 23px 8px}.active[_ngcontent-%COMP%]{background:#76b900;opacity:1;width:12px;height:12px;margin-bottom:-2px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.normal[_ngcontent-%COMP%]{background:rgba(255,255,255,.45);width:8px;height:8px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.error-background-active-btn[_ngcontent-%COMP%]{background-color:#76b900}.custom-svg-icon[_ngcontent-%COMP%]{width:48px;height:auto;margin-top:-10px;margin-bottom:-15px}.network-isp-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.network-test-warning-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.nv-dot-icons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}@media (max-width: 960px){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:60px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:60px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:60px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:60px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:60px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:60px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:60px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:60px}.network-test-results[_ngcontent-%COMP%]{min-width:80vw}.div-table-col-header[_ngcontent-%COMP%]{width:30%}.div-table-col[_ngcontent-%COMP%]{width:18%}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:120px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:120px}}@media (max-width: 790px){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:48px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:48px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:48px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:48px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:48px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:48px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:48px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:48px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80px}}@media (max-width: 690px){.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:60px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:60px}}@media screen and (max-width: 834px) and (max-height: 1194px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:36px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:36px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:36px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:36px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:36px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:36px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:36px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:36px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:87px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:87px}.nv-dot-icons[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.active[_ngcontent-%COMP%]{width:10px;height:10px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.normal[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.div-table-col-header[_ngcontent-%COMP%]{width:160px}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.network-test-content[_ngcontent-%COMP%]{display:block;max-height:65vh;overflow-y:auto;overflow-x:unset}.common-ui-network-container[_ngcontent-%COMP%]{margin:0;overflow:unset}.common-ui-network-header[_ngcontent-%COMP%]{margin:0}.common-ui-network-content[_ngcontent-%COMP%]{background-color:transparent}.nv-ui-assets[_ngcontent-%COMP%]{height:100px;line-height:0;margin-bottom:24px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:0}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:0}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:0}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:0}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.network-test-icons[_ngcontent-%COMP%]{height:16px;margin-top:0}.network-isp-icons[_ngcontent-%COMP%]{align-items:center}.nv-dot-icons[_ngcontent-%COMP%]{width:4px;height:4px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.active[_ngcontent-%COMP%]{width:8px;height:8px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.normal[_ngcontent-%COMP%]{width:4px;height:4px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.custom-svg-icon[_ngcontent-%COMP%]{width:24px}.caption[_ngcontent-%COMP%]{width:fit-content;margin-top:24px;align-self:center}.common-ui-errorDetails[_ngcontent-%COMP%]{height:fit-content;display:flex;justify-content:center}.isLtr[_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{margin:0 24px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{--dummy: 0;margin:0 24px}.isRtl[_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{margin:0 24px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{--dummy: 0;margin:0 24px}.network-test-error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;justify-content:center;align-items:stretch;max-width:100%}.icon-alert-bang[_ngcontent-%COMP%]{font-size:36px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:57px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:57px}.result-text[_ngcontent-%COMP%]{margin-top:0}.network-test-results[_ngcontent-%COMP%]{padding-top:16px}.mat-tab-group[_ngcontent-%COMP%]{background-color:#0000004d}.isLtr[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.div-table-row[_ngcontent-%COMP%]{justify-content:space-between;max-width:240px}.isLtr[_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{padding-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{--dummy2: 0;padding-right:8px}.isRtl[_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{padding-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{--dummy2: 0;padding-left:8px}}@media screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.network-test-content[_ngcontent-%COMP%]{max-height:50vh}.common-ui-network-container[_ngcontent-%COMP%]{width:536px;max-height:80vh}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait){.common-ui-network-container[_ngcontent-%COMP%]{width:fit-content}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}}@media screen and (max-width: 320px) and (max-height: 568px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-left:16px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-right:16px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-right:16px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-left:16px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.active[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:1px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:1px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:1px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:1px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:1px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:1px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:1px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:1px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:40px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:40px}.result-text[_ngcontent-%COMP%]{width:70%}}"]}),J})();var dt=e(41618);function kt(J,Oe){1&J&&(o.TgZ(0,"div",5),o._UZ(1,"mat-icon",11),o.TgZ(2,"p",7),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA()),2&J&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"networkTest.networkTestMyComputer")))}function Zt(J,Oe){1&J&&(o.TgZ(0,"div",5),o._UZ(1,"mat-icon",12),o.TgZ(2,"p",7),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA()),2&J&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"networkTest.myDevice")))}function dn(J,Oe){if(1&J&&(o.TgZ(0,"div",13),o._UZ(1,"div",14),o._UZ(2,"div",14),o._UZ(3,"div",14),o.qZA()),2&J){const d=o.oxw();o.xp6(1),o.Q6J("ngClass",0===d.progressCount?"active":"normal"),o.xp6(1),o.Q6J("ngClass",1===d.progressCount?"active":"normal"),o.xp6(1),o.Q6J("ngClass",2===d.progressCount?"active":"normal")}}function gn(J,Oe){if(1&J&&o._UZ(0,"gfn-network-test-warning",15),2&J){const d=o.oxw();o.Q6J("warningInfo",d.displayData.warningInfo)}}function jt(J,Oe){1&J&&(o.TgZ(0,"div",5),o._UZ(1,"mat-icon",18),o.TgZ(2,"p",7),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA()),2&J&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"networkTest.ethernet")))}function En(J,Oe){if(1&J&&(o.TgZ(0,"div",5),o._UZ(1,"mat-icon",19),o.TgZ(2,"p",7),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.TgZ(5,"p",8),o._uU(6),o.ALo(7,"translate"),o.qZA(),o.qZA()),2&J){const d=o.oxw(2);o.xp6(3),o.Oqu(o.lcZ(4,2,d.nvTestData.networkInfo.NetworkName)),o.xp6(3),o.Oqu(o.lcZ(7,4,d.displayData.wifiRouterVersion))}}function Pn(J,Oe){1&J&&(o.TgZ(0,"div",5),o._UZ(1,"mat-icon",20),o.TgZ(2,"p",7),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA()),2&J&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"networkTest.genericNetworkName")))}function Ln(J,Oe){if(1&J&&(o.TgZ(0,"div",16),o.YNc(1,jt,5,3,"div",1),o.YNc(2,En,8,6,"div",1),o.YNc(3,Pn,5,3,"div",1),o.TgZ(4,"div",13),o._UZ(5,"div",14),o._UZ(6,"div",14),o._UZ(7,"div",14),o.qZA(),o.TgZ(8,"div",5),o._UZ(9,"mat-icon",17),o.TgZ(10,"p",7),o._uU(11),o.ALo(12,"translate"),o.qZA(),o.qZA(),o.TgZ(13,"div",13),o._UZ(14,"div",14),o._UZ(15,"div",14),o._UZ(16,"div",14),o.qZA(),o.qZA()),2&J){const d=o.oxw();o.xp6(1),o.Q6J("ngIf",!d.isWebRtcNetworkTest&&d.displayToggles.isEthernet),o.xp6(1),o.Q6J("ngIf",!d.isWebRtcNetworkTest&&!d.displayToggles.isEthernet),o.xp6(1),o.Q6J("ngIf",d.isWebRtcNetworkTest),o.xp6(2),o.Q6J("ngClass",3===d.progressCount?"active":"normal"),o.xp6(1),o.Q6J("ngClass",4===d.progressCount?"active":"normal"),o.xp6(1),o.Q6J("ngClass",5===d.progressCount?"active":"normal"),o.xp6(4),o.Oqu(o.lcZ(12,10,"networkTest.networkTestIsp")),o.xp6(3),o.Q6J("ngClass",6===d.progressCount?"active":"normal"),o.xp6(1),o.Q6J("ngClass",7===d.progressCount?"active":"normal"),o.xp6(1),o.Q6J("ngClass",8===d.progressCount?"active":"normal")}}function ht(J,Oe){1&J&&o._UZ(0,"mat-icon",29)}function Vt(J,Oe){if(1&J&&o._UZ(0,"mat-icon",30),2&J){const d=o.oxw(2);o.Q6J("ngClass",d.resultIconClass)}}const ne=function(J,Oe){return{resolution:J,fps:Oe}};function Be(J,Oe){if(1&J&&(o.TgZ(0,"div",31),o.TgZ(1,"span",32),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.qZA()),2&J){const d=o.oxw(2);o.xp6(2),o.Oqu(o.xi3(3,1,"networkTest.networkTestSupports",o.WLB(4,ne,d.displayData.resolution,d.displayData.fps)))}}function vt(J,Oe){if(1&J&&(o.TgZ(0,"div",21),o.TgZ(1,"div",22),o.TgZ(2,"div",23),o.TgZ(3,"div",24),o.YNc(4,ht,1,0,"mat-icon",25),o.YNc(5,Vt,1,1,"ng-template",null,26,o.W1O),o.TgZ(7,"div",27),o._uU(8),o.ALo(9,"translate"),o.qZA(),o.qZA(),o.qZA(),o.YNc(10,Be,4,7,"div",28),o.qZA(),o.qZA()),2&J){const d=o.MAs(6),R=o.oxw();o.xp6(4),o.Q6J("ngIf",R.displayToggles.showSuccessIcons)("ngIfElse",d),o.xp6(4),o.Oqu(o.lcZ(9,4,R.displayData.resultText)),o.xp6(2),o.Q6J("ngIf",R.displayToggles.showBestResolutionText)}}let Ct=(()=>{class J{constructor(d,R,ce){var _e;this.networkTestService=ce,this.displayData={},this.displayToggles={},this.isWarningNetworkTest=!1,this.progressCount=-1,this.logger=R.getLogger("libraries/network-test/NetworkTestComponent"),this.mobileMode=!!(null===(_e=null==d?void 0:d.featureEnablement)||void 0===_e?void 0:_e.mobileMode)}ngOnInit(){var d,R,ce,_e,Le;this.displayToggles.isEthernet=null===(ce=null===(R=null===(d=this.nvTestData)||void 0===d?void 0:d.networkInfo)||void 0===R?void 0:R.NetworkType)||void 0===ce?void 0:ce.includes(f.VV.Ethernet),this.displayData.wifiRouterVersion=rt.JO[null===(Le=null===(_e=this.nvTestData)||void 0===_e?void 0:_e.networkInfo)||void 0===Le?void 0:Le.NetworkType]||"",this.displayData.header="networkTest.networkTestHeader"}ngOnChanges(){var d,R;this.logger.info("Network test status  changed: ",this.progressState),(0,u.isNil)(this.progressState)||this.progressState===rt.AS.Progress?this.progressState===rt.AS.Progress&&this.resetProgressState():(this.stopProgressAnimation(),this.updateResultIconClass(this.progressState),this.displayToggles.showResults=!0,this.displayToggles.isVPNConnection="1"===(null===(R=null===(d=this.nvTestData)||void 0===d?void 0:d.networkInfo)||void 0===R?void 0:R.IsVPN),this.setResultStates(this.progressState),this.setMaxDisplayState(this.maxDisplayState)),this.displayToggles.showDotIcons=this.progressState===rt.AS.Progress||this.displayToggles.isExcellentResult&&this.displayData.warningInfo!==rt.AS.PoorWifi_2_4}updateZoneName(){this.logger.info("Subscribe to zone name: "),this.zoneNameSub&&(this.zoneNameSub.unsubscribe(),this.zoneNameSub=null),this.zoneNameSub=this.networkTestService.zoneName.subscribe(d=>{this.displayData.zoneName=d.name})}updateResultIconClass(d){var R,ce,_e,Le;this.progressState=d,this.resultIconClass=this.progressState===rt.AS.Bad?"error":this.progressState===rt.AS.Poor||(null===(ce=null===(R=this.nvTestData)||void 0===R?void 0:R.networkInfo)||void 0===ce?void 0:ce.NetworkType)===f.VV.WiFi2_4||"1"===(null===(Le=null===(_e=this.nvTestData)||void 0===_e?void 0:_e.networkInfo)||void 0===Le?void 0:Le.IsVPN)?"warn":"success"}resetProgressState(){var d,R;this.startProgressAnimation(),this.updateZoneName(),this.displayData.wifiRouterVersion=rt.JO[null===(R=null===(d=this.nvTestData)||void 0===d?void 0:d.networkInfo)||void 0===R?void 0:R.NetworkType]||"",this.displayData.header="networkTest.networkTestHeader",this.resetEthernetState(),this.isWarningNetworkTest=!1}resetEthernetState(){var d,R;this.nvTestData&&this.nvTestData.networkInfo&&(this.displayToggles={isEthernet:null===(R=null===(d=this.nvTestData.networkInfo)||void 0===d?void 0:d.NetworkType)||void 0===R?void 0:R.includes(f.VV.Ethernet)})}startProgressAnimation(){(0,u.isNil)(this.animationSub)&&(this.animationSub=(0,dt.F)(180).pipe((0,St.b)(()=>{this.progressCount=this.progressCount+1,this.progressCount=this.progressCount%9})).subscribe())}stopProgressAnimation(){this.animationSub&&(this.animationSub.unsubscribe(),this.animationSub=null,this.progressCount=-1)}setResultStates(d){var R,ce,_e,Le;switch(this.displayData.header="networkTest.networkTestResultsHeader",d){case rt.AS.Excellent:this.displayData.resultText=this.displayToggles.isVPNConnection||(null===(ce=null===(R=this.nvTestData)||void 0===R?void 0:R.networkInfo)||void 0===ce?void 0:ce.NetworkType)===f.VV.WiFi2_4?"networkTest.networkTestPoorWifiMsg":"networkTest.networkTestSuccessMsg",this.displayToggles.isExcellentResult=!0;break;case rt.AS.Poor:this.isWarningNetworkTest=!0,this.displayData.warningInfo=rt.AS.Poor,this.displayData.resultText="networkTest.networkTestPoorWifiMsg";break;case rt.AS.Bad:this.isWarningNetworkTest=!0,this.displayData.warningInfo=rt.AS.Bad,this.displayData.resultText="networkTest.networkTestBadWifiMsg"}this.displayToggles.showSuccessIcons=this.displayToggles.isExcellentResult&&!this.displayToggles.isVPNConnection&&(null===(Le=null===(_e=this.nvTestData)||void 0===_e?void 0:_e.networkInfo)||void 0===Le?void 0:Le.NetworkType)!==f.VV.WiFi2_4}setMaxDisplayState(d){this.displayToggles.showBestResolutionText=!this.isWebRtcNetworkTest&&!(0,u.isNil)(d),(0,u.isNil)(d)||(this.displayData.resolution=`\u2066${d.width} x ${d.height}\u2069`,this.displayData.fps=d.frameRate)}ngOnDestroy(){this.zoneNameSub&&(this.zoneNameSub.unsubscribe(),this.zoneNameSub=null)}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(_n.VK),o.Y36(f.ed),o.Y36(Ze.R))},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-network-icons"]],inputs:{progressState:"progressState",nvTestData:"nvTestData",maxDisplayState:"maxDisplayState",isWebRtcNetworkTest:"isWebRtcNetworkTest"},features:[o.TTD],decls:17,vars:12,consts:[[1,"nv-ui-assets"],["class","network-test-icons",4,"ngIf"],["class","nv-dot-icons-container",4,"ngIf","ngIfElse"],["isWarningView",""],["class","network-isp-icons",4,"ngIf"],[1,"network-test-icons"],["svgIcon","storage",1,"nw-icon","custom-svg-icon"],[1,"caption","font-body3"],[1,"caption","zone","font-body3"],[1,"common-ui-errorDetails"],["fxLayout","row","fxLayoutAlign","center start",4,"ngIf"],["svgIcon","desktop_mac",1,"nw-icon","custom-svg-icon"],["svgIcon","devices",1,"nw-icon","custom-svg-icon"],[1,"nv-dot-icons-container"],[1,"nv-dot-icons","animated",3,"ngClass"],[3,"warningInfo"],[1,"network-isp-icons"],["svgIcon","isp",1,"nw-icon","custom-svg-icon"],["mat-font-set","material-icons",1,"nv-custom-icons","nw-icon","icon-ethernet"],["mat-font-set","material-icons",1,"nv-custom-icons","nw-icon","icon-wifi"],["svgIcon","network_signal",1,"nw-icon","custom-svg-icon"],["fxLayout","row","fxLayoutAlign","center start"],["fxLayout","column","fxLayoutAlign","start center"],[1,"result-text-container"],["fxFlex","","fxLayout","row","fxLayoutAlign","center start",1,"font-sub1"],["class","nv-custom-icons nw-icon-small result-icon success icon-optimized_reg","mat-font-set","material-icons",4,"ngIf","ngIfElse"],["isWarningIconView",""],[1,"result-text"],["class","result-resolution-container",4,"ngIf"],["mat-font-set","material-icons",1,"nv-custom-icons","nw-icon-small","result-icon","success","icon-optimized_reg"],["mat-font-set","material-icons",1,"nv-custom-icons","nw-icon-small","result-icon","icon-alert-circle_reg",3,"ngClass"],[1,"result-resolution-container"],[1,"font-body2"]],template:function(d,R){if(1&d&&(o.TgZ(0,"div",0),o.YNc(1,kt,5,3,"div",1),o.YNc(2,Zt,5,3,"div",1),o.YNc(3,dn,4,3,"div",2),o.YNc(4,gn,1,1,"ng-template",null,3,o.W1O),o.YNc(6,Ln,17,12,"div",4),o.TgZ(7,"div",5),o._UZ(8,"mat-icon",6),o.TgZ(9,"p",7),o._uU(10),o.ALo(11,"translate"),o.qZA(),o.TgZ(12,"p",8),o._uU(13),o.ALo(14,"translate"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(15,"div",9),o.YNc(16,vt,11,6,"div",10),o.qZA()),2&d){const ce=o.MAs(5);o.xp6(1),o.Q6J("ngIf",!R.mobileMode),o.xp6(1),o.Q6J("ngIf",R.mobileMode),o.xp6(1),o.Q6J("ngIf",R.displayToggles.showDotIcons)("ngIfElse",ce),o.xp6(3),o.Q6J("ngIf",!R.isWarningNetworkTest),o.xp6(4),o.Oqu(o.lcZ(11,8,"common.gfn")),o.xp6(3),o.Oqu(o.lcZ(14,10,R.displayData.zoneName)),o.xp6(3),o.Q6J("ngIf",R.displayToggles.showResults)}},styles:[".font-size-xxxs[_ngcontent-%COMP%]{font-size:8px}.font-size-xxs[_ngcontent-%COMP%]{font-size:11px}.font-size-sm[_ngcontent-%COMP%]{font-size:12px}.font-size-sm1[_ngcontent-%COMP%]{font-size:13px}.font-size-lg[_ngcontent-%COMP%]{font-size:14px}.font-size-xl[_ngcontent-%COMP%]{font-size:16px}.font-size-xl1[_ngcontent-%COMP%]{font-size:18px}.font-size-20[_ngcontent-%COMP%]{font-size:20px}.font-size-xxl[_ngcontent-%COMP%]{font-size:24px}.font-size-32[_ngcontent-%COMP%]{font-size:32px}.font-size-xxxl[_ngcontent-%COMP%]{font-size:40px}.line-height-sm[_ngcontent-%COMP%]{line-height:.75em}.line-height-sm1[_ngcontent-%COMP%]{line-height:1em}.line-height-14[_ngcontent-%COMP%]{line-height:14px}.line-height-12[_ngcontent-%COMP%]{line-height:12px}.line-height-16[_ngcontent-%COMP%]{line-height:16px}.line-height-md[_ngcontent-%COMP%]{line-height:1.5em}.line-height-lg[_ngcontent-%COMP%]{line-height:3em}.line-height-30[_ngcontent-%COMP%]{line-height:30px}.line-height-36[_ngcontent-%COMP%]{line-height:36px}.line-height-lg1[_ngcontent-%COMP%]{line-height:40px}.font-style-italic[_ngcontent-%COMP%]{font-style:italic}.font-style-bold[_ngcontent-%COMP%]{font-weight:bold}.font-style-normal[_ngcontent-%COMP%]{font-weight:normal}.font-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.font-lowercase[_ngcontent-%COMP%]{text-transform:lowercase}.text-transform-none[_ngcontent-%COMP%]{text-transform:none}.common-ui-network-container[_ngcontent-%COMP%]{background-color:#1f2224;max-width:789px}.common-ui-network-header[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:0;height:24px}.isLtr[_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.result-icon[_ngcontent-%COMP%]{font-size:24px;color:#76b900;vertical-align:middle}.isLtr[_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.result-text-container[_ngcontent-%COMP%]{margin-bottom:6px}.result-text[_ngcontent-%COMP%]{margin-top:1px}.nw-icon[_ngcontent-%COMP%]{height:24px;line-height:24px;width:auto;speak:none;font-size:48px;font-feature-settings:normal;font-variant:normal;align-self:center;color:#fff;opacity:.9;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;vertical-align:middle}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:22px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:22px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:22px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:22px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:22px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:22px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:22px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:22px}.icon-alert-bang[_ngcontent-%COMP%]{margin:0}.common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{font-size:24px;color:#76b900}.isLtr[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.common-ui-network-container[_ngcontent-%COMP%]   .result-icon.error[_ngcontent-%COMP%]{color:#ed1c24}.warn[_ngcontent-%COMP%]{color:#ffb538}.error[_ngcontent-%COMP%]{color:#ed1c24}.common-ui-errorDetails[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#76b900}.flex-1[_ngcontent-%COMP%]{flex:1}.nv-ui-assets[_ngcontent-%COMP%]{height:140px;line-height:138px;display:flex;flex-direction:row;overflow:hidden;justify-content:center;align-items:center}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:79px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:79px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:79px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:79px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:79px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:79px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:79px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:79px}.nv-dot-icons[_ngcontent-%COMP%]{border-radius:50%;width:8px;height:8px;align-self:center;display:-webkit-inline-box;background:rgba(255,255,255,.45)}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.animated[_ngcontent-%COMP%]{animation-duration:2s;animation-iteration-count:infinite;animation-fill-mode:both;animation-delay:1s}.caption[_ngcontent-%COMP%]{display:block;width:92px;text-align:center;margin-bottom:0}.caption.zone[_ngcontent-%COMP%]{margin-top:0}.common-ui-errorDetails[_ngcontent-%COMP%]{height:72px;display:flex;justify-content:center;margin:0 24px}.connect-error-details[_ngcontent-%COMP%]{display:flex}.common-ui-network-container[_ngcontent-%COMP%]   .common-ui-resultDetails[_ngcontent-%COMP%]{height:24px;margin-bottom:30px;align-self:center;margin-top:22px}.common-ui-network-content[_ngcontent-%COMP%]{height:181px;background-color:#0000004d}.common-ui-network-content[_ngcontent-%COMP%]   .nv-button-class[_ngcontent-%COMP%]{height:84px;display:flex}.common-ui-network-content[_ngcontent-%COMP%]   .override-warning-container[_ngcontent-%COMP%]{margin-top:5px;padding:0 24px;align-items:center}.common-ui-network-content[_ngcontent-%COMP%]   span.icon-alert-circle_reg[_ngcontent-%COMP%]{font-size:11px}.common-ui-network-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px;margin-top:0}.div-table[_ngcontent-%COMP%]{display:table!important;width:101%;padding-top:24px;padding-bottom:24px;max-width:100%}.div-table-row[_ngcontent-%COMP%]{display:table-row;width:auto;clear:both;height:28px}.div-table-col[_ngcontent-%COMP%]{display:table-column;width:140px;text-align:center}.isLtr[_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%]{float:left}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col[_ngcontent-%COMP%]{--dummy0: 0;float:left}.isRtl[_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col[_ngcontent-%COMP%]{--dummy0: 0;float:right}.div-table-col-header[_ngcontent-%COMP%]{display:table-column;width:236px}.isLtr[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{float:left}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy0: 0;float:left}.isRtl[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isLtr[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:inline-block;border:16px;border-top:.1rem solid #ffb538;width:177px}.yellowstyle[_ngcontent-%COMP%]   .narrowstyle[_ngcontent-%COMP%]{width:26px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:inline-block;border:16px;border-top:.1rem solid #ed1c24;width:177px}.redstyle[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ed1c24}.yellowstyle[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ffb538}.wifi_2_4_warn[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ffb538}.network-test-warning-icons[_ngcontent-%COMP%]   md-icon[_ngcontent-%COMP%]{color:#ffb538}.network-test-warning-icons[_ngcontent-%COMP%]{display:table}.network-assets[_ngcontent-%COMP%]{display:flex}.error-details[_ngcontent-%COMP%]{display:flex;margin-top:24px}.isLtr[_nghost-%COMP%]   .error-details[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-details[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .error-details[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-details[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.common-ui-error[_ngcontent-%COMP%]{width:480px}.redirect-page-div[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:center}.redirect-page-link[_ngcontent-%COMP%]{text-decoration:none}.vertical-gap-24[_ngcontent-%COMP%]{height:24px}.isLtr[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.isLtr[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{padding-right:48px}html[dir=ltr][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy2: 0;padding-right:48px}.isRtl[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{padding-left:48px}html[dir=rtl][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy2: 0;padding-left:48px}.network-progress-fill[_ngcontent-%COMP%]{height:50px;background-color:#1f2224}.network-test-icons[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:36px}.error-dlg-content[_ngcontent-%COMP%]{margin:24px;min-height:32px}.error-dlg-buttons[_ngcontent-%COMP%]{min-height:52px}.isLtr[_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{float:right}html[dir=ltr][_ngcontent-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isRtl[_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{float:left}html[dir=rtl][_ngcontent-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{--dummy0: 0;float:left}.error-dialog-button[_ngcontent-%COMP%]{margin:8px!important}.error-icon[_ngcontent-%COMP%]{font-size:32px!important}.isLtr[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.error-icon-error-dialog[_ngcontent-%COMP%]{font-size:32px;margin-top:20px;min-width:32px;line-height:5px}.isLtr[_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.isLtr[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{margin:23px 8px 23px 23px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{--dummy: 0;margin:23px 8px 23px 23px}.isRtl[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{margin:23px 23px 23px 8px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{--dummy: 0;margin:23px 23px 23px 8px}.active[_ngcontent-%COMP%]{background:#76b900;opacity:1;width:12px;height:12px;margin-bottom:-2px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.normal[_ngcontent-%COMP%]{background:rgba(255,255,255,.45);width:8px;height:8px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.error-background-active-btn[_ngcontent-%COMP%]{background-color:#76b900}.custom-svg-icon[_ngcontent-%COMP%]{width:48px;height:auto;margin-top:-10px;margin-bottom:-15px}.network-isp-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.network-test-warning-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.nv-dot-icons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}@media (max-width: 960px){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:60px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:60px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:60px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:60px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:60px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:60px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:60px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:60px}.network-test-results[_ngcontent-%COMP%]{min-width:80vw}.div-table-col-header[_ngcontent-%COMP%]{width:30%}.div-table-col[_ngcontent-%COMP%]{width:18%}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:120px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:120px}}@media (max-width: 790px){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:48px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:48px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:48px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:48px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:48px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:48px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:48px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:48px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80px}}@media (max-width: 690px){.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:60px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:60px}}@media screen and (max-width: 834px) and (max-height: 1194px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:36px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:36px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:36px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:36px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:36px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:36px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:36px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:36px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:87px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:87px}.nv-dot-icons[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.active[_ngcontent-%COMP%]{width:10px;height:10px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.normal[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.div-table-col-header[_ngcontent-%COMP%]{width:160px}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.network-test-content[_ngcontent-%COMP%]{display:block;max-height:65vh;overflow-y:auto;overflow-x:unset}.common-ui-network-container[_ngcontent-%COMP%]{margin:0;overflow:unset}.common-ui-network-header[_ngcontent-%COMP%]{margin:0}.common-ui-network-content[_ngcontent-%COMP%]{background-color:transparent}.nv-ui-assets[_ngcontent-%COMP%]{height:100px;line-height:0;margin-bottom:24px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:0}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:0}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:0}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:0}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.network-test-icons[_ngcontent-%COMP%]{height:16px;margin-top:0}.network-isp-icons[_ngcontent-%COMP%]{align-items:center}.nv-dot-icons[_ngcontent-%COMP%]{width:4px;height:4px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.active[_ngcontent-%COMP%]{width:8px;height:8px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.normal[_ngcontent-%COMP%]{width:4px;height:4px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.custom-svg-icon[_ngcontent-%COMP%]{width:24px}.caption[_ngcontent-%COMP%]{width:fit-content;margin-top:24px;align-self:center}.common-ui-errorDetails[_ngcontent-%COMP%]{height:fit-content;display:flex;justify-content:center}.isLtr[_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{margin:0 24px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{--dummy: 0;margin:0 24px}.isRtl[_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{margin:0 24px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{--dummy: 0;margin:0 24px}.network-test-error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;justify-content:center;align-items:stretch;max-width:100%}.icon-alert-bang[_ngcontent-%COMP%]{font-size:36px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:57px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:57px}.result-text[_ngcontent-%COMP%]{margin-top:0}.network-test-results[_ngcontent-%COMP%]{padding-top:16px}.mat-tab-group[_ngcontent-%COMP%]{background-color:#0000004d}.isLtr[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.div-table-row[_ngcontent-%COMP%]{justify-content:space-between;max-width:240px}.isLtr[_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{padding-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{--dummy2: 0;padding-right:8px}.isRtl[_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{padding-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{--dummy2: 0;padding-left:8px}}@media screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.network-test-content[_ngcontent-%COMP%]{max-height:50vh}.common-ui-network-container[_ngcontent-%COMP%]{width:536px;max-height:80vh}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait){.common-ui-network-container[_ngcontent-%COMP%]{width:fit-content}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}}@media screen and (max-width: 320px) and (max-height: 568px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-left:16px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-right:16px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-right:16px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-left:16px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.active[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:1px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:1px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:1px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:1px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:1px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:1px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:1px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:1px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:40px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:40px}.result-text[_ngcontent-%COMP%]{width:70%}}"]}),J})();function gt(J,Oe){1&J&&(o.TgZ(0,"div",3),o._UZ(1,"mat-icon",18),o.TgZ(2,"p",5),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA()),2&J&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"networkTest.networkTestMyComputer")))}function At(J,Oe){1&J&&(o.TgZ(0,"div",3),o._UZ(1,"mat-icon",19),o.TgZ(2,"p",5),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA()),2&J&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"networkTest.myDevice")))}function le(J,Oe){1&J&&o._UZ(0,"gfn-server-status-link",20)}function De(J,Oe){if(1&J&&o._UZ(0,"a",21),2&J){const d=o.oxw();o.s9C("translate",d.firewallLinkText),o.Q6J("href",d.firewallHelpUrl,o.LSH)("shortUrl",d.firewallHelpShortUrl)}}function nt(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"div",22),o.TgZ(1,"button",23),o.NdJ("click",function(){return o.CHM(d),o.oxw().onClickTryAgain()}),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"button",24),o.NdJ("click",function(){return o.CHM(d),o.oxw().onClickClose()}),o._uU(5),o.ALo(6,"translate"),o.qZA(),o.qZA()}2&J&&(o.xp6(2),o.hij(" ",o.lcZ(3,2,"common.tryAgain")," "),o.xp6(3),o.hij(" ",o.lcZ(6,4,"common.close")," "))}function bt(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"div",22),o.TgZ(1,"button",23),o.NdJ("click",function(){return o.CHM(d),o.oxw().onClickClose()}),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"button",24),o.NdJ("click",function(){return o.CHM(d),o.oxw().onClickTryAgain()}),o._uU(5),o.ALo(6,"translate"),o.qZA(),o.qZA()}2&J&&(o.xp6(2),o.hij(" ",o.lcZ(3,2,"networkTest.continueAnyway")," "),o.xp6(3),o.hij(" ",o.lcZ(6,4,"common.tryAgain")," "))}let Wt=(()=>{class J{constructor(d){var R;this.showFirewallHelpLink=!1,this.nvClient=ge.BhR.MallClient,this.tryAgain=new o.vpe,this.close=new o.vpe,this.networkTestStates=rt.AS,this.mobileMode=!!(null===(R=null==d?void 0:d.featureEnablement)||void 0===R?void 0:R.mobileMode)}ngOnInit(){this.autoRun=this.nvClient===ge.BhR.StreamingClient,this.isWebRtcNetworkTestFromStreamer=this.isWebRtcNetworkTest&&this.autoRun}onClickClose(){this.close.emit()}onClickTryAgain(){this.tryAgain.emit()}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(_n.VK))},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-network-test-error"]],inputs:{networkTestErrorText:"networkTestErrorText",zoneName:"zoneName",showFirewallHelpLink:"showFirewallHelpLink",firewallHelpUrl:"firewallHelpUrl",firewallHelpShortUrl:"firewallHelpShortUrl",firewallLinkText:"firewallLinkText",nvClient:"nvClient",isWebRtcNetworkTest:"isWebRtcNetworkTest"},outputs:{tryAgain:"tryAgain",close:"close"},decls:26,vars:16,consts:[[1,"nv-ui-assets"],["class","network-test-icons",4,"ngIf"],[3,"warningInfo"],[1,"network-test-icons"],["svgIcon","storage",1,"nw-icon","custom-svg-icon"],[1,"caption","font-body3"],[1,"caption","zone","font-body3"],[1,"common-ui-errorDetails"],["fxLayout","row","fxLayoutAlign","center start"],["fxLayout","column","fxLayoutAlign","start center"],[1,"result-text-container"],["fxFlex","","fxLayout","row","fxLayoutAlign","center start",1,"font-sub1"],["mat-font-set","nv-custom-icon",1,"nv-custom-icons","nw-icon-small","result-icon","icon-alert-circle_reg","error"],["fxFlex","","fxLayout","column","fxLayoutAlign","start start"],[1,"result-text"],["class","error-url",4,"ngIf"],["class","font-body2-link",3,"href","shortUrl","translate",4,"ngIf"],["class","nv-button-class error-dlg-buttons",4,"ngIf"],["svgIcon","desktop_mac",1,"nw-icon","custom-svg-icon"],["svgIcon","devices",1,"nw-icon","custom-svg-icon"],[1,"error-url"],[1,"font-body2-link",3,"href","shortUrl","translate"],[1,"nv-button-class","error-dlg-buttons"],["mat-button","",1,"error-dialog-button","font-button2",3,"click"],["mat-button","",1,"error-dialog-button","font-button2","error-background-active-btn",3,"click"]],template:function(d,R){1&d&&(o.TgZ(0,"div",0),o.YNc(1,gt,5,3,"div",1),o.YNc(2,At,5,3,"div",1),o._UZ(3,"gfn-network-test-warning",2),o.TgZ(4,"div",3),o._UZ(5,"mat-icon",4),o.TgZ(6,"p",5),o._uU(7),o.ALo(8,"translate"),o.qZA(),o.TgZ(9,"p",6),o._uU(10),o.ALo(11,"translate"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"div",7),o.TgZ(13,"div",8),o.TgZ(14,"div",9),o.TgZ(15,"div",10),o.TgZ(16,"div",11),o._UZ(17,"mat-icon",12),o.TgZ(18,"div",13),o.TgZ(19,"div",14),o._uU(20),o.ALo(21,"translate"),o.qZA(),o.YNc(22,le,1,0,"gfn-server-status-link",15),o.YNc(23,De,1,3,"a",16),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(24,nt,7,6,"div",17),o.YNc(25,bt,7,6,"div",17)),2&d&&(o.xp6(1),o.Q6J("ngIf",!R.mobileMode),o.xp6(1),o.Q6J("ngIf",R.mobileMode),o.xp6(1),o.Q6J("warningInfo",R.networkTestStates.Bad),o.xp6(4),o.Oqu(o.lcZ(8,10,"common.gfn")),o.xp6(3),o.Oqu(o.lcZ(11,12,R.zoneName)),o.xp6(10),o.Oqu(o.lcZ(21,14,R.networkTestErrorText)),o.xp6(2),o.Q6J("ngIf",!R.showFirewallHelpLink),o.xp6(1),o.Q6J("ngIf",R.showFirewallHelpLink),o.xp6(1),o.Q6J("ngIf",!R.isWebRtcNetworkTestFromStreamer),o.xp6(1),o.Q6J("ngIf",R.isWebRtcNetworkTestFromStreamer))},styles:[".font-size-xxxs[_ngcontent-%COMP%]{font-size:8px}.font-size-xxs[_ngcontent-%COMP%]{font-size:11px}.font-size-sm[_ngcontent-%COMP%]{font-size:12px}.font-size-sm1[_ngcontent-%COMP%]{font-size:13px}.font-size-lg[_ngcontent-%COMP%]{font-size:14px}.font-size-xl[_ngcontent-%COMP%]{font-size:16px}.font-size-xl1[_ngcontent-%COMP%]{font-size:18px}.font-size-20[_ngcontent-%COMP%]{font-size:20px}.font-size-xxl[_ngcontent-%COMP%]{font-size:24px}.font-size-32[_ngcontent-%COMP%]{font-size:32px}.font-size-xxxl[_ngcontent-%COMP%]{font-size:40px}.line-height-sm[_ngcontent-%COMP%]{line-height:.75em}.line-height-sm1[_ngcontent-%COMP%]{line-height:1em}.line-height-14[_ngcontent-%COMP%]{line-height:14px}.line-height-12[_ngcontent-%COMP%]{line-height:12px}.line-height-16[_ngcontent-%COMP%]{line-height:16px}.line-height-md[_ngcontent-%COMP%]{line-height:1.5em}.line-height-lg[_ngcontent-%COMP%]{line-height:3em}.line-height-30[_ngcontent-%COMP%]{line-height:30px}.line-height-36[_ngcontent-%COMP%]{line-height:36px}.line-height-lg1[_ngcontent-%COMP%]{line-height:40px}.font-style-italic[_ngcontent-%COMP%]{font-style:italic}.font-style-bold[_ngcontent-%COMP%]{font-weight:bold}.font-style-normal[_ngcontent-%COMP%]{font-weight:normal}.font-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.font-lowercase[_ngcontent-%COMP%]{text-transform:lowercase}.text-transform-none[_ngcontent-%COMP%]{text-transform:none}.common-ui-network-container[_ngcontent-%COMP%]{background-color:#1f2224;max-width:789px}.common-ui-network-header[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:0;height:24px}.isLtr[_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.result-icon[_ngcontent-%COMP%]{font-size:24px;color:#76b900;vertical-align:middle}.isLtr[_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.result-text-container[_ngcontent-%COMP%]{margin-bottom:6px}.result-text[_ngcontent-%COMP%]{margin-top:1px}.nw-icon[_ngcontent-%COMP%]{height:24px;line-height:24px;width:auto;speak:none;font-size:48px;font-feature-settings:normal;font-variant:normal;align-self:center;color:#fff;opacity:.9;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;vertical-align:middle}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:22px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:22px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:22px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:22px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:22px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:22px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:22px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:22px}.icon-alert-bang[_ngcontent-%COMP%]{margin:0}.common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{font-size:24px;color:#76b900}.isLtr[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.common-ui-network-container[_ngcontent-%COMP%]   .result-icon.error[_ngcontent-%COMP%]{color:#ed1c24}.warn[_ngcontent-%COMP%]{color:#ffb538}.error[_ngcontent-%COMP%]{color:#ed1c24}.common-ui-errorDetails[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#76b900}.flex-1[_ngcontent-%COMP%]{flex:1}.nv-ui-assets[_ngcontent-%COMP%]{height:140px;line-height:138px;display:flex;flex-direction:row;overflow:hidden;justify-content:center;align-items:center}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:79px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:79px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:79px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:79px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:79px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:79px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:79px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:79px}.nv-dot-icons[_ngcontent-%COMP%]{border-radius:50%;width:8px;height:8px;align-self:center;display:-webkit-inline-box;background:rgba(255,255,255,.45)}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.animated[_ngcontent-%COMP%]{animation-duration:2s;animation-iteration-count:infinite;animation-fill-mode:both;animation-delay:1s}.caption[_ngcontent-%COMP%]{display:block;width:92px;text-align:center;margin-bottom:0}.caption.zone[_ngcontent-%COMP%]{margin-top:0}.common-ui-errorDetails[_ngcontent-%COMP%]{height:72px;display:flex;justify-content:center;margin:0 24px}.connect-error-details[_ngcontent-%COMP%]{display:flex}.common-ui-network-container[_ngcontent-%COMP%]   .common-ui-resultDetails[_ngcontent-%COMP%]{height:24px;margin-bottom:30px;align-self:center;margin-top:22px}.common-ui-network-content[_ngcontent-%COMP%]{height:181px;background-color:#0000004d}.common-ui-network-content[_ngcontent-%COMP%]   .nv-button-class[_ngcontent-%COMP%]{height:84px;display:flex}.common-ui-network-content[_ngcontent-%COMP%]   .override-warning-container[_ngcontent-%COMP%]{margin-top:5px;padding:0 24px;align-items:center}.common-ui-network-content[_ngcontent-%COMP%]   span.icon-alert-circle_reg[_ngcontent-%COMP%]{font-size:11px}.common-ui-network-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px;margin-top:0}.div-table[_ngcontent-%COMP%]{display:table!important;width:101%;padding-top:24px;padding-bottom:24px;max-width:100%}.div-table-row[_ngcontent-%COMP%]{display:table-row;width:auto;clear:both;height:28px}.div-table-col[_ngcontent-%COMP%]{display:table-column;width:140px;text-align:center}.isLtr[_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%]{float:left}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col[_ngcontent-%COMP%]{--dummy0: 0;float:left}.isRtl[_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col[_ngcontent-%COMP%]{--dummy0: 0;float:right}.div-table-col-header[_ngcontent-%COMP%]{display:table-column;width:236px}.isLtr[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{float:left}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy0: 0;float:left}.isRtl[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isLtr[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:inline-block;border:16px;border-top:.1rem solid #ffb538;width:177px}.yellowstyle[_ngcontent-%COMP%]   .narrowstyle[_ngcontent-%COMP%]{width:26px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:inline-block;border:16px;border-top:.1rem solid #ed1c24;width:177px}.redstyle[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ed1c24}.yellowstyle[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ffb538}.wifi_2_4_warn[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ffb538}.network-test-warning-icons[_ngcontent-%COMP%]   md-icon[_ngcontent-%COMP%]{color:#ffb538}.network-test-warning-icons[_ngcontent-%COMP%]{display:table}.network-assets[_ngcontent-%COMP%]{display:flex}.error-details[_ngcontent-%COMP%]{display:flex;margin-top:24px}.isLtr[_nghost-%COMP%]   .error-details[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-details[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .error-details[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-details[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.common-ui-error[_ngcontent-%COMP%]{width:480px}.redirect-page-div[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:center}.redirect-page-link[_ngcontent-%COMP%]{text-decoration:none}.vertical-gap-24[_ngcontent-%COMP%]{height:24px}.isLtr[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.isLtr[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{padding-right:48px}html[dir=ltr][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy2: 0;padding-right:48px}.isRtl[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{padding-left:48px}html[dir=rtl][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy2: 0;padding-left:48px}.network-progress-fill[_ngcontent-%COMP%]{height:50px;background-color:#1f2224}.network-test-icons[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:36px}.error-dlg-content[_ngcontent-%COMP%]{margin:24px;min-height:32px}.error-dlg-buttons[_ngcontent-%COMP%]{min-height:52px}.isLtr[_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{float:right}html[dir=ltr][_ngcontent-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isRtl[_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{float:left}html[dir=rtl][_ngcontent-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{--dummy0: 0;float:left}.error-dialog-button[_ngcontent-%COMP%]{margin:8px!important}.error-icon[_ngcontent-%COMP%]{font-size:32px!important}.isLtr[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.error-icon-error-dialog[_ngcontent-%COMP%]{font-size:32px;margin-top:20px;min-width:32px;line-height:5px}.isLtr[_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.isLtr[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{margin:23px 8px 23px 23px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{--dummy: 0;margin:23px 8px 23px 23px}.isRtl[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{margin:23px 23px 23px 8px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{--dummy: 0;margin:23px 23px 23px 8px}.active[_ngcontent-%COMP%]{background:#76b900;opacity:1;width:12px;height:12px;margin-bottom:-2px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.normal[_ngcontent-%COMP%]{background:rgba(255,255,255,.45);width:8px;height:8px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.error-background-active-btn[_ngcontent-%COMP%]{background-color:#76b900}.custom-svg-icon[_ngcontent-%COMP%]{width:48px;height:auto;margin-top:-10px;margin-bottom:-15px}.network-isp-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.network-test-warning-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.nv-dot-icons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}@media (max-width: 960px){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:60px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:60px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:60px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:60px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:60px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:60px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:60px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:60px}.network-test-results[_ngcontent-%COMP%]{min-width:80vw}.div-table-col-header[_ngcontent-%COMP%]{width:30%}.div-table-col[_ngcontent-%COMP%]{width:18%}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:120px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:120px}}@media (max-width: 790px){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:48px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:48px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:48px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:48px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:48px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:48px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:48px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:48px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80px}}@media (max-width: 690px){.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:60px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:60px}}@media screen and (max-width: 834px) and (max-height: 1194px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:36px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:36px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:36px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:36px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:36px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:36px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:36px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:36px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:87px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:87px}.nv-dot-icons[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.active[_ngcontent-%COMP%]{width:10px;height:10px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.normal[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.div-table-col-header[_ngcontent-%COMP%]{width:160px}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.network-test-content[_ngcontent-%COMP%]{display:block;max-height:65vh;overflow-y:auto;overflow-x:unset}.common-ui-network-container[_ngcontent-%COMP%]{margin:0;overflow:unset}.common-ui-network-header[_ngcontent-%COMP%]{margin:0}.common-ui-network-content[_ngcontent-%COMP%]{background-color:transparent}.nv-ui-assets[_ngcontent-%COMP%]{height:100px;line-height:0;margin-bottom:24px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:0}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:0}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:0}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:0}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.network-test-icons[_ngcontent-%COMP%]{height:16px;margin-top:0}.network-isp-icons[_ngcontent-%COMP%]{align-items:center}.nv-dot-icons[_ngcontent-%COMP%]{width:4px;height:4px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.active[_ngcontent-%COMP%]{width:8px;height:8px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.normal[_ngcontent-%COMP%]{width:4px;height:4px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.custom-svg-icon[_ngcontent-%COMP%]{width:24px}.caption[_ngcontent-%COMP%]{width:fit-content;margin-top:24px;align-self:center}.common-ui-errorDetails[_ngcontent-%COMP%]{height:fit-content;display:flex;justify-content:center}.isLtr[_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{margin:0 24px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{--dummy: 0;margin:0 24px}.isRtl[_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{margin:0 24px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{--dummy: 0;margin:0 24px}.network-test-error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;justify-content:center;align-items:stretch;max-width:100%}.icon-alert-bang[_ngcontent-%COMP%]{font-size:36px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:57px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:57px}.result-text[_ngcontent-%COMP%]{margin-top:0}.network-test-results[_ngcontent-%COMP%]{padding-top:16px}.mat-tab-group[_ngcontent-%COMP%]{background-color:#0000004d}.isLtr[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.div-table-row[_ngcontent-%COMP%]{justify-content:space-between;max-width:240px}.isLtr[_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{padding-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{--dummy2: 0;padding-right:8px}.isRtl[_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{padding-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{--dummy2: 0;padding-left:8px}}@media screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.network-test-content[_ngcontent-%COMP%]{max-height:50vh}.common-ui-network-container[_ngcontent-%COMP%]{width:536px;max-height:80vh}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait){.common-ui-network-container[_ngcontent-%COMP%]{width:fit-content}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}}@media screen and (max-width: 320px) and (max-height: 568px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-left:16px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-right:16px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-right:16px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-left:16px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.active[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:1px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:1px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:1px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:1px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:1px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:1px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:1px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:1px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:40px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:40px}.result-text[_ngcontent-%COMP%]{width:70%}}"]}),J})();var ln=e(772);const Sn=function(J,Oe){return{warn:J,error:Oe}};function qe(J,Oe){if(1&J&&(o.TgZ(0,"div",6),o.TgZ(1,"div",7),o.TgZ(2,"p"),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA(),o.TgZ(5,"div",10),o.TgZ(6,"p",11),o._uU(7),o.qZA(),o.qZA(),o.TgZ(8,"div",8),o.TgZ(9,"p",11),o._uU(10),o.qZA(),o.qZA(),o.TgZ(11,"div",8),o.TgZ(12,"p",11),o._uU(13),o.qZA(),o.qZA(),o.qZA()),2&J){const d=Oe.$implicit;o.xp6(3),o.Oqu(o.lcZ(4,5,d.settingLabel)),o.xp6(2),o.Q6J("ngClass",o.WLB(7,Sn,d.isPoorValue,d.isBadValue)),o.xp6(2),o.Oqu(d.measuredValue),o.xp6(3),o.Oqu(d.requiredValue),o.xp6(3),o.Oqu(d.recommendedValue)}}function Ut(J,Oe){if(1&J&&(o.TgZ(0,"div",5),o.TgZ(1,"div",6),o.TgZ(2,"div",7),o._uU(3,"\xa0"),o.qZA(),o.TgZ(4,"div",8),o.TgZ(5,"p"),o._uU(6),o.ALo(7,"translate"),o.qZA(),o.qZA(),o.TgZ(8,"div",8),o.TgZ(9,"p"),o._uU(10),o.ALo(11,"translate"),o.qZA(),o.qZA(),o.TgZ(12,"div",8),o.TgZ(13,"p"),o._uU(14),o.ALo(15,"translate"),o.qZA(),o.qZA(),o.qZA(),o.YNc(16,qe,14,10,"div",9),o.qZA()),2&J){const d=o.oxw();o.xp6(6),o.Oqu(o.lcZ(7,4,"networkTest.networkTestMeasured")),o.xp6(4),o.Oqu(o.lcZ(11,6,"networkTest.networkTestRequired")),o.xp6(4),o.Oqu(o.lcZ(15,8,"common.recommended")),o.xp6(2),o.Q6J("ngForOf",d.propertyData)}}function M(J,Oe){if(1&J&&(o.TgZ(0,"div",5),o.TgZ(1,"div",13),o.TgZ(2,"p"),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA(),o.TgZ(5,"div",6),o.TgZ(6,"p",14),o._uU(7),o.ALo(8,"translate"),o.qZA(),o.TgZ(9,"p",15),o._uU(10),o.qZA(),o.qZA(),o.TgZ(11,"div",6),o.TgZ(12,"p",14),o._uU(13),o.ALo(14,"translate"),o.qZA(),o.TgZ(15,"p",16),o._uU(16),o.qZA(),o.qZA(),o.TgZ(17,"div",17),o.TgZ(18,"p",14),o._uU(19),o.ALo(20,"translate"),o.qZA(),o.TgZ(21,"p",16),o._uU(22),o.qZA(),o.qZA(),o.qZA()),2&J){const d=Oe.$implicit;o.xp6(3),o.Oqu(o.lcZ(4,8,d.settingLabel)),o.xp6(4),o.Oqu(o.lcZ(8,10,"networkTest.networkTestMeasured")),o.xp6(2),o.Q6J("ngClass",o.WLB(16,Sn,d.isPoorValue,d.isBadValue)),o.xp6(1),o.hij(" ",d.measuredValue," "),o.xp6(3),o.Oqu(o.lcZ(14,12,"networkTest.networkTestRequired")),o.xp6(3),o.Oqu(d.requiredValue),o.xp6(3),o.Oqu(o.lcZ(20,14,"common.recommended")),o.xp6(3),o.Oqu(d.recommendedValue)}}function re(J,Oe){if(1&J&&(o.TgZ(0,"div",5),o.YNc(1,M,23,19,"div",12),o.qZA()),2&J){const d=o.oxw();o.xp6(1),o.Q6J("ngForOf",d.propertyData)}}function Ce(J,Oe){1&J&&(o.ynx(0),o.TgZ(1,"span",18),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.BQk()),2&J&&(o.xp6(2),o.Oqu(o.lcZ(3,1,"networkTest.overrideZoneWarning")))}let ke=(()=>{class J{constructor(d){this.networkConfigurationService=d}ngOnInit(){this.networkConfigurationService.getNetworkOverride().pipe((0,Ge.q)(1)).subscribe(d=>{this.showZoneOverrideWarning=!(0,u.isNil)(d)&&this.nvTestData.result.bandwidth.measured>=this.nvTestData.result.bandwidth.recommended&&this.nvTestData.result.frameLoss.measured<this.nvTestData.result.frameLoss.recommended&&this.nvTestData.result.latency.measured<this.nvTestData.result.latency.recommended&&"0"===this.nvTestData.networkInfo.IsVPN&&this.nvTestData.networkInfo.NetworkType!==f.VV.WiFi2_4}),this.constructResults()}constructResults(){this.propertyData=[{settingLabel:"networkTest.bandwidth",measuredValue:this.nvTestData.result.bandwidth.measured>=this.nvTestData.result.bandwidth.recommended?`> ${this.nvTestData.result.bandwidth.measured}`:this.nvTestData.result.bandwidth.measured,recommendedValue:`> ${this.nvTestData.result.bandwidth.recommended}`,requiredValue:`> ${this.nvTestData.result.bandwidth.limit}`,isPoorValue:(0,u.inRange)(this.nvTestData.result.bandwidth.measured,this.nvTestData.result.bandwidth.limit,this.nvTestData.result.bandwidth.recommended),isBadValue:this.nvTestData.result.bandwidth.measured<=this.nvTestData.result.bandwidth.limit},{settingLabel:"networkTest.packetLoss",measuredValue:this.nvTestData.result.frameLoss.measured.toFixed(1),recommendedValue:`< ${this.nvTestData.result.frameLoss.recommended.toFixed(1)}`,requiredValue:`< ${this.nvTestData.result.frameLoss.limit.toFixed(1)}`,isPoorValue:(0,u.inRange)(this.nvTestData.result.frameLoss.measured,this.nvTestData.result.frameLoss.recommended,this.nvTestData.result.frameLoss.limit),isBadValue:this.nvTestData.result.frameLoss.measured>=this.nvTestData.result.frameLoss.limit},{settingLabel:"networkTest.latency",measuredValue:this.nvTestData.result.latency.measured,recommendedValue:`< ${this.nvTestData.result.latency.recommended}`,requiredValue:`< ${this.nvTestData.result.latency.limit}`,isPoorValue:(0,u.inRange)(this.nvTestData.result.latency.measured,this.nvTestData.result.latency.recommended,this.nvTestData.result.latency.limit),isBadValue:this.nvTestData.result.latency.measured>=this.nvTestData.result.latency.limit}]}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(Ie.X))},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-network-completed"]],inputs:{nvTestData:"nvTestData",isIPhone:"isIPhone"},decls:6,vars:3,consts:[["fxLayout","column",1,"common-ui-network-content"],["fxLayout","column","fxFlex","",1,"div-table","font-sub2"],["fxLayout","column","fxFlex","",4,"ngIf"],["fxLayout","row",1,"override-warning-container"],[4,"ngIf"],["fxLayout","column","fxFlex",""],["fxLayout","row","fxFlex","",1,"div-table-row"],[1,"div-table-col-header","font-body2"],[1,"div-table-col","font-body2"],["class","div-table-row","fxLayout","row","fxFlex","",4,"ngFor","ngForOf"],[1,"div-table-col","font-body2",3,"ngClass"],["dir","auto"],["fxLayout","column","fxFlex","",4,"ngFor","ngForOf"],[1,"font-sub2"],[1,"font-body3"],["dir","auto",1,"font-sub3",3,"ngClass"],["dir","auto",1,"font-sub3"],["fxLayout","row","fxFlex","",1,"div-table-row","font-body3"],[1,"font-body3-italic"]],template:function(d,R){1&d&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.YNc(2,Ut,17,10,"div",2),o.YNc(3,re,2,1,"div",2),o.TgZ(4,"div",3),o.YNc(5,Ce,4,3,"ng-container",4),o.qZA(),o.qZA(),o.qZA()),2&d&&(o.xp6(2),o.Q6J("ngIf",!R.isIPhone),o.xp6(1),o.Q6J("ngIf",R.isIPhone),o.xp6(2),o.Q6J("ngIf",R.showZoneOverrideWarning))},directives:[G.xw,G.yH,n.O5,n.sg,n.mk,x.oO,ln.Lv],pipes:[m.X$],styles:[".font-size-xxxs[_ngcontent-%COMP%]{font-size:8px}.font-size-xxs[_ngcontent-%COMP%]{font-size:11px}.font-size-sm[_ngcontent-%COMP%]{font-size:12px}.font-size-sm1[_ngcontent-%COMP%]{font-size:13px}.font-size-lg[_ngcontent-%COMP%]{font-size:14px}.font-size-xl[_ngcontent-%COMP%]{font-size:16px}.font-size-xl1[_ngcontent-%COMP%]{font-size:18px}.font-size-20[_ngcontent-%COMP%]{font-size:20px}.font-size-xxl[_ngcontent-%COMP%]{font-size:24px}.font-size-32[_ngcontent-%COMP%]{font-size:32px}.font-size-xxxl[_ngcontent-%COMP%]{font-size:40px}.line-height-sm[_ngcontent-%COMP%]{line-height:.75em}.line-height-sm1[_ngcontent-%COMP%]{line-height:1em}.line-height-14[_ngcontent-%COMP%]{line-height:14px}.line-height-12[_ngcontent-%COMP%]{line-height:12px}.line-height-16[_ngcontent-%COMP%]{line-height:16px}.line-height-md[_ngcontent-%COMP%]{line-height:1.5em}.line-height-lg[_ngcontent-%COMP%]{line-height:3em}.line-height-30[_ngcontent-%COMP%]{line-height:30px}.line-height-36[_ngcontent-%COMP%]{line-height:36px}.line-height-lg1[_ngcontent-%COMP%]{line-height:40px}.font-style-italic[_ngcontent-%COMP%]{font-style:italic}.font-style-bold[_ngcontent-%COMP%]{font-weight:bold}.font-style-normal[_ngcontent-%COMP%]{font-weight:normal}.font-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.font-lowercase[_ngcontent-%COMP%]{text-transform:lowercase}.text-transform-none[_ngcontent-%COMP%]{text-transform:none}.common-ui-network-container[_ngcontent-%COMP%]{background-color:#1f2224;max-width:789px}.common-ui-network-header[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:0;height:24px}.isLtr[_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.result-icon[_ngcontent-%COMP%]{font-size:24px;color:#76b900;vertical-align:middle}.isLtr[_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.result-text-container[_ngcontent-%COMP%]{margin-bottom:6px}.result-text[_ngcontent-%COMP%]{margin-top:1px}.nw-icon[_ngcontent-%COMP%]{height:24px;line-height:24px;width:auto;speak:none;font-size:48px;font-feature-settings:normal;font-variant:normal;align-self:center;color:#fff;opacity:.9;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;vertical-align:middle}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:22px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:22px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:22px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:22px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:22px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:22px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:22px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:22px}.icon-alert-bang[_ngcontent-%COMP%]{margin:0}.common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{font-size:24px;color:#76b900}.isLtr[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.common-ui-network-container[_ngcontent-%COMP%]   .result-icon.error[_ngcontent-%COMP%]{color:#ed1c24}.warn[_ngcontent-%COMP%]{color:#ffb538}.error[_ngcontent-%COMP%]{color:#ed1c24}.common-ui-errorDetails[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#76b900}.flex-1[_ngcontent-%COMP%]{flex:1}.nv-ui-assets[_ngcontent-%COMP%]{height:140px;line-height:138px;display:flex;flex-direction:row;overflow:hidden;justify-content:center;align-items:center}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:79px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:79px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:79px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:79px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:79px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:79px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:79px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:79px}.nv-dot-icons[_ngcontent-%COMP%]{border-radius:50%;width:8px;height:8px;align-self:center;display:-webkit-inline-box;background:rgba(255,255,255,.45)}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.animated[_ngcontent-%COMP%]{animation-duration:2s;animation-iteration-count:infinite;animation-fill-mode:both;animation-delay:1s}.caption[_ngcontent-%COMP%]{display:block;width:92px;text-align:center;margin-bottom:0}.caption.zone[_ngcontent-%COMP%]{margin-top:0}.common-ui-errorDetails[_ngcontent-%COMP%]{height:72px;display:flex;justify-content:center;margin:0 24px}.connect-error-details[_ngcontent-%COMP%]{display:flex}.common-ui-network-container[_ngcontent-%COMP%]   .common-ui-resultDetails[_ngcontent-%COMP%]{height:24px;margin-bottom:30px;align-self:center;margin-top:22px}.common-ui-network-content[_ngcontent-%COMP%]{height:181px;background-color:#0000004d}.common-ui-network-content[_ngcontent-%COMP%]   .nv-button-class[_ngcontent-%COMP%]{height:84px;display:flex}.common-ui-network-content[_ngcontent-%COMP%]   .override-warning-container[_ngcontent-%COMP%]{margin-top:5px;padding:0 24px;align-items:center}.common-ui-network-content[_ngcontent-%COMP%]   span.icon-alert-circle_reg[_ngcontent-%COMP%]{font-size:11px}.common-ui-network-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px;margin-top:0}.div-table[_ngcontent-%COMP%]{display:table!important;width:101%;padding-top:24px;padding-bottom:24px;max-width:100%}.div-table-row[_ngcontent-%COMP%]{display:table-row;width:auto;clear:both;height:28px}.div-table-col[_ngcontent-%COMP%]{display:table-column;width:140px;text-align:center}.isLtr[_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%]{float:left}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col[_ngcontent-%COMP%]{--dummy0: 0;float:left}.isRtl[_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col[_ngcontent-%COMP%]{--dummy0: 0;float:right}.div-table-col-header[_ngcontent-%COMP%]{display:table-column;width:236px}.isLtr[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{float:left}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy0: 0;float:left}.isRtl[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isLtr[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:inline-block;border:16px;border-top:.1rem solid #ffb538;width:177px}.yellowstyle[_ngcontent-%COMP%]   .narrowstyle[_ngcontent-%COMP%]{width:26px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:inline-block;border:16px;border-top:.1rem solid #ed1c24;width:177px}.redstyle[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ed1c24}.yellowstyle[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ffb538}.wifi_2_4_warn[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ffb538}.network-test-warning-icons[_ngcontent-%COMP%]   md-icon[_ngcontent-%COMP%]{color:#ffb538}.network-test-warning-icons[_ngcontent-%COMP%]{display:table}.network-assets[_ngcontent-%COMP%]{display:flex}.error-details[_ngcontent-%COMP%]{display:flex;margin-top:24px}.isLtr[_nghost-%COMP%]   .error-details[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-details[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .error-details[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-details[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.common-ui-error[_ngcontent-%COMP%]{width:480px}.redirect-page-div[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:center}.redirect-page-link[_ngcontent-%COMP%]{text-decoration:none}.vertical-gap-24[_ngcontent-%COMP%]{height:24px}.isLtr[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.isLtr[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{padding-right:48px}html[dir=ltr][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy2: 0;padding-right:48px}.isRtl[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{padding-left:48px}html[dir=rtl][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy2: 0;padding-left:48px}.network-progress-fill[_ngcontent-%COMP%]{height:50px;background-color:#1f2224}.network-test-icons[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:36px}.error-dlg-content[_ngcontent-%COMP%]{margin:24px;min-height:32px}.error-dlg-buttons[_ngcontent-%COMP%]{min-height:52px}.isLtr[_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{float:right}html[dir=ltr][_ngcontent-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isRtl[_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{float:left}html[dir=rtl][_ngcontent-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{--dummy0: 0;float:left}.error-dialog-button[_ngcontent-%COMP%]{margin:8px!important}.error-icon[_ngcontent-%COMP%]{font-size:32px!important}.isLtr[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.error-icon-error-dialog[_ngcontent-%COMP%]{font-size:32px;margin-top:20px;min-width:32px;line-height:5px}.isLtr[_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.isLtr[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{margin:23px 8px 23px 23px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{--dummy: 0;margin:23px 8px 23px 23px}.isRtl[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{margin:23px 23px 23px 8px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{--dummy: 0;margin:23px 23px 23px 8px}.active[_ngcontent-%COMP%]{background:#76b900;opacity:1;width:12px;height:12px;margin-bottom:-2px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.normal[_ngcontent-%COMP%]{background:rgba(255,255,255,.45);width:8px;height:8px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.error-background-active-btn[_ngcontent-%COMP%]{background-color:#76b900}.custom-svg-icon[_ngcontent-%COMP%]{width:48px;height:auto;margin-top:-10px;margin-bottom:-15px}.network-isp-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.network-test-warning-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.nv-dot-icons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}@media (max-width: 960px){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:60px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:60px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:60px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:60px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:60px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:60px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:60px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:60px}.network-test-results[_ngcontent-%COMP%]{min-width:80vw}.div-table-col-header[_ngcontent-%COMP%]{width:30%}.div-table-col[_ngcontent-%COMP%]{width:18%}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:120px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:120px}}@media (max-width: 790px){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:48px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:48px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:48px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:48px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:48px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:48px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:48px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:48px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80px}}@media (max-width: 690px){.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:60px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:60px}}@media screen and (max-width: 834px) and (max-height: 1194px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:36px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:36px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:36px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:36px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:36px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:36px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:36px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:36px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:87px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:87px}.nv-dot-icons[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.active[_ngcontent-%COMP%]{width:10px;height:10px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.normal[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.div-table-col-header[_ngcontent-%COMP%]{width:160px}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.network-test-content[_ngcontent-%COMP%]{display:block;max-height:65vh;overflow-y:auto;overflow-x:unset}.common-ui-network-container[_ngcontent-%COMP%]{margin:0;overflow:unset}.common-ui-network-header[_ngcontent-%COMP%]{margin:0}.common-ui-network-content[_ngcontent-%COMP%]{background-color:transparent}.nv-ui-assets[_ngcontent-%COMP%]{height:100px;line-height:0;margin-bottom:24px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:0}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:0}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:0}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:0}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.network-test-icons[_ngcontent-%COMP%]{height:16px;margin-top:0}.network-isp-icons[_ngcontent-%COMP%]{align-items:center}.nv-dot-icons[_ngcontent-%COMP%]{width:4px;height:4px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.active[_ngcontent-%COMP%]{width:8px;height:8px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.normal[_ngcontent-%COMP%]{width:4px;height:4px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.custom-svg-icon[_ngcontent-%COMP%]{width:24px}.caption[_ngcontent-%COMP%]{width:fit-content;margin-top:24px;align-self:center}.common-ui-errorDetails[_ngcontent-%COMP%]{height:fit-content;display:flex;justify-content:center}.isLtr[_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{margin:0 24px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{--dummy: 0;margin:0 24px}.isRtl[_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{margin:0 24px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{--dummy: 0;margin:0 24px}.network-test-error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;justify-content:center;align-items:stretch;max-width:100%}.icon-alert-bang[_ngcontent-%COMP%]{font-size:36px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:57px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:57px}.result-text[_ngcontent-%COMP%]{margin-top:0}.network-test-results[_ngcontent-%COMP%]{padding-top:16px}.mat-tab-group[_ngcontent-%COMP%]{background-color:#0000004d}.isLtr[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.div-table-row[_ngcontent-%COMP%]{justify-content:space-between;max-width:240px}.isLtr[_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{padding-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{--dummy2: 0;padding-right:8px}.isRtl[_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{padding-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{--dummy2: 0;padding-left:8px}}@media screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.network-test-content[_ngcontent-%COMP%]{max-height:50vh}.common-ui-network-container[_ngcontent-%COMP%]{width:536px;max-height:80vh}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait){.common-ui-network-container[_ngcontent-%COMP%]{width:fit-content}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}}@media screen and (max-width: 320px) and (max-height: 568px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-left:16px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-right:16px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-right:16px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-left:16px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.active[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:1px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:1px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:1px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:1px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:1px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:1px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:1px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:1px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:40px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:40px}.result-text[_ngcontent-%COMP%]{width:70%}}"]}),J})();const tt=function(J){return{narrowstyle:J}};let ut=(()=>{class J{constructor(){this.isWifi_2_4=!1,this.isBadNetworkResult=!1}ngOnInit(){switch(this.warningInfo){case rt.AS.PoorWifi_2_4:this.isWifi_2_4=!0;break;case rt.AS.Bad:this.isBadNetworkResult=!0}}}return J.\u0275fac=function(d){return new(d||J)},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-network-test-warning"]],inputs:{warningInfo:"warningInfo"},decls:4,vars:7,consts:[[1,"network-test-warning-icons",3,"ngClass"],[3,"ngClass"],["mat-font-set","material-icons",1,"nv-custom-icons","nw-icon","icon-alert-bang"]],template:function(d,R){1&d&&(o.TgZ(0,"div",0),o._UZ(1,"hr",1),o._UZ(2,"mat-icon",2),o._UZ(3,"hr",1),o.qZA()),2&d&&(o.Q6J("ngClass",R.isBadNetworkResult?"redstyle":"yellowstyle"),o.xp6(1),o.Q6J("ngClass",o.VKq(3,tt,R.isWifi_2_4)),o.xp6(2),o.Q6J("ngClass",o.VKq(5,tt,R.isWifi_2_4)))},directives:[n.mk,x.oO,v.Hw],styles:[".font-size-xxxs[_ngcontent-%COMP%]{font-size:8px}.font-size-xxs[_ngcontent-%COMP%]{font-size:11px}.font-size-sm[_ngcontent-%COMP%]{font-size:12px}.font-size-sm1[_ngcontent-%COMP%]{font-size:13px}.font-size-lg[_ngcontent-%COMP%]{font-size:14px}.font-size-xl[_ngcontent-%COMP%]{font-size:16px}.font-size-xl1[_ngcontent-%COMP%]{font-size:18px}.font-size-20[_ngcontent-%COMP%]{font-size:20px}.font-size-xxl[_ngcontent-%COMP%]{font-size:24px}.font-size-32[_ngcontent-%COMP%]{font-size:32px}.font-size-xxxl[_ngcontent-%COMP%]{font-size:40px}.line-height-sm[_ngcontent-%COMP%]{line-height:.75em}.line-height-sm1[_ngcontent-%COMP%]{line-height:1em}.line-height-14[_ngcontent-%COMP%]{line-height:14px}.line-height-12[_ngcontent-%COMP%]{line-height:12px}.line-height-16[_ngcontent-%COMP%]{line-height:16px}.line-height-md[_ngcontent-%COMP%]{line-height:1.5em}.line-height-lg[_ngcontent-%COMP%]{line-height:3em}.line-height-30[_ngcontent-%COMP%]{line-height:30px}.line-height-36[_ngcontent-%COMP%]{line-height:36px}.line-height-lg1[_ngcontent-%COMP%]{line-height:40px}.font-style-italic[_ngcontent-%COMP%]{font-style:italic}.font-style-bold[_ngcontent-%COMP%]{font-weight:bold}.font-style-normal[_ngcontent-%COMP%]{font-weight:normal}.font-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.font-lowercase[_ngcontent-%COMP%]{text-transform:lowercase}.text-transform-none[_ngcontent-%COMP%]{text-transform:none}.common-ui-network-container[_ngcontent-%COMP%]{background-color:#1f2224;max-width:789px}.common-ui-network-header[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:0;height:24px}.isLtr[_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-header[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.result-icon[_ngcontent-%COMP%]{font-size:24px;color:#76b900;vertical-align:middle}.isLtr[_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.result-text-container[_ngcontent-%COMP%]{margin-bottom:6px}.result-text[_ngcontent-%COMP%]{margin-top:1px}.nw-icon[_ngcontent-%COMP%]{height:24px;line-height:24px;width:auto;speak:none;font-size:48px;font-feature-settings:normal;font-variant:normal;align-self:center;color:#fff;opacity:.9;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;vertical-align:middle}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:22px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:22px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:22px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:22px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:22px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:22px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:22px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:22px}.icon-alert-bang[_ngcontent-%COMP%]{margin:0}.common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{font-size:24px;color:#76b900}.isLtr[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.common-ui-network-container[_ngcontent-%COMP%]   .result-icon.error[_ngcontent-%COMP%]{color:#ed1c24}.warn[_ngcontent-%COMP%]{color:#ffb538}.error[_ngcontent-%COMP%]{color:#ed1c24}.common-ui-errorDetails[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#76b900}.flex-1[_ngcontent-%COMP%]{flex:1}.nv-ui-assets[_ngcontent-%COMP%]{height:140px;line-height:138px;display:flex;flex-direction:row;overflow:hidden;justify-content:center;align-items:center}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:79px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:79px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:79px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:79px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:79px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:79px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:79px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:79px}.nv-dot-icons[_ngcontent-%COMP%]{border-radius:50%;width:8px;height:8px;align-self:center;display:-webkit-inline-box;background:rgba(255,255,255,.45)}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.animated[_ngcontent-%COMP%]{animation-duration:2s;animation-iteration-count:infinite;animation-fill-mode:both;animation-delay:1s}.caption[_ngcontent-%COMP%]{display:block;width:92px;text-align:center;margin-bottom:0}.caption.zone[_ngcontent-%COMP%]{margin-top:0}.common-ui-errorDetails[_ngcontent-%COMP%]{height:72px;display:flex;justify-content:center;margin:0 24px}.connect-error-details[_ngcontent-%COMP%]{display:flex}.common-ui-network-container[_ngcontent-%COMP%]   .common-ui-resultDetails[_ngcontent-%COMP%]{height:24px;margin-bottom:30px;align-self:center;margin-top:22px}.common-ui-network-content[_ngcontent-%COMP%]{height:181px;background-color:#0000004d}.common-ui-network-content[_ngcontent-%COMP%]   .nv-button-class[_ngcontent-%COMP%]{height:84px;display:flex}.common-ui-network-content[_ngcontent-%COMP%]   .override-warning-container[_ngcontent-%COMP%]{margin-top:5px;padding:0 24px;align-items:center}.common-ui-network-content[_ngcontent-%COMP%]   span.icon-alert-circle_reg[_ngcontent-%COMP%]{font-size:11px}.common-ui-network-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px;margin-top:0}.div-table[_ngcontent-%COMP%]{display:table!important;width:101%;padding-top:24px;padding-bottom:24px;max-width:100%}.div-table-row[_ngcontent-%COMP%]{display:table-row;width:auto;clear:both;height:28px}.div-table-col[_ngcontent-%COMP%]{display:table-column;width:140px;text-align:center}.isLtr[_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%]{float:left}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col[_ngcontent-%COMP%]{--dummy0: 0;float:left}.isRtl[_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col[_ngcontent-%COMP%]{--dummy0: 0;float:right}.div-table-col-header[_ngcontent-%COMP%]{display:table-column;width:236px}.isLtr[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{float:left}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy0: 0;float:left}.isRtl[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{float:right}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isLtr[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table-col-header[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:inline-block;border:16px;border-top:.1rem solid #ffb538;width:177px}.yellowstyle[_ngcontent-%COMP%]   .narrowstyle[_ngcontent-%COMP%]{width:26px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{display:inline-block;border:16px;border-top:.1rem solid #ed1c24;width:177px}.redstyle[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ed1c24}.yellowstyle[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ffb538}.wifi_2_4_warn[_ngcontent-%COMP%]   .nv-custom-icons[_ngcontent-%COMP%]:before{color:#ffb538}.network-test-warning-icons[_ngcontent-%COMP%]   md-icon[_ngcontent-%COMP%]{color:#ffb538}.network-test-warning-icons[_ngcontent-%COMP%]{display:table}.network-assets[_ngcontent-%COMP%]{display:flex}.error-details[_ngcontent-%COMP%]{display:flex;margin-top:24px}.isLtr[_nghost-%COMP%]   .error-details[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-details[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .error-details[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-details[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.common-ui-error[_ngcontent-%COMP%]{width:480px}.redirect-page-div[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:center}.redirect-page-link[_ngcontent-%COMP%]{text-decoration:none}.vertical-gap-24[_ngcontent-%COMP%]{height:24px}.isLtr[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{margin-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy3: 0;margin-left:24px}.isRtl[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{margin-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy3: 0;margin-right:24px}.isLtr[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{padding-right:48px}html[dir=ltr][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy2: 0;padding-right:48px}.isRtl[_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{padding-left:48px}html[dir=rtl][_ngcontent-%COMP%]   .network-tips-link[_ngcontent-%COMP%]{--dummy2: 0;padding-left:48px}.network-progress-fill[_ngcontent-%COMP%]{height:50px;background-color:#1f2224}.network-test-icons[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:36px}.error-dlg-content[_ngcontent-%COMP%]{margin:24px;min-height:32px}.error-dlg-buttons[_ngcontent-%COMP%]{min-height:52px}.isLtr[_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{float:right}html[dir=ltr][_ngcontent-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isRtl[_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{float:left}html[dir=rtl][_ngcontent-%COMP%]   .error-dlg-buttons[_ngcontent-%COMP%]{--dummy0: 0;float:left}.error-dialog-button[_ngcontent-%COMP%]{margin:8px!important}.error-icon[_ngcontent-%COMP%]{font-size:32px!important}.isLtr[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.error-icon-error-dialog[_ngcontent-%COMP%]{font-size:32px;margin-top:20px;min-width:32px;line-height:5px}.isLtr[_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .error-icon-error-dialog[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.isLtr[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{margin:23px 8px 23px 23px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{--dummy: 0;margin:23px 8px 23px 23px}.isRtl[_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{margin:23px 23px 23px 8px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-network-container[_ngcontent-%COMP%]   .close-dlg-btn[_ngcontent-%COMP%]{--dummy: 0;margin:23px 23px 23px 8px}.active[_ngcontent-%COMP%]{background:#76b900;opacity:1;width:12px;height:12px;margin-bottom:-2px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.normal[_ngcontent-%COMP%]{background:rgba(255,255,255,.45);width:8px;height:8px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.error-background-active-btn[_ngcontent-%COMP%]{background-color:#76b900}.custom-svg-icon[_ngcontent-%COMP%]{width:48px;height:auto;margin-top:-10px;margin-bottom:-15px}.network-isp-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.network-test-warning-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.nv-dot-icons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}@media (max-width: 960px){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:60px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:60px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:60px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:60px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:60px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:60px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:60px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:60px}.network-test-results[_ngcontent-%COMP%]{min-width:80vw}.div-table-col-header[_ngcontent-%COMP%]{width:30%}.div-table-col[_ngcontent-%COMP%]{width:18%}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:120px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:120px}}@media (max-width: 790px){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:48px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:48px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:48px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:48px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:48px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:48px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:48px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:48px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80px}}@media (max-width: 690px){.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:60px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:60px}}@media screen and (max-width: 834px) and (max-height: 1194px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:36px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:36px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:36px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:36px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:36px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:36px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:36px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:36px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:87px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:87px}.nv-dot-icons[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.active[_ngcontent-%COMP%]{width:10px;height:10px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.normal[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}.div-table-col-header[_ngcontent-%COMP%]{width:160px}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.network-test-content[_ngcontent-%COMP%]{display:block;max-height:65vh;overflow-y:auto;overflow-x:unset}.common-ui-network-container[_ngcontent-%COMP%]{margin:0;overflow:unset}.common-ui-network-header[_ngcontent-%COMP%]{margin:0}.common-ui-network-content[_ngcontent-%COMP%]{background-color:transparent}.nv-ui-assets[_ngcontent-%COMP%]{height:100px;line-height:0;margin-bottom:24px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-left:0}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy3: 0;margin-right:0}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-right:0}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-right:0}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{margin-left:0}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy4: 0;margin-left:0}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.network-test-icons[_ngcontent-%COMP%]{height:16px;margin-top:0}.network-isp-icons[_ngcontent-%COMP%]{align-items:center}.nv-dot-icons[_ngcontent-%COMP%]{width:4px;height:4px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.active[_ngcontent-%COMP%]{width:8px;height:8px;margin-bottom:0}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.normal[_ngcontent-%COMP%]{width:4px;height:4px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:4px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:4px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:4px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:4px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:4px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:4px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:4px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:4px}.custom-svg-icon[_ngcontent-%COMP%]{width:24px}.caption[_ngcontent-%COMP%]{width:fit-content;margin-top:24px;align-self:center}.common-ui-errorDetails[_ngcontent-%COMP%]{height:fit-content;display:flex;justify-content:center}.isLtr[_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{margin:0 24px}html[dir=ltr][_ngcontent-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{--dummy: 0;margin:0 24px}.isRtl[_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{margin:0 24px}html[dir=rtl][_ngcontent-%COMP%]   .common-ui-errorDetails[_ngcontent-%COMP%]{--dummy: 0;margin:0 24px}.network-test-error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;justify-content:center;align-items:stretch;max-width:100%}.icon-alert-bang[_ngcontent-%COMP%]{font-size:36px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:57px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:57px}.result-text[_ngcontent-%COMP%]{margin-top:0}.network-test-results[_ngcontent-%COMP%]{padding-top:16px}.mat-tab-group[_ngcontent-%COMP%]{background-color:#0000004d}.isLtr[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .div-table[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .div-table[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .div-table[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.div-table-row[_ngcontent-%COMP%]{justify-content:space-between;max-width:240px}.isLtr[_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{padding-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{--dummy2: 0;padding-right:8px}.isRtl[_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{padding-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .network-test-action-buttons[_ngcontent-%COMP%]{--dummy2: 0;padding-left:8px}}@media screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.network-test-content[_ngcontent-%COMP%]{max-height:50vh}.common-ui-network-container[_ngcontent-%COMP%]{width:536px;max-height:80vh}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait){.common-ui-network-container[_ngcontent-%COMP%]{width:fit-content}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:6px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-left:6px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy3: 0;margin-right:6px}.isLtr[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-right:6px}html[dir=ltr][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-right:6px}.isRtl[_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nw-icon[_ngcontent-%COMP%]{margin-left:6px}html[dir=rtl][_ngcontent-%COMP%]   .nw-icon[_ngcontent-%COMP%]{--dummy4: 0;margin-left:6px}}@media screen and (max-width: 320px) and (max-height: 568px) and (orientation: portrait){.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-left:16px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy1: 0;padding-right:16px}.isLtr[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-right:16px}.isRtl[_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{padding-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .nv-ui-assets[_ngcontent-%COMP%]{--dummy2: 0;padding-left:16px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .nv-dot-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.active[_ngcontent-%COMP%]{width:6px;height:6px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:1px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-left:1px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:1px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy3: 0;margin-right:1px}.isLtr[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-right:1px}html[dir=ltr][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-right:1px}.isRtl[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{margin-left:1px}html[dir=rtl][_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{--dummy4: 0;margin-left:1px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:2px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-left:2px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:2px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy3: 0;margin-right:2px}.isLtr[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-right:2px}html[dir=ltr][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-right:2px}.isRtl[_nghost-%COMP%]   .normal[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .normal[_ngcontent-%COMP%]{margin-left:2px}html[dir=rtl][_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{--dummy4: 0;margin-left:2px}.redstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:40px}.yellowstyle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:40px}.result-text[_ngcontent-%COMP%]{width:70%}}"]}),J})();function Ft(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"button",2),o.NdJ("click",function(){return o.CHM(d),o.oxw().execLeftButtonAction()}),o._uU(1),o.ALo(2,"uppercase"),o.ALo(3,"translate"),o.qZA()}if(2&J){const d=o.oxw();o.xp6(1),o.hij(" ",o.lcZ(2,1,o.lcZ(3,3,d.leftButtonText))," ")}}let zt=(()=>{class J{constructor(){this.tryAgain=new o.vpe,this.close=new o.vpe,this.continue=new o.vpe,this.showButton=!0}ngOnInit(){switch(this.placementCriteria.progressState){case rt.AS.Excellent:this.showButton=this.placementCriteria.showAdditionalActions,this.leftButtonText="common.tryAgain",this.rightButtonText=this.placementCriteria.autoRun?"common.continueTitleCase":"common.ok";break;case rt.AS.Bad:this.leftButtonText=this.placementCriteria.autoRun?"networkTest.continueAnyway":"common.close",this.rightButtonText="common.tryAgain";break;default:this.leftButtonText="common.tryAgain",this.rightButtonText=this.placementCriteria.autoRun?"common.continueTitleCase":"common.close"}}execLeftButtonAction(){switch(this.placementCriteria.progressState){case rt.AS.Bad:this.placementCriteria.autoRun?this.continue.emit():this.close.emit();break;default:this.tryAgain.emit()}}execRightButtonAction(){switch(this.placementCriteria.progressState){case rt.AS.Bad:this.tryAgain.emit();break;default:this.placementCriteria.autoRun?this.continue.emit():this.close.emit()}}}return J.\u0275fac=function(d){return new(d||J)},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-nw-test-button-placer"]],inputs:{placementCriteria:"placementCriteria"},outputs:{tryAgain:"tryAgain",close:"close",continue:"continue"},decls:6,vars:6,consts:[["mat-button","","class","font-button2 back-hover-override",3,"click",4,"ngIf"],["mat-button","",1,"action-btn","font-button2",3,"click"],["mat-button","",1,"font-button2","back-hover-override",3,"click"]],template:function(d,R){1&d&&(o.TgZ(0,"div"),o.YNc(1,Ft,4,5,"button",0),o.TgZ(2,"button",1),o.NdJ("click",function(){return R.execRightButtonAction()}),o._uU(3),o.ALo(4,"uppercase"),o.ALo(5,"translate"),o.qZA(),o.qZA()),2&d&&(o.xp6(1),o.Q6J("ngIf",R.showButton),o.xp6(2),o.hij(" ",o.lcZ(4,2,o.lcZ(5,4,R.rightButtonText))," "))},directives:[n.O5,P.lW],pipes:[n.gd,m.X$],styles:[".action-btn[_ngcontent-%COMP%]{height:36px;min-width:64px;border-radius:0;margin:13px 8px;background-color:#76b900}.isLtr[_nghost-%COMP%]   .action-btn[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{--dummy1: 0;padding-left:16px}.isRtl[_nghost-%COMP%]   .action-btn[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{--dummy1: 0;padding-right:16px}.isLtr[_nghost-%COMP%]   .action-btn[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{--dummy2: 0;padding-right:16px}.isRtl[_nghost-%COMP%]   .action-btn[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{--dummy2: 0;padding-left:16px}.back-hover-override[_ngcontent-%COMP%]:hover{background-color:#ffffff0a}"]}),J})(),$t=(()=>{class J{}return J.\u0275fac=function(d){return new(d||J)},J.\u0275mod=o.oAB({type:J}),J.\u0275inj=o.cJS({imports:[[n.ez,m.aw,i.o9,ae.hp]]}),J})();var fn=e(8382);let Jt=(()=>{class J{}return J.\u0275fac=function(d){return new(d||J)},J.\u0275mod=o.oAB({type:J}),J.\u0275inj=o.cJS({imports:[[y.Is,v.Ps,P.ot,n.ez,m.aw,i.o9,k.Nh,$t,ae.hp]]}),J})();o.B6R(Ee,[n.O5,I.e,n.RF,n.mk,x.oO,n.n9,G.xw,G.Wh,Ct,ke,k.SP,k.uX,fn.q,Wt,zt],[m.X$]),o.B6R(tn,[G.s9,Ee],[]),o.B6R(Ct,[n.O5,v.Hw,n.mk,x.oO,ut,G.xw,G.Wh,G.yH],[m.X$]),o.B6R(Wt,[n.O5,v.Hw,ut,G.xw,G.Wh,G.yH,Mn.Y,C.E,m.Pi,P.lW],[m.X$]);var yn=e(90490),An=e(42720),Pt=e(23550),Ke=e(56409),Pe=e(1054),it=e(73159),Lt=e(71959),Dt=e(47420),cn=e(84622);const Rn=["welcomeContentContainer"],Wn=["welcomeContentLastChild"],so=["welcomeContentFirstChild"];function ki(J,Oe){if(1&J&&(o._UZ(0,"h1",16),o.ALo(1,"translate")),2&J){const d=o.oxw();o.Q6J("innerHTML",o.xi3(1,1,"oobe.gfnVersionText",d.gfnVersionText),o.oJD)}}const zi=function(J){return{"gray-out":J}};function Ki(J,Oe){if(1&J&&(o.TgZ(0,"div",17),o._UZ(1,"mat-icon",18),o.qZA()),2&J){const d=o.oxw();o.xp6(1),o.Q6J("ngClass",o.VKq(1,zi,!d.turnOnUpIndicator))}}function $i(J,Oe){if(1&J&&(o._UZ(0,"h1",16),o.ALo(1,"translate")),2&J){const d=o.oxw();o.Q6J("innerHTML",o.xi3(1,1,"oobe.gfnVersionText",d.gfnVersionText),o.oJD)}}const Ei=function(J){return{cookiePolicyLink:J}};function Yi(J,Oe){if(1&J&&(o._UZ(0,"p",10),o.ALo(1,"translate")),2&J){const d=o.oxw();o.Q6J("innerHTML",o.xi3(1,2,"oobe.oobeCookiePolicyText",o.VKq(5,Ei,d.cookiePolicyLink)),o.oJD)("shortUrl",d.cookiePolicyShortUrl)}}function ao(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"div",19),o._UZ(1,"mat-divider"),o.TgZ(2,"mat-checkbox",20),o.NdJ("ngModelChange",function(ce){return o.CHM(d),o.oxw().anonUserConsent=ce}),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA()}if(2&J){const d=o.oxw();o.xp6(2),o.Q6J("ngModel",d.anonUserConsent),o.xp6(1),o.hij(" ",o.lcZ(4,2,"oobe.oobeAnonUserConsent")," ")}}function Qi(J,Oe){if(1&J&&(o.TgZ(0,"div",17),o._UZ(1,"mat-icon",21),o.qZA()),2&J){const d=o.oxw();o.xp6(1),o.Q6J("ngClass",o.VKq(1,zi,!d.turnOnDownIndicator))}}const lo=function(J){return{tv:J}},co=function(J){return{privacyPolicyLink:J}},go=function(J){return{termsOfUseLink:J}},Ui=function(J){return{"anon-user":J}};let Si=(()=>{class J{constructor(d,R,ce,_e,Le,Re,Xe,mt,Gt){this.oobeService=R,this.telemetryService=ce,this.userConsentService=_e,this.oobeTelemetryService=Le,this.gfnSdkService=Re,this.guestModeService=Xe,this.spatialNavigationService=mt,this.redirectService=Gt,this.gfnVersionText={productVersion:""},this.privacyPolicyShortUrl=at.hD[at.hE.PrivacyPolicy],this.cookiePolicyShortUrl=at.hD[at.hE.CookiePolicy],this.termsOfUseShortUrl=at.hD[at.hE.TermsConditions],this.welcomeContentViewed=!0,this.welcomeContentVisible=!0,this.anonUserConsent=!1,this.turnOnUpIndicator=!1,this.turnOnDownIndicator=!1,this.closeOobeDialog=new o.vpe,this.logger=d.getLogger("OobeWelcomeComponent"),this.isBrowserPlatform=f.ng.isBrowserPlatform(),this.isAnonUser$=this.guestModeService.isGuestMode?(0,N.of)(!1):this.gfnSdkService.getIsAnonymousUser(),this.destroy$=new oe.xQ}ngOnInit(){this.gfnVersionText.productVersion=this.oobeService.getProductVersion,this.parentScreen=this.telemetryService.getScreen(),this.telemetryService.setScreen(ge.CGJ.ScreenOobeWelcome);const d=this.redirectService.getRedirectUrl(at.hE.PrivacyPolicy).pipe((0,Ge.q)(1)),R=this.redirectService.getRedirectUrl(at.hE.TermsConditions).pipe((0,Ge.q)(1)),ce=this.redirectService.getRedirectUrl(at.hE.CookiePolicy).pipe((0,Ge.q)(1));(0,yn.$R)(d,R,ce).pipe((0,xe.R)(this.destroy$)).subscribe(([_e,Le,Re])=>{const Xe=this.tvMode?"font-tv-welcome-content-link":"font-body2-link";this.privacyPolicyLink=`href="${_e}" class="${Xe}"`,this.cookiePolicyLink=`href="${Re}" class="${Xe}"`,this.termsOfUseLink=`href="${Le}" class="${Xe} no-wrap"`}),this.userConsentService.getAnonUserConsentData().pipe((0,xe.R)(this.destroy$)).subscribe(_e=>{var Le;this.anonUserConsent=(null===(Le=_e.userConsent)||void 0===Le?void 0:Le.technical)===a.p6.Full})}ngAfterViewInit(){setTimeout(()=>{this.checkIfWelcomeContentViewed()},200),this.spatialNavigationService.setStartingPoint(this.welcomeContentFirstTermElement.nativeElement)}onScrollWelcomeContent(){this.checkIfWelcomeContentViewed()}onResize(){this.checkIfWelcomeContentViewed()}onOrientationChange(){this.welcomeContentElement.nativeElement.scrollTop=0,setTimeout(()=>{this.checkIfWelcomeContentViewed()})}checkIfWelcomeContentViewed(){const d=this.welcomeContentElement.nativeElement.getBoundingClientRect().bottom,R=this.welcomeContentLastTermElement.nativeElement.getBoundingClientRect().bottom,ce=this.welcomeContentElement.nativeElement.getBoundingClientRect().top,_e=this.welcomeContentFirstTermElement.nativeElement.getBoundingClientRect().top;if(this.welcomeContentVisible=R<=d&&_e>=ce,this.welcomeContentViewed=R<=d,this.tvMode){const Le=0===this.welcomeContentElement.nativeElement.scrollTop;this.turnOnUpIndicator=!this.welcomeContentVisible&&!Le,this.turnOnDownIndicator=!this.welcomeContentVisible&&!this.welcomeContentViewed}}agreeAndContinue(){let d=null,R=null;this.logger.info("oobe, welcome screen - agree and continue clicked"),this.saveTermsSubscription=(0,An.D)({saveTouResponse:this.oobeService.saveTermsOfUseAcceptedVersion(),isAnonUser:this.isAnonUser$}).pipe((0,St.b)(ce=>{this.logger.info("Success writing accepted version"+ce.saveTouResponse),this.oobeTelemetryService.oobeCompleted=!0}),(0,Se.zg)(ce=>(d=ce.isAnonUser,ce.isAnonUser?(this.logger.info("oobe welcome setAnonUserConsentData. TechnicalConsent="+this.anonUserConsent),R=this.anonUserConsent?a.ys:a.l3,this.userConsentService.setAnonUserConsentData(R)):(this.logger.event("oobe welcome setDefaultConsentData"),R=this.guestModeService.isGuestMode?a.$P:a.l3,this.userConsentService.setDefaultConsentData(R))))).pipe((0,Ge.q)(1)).subscribe(()=>{this.logger.info("Successfully set default consent data"),this.oobeTelemetryService.sendOobeAcceptEvent(ge.Ols.OobeAgreeAndContinue,d,R.technical),this.closeOobeDialog.emit("oobe closed")},ce=>{this.logger.error("Failed to set default consent data",ce)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete(),this.saveTermsSubscription&&this.saveTermsSubscription.unsubscribe(),this.telemetryService.setScreen(this.parentScreen)}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(f.ed),o.Y36(Pt.H),o.Y36(a.y0),o.Y36(Ke.Z),o.Y36(Pe.u),o.Y36(it.s),o.Y36(Lt.o),o.Y36(ae.jr),o.Y36(at.VH))},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-oobe-welcome"]],viewQuery:function(d,R){if(1&d&&(o.Gf(Rn,5),o.Gf(Wn,5),o.Gf(so,5)),2&d){let ce;o.iGM(ce=o.CRH())&&(R.welcomeContentElement=ce.first),o.iGM(ce=o.CRH())&&(R.welcomeContentLastTermElement=ce.first),o.iGM(ce=o.CRH())&&(R.welcomeContentFirstTermElement=ce.first)}},hostBindings:function(d,R){1&d&&o.NdJ("resize",function(_e){return R.onResize(_e)},!1,o.Jf7)("orientationchange",function(){return R.onOrientationChange()},!1,o.Jf7)},inputs:{tvMode:"tvMode"},outputs:{closeOobeDialog:"closeOobeDialog"},decls:34,vars:42,consts:[["fxFlex","","fxLayout","column","nvSpatialNavigationContainer","","captureAndRestore","false","nvTrapFocus","",1,"container",3,"ngClass"],["fxFlex","1 0 0",1,"welcome-header-container"],[1,"header-logo"],["src","shared/assets/img/GFN_logo.svg"],["class","font-header6",3,"innerHTML",4,"ngIf"],["class","indicator-icon","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxFlex","8 0 0",1,"welcome-content-container",3,"scroll"],["welcomeContentContainer",""],[1,"welcome-text","font-body2"],["welcomeContentFirstChild",""],[3,"innerHTML","shortUrl"],[3,"innerHTML","shortUrl",4,"ngIf"],["welcomeContentLastChild",""],["fxFlex","none","fxLayout","column","class","anon-user-consent-container nv-hig",4,"ngIf"],[1,"welcome-footer-container",3,"ngClass"],["mat-raised-button","",1,"oobe-action-button","font-button2",3,"disabled","click"],[1,"font-header6",3,"innerHTML"],["fxLayout","row","fxLayoutAlign","center center",1,"indicator-icon"],["svgIcon","carrot_up",3,"ngClass"],["fxFlex","none","fxLayout","column",1,"anon-user-consent-container","nv-hig"],["fxLayoutFill","",1,"anon-user-consent-checkbox","font-body2",3,"ngModel","ngModelChange"],["svgIcon","carrot_down",3,"ngClass"]],template:function(d,R){1&d&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o._UZ(3,"img",3),o.qZA(),o.YNc(4,ki,2,4,"h1",4),o.YNc(5,Ki,2,3,"div",5),o.qZA(),o.TgZ(6,"div",6,7),o.NdJ("scroll",function(){return R.onScrollWelcomeContent()}),o.YNc(8,$i,2,4,"h1",4),o.TgZ(9,"div",8),o.TgZ(10,"p"),o.TgZ(11,"span",null,9),o._uU(13),o.ALo(14,"translate"),o.qZA(),o.qZA(),o.TgZ(15,"p"),o._uU(16),o.ALo(17,"translate"),o.qZA(),o.TgZ(18,"p"),o._UZ(19,"span",10),o.ALo(20,"translate"),o.qZA(),o.YNc(21,Yi,2,7,"p",11),o.TgZ(22,"p"),o._UZ(23,"span",10,12),o.ALo(25,"translate"),o.qZA(),o.qZA(),o.qZA(),o.YNc(26,ao,5,4,"div",13),o.ALo(27,"async"),o.TgZ(28,"div",14),o.ALo(29,"async"),o.YNc(30,Qi,2,3,"div",5),o.TgZ(31,"button",15),o.NdJ("click",function(){return R.agreeAndContinue()}),o._uU(32),o.ALo(33,"translate"),o.qZA(),o.qZA(),o.qZA()),2&d&&(o.Q6J("ngClass",o.VKq(34,lo,R.tvMode)),o.xp6(4),o.Q6J("ngIf",!R.tvMode),o.xp6(1),o.Q6J("ngIf",R.tvMode),o.xp6(1),o.Udp("overflow-y",R.welcomeContentVisible?"hidden":"auto"),o.xp6(2),o.Q6J("ngIf",R.tvMode),o.xp6(5),o.Oqu(o.lcZ(14,18,"oobe.oobeStatement")),o.xp6(3),o.Oqu(o.lcZ(17,20,"oobe.oobeText")),o.xp6(3),o.Q6J("innerHTML",o.xi3(20,22,"oobe.oobePrivacyText",o.VKq(36,co,R.privacyPolicyLink)),o.oJD)("shortUrl",R.privacyPolicyShortUrl),o.xp6(2),o.Q6J("ngIf",R.isBrowserPlatform),o.xp6(2),o.Q6J("innerHTML",o.xi3(25,25,"oobe.agreeToTermsOfUse",o.VKq(38,go,R.termsOfUseLink)),o.oJD)("shortUrl",R.termsOfUseShortUrl),o.xp6(3),o.Q6J("ngIf",o.lcZ(27,28,R.isAnonUser$)),o.xp6(2),o.Q6J("ngClass",o.VKq(40,Ui,o.lcZ(29,30,R.isAnonUser$))),o.xp6(2),o.Q6J("ngIf",R.tvMode),o.xp6(1),o.Q6J("disabled",!R.welcomeContentViewed),o.xp6(1),o.hij(" ",o.lcZ(33,32,"oobe.agreeAndContinue")," "))},directives:[G.yH,G.xw,Dt.N,I.e,n.mk,x.oO,n.O5,C.E,P.lW,G.Wh,v.Hw,O.d,ue.oG,cn.xZ,D.JJ,D.On],pipes:[m.X$,n.Ov],styles:[".container[_ngcontent-%COMP%]{outline:none}.welcome-header-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:14px;margin-bottom:14px}.welcome-content-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.welcome-content-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:none}.header-logo[_ngcontent-%COMP%]{width:fit-content;height:fit-content}.header-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:100%}.welcome-text[_ngcontent-%COMP%]{color:#ffffffbf}.welcome-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:24px;margin-top:14px;margin-bottom:14px}.welcome-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-top:0}.welcome-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.anon-user-consent-container[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;margin-bottom:16px}.anon-user-consent-container[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin-bottom:24px}.oobe-action-button[_ngcontent-%COMP%]{margin:8px 0;padding:0 8px;min-width:auto;height:36px;border:none;background-color:#393939;box-shadow:none!important}.isLtr[_nghost-%COMP%]   .oobe-action-button[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .oobe-action-button[_ngcontent-%COMP%]{float:right}html[dir=ltr][_ngcontent-%COMP%]   .oobe-action-button[_ngcontent-%COMP%]{--dummy0: 0;float:right}.isRtl[_nghost-%COMP%]   .oobe-action-button[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .oobe-action-button[_ngcontent-%COMP%]{float:left}html[dir=rtl][_ngcontent-%COMP%]   .oobe-action-button[_ngcontent-%COMP%]{--dummy0: 0;float:left}.oobe-action-button[_ngcontent-%COMP%]:disabled{background-color:#393939}.welcome-footer-container[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}.welcome-footer-container.anon-user[_ngcontent-%COMP%]{margin-top:36px}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.container[_ngcontent-%COMP%]{width:100%;height:100%}.header-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:214px;height:40px}.welcome-footer-container[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;display:flex;align-items:center;justify-content:flex-end}}.tv.container[_ngcontent-%COMP%]{margin:80px 112px 60px}.tv[_ngcontent-%COMP%]   .header-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:auto}.tv[_ngcontent-%COMP%]   .indicator-icon[_ngcontent-%COMP%]{padding-top:30px}.tv[_ngcontent-%COMP%]   .indicator-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:48px;width:48px}.tv[_ngcontent-%COMP%]   .indicator-icon[_ngcontent-%COMP%]   .mat-icon.gray-out[_ngcontent-%COMP%]{color:#ffffff14}.tv[_ngcontent-%COMP%]   .welcome-header-container[_ngcontent-%COMP%]{margin-bottom:20px}.tv[_ngcontent-%COMP%]   .welcome-content-container[_ngcontent-%COMP%]{width:1672px;height:584px}.tv[_ngcontent-%COMP%]   .welcome-content-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px;font-weight:500;line-height:60px;letter-spacing:.57px}.tv[_ngcontent-%COMP%]   .welcome-content-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(255,255,255,.16)}.tv[_ngcontent-%COMP%]   .welcome-content-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(255,255,255,.08)}.tv[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .tv[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:32px;font-weight:400;line-height:60px;letter-spacing:.57px}.tv[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:60px;margin-bottom:60px}.tv[_ngcontent-%COMP%]   .welcome-footer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;margin-bottom:0}.tv[_ngcontent-%COMP%]   .welcome-footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:55px;padding:0 32px;font-size:40px;font-weight:500;height:92px;width:fit-content;align-self:center}"]}),J})();var ui=e(65298),Ji=e(44804),ho=e(7366),ji=e(84425),Po=e(9021),Xi=e(79352),uo=e(10343),Mi=e(48919);function Fi(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"div",11),o.TgZ(1,"div",12),o.TgZ(2,"h1",13),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA(),o.TgZ(5,"div",14),o.TgZ(6,"button",15),o.NdJ("click",function(){return o.CHM(d),o.oxw().closeClicked()}),o.TgZ(7,"mat-icon",16),o._uU(8,"close"),o.qZA(),o.qZA(),o.qZA(),o.qZA()}2&J&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"common.gfn")))}const jo=function(J){return[J]};let Oo=(()=>{class J{constructor(d,R){this.ecommerceService=d,this.spatialNavigationService=R,this.primaryButtonClicked=new o.vpe,this.closeButtonClicked=new o.vpe,this.showLoadingOnContinue=!1,this.destroy$=new oe.xQ}ngOnInit(){this.dialogTitle="ecommerce.membershipUpdateProgressDialog.title",this.description="ecommerce.membershipUpdateProgressDialog.description"}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}ngAfterViewInit(){const d=document.getElementsByClassName("membership-options-link"),R=(null==d?void 0:d.length)>0?d[0]:void 0;R&&this.spatialNavigationService.onClick(R).pipe((0,xe.R)(this.destroy$)).subscribe(ce=>{ce&&this.ecommerceService.openUpgradeMemberShipPage(Po.CGJ.ScreenJoinGfnDialog,ji.D7.MembershipUpdateProgressEcomUIState)})}continueClicked(){this.showLoadingOnContinue=!0,this.ecommerceService.refreshUsersEntitlement(),this.primaryButtonClicked.emit()}closeClicked(){this.closeButtonClicked.emit()}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(Xi.B),o.Y36(ae.jr))},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-membership-update-progress"]],inputs:{data:"data"},outputs:{primaryButtonClicked:"primaryButtonClicked",closeButtonClicked:"closeButtonClicked"},decls:20,vars:19,consts:[["fxFlexFill","","fxLayout","column","nvSpatialNavigationContainer","","navigateAction","focus","nvTrapFocus","",3,"ngClass"],["fxFlex","none","class","custom-title-bar","fxLayout","row",4,"ngIf"],["fxFlex","none","fxLayout","column"],["src","shared/assets/img/GFNUpSellBannerKV_v2.jpg",1,"dialog-art"],[1,"dialog-content"],[1,"font-header6"],[1,"font-body2",3,"innerHTML"],["fxFlex","none","fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"dialog-button"],["mat-button","",3,"click"],[1,"font-button2"],["mat-raised-button","","gfnProgressSpinner","","nvAutoFocus","",3,"isVisible","click"],["fxFlex","none","fxLayout","row",1,"custom-title-bar"],["fxFlex","","fxLayoutAlign","start center"],["mat-dialog-title","",1,"font-header6"],["fxFlex","","fxLayoutAlign","end center"],["mat-icon-button","",3,"click"],["mat-font-set","material-icons"]],template:function(d,R){1&d&&(o.TgZ(0,"div",0),o.YNc(1,Fi,9,3,"div",1),o.TgZ(2,"div",2),o._UZ(3,"img",3),o.TgZ(4,"div",4),o.TgZ(5,"h2",5),o._uU(6),o.ALo(7,"translate"),o.qZA(),o._UZ(8,"span",6),o.ALo(9,"trustAsHtml"),o.ALo(10,"translate"),o.qZA(),o.qZA(),o.TgZ(11,"div",7),o.TgZ(12,"button",8),o.NdJ("click",function(){return R.closeClicked()}),o.TgZ(13,"span",9),o._uU(14),o.ALo(15,"translate"),o.qZA(),o.qZA(),o.TgZ(16,"button",10),o.NdJ("click",function(){return R.continueClicked()}),o.TgZ(17,"span",9),o._uU(18),o.ALo(19,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&d&&(o.Q6J("ngClass",o.VKq(17,jo,R.data.isStreamerApp?"main-content-streamer":"main-content-mall")),o.xp6(1),o.Q6J("ngIf",!R.data.isStreamerApp),o.xp6(5),o.Oqu(o.lcZ(7,7,R.dialogTitle)),o.xp6(2),o.Q6J("innerHTML",o.lcZ(9,9,o.lcZ(10,11,R.description)),o.oJD),o.xp6(6),o.Oqu(o.lcZ(15,13,"common.close")),o.xp6(2),o.Q6J("isVisible",R.showLoadingOnContinue),o.xp6(2),o.Oqu(o.lcZ(19,15,"common.continue")))},directives:[G.s9,G.xw,Dt.N,I.e,x.oO,n.mk,n.O5,G.yH,C.E,G.Wh,G.SQ,P.lW,uo.d,Mi.h,y.uh,v.Hw],pipes:[m.X$,_.W],styles:[".main-content-streamer[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]{width:470px;overflow:hidden;transition:height .5s}.main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{width:470px;height:50px}.isLtr[_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%]{margin-bottom:0}.main-content-streamer[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%]{width:470px;height:264px;border:transparent;padding-bottom:0}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{padding:24px;height:254px}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%]{padding:24px;height:91px}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;margin:4px 0 0}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{display:none}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{margin-top:0}.main-content-streamer[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%]{flex-wrap:nowrap;margin:8px;position:relative;right:0;bottom:0}.main-content-streamer[_ngcontent-%COMP%]   .upsell-pane[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .upsell-pane[_ngcontent-%COMP%]{height:215px}.main-content-streamer[_ngcontent-%COMP%]   .upsell-pane-message[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .upsell-pane-message[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.15);margin:0 24px;padding:23px 0}.main-content-streamer[_ngcontent-%COMP%]   .upgrade-container[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .upgrade-container[_ngcontent-%COMP%]{margin:8px}@media (max-width: 469px){.main-content-streamer[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]{width:100vw}.main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{width:unset}.main-content-streamer[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%]{width:100vw;height:auto}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{width:unset}.main-content-streamer[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%]{width:unset}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.main-content-mall[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%], .main-content-streamer[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%]{display:none}.main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{display:none!important}.main-content-mall[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%], .main-content-streamer[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:fit-content!important}}"]}),J})();function Mo(J,Oe){1&J&&(o.TgZ(0,"div",10),o._UZ(1,"div",11),o.qZA())}const yo=function(J){return[J]};let Ne=(()=>{class J{constructor(d){this.localeService=d,this.closeButtonClicked=new o.vpe,this.serverStatusShortUrl=at.hD[at.hE.GfnServerStatus]}ngOnInit(){this.localeSubscription=this.localeService.localeChanged.subscribe(d=>{this.serverStatusUrl=at.hE.BaseUrl+d+"&page="+at.hE.GfnServerStatus})}closeClicked(){this.closeButtonClicked.emit()}ngOnDestroy(){this.localeSubscription&&this.localeSubscription.unsubscribe()}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(f.OL))},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-membership-refresh-error"]],inputs:{data:"data"},outputs:{closeButtonClicked:"closeButtonClicked"},decls:17,vars:15,consts:[["fxFlexFill","","fxLayout","column","nvSpatialNavigationContainer","","nvTrapFocus","",3,"ngClass"],["fxFlex","none","class","custom-title-bar","fxLayout","row",4,"ngIf"],["fxFlex","","fxLayout","column"],["fxLayoutAlign","center center",1,"dialog-art"],["fontSet","nv-custom-icons","fontIcon","icon-alert-circle_reg",1,"nv-custom-icons","membership-error-icon"],[1,"dialog-content","membership-error-text"],[1,"font-body2"],["target","_blank",1,"font-body2-link",3,"href","shortUrl"],["fxFlex","none","fxLayout","row","fxLayoutAlign","end center",1,"dialog-button"],["mat-button","","nvAutoFocus","",1,"font-button1",3,"click"],["fxFlex","none","fxLayout","row",1,"custom-title-bar"],["fxFlex","","fxLayoutAlign","end center"]],template:function(d,R){1&d&&(o.TgZ(0,"div",0),o.YNc(1,Mo,2,0,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o._UZ(4,"mat-icon",4),o.qZA(),o.TgZ(5,"div",5),o.TgZ(6,"h2",6),o._uU(7),o.ALo(8,"translate"),o.qZA(),o.TgZ(9,"a",7),o._uU(10),o.ALo(11,"translate"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"div",8),o.TgZ(13,"button",9),o.NdJ("click",function(){return R.closeClicked()}),o.TgZ(14,"span"),o._uU(15),o.ALo(16,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&d&&(o.Q6J("ngClass",o.VKq(13,yo,R.data.isStreamerApp?"main-content-streamer":"main-content-mall")),o.xp6(1),o.Q6J("ngIf",!R.data.isStreamerApp),o.xp6(6),o.Oqu(o.lcZ(8,7,"common.genericLoadError")),o.xp6(2),o.Q6J("href",R.serverStatusUrl,o.LSH)("shortUrl",R.serverStatusShortUrl),o.xp6(1),o.hij(" ",o.lcZ(11,9,"common.viewServerStatus")," "),o.xp6(5),o.Oqu(o.lcZ(16,11,"common.close")))},directives:[G.s9,G.xw,Dt.N,I.e,x.oO,n.mk,n.O5,G.yH,G.Wh,v.Hw,C.E,P.lW,Mi.h],pipes:[m.X$],styles:[".main-content-streamer[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]{width:470px;overflow:hidden;transition:height .5s}.main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{width:470px;height:50px}.isLtr[_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%]{margin-bottom:0}.main-content-streamer[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%]{width:470px;height:264px;border:transparent;padding-bottom:0}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{padding:24px;height:254px}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%]{padding:24px;height:91px}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;margin:4px 0 0}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{display:none}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{margin-top:0}.main-content-streamer[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%]{flex-wrap:nowrap;margin:8px;position:relative;right:0;bottom:0}.main-content-streamer[_ngcontent-%COMP%]   .upsell-pane[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .upsell-pane[_ngcontent-%COMP%]{height:215px}.main-content-streamer[_ngcontent-%COMP%]   .upsell-pane-message[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .upsell-pane-message[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.15);margin:0 24px;padding:23px 0}.main-content-streamer[_ngcontent-%COMP%]   .upgrade-container[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .upgrade-container[_ngcontent-%COMP%]{margin:8px}@media (max-width: 469px){.main-content-streamer[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]{width:100vw}.main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{width:unset}.main-content-streamer[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%]{width:100vw;height:auto}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{width:unset}.main-content-streamer[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%]{width:unset}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.main-content-mall[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%], .main-content-streamer[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%]{display:none}.main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{display:none!important}.main-content-mall[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%], .main-content-streamer[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:fit-content!important}}.membership-error-icon[_ngcontent-%COMP%]{padding:80px 0 0;margin:0 auto 86px;font-size:80px;width:100%;height:178px;line-height:1;display:block;text-align:center;box-sizing:border-box}.membership-error-text[_ngcontent-%COMP%]{text-align:center}"]}),J})();function Rt(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"div",9),o.TgZ(1,"div",10),o.TgZ(2,"h1",11),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA(),o.TgZ(5,"div",12),o.TgZ(6,"button",13),o.NdJ("click",function(){return o.CHM(d),o.oxw().closeClicked()}),o.TgZ(7,"mat-icon",14),o._uU(8,"close"),o.qZA(),o.qZA(),o.qZA(),o.qZA()}2&J&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"common.gfn")))}const H=function(J){return[J]};let pe=(()=>{class J{constructor(d,R){this.ecommerceService=d,this.spatialNavigationService=R,this.closeButtonClicked=new o.vpe,this.destroy$=new oe.xQ}ngOnInit(){this.dialogTitle="ecommerce.membershipNotUpdatedDialog.title",this.description="ecommerce.membershipNotUpdatedDialog.description"}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}ngAfterViewInit(){const d=document.getElementsByClassName("membership-status-link"),R=(null==d?void 0:d.length)>0?d[0]:void 0;R&&this.spatialNavigationService.onClick(R).pipe((0,xe.R)(this.destroy$)).subscribe(ce=>{ce&&this.ecommerceService.openAccountManagementPage(ge.CGJ.ScreenJoinGfnDialog,ji.D7.MembershipNotUpdatedEcomUIState)})}closeClicked(){this.closeButtonClicked.emit()}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(Xi.B),o.Y36(ae.jr))},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-membership-not-updated"]],inputs:{data:"data"},outputs:{closeButtonClicked:"closeButtonClicked"},decls:16,vars:15,consts:[["fxFlexFill","","fxLayout","column","nvSpatialNavigationContainer","","navigateAction","focus","nvTrapFocus","",3,"ngClass"],["fxFlex","none","class","custom-title-bar","fxLayout","row",4,"ngIf"],["fxFlex","none","fxLayout","column"],["src","shared/assets/img/GFNUpSellBannerKV_v2.jpg",1,"dialog-art"],[1,"dialog-content"],[1,"font-header6"],[1,"font-body2",3,"innerHTML"],["fxFlex","none","fxLayout","row","fxLayoutAlign","end center",1,"dialog-button"],["mat-button","","nvAutoFocus","",3,"click"],["fxFlex","none","fxLayout","row",1,"custom-title-bar"],["fxFlex","","fxLayoutAlign","start center"],["mat-dialog-title","",1,"font-header6"],["fxFlex","","fxLayoutAlign","end center"],["mat-icon-button","",3,"click"],["mat-font-set","material-icons"]],template:function(d,R){1&d&&(o.TgZ(0,"div",0),o.YNc(1,Rt,9,3,"div",1),o.TgZ(2,"div",2),o._UZ(3,"img",3),o.TgZ(4,"div",4),o.TgZ(5,"h2",5),o._uU(6),o.ALo(7,"translate"),o.qZA(),o._UZ(8,"span",6),o.ALo(9,"trustAsHtml"),o.ALo(10,"translate"),o.qZA(),o.qZA(),o.TgZ(11,"div",7),o.TgZ(12,"button",8),o.NdJ("click",function(){return R.closeClicked()}),o.TgZ(13,"span"),o._uU(14),o.ALo(15,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&d&&(o.Q6J("ngClass",o.VKq(13,H,R.data.isStreamerApp?"main-content-streamer":"main-content-mall")),o.xp6(1),o.Q6J("ngIf",!R.data.isStreamerApp),o.xp6(5),o.Oqu(o.lcZ(7,5,R.dialogTitle)),o.xp6(2),o.Q6J("innerHTML",o.lcZ(9,7,o.lcZ(10,9,R.description)),o.oJD),o.xp6(6),o.Oqu(o.lcZ(15,11,"common.close")))},directives:[G.s9,G.xw,Dt.N,I.e,x.oO,n.mk,n.O5,G.yH,C.E,G.Wh,P.lW,Mi.h,y.uh,v.Hw],pipes:[m.X$,_.W],styles:[".main-content-streamer[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]{width:470px;overflow:hidden;transition:height .5s}.main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{width:470px;height:50px}.isLtr[_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{padding-left:24px}html[dir=ltr][_ngcontent-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{--dummy1: 0;padding-left:24px}.isRtl[_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{padding-right:24px}html[dir=rtl][_ngcontent-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{--dummy1: 0;padding-right:24px}.isLtr[_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%]{margin-bottom:0}.main-content-streamer[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%]{width:470px;height:264px;border:transparent;padding-bottom:0}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{padding:24px;height:254px}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%]{padding:24px;height:91px}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;margin:4px 0 0}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content-queue-limit[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{display:none}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{margin-top:0}.main-content-streamer[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%]{flex-wrap:nowrap;margin:8px;position:relative;right:0;bottom:0}.main-content-streamer[_ngcontent-%COMP%]   .upsell-pane[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .upsell-pane[_ngcontent-%COMP%]{height:215px}.main-content-streamer[_ngcontent-%COMP%]   .upsell-pane-message[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .upsell-pane-message[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.15);margin:0 24px;padding:23px 0}.main-content-streamer[_ngcontent-%COMP%]   .upgrade-container[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .upgrade-container[_ngcontent-%COMP%]{margin:8px}@media (max-width: 469px){.main-content-streamer[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]{width:100vw}.main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{width:unset}.main-content-streamer[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%]{width:100vw;height:auto}.main-content-streamer[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{width:unset}.main-content-streamer[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%], .main-content-mall[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%]{width:unset}}@media screen and (max-width: 430px) and (max-height: 932px) and (orientation: portrait),screen and (max-width: 932px) and (max-height: 430px) and (orientation: landscape){.main-content-mall[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%], .main-content-streamer[_ngcontent-%COMP%]   .dialog-art[_ngcontent-%COMP%]{display:none}.main-content-mall[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%], .main-content-streamer[_ngcontent-%COMP%]   .custom-title-bar[_ngcontent-%COMP%]{display:none!important}.main-content-mall[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%], .main-content-streamer[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:fit-content!important}}"]}),J})();function Ae(J,Oe){if(1&J&&(o.TgZ(0,"p"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&J){const d=o.oxw();o.xp6(1),o.hij(" ",o.lcZ(2,1,d.data.header)," ")}}let et=(()=>{class J{constructor(d,R){this.dialogRef=d,this.data=R}ngOnInit(){}close(){this.dialogRef.close()}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(y.so),o.Y36(y.WI))},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-confirmation-dialog"]],decls:10,vars:10,consts:[["fxLayout","column","fxLayoutAlign","space-between stretch",1,"confirmation-dialog"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center"],["fxLayout","row","fxLayoutAlign","flex-end center"],["mat-button","","color","accent",1,"mat-raised-button","mat-accent","color-white-important",3,"click"]],template:function(d,R){1&d&&(o.TgZ(0,"div",0),o.YNc(1,Ae,3,3,"p",1),o.TgZ(2,"p",2),o._UZ(3,"span"),o._uU(4),o.ALo(5,"translate"),o.qZA(),o.TgZ(6,"div",3),o.TgZ(7,"button",4),o.NdJ("click",function(){return R.close()}),o._uU(8),o.ALo(9,"translate"),o.qZA(),o.qZA(),o.qZA()),2&d&&(o.xp6(1),o.Q6J("ngIf",R.data.header),o.xp6(2),o.Gre("nv-custom-icons ",R.data.iconClass,""),o.xp6(1),o.hij(" ",o.lcZ(5,6,R.data.message)," "),o.xp6(4),o.hij(" ",o.lcZ(9,8,R.data.closeButtonText)," "))},directives:[G.xw,G.Wh,n.O5,P.lW],pipes:[m.X$],styles:[".bg-dark-eh{background-color:#000}.bg-dark-eh-hue-1{background-color:#020202}.bg-dark-eh-hue-2{background-color:#010102}.bg-dark-vh{background-color:#0f0f0f}.bg-dark-vh20{background-color:#141414}.bg-dark-vh23{background-color:#171717}.bg-dark-vh-hue-1{background-color:#191919}.bg-dark-vh-hue-2{background-color:#111}.bg-dark-vh-hue-4{background-color:#181818}.bg-dark-hv{background-color:#1c1c1c}.bg-dark-hv-hue-1{background-color:#1c1c1cbf}.bg-dark-hv-hue-2{background-color:#1c1c1c80}.bg-dark-hv-hue-3{background-color:#1e1e1ee6}.bg-dark-im{background-color:#272727}.bg-dark-im-hue-1{background-color:#272727bf}.bg-dark-im-hue-2{background-color:#27272780}.bg-dark-im-hue-3{background-color:#25252573}.bg-dark-im-hue-4{background-color:#363636}.bg-dark-im-hue-5{background-color:#252525e6}.bg-dark-im-hue-6{background-color:#282828}.bg-dark-im-hue-7{background-color:#37393b}.bg-grey-im{background-color:#464646}.bg-grey-im-hue-1{background-color:#46464699}.bg-grey-im-hue-2{background-color:#46464666}.bg-grey-im-hue-3{background-color:#46464640}.bg-grey-im-hue-4{background-color:#46464673}.bg-grey-im-hue-5{background-color:#46464633}.bg-grey-im-hue-6{background-color:#4646461a}.bg-grey-lt{background-color:gray}.bg-grey-lt-hue-1{background-color:#9595951a}.bg-grey-md-im{background-color:#373737}.bg-white-in-hue-1{background-color:#ffffff73}.bg-white-in-hue-2{background-color:#ffffff40}.bg-green-hv{background-color:#76b900}.bg-green-hv-hue-1{background-color:#76b90026}.bg-black-hv{background-color:#111}.bg-black-hv-hue-1{background-color:#111c}.bg-black-hv-hue-2{background-color:#11111180}.bg-dark-bluish-gray{background-color:#46505a}.color-lighter-gray{color:#ccc}.color-light-gray{color:#9f9f9f}.color-medium-gray{color:#797979}.color-dim-gray{color:#6d6d6d}.color-medium-gray-hue-1{color:#7d7d7d}.color-medium-gray-hue-2{color:#777}.color-dark-gray{color:#595959}.color-darkest-gray{color:#393939}.color-bluish-green{color:#008471}.color-white-important{color:#fff}.color-white{color:#fff}.color-white-hue-1{color:#ffffffe6}.color-white-hue-2{color:#fffc}.color-white-hue-3{color:#ffffffbf}.color-white-hue-4{color:#ffffff73}.color-white-hue-5{color:#ffffff4d}.color-white-hue-6{color:#fff9}.color-white-hue-7{color:#ffffff40}.color-white-hue-8{color:#ffffff26}.color-black-hue-1{color:#111}.color-light-black{color:#1e1e1e}.color-green{color:#76b900}.color-inherit{color:inherit}.color-red-hue-1{color:#b5291c}.confirmation-dialog span.nv-custom-icons{font-size:20px}:host-context(.isLtr) .confirmation-dialog span.nv-custom-icons{margin-right:10px}html[dir=ltr] .confirmation-dialog span.nv-custom-icons{--dummy4: 0;margin-right:10px}:host-context(.isRtl) .confirmation-dialog span.nv-custom-icons{margin-left:10px}html[dir=rtl] .confirmation-dialog span.nv-custom-icons{--dummy4: 0;margin-left:10px}.confirmation-dialog-set-background .mat-dialog-container{background:#1f2224}\n"],encapsulation:2}),J})(),wt=(()=>{class J{constructor(d){this.matDialog=d}open(d){return d.panelClass="confirmation-dialog-set-background",this.matDialog.open(et,d)}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(y.uw))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})(),Yt=(()=>{class J{}return J.\u0275fac=function(d){return new(d||J)},J.\u0275mod=o.oAB({type:J}),J.\u0275inj=o.cJS({providers:[],imports:[[i.o9,y.Is,v.Ps,P.ot,O.t,E.Cq,n.ez,Q,f.it,m.aw.forChild(),ae.hp]]}),J})();o.B6R(ho.U,[x.oO,n.mk,G.s9,G.xw,G.yH,n.RF,n.n9,Ji.I,Oo,Ne,pe],[]);let Xt=(()=>{class J{}return J.\u0275fac=function(d){return new(d||J)},J.\u0275mod=o.oAB({type:J}),J.\u0275inj=o.cJS({imports:[[y.Is,v.Ps,P.ot,E.Cq,n.ez,m.aw,i.o9,k.Nh]]}),J})();var In=e(84607);let Tn=(()=>{class J{}return J.\u0275fac=function(d){return new(d||J)},J.\u0275mod=o.oAB({type:J}),J.\u0275inj=o.cJS({providers:[],imports:[[i.o9,In.N,y.Is,v.Ps,P.ot,O.t,E.Cq,n.ez,Q,f.it,m.aw.forChild(),ae.hp]]}),J})(),Qn=(()=>{class J{}return J.\u0275fac=function(d){return new(d||J)},J.\u0275mod=o.oAB({type:J}),J.\u0275inj=o.cJS({imports:[[n.ez,D.u5,i.o9,ie,m.aw.forChild(),me,Yt,Xt,Tn,f.it,ae.hp],n.ez,D.u5,Jt,Q,Yt,Xt]}),J})();o.B6R(ui.C,[n.mk,x.oO,Si],[]);var Xn=e(55502),wn=e(31454),Gi=e(99296),ci=e(90470),qn=e(95027),Hn=e(99533),fi=e(43365);let Bi=(()=>{class J{constructor(d,R){this.experienceControlService=R,this.logger=d.getLogger("shared/Experience-Ipc")}getCloudVariable(d,R={},ce,_e,Le,Re){return this.experienceControlService.getCloudVariable(d,R,ce,_e,Le,Re).pipe((0,St.b)(Xe=>{}),(0,xt.K)(Xe=>(0,q._)(Xe)))}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(fi.Q6))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var Bn=e(20882),ni=e(55302),ri=e(20180),ii=e(80226),qi=e(92941),mi=e(2984),oi=e(29322),jn=(()=>{return(J=jn||(jn={}))[J.Recommended=1]="Recommended",J[J.Required=2]="Required",J[J.Critical=3]="Critical",jn;var J})(),vi=(()=>{return(J=vi||(vi={})).Recommended="recommended",J.Required="required",J.Critical="critical",vi;var J})(),_i=(()=>{return(J=_i||(_i={}))[J.Success=0]="Success",J[J.SubAppRunning=1]="SubAppRunning",J[J.Failed=2]="Failed",_i;var J})();const Vi="updateData";var Hi=e(60443),si=e(71258);function Xo(J,Oe){1&J&&(o.TgZ(0,"span"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&J&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"common.updateRequiredDescription")))}function wo(J,Oe){1&J&&(o.TgZ(0,"span"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&J&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"common.updateRequiredDescription")))}let Do=(()=>{class J{constructor(d){this.router=d,this.isMall=!(0,Hi.wI)(this.router.url)}ngOnInit(){}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(si.F0))},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-update-in-progress"]],decls:4,vars:2,consts:[["fxFlex","","fxLayout","column","fxLayoutAlign","center center",1,"main-content"],[4,"ngIf"],["diameter","60","mode","indeterminate",1,"mat-accent"]],template:function(d,R){1&d&&(o.TgZ(0,"div",0),o.YNc(1,Xo,3,3,"span",1),o.YNc(2,wo,3,3,"span",1),o._UZ(3,"mat-spinner",2),o.qZA()),2&d&&(o.xp6(1),o.Q6J("ngIf",R.isMall),o.xp6(1),o.Q6J("ngIf",!R.isMall))},directives:[G.yH,G.xw,G.Wh,n.O5,E.$g],pipes:[m.X$],styles:[".main-content{width:470px;height:240px}.main-content .dialog-content{padding:24px;height:302px}.main-content .dialog-content>h2{margin-top:0}.main-content mat-spinner{margin-top:20px}.mat-dialog-container{padding:0;border-radius:0}\n"],encapsulation:2}),J})();var zn=e(3076);const No="command-line";var ko=e(54433),Ii=e(57390);class ei{constructor(Oe,d,R,ce,_e,Le,Re,Xe,mt,Gt){this.ipcService=Oe,this.nativeEventService=ce,this.sharedStorage=_e,this.telemetry=Le,this.telemetryUtilService=Re,this.bridgeService=Xe,this.systemInfoService=mt,this.dialog=Gt,this.firstRunAfterMajorUpdate=!1,this.firstRunAfterMajorUpdateObservable=new ii.t(1),this.logger=d.getLogger("updateService"),this.updateEventStream=new zn.Gb(()=>(this.updateInternalSubject=new oe.xQ,this.updateInternalSubject.asObservable()),!1),this.baseVersion=new oi.b(R.build.version),this.updateChannel=R.selfUpdate.serverChannel,this.wasUpdatedFromUI=!1,this.updateStartTimestamp=0,this.registerForIpcMessages(),this.registerForWindowEvents(),this.readPreviousVersion().pipe((0,St.b)(Qt=>{this.previousVersion=Qt||ei.zeroVersion}),(0,Se.zg)(this.storeCurrentVersion.bind(this)),(0,Se.zg)(this.isFirstRunAfterUpdate.bind(this)),(0,Se.zg)(Qt=>Qt?this.telemetryUtilService.getAppLaunchTelemetryObservable():(0,N.of)(!1)),(0,Se.zg)(Qt=>Qt?this.sendAppLaunchTelemetry(this.previousVersion):(0,N.of)(null))).subscribe(qi.Z,Qt=>{this.logger.error("Received error while reading and updating stored version: ",Qt)},()=>{this.logger.info("Completed reading and updating stored version")}),this.pendingGameLaunchSubject=new ii.t(1)}registerForIpcMessages(){this.ipcSubscriptions?(this.ipcSubscriptions.forEach((d,R)=>{d.unsubscribe(),this.logger.info("Unregistering for ipc event: ",R)}),this.ipcSubscriptions.clear()):this.ipcSubscriptions=new Map,this.logger.info("Registering for ipc events");const Oe=(d,R)=>this.ipcService.get$(d).pipe((0,Se.zg)(ce=>(this.logger.info("IPC event call for version",ce),this.isUpdateAvailable$().pipe((0,Je.U)(_e=>(this.logger.info("IPC update available response:",_e),_e)),(0,xt.K)(_e=>(this.errorUpdate("Received error when handling ipc update: "+_e),this.sendAppUpdateTelemetry(this.baseVersion,this.getTargetVersion(),ge.YwJ.Error,"Error on IPC event: "+_e),(0,N.of)(!1)))))),(0,xt.K)(ce=>(this.logger.error("Received error on ipc type "+d+": ",ce),this.registerForIpcMessages(),(0,N.of)(!1)))).subscribe();this.ipcSubscriptions.set(Hn.oI.SelfUpdate,Oe(Hn.oI.SelfUpdate)),this.ipcSubscriptions.set(Hn.oI.RecommendedUpdate,Oe(Hn.oI.RecommendedUpdate)),this.ipcSubscriptions.set(Hn.oI.RequiredUpdate,Oe(Hn.oI.RequiredUpdate)),this.ipcSubscriptions.set(Hn.oI.CriticalUpdate,Oe(Hn.oI.CriticalUpdate))}registerForWindowEvents(){this.windowEventSubscriptions?(this.windowEventSubscriptions.forEach((ce,_e)=>{ce.unsubscribe(),this.logger.info("Unregistering for window event: ",_e)}),this.windowEventSubscriptions.clear()):this.windowEventSubscriptions=new Map,this.logger.info("Registering for window events");const Oe=this.nativeEventService.get$(f.Nx.SelfUpdate,f.bi.Types.HandlerEventType.StructuredWindowEvent).subscribe(ce=>{try{const _e=this.validateUpdateData(this.parseUpdateData(ce));(0,u.isNil)(_e)||this.handleIncomingUpdate(_e)}catch(_e){this.errorUpdate(_e),this.sendAppUpdateTelemetry(this.baseVersion,this.getTargetVersion(),ge.YwJ.UpdateFailure,_e.toString())}},ce=>{this.logger.error("Received error from window event "+f.Nx.SelfUpdate+": ",ce),this.registerForWindowEvents()});this.windowEventSubscriptions.set(f.Nx.SelfUpdate,Oe);const d=this.nativeEventService.get$(f.Nx.StoredCommandLine,f.bi.Types.HandlerEventType.StructuredWindowEvent).subscribe(ce=>{let _e;try{_e=JSON.parse(ce)}catch(Le){return void this.logger.error("Invalid object raised as stored command line: ",ce)}(0,u.isNil)(_e[No])?this.logger.error("Update command line event raised without data or command-line value: ",_e):this.handlePostUpdateCommandLine(_e[No])},ce=>{this.logger.error("Received error from window event "+f.Nx.StoredCommandLine+": ",ce),this.registerForWindowEvents()});this.windowEventSubscriptions.set(f.Nx.StoredCommandLine,d);const R=this.nativeEventService.get$(f.Nx.UpdateInitiated,f.bi.Types.HandlerEventType.StructuredWindowEvent).subscribe(()=>{this.sendAppUpdateTelemetry(this.baseVersion,this.getTargetVersion(),ge.YwJ.UpdateInitiated,null,0,{immediateRequest:!0}),this.showUpdateInProgressDialog()},ce=>{this.logger.error("Received error from window event "+f.Nx.UpdateInitiated+": ",ce),this.registerForWindowEvents()});this.windowEventSubscriptions.set(f.Nx.UpdateInitiated,R)}getUpdates$(){return this.updateEventStream.get$()}getPendingGameLaunch$(){return this.pendingGameLaunchSubject.asObservable()}recordUpdateFromUI$(){return this.appendUpdateData({updateFromJS:!0})}updateApplication$(Oe=!1){return this.appendUpdateData({updateFromJS:!0,updateFromStreamer:Oe,updateStartTimestamp:Date.now()}).pipe((0,Ot.w)(()=>this.bridgeService.executeCommand(ko.B.GfnUpdate)),(0,Je.U)(d=>d),(0,St.b)(d=>{(0,u.isNil)(d)||(0,u.isNil)(d.status)?this.sendAppUpdateTelemetry(this.baseVersion,this.getTargetVersion(),ge.YwJ.Error,"Error running update query, invalid result or status"):d.status!==_i.Success&&this.sendAppUpdateTelemetry(this.baseVersion,this.getTargetVersion(),ge.YwJ.Error,"Error status returned from update query: "+d.status)}))}showUpdateInProgressDialog(){return this.dialog.open(Do,{disableClose:!0,autoFocus:!0,panelClass:"confirmation-dialog-set-background"})}getUpdateData$(){return this.bridgeService.executeCommand(mi.Gh.Common.Update.ReadTicket,{}).pipe((0,Je.U)(Oe=>{try{return this.validateUpdateData(Oe)}catch(d){throw this.logger.error("Error when processing ReadTicket result: ",d),new Error(d)}}),(0,xt.K)(Oe=>(this.logger.error("Error reading update ticket data",Oe),(0,N.of)(null))))}getAvailableUpdate$(){return this.getUpdateData$().pipe((0,Je.U)(Oe=>(this.handleIncomingUpdate(Oe),this.pendingUpdate)))}isUpdateAvailable$(){return this.getAvailableUpdate$().pipe((0,Je.U)(Oe=>!(0,u.isNil)(Oe)))}updateRequiredOnLaunch$(){return this.getAvailableUpdate$().pipe((0,Je.U)(Oe=>(0,u.get)(Oe,"severity",jn.Recommended)>jn.Recommended))}isFirstAppRunAfterMajorUpdate$(){return this.firstRunAfterMajorUpdateObservable.asObservable()}parseUpdateData(Oe){let d;try{d=JSON.parse(Oe)}catch(R){const ce="Update ticket raised with improper JSON: "+Oe;throw this.logger.error(ce),new Error(ce)}if((0,u.isNil)(Oe)||(0,u.isNil)(d)){const R="Update ticket raised with null data: "+Oe;throw this.logger.error(R),new Error(R)}return d}validateUpdateData(Oe){if((0,u.isNil)(Oe)){const R="validateUpdateData called with null updateData";throw this.logger.error(R),new Error(R)}if(!Oe.available||(0,u.isNil)(Oe.severity)||(0,u.isNil)(Oe.version))return this.logger.info("No update available"),null;const d=function(J){switch(J){case vi.Recommended:return jn.Recommended;case vi.Required:return jn.Required;case vi.Critical:return jn.Critical;default:return null}}(Oe.severity);if((0,u.isNil)(d)){const R="Unrecognized update severity: "+Oe.severity;throw this.logger.error(R),new Error(R)}return{version:new oi.b(Oe.version),severity:d}}isUpdateAccepted(Oe){if((0,u.isNil)(Oe))return!1;if((0,u.isNil)(this.pendingUpdate))return this.baseVersion.compare(Oe.version)===oi.A.Greater;switch(this.pendingUpdate.version.compare(Oe.version)){case oi.A.Greater:return!0;case oi.A.Lesser:return this.logger.info("Checked update has a lower version than current pending update: "+this.updateDataToString(Oe)+" < "+this.updateDataToString(this.pendingUpdate)),!1;case oi.A.Equal:return Oe.severity>this.pendingUpdate.severity||(this.logger.info("Raised update has equal version and lesser or equal severity as current pending update: "+this.updateDataToString(Oe)+" <= "+this.updateDataToString(this.pendingUpdate)),!1)}return!1}handleIncomingUpdate(Oe){this.isUpdateAccepted(Oe)?this.acceptUpdate(Oe):this.ignoreUpdate(Oe)}acceptUpdate(Oe){this.logger.info("Accepting new update data: ",Oe),this.pendingUpdate=Oe,this.updateInternalSubject.next(this.pendingUpdate),this.sendAppUpdateTelemetry(this.baseVersion,Oe.version,ge.YwJ.IPCReceived)}errorUpdate(Oe){const d="Raising error when processing update: "+Oe;this.logger.error(d),this.updateInternalSubject.error(d)}ignoreUpdate(Oe){this.logger.info("Ignoring update data: ",Oe)}updateDataToString(Oe){return(0,u.isNil)(Oe)?"undefined":Oe.version+":("+Oe.severity+")"}readUpdateData(){return this.sharedStorage.readBlock(Vi)}writeUpdateData(Oe){return this.sharedStorage.writeBlock(Vi,Oe)}appendUpdateData(Oe){return this.readUpdateData().pipe((0,Se.zg)(d=>{(0,u.isNil)(Oe)&&(d={});const R=Object.assign(Object.assign({},d),Oe);return this.writeUpdateData(R)}))}isFirstRunAfterUpdate(){return this.readPreviousVersion().pipe((0,St.b)(Oe=>{this.firstRunAfterMajorUpdate=this.baseVersion.compareMajorVersion(Oe)===oi.A.Lesser,this.firstRunAfterMajorUpdateObservable.next(this.firstRunAfterMajorUpdate&&!this.isFirstApplicationInstall(Oe))}),(0,Je.U)(Oe=>this.baseVersion.compare(Oe)===oi.A.Lesser))}isFirstApplicationInstall(Oe){return Oe.compare(ei.zeroVersion)===oi.A.Equal}storeCurrentVersion(){return this.appendUpdateData({currentVersion:this.baseVersion.toString()})}readPreviousVersion(){return(0,u.isNil)(this.previousVersion)?((0,u.isNil)(this.readPreviousVersionOb$)&&(this.readPreviousVersionOb$=this.readUpdateData().pipe((0,Je.U)(Oe=>{if((0,u.isNil)(Oe))this.logger.info("No update data found in shared storage");else{this.wasUpdatedFromUI=(0,u.get)(Oe,"updateFromJS",!1),this.updateStartTimestamp=(0,u.get)(Oe,"updateStartTimestamp",0);const d=(0,u.get)(Oe,"currentVersion",ei.zeroVersion.toString()),R=new oi.b(d);if(R.compare(ei.zeroVersion)!==oi.A.Equal)return R;this.logger.info("No previous version found in shared storage update block")}return ei.zeroVersion}),(0,xt.K)(Oe=>{const d="Error caught when reading update data from shared storage: "+Oe;throw this.logger.error(d),new Error(d)}))),this.readPreviousVersionOb$):(0,N.of)(this.previousVersion)}sendAppUpdateTelemetry(Oe,d,R,ce,_e=0,Le){this.logger.info("Uploading app update telemetry",Oe,d,R,ce,_e,Le);const Re=new ge.J2u({previousVersion:(0,u.isNil)(Oe)?"":Oe.toString(),targetVersion:(0,u.isNil)(d)?"":d.toString(),status:R,downloadTimeMs:0,upTimeMs:0,installerRuntimeMs:_e,retryCount:0,channel:this.updateChannel,updateUrl:"",errorCategory:(0,u.isNil)(ce)?ge.Ydg.None:ge.Ydg.General,errorMessage:(0,u.isNil)(ce)?"":ce});this.telemetry.push(Re,0,Le)}sendAppLaunchTelemetry(Oe){return this.systemInfoService.getOsInformation().pipe((0,Je.U)(d=>({OSName:d.OSName,OSVersion:d.OSVersion})),(0,xt.K)(d=>(this.logger.error("Received error from getOsInfo, uploading telemetry without os info. Error = ",d),(0,N.of)({OSName:"",OSVersion:""}))),(0,Je.U)(d=>{let R,ce;if(Oe===ei.zeroVersion)R="",ce=ge.AUc.FirstApplicationInstall;else{R=Oe.toString(),ce=ge.AUc.SelfUpdateInstallAuto;let Re=0;this.updateStartTimestamp>0&&(Re=Date.now()-this.updateStartTimestamp),this.sendAppUpdateTelemetry(this.previousVersion,this.baseVersion,ge.YwJ.UpdateSuccess,null,Re)}const _e={clientType:this.telemetryUtilService.getClientType(),type:ce,previousAppVersion:R,osName:d.OSName,osVersion:d.OSVersion};this.logger.info("Uploading app install telemetry: ",ce);const Le=new ge.syg(_e);this.telemetry.push(Le)}))}handlePostUpdateCommandLine(Oe){const d=(0,wn.X4)(Oe,this.logger);(0,u.isNil)(d)||this.isFirstRunAfterUpdate().subscribe(R=>{R&&!this.wasUpdatedFromUI?(this.logger.info("Found cmsId, this is the first run with a new version, and the previous update was not initiated from the UI, so attempting to launch the given cmsId"),this.pendingGameLaunchSubject.next(d)):this.logger.info("found cmsId "+d+", but this is not the first run after an update. Ignoring")})}getTargetVersion(){return(0,u.isNil)(this.pendingUpdate)?null:this.pendingUpdate.version}}ei.zeroVersion=new oi.b("0"),ei.\u0275fac=function(Oe){return new(Oe||ei)(o.LFG(Hn.uC),o.LFG(f.ed),o.LFG(_n.VK),o.LFG(f.o1),o.LFG(Ii.OA),o.LFG(a.y0),o.LFG(ge.wU6),o.LFG(f.dF),o.LFG(f.Ob),o.LFG(y.uw))},ei.\u0275prov=o.Yz7({token:ei,factory:ei.\u0275fac,providedIn:"root"});let qo=(()=>{class J{constructor(){}}return J.\u0275fac=function(d){return new(d||J)},J.\u0275cmp=o.Xpm({type:J,selectors:[["html"]],decls:10,vars:0,consts:[["charset","UTF-8"],["onload","sendErrorMessage()",2,"background-color","#1a1a1a","font-family","Roboto, sans-serif"],[2,"position","absolute","top","50%","left","50%","margin-right","50%","transform","translate(-50%, -50%)"],["aria-hidden","true",2,"color","rgba(255, 255, 255, .3)","width","410px","text-align","center"],["src","data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjNWE1YTVhIiBoZWlnaHQ9IjQ4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSI0OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4gICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPiAgICA8cGF0aCBkPSJNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMSAxNWgtMnYtNmgydjZ6bTAtOGgtMlY3aDJ2MnoiLz48L3N2Zz4="],[2,"color","rgba(255, 255, 255, .3)","width","410px","text-align","center"]],template:function(d,R){1&d&&(o.TgZ(0,"head"),o._UZ(1,"meta",0),o.TgZ(2,"title"),o._uU(3,"NVIDIA GeForce NOW"),o.qZA(),o.qZA(),o.TgZ(4,"body",1),o.TgZ(5,"div",2),o.TgZ(6,"p",3),o._UZ(7,"img",4),o.qZA(),o.TgZ(8,"p",5),o._uU(9," #pageCouldNotBeLoaded "),o.qZA(),o.qZA(),o.qZA())},encapsulation:2}),J})(),er=(()=>{class J{constructor(d,R){this.translate=d,this.bridgeService=R}load(d){return this.translateStringTable(d.translateStringTable).pipe((0,Se.zg)(R=>{const ce=Object.assign(Object.assign({},R),d.staticStringTable);return this.bridgeService.executeCommand(mi.Gh.Common.Applicationcontrol.LoadStringTable,{stringTable:ce})}))}translateStringTable(d){if((0,u.isNil)(d))return(0,N.of)(d);const R=Object.keys(d),ce=Object.values(d);return this.translate.get(ce).pipe((0,Je.U)(_e=>{const Le={};return ce.forEach((Re,Xe)=>{Le[R[Xe]]=_e[Re]}),Le}))}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(m.sK),o.LFG(f.dF))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})(),tr=(()=>{class J{constructor(d,R,ce,_e,Le,Re,Xe){this.componentFactoryResolver=d,this.injector=R,this.stringTableService=ce,this.configuration=_e,this.translate=Le,this.localeService=Re,this.logger=Xe.getLogger("gfn-shared/GfnStringTableService")}load(){return this.localeService.localeChanged.pipe((0,Se.zg)(d=>{const Le=`<html><head><meta charset="UTF-8"></head>${this.componentFactoryResolver.resolveComponentFactory(qo).create(this.injector).location.nativeElement.innerHTML}</html>`,Re={translateStringTable:{quitMenuItem:"common.quit"},staticStringTable:{userAgent:this.configuration.client.userAgent+"/"+this.configuration.build.version,onLoadError:Le,acceptLanguage:d}},Xe=["error.pageCouldNotBeLoaded","common.retry"],mt=["#pageCouldNotBeLoaded","#retry"];return this.translate.get(Xe).pipe((0,Se.zg)(Gt=>(Xe.forEach((Qt,an)=>{Re.staticStringTable.onLoadError=Re.staticStringTable.onLoadError.replace(mt[an],Gt[Qt])}),this.stringTableService.load(Re))),(0,xt.K)(Gt=>(this.logger.error("Could not translate static strings ",Gt),this.stringTableService.load(Re))))}))}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(o._Vd),o.LFG(o.zs3),o.LFG(er),o.LFG(_n.VK),o.LFG(m.sK),o.LFG(f.OL),o.LFG(f.ed))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})(),ir=(()=>{class J{constructor(d){this.logger=d.getLogger("ImageFormatService")}formatImageServiceUrl(d,R){if(R)for(const ce of Object.keys(R)){const _e=R[ce]||(0,u.isBoolean)(R[ce])?""+R[ce]:void 0;_e&&_e.length>0&&!(0,u.isNil)(d)&&(d+=";"+ce+"="+R[ce])}return d}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var or=e(17163),Ti=e(1143),rr=e(96958),sr=e(56226),mo=e(62558),ar=e(3786),Ai=e(76491),Uo=e(2335),Fe=e(91489),Nt=e(61481),he=e(73734);let je=(()=>{class J{constructor(d,R,ce){this.idmService=d,this.loggingService=R,this.sharedStorageService=ce,this.currentUserId="undefined",this.currentUserConsent=a.nM,this.userConsentFetchedSubject=new ii.t(1),this.logger=this.loggingService.getLogger("UserConsentWrapperService")}initialize(){this.readSharedStorageConsent(),this.onUserAccountStatusChanged(),this.onJarvisUserDataChanged()}hasUserIdChanged(d){return!(0,u.isEqual)(this.currentUserId,d)}hasUserConsentChanged(d){return!(0,u.isEqual)(this.currentUserConsent,d)}setCurrentUserData(d,R){this.currentUserId=d,this.currentUserConsent=R}readSharedStorageConsent(){this.sharedStorageService.readBlock("userConsentInfo").subscribe(d=>{!(0,u.isUndefined)(d)&&this.hasUserIdChanged(d.userId)&&this.hasUserConsentChanged(d.userConsent)&&(this.setCurrentUserData(d.userId,d.userConsent),this.userConsentFetchedSubject.next({userId:d.userId,externalUserId:d.externalUserId,idpId:d.idpId,userConsent:d.userConsent}))})}onUserAccountStatusChanged(){this.idmService.accountStatusChanged.subscribe(d=>{if(d.isAuthenticated){const R=(0,he.WF)(d);this.hasUserIdChanged(d.userId)&&this.hasUserConsentChanged(R)&&(this.setCurrentUserData(d.userId,R),this.userConsentFetchedSubject.next({userId:d.userId,externalUserId:d.externalId,idpId:d.idpId,userConsent:R}))}else this.setCurrentUserData(d.userId,a.l3),this.userConsentFetchedSubject.next({userId:"",externalUserId:"",idpId:"",userConsent:void 0})})}onJarvisUserDataChanged(){this.idmService.userDataChanged.subscribe(d=>{if(d.newUser.isAuthenticated){const R=(0,he.WF)(d.newUser);this.hasUserIdChanged(d.newUser.userId)&&this.hasUserConsentChanged(R)&&(this.setCurrentUserData(d.newUser.userId,R),this.userConsentFetchedSubject.next({userId:d.newUser.userId,externalUserId:d.newUser.externalId,idpId:d.newUser.idpId,userConsent:R}))}else this.hasUserIdChanged(d.newUser.userId)&&this.userConsentFetchedSubject.next({userId:"",externalUserId:"",idpId:"",userConsent:void 0})})}getUserConsentFetchedSubjectObservable(){return this.userConsentFetchedSubject.asObservable()}getLogoutInitiatedNotification(){return this.idmService.getLogoutInitializeNotification()}sameTabAuthStarted(){return this.idmService.sameTabAuthStarted()}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(Kt.No),o.LFG(f.ed),o.LFG(Ii.OA))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();const lt="saveAppInstanceId";let Bt=(()=>{class J{constructor(d,R,ce,_e,Le,Re,Xe,mt,Gt,Qt,an){this.appConfig=d,this.systemInfoService=R,this.telemetryService=ce,this.remoteLoggingService=_e,this.userConsentWrapperService=Le,this.loggingService=Re,this.sharedStorageService=Xe,this.logQueueService=mt,this.gfnWebWorkerService=Gt,this.telemetryUtilService=Qt,this.injector=an,this.defaultConsent=a.nM,this.appInstanceIdSubject=new Ai.X(""),this.appInstanceId=f.kQ,this.waitForLogRestore$=new ii.t(1),this.eventParamIds={streamSessionId:"",surveySessionId:""},this.logger=this.loggingService.getLogger("GfcHelperService")}restoreAllData(){null!==window.sessionStorage.getItem(lt)&&(this.remoteLoggingService.restoreSavedLogs(),this.appInstanceId=window.sessionStorage.getItem(lt),window.sessionStorage.removeItem(lt)),this.waitForLogRestore$.next(!0)}getLogoutInitializeNotification(){this.userConsentWrapperService.getLogoutInitiatedNotification().subscribe(d=>{this.remoteLoggingService.handleExternalUrlLoad()})}saveLogsOnLoginClick(){this.logger.info("Subscribing to Login initiated notification"),this.userConsentWrapperService.sameTabAuthStarted().subscribe(d=>{d===Nt.fH.LoginStarted&&(this.logger.info("Received notification for ",d),window.sessionStorage.setItem(lt,this.appInstanceId),this.remoteLoggingService.saveLogsToSessionStorage(),this.logger.info("Completed saving appInstanceId and Logs"))})}initialize(d=this.eventParamIds){this.restoreAllData(),this.saveLogsOnLoginClick();const R=this.appConfig.gfcFeedbackEvents;this.remoteLoggingService.setBufferConfiguration({msBetweenChunkCreation:R.msBetweenChunkCreation,maxBufferSizeInBytes:R.maxBufferSizeInBytes,chunksQueueSize:R.chunksQueueSize,chunkResendRetryLimit:R.chunkResendRetryLimit}),this.userConsentWrapperService.initialize(),this.prepareAllGfcEventParams(d),this.registerForTimerRequests().subscribe(u.noop,ce=>{this.logger.error("Error getting timer updates")}),this.telemetryService.getDefaultClientConsentObserable().subscribe(()=>{this.defaultConsent=a.l3,this.remoteLoggingService.defaultConsentLevel=a.l3}),this.getLogoutInitializeNotification()}onTimerUpdate(d){d===Fe.Em.Timeout||d===Fe.Em.Cleared?this.logQueueService.updateTimer(d):this.logger.error("Error polling for idle timeout: ",d)}registerForTimerRequests(){return this.logQueueService.timerSubscriptionChanged().pipe((0,Ot.w)(d=>this.gfnWebWorkerService.intervalHandler(d,this.onTimerUpdate.bind(this))))}buildGFNPCLogsFeedbackData(d){return this.systemInfoService.getSystemInfo().pipe((0,Je.U)(R=>{const ce=(0,u.extend)({},{appInstanceId:d.appInstanceId,streamSessionId:d.streamSessionId||"",browserName:R.BrowserName||"",browserVersion:R.BrowserVersion||"",osName:R.OSName||"",osVersion:R.OSVersion||"",streamSubSessionIds:[],surveySessionId:d.surveySessionId||""});return this.logger.info("Prepared gfc feedback event params."),this.remoteLoggingService.prepareGfcFeedbackEventParams(ce),!0}))}setAppInstanceIdInIndexedDb(d){return this.sharedStorageService.writeBlock("gfc",{appInstanceId:d})}prepareGfnPcLogsEventParams(d){let R;return this.waitForLogRestore$.pipe((0,Se.zg)(ce=>(this.appInstanceId===f.kQ&&(this.appInstanceId=(0,zn.Rl)()),this.setAppInstanceIdInIndexedDb(this.appInstanceId))),(0,Se.zg)(ce=>(R=ce,d.appInstanceId=this.appInstanceId,this.buildGFNPCLogsFeedbackData(d))),(0,St.b)(ce=>{R&&(console.log("Application InstanceId: ",this.appInstanceId),this.appInstanceIdSubject.next(this.appInstanceId))}))}getClientVariantType(d){switch(d){case"ibeta":return f.ns.iBeta;case"release":return f.ns.Release;default:return f.ns.Undefined}}fetchCommonDataFromSystem(d,R){return(0,be.aj)([this.systemInfoService.getDeviceId(),this.systemInfoService.getSystemInfo(),this.userConsentWrapperService.getUserConsentFetchedSubjectObservable()]).pipe((0,Je.U)(([ce,_e,Le])=>{var Re,Xe;const mt={clientVer:this.appConfig.build.version,deviceId:ce,sessionId:this.telemetryService.telemetrySessionId,feedbackId:this.telemetryService.telemetrySessionId,feedbackName:d,fileList:R,clientType:f.Bh.Browser,clientVariant:this.getClientVariantType(this.appConfig.build.variant),deviceOS:_e.OSName,deviceOSVersion:null!==(Re=_e.OSVersion)&&void 0!==Re?Re:f.kQ,deviceMake:f.kQ,deviceModel:_e.SystemName||f.kQ,deviceType:_e.DeviceType,browserType:null!==(Xe=_e.BrowserName)&&void 0!==Xe?Xe:f.kQ,integrationId:this.telemetryUtilService.getIntegrationId(),deviceGdprFuncOptIn:this.defaultConsent.functional,deviceGdprTechOptIn:this.defaultConsent.technical,deviceGdprBehOptIn:this.defaultConsent.behavioral};return this.logger.trace(zn.y$.UserDetails,zn.Px.UserInfo,"Feedback id is "+mt.feedbackId),this.logger.trace(zn.y$.UserDetails,zn.Px.UserInfo,"Client version is "+mt.clientVer),(0,u.isEmpty)(Le.userId)||Le.userId===f.kQ?(mt.userId=f.kQ,mt.externalUserId=f.kQ,mt.idpId=f.kQ):(mt.userId=Le.userId,mt.externalUserId=Le.externalUserId,mt.idpId=Le.idpId),(null==Le?void 0:Le.userConsent)&&(mt.gdprFuncOptIn=Le.userConsent.functional,mt.gdprTechOptIn=Le.userConsent.technical,mt.gdprBehOptIn=Le.userConsent.behavioral),mt}),(0,xt.K)(ce=>(this.logger.error("Error fetching common device info: ",ce),(0,q._)(ce))))}prepareFeedbackEventCommonParameters(){return console.log("telemetry sessionId/feedbackId ",this.telemetryService.telemetrySessionId),this.fetchCommonDataFromSystem("GFNPCLogs",[{name:"mall_console.txt",type:"file/gfnwebobfuscation"}]).pipe((0,Ot.w)(R=>(this.remoteLoggingService.prepareFeedbackCommonEventData(R),this.logger.info("Prepared common gfc feedback event params."),(0,N.of)(!0))),(0,xt.K)(R=>(this.logger.error("Error fetching systeminfo or deviceId: ",R),(0,N.of)(!1))))}prepareAllGfcEventParams(d){const R=this.prepareFeedbackEventCommonParameters(),ce=this.prepareGfnPcLogsEventParams(d);(0,yn.$R)(R,ce).subscribe(_e=>{!(0,u.isUndefined)(_e)&&_e[0]&&_e[1]&&this.handleUserConsentUpdates()})}handleUserConsentUpdates(){this.userConsentWrapperService.getUserConsentFetchedSubjectObservable().subscribe(d=>{(0,u.isEmpty)(d.userId)?this.remoteLoggingService.prepareFeedbackCommonEventData({userId:f.kQ}):(d.userId!==f.kQ||!(0,u.isEmpty)(d.userId))&&(this.remoteLoggingService.prepareFeedbackCommonEventData({userId:d.userId}),this.remoteLoggingService.setUserConsent({userId:d.userId,externalUserId:d.externalUserId,idpId:d.idpId,userConsent:d.userConsent}))})}updateEventDataParamIds(d){this.remoteLoggingService.updateEventDataParamIds(d)}getAppInstanceId(){return this.appInstanceIdSubject.asObservable()}terminateRemoteLogSession(){this.logger.info("Terminating log collection."),this.remoteLoggingService.stopFeedbackUpload()}triggerExceptionInfoUpload(d){const R=this.injector.get(Uo.H0);if(R){this.logger.info("EndPoints service available");const{exceptionTrace:ce}=d,_e=(0,ar._T)(d,["exceptionTrace"]);(0,be.aj)([this.remoteLoggingService.feedbackId$,this.fetchCommonDataFromSystem("GFNUIException")]).pipe((0,Ge.q)(1),(0,Se.zg)(([Le,Re])=>{this.logger.info("feedbackId:",Le),Re.clientTs=(new Date).toISOString(),Re.feedbackId=(0,zn.Rl)();let Xe=!1;Re.gdprTechOptIn===f.p6.Full&&(Re.fileList=[{name:"exception_trace.txt",type:"file/js-stacktrace"}],Xe=!0),this.logger.info("Common data:",Re);const mt=Object.assign(Object.assign({},Re),{parameters:Object.assign({},_e)});return mt.parameters.logsFeedbackId=Le,R.sendFeedbackBasedOnTechConsent(mt,Xe,ce)})).subscribe(()=>{this.logger.info("Exception data sent successfully")},Le=>{this.logger.info("Error uploading exception info:",Le)})}else this.logger.info("EndPoints service not available, not uploading the feedback event")}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(_n.VK),o.LFG(f.Ob),o.LFG(a.y0),o.LFG(f.V$),o.LFG(je),o.LFG(f.ed),o.LFG(Ii.OA),o.LFG(f.p3),o.LFG(Fe.$_),o.LFG(ge.wU6),o.LFG(o.zs3))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})(),hn=(()=>{class J extends sr.r7{constructor(d,R,ce){super(d.getLogger("shared/CustomExceptionService"),R,ce),this.exceptionDataList=new Map,this.exceptionEvent$=new oe.xQ}handleClientSideException(d,R){this.registerExceptionLimiter(),this.timeLimiter=R.exceptionTimeLimiter,this.exceptionEvent$.next(d)}registerExceptionLimiter(){let d;const R=this.injector.get(mo.s),ce=this.injector.get(_n.VK);this.exceptionEvent$.pipe((0,pt.h)(_e=>(d={message:_e.message,fileName:"",stackFrameSource:"",exceptionTrace:_e.exceptionString},!this.exceptionMatchFound(_e.name,d))),(0,St.b)(_e=>{var Le,Re,Xe;this.exceptionDataList.set(_e.name,d),this.logger.info("Added exception data list of size: ",this.exceptionDataList.size);const mt=this.injector.get(ge.wU6);this.sendExceptionTelemetry(_e,mt);const Gt={name:null!==(Le=_e.name)&&void 0!==Le?Le:"",message:null!==(Re=_e.message)&&void 0!==Re?Re:"",exceptionTrace:null!==(Xe=_e.exceptionString)&&void 0!==Xe?Xe:"",logsFeedbackId:""};if(f.ng.isBrowserPlatform()){const Qt=this.injector.get(Bt);Qt?(Qt.triggerExceptionInfoUpload(Gt),this.logger.info("Exception upload triggered")):this.logger.info("Could not inject GfcHelperService")}else mt.triggerExceptionInfoUpload(Gt)}),(0,or.M)(R.remoteConfigFetched$.pipe((0,Ti.O)({overrides:{},config:ce}))),(0,rr.z)(([_e,Le])=>((0,u.has)(Le,"config.exception")&&(this.timeLimiter=Le.config.exception.exceptionTimeLimiter),this.logger.info("Exception rate limit timer started: ",this.timeLimiter),(0,Me.H)(this.timeLimiter)))).subscribe(()=>{this.clearExceptionDataList()})}exceptionMatchFound(d,R){let ce=!1;return!(0,u.isNil)(this.exceptionDataList)&&!(0,u.isEmpty)(this.exceptionDataList)&&this.exceptionDataList.has(d)&&(ce=(0,u.isEqual)(R,this.exceptionDataList.get(d))),ce}clearExceptionDataList(){this.logger.info("clearing exception data list"),this.exceptionDataList.clear()}sendExceptionTelemetry(d,R){var ce,_e,Le;this.logger.info("Sending Exception telemetry event"),this.injector.get(a.y0).push(new ge.vlM({clientType:R.getClientType(),name:null!==(ce=d.name)&&void 0!==ce?ce:"",message:null!==(_e=d.message)&&void 0!==_e?_e:"",fileName:"",stackFrameSource:"",exceptionTrace:null!==(Le=d.exceptionString)&&void 0!==Le?Le:""}))}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(o.zs3),o.LFG(y.uw))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac}),J})();var sn=mi.Yk.Common.Discord.DiscordAsset;let bn=(()=>{class J{constructor(d,R,ce,_e,Le){this.bridgeService=R,this.settingsService=ce,this.appConfig=_e,this.translate=Le,this.logger=d.getLogger("DiscordService"),this.discordRpEnabled=Bn.n.discordRpEnabled,this.featureEnabled=this.appConfig.featureEnablement.discordRichPresence&&f.ng.isCefPlatform()||!1,this.settingsService.getSettingsData().subscribe(Re=>{this.discordRpEnabled=(0,u.get)(Re,"discordRpEnabled",Bn.n.discordRpEnabled)},Re=>this.logger.error("Failed to get settings data",Re))}updatePresence(d){!this.featureEnabled||!d||this.translate.get("discord.playing",{title:d}).subscribe(R=>(this.currentPresence={details:R.trim().substring(0,128),largeImageKey:sn.Large},this.discordRpEnabled&&this.updatePresenceCommand(this.currentPresence)))}clearPresence(){!this.featureEnabled||!this.currentPresence||(this.currentPresence=null,this.clearPresenceCommand())}updatePresenceCommand(d){if(!(0,u.isEmpty)(d))return this.logger.info("Updating rich presence with params",d),this.bridgeService.executeCommand(mi.Gh.Common.Discord.UpdatePresence,d).subscribe()}clearPresenceCommand(){return this.logger.info("Clearing rich presence"),this.bridgeService.executeCommand(mi.Gh.Common.Discord.ClearPresence,{}).subscribe()}setDiscordEnabled(d){this.discordRpEnabled=d,d?this.updatePresenceCommand(this.currentPresence):this.clearPresenceCommand()}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(f.dF),o.LFG(Bn.gb),o.LFG(_n.VK),o.LFG(m.sK))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var Jn=e(14624);let ai=(()=>{class J{constructor(d,R,ce,_e){this.loggingService=d,this.networkConfigurationService=R,this.gridService=ce,this.logger=this.loggingService.getLogger("gfn/startupService")}checkAndFixOverrideZone(){const d=[],R=this.gridService.zoneList$.pipe((0,xt.K)(ce=>(this.logger.error("failed to get zones",ce),(0,N.of)({}))));return d.push(R),d.push(this.networkConfigurationService.getNetworkOverride()),(0,yn.$R)(...d).pipe((0,Se.zg)(ce=>{const _e=ce[0],Le=ce[1];return(0,u.isNil)(Le)||Le.isInternal||-1!==((0,u.isNil)(_e)?[]:Object.values(_e)).findIndex(mt=>mt.address===Le.address&&mt.name===Le.name)?(0,N.of)(!0):(this.logger.info("Zone override present and not available in the zonesList, clearing the NetworkOverride"),this.networkConfigurationService.clearNetworkOverride())}))}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(ze.XS),o.LFG(Xn.r),o.LFG(Jn.i))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var di=(()=>{return(J=di||(di={})).StartRelaunch="StartRelaunch",J.CheckForceStatus="CheckForceStatus",J.AppContextSwitch="AppContextSwitch",J.SendIpcShutdown="SendIpcShutdown",J.FinishRelaunch="FinishRelaunch",J.Done="Done",di;var J})();class Zi{constructor(Oe,d,R,ce){this.applicationLifetimeService=Oe,this.sharedStorageService=d,this.updateService=R,this.stateMachineStatusSubject=new ii.t(1),this.isRelaunchFromStreamer=!1,this.sharedStorageKey="relaunchData",this.relaunchShutdownHandler=()=>(0,N.of)(void 0),this.logger=ce.getLogger("crimson/relaunchService")}startRelaunch(Oe,d=!1){return this.isActive()?(0,q._)("Relaunch started when one was already active"):(this.isRelaunchFromStreamer=d,this.stateMachineStatusSubject.next(di.StartRelaunch),this.relaunchData=this.createNewRelaunchData(Oe),this.startRelaunchInternal())}createNewRelaunchData(Oe){return{active:!0,force:Oe}}cancelRelaunch(){this.isActive()?this.logger.error("cancelRelaunch called when relaunch wasn't started"):this.relaunchData.active=!1}shutdownDueToIpc(){return this.relaunchShutdownHandler().pipe((0,St.b)(()=>this.applicationLifetimeService.shutdownApplication(c.ld.IpcRequestedExit)),(0,Tt.h)(void 0))}startRelaunchInternal(){return this.isCancelled()?(0,q._)("Relaunch Cancelled"):this.onRelaunch()}setRelaunchShutdownHandler(Oe){this.relaunchShutdownHandler=(0,u.isNil)(Oe)?()=>(0,N.of)(void 0):Oe}appendRelaunchSharedData(Oe){return this.readRelaunchSharedData().pipe((0,Je.U)(d=>((0,u.isNil)(d)&&(d={}),(0,u.merge)(d,Oe),d)),(0,Se.zg)(d=>this.writeRelaunchSharedData(d)))}clearRelaunchSharedData(){return this.writeRelaunchSharedData({})}readRelaunchSharedData(){return this.sharedStorageService.readBlock(this.sharedStorageKey)}isActive(){return!(0,u.isNil)(this.relaunchData)&&this.relaunchData.active}currentState(){return this.stateMachineStatusSubject.asObservable()}isCancelled(){return!(0,u.isNil)(this.relaunchData)&&!this.relaunchData.active}onRelaunch(){return this.stateMachineStatusSubject.next(di.FinishRelaunch),this.relaunchShutdownHandler().pipe((0,Se.zg)(()=>this.appendRelaunchSharedData({releaseHighlight:!0})),(0,Se.zg)(()=>this.updateService.updateApplication$(this.isRelaunchFromStreamer)),(0,pt.h)(Oe=>this.validateGfnSelfUpdateResponse(Oe)),(0,Se.zg)(()=>this.onDone()))}validateGfnSelfUpdateResponse(Oe){if((0,u.isNil)(Oe)||(0,u.isNil)(Oe.status))throw this.logger.error("gfnSelfUpdate returned invalid result data"),Oe;switch(Oe.status){case _i.SubAppRunning:throw this.logger.error("gfnSelfUpdate returned SUB_APP_RUNNING"),Oe;case _i.Failed:throw this.logger.error("gfnSelfUpdate returned FAILED"),Oe;case _i.Success:return this.logger.info("Self update succeeded"),!0;default:throw this.logger.error("gfnSelfUpdate returned unknown staus value"),Oe}}onDone(){return this.stateMachineStatusSubject.next(di.Done),this.cancelRelaunch(),(0,N.of)(!0)}writeRelaunchSharedData(Oe){return this.sharedStorageService.writeBlock(this.sharedStorageKey,Oe)}}var Li=e(45129);let Ri=(()=>{class J{}return J.\u0275fac=function(d){return new(d||J)},J.\u0275mod=o.oAB({type:J}),J.\u0275inj=o.cJS({imports:[[n.ez,Li.U8]]}),J})();e(40648);var Gn=e(32839);e(7883);var un=e(89166),fo=e(90772),Wi=e(96767),no=e(62167);let vo=(()=>{class J{constructor(d,R,ce,_e,Le,Re,Xe,mt,Gt,Qt){this.appConfig=R,this.distributedTracingUtilService=ce,this.distributedTracingXhrFactoryService=_e,this.systemInfoService=Le,this.nesUserInfoService=Re,this.sharedStorageCachingService=Xe,this.localeService=mt,this.router=Gt,this.gridService=Qt,this.logger=d.getLogger("gfn/distributed-tracing-initializer")}initializeDistributedTracing(){const d=new fo.Tracer(this.appConfig.tracer);this.distributedTracingUtilService.setTracer(d),this.distributedTracingXhrFactoryService.initialize(),this.distributedTracingXhrFactoryService.setTracer(d),this.distributedTracingXhrFactoryService.setWhitelist(this.appConfig.distributedTracing.xhrWhitelist),this.distributedTracingXhrFactoryService.setStatusCodeZeroAnalyzerConfig(this.appConfig.statusCodeZeroAnalyzerConfig),this.setGlobalTags()}setGlobalTags(){const d=(0,N.of)({[un.NI.ServiceVersion]:this.appConfig.build.version,[un.NI.ServiceType]:un.sk.Pc_A7,[un.NI.SpanKind]:un.$Q.Client,[un.NI.AppName]:(0,ve.wI)(this.router.url)?ve.lW.Streamer:ve.lW.Mall}),R=this.systemInfoService.getDeviceId().pipe((0,Je.U)(Xe=>({[un.NI.DeviceId]:Xe})),(0,Ti.O)({})),ce=this.systemInfoService.getOsInformation().pipe((0,Je.U)(Xe=>({[un.NI.ClientOs]:Xe.Platform,[un.NI.ClientOsName]:Xe.OSName,[un.NI.ClientOsVersion]:Xe.OSVersion})),(0,Ti.O)({}),(0,xt.K)(Xe=>(this.logger.info(`Error fetching osInfo: ${Xe}`),(0,N.of)({})))),_e=this.fetchCountryCode().pipe((0,Je.U)(Xe=>({[un.NI.CountryCode]:Xe})),(0,Ti.O)({})),Le=this.localeService.localeChanged.pipe((0,Je.U)(Xe=>({[un.NI.Locale]:Xe})),(0,Ti.O)({})),Re=this.gridService.vpcId$.pipe((0,Je.U)(Xe=>({[un.NI.VpcId]:Xe})),(0,Ti.O)({}),(0,xt.K)(Xe=>(this.logger.info(`Error fetching vpcId: ${Xe}`),(0,N.of)({[un.NI.VpcId]:un.H7.VpcId}))));(0,be.aj)([d,R,ce,_e,Le,Re]).subscribe(([Xe,mt,Gt,Qt,an,vn])=>{const Cn=(0,u.merge)({},Xe,mt,Gt,Qt,an,vn);this.logger.info("Setting the global tags:",Cn),this.distributedTracingUtilService.setGlobalTags(Cn),this.distributedTracingXhrFactoryService.setGlobalTags(Cn)})}fetchCountryCode(){return this.sharedStorageCachingService.getItem(Wi.RI.CountryCode).pipe((0,Se.zg)(d=>{if((0,u.isNil)(d.data))return this.logger.info("Cound not find countrycode in shared storage so fetching from NES"),this.nesUserInfoService.getCountryCode();if(d.expired){if(!this.sharedStorageCachingService.isExpiredValueAllowed(Wi.RI.CountryCode))return this.logger.info("Expired values not allowed for country code hence fetching fresh value from NES"),this.nesUserInfoService.getCountryCode();this.logger.info("The cached country code value is expired so refreshing in backgound"),this.refreshCountryCodeInBackground()}return this.logger.info(`Using the country code from cache ${d.data}`),(0,N.of)(d.data)}))}refreshCountryCodeInBackground(){this.nesUserInfoService.getCountryCode().subscribe()}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(_n.VK),o.LFG(un.Dc),o.LFG(un.fy),o.LFG(f.Ob),o.LFG(no.f),o.LFG(Wi.sB),o.LFG(f.OL),o.LFG(si.F0),o.LFG(Xn.r))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var Pi=e(48259);const bo="releaseHighlightStatus",xo="releaseHighlightsOnAppUpdate",Dr={go:"IN",sM:"32GB",osC:"10.0",osB:"7601",is6:"1",GFPV:"385.69",iLp:"0"},Nr={name:"gfnReleaseHighlightsHtml",classPath:Pi.zJ.services,clientPath:Pi.dp.GfeClient,endpointPath:"/getStyledClientReleaseHighlightsHtml",method:Pi.fo.Get,paramMask:["cNm","cmID","gcV","lg","gLg","go","cID","dIDa","sM","osC","osB","is6","GFPV","gIsB","iLp","isO","isSLI","cSR","isInst","Plt","clVt"]};let _o=(()=>{class J{constructor(d,R,ce,_e,Le,Re,Xe,mt,Gt){var Qt;this.localService=ce,this.matDialog=_e,this.aemService=Le,this.sharedStorage=Re,this.remoteConfigurationService=Xe,this.telemetryUtilService=mt,this.systemInfoService=Gt,this.releaseHighlightsData={shown:!1},this.aemEndpointDefintions=[],this.aemEndpointDefintions.push(Nr),this.logger=R.getLogger("gfn/releaseHighlights"),this.aemService.addEndpointDefinitions(this.aemEndpointDefintions),this.platform$=this.telemetryUtilService.getPlatform(),this.clientVariant=this.telemetryUtilService.getClientVariant(),this.osInfo$=this.systemInfoService.getOsInformation(),this.mobileMode=!!(null===(Qt=null==d?void 0:d.featureEnablement)||void 0===Qt?void 0:Qt.mobileMode)}getReleaseHighlight(){return this.getAemReleaseHighlights().pipe((0,Je.U)(d=>({title:"common.releaseHighlights",subTitle:"",body:d.body.gfcontent.body,style:"dialog-service-container-size"})))}getAemReleaseHighlights(){return(0,yn.$R)(this.localService.localeChanged,this.platform$,this.osInfo$).pipe((0,Se.zg)(([d,R,ce])=>this.aemService.callAemEndpoint("gfnReleaseHighlightsHtml",Object.assign(Object.assign({cmID:"",gcV:this.clientVersion,gLg:d,lg:""},Dr),{cNm:f.ng.isCefPlatform()?"gfn":"gfnb",isInst:this.isInstallScenario,Plt:f.ng.isCefPlatform()?R:(0,wn.Jk)(ce.OSName.toString()),clVt:this.clientVariant}),{originalService:ge.v6v.Aem,serviceUseCase:ge.f$p.Get_Release_Highlights},{},{"Content-Type":"text/plain"},void 0)))}updateReleaseHighlightsStatusInSharedStorage(d){return this.sharedStorage.writeBlock(bo,{appVersion:d,isDialogShown:!0})}showReleaseHighlightsFromRemoteConfig(d){return this.remoteConfigurationService.remoteConfigFetched$.pipe((0,Se.zg)(R=>{const ce=new oi.b(d);if((0,u.isNil)(R.config)||(0,u.isNil)(R.config.releaseHighlights))return this.logger.info("Remote config value not set for Release highlights."),(0,N.of)(!1);{const _e=R.config.releaseHighlights.showReleaseHighlightsForAppVersion;return this.logger.info("Remote config value for Release highlights: ",_e),ce.compare(new oi.b(_e))===oi.A.Equal?this.updateReleaseHighlightsStatusInSharedStorage(ce.toString()).pipe((0,Se.zg)(()=>(0,N.of)(!0))):(this.logger.info("Remote config version does not match the app versions."),(0,N.of)(!1))}}))}showReleaseHighlightsFromSharedStorage(d){return this.sharedStorage.readBlock(bo).pipe((0,Se.zg)(R=>(0,u.isNil)(R)||(0,u.isEmpty)(R)?(0,N.of)(!0):R.appVersion===d?(0,N.of)(!R.isDialogShown):(this.logger.info("Old version value present in shared storage. Clearing"),this.sharedStorage.writeBlock(bo,{}).pipe((0,Tt.h)(!0)))))}onShowReleaseHighlight(d,R,ce){if(this.clientVersion=R,this.isInstallScenario=ce,!d||!this.releaseHighlightsData.shown){this.releaseHighlightsData.shown=!0;const _e={autoFocus:!1,hasBackdrop:!0,disableClose:!1,panelClass:"dialogPaddingRemove"};return _e.data={getArticleCallback:()=>this.getReleaseHighlight(),autoCloseOnError:d,noInformationAvailableTxt:"releaseHighlights.noInformationAvailable",closeTxt:"common.close",dialogType:t.Release_Highlights,isInstallationScenario:this.isInstallScenario},this.mobileMode&&(_e.maxWidth="100vw"),this.matDialog.open($,_e),this.readReleaseHighlightsSkippedStatus(this.clientVersion).pipe((0,Se.zg)(Le=>Le?this.sharedStorage.writeBlock(xo,{}):(0,N.of)(null))).subscribe()}}updateReleaseHighlightsSkippedStatus(d,R){return this.sharedStorage.writeBlock(xo,{appVersion:d,isSkipped:R})}readReleaseHighlightsSkippedStatus(d){return this.sharedStorage.readBlock(xo).pipe((0,Se.zg)(R=>R?R.appVersion===d?(0,N.of)(R.isSkipped):(this.logger.info("Old version value present in shared storage. Clearing"),this.sharedStorage.writeBlock(xo,{}).pipe((0,Tt.h)(!1))):(0,N.of)(!1)))}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(_n.VK),o.LFG(f.ed),o.LFG(f.OL),o.LFG(y.uw),o.LFG(Pi.ZJ),o.LFG(Ii.OA),o.LFG(mo.s),o.LFG(ge.wU6),o.LFG(f.Ob))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var kr=e(83720),io=e(80031);const gr="fragment commonItemFields on Item {\n  id\n}",Br="fragment marqueeGameFields on GameItem {\n  app {\n    id\n    title\n    type\n    contentRatings {\n      categoryKey\n      contentDescriptorKeys\n      interactiveElementKeys\n      type\n    }\n    marqueeScrimPrimaryRGB {\n      r\n      g\n      b\n    }\n    images {\n      GAME_LOGO\n      MARQUEE_HERO_IMAGE\n    }\n    contentRatings {\n      type\n      categoryKey\n    }\n    variants {\n      appStore\n    }\n  }\n}",Vr="fragment fullGameFields on GameItem {\n  app {\n    appStore\n    contentRatings {\n      categoryKey\n      contentDescriptorKeys\n      interactiveElementKeys\n      type\n    }\n    developerName\n    displaysOwnRatingDuringGameplay\n    genres\n    id\n    images {\n      GAME_BOX_ART\n      HERO_IMAGE\n      KEY_ART\n      SCREENSHOTS\n      TV_BANNER\n    }\n    longDescription\n    maxLocalPlayers\n    maxOnlinePlayers\n    publisherName\n    sortName\n    supportedControls\n    title\n    computedValues {\n      earliestReleaseDate\n      earliestStreetDate\n    }\n    nvidiaTech {\n      ANSEL\n      FREESTYLE\n      HIGHLIGHTS\n    }\n    variants {\n      appStore\n      id\n      publisherName\n      developerName\n      displaysOwnRatingDuringGameplay\n      supportedControls\n      shortName\n      storeUrl\n      streetDate\n      gfn {\n        isInLibrary\n        releaseDate\n        status\n        features {\n          ...feature\n        }\n      }\n    }\n  }\n}",Bo="fragment marketingFields on MarketingItem {\n  title\n  image\n  body\n  action {\n    uri\n    label\n    infoText\n  }\n}",Hr="fragment filterFields on FilterItem {\n  id\n  title\n  image\n  filters\n}",Zr="fragment feature on GfnSubscriptionFeature {\n  __typename\n  ... on GfnSubscriptionFeatureValue {\n    key\n    value\n  }\n  ... on GfnSubscriptionFeatureValueList {\n    key\n    values\n  }\n}",Vo=(J,Oe,d,R,ce)=>{let _e;if(d&&(0,u.isArray)(Oe)){const Le=null==Oe?void 0:Oe.map(Re=>parseInt(Re,10));_e=JSON.stringify(Le)}else _e=d&&"string"==typeof Oe?parseInt(Oe,10):JSON.stringify(Oe);return`{\n    ${d?R?`apps(vpcId: "${ce}", language: "${J}", variantIds: ${_e}) `:`apps(language: "${J}", variantIds: ${_e}) `:`apps(vpcId: "${ce}", language: "${J}", appIds: ${_e}) `}{\n      items {\n        contentRatings {\n          categoryKey\n          contentDescriptorKeys\n          interactiveElementKeys\n          type\n        }\n        developerName\n        displaysOwnRatingDuringGameplay\n        id\n        images {\n          GAME_BOX_ART\n          HERO_IMAGE\n          SCREENSHOTS\n          TV_BANNER\n          KEY_ART\n        }\n        nvidiaTech {\n          ANSEL\n          FREESTYLE\n          HIGHLIGHTS\n        }\n        title\n        longDescription\n        maxLocalPlayers\n        maxOnlinePlayers\n        supportedControls\n        computedValues {\n          earliestStreetDate\n        }\n        variants {\n          streetDate\n          appStore\n          id\n          shortName\n          storeUrl\n          publisherName\n          developerName\n          ${!d||d&&R?"gfn {\n                features {\n                    ...feature\n                }\n              }":""}\n        }\n      }\n    }\n  }\n  ${!d||d&&R?"fragment feature on GfnSubscriptionFeature {\n      __typename\n      ... on GfnSubscriptionFeatureValue {\n        key\n        value\n      }\n      ... on GfnSubscriptionFeatureValueList {\n        key\n        values\n      }\n    }":""}`},hr=J=>`{\n  filterGroupDefinitions(language: "${J}"){\n    id\n    label\n    filters {\n      id\n      label\n      filters\n    }\n  }\n  genreDefinitions(language: "${J}"){\n    genre\n    label\n  }\n  appStoreDefinitions(language: "${J}"){\n    store\n    label\n    keywords\n    sortOrder\n    smallImageUrl\n    accountLinkingMetadata {\n      supportedVariantIds\n      connectValueProposition\n      isSupported\n      isRequired\n      label,\n      linkedInfo\n    }\n  }\n  ratingDefinitions(language: "${J}"){\n    ratingSystem\n    label\n    displayInterval\n    contentDescriptors{\n      key\n      label\n      sortOrder\n    }\n    interactiveElements {\n      key\n      label\n      sortOrder\n    }\n    ratings {\n      categoryKey\n      description\n      label\n      minimumAge\n      largeImageUrl\n      smallImageUrl\n    }\n  }\n}`;var yi=e(3773),Oi=e(33987);let Ho=(()=>{class J{constructor(d,R,ce,_e,Le,Re,Xe,mt,Gt,Qt,an,vn,Cn){this.lcarsSdk=ce,this.localeService=_e,this.idmService=Le,this.gridService=Re,this.systemInfoService=Xe,this.ecommerceService=mt,this.telemetryService=Gt,this.serviceWorkerService=Qt,this.distributedTracingUtilService=an,this.gfnSdkService=vn,this.config=Cn,this.lcarsPaginationEvent=new ge.ZIE({NumberOfCalls:0,Query:""}),this.layoutDataUpdated$=new oe.xQ,this.appsDataUpdated$=new oe.xQ,this.gameMetaDataMap=new Map,this.staticAppDataCurrentEtag=null,this.logger=d.getLogger("LcarsService"),this.fetchStaticDataInfoStream=R.createStream(()=>this.fetchStaticAppDataInfo()),this.AppMetadataStreams=new zn.eQ(kn=>this.fetchAppdata(kn)),this.initalize(),this.initServiceWorkerNotifications()}initalize(){this.getVpcIdLocaleOsPlatform().subscribe(()=>{},d=>{this.logger.error("Could not fetch vpcId",d)}),this.idmService.accountStatusChanged.subscribe(d=>{!1===this.isUserLoggedIn&&d.isAuthenticated&&(this.refreshAppMetaData=!0),this.isUserLoggedIn=d.isAuthenticated})}initServiceWorkerNotifications(){const d=Oi.No.staleWhileRevalidate.lcarsStatic.cacheName,R=Oi.No.staleWhileRevalidate.lcars.cacheName,ce=Oi.No.staleWhileRevalidate.apps.cacheName,_e=[R,d,ce];this.serviceWorkerService.swCacheUpdated.pipe((0,pt.h)(Le=>_e.includes(Le.name))).subscribe(Le=>{var Re,Xe,mt,Gt,Qt;switch(Le.name){case d:this.logger.info("Received updated data SW notification for static app data");const an=null===(Re=Le.data)||void 0===Re?void 0:Re.data;an&&this.fetchStaticDataInfoStream.setData(an,!0);break;case R:this.logger.info("Received updated data SW notification for panels");const vn=null===(Xe=Le.data)||void 0===Xe?void 0:Xe.data;this.processJSONStrings(vn.panels),vn&&this.layoutDataUpdated$.next(vn);break;case ce:this.logger.info("Received updated data SW notification for apps");const Cn=null===(Qt=null===(Gt=null===(mt=Le.data)||void 0===mt?void 0:mt.data)||void 0===Gt?void 0:Gt.apps)||void 0===Qt?void 0:Qt.items;Cn&&this.appsDataUpdated$.next(Cn)}})}get onAppsDataUpdated$(){return this.appsDataUpdated$.asObservable()}get onLayoutDataUpdated$(){return this.layoutDataUpdated$.asObservable()}getLocaleOsPlatform(){if(this.locale&&this.osPlatformName)return(0,N.of)([this.locale,this.osPlatformName]);{const d=this.localeService.localeChanged,R=this.systemInfoService.getOsInformation();return(0,be.aj)([d,R]).pipe((0,Se.zg)(([ce,_e])=>(this.locale=ce,this.osPlatformName=_e.Platform,(0,N.of)([this.locale,this.osPlatformName]))))}}getVpcIdLocaleOsPlatform(){if(this.vpcId&&this.locale&&this.osPlatformName)return(0,N.of)([this.vpcId,this.locale,this.osPlatformName]);{const d=this.gridService.vpcId$.pipe((0,kr.x)());return(0,be.aj)([d,this.getLocaleOsPlatform()]).pipe((0,Se.zg)(([R,ce])=>(this.vpcId=R,(0,N.of)([this.vpcId,...ce]))))}}getVpcIdLocaleOsPlatformEComStatusandToken(d=!1,R){const ce=this.idmService.getAuthToken(d,R),_e=this.ecommerceService.getUserMembership();return(0,be.aj)([ce,_e,this.getVpcIdLocaleOsPlatform()]).pipe((0,pt.h)(([Le,Re,Xe])=>Re.membershipStatus!==Gn.Tn.UnKnown),(0,Ge.q)(1),(0,Je.U)(([Le,Re,Xe])=>[Le||null,Re.eComFeatureEnabled,...Xe]))}fetchAppdata(d,R=!1){const ce=JSON.parse(d),_e=this.getAppDataOptions;if(!ce)return(0,q._)("Error while reading gameId");const Le=this.distributedTracingUtilService.startSpan(un.j1.ClientGetAppMetadata,_e.parentSpan),Re={authToken:null,vpcId:null,locale:null,osPlatformName:null},Xe=this.gfnSdkService.getAuthType().pipe((0,Je.U)(Gt=>Gt!==it.Gr.JWT));return(0,be.aj)([this.getVpcIdLocaleOsPlatformEComStatusandToken(R,Le),Xe]).pipe((0,St.b)(([[Gt,Qt,an,vn,Cn],kn])=>{Re.authToken=Gt,Re.vpcId=an,Re.locale=vn,Re.osPlatformName=Cn,(null==_e?void 0:_e.isCmsId)&&kn&&Gt&&Gt.token?_e.useVpcIdWithCmsId=!0:(null==_e?void 0:_e.isCmsId)&&(Re.authToken=null)})).pipe((0,Se.zg)(Gt=>{const Qt=(null==_e?void 0:_e.isCmsId)?Vo(Re.locale,ce,!0,null==_e?void 0:_e.useVpcIdWithCmsId,Re.vpcId):Vo(Re.locale,ce,!1,!0,Re.vpcId);return this.setSpanTags(Le,void 0,this.vpcId,this.locale,this.isUserLoggedIn),(0,be.aj)([this.getStaticAppData().pipe((0,Ge.q)(1),(0,xt.K)(()=>(0,N.of)(null))),this.lcarsSdk.fetchQueryData(Qt,io.O.AppMetadata,Le,Re.authToken)]).pipe((0,Se.zg)(([an,vn])=>(an||this.logger.info("Using default appstore info values for static app data"),vn.data.apps.items.forEach(Cn=>{yi.vA.sortVariants(Cn.variants),Cn.variants.forEach(kn=>{kn.appStoreInfo=yi.vA.getStoreInfoForAppstore(kn.appStore)})}),this.refreshAppMetaData=this.refreshAppMetaData?!this.isUserLoggedIn:this.refreshAppMetaData,(0,N.of)(vn.data.apps.items))),(0,St.b)(()=>this.endSpan(Le,!1)),(0,xt.K)(an=>this.idmService.handleAuthError(an,R,this.fetchAppdata.bind(this),ce)),(0,xt.K)(an=>(this.endSpan(Le,!0),(0,q._)(an))))}))}getAppdata(d,R={}){return this.getAppDataOptions=R,this.refreshAppMetaData?this.fetchAppdata(JSON.stringify(d)).pipe((0,St.b)(ce=>this.AppMetadataStreams.setData(JSON.stringify(d),ce))):this.AppMetadataStreams.get$(JSON.stringify(d))}getPanel(d,R,ce=!1){const _e=d.currentSpan?d.currentSpan:this.distributedTracingUtilService.startSpan(un.j1.ClientGetPanel,d.parentSpan);return this.getVpcIdLocaleOsPlatformEComStatusandToken(ce,_e).pipe((0,Se.zg)(([Le,Re,Xe,mt,Gt])=>{var Qt,an;const vn={fetchLightLayout:null===(Qt=this.config.featureEnablement)||void 0===Qt?void 0:Qt.fetchLightLayout,fetchScreenshots:null===(an=this.config.featureEnablement)||void 0===an?void 0:an.fetchScreenShotsInLayout,vpcId:Xe,locale:mt,panelName:R};this.logger.info(`Fetching fresh panel ${R} for trigger ${null==d?void 0:d.triggerName} with ${Xe}`),this.setSpanTags(_e,d.triggerName,Xe,mt,this.isUserLoggedIn),_e.setTag(un.NI.PanelType,R);const Cn=function(J){switch(J.panelName){case $n.wh.Marquee:return function(J){return`{\n    panels(vpcId: "${J.vpcId}", language: "${J.locale}", names:["${$n.wh.Marquee}"]) {\n      id\n      name\n      sections {\n        id\n        type\n        title\n        items {\n          __typename\n          ...commonItemFields\n          ...marketingFields\n          ...marqueeGameFields\n          }\n      }\n    }\n  }\n  ${gr}\n  ${Bo}\n  ${Br}\n  `}(J);case $n.wh.Library:case $n.wh.Main:return function(J){return`{\n    panels(vpcId: "${J.vpcId}", language: "${J.locale}", names:["${J.panelName}"]) {\n      id\n      name\n        sections {\n          id\n          telemetryName\n          type\n          title\n          seeMoreInfo {\n            filterTileId\n            title\n            image\n            filters\n            minTiles\n          }\n          items {\n            __typename\n            ...commonItemFields\n            ...marketingFields\n            ...filterFields${J.fetchLightLayout?"...minimalGameFields":"...fullGameFields"}\n          }\n        }\n      }\n    }\n    ${gr}\n    ${Bo}\n    ${Hr}\n    ${J.fetchLightLayout?function(J=!1){return`fragment minimalGameFields on GameItem {\n    app {\n      id\n      images {\n        TV_BANNER\n        GAME_BOX_ART\n        ${J?"SCREENSHOTS\n           HERO_IMAGE":""}}\n      title\n      variants {\n        id\n        appStore\n        storeUrl\n        gfn {\n          isInLibrary\n          status\n        }\n      }\n    }\n  }`}(J.fetchScreenshots):Vr}\n    ${J.fetchLightLayout?"":Zr}\n  `}(J)}}(vn);return this.lcarsSdk.fetchQueryData(Cn,$n.Of[R],_e,Le,d.bypassSwCache).pipe((0,Se.zg)(kn=>{var Zn;return this.processJSONStrings(null===(Zn=null==kn?void 0:kn.data)||void 0===Zn?void 0:Zn.panels),(0,N.of)(kn.data.panels)}),(0,St.b)(kn=>this.endSpan(_e,!1)))}),(0,xt.K)(Le=>this.idmService.handleAuthError(Le,ce,this.getPanel.bind(this),Object.assign({},d,{currentSpan:_e}))),(0,xt.K)(Le=>(this.endSpan(_e,!0),(0,q._)(Le))))}processJSONStrings(d){null==d||d.forEach(R=>{var ce;this.logger.info(`Found Panel ${null==R?void 0:R.name}`),null===(ce=null==R?void 0:R.sections)||void 0===ce||ce.forEach(_e=>{var Le,Re;this.logger.info(`Found section ${null==_e?void 0:_e.telemetryName}`),(null===(Le=null==_e?void 0:_e.seeMoreInfo)||void 0===Le?void 0:Le.filters)&&(_e.seeMoreInfo.filters=_e.seeMoreInfo.filters.map(Xe=>JSON.stringify(JSON.parse(Xe)))),null===(Re=null==_e?void 0:_e.items)||void 0===Re||Re.forEach(Xe=>{if(Xe.__typename===$n.YU.Filter){const mt=Xe;mt.filters=null==mt?void 0:mt.filters.map(Gt=>JSON.stringify(JSON.parse(Gt)))}})})})}getApps(d={},R=!1){const ce=d.currentSpan?d.currentSpan:this.distributedTracingUtilService.startSpan(un.j1.ClientGetAppsList,d.parentSpan);return this.setSpanTags(ce,d.triggerName,this.vpcId,this.locale,this.isUserLoggedIn),this.getVpcIdLocaleOsPlatformEComStatusandToken(R,ce).pipe((0,Se.zg)(([_e,Le,Re,Xe,mt])=>(this.gamesList=[],this.logger.info(`Getting apps using vpcId: ${Re}`),this.getAppsWithPaginationSupport(Re,Xe,mt,_e,Le,ce,null==d?void 0:d.bypassSwCache))),(0,St.b)(_e=>this.endSpan(ce,!1)),(0,xt.K)(_e=>this.idmService.handleAuthError(_e,R,this.getApps.bind(this),Object.assign({},d,{currentSpan:ce}))),(0,xt.K)(_e=>(this.endSpan(ce,!0),(0,q._)(_e))))}getAppsWithPaginationSupport(d,R,ce,_e,Le,Re,Xe,mt=0,Gt){const Qt=((J,Oe,d)=>`{\n  apps(vpcId: "${J}", language: "${Oe}",`+(d?`after:"${d}"`:"")+" ) {\n    numberReturned\n    pageInfo{\n      hasNextPage\n      endCursor\n    }\n    items {\n      appStore\n      contentRatings {\n        categoryKey\n        type\n      }\n      genres\n      id\n      images {\n        GAME_BOX_ART\n        HERO_IMAGE\n        KEY_ART\n        TV_BANNER\n      }\n      computedValues {\n        allKeywords\n      }\n      maxLocalPlayers\n      supportedControls\n      publisherName\n      sortName\n      title\n      variants {\n        appStore\n        id\n        publisherName\n        supportedControls\n        shortName\n        storeUrl\n        gfn {\n          isInLibrary\n          releaseDate\n          status\n          features {\n            ...feature\n          }\n        }\n      }\n    }\n  }\n}\n\nfragment feature on GfnSubscriptionFeature {\n  __typename\n  ... on GfnSubscriptionFeatureValue {\n    key\n    value\n  }\n  ... on GfnSubscriptionFeatureValueList {\n    key\n    values\n  }\n}")(d,R,Gt);return this.lcarsSdk.fetchQueryData(Qt,io.O.Apps,Re,_e,Xe).pipe((0,Se.zg)(an=>(this.gamesList.push.apply(this.gamesList,an.data.apps.items),mt+=1,an.data.apps.pageInfo.hasNextPage?this.getAppsWithPaginationSupport(d,R,ce,_e,Le,Re,Xe,mt,an.data.apps.pageInfo.endCursor):(mt>0&&(this.lcarsPaginationEvent.parameters.NumberOfCalls=mt,this.lcarsPaginationEvent.parameters.Query="GetApps",this.telemetryService.push(this.lcarsPaginationEvent)),(0,N.of)(this.gamesList)))))}fetchStaticAppDataInfo(){return this.getLocaleOsPlatform().pipe((0,Se.zg)(([d,R])=>{const ce=hr(d);return this.lcarsSdk.fetchStaticDataQuery(ce,io.O.StaticAppData).pipe((0,Je.U)(_e=>(this.staticAppDataCurrentEtag=_e.headers.get(Oi.Fk.ETag),_e.body.data)))}))}ensureLatestStaticAppData$(){return this.getLocaleOsPlatform().pipe((0,Ge.q)(1),(0,Se.zg)(([d,R])=>{const ce=hr(d);return this.lcarsSdk.fetchStaticDataQuery(ce,io.O.StaticAppData).pipe((0,Je.U)(_e=>{var Le,Re;const Xe=_e.headers.get(Oi.Fk.ETag);return!(!Xe||Xe===this.staticAppDataCurrentEtag||(this.logger.info("New StaticAppData recevived and updated"),yi.vA.setGenreDefinitions(null===(Le=_e.body.data)||void 0===Le?void 0:Le.genreDefinitions),yi.vA.setAppStoresDefinitions(null===(Re=_e.body.data)||void 0===Re?void 0:Re.appStoreDefinitions),this.fetchStaticDataInfoStream.setData(_e.body.data,!0),this.staticAppDataCurrentEtag=_e.headers.get(Oi.Fk.ETag),0))}),(0,xt.K)(_e=>(this.logger.error("Error while fetching static app data",_e),(0,N.of)(!1))))}))}getStaticAppData(){return this.fetchStaticDataInfoStream.get$().pipe((0,Je.U)(d=>(yi.vA.setGenreDefinitions(null==d?void 0:d.genreDefinitions),yi.vA.setAppStoresDefinitions(null==d?void 0:d.appStoreDefinitions),d)))}getFeaturesFilter(){return this.ecommerceService.getUserMembership().pipe((0,Ge.q)(1),(0,Je.U)(d=>{var R,ce,_e,Le,Re;const Xe=$n.YW,mt=(null===(_e=null===(ce=null===(R=d.subscription)||void 0===R?void 0:R.features)||void 0===ce?void 0:ce.features)||void 0===_e?void 0:_e.some(Gt=>Gt.key===qn.xA.HDR_ENABLED&&"true"===Gt.textValue))||(null===(Re=null===(Le=d.subscription)||void 0===Le?void 0:Le.upsellFeatures)||void 0===Re?void 0:Re.some(Gt=>Gt.key===qn.$c.SUPPORT_HDR&&!0===Gt.booleanValue));if(mt&&!Xe.filters.some(Gt=>Gt.id===$n.kI.id))Xe.filters.push($n.kI);else if(!mt){const Gt=Xe.filters.findIndex(Qt=>Qt.id===$n.kI.id);-1!==Gt&&Xe.filters.splice(Gt,1)}return Xe}))}getMyLibraryFilter(){return this.idmService.accountStatusChanged.pipe((0,Ge.q)(1),(0,Je.U)(d=>d.isAuthenticated?$n.oo:null))}getDeviceSupportFilter(){return(0,N.of)(this.config.featureEnablement.filterDeviceSupported?$n.YH:null)}getFilterGroupDefinitions(){return(0,be.aj)([this.getMyLibraryFilter(),this.getStaticAppData().pipe((0,Ge.q)(1),(0,xt.K)(()=>(0,N.of)($n.ws))),this.getFeaturesFilter(),this.getDeviceSupportFilter()]).pipe((0,Ge.q)(1),(0,Je.U)(([d,R,ce,_e])=>{var Le;const Re=[];d&&Re.push(d),_e&&Re.push(_e);const Xe=[];for(let mt=0;mt<R.filterGroupDefinitions.length;mt++){const Gt=Object.assign(Object.assign({},R.filterGroupDefinitions[mt]),{filters:[]});let Qt=!1;for(let an=0;an<R.filterGroupDefinitions[mt].filters.length;an++)(null===(Le=R.filterGroupDefinitions[mt].filters[an].label)||void 0===Le?void 0:Le.length)&&(Qt=!0,Gt.filters.push(R.filterGroupDefinitions[mt].filters[an]));Qt&&Xe.push(Gt)}return Re.push(...Xe),ce&&Re.push(ce),Re.forEach(mt=>{mt.filters.forEach(Gt=>{Gt.filterFields=[];for(let Qt=0;Qt<Gt.filters.length;Qt++){const an=JSON.parse(Gt.filters[Qt]);Gt.filterFields[Qt]=an,Gt.filters[Qt]=JSON.stringify(an)}})}),Re}))}setSpanTags(d,R,ce,_e,Le){const Re={};R&&(Re[un.NI.Trigger]=R),Re[un.NI.VpcId]=ce,Re[un.NI.Locale]=_e,Re[un.NI.LoginStatus]=Le,d.addTags(Re)}endSpan(d,R){d&&(d.setTag(un.NI.Error,R),this.distributedTracingUtilService.closeSpan(d))}setMetadataForCmsId(d,R){this.gameMetaDataMap.set(d.toString(),R)}getMetadataByCmsId(d){const R=d.toString();return this.gameMetaDataMap.has(R)?(0,N.of)(this.gameMetaDataMap.get(R)):this.getAppdata(R,{isCmsId:!0}).pipe((0,Je.U)(ce=>ce[0]))}isFeatureSupportedOnVariant(d,R){var ce,_e,Le;const Re=null===(ce=null==d?void 0:d.gfn)||void 0===ce?void 0:ce.features;return Re&&Array.isArray(Re)?Re.some(Xe=>"true"===Xe.value&&Xe.key===R):"true"===(null===(_e=Re)||void 0===_e?void 0:_e.value)&&(null===(Le=Re)||void 0===Le?void 0:Le.key)===R}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(zn.O_),o.LFG(io.m),o.LFG(f.OL),o.LFG(Kt.No),o.LFG(Xn.r),o.LFG(f.Ob),o.LFG(Gn.BH),o.LFG(a.y0),o.LFG(Oi.HR),o.LFG(un.Dc),o.LFG(it.s),o.LFG(_n.VK))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var ur=e(8117);const Zo="platform_preference",Wo="PlatformPreference";let Wr=(()=>{class J{constructor(d,R,ce,_e){this.sharedStorage=R,this.idmService=ce,this.refreshUiService=_e,this.isKVStoreInteractionActive$=new Ai.X(!1),this.gamesChangedWhileLoggedOut=new Map,this.gamesChangedWhileLoggedIn=new Set,this.logger=d.getLogger("PlatformPreferenceService"),this.idmService.accountStatusChanged.subscribe(Le=>this.gamesChangedWhileLoggedIn.clear())}getPlatformPreferences(){return this.isKVStoreInteractionActive$.pipe((0,pt.h)(d=>!d),(0,Ge.q)(1),(0,Se.zg)(d=>(this.isKVStoreInteractionActive$.next(!0),this.idmService.getClientData([Zo]))),(0,Se.zg)(d=>{var R;return this.refreshUiService.setContentExpiryInfo(xi.Gx.KVStorePlatformSelection),this.isKVStoreInteractionActive$.next(!1),this.logger.info("Response length of get all preferences ",null===(R=null==d?void 0:d.data)||void 0===R?void 0:R.length),(0,N.of)(d.data.length?d.data[0].value:[])}),(0,xt.K)(d=>(this.isKVStoreInteractionActive$.next(!1),this.logger.info("Error getting list of selected variants from the KV store",d),(0,q._)(d))))}getGameSpecificPlatformPreference(d){return this.idmService.accountStatusChanged.pipe((0,Ge.q)(1),(0,Se.zg)(R=>R.isAuthenticated?this.sharedStorage.readBlock(Wo+"/"+R.userId+"/"+d):(0,q._)("User is not authenticated")),(0,Se.zg)(R=>R.variantId?(0,N.of)(R.variantId):this.getGameSpecificPlatformPreferenceFromKVStore(d)))}getGameSpecificPlatformPreferenceFromKVStore(d){return this.getPlatformPreferences().pipe((0,Se.zg)(R=>{this.logger.info("Response length of get all preferences ",null==R?void 0:R.length);const ce=R.find(_e=>_e.includes(d));return ce?(0,N.of)(this.getCmsIdFromParentChildPair(ce)[d]):(0,q._)("ParentID not found in the KVStore")}),(0,xt.K)(R=>(this.logger.info("Error getting list of selected variants from the KV store",R),(0,q._)(R))))}updateGameSpecificPlatformPreference(d,R,ce,_e){const Le=[];return R.forEach(Re=>Le.push(this.getParentChildPair(d,Re))),this.isKVStoreInteractionActive$.pipe((0,pt.h)(Re=>!Re),(0,Ge.q)(1),(0,Se.zg)(Re=>(this.isKVStoreInteractionActive$.next(!0),this.idmService.deleteClientData(Zo,Le))),(0,Se.zg)(Re=>{if(this.logger.info("All relevant preferences deleted ",Re),ce&&_e){const Xe=this.getParentChildPair(d,_e);return this.idmService.appendClientData(Zo,[Xe])}return(0,N.of)(Re)}),(0,Se.zg)(Re=>(this.isKVStoreInteractionActive$.next(!1),(0,N.of)(Re))),(0,xt.K)(Re=>(this.isKVStoreInteractionActive$.next(!1),this.logger.info("Error updating preference to the Keyvalue store ",Re),(0,q._)(Re))))}processGamesPostLogin(){this.gamesChangedWhileLoggedOut.forEach((d,R)=>{this.addGamePlatformPreference(R,d.selectedVariantId,d.variantIds).subscribe(qi.Z,qi.Z)}),this.gamesChangedWhileLoggedOut.clear()}hasLocalOrLoggedOutPreference(d){return this.gamesChangedWhileLoggedIn.has(d)?(this.logger.info("Game prefernce was changed by loggedIn user. Not using older preferences. ",d),!0):!!this.gamesChangedWhileLoggedOut.has(d)&&(this.logger.info("Game preference was changed in logged out state. Not overriding it. ",d),!0)}addGamePlatformPreference(d,R,ce){return this.idmService.accountStatusChanged.pipe((0,Ge.q)(1),(0,Se.zg)(_e=>_e.isAuthenticated?(this.gamesChangedWhileLoggedIn.add(d),(0,N.of)(_e.userId)):(this.gamesChangedWhileLoggedOut.set(d,{selectedVariantId:R,variantIds:ce}),ur.E)),(0,Se.zg)(_e=>{if(_e){const Le=Wo+"/"+_e+"/"+d;return(0,yn.$R)(this.updateGameSpecificPlatformPreference(d,ce,!0,R),this.sharedStorage.writeBlock(Le,{variantId:R}))}}),(0,xt.K)(_e=>(this.logger.info("Error saving the game variant preference",_e),(0,q._)(_e))))}removeGamePlatformPreference(d,R){return this.idmService.accountStatusChanged.pipe((0,Ge.q)(1),(0,Se.zg)(ce=>ce.isAuthenticated?(0,N.of)(ce.userId):(0,q._)("Received Empty UserId")),(0,Se.zg)(ce=>{const _e=Wo+"/"+ce+"/"+d;return(0,yn.$R)(this.updateGameSpecificPlatformPreference(d,R,!1),this.sharedStorage.removeBlock(_e))}),(0,xt.K)(ce=>(this.logger.info("Error removing the game variant preference",ce),(0,q._)(ce))))}getParentChildPair(d,R){const ce={};return ce[d]=R,JSON.stringify(ce)}getCmsIdFromParentChildPair(d){return JSON.parse(d)}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(Ii.OA),o.LFG(Kt.No),o.LFG(xi.eP))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var $n=e(97987),Vn=(()=>{return(J=Vn||(Vn={})).Id="id",J.AppStore="appStore",J.Genres="genres",J.Keywords="keywords",J.DeveloperName="developerName",J.DisplaysOwnRatingDuringGameplay="displaysOwnRatingDuringGameplay",J.MaxLocalPlayers="maxLocalPlayers",J.MaxOnlinePlayers="maxOnlinePlayers",J.NumberOfFakeControllers="numberOfFakeControllers",J.OsType="osType",J.PublisherName="publisherName",J.ShortName="shortName",J.SortName="sortName",J.SupportedControls="supportedControls",J.SupportedGamePlayModes="supportedGamePlayModes",J.Type="type",J.Variants="variants",J.Gfn="gfn",J.ReleaseDate="releaseDate",J.MarketingDate="marketingDate",J.Features="features",J.IsInLibrary="isInLibrary",J.Key="key",J.RTXEnabled="RTX_ENABLED",J.HDREnabled="HDR_ENABLED",J.InGameSettingsPersistenceEnabled="IN_GAME_SETTINGS_PERSISTENCE_ENABLED",J.OverrideTouchEnabled="OVERRIDE_TOUCH_ENABLED",Vn;var J})(),Nn=(()=>{return(J=Nn||(Nn={}))[J.String=0]="String",J[J.StringList=1]="StringList",J[J.Number=2]="Number",J[J.Boolean=3]="Boolean",J[J.Variant=4]="Variant",J[J.Date=5]="Date",J[J.GfnMetaData=6]="GfnMetaData",J[J.Features=7]="Features",Nn;var J})();const zr={[Vn.Id]:Nn.String,[Vn.AppStore]:Nn.String,[Vn.Genres]:Nn.StringList,[Vn.Keywords]:Nn.StringList,[Vn.DeveloperName]:Nn.String,[Vn.DisplaysOwnRatingDuringGameplay]:Nn.Boolean,[Vn.MaxLocalPlayers]:Nn.Number,[Vn.MaxOnlinePlayers]:Nn.Number,[Vn.NumberOfFakeControllers]:Nn.Number,[Vn.OsType]:Nn.String,[Vn.PublisherName]:Nn.String,[Vn.ShortName]:Nn.String,[Vn.SortName]:Nn.String,[Vn.SupportedControls]:Nn.StringList,[Vn.SupportedGamePlayModes]:Nn.StringList,[Vn.Type]:Nn.String,[Vn.Variants]:Nn.Variant,[Vn.ReleaseDate]:Nn.Date,[Vn.MarketingDate]:Nn.Date,[Vn.Gfn]:Nn.GfnMetaData,[Vn.Features]:Nn.Features,[Vn.IsInLibrary]:Nn.Boolean,[Vn.RTXEnabled]:Nn.Boolean,[Vn.HDREnabled]:Nn.Boolean};function oo(J,Oe,d){const R=zr[J];if(void 0===R)return!1;const ce=Jr[R];return void 0!==ce&&ce(Oe,d)}const Jr={[Nn.Number]:function(J,Oe){return Oe.equals?J===Oe.equals:Oe.ge?J>=Oe.ge:Oe.gt?J>Oe.gt:Oe.le?J<=Oe.le:Oe.lt?J<Oe.lt:Oe.notEquals?J!==Oe.notEquals:Oe.in?Oe.in.includes(J):!!Oe.notIn&&!Oe.notIn.includes(J)},[Nn.String]:function(J,Oe){return Oe.equals?J===Oe.equals:Oe.has?-1!==J.indexOf(Oe.has):Oe.in?Oe.in.includes(J):Oe.notEquals?Oe.notEquals!==J:!!Oe.notIn&&!Oe.notIn.includes(J)},[Nn.StringList]:function(J,Oe){return Oe.has?null==J?void 0:J.includes(Oe.has):Oe.hasOtherThan?null==J?void 0:J.some(d=>!Oe.hasOtherThan.includes(d)):void 0},[Nn.Boolean]:function(J,Oe){return Oe.equals?J===Oe.equals:!!Oe.notEquals&&J!==Oe.notEquals},[Nn.Date]:function(J,Oe){return!0},[Nn.Variant]:function(J,Oe){return J.some(d=>{let R=!0;for(const ce in Oe)if(Oe[ce]&&(R=oo(ce,d[ce],Oe[ce]),!R))break;return R})},[Nn.GfnMetaData]:function(J,Oe){let d=!0;for(const R in Oe)if(Oe[R]&&(d=oo(R,J[R],Oe[R]),!d))break;return d},[Nn.Features]:function(J,Oe){let d=!0;for(const R in Oe)if(Oe[R]&&(d=null==J?void 0:J.some(ce=>ce.key===R&&oo(R,JSON.parse(ce.value),Oe[R])),!d))break;return d}};function jr(J,Oe){let d=!0;for(const R in J)if(J[R]&&(d=oo(R,Oe[R],J[R]),!d))break;return d}function Yn(J,Oe){let d=!0;for(let R=0;R<J.length&&(d=jr(J[R],Oe),d);R++);return d}let gi=(()=>{class J{constructor(d,R,ce){this.loggingService=d,this.lcarsService=R,this.logger=this.loggingService.getLogger("gfn/content-rating"),this.fetchRatingInfoStream=ce.createStream(_e=>this.fetchRatingInfo(_e))}getCurrentRating(d,R){return this.fetchRatingInfoStream.get$(d).pipe((0,Se.zg)(ce=>{if((0,u.isNil)(ce)||(0,u.isNil)(ce.ratings))return(0,q._)(`ratingInfo is ${JSON.stringify(ce)}`);const _e=ce.ratings.find(Re=>Re.categoryKey===R);return(0,u.isNil)(_e)?(this.logger.info("no rating found for this rating category:",R),(0,N.of)(null)):(0,N.of)({rating:_e,ratingSystem:ce.label,displayInterval:ce.displayInterval})}))}getContentDescriptors(d,R){return this.fetchRatingInfoStream.get$(d).pipe((0,Se.zg)(ce=>{if((0,u.isNil)(ce)||(0,u.isEmpty)(ce))return(0,q._)(`ratingInfo is ${JSON.stringify(ce)}`);if((0,u.isNil)(ce.contentDescriptors))return this.logger.info("no content descriptors field"),(0,N.of)([]);let _e=ce.contentDescriptors.filter(Re=>(0,u.includes)(R,Re.key));_e=(0,u.sortBy)(_e,["sortOrder"]);const Le=_e.map(Re=>Re.label);return(0,N.of)(Le)}))}getInteractiveElements(d,R){return this.fetchRatingInfoStream.get$(d).pipe((0,Se.zg)(ce=>{if((0,u.isNil)(ce)||(0,u.isEmpty)(ce))return(0,q._)(`ratingInfo is ${JSON.stringify(ce)}`);if((0,u.isNil)(ce.interactiveElements))return this.logger.info("no interactive elements field"),(0,N.of)([]);let _e=ce.interactiveElements.filter(Re=>(0,u.includes)(R,Re.key));_e=(0,u.sortBy)(_e,["sortOrder"]);const Le=_e.map(Re=>Re.label);return(0,N.of)(Le)}))}fetchRatingInfo(d,R){return this.lcarsService.getStaticAppData().pipe((0,Je.U)(ce=>(null==ce?void 0:ce.ratingDefinitions).find(Le=>Le.ratingSystem===d)))}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(Ho),o.LFG(zn.YV))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})(),Ca=(()=>{class J{}return J.\u0275fac=function(d){return new(d||J)},J.\u0275mod=o.oAB({type:J}),J.\u0275inj=o.cJS({imports:[[n.ez,i.o9,f.it]]}),J})();var Sa=e(34761),Pa=e(81573),Xr=e(28416),Oa=e(130),fs=e(90425),vs=e(92597),Ma=e(85820);const ya=["nvThreeQuarterSheet"];function ba(J,Oe){if(1&J&&(o.TgZ(0,"div",2),o._UZ(1,"nv-hig-three-quarter-sheet",3,4),o.qZA()),2&J){const d=o.oxw();o.xp6(1),o.Q6J("data",d.dialogData)}}function xa(J,Oe){1&J&&(o.TgZ(0,"div",13),o._UZ(1,"img",14),o.qZA())}function Ea(J,Oe){1&J&&(o.TgZ(0,"span",15),o._uU(1,"error"),o.qZA())}function Ia(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"button",16),o.NdJ("click",function(){return o.CHM(d),o.oxw(2).onCancel()}),o.TgZ(1,"span",17),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.qZA()}if(2&J){const d=o.oxw(2);o.xp6(2),o.Oqu(o.lcZ(3,1,d.cancelButtonText))}}function Ta(J,Oe){if(1&J){const d=o.EpF();o.TgZ(0,"button",18),o.NdJ("click",function(){return o.CHM(d),o.oxw(2).onTryLogin()}),o.TgZ(1,"span",17),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.qZA()}if(2&J){const d=o.oxw(2);o.xp6(2),o.Oqu(o.lcZ(3,1,d.tryLoginText))}}function Aa(J,Oe){if(1&J&&(o.TgZ(0,"div",5),o.YNc(1,xa,2,0,"div",6),o.YNc(2,Ea,2,0,"span",7),o.TgZ(3,"div",8),o.TgZ(4,"span"),o._uU(5),o.ALo(6,"translate"),o.qZA(),o.qZA(),o.TgZ(7,"span",9),o._uU(8),o.ALo(9,"translate"),o.qZA(),o.TgZ(10,"div",10),o.YNc(11,Ia,4,3,"button",11),o.YNc(12,Ta,4,3,"button",12),o.qZA(),o.qZA()),2&J){const d=o.oxw();o.Q6J("ngClass",d.isStreamer?"main-content-streamer":"main-content-mall"),o.xp6(1),o.Q6J("ngIf",!d.showErrorIcon&&d.isStreamer),o.xp6(1),o.Q6J("ngIf",d.showErrorIcon&&d.isStreamer),o.xp6(1),o.Q6J("ngClass",d.showErrorIcon&&d.isStreamer?"content-header-error font-sub1":"content-header font-header6"),o.xp6(2),o.Oqu(o.lcZ(6,8,d.headerText)),o.xp6(3),o.Oqu(o.lcZ(9,10,d.bodyText)),o.xp6(3),o.Q6J("ngIf",d.showCancel),o.xp6(1),o.Q6J("ngIf",d.showTryLogin)}}let _s=(()=>{class J{constructor(d,R,ce,_e,Le,Re,Xe,mt,Gt,Qt,an,vn,Cn,kn){var Zn;this.dialogRef=ce,this.starfleetService=_e,this.localeService=Le,this.router=Re,this.telemetryService=Xe,this.config=mt,this.telemetryUtilService=Gt,this.dialogData=Qt,this.gfnSdkService=an,this.systemInfoService=vn,this.idmService=Cn,this.idmLoginService=kn,this.headerText="",this.bodyText="",this.cancelButtonText="",this.tryLoginText="",this.showCancel=!1,this.showTryLogin=!1,this.isStreamer=!1,this.shouldShowLoginButton=!1,this.showErrorIcon=!1,this.isDeviceAuthLogin=!1,this.deviceAuthUri="",this.deviceAuthCode="",this.deviceAuthUriComplete="",this.browserPopup=void 0,this.needsWindowWorkaround=!1,this.isGaaS=!1,this.logger=d.getLogger("loginBridgeState"),this.needsWindowWorkaround=!!(null===(Zn=null==R?void 0:R.featureEnablement)||void 0===Zn?void 0:Zn.mobileMode),this.destroy$=new oe.xQ}initialize(){this.shouldShowLoginButton?(this.headerText="loginBridgeState.login",this.bodyText="loginBridgeState.loginToGeForceNow",this.tryLoginText="common.login",this.showCancel=!1,this.showTryLogin=!0):this.onTryLogin()}getDeviceName$(){return this.config.useDeviceAuthLogin?this.systemInfoService.getStaticSystemInfo().pipe((0,Ge.q)(1),(0,Je.U)(d=>{const R=(0,wn.Q2)(d.OSName),ce=(0,wn._6)(d.DeviceType),_e=d.SystemName;if(!R||!ce)return void this.logger.info("OsName or DeviceType not found: ",R,ce);const Le=`${R} ${ce}`;return this.logger.info("DeviceName created: ",Le),_e?`${Le} ${_e}`:Le}),(0,xt.K)(d=>(this.logger.error("Error creating deviceName: ",d),(0,N.of)(void 0)))):(0,N.of)(void 0)}startLoginProcess(){this.logger.trace(zn.y$.UserGesture,zn.Px.Login,zn.Rf.open," login operation"),this.getDeviceName$().pipe((0,Ge.q)(1),(0,Se.zg)(d=>this.starfleetService.login(!1,this.dialogData.idpId,this.browserPopup,d)),(0,xe.R)(this.destroy$)).subscribe(d=>{switch(this.logger.info("starfleet login state update",d),d){case Nt.fH.LoginAbortedByUser:this.dialogRef.close(Nt.L$.Cancel);break;case Nt.fH.LoginAbortedAlreadyLoggedIn:this.dialogRef.close(Nt.L$.Success);break;case Nt.fH.LoginCompleted:this.idmLoginService.sendLoginSuccessUserSessionEvent(),this.dialogRef.close(Nt.L$.Success);break;case Nt.fH.LoginFailed:this.onLoginFailed();break;case Nt.fH.LoginFailedNoRetry:this.onLoginFailed(!1);break;case Nt.fH.LoginFailedToStart:this.onLoginFailed(!1,!1);break;case Nt.fH.LoginInProgressNeedDisplayCode:this.onNeedDisplayCode()}},d=>{this.logger.error("failed to login the user with error",d),this.needsWindowWorkaround&&d===Nt.fH.LoginAlreadyInProgress&&(this.starfleetService.cancel(),setTimeout(()=>{this.startLoginProcess()}))})}ngOnInit(){this.isStreamer=(0,ve.MA)(this.router.url),(0,be.aj)([this.gfnSdkService.getAuthType(),this.localeService.localeChanged]).pipe((0,Se.zg)(([d])=>(this.isStreamer&&d!==it.Gr.IDM_FALLBACK&&d!==it.Gr.JWT?this.shouldShowLoginButton=!0:this.isStreamer&&(this.isGaaS=!0),this.localeService.localeChanged)),(0,Ge.q)(1)).subscribe(qi.Z,d=>this.logger.error("error in in locale changed"),()=>this.initialize())}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}onLoginFailed(d=!0,R=!0){R?(this.headerText="common.loginUnsuccessful",this.bodyText=d?"loginBridgeState.problemLogInRetry":"loginBridgeState.problemLogIn"):(this.headerText="loginBridgeState.unableToInitiateLogin",this.bodyText="loginBridgeState.poroblemTryingToLogin"),this.showCancel=!0,this.cancelButtonText="common.close",this.showTryLogin=d,this.showErrorIcon=!0,this.tryLoginText="common.retry",this.isDeviceAuthLogin=!1,!1===R?this.sendCreateHTTPServerErrorEvent():this.idmLoginService.sendLoginFailureUserSessionEvent()}sendCreateHTTPServerErrorEvent(){this.logger.info("Sending create HTTP server error event");const d=new ge.cym({portsUsed:this.config.portNumbers?this.config.portNumbers.toString():"",errorMessage:Nt.C4.HTTP_START_FAILED});this.telemetryService.push(d)}onCancel(){this.logger.trace(zn.y$.UserGesture,zn.Px.Login,zn.Rf.close," Login operation by clicking on cancel button"),this.dialogRef.close(Nt.L$.Cancel)}onTryLogin(){this.needsWindowWorkaround?(this.browserPopup=window.open("","_blank"),this.headerText="loginBridgeState.login",this.bodyText="loginBridgeState.completeTheLogin",this.tryLoginText="common.login",this.showTryLogin=!0):(this.headerText="loginBridgeState.loginInProgress",this.bodyText="loginBridgeState.browserIsOpen",this.tryLoginText="common.retry",this.showTryLogin=!1),this.cancelButtonText="common.cancelTitleCase",this.showCancel=!0,this.isDeviceAuthLogin=!1,this.startLoginProcess()}onNeedDisplayCode(){this.isDeviceAuthLogin=!0,this.deviceAuthUri=this.starfleetService.getDeviceDisplayCode().url,this.deviceAuthUriComplete=this.starfleetService.getDeviceDisplayCode().url_complete;const d=this.starfleetService.getDeviceDisplayCode().user_code;if(d&&(this.deviceAuthCode=(0,wn.yY)(d),this.cancelButtonText="common.cancelTitleCase",this.showCancel=!0),!this.deviceAuthUri||!this.deviceAuthUriComplete||!d)throw new Error(`Failed to launch login bridge dialog. deviceAuthUri: ${this.deviceAuthUri}, deviceAuthUriComplete: ${this.deviceAuthUriComplete}, rawCode: ${d}`);setTimeout(()=>this.setupThreeQuarterSheet())}setupThreeQuarterSheet(){this.nvThreeQuarterSheet&&(this.nvThreeQuarterSheet.data=Object.assign(Object.assign({},this.dialogData),{headerText:{text:(0,wn.j7)(this.deviceAuthUri)},primaryButton:{text:"common.cancelTitleCase"},bodyText:{text:"loginBridgeState.deviceAuthLogin",placeholders:{authCode:`<div class="font-header3 white">${this.deviceAuthCode}</div>`}},footerText:{text:"loginBridgeState.deviceAuthHint"},image:{url:this.deviceAuthUriComplete}}),this.nvThreeQuarterSheet.primaryButtonClick.pipe((0,Ge.q)(1),(0,xe.R)(this.destroy$)).subscribe(()=>{this.onCancel()}))}}return J.\u0275fac=function(d){return new(d||J)(o.Y36(f.ed),o.Y36(_n.VK),o.Y36(y.so),o.Y36(Nt.DO),o.Y36(f.OL),o.Y36(si.F0),o.Y36(a.y0),o.Y36(Nt.TR),o.Y36(ge.wU6),o.Y36(y.WI),o.Y36(it.s),o.Y36(f.Ob),o.Y36(Kt.No),o.Y36(ys))},J.\u0275cmp=o.Xpm({type:J,selectors:[["gfn-login-bridge-state"]],viewQuery:function(d,R){if(1&d&&o.Gf(ya,5),2&d){let ce;o.iGM(ce=o.CRH())&&(R.nvThreeQuarterSheet=ce.first)}},decls:2,vars:2,consts:[["nvSpatialNavigationContainer","",4,"ngIf"],["fxFlex","","fxLayout","column","nvTrapFocus","",3,"ngClass",4,"ngIf"],["nvSpatialNavigationContainer",""],[3,"data"],["nvThreeQuarterSheet",""],["fxFlex","","fxLayout","column","nvTrapFocus","",3,"ngClass"],["class","header-logo",4,"ngIf"],["class","error-icon material-icons",4,"ngIf"],[3,"ngClass"],[1,"font-body2","content-body"],["fxFlex","","fxLayout","row","fxLayoutAlign","end end",1,"content-button"],["mat-button","","class","font-button2 text-button-icon",3,"click",4,"ngIf"],["color","accent","class","retry-button","mat-raised-button","",3,"click",4,"ngIf"],[1,"header-logo"],["src","shared/assets/img/GFN_logo.svg"],[1,"error-icon","material-icons"],["mat-button","",1,"font-button2","text-button-icon",3,"click"],[1,"font-button2"],["color","accent","mat-raised-button","",1,"retry-button",3,"click"]],template:function(d,R){1&d&&(o.YNc(0,ba,3,1,"div",0),o.YNc(1,Aa,13,12,"div",1)),2&d&&(o.Q6J("ngIf",R.isDeviceAuthLogin),o.xp6(1),o.Q6J("ngIf",!R.isDeviceAuthLogin))},directives:[n.O5,Dt.N,Ma.O,G.yH,G.xw,I.e,x.oO,n.mk,G.Wh,P.lW],pipes:[m.X$],styles:[".bg-dark-eh{background-color:#000}.bg-dark-eh-hue-1{background-color:#020202}.bg-dark-eh-hue-2{background-color:#010102}.bg-dark-vh{background-color:#0f0f0f}.bg-dark-vh20{background-color:#141414}.bg-dark-vh23{background-color:#171717}.bg-dark-vh-hue-1{background-color:#191919}.bg-dark-vh-hue-2{background-color:#111}.bg-dark-vh-hue-4{background-color:#181818}.bg-dark-hv{background-color:#1c1c1c}.bg-dark-hv-hue-1{background-color:#1c1c1cbf}.bg-dark-hv-hue-2{background-color:#1c1c1c80}.bg-dark-hv-hue-3{background-color:#1e1e1ee6}.bg-dark-im{background-color:#272727}.bg-dark-im-hue-1{background-color:#272727bf}.bg-dark-im-hue-2{background-color:#27272780}.bg-dark-im-hue-3{background-color:#25252573}.bg-dark-im-hue-4{background-color:#363636}.bg-dark-im-hue-5{background-color:#252525e6}.bg-dark-im-hue-6{background-color:#282828}.bg-dark-im-hue-7{background-color:#37393b}.bg-grey-im{background-color:#464646}.bg-grey-im-hue-1{background-color:#46464699}.bg-grey-im-hue-2{background-color:#46464666}.bg-grey-im-hue-3{background-color:#46464640}.bg-grey-im-hue-4{background-color:#46464673}.bg-grey-im-hue-5{background-color:#46464633}.bg-grey-im-hue-6{background-color:#4646461a}.bg-grey-lt{background-color:gray}.bg-grey-lt-hue-1{background-color:#9595951a}.bg-grey-md-im{background-color:#373737}.bg-white-in-hue-1{background-color:#ffffff73}.bg-white-in-hue-2{background-color:#ffffff40}.bg-green-hv{background-color:#76b900}.bg-green-hv-hue-1{background-color:#76b90026}.bg-black-hv{background-color:#111}.bg-black-hv-hue-1{background-color:#111c}.bg-black-hv-hue-2{background-color:#11111180}.bg-dark-bluish-gray{background-color:#46505a}.color-lighter-gray{color:#ccc}.color-light-gray{color:#9f9f9f}.color-medium-gray{color:#797979}.color-dim-gray{color:#6d6d6d}.color-medium-gray-hue-1{color:#7d7d7d}.color-medium-gray-hue-2{color:#777}.color-dark-gray{color:#595959}.color-darkest-gray{color:#393939}.color-bluish-green{color:#008471}.color-white-important{color:#fff}.color-white{color:#fff}.color-white-hue-1{color:#ffffffe6}.color-white-hue-2{color:#fffc}.color-white-hue-3{color:#ffffffbf}.color-white-hue-4{color:#ffffff73}.color-white-hue-5{color:#ffffff4d}.color-white-hue-6{color:#fff9}.color-white-hue-7{color:#ffffff40}.color-white-hue-8{color:#ffffff26}.color-black-hue-1{color:#111}.color-light-black{color:#1e1e1e}.color-green{color:#76b900}.color-inherit{color:inherit}.color-red-hue-1{color:#b5291c}.login-bridge-state-dialog .mat-dialog-container{border-radius:0}.login-bridge-state-dialog .main-content-streamer{width:470px;height:618px;background-color:#1f2224}.login-bridge-state-dialog .main-content-streamer .header-logo{margin:100px auto auto}.login-bridge-state-dialog .main-content-streamer .header-logo img{animation:fade normal 4s infinite ease-in-out;display:block;width:219px;height:42px}@keyframes fade{0%{opacity:.7}50%{opacity:.3}to{opacity:.7}}.login-bridge-state-dialog .main-content-streamer .content-header{margin:138px 0 0!important;text-align:center}.login-bridge-state-dialog .main-content-streamer .content-header-error{margin:33px 0 0!important;text-align:center}.login-bridge-state-dialog .main-content-streamer .error-icon{font-size:50px;margin:189px 0 0!important;opacity:.7;text-align:center}.login-bridge-state-dialog .main-content-streamer .content-body{margin:10px 24px 0!important;text-align:center}:host-context(.isLtr) .login-bridge-state-dialog .main-content-streamer .content-button{margin:0 8px 8px 0}html[dir=ltr] .login-bridge-state-dialog .main-content-streamer .content-button{--dummy: 0;margin:0 8px 8px 0}:host-context(.isRtl) .login-bridge-state-dialog .main-content-streamer .content-button{margin:0 0 8px 8px}html[dir=rtl] .login-bridge-state-dialog .main-content-streamer .content-button{--dummy: 0;margin:0 0 8px 8px}:host-context(.isLtr) .login-bridge-state-dialog .main-content-streamer .retry-button{margin:0 0 0 8px}html[dir=ltr] .login-bridge-state-dialog .main-content-streamer .retry-button{--dummy: 0;margin:0 0 0 8px}:host-context(.isRtl) .login-bridge-state-dialog .main-content-streamer .retry-button{margin:0 8px 0 0}html[dir=rtl] .login-bridge-state-dialog .main-content-streamer .retry-button{--dummy: 0;margin:0 8px 0 0}.login-bridge-state-dialog .main-content-mall{width:560px;height:166px;background-color:#393939}:host-context(.isLtr) .login-bridge-state-dialog .main-content-mall .content-header{margin:19px 24px 14px!important}html[dir=ltr] .login-bridge-state-dialog .main-content-mall .content-header{--dummy: 0;margin:19px 24px 14px!important}:host-context(.isRtl) .login-bridge-state-dialog .main-content-mall .content-header{margin:19px 24px 14px!important}html[dir=rtl] .login-bridge-state-dialog .main-content-mall .content-header{--dummy: 0;margin:19px 24px 14px!important}.login-bridge-state-dialog .main-content-mall .content-body{height:52px}:host-context(.isLtr) .login-bridge-state-dialog .main-content-mall .content-body{margin:0 24px!important}html[dir=ltr] .login-bridge-state-dialog .main-content-mall .content-body{--dummy: 0;margin:0 24px!important}:host-context(.isRtl) .login-bridge-state-dialog .main-content-mall .content-body{margin:0 24px!important}html[dir=rtl] .login-bridge-state-dialog .main-content-mall .content-body{--dummy: 0;margin:0 24px!important}:host-context(.isLtr) .login-bridge-state-dialog .main-content-mall .content-button{margin:0 8px 8px 0}html[dir=ltr] .login-bridge-state-dialog .main-content-mall .content-button{--dummy: 0;margin:0 8px 8px 0}:host-context(.isRtl) .login-bridge-state-dialog .main-content-mall .content-button{margin:0 0 8px 8px}html[dir=rtl] .login-bridge-state-dialog .main-content-mall .content-button{--dummy: 0;margin:0 0 8px 8px}:host-context(.isLtr) .login-bridge-state-dialog .main-content-mall .retry-button{margin:0 0 0 8px}html[dir=ltr] .login-bridge-state-dialog .main-content-mall .retry-button{--dummy: 0;margin:0 0 0 8px}:host-context(.isRtl) .login-bridge-state-dialog .main-content-mall .retry-button{margin:0 8px 0 0}html[dir=rtl] .login-bridge-state-dialog .main-content-mall .retry-button{--dummy: 0;margin:0 8px 0 0}.login-bridge-state-dialog .green{color:#76b900}.login-bridge-state-dialog .white{color:#fff}\n"],encapsulation:2}),J})();var Eo=e(21532),qr=e(45765),La=e(22547);let ys=(()=>{class J{constructor(d,R,ce,_e,Le,Re,Xe,mt,Gt,Qt,an,vn,Cn,kn,Zn,pi,So){var wi;this.idmService=R,this.networkStatusService=ce,this.nesUserInfoService=_e,this.telemetryUtilService=Le,this.dialog=Re,this.configuration=Xe,this.telemetryService=mt,this.starfleetService=Gt,this.ecommerceService=Qt,this.gfnSdkService=an,this.router=vn,this.unsupportedBrowserService=Cn,this.dialogService=kn,this.genericDialog=Zn,this.pathService=pi,this.starfleetTelemetry=So,this.cancelTimeoutExpired=!1,this.cancelTimer=null,this.loginListener=null,this.joinNowSubscription=null,this.logger=d.getLogger("gfn/shared/idm/idmLoginService"),this.tvMode=!!(null===(wi=null==Xe?void 0:Xe.featureEnablement)||void 0===wi?void 0:wi.tvMode)}initialize(){this.configuration.starfleet.sameTabLogin&&(this.starfleetTelemetry.checkAndSendLoginStartEvent(),this.starfleetService.getAuthStatus().pipe((0,Ge.q)(1),(0,Se.zg)(d=>(this.logger.info("Received authStatus ",d),d.authReturnState===Nt.fH.LoginCompleted||d.authReturnState===Nt.fH.LoginFailed?null===d.error?this.sendLoginSuccessUserSessionEvent():(this.displayLoginErrorMessages(d.error),this.sendLoginFailureUserSessionEvent()):d.authReturnState===Nt.fH.LogoutCompleted&&null!==d.error&&this.displayLogoutErrorMessages(d),(0,N.of)(!0)))).subscribe())}login(d,R=!1){return(0,be.aj)([this.unsupportedBrowserService.unsupportedBrowserState$,this.unsupportedBrowserService.shouldDisplayPWAGuidance$]).pipe((0,Ge.q)(1),(0,Se.zg)(([_e,Le])=>f.ng.isCefPlatform()||_e===Eo.h6.None?(0,N.of)(!0):_e===Eo.h6.PWARequired&&Le?(this.pathService.navigate([ve.fF.PwaWall],{skipLocationChange:!1}),(0,N.of)(!1)):this.dialogService.openUnsupportedSystemSoftBlockerDialog(_e).pipe((0,Je.U)(Re=>(Re===ri.e_.Cancel&&this.logger.info("User cancelled the login"),Re===ri.e_.Continue))))).pipe((0,Ge.q)(1),(0,Se.zg)(_e=>_e?this.nesUserInfoService.providerInfo$.pipe((0,Se.zg)(Le=>{var Re;let Xe=null;return 1===(null===(Re=null==Le?void 0:Le.loginPreferredProviders)||void 0===Re?void 0:Re.length)&&d!==ge.CGJ.ScreenSwitchProvider&&Le.gfnServiceEndpoints.forEach(mt=>{mt.loginProvider===Le.loginPreferredProviders[0]&&(Xe=mt.idpId)}),this.handleStarfleetLogin(d,R,Xe)}),(0,xt.K)(Le=>(this.logger.error("Failed to get idpId",Le),this.handleStarfleetLogin(d,R,null)))):(0,N.of)(!1)))}setUpDialog(d){const R={panelClass:["login-bridge-state-dialog","dialogPaddingRemove"],disableClose:!0};return R.data={idpId:d},this.tvMode&&(R.maxWidth="100vw"),this.cancelTimer&&clearTimeout(this.cancelTimer),this.cancelTimer=setTimeout(()=>{this.starfleetService.cancelLogin(!0),this.cancelTimeoutExpired=!0,this.listenForErrorSubscription&&this.listenForErrorSubscription.unsubscribe()},this.configuration.starfleet.httpServerDuration),this.cancelTimeoutExpired=!1,R}handleStarfleetLogin(d,R=!1,ce){return(0,N.of)(null).pipe((0,Se.zg)(_e=>(0,be.aj)([(0,N.of)(ce),this.gfnSdkService.getAuthType()])),(0,Se.zg)(([_e,Le])=>{if(Le===it.Gr.IDM||Le===it.Gr.INVALID){if(this.configuration.starfleet.sameTabLogin){const Re=this.pathService.getCurrentUrl();return this.starfleetService.login(!1,_e,void 0,void 0,Re).pipe((0,xt.K)(Xe=>(this.logger.error("failed to login the user with error",Xe),(0,N.of)(Xe))))}{const Re=this.setUpDialog(_e);return this.dialog.open(_s,Re).afterClosed().pipe((0,Se.zg)(Xe=>{switch(Xe){case Nt.L$.Success:return(0,N.of)(!0);case Nt.L$.Failure:return(0,N.of)(!1);case Nt.L$.Cancel:return this.cancelTimeoutExpired||this.handleBridgeStateCancel(),(0,ve.MA)(this.router.url)?this.handleStarfleetLogin(d,R,_e):(0,N.of)(!1)}}))}}return Le===it.Gr.IDM_FALLBACK?(this.loginListener=new Sa.c,this.bringUpJoinNowDialog(_e),this.loginListener):(this.logger.error("Attempted to open the login screen during a valid GaaS session"),(0,N.of)(!1))}))}resolveEcomUseCase(){return this.ecomUseCase?(0,N.of)({}):this.gfnSdkService.getAuthInfo().pipe((0,St.b)(d=>{d.timeRemaining&&0===Number(d.timeRemaining)?this.ecomUseCase=Gn.vq.GaaSFreeSampleAlreadyUsed:d.authToken?d.timeRemaining&&3601===Number(d.timeRemaining)?this.ecomUseCase=Gn.vq.GaaSFree1HourExceeded:d.timeRemaining&&3602===Number(d.timeRemaining)&&(this.ecomUseCase=Gn.vq.GaaSFreeUserCanUpgrade):this.ecomUseCase=Gn.vq.GaaSUnsupportedFreeTitle,this.idmService.loginProvider&&(this.idmService.loginProvider=null)}))}bringUpJoinNowDialog(d){const[R,ce]=(0,Pa.u)(this.resolveEcomUseCase().pipe((0,Se.zg)(()=>this.ecommerceService.openJoinNowDialog(d,this.ecomUseCase,Gn.l2.InitialState).afterClosed()),(0,vs.d)(1)),_e=>!!_e&&_e[1]===Gn.l2.ExitedToLogin);R.pipe((0,Se.zg)(()=>{this.joinNowSubscription&&this.joinNowSubscription.unsubscribe(),this.idmService.loginProvider&&(this.idmService.loginProvider=null);const _e=this.setUpDialog(d);return this.dialog.open(_s,_e).afterClosed()})).subscribe(_e=>{switch(_e){case Nt.L$.Success:this.loginListener.next(_e);break;case Nt.L$.Failure:this.bringUpJoinNowDialog(d);break;case Nt.L$.Cancel:this.cancelTimeoutExpired||this.handleBridgeStateCancel(),this.gfnSdkService.isThisAGFNSDKSession()&&this.bringUpJoinNowDialog(d)}}),ce.subscribe(([_e])=>{_e?this.loginListener.next(_e):this.bringUpJoinNowDialog(d)})}handleBridgeStateCancel(){this.listenForErrorSubscription=this.starfleetService.cancelLogin(!1).subscribe(d=>{if(this.logger.info("Cancelled error detected while user logging in",d),d.error||this.starfleetService.logout(d.access_token),d){const R=new ge.$4G({clientType:this.telemetryUtilService.getClientType(),currentScreen:this.telemetryService.getScreen(),userAction:ge.Vwu.LoginWithStarfleet,status:ge.N3X.CancelledLoginCompleted,errorDetails:status.toString(),totalMs:0,errorUri:"",serverErrorCode:""});this.telemetryService.push(R)}},d=>{this.logger.info("Error detected while listening for UserCancelled Error",d)})}displayLoginErrorMessages(d){let R,ce;switch(this.logger.info("Auth error in login: ",d),d){case Nt.C4.ACCOUNT_LOCKED:R="starfleet.accountLockedErrorMessage",ce="starfleet.accountLockedHeader";break;case Nt.C4.AGE_RESTRICTED:R="starfleet.ageReStrictiveErrorMessage",ce="starfleet.ageReStrictiveHeader";break;case Nt.C4.ACCOUNT_INACTIVE:R="starfleet.accountInActiveErrorMessage",ce="starfleet.accountInActiveHeader";break;default:R="starfleet.genericErrorMessage",ce="common.loginUnsuccessful"}const _e=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:{headerText:{text:ce},bodyText:{text:R},primaryButton:{text:"starfleet.loginPrimaryButton"},secondaryButton:{text:"common.cancel"}}});(0,Xr.S3)(_e.secondaryButtonClick.pipe((0,Ge.q)(1)),_e.primaryButtonClick.pipe((0,Ge.q)(1),(0,Se.zg)(Le=>this.login(ge.CGJ.ScreenAccountMenu)))).subscribe(Le=>{_e.close()})}displayLogoutErrorMessages(d){let R,ce;switch(this.logger.info("logout error: ",d.error),d.error){case Nt.C4.LOGOUT_NOT_SUPPORTED:ce={headerText:{text:"starfleet.logoutErrorheader"},bodyText:{text:"starfleet.logoutErrorMessageLogoutNotsupported"},primaryButton:{text:"common.continue"},secondaryButton:{text:"common.notNow"}},R=d.logoutNotSupportedRedirectUrl;break;default:ce={headerText:{text:"starfleet.logoutErrorheader"},bodyText:{text:"starfleet.logoutErrorMessageGeneric"},primaryButton:{text:"starfleet.logoutPrimaryButtonGeneric"}}}const _e=this.genericDialog.open({panelClass:"dialogPaddingRemove",disableClose:!0,data:ce});(0,Xr.S3)((0,Oa.s)(()=>d.error===Nt.C4.LOGOUT_NOT_SUPPORTED,(0,N.of)(1).pipe((0,Se.zg)(Le=>_e.secondaryButtonClick.pipe((0,Ge.q)(1)))),fs.C),_e.primaryButtonClick.pipe((0,Ge.q)(1),(0,Je.U)(Le=>{d.error===Nt.C4.LOGOUT_NOT_SUPPORTED&&(R?window.open(R,"_blank"):this.logger.error("redirectUrl is empty in LogOut Error scenario ",R,d.error))}))).subscribe(()=>_e.close())}sendLoginSuccessUserSessionEvent(){this.logger.info("Sending login success user session event"),(0,yn.$R)(this.telemetryService.getCommonDataObservable(),this.telemetryService.getDefaultClientConsentObserable()).pipe((0,Se.zg)(d=>this.starfleetService.accountStatusChanged.pipe((0,Ge.q)(1)))).subscribe(d=>{const R=new ge.$4G({clientType:this.telemetryUtilService.getClientType(),currentScreen:this.telemetryService.getScreen(),userAction:ge.Vwu.LoginWithStarfleet,status:ge.N3X.Success,errorDetails:status.toString(),totalMs:0,errorUri:"",serverErrorCode:""});this.telemetryService.push(R)})}sendLoginFailureUserSessionEvent(){this.logger.info("Sending login failed user session event"),(0,yn.$R)(this.telemetryService.getCommonDataObservable(),this.telemetryService.getDefaultClientConsentObserable()).pipe((0,Se.zg)(d=>this.starfleetService.accountStatusChanged.pipe((0,Ge.q)(1)))).subscribe(d=>{const R=new ge.$4G({clientType:this.telemetryUtilService.getClientType(),currentScreen:this.telemetryService.getScreen(),userAction:ge.Vwu.LoginWithStarfleet,status:ge.N3X.Failure,errorDetails:this.starfleetService.lastError.error_description,totalMs:0,serverErrorCode:this.starfleetService.lastError.error_code,errorUri:this.starfleetService.lastError.error_uri});this.telemetryService.push(R)})}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(Kt.No),o.LFG(f._J),o.LFG(ci.fI),o.LFG(ge.wU6),o.LFG(y.uw),o.LFG(_n.VK),o.LFG(a.y0),o.LFG(Nt.DO),o.LFG(Gn.BH),o.LFG(it.s),o.LFG(si.F0),o.LFG(Eo.rH),o.LFG(qr.x),o.LFG(ae.TX),o.LFG(ve.un),o.LFG(La.$))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var bs=e(96121),ti=e(94491),Co=e(34361),xs=e(82516),Ra=e(33392);let Ua=(()=>{class J{constructor(d,R,ce,_e,Le,Re,Xe,mt){this.serviceWorkerService=d,this.appConfig=R,this.experienceControlService=_e,this.router=Le,this.deeplinkHelperService=Re,this.telemetryUtilService=Xe,this.telemetryService=mt,this.appStartTs=Date.now(),this.refreshing=!1,this.updateServiceWorkerSilently=!1,this.swUpdateCheckInterval=144e5,this.appLaunchWindow=1e4,this.lastUpdateCheckTimestamp=Date.now(),this.timeCheckInterval=6e4,this.serviceWorkerInstalledOnce=new ii.t(1),this.swActivationTimedOut=new oe.xQ,this.shouldReloadOnActivation=!0,this.telemetryEventProcessingComplete=new oe.xQ,this.logger=ce.getLogger("shared/service-worker-update.service"),this.appLaunchWindow=this.appConfig.selfUpdate.appLaunchWindow||this.appLaunchWindow,this.swUpdateCheckInterval=Math.max(this.appConfig.selfUpdate.swUpdateCheckInterval||this.swUpdateCheckInterval,3e4)}initialize(){this.serviceWorkerService.serviceWorkerSupported()?(this.serviceWorkerService.swUpdateReadyCached.subscribe(d=>{this.logger.info("Initialize: SW update event was cached")}),this.serviceWorkerService.swActivated.subscribe(d=>{this.logger.info("Initialize: SW activated"),this.serviceWorkerInstalledOnce.next(!0)}),this.serviceWorkerService.swIsActive()&&(this.logger.info("Initialize: SW already active"),this.serviceWorkerInstalledOnce.next(!0)),this.handleServiceWorkerActivated(),this.autoUpdateOnAppLaunch(),this.periodicallyCheckForUpdates(),this.handleServiceWorkerActivationRequest()):this.logger.info("Initialize: Service worker not supported")}get swActivationTimedOutNotification(){return this.swActivationTimedOut.asObservable()}updateReady(){return this.serviceWorkerService.swUpdateReadyCached.pipe((0,St.b)(d=>this.logger.info("swUpdateCache returned event => ",d)),(0,pt.h)(d=>null!==d&&!this.isSwUpdateWithinAppLaunchWindow(d.ts)&&!d.firstInstallation),(0,St.b)(d=>this.logger.info("GFN SW Update Ready (outside app launch window)",d)))}checkForUpdates(){return this.withinAppLaunchWindow()?(this.logger.info("GFN SW Update skip update check in App launch window"),(0,N.of)({updateAvailable:!1,error:null})):this.checkForUpdatesInternal()}checkForUpdatesInternal(d){return this.lastUpdateCheckTimestamp=Date.now(),this.serviceWorkerInstalledOnce.pipe((0,Ge.q)(1),(0,Se.zg)(R=>this.checkForCanaryUpdate(d)),(0,Se.zg)(R=>(0,Co.D)(this.serviceWorkerService.checkForUpdates()).pipe((0,Ge.q)(1))))}checkForCanaryUpdate(d){if(d||(0,ve.MA)(this.router.url)||(0,ve.MA)(document.location.hash.substr(1)))return this.logger.info("in streamer path or skip checking Canary update",d),(0,N.of)(!0);this.logger.info("checking GXT Canary Targeting");const R=location.pathname.indexOf("index.html"),ce=-1===R?location.pathname:location.pathname.substr(0,R);return this.experienceControlService.getCloudVariable(this.appConfig.gxTarget.experiences.browserClientCanary,{domain:document.location.hostname,path:document.location.pathname},void 0,fi.Z4.GxTargetGetCloudVariable,fi.Qu.GxTargetGetBrowserClientCanary).pipe((0,Je.U)(_e=>(this.logger.info("browser client canary GXT: ",_e.value.isCanaryEnabled),document.cookie=_e.value.isCanaryEnabled?`Request-Origin=B; path=${ce}; max-age=31536000; samesite=strict`:`Request-Origin=A; path=${ce}; max-age=31536000; samesite=strict`,!0)),(0,xt.K)(_e=>(null===_e.err&&"Empty cloud variable"===_e.errorMessage?(this.logger.info("current path is not targeted, clearing cookie"),document.cookie=`Request-Origin=A; path=${ce}; expires=${new Date(0).toUTCString()}`):this.logger.error("error in fetching Canary GXT, keeping data as it is",_e),(0,N.of)(!0))))}activateServiceWorker(){return this.logger.info("GFN SW Activation requested"),this.serviceWorkerService.activateServiceWorker()}reloadTab(){this.refreshing||(this.logger.info("Reloading the Tab"),window.location.reload()),this.refreshing=!0}finalizeActivation(){this.serviceWorkerService.postMessageSw({type:Oi.rL.GetClientVersion,content:""}),this.serviceWorkerService.swAssociatedClientVersion.pipe((0,Ge.q)(1)).subscribe(d=>{this.logger.info("Client Version of Associated SW and client is",d,this.appConfig.build.version),d!==this.appConfig.build.version&&this.shouldReloadOnActivation?this.reloadTab():this.swActivationTimedOut.next(!1)})}isSwUpdateWithinAppLaunchWindow(d){return d-this.appStartTs<this.appLaunchWindow}withinAppLaunchWindow(){return Date.now()-this.appStartTs<this.appLaunchWindow}periodicallyCheckForUpdates(){f.ng.isBrowserPlatform()?this.updateIntervalSub?this.logger.info("GFN SW Periodic Check: Already initialized"):(this.logger.info(`GFN SW Periodic Check: Init - time check interval: ${this.timeCheckInterval}, update check interval: ${this.swUpdateCheckInterval}`),this.updateIntervalSub=(0,dt.F)(this.timeCheckInterval).pipe((0,pt.h)(d=>Date.now()-this.lastUpdateCheckTimestamp>=this.swUpdateCheckInterval),(0,Se.zg)(d=>this.checkForUpdates())).subscribe(d=>{this.logger.info("GFN SW Periodic Check: Result",d)},d=>this.logger.error("GFN SW Periodic Check: Error -",d.toString()))):this.logger.info("GFN SW Periodic Check: Skipping as not browser platform.")}clearUpdateCheckInterval(){var d;null===(d=this.updateIntervalSub)||void 0===d||d.unsubscribe(),this.updateIntervalSub=null}autoUpdateOnAppLaunch(){this.logger.info("GFN SW Auto Update: Init"),this.checkForUpdatesInternal(!f.ng.isBrowserPlatform()).pipe((0,pt.h)(d=>d.updateAvailable&&this.withinAppLaunchWindow()&&this.deeplinkHelperService.allowApplicationReload()),(0,Se.zg)(d=>(this.logger.info("GFN SW Auto Update: Within launch window, requesting to activate."),this.activateServiceWorker()))).subscribe(d=>{this.logger.info("GFN SW Auto Update: Activation result",d)},d=>this.logger.error("GFN SW Auto Update: Request failed",d.toString()))}handleServiceWorkerActivatedInternal(d){this.logger.info("GFN SW Activated: New Service worker activated",d),(null==d?void 0:d.firstInstallation)||this.refreshing||f.ng.isCefPlatform()?(this.logger.info("GFN SW Activated: Will not reload."),this.updateServiceWorkerSilently=!1):this.updateServiceWorkerSilently?(this.logger.info("GFN SW Activated: Updated silently."),this.updateServiceWorkerSilently=!1,this.serviceWorkerService.clearSwUpdateCache()):(this.logger.info("GFN SW Activated: Reloading the page."),this.finalizeActivation())}handleServiceWorkerActivated(){this.logger.info("GFN SW Activated: Init"),this.serviceWorkerService.swActivated.pipe((0,Se.zg)(d=>(this.sendSWActivationTelemetry("",!0),(0,N.of)(d).pipe((0,Ra.j)(R=>this.telemetryEventProcessingComplete.asObservable()))))).subscribe(d=>{this.handleServiceWorkerActivatedInternal(d)},d=>this.logger.error("GFN SW Activated: Error -",d.toString()))}sendSWActivationTelemetry(d,R){const ce={immediateRequest:!0,afterDone:()=>{this.telemetryEventProcessingComplete.next(!0)}},_e=new ge.$4G({clientType:this.telemetryUtilService.getClientType(),currentScreen:this.telemetryService.getScreen()||ge.CGJ.ScreenMallHome,userAction:ge.Vwu.ServiceWorkerActivation,status:R?ge.N3X.ServiceWorkerActivated:ge.N3X.ServiceWorkerActivationOngoing,errorDetails:d||"",totalMs:0,errorUri:"",serverErrorCode:""});this.telemetryService.push(_e,void 0,ce)}handleServiceWorkerActivationRequest(){this.logger.info("SWAR: Init"),this.serviceWorkerService.swActivationRequested.pipe((0,Se.zg)(d=>(0,dt.F)(750).pipe((0,xe.R)(this.serviceWorkerService.swActivated),(0,Ge.q)(1))),(0,Se.zg)(d=>(0,Co.D)(navigator.serviceWorker.getRegistration())),(0,Se.zg)(d=>{this.shouldReloadOnActivation=!1,this.logger.info("SWAR: max time after activation requested, reloading");const R=new MessageChannel;return(null==d?void 0:d.waiting)?(d.waiting.postMessage({type:Oi.rL.GetClientVersionWaitingSW},[R.port2]),R.port1.start(),(0,xs.R)(R.port1,"message")):(0,N.of)(!1)}),(0,Se.zg)(d=>{let ce,R="";return d&&d.data.clientVersionString!==this.appConfig.build.version?(ce=this.telemetryEventProcessingComplete.asObservable(),R=d.data.clientVersionString):ce=(0,N.of)(!1),this.sendSWActivationTelemetry(R,!1),ce})).subscribe(d=>{d?this.reloadTab():this.swActivationTimedOut.next(!1)},d=>{this.sendSWActivationTelemetry("SWAR: Error",!1),this.logger.error("SWAR: Error",d)})}isFirstInstallation(){return!this.serviceWorkerService.swIsActive()}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(Oi.HR),o.LFG(_n.VK),o.LFG(f.ed),o.LFG(fi.Q6),o.LFG(si.F0),o.LFG(Us.g),o.LFG(ge.wU6),o.LFG(a.y0))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var Yo=e(32854),Fa=e(48085);let Ga=(()=>{class J{constructor(d){this.logger=d.getLogger("gfn/shared/GameLaunchAnalyticsService"),this.resetGameLaunchMetadata(!1)}getGameLaunchMetadata(){return Object.assign({},this.gameLaunchMetadata)}updateGameLaunchChangeMetadata(){this.logger.info(this.gameLaunchMetadata.launchTs?"Game change accepted - updating GameLaunchData":"No game launch info exists, adding GameChangeDialog info"),this.gameLaunchMetadata.isFromGameChangeDialog=!0}setGameLaunchMetadata(d,R,ce,_e){this.gameLaunchMetadata={shortName:d,launchTs:R,epicAccountLinked:ce,isMallRunning:_e}}resetGameLaunchMetadata(d){this.logger.info("Cleared game launch metadata"),this.gameLaunchMetadata={shortName:"",launchTs:0,epicAccountLinked:!1,isMallRunning:d}}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})(),ts=(()=>{class J{constructor(d,R){this.router=d,this.pathService=R,this.backNavigationUrls=new Array,this.lastNavigationRoute=null,this.namedBackNavigationUrls=new Map}get lastNavigationUrl(){return this.lastNavigationRoute}get backNavigationRoute(){return this.lastNavigationRoute=this.backNavigationUrls.pop(),this.lastNavigationRoute}set backNavigationRoute(d){this.lastNavigationRoute=d,this.backNavigationUrls.push(d)}setNamedBackNavigationUrl(d,R){this.namedBackNavigationUrls.set(d,R)}getNamedBackNavigationUrl(d){return this.namedBackNavigationUrls.get(d)||""}clearState(){this.backNavigationUrls=new Array,this.lastNavigationRoute=null,this.namedBackNavigationUrls.clear()}navigateToPreviousRoute(d){const R=this.backNavigationRoute;d&&this.namedBackNavigationUrls.has(d)?this.pathService.navigateByUrl(this.getNamedBackNavigationUrl(d)):(0,u.isNil)(R)?this.pathService.navigateByUrl(ve.nn.Games):this.pathService.navigateByUrl(this.router.url===R?this.backNavigationRoute:R)}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(si.F0),o.LFG(ve.un))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var bi=(()=>{return(J=bi||(bi={})).Search="Search",J.Survey="Survey",bi;var J})(),en=e(68496),Ci=(()=>{return(J=Ci||(Ci={})).MallScreen="SCREEN_MALL",J.SurveyScreen="SCREEN_SURVEY",J.FeedbackScreen="SCREEN_FEEDBACK",J.PostGameScreen="SCREEN_POSTGAME",Ci;var J})();const Ba={header:"endSurvey.title",body:{text:"endSurvey.message"},bodySurvey:{text:"endSurvey.messageSurvey"},primaryButton:{text:"common.exit",accentColor:!1},secondaryButton:"common.cancel"};var Qo=(()=>{return(J=Qo||(Qo={})).Stage="STAGE",J.Prod="PROD",Qo;var J})(),Ts=e(56066),Za=e(98221);let Wa=(()=>{class J{constructor(d,R,ce,_e,Le,Re,Xe,mt,Gt,Qt,an,vn,Cn,kn,Zn,pi,So,wi,Jo,as,rl,sl,Fs){this.idmService=d,this.systemInfoService=R,this.experienceControlWrapperService=ce,this.telemetryService=_e,this.distributedTracingBootstrapService=Re,this.router=Xe,this.browserSupportService=mt,this.telemetryUtilService=Gt,this.customLocationService=Qt,this.pathService=an,this.localeService=vn,this.nesUserInfoService=Cn,this.gridService=kn,this.ecommerceService=Zn,this.appConfig=pi,this.experienceControlService=So,this.gfnSdkService=wi,this.applicationLifetimeService=Jo,this.libraryLoggingService=as,this.browseUxService=rl,this.ipcService=sl,this.gfcHelperService=Fs,this.surveyUrlSubject=new ii.t,this.participatedInSurvey=!1,this.surveyTimeout={},this.notificationTimers={},this.surveyActionDuration=0,this.surveyMinimized$=new oe.xQ,this.logger=Le.getLogger("SurveyService"),this.logger.info("Init SDK"),this.sdk=new en.SurveySdkService,this.surveySdkClientConfig={url:pi.surveyEndpoint.server,defaultRetries:pi.surveyEndpoint.defaultRetries,defaultTimeout:pi.surveyEndpoint.defaultTimeout,env:pi.surveyEndpoint.server.includes("stg")?Qo.Stage:Qo.Prod,clientId:pi.surveyEndpoint.clientId,clientVersion:pi.build.version,clientVariant:this.telemetryUtilService.getCommonClientVariant(pi.build.variant)},this.clientSurveyResults=new Map,this.surveyEventReferenceSubmittedMap=new Map,this.surveyEventReferenceDismissedMap=new Map,this.surveyEventReferenceErrorMap=new Map,this.surveyEventReferenceSubmissionErrorMap=new Map,this.surveyEventReferenceTimeoutMap=new Map,this.surveyEventReferenceCloseDialogMap=new Map,this.surveyEventReferenceLogListenerMap=new Map,this.surveyEventReferenceMinimizedMap=new Map,this.surveyEventReferenceDeferredMap=new Map,this.logger.info("surveySdkClientConfig: ",this.surveySdkClientConfig)}initialize(){this.applicationLifetimeService.addWorkOnShutdown(()=>(this.clientSurveyResults.forEach((d,R)=>{this.sendUserSurveyTelemetry(ge._G.DismissAppExit,this.getSurveyHierarchy(R),R,d)}),(0,N.of)(void 0)))}handleClientSurveyResponse(d,R,ce){var _e,Le,Re,Xe;if(d){this.logger.info("Got User Survey, data is: ",d),this.surveyActionDuration=Date.now();const mt=d;this.clientSurveyResults.set(mt.triggerType,mt),R.addTags({[en.SurveySdkSpanTagNames.SurveyId]:mt.surveyId}),(mt.triggerType===en.TriggerType.SurveyBanner||mt.triggerType===en.TriggerType.UXTestBanner||mt.triggerType===en.TriggerType.CommunicationBanner)&&this.surveyUrlSubject.next(mt.surveyContainerUrl),this.subscribeToSurveyEvents(mt)}else this.logger.info("Cannot get User Survey data");this.sendSurveyHttpSuccessTelemetry({url:null===(Le=null===(_e=d)||void 0===_e?void 0:_e.config)||void 0===Le?void 0:Le.url,httpStatus:null===(Re=d)||void 0===Re?void 0:Re.status,durationMs:ce,xRequestId:null===(Xe=d)||void 0===Xe?void 0:Xe.xRequestId},ge.f$p.GetSurvey,ge.HGL.GetUsabilityStudy),this.sdk.closeSpan(R)}handleUsabilityStudyError(d,R){return this.logger.error("Check for survey failed. Sending HTTPFailure telemetry: ",d),R.setTag(un.NI.Error,!0),this.sdk.closeSpan(R),this.sendSurveyFailureTelemetry(d,ge.f$p.GetSurvey,ge.HGL.GetUsabilityStudy),this.resetClientSurveyResult(),(0,N.of)(void 0)}getBannerNotificationTimer(){var d,R;const ce=null===(d=this.notificationTimers)||void 0===d?void 0:d.SURVEY_BANNER,_e=null===(R=this.notificationTimers)||void 0===R?void 0:R.UXTEST_BANNER;return this.clientSurveyResults.get(en.TriggerType.SurveyBanner)?ce:this.clientSurveyResults.get(en.TriggerType.UXTestBanner)?_e:3e5}checkUserAuthenticatedForSurveys(d){if(this.logger.info("check User Authenticated For Surveys"),!d.isAuthenticated){let R=Ci.MallScreen;this.participatedInSurvey&&(R=Ci.SurveyScreen,this.customLocationService.navigateToPreviousRoute(bi.Survey));const ce=this.getSurveyBannerInProgress();return ce&&(ce.triggerType!==en.TriggerType.CommunicationBanner?this.declineSurveys(ge._G.DismissLogout,R,ce).subscribe():this.resetClientSurveyResult(ce)),!1}return!0}checkSurveyEnabledForTriggerType(d,R){if(d){const ce=d.value;switch(R){case en.TriggerType.SurveyBanner:return ce.enableBannerSurvey;case en.TriggerType.Feedback:return ce.enableUserFeedback;case en.TriggerType.PostGame:return ce.enablePostSessionSurvey;default:return!1}}return!1}checkForAvailableSurvey(d,R="0",ce="",_e=0){return this.idmService.accountStatusChanged.pipe((0,Se.zg)(Le=>Le.isAuthenticated?this.isSurveyFeatureAvailableForBanner(Le,d).pipe((0,ct.P)(),(0,Se.zg)(Re=>Re?(this.logger.info("Survey feature enabled"),this.getAvailableSurveyForBanner(Le,d,R,ce,_e).pipe((0,xt.K)(()=>(0,N.of)(null)))):(this.logger.info("Survey feature is not enabled"),(0,N.of)(null)))):(this.logger.info("checkForAvailableSurvey user logged out"),this.checkUserAuthenticatedForSurveys(Le)?void 0:(0,N.of)(void 0))))}isSurveyFeatureAvailableForBanner(d,R){const ce=[this.appConfig.gxTarget.experiences.survey];return R.includes(en.TriggerType.UXTestBanner)&&ce.push(this.appConfig.gxTarget.experiences.usabilityStudy),R.includes(en.TriggerType.CommunicationBanner)&&ce.push(this.appConfig.gxTarget.experiences.communicationSurvey),this.availableFeatures=[],this.getSurveyFeaturesEnablement(d,ce).pipe((0,Je.U)(([..._e])=>{this.availableFeatures=_e;const Le=_e[0],Re=R.indexOf(en.TriggerType.UXTestBanner),Xe=-1!==Re?_e[Re]:null,mt=R.indexOf(en.TriggerType.CommunicationBanner),Gt=-1!==mt?_e[mt]:null,Qt=this.checkSurveyEnabledForTriggerType(Le,R[0]);return R.includes(en.TriggerType.UXTestBanner)||R.includes(en.TriggerType.CommunicationBanner)?!!(Qt||Xe||Gt):Qt}),(0,xt.K)(_e=>(this.logger.error("Failed to get survey feature enablement"),(0,N.of)(void 0))))}getAvailableSurveyForBanner(d,R,ce="0",_e="",Le=0,Re=!1){const Xe=_e||this.cachedStreamingSessionId;return(0,be.aj)([this.systemInfoService.getSystemInfo(),this.distributedTracingBootstrapService.fetchCountryCode(),this.prepareClientParams(ce,Xe,Le,Re),this.systemInfoService.getDeviceOSType()]).pipe((0,Te.b)(([mt,Gt,Qt,an])=>{if(this.logger.info("ClientParams passed getAvailableSurveyForBanner: ",Qt,mt.DeviceId,Gt),!this.checkUserAuthenticatedForSurveys(d)||(this.currentUser=d,!this.getDataForGetUserSurveyApi(R)))return(0,N.of)(void 0);this.sdk.initializeClientConfig(this.surveySdkClientConfig,this.appConfig.tracer),this.initGlobalTagsForOpenTracing(mt.DeviceId,this.osInfo,Gt,d.userId,d.idpId);const vn=this.startGetSurveyClientSpan(!1),Cn=this.getCommonParams(an);this.logger.info("ClientParams passed to survey sdk: ",this.surveyClientParams,Cn);const kn=performance.now();return(0,Co.D)(this.sdk.getUserSurvey(d.userId,d.idpId,mt.DeviceId,this.surveyTimeout,this.surveyClientParams,this.requestedTriggerTypes,this.surveyClientParams.locale,Cn.deviceOS,Cn.deviceType,Cn.deviceMake,Cn.deviceModel,Cn.deviceOSVersion,Cn.clientType,Cn.browserType,vn)).pipe((0,St.b)(Zn=>{const pi=performance.now();this.handleClientSurveyResponse(Zn,vn,pi-kn)}),(0,Je.U)(Zn=>f.ng.isBrowserPlatform()&&this.router.url===ve.nn.Surveys&&!Zn?void this.browserSupportService.goToPreviousPage():Zn),(0,xt.K)(Zn=>this.handleUsabilityStudyError(Zn,vn)))}))}isSurveyFeatureAvailable(d){const R=[this.appConfig.gxTarget.experiences.survey];d.includes(en.TriggerType.UXTestBanner)&&R.push(this.appConfig.gxTarget.experiences.usabilityStudy),d.includes(en.TriggerType.CommunicationBanner)&&R.push(this.appConfig.gxTarget.experiences.communicationSurvey);let ce=!1;return(0,yn.$R)(this.idmService.accountStatusChanged,this.gfnSdkService.getAuthInfo()).pipe((0,St.b)(([_e,Le])=>{ce=Le.authType===it.Gr.JWT}),(0,pt.h)(([_e,Le])=>ce||_e.isAuthenticated),(0,Te.b)(([_e,Le])=>{let Re;return Re=ce?{userId:Le.userId||"",idpId:Le.idpId||""}:this.getUserInfoFromUser(_e),this.availableFeatures=[],this.getSurveyFeaturesEnablement(Re,R)}),(0,Je.U)(([..._e])=>{this.availableFeatures=_e;const Le=_e[0],Re=d.indexOf(en.TriggerType.UXTestBanner),Xe=-1!==Re?_e[Re]:null,mt=d.indexOf(en.TriggerType.CommunicationBanner),Gt=-1!==mt?_e[mt]:null,Qt=this.checkSurveyEnabledForTriggerType(Le,d[0]);return d.includes(en.TriggerType.UXTestBanner)||d.includes(en.TriggerType.CommunicationBanner)?!!(Qt||Xe||Gt):Qt}),(0,xt.K)(_e=>(this.logger.error("Failed to get survey feature enablement"),(0,N.of)(void 0))))}getAvailableSurvey(d,R="0",ce="",_e=0,Le=!1){const Re=ce||this.cachedStreamingSessionId;return(0,be.aj)([this.idmService.accountStatusChanged,this.systemInfoService.getSystemInfo(),this.distributedTracingBootstrapService.fetchCountryCode(),this.systemInfoService.getDeviceOSType(),this.prepareClientParams(R,Re,_e,Le)]).pipe((0,Te.b)(([Xe,mt,Gt,Qt])=>{if(!this.checkUserAuthenticatedForSurveys(Xe)||(this.currentUser=Xe,!this.getDataForGetUserSurveyApi(d)))return(0,N.of)(void 0);this.sdk.initializeClientConfig(this.surveySdkClientConfig,this.appConfig.tracer),this.initGlobalTagsForOpenTracing(mt.DeviceId,this.osInfo,Gt,Xe.userId,Xe.idpId);const an=this.startGetSurveyClientSpan(!1),vn=this.getCommonParams(Qt);this.logger.info("ClientParams passed to survey sdk: ",this.surveyClientParams,vn);const Cn=performance.now();return(0,Co.D)(this.sdk.getUserSurvey(Xe.userId,Xe.idpId,mt.DeviceId,this.surveyTimeout,this.surveyClientParams,this.requestedTriggerTypes,this.surveyClientParams.locale,vn.deviceOS,vn.deviceType,vn.deviceMake,vn.deviceModel,vn.deviceOSVersion,vn.clientType,vn.browserType,an)).pipe((0,St.b)(kn=>{const Zn=performance.now();this.handleClientSurveyResponse(kn,an,Zn-Cn)}),(0,Je.U)(kn=>f.ng.isBrowserPlatform()&&this.router.url===ve.nn.Surveys&&!kn?void this.browserSupportService.goToPreviousPage():kn),(0,xt.K)(kn=>this.handleUsabilityStudyError(kn,an)))}))}getDataForGetUserSurveyApi(d){this.requestedTriggerTypes=[],this.logger.info("getAvailableSurvey,  available Features: ",this.availableFeatures);const R=this.availableFeatures[0],ce=d.indexOf(en.TriggerType.UXTestBanner),_e=-1!==ce?this.availableFeatures[ce]:null,Le=d.indexOf(en.TriggerType.CommunicationBanner),Re=-1!==Le?this.availableFeatures[Le]:null,Xe=R||_e;return Xe?(this.surveySdkClientConfig.surveyContainerBaseUrl=Xe.value.containerBaseUrl,R&&(this.surveyTimeout.SURVEY_BANNER=R.value.surveyTimeoutSec),_e&&(this.surveyTimeout.UXTEST_BANNER=_e.value.surveyTimeoutSec),R&&(this.notificationTimers.SURVEY_BANNER=R.value.notificationTimeoutMs),_e&&(this.notificationTimers.UXTEST_BANNER=_e.value.notificationTimeoutMs),_e&&d.includes(en.TriggerType.UXTestBanner)&&this.requestedTriggerTypes.push(en.TriggerType.UXTestBanner),Re&&Re.value.enableOCTSurvey&&d.includes(en.TriggerType.CommunicationBanner)&&this.requestedTriggerTypes.push(en.TriggerType.CommunicationBanner),R&&d.forEach(mt=>{mt!==en.TriggerType.UXTestBanner&&mt!==en.TriggerType.CommunicationBanner&&this.requestedTriggerTypes.push(mt)}),this.logger.info("RequestedTriggerTypes: ",this.requestedTriggerTypes),this.logger.info("Successfully preapared Data for GetUserSurvey Api"),!0):(this.logger.error("Failed to preapsre Data for GetUserSurvey Api"),!1)}prepareClientParams(d,R,ce,_e){const Le=_e?(0,N.of)({NetworkType:f.VV.Unknown}):this.systemInfoService.getNetworkInformation();return(0,yn.$R)(Le,this.systemInfoService.getOsInformation(),this.systemInfoService.getSystemInfo(),this.localeService.localeChanged,this.nesUserInfoService.fetchUserInfoWithStreamingUrl(),this.gridService.getCachedZone(),this.ecommerceService.getUserMembership().pipe((0,pt.h)(Re=>Re.membershipStatus!==Gn.Tn.UnKnown&&Re.membershipStatus!==Gn.Tn.LoggedOut)),this.gfcHelperService.getAppInstanceId()).pipe((0,Se.zg)(([Re,Xe,mt,Gt,Qt,an,vn,Cn])=>(this.osInfo=Xe,this.systemInfo=mt,this.surveyClientParams={gfnSessionId:R||"",application:"GFN",serverType:"GRID",userSubscriptionLevelSKU:vn.membershipStatus===Gn.Tn.Entitled?vn.subscription.productSku:"",network:Re&&Re.NetworkType?Re.NetworkType:f.VV.Unknown,locale:Gt,affiliate:(null==Qt?void 0:Qt.serviceEndpoint)?Qt.serviceEndpoint.loginProvider:"",datacenter:an.name||"",browser:mt.BrowserName||"",browserVersion:mt.BrowserVersion||"",cmsId:d,sessionDurationMin:ce,osName:this.experienceControlService.getSupportedOSName(Xe.OSName),selectedCmsId:this.browseUxService.selectedParentId||"",surveySessionId:f.ng.isBrowserPlatform()&&Cn||""},(0,N.of)(this.surveyClientParams))))}unsubscribeFromLogListener(d){this.surveyEventReferenceLogListenerMap.get(d).unsubscribe()}getBannerSurveyTriggerType(){const d=this.getSurveyBannerInProgress();return d?d.triggerType:null}setStreamingSessionId(d){this.cachedStreamingSessionId=d}declineSurveys(d,R,ce){if(this.logger.info("Decline User Surveys Async:",ce),ce&&!(0,u.isEmpty)(ce)&&this.currentUser&&this.currentUser.isAuthenticated){this.logger.info("Declining the surveys for id: ",ce.surveyId);const _e=this.startDismissSurveyClientSpan(ce.surveyId),Le=performance.now();return(0,Co.D)(this.sdk.declineUserSurvey(this.currentUser.userId,ce.surveyId,!1,_e)).pipe((0,Je.U)(Re=>{var Xe;const mt=performance.now();return this.sdk.closeSpan(_e),this.sendUserSurveyTelemetry(d,R,ce.triggerType,ce),this.sendSurveyHttpSuccessTelemetry({url:null===(Xe=null==Re?void 0:Re.config)||void 0===Xe?void 0:Xe.url,httpStatus:null==Re?void 0:Re.status,durationMs:mt-Le,xRequestId:null==Re?void 0:Re.xRequestId},ge.f$p.SendSurveyResponse,ge.HGL.SendUsabilityStudyResponse),this.resetClientSurveyResult(ce),!0}),(0,xt.K)(Re=>(this.logger.error("Declining the survey failed sending HTTPFailure telemetry: ",Re),this.sdk.closeSpan(_e),this.sendSurveyFailureTelemetry(Re,ge.f$p.SendSurveyResponse,ge.HGL.SendUsabilityStudyResponse),this.resetClientSurveyResult(ce),(0,N.of)(!1))))}return this.logger.error("Something went wrong in declining the survey Removing the notification",ce),this.resetClientSurveyResult(ce),(0,N.of)(!1)}participateInUsabilityStudy(){const d=this.getSurveyBannerInProgress();this.logger.info("onClickParticipate for id: ",d.surveyId),this.participatedInSurvey=!0,this.router.url!==ve.nn.Surveys&&(this.customLocationService.setNamedBackNavigationUrl(bi.Survey,this.router.url),this.pathService.navigate([ve.nn.Surveys],{skipLocationChange:!0})),this.sendUserSurveyTelemetry(d.surveyVisited?ge._G.ParticpatePostMinimize:ge._G.Participate,Ci.MallScreen,null==d?void 0:d.triggerType,d)}getSurveyUrl(){return this.surveyUrlSubject.asObservable()}isSurveyInProgress(){return this.participatedInSurvey}getSurveyBannerInProgress(){return this.clientSurveyResults.get(en.TriggerType.CommunicationBanner)||this.clientSurveyResults.get(en.TriggerType.UXTestBanner)||this.clientSurveyResults.get(en.TriggerType.SurveyBanner)}subscribeToSurveyEvents(d){const R=d.triggerType,ce=(0,en.subscribeToIFrameEvents)({surveyId:d.surveyId,type:en.SurveyEventType.Minimized},()=>this.surveyEventListnerMinimized(R));this.surveyEventReferenceMinimizedMap.set(R,ce);const _e=(0,en.subscribeToIFrameEvents)({surveyId:d.surveyId,type:en.SurveyEventType.Deferred},()=>this.surveyEventListnerDeferred(R));this.surveyEventReferenceDeferredMap.set(R,_e);const Le=(0,en.subscribeToIFrameEvents)({surveyId:d.surveyId,type:en.SurveyEventType.Submitted},()=>this.surveyEventListenerSubmitted(R));this.surveyEventReferenceSubmittedMap.set(R,Le);const Re=(0,en.subscribeToIFrameEvents)({surveyId:d.surveyId,type:en.SurveyEventType.Dismissed},()=>this.surveyEventListenerDismissed(R));this.surveyEventReferenceDismissedMap.set(R,Re);const Xe=(0,en.subscribeToIFrameEvents)({surveyId:d.surveyId,type:en.SurveyEventType.Errored},()=>this.surveyEventListenerErrored(R));this.surveyEventReferenceErrorMap.set(R,Xe);const mt=(0,en.subscribeToIFrameEvents)({surveyId:d.surveyId,type:en.SurveyEventType.SubmissionErrored},()=>this.surveyEventListenerSubmissionErrored(R));this.surveyEventReferenceSubmissionErrorMap.set(R,mt);const Gt=(0,en.subscribeToIFrameEvents)({surveyId:d.surveyId,type:en.SurveyEventType.Timeout},()=>this.surveyEventListenerTimeout(R));this.surveyEventReferenceTimeoutMap.set(R,Gt);const Qt=(0,en.subscribeToIFrameEvents)({surveyId:d.surveyId,type:en.SurveyEventType.CloseDialog},()=>this.surveyEventListenerCloseDialog(R));this.surveyEventReferenceCloseDialogMap.set(R,Qt),this.logger.info("Survey Event Reference Close Dialog Map:",this.surveyEventReferenceCloseDialogMap.size);const an=(0,en.subscribeToIFrameEvents)({surveyId:d.surveyId,type:en.SurveyEventType.Log},vn=>this.libraryLoggingService.sendLog(vn));this.surveyEventReferenceLogListenerMap.set(R,an)}getSurveyHierarchy(d){switch(d){case en.TriggerType.CommunicationBanner:return this.isSurveyInProgress()?Ci.SurveyScreen:Ci.MallScreen;case en.TriggerType.SurveyBanner:case en.TriggerType.UXTestBanner:return Ci.SurveyScreen;case en.TriggerType.Feedback:return Ci.FeedbackScreen;case en.TriggerType.PostGame:return Ci.PostGameScreen;default:return Ci.SurveyScreen}}surveyEventListnerMinimized(d){this.logger.info("Survey has minimized; triggerType: ",d),this.unsubscribeFromLogListener(d),this.surveyMinimize(d)}surveyEventListnerDeferred(d){this.logger.info("Survey has deferred; triggerType: ",d),this.sendUserSurveyTelemetry(ge._G.Deferred,this.getSurveyHierarchy(d),d,this.clientSurveyResults.get(d)),d!==en.TriggerType.Feedback&&d!==en.TriggerType.PostGame&&this.customLocationService.navigateToPreviousRoute(bi.Survey),this.surveyEventReferenceDeferredMap.get(d).unsubscribe(),this.unsubscribeFromLogListener(d)}triggerSurveyLogUpload(d){if(f.ng.isBrowserPlatform())this.gfcHelperService.updateEventDataParamIds({surveySessionId:d||""});else{const ce={type:Hn.oI.CollectClientLogs,content:JSON.stringify({name:Hn.Mx.UserFeedBack,surveySessionId:d||""}),sender:this.telemetryUtilService.getClientType()===ge.BhR.MallClient?Hn.vS.GfnMall:Hn.vS.GfnStreamer,recipient:Hn.vS.GfnUpdater};this.logger.info("Sending IPC message for uploading survey logs:",ce),this.ipcService.pushMessage(ce).pipe((0,Ge.q)(1)).subscribe(_e=>this.logger.info("Survey logs upload triggered: ",_e),_e=>this.logger.error("Error triggering Survey logs upload: ",_e))}}surveyEventListenerSubmitted(d){var R;this.logger.info("Survey has been submitted; triggerType: ",d);const ce=null===(R=this.clientSurveyResults.get(d))||void 0===R?void 0:R.surveySessionId;this.triggerSurveyLogUpload(ce),this.sendUserSurveyTelemetry(ge._G.Completed,this.getSurveyHierarchy(d),d,this.clientSurveyResults.get(d)),this.surveyEventReferenceSubmittedMap.get(d).unsubscribe(),this.unsubscribeFromLogListener(d)}surveyEventListenerDismissed(d){this.logger.info("Survey has been dismissed"),this.sendUserSurveyTelemetry(ge._G.DismissManual,this.getSurveyHierarchy(d),d,this.clientSurveyResults.get(d)),this.surveyEventReferenceDismissedMap.get(d).unsubscribe(),this.unsubscribeFromLogListener(d)}surveyEventListenerTimeout(d){this.logger.info("Survey has been timed-out; triggerType: ",d),this.sendUserSurveyTelemetry(ge._G.DismissTimeout,this.getSurveyHierarchy(d),d,this.clientSurveyResults.get(d)),(d===en.TriggerType.PostGame||d===en.TriggerType.Feedback)&&this.customLocationService.navigateToPreviousRoute(bi.Survey),this.surveyEventReferenceTimeoutMap.get(d).unsubscribe(),this.unsubscribeFromLogListener(d)}surveyEventListenerCloseDialog(d){this.logger.info("User closed dialog from Survey; triggerType: ",d);const R=this.clientSurveyResults.get(d);this.resetClientSurveyResult(R),d!==en.TriggerType.Feedback&&d!==en.TriggerType.PostGame&&this.customLocationService.navigateToPreviousRoute(bi.Survey),[en.TriggerType.Feedback,en.TriggerType.PostGame].includes(d)&&this.sendUserSurveyTelemetry(ge._G.DismissManual,this.getSurveyHierarchy(d),d,R),this.surveyEventReferenceCloseDialogMap.get(d).unsubscribe(),this.unsubscribeFromLogListener(d)}surveyEventListenerErrored(d){this.logger.info("Survey has error");const R=this.clientSurveyResults.get(d);this.resetClientSurveyResult(R),this.surveyEventReferenceErrorMap.get(d).unsubscribe(),this.unsubscribeFromLogListener(d)}surveyEventListenerSubmissionErrored(d){this.logger.info("Survey has submission error");const R=this.clientSurveyResults.get(d);this.resetClientSurveyResult(R),this.surveyEventReferenceSubmissionErrorMap.get(d).unsubscribe(),this.unsubscribeFromLogListener(d)}sendUserSurveyTelemetry(d,R,ce,_e){if(this.logger.info("Sending survey telemetry: ",d),_e){const Le=new ge.QqN({hierarchy:R,status:d,surveyId:_e.surveyId,durationMs:this.getUserActionDuration(d),surveyTrigger:ge.pjt[ce.toString()]});this.telemetryService.push(Le,null,{immediateRequest:!0}),(d===ge._G.Completed||d===ge._G.DismissManual||d===ge._G.DismissTimeout||d===ge._G.Deferred||d===ge._G.DismissManualPostMinimize)&&this.resetClientSurveyResult(_e)}}surveyMinimize(d){const R=this.clientSurveyResults.get(d);R.surveyVisited=!0,this.sendUserSurveyTelemetry(ge._G.Minimized,this.getSurveyHierarchy(d),d,R),this.participatedInSurvey=!1,this.customLocationService.navigateToPreviousRoute(bi.Survey),this.router.events.pipe((0,pt.h)(ce=>ce instanceof si.m2),(0,ct.P)(),(0,St.b)(()=>{this.surveyMinimized$.next(d)})).subscribe()}getMinimizedSurvey$(){return this.surveyMinimized$.asObservable().pipe((0,Se.zg)(d=>(0,N.of)(this.clientSurveyResults.get(d))))}getUserInfoFromUser(d){return{userId:(null==d?void 0:d.userId)||"",idpId:(null==d?void 0:d.idpId)||""}}getSurveyFeaturesEnablement(d,R){const ce=[];return R.forEach((_e,Le)=>{const Re=this.experienceControlWrapperService.getCloudVariable(_e,{variant:this.appConfig.build.variant},void 0,fi.Z4.GxTargetGetCloudVariable,fi.Qu.GxTargetGetSurveyFeature,(0,N.of)(d)).pipe((0,xt.K)(Xe=>(this.logger.info("FeatureEnablement error: ",Xe),(0,N.of)(null))));ce.push(Re)}),(0,yn.$R)(...ce)}startGetSurveyClientSpan(d=!1){const R=this.sdk.startSpan(un.j1.ClientGetSurvey);return R&&R.addTags({[en.SurveySdkSpanTagNames.ReadOnly]:d}),R}startDismissSurveyClientSpan(d){const R=this.sdk.startSpan(un.j1.ClientDismissSurvey);return R&&R.addTags({[en.SurveySdkSpanTagNames.SurveyId]:d}),R}initGlobalTagsForOpenTracing(d,R,ce,_e,Le){const Re={[un.NI.ServiceVersion]:this.appConfig.build.version,[un.NI.ServiceType]:un.sk.Pc_A7,[un.NI.SpanKind]:un.$Q.Client,[un.NI.AppName]:(0,ve.wI)(this.router.url)?ve.lW.Streamer:ve.lW.Mall,[un.NI.DeviceId]:d,[un.NI.ClientOs]:R.Platform,[un.NI.ClientOsName]:R.OSName,[un.NI.ClientOsVersion]:R.OSVersion,[un.NI.CountryCode]:ce,[en.SurveySdkSpanTagNames.ClientVariant]:this.surveySdkClientConfig.clientVariant,[en.SurveySdkSpanTagNames.ClientVersion]:this.getClientVersionRevision(this.surveySdkClientConfig.clientVersion),[en.SurveySdkSpanTagNames.Environment]:this.surveySdkClientConfig.env,[en.SurveySdkSpanTagNames.UserId]:_e,[en.SurveySdkSpanTagNames.IdpId]:Le};this.sdk.updateGlobalTags(Re)}getClientVersionRevision(d){return 4===d.split(".").length?d.substring(0,d.lastIndexOf(".")+1).concat("x"):d}resetClientSurveyResult(d){this.logger.info("Resetting client survey result"),this.participatedInSurvey=!1,d&&this.clientSurveyResults.delete(d.triggerType)}getUserActionDuration(d){return d===ge._G.Notify?0:Date.now()-this.surveyActionDuration}sendSurveyHttpSuccessTelemetry(d,R,ce){const _e=new ge.wEN({sourceComponent:this.telemetryUtilService.getClientType(),originalService:ge.v6v.GxTarget,serviceUseCase:R,serviceSubUseCase:ce,url:d.url||"",httpStatus:d.httpStatus||200,durationMs:Math.round(d.durationMs)||0,destinationIp:"",responseData:"",xRequestId:d.xRequestId||"",retryCount:0,wasSWCacheBypassed:ge.wye.UNDEFINED});this.telemetryService.push(_e)}sendSurveyFailureTelemetry(d,R,ce){var _e;const Le=new ge.MjV({sourceComponent:this.telemetryUtilService.getClientType(),originalService:ge.v6v.GxTarget,serviceUseCase:R,serviceSubUseCase:ce,url:(null===(_e=null==d?void 0:d.config)||void 0===_e?void 0:_e.url)||"",networkErrorCode:String(d&&d.response?d.response.status:0),destinationIp:"",xRequestId:d&&d.xRequestId?d.xRequestId:"",retryCount:0,wasSWCacheBypassed:ge.wye.UNDEFINED});this.telemetryService.push(Le)}getCommonParams(d){const R=f.ng.isBrowserPlatform();return{deviceOS:d,deviceType:this.systemInfo.DeviceType,deviceMake:this.systemInfo.VendorName||a.wy.Undefined,deviceModel:this.systemInfo.SystemName||a.wy.Undefined,deviceOSVersion:this.systemInfo.OSVersion,clientType:R?Ts.CommonClientType.Browser:Ts.CommonClientType.Native,browserType:this.systemInfo.BrowserName}}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(Kt.No),o.LFG(f.Ob),o.LFG(Bi),o.LFG(a.y0),o.LFG(f.ed),o.LFG(vo),o.LFG(si.F0),o.LFG(Za.OA),o.LFG(ge.wU6),o.LFG(ts),o.LFG(ve.un),o.LFG(f.OL),o.LFG(ci.fI),o.LFG(Xn.r),o.LFG(Gn.BH),o.LFG(_n.VK),o.LFG(fi.Q6),o.LFG(it.s),o.LFG(c.Ll),o.LFG(f._V),o.LFG(bs.O),o.LFG(Hn.uC),o.LFG(Bt))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var ns=e(11635),za=e(80388),As=e(91992),Ka=e(88244),Ls=e(29845),Rs=e(33353),is=e(79911),pn=e(20220);class Ds{constructor(Oe,d,R,ce,_e,Le=[],Re){this.logger=Oe,this.appConfig=d,this.endpointFactory=R,this.idmService=ce,this.distributedtracingUtilService=_e,this.enabledGamesList=Le,this.digitalStoreMetadata=Re,this.refresh=new oe.xQ,this.enabled=!0,this.resetRefreshTimer()}get digitalStoreInfo(){return this.digitalStoreMetadata}get providerId(){return this.type.toUpperCase()}signalRefresh(){this.refresh.next(!0)}refreshRequired(){return this.refresh.asObservable()}resetRefreshTimer(){void 0!==this.pollingTimerId&&clearInterval(this.pollingTimerId),this.pollingTimerId=window.setInterval(this.signalRefresh.bind(this),828e5)}get isEnabled(){return this.enabled}getExpirationFromNow(Oe){if("number"!=typeof Oe||Oe===pn.DG)return null;const d=new Date,R=new Date(0);return R.setTime(d.getTime()+Oe),R}get platform(){return this.type.toUpperCase()}get gamesList(){return this.enabledGamesList}}class fr extends Ds{constructor(Oe,d,R,ce,_e,Le=[],Re){var Xe,mt;super(Oe,d,R,ce,_e,Le,Re),this.logger=Oe,this.appConfig=d,this.endpointFactory=R,this.idmService=ce,this.distributedtracingUtilService=_e,this.enabledGamesList=Le,this.digitalStoreMetadata=Re;const Gt={timeout:null!==(Xe=d.accountLinking.defaultTimeout)&&void 0!==Xe?Xe:15e3,timeBetweenRetries:0,maxRetries:null!==(mt=d.accountLinking.defaultRetries)&&void 0!==mt?mt:1};this.alsEndpoint=this.endpointFactory.createEndpoint({config:Gt}),(null==Le?void 0:Le.length)>0&&(this.enabled=!1)}get digitalStoreInfo(){return this.digitalStoreMetadata}get accountType(){return pn.ZC.AccountLinking}buildApiUrl(Oe){var d;return(null===(d=this.appConfig.accountLinking)||void 0===d?void 0:d.server)+"/v1/"+Oe}getLoginUrl(Oe,d){let R=this.appConfig.accountLinking.redirectUrl;return this.appConfig.accountLinking.redirectUrlIsRelative&&(R=window.location.origin+R),Oe&&Oe>0&&(R=R.replace("{portnumber}",Oe.toString())),this.idmService.getAuthToken(!1,d).pipe((0,Se.zg)(ce=>{if(!ce)return(0,N.of)("");const _e=this.createRequestOptions({},{platform:this.providerId,redirect_uri:R,client_id:this.appConfig.accountLinking.clientId},ce,ge.f$p.GetOAuthURL),Le=this.alsEndpoint.get(this.buildApiUrl("login_url"),_e);return this.distributedtracingUtilService.handleHttpEndpointSpan(Le,_e,un.j1.AlsGetLoginUrl,d).pipe((0,Je.U)(Re=>Re.login_url))}))}postLoginUrl(Oe){return this.idmService.getAuthToken(!1,Oe).pipe((0,Se.zg)(d=>{if(!d)return(0,q._)("Failed to get auth token");const R=this.createRequestOptions({platform:this.providerId,client_id:this.appConfig.accountLinking.clientId},{},d,ge.f$p.GetOAuthURL),ce=this.alsEndpoint.post(this.buildApiUrl("login_url"),R);return this.distributedtracingUtilService.handleHttpEndpointSpan(ce,R,un.j1.AlsPostLoginUrl,Oe)}))}postToken(Oe,d){const R=this.createRequestOptions({client_id:this.appConfig.accountLinking.clientId,device_code:Oe},{},void 0,ge.f$p.Other),ce=this.alsEndpoint.post(this.buildApiUrl("token"),R);return this.distributedtracingUtilService.handleHttpEndpointSpan(ce,R,un.j1.AlsPostToken,d)}get redirectFinishedUrl(){return this.appConfig.accountLinking.redirectFinishedUrl}parseLoginResult(Oe){var d,R;if(null==Oe?void 0:Oe.platform)return this.logger.info(`Account Linking login successful for ${Oe.platform}.  Expires in ${Oe.expires_in}`),Oe;if(Oe){if(Oe.error)throw new Error(null!==(d=Oe.error_description)&&void 0!==d?d:Oe.error);const ce=new URL(Oe),_e={display_name:ce.searchParams.get("display_name"),expires_in:ce.searchParams.get("expires_in"),platform:ce.searchParams.get("platform"),error:ce.searchParams.get("error"),error_description:ce.searchParams.get("error_description")};if(_e.error)throw new Error(null!==(R=_e.error_description)&&void 0!==R?R:_e.error);return this.logger.info(`Account Linking login successful for ${_e.platform}.  Expires in ${_e.expires_in}`),_e}return this.logger.info("Account Linking login response invalid."),{}}parseUserData(Oe){var d;const R=new Date;let ce;return ce=(null==Oe?void 0:Oe.expires_in)&&parseInt(Oe.expires_in,10)!==pn.DG?this.getExpirationFromNow(1e3*parseInt(Oe.expires_in,10)):null,Oe?(this.logger.info(`Account Linking status read successful for ${this.providerId}.  Expires ${null===ce?"never":ce}`),{platform:this.providerId,personaName:null!==(d=Oe.display_name)&&void 0!==d?d:"",platformSyncStatus:pn.hG.SUCCESS,syncDate:R.toISOString(),timestamp:R,expires:ce}):(this.logger.info("Account Linking sync response invalid."),{})}sync(Oe,d){const R=this.createRequestOptions({},{},Oe,ge.f$p.LinkAccount),ce=this.alsEndpoint.get(this.buildApiUrl(`linking/${this.providerId}`),R);return this.distributedtracingUtilService.handleHttpEndpointSpan(ce,R,un.j1.AlsSync,d).pipe((0,Je.U)(_e=>this.parseUserData(_e)),(0,xt.K)(_e=>404!==_e.status?(this.logger.error(`error syncing ${this.type} account provider: `,_e),(0,N.of)({platform:this.providerId,platformSyncStatus:pn.hG.UNABLE_TO_CONNECT})):(0,N.of)({platform:this.providerId,platformSyncStatus:pn.hG.UNKNOWN})))}disconnect(Oe,d){const R=this.createRequestOptions({},{},Oe,ge.f$p.UnlinkAccount),ce=this.alsEndpoint.delete(this.buildApiUrl(`linking/${this.providerId}`),R);return this.distributedtracingUtilService.handleHttpEndpointSpan(ce,R,un.j1.AlsDisconnect,d).pipe((0,Tt.h)(!0),(0,xt.K)(_e=>(this.logger.error(`error disconnecting from ${this.type} account provider: `,_e),(0,N.of)(!0))))}createHeader(Oe){return{[is.n0.authorization]:`Bearer ${Oe.token}`}}createRequestOptions(Oe={},d={},R,ce){return{headers:R?this.createHeader(R):{},params:d,body:Oe,reportRequestData:{reportSuccessTelemetry:"true",originalService:ge.v6v.ALS,serviceUseCase:ce}}}enable(Oe){Oe&&this.enabledGamesList.includes(Oe)?this.enabled=!0:!Oe&&this.enabledGamesList.length>0&&(this.enabled=!1)}}class Ns extends Ds{constructor(Oe,d,R,ce,_e,Le=[],Re){var Xe;super(Oe,d,R,ce,_e,Le,Re),this.logger=Oe,this.appConfig=d,this.endpointFactory=R,this.idmService=ce,this.distributedtracingUtilService=_e,this.enabledGamesList=Le,this.digitalStoreMetadata=Re,this.enabled=!(null===(Xe=d.featureEnablement)||void 0===Xe?void 0:Xe.openLinksOffDevice)}get accountType(){return pn.ZC.OwnershipSync}buildApiUrl(Oe){var d;return(null===(d=this.appConfig.ownership)||void 0===d?void 0:d.server)+"/v1/"+Oe}postLoginUrl(Oe){return(0,N.of)({})}postToken(Oe,d){return(0,N.of)({})}get redirectFinishedUrl(){return this.appConfig.ownership.redirectFinishedUrl}parseLoginResult(Oe){let d=null==Oe?void 0:Oe["openid.claimed_id"];if(!d){const ce=new RegExp("claimed_id=[^&]*").exec(Oe);null!==ce&&(d=ce[0].split("="))}if(d){const R=decodeURIComponent(d);return R.substr(R.lastIndexOf("/")+1)}return""}parseUserData(Oe){return Oe}sync(Oe,d){return(0,N.of)({})}disconnect(Oe,d){return(0,N.of)(!0)}}class os extends Ns{constructor(Oe,d,R,ce,_e,Le=[],Re){super(Oe,d,R,ce,_e,Le,Re),this.logger=Oe,this.appConfig=d,this.endpointFactory=R,this.idmService=ce,this.distributedtracingUtilService=_e,this.enabledGamesList=Le,this.digitalStoreMetadata=Re}get type(){return pn.iD.Steam}getLoginUrl(Oe,d){var R;let ce=this.appConfig.ownership.redirectUrl;this.appConfig.ownership.redirectUrlIsRelative&&(ce=window.location.origin+ce),Oe&&Oe>0&&(ce=ce.replace("{portnumber}",Oe.toString()));const _e=(null===(R=this.appConfig.ownership)||void 0===R?void 0:R.redirectRealm)||ce;return(0,N.of)("https://steamcommunity.com/openid/login?openid.mode="+encodeURIComponent("checkid_setup")+"&openid.ns="+encodeURIComponent("http://specs.openid.net/auth/2.0")+"&openid.ns.sreg="+encodeURIComponent("http://openid.net/extensions/sreg/1.1")+"&openid.sreg.optional="+encodeURIComponent("nickname,email,fullname,dob,gender,postcode,country,language,timezone")+"&openid.ns.ax="+encodeURIComponent("http://openid.net/srv/ax/1.0")+"&openid.ax.mode="+encodeURIComponent("fetch_request")+"&openid.ax.type.fullname="+encodeURIComponent("http://axschema.org/namePerson")+"&openid.ax.type.firstname="+encodeURIComponent("http://axschema.org/namePerson/first")+"&openid.ax.type.lastname="+encodeURIComponent("http://axschema.org/namePerson/last")+"&openid.ax.type.email="+encodeURIComponent("http://axschema.org/contact/email")+"&openid.ax.required="+encodeURIComponent("fullname,firstname,lastname,email")+"&openid.identity="+encodeURIComponent("http://specs.openid.net/auth/2.0/identifier_select")+"&openid.claimed_id="+encodeURIComponent("http://specs.openid.net/auth/2.0/identifier_select")+"&openid.return_to="+encodeURIComponent(ce)+"&openid.realm="+encodeURIComponent(_e))}}class vr extends fr{constructor(Oe,d,R,ce,_e,Le,Re=[],Xe){super(d,R,ce,_e,Le,Re,Xe),this.type=Oe,this.logger=d,this.appConfig=R,this.endpointFactory=ce,this.idmService=_e,this.distributedtracingUtilService=Le,this.enabledGamesList=Re,this.digitalStoreMetadata=Xe}}const ks="syncedPlatforms";function hi(J){return null==J?void 0:J.toLowerCase()}let ja=(()=>{class J{constructor(d,R,ce,_e,Le,Re,Xe,mt,Gt,Qt,an,vn,Cn,kn,Zn,pi){var So,wi,Jo;this.bridgeService=R,this.appConfig=ce,this.idmService=_e,this.endpointFactory=Le,this.dbCacheService=Re,this.telemetryService=Xe,this.localeService=mt,this.pushNotificationService=Gt,this.distributedtracingUtilService=Qt,this.dialogService=an,this.lcarsService=vn,this.translateService=Cn,this.refreshUiService=kn,this.router=Zn,this.customLocationService=pi,this.usedCTA=!1,this.fromCTA=!1,this.errorAccountSettings=!1,this.errorCreateProfile=!1,this.viewExpiration=!1,this.shouldShowCTA=new Ai.X(this.shouldShowCTADefault),this.syncChanged=new oe.xQ,this.dataBlocks=new Map,this.ownershipDbCache=void 0,this.ownershipDbData=void 0,this.ownershipDbName="ownershipSyncService",this.accountLinkingDbCache=void 0,this.accountLinkingDbData=void 0,this.accountLinkingDbName="accountLinkingService",this.mobileMode=!1,this.isBrowserClient=!1,this.initialized=!1,this.accountLinkingEnabled=!1,this.accountProviders=new Map,this.waitForFirstAlState=new ii.t(1),this.waitForAlServerState=new ii.t(1),this.waitForGamesListData=new ii.t(1),this.alPushSub=null,this.pendingGamesListEnablement=null,this.launchCTA=new ii.t(1),this.updateKVStoreALS=new Ai.X(!0),this.updateKVStoreALS$=this.updateKVStoreALS.asObservable(),this.logger=d.getLogger("OwnershipSyncService"),this.isBrowserClient=f.ng.isBrowserPlatform(),this.mobileMode=!!(null===(wi=null===(So=this.appConfig)||void 0===So?void 0:So.featureEnablement)||void 0===wi?void 0:wi.mobileMode),this.viewExpiration=!0===(null===(Jo=this.appConfig.accountLinking)||void 0===Jo?void 0:Jo.showExpiration),this.listenKVStoreALSChange(),this.linkedAccountChangedNotification$=this.refreshUiService.enablePushNotificationFromPNS$.pipe((0,Ot.w)(as=>as?this.initLinkedAccountChangeNotification().pipe((0,As.B)()):(this.logger.info("Register NNS push notification for linked account changed"),this.pushNotificationService.registerPushNotification(ni.oW.LINKEDACCOUNT_CHANGE).pipe((0,As.B)()))))}get shouldShowCTADefault(){return!0}get isOwnershipSyncEnabled(){var d;return!0===(null===(d=this.appConfig.featureEnablement)||void 0===d?void 0:d.ownershipSync)}get waitForCloudVariables(){return this.waitForAlServerState.asObservable()}get waitForAccountLinkingAvailability(){return this.waitForFirstAlState.asObservable()}get waitForAllData(){return this.waitForGamesListData.asObservable()}get isAccountLinkingEnabled(){let d=!1;return this.accountProviders.forEach(R=>{R.accountType===pn.ZC.AccountLinking&&R.isEnabled&&(d=!0)}),this.accountLinkingEnabled&&d}initialize(){if(this.initialized)return;if(!this.isOwnershipSyncEnabled)return void this.shouldShowCTA.next(!1);const{defaultRetries:d=0,defaultTimeBetweenRetries:R=0,defaultTimeout:ce=15e3}=this.appConfig.nes,_e={maxRetries:d,timeout:ce,timeBetweenRetries:R};this.ownershipEndpoint=this.endpointFactory.createEndpoint({config:_e}),this.kvEndpoint=this.endpointFactory.createEndpoint({config:_e}),this.idmService.accountStatusChanged.subscribe(Le=>{var Re;this.logger.info("Account status changed, updating account linking data"),null===(Re=this.pendingGamesListEnablement)||void 0===Re||Re.unsubscribe(),this.cancelPendingCTA(),Le.isAuthenticated?(this.ownershipDbCache=this.dbCacheService.getOrCreateCachedGlobalItem(this.ownershipDbName,Le.userId),this.accountLinkingDbCache=this.dbCacheService.getOrCreateCachedGlobalItem(this.accountLinkingDbName,Le.userId),this.readDbValuesAtStartup().pipe((0,Se.zg)(()=>this.initializeAccountLinking()),(0,Se.zg)(()=>this.updateKVStoreALS$),(0,Se.zg)(()=>this.syncDataFromKV()),(0,Se.zg)(Xe=>(this.initExpirationCheck(),this.refreshUiService.enablePushNotificationFromPNS$.pipe((0,Ot.w)(mt=>mt?(0,N.of)(!1):this.initializeRefreshPoll().pipe((0,Ti.O)(!1))))))).subscribe(()=>{this.updateCallToAction(!0),this.initialized=!0},Xe=>{this.logger.error("Error in initialization of ALS/Ownership service",Xe)})):(this.ownershipDbCache=void 0,this.accountLinkingDbCache=void 0,this.dataBlocks.clear())})}initLinkedAccountChangeNotification(){return this.refreshUiService.linkedAccountRefresh$.pipe((0,Je.U)(d=>(this.logger.info("Refresh ALS triggered",null==d?void 0:d.source),null==d?void 0:d.metadata)))}listenKVStoreALSChange(){this.refreshUiService.kvStoreALSRefresh$.subscribe(d=>{this.logger.info("Refresh KVStore for ALS",null==d?void 0:d.source),this.updateKVStoreALS.next(!0)})}readDbValuesAtStartup(){return(0,An.D)([this.ownershipDbCache.sync_().pipe((0,Se.zg)(()=>(this.ownershipDbData=Object.assign(new pn.D1,this.ownershipDbCache.dbFormat),this.logger.info(`Ownership DB values read at startup - ${JSON.stringify(this.ownershipDbData)}`),(0,N.of)(!0))),(0,xt.K)(d=>(this.logger.info("Did not read ownership data from DB"),this.ownershipDbData=new pn.D1,(0,N.of)(!0)))),this.accountLinkingDbCache.sync_().pipe((0,Se.zg)(()=>{var d;return this.accountLinkingDbData=Object.assign(new pn.$N,this.accountLinkingDbCache.dbFormat),this.accountLinkingDbData.accounts=null!==(d=this.accountLinkingDbData.accounts)&&void 0!==d?d:[],this.logger.info(`AccountLinking DB values read at startup - ${JSON.stringify(this.accountLinkingDbData)}`),this.accountLinkingDbData.accounts.forEach(R=>{var ce;const _e=new Date(R.syncedAt),Le=R.expires?new Date(R.expires):null;if(Date.now()-_e.getTime()<=864e5&&(!Le||Le.getTime()-Date.now()>0)){this.logger.info("Storing cached account linking data");const Re={platform:R.providerName,personaName:null!==(ce=R.displayName)&&void 0!==ce?ce:"",platformSyncStatus:pn.hG.SUCCESS,syncDate:_e.toISOString(),timestamp:_e,expires:Le};this.dataBlocks.set(R.providerName,Re)}else this.logger.info("Discarding cached values because they are no longer valid")}),(0,N.of)(!0)}),(0,xt.K)(d=>(this.logger.info("Did not read AccountLinking data from DB"),this.accountLinkingDbData=new pn.$N,this.accountLinkingDbData.accounts=[],(0,N.of)(!0))))]).pipe((0,Je.U)(()=>!0))}initializeAccountLinking(){return this.accountLinkingEnabled=!1,this.appConfig.accountLinking?this.lcarsService.getStaticAppData().pipe((0,Ge.q)(1),(0,Je.U)(d=>this.processLcarsAccountLinkingResponse(this.appConfig.accountLinking.accounts?this.appConfig.accountLinking.accounts:d.appStoreDefinitions)),(0,St.b)(()=>this.waitForAlServerState.next(!0)),(0,xt.K)(d=>(this.logger.error("Failure querying static app data from LCARS: ",d),this.waitForAlServerState.next(!1),(0,N.of)(!1)))):(this.waitForAlServerState.next(!1),(0,N.of)(this.accountLinkingEnabled))}processLcarsAccountLinkingResponse(d){if(null==d?void 0:d.length){let R=this.accountLinkingEnabled;return d.filter(ce=>ce.store!==pn.iD.Unknown&&ce.store!==pn.iD.None).forEach(ce=>{const _e=ce.accountLinkingMetadata,Le=hi(ce.store),Re=this.accountProviders.get(Le);if(Le===pn.iD.Steam)this.accountProviders.set(pn.iD.Steam,new os(this.logger,this.appConfig,this.endpointFactory,this.idmService,this.distributedtracingUtilService,[],ce));else if(!0===_e.isSupported){R=!0;const Xe=_e.supportedVariantIds||[];(!(null==Re?void 0:Re.gamesList)||!Xe.length||Re.gamesList.length!==Xe.length||!Re.gamesList.every((mt,Gt)=>mt===Xe[Gt]))&&(this.logger.info("Setting up als provider",Le),this.accountProviders.set(Le,new vr(hi(Le),this.logger,this.appConfig,this.endpointFactory,this.idmService,this.distributedtracingUtilService,Xe,ce)),this.syncChanged.next(Le))}else Re&&(this.logger.info("Removing provider from list",Le),this.accountProviders.delete(Le),this.removeAlProviderCacheEntry(Le),this.syncChanged.next(Le),this.updateCallToAction(!0))}),Array.from(this.accountProviders.values()).some(ce=>this.supportsAccountLinking(ce))||(R=!1),!this.accountLinkingEnabled&&R?(this.registerAccountLinkingServiceNotifications(),this.syncAccountLinking().pipe((0,St.b)(()=>this.checkAccountExpiration()),(0,St.b)(()=>this.updateCallToAction(!0)),(0,Ge.q)(1)).subscribe(()=>{this.waitForFirstAlState.next(!0)})):this.accountLinkingEnabled&&!R&&this.alPushSub?(this.waitForFirstAlState.next(!0),this.alPushSub.unsubscribe()):this.waitForFirstAlState.next(!0),this.accountLinkingEnabled=R,this.ownershipDbData&&(this.ownershipDbData.numProviders=this.accountProviders.size,this.updateOwnershipCache().subscribe()),this.accountLinkingEnabled}}initializeRefreshPoll(){const d=[];return this.accountProviders.forEach(R=>{const ce=R.refreshRequired().pipe((0,Ot.w)(()=>{if(R.isEnabled){const _e=this.getAccountState(R.type);if((null==_e?void 0:_e.loggedIn)&&this.supportsAccountLinking(R))return this.logger.info(`Account Linking refresh poll for ${R.type}`),this.syncAccountLinking(R).pipe((0,Ge.q)(1))}return(0,N.of)(!1)}));d.push(ce)}),(0,be.aj)(d)}initExpirationCheck(){(0,dt.F)(36e5).pipe((0,pt.h)(()=>this.accountLinkingEnabled)).subscribe(()=>{this.checkAccountExpiration()})}checkAccountExpiration(){this.getAccountStates().forEach(R=>{if(R.enabled&&R.accountType===pn.ZC.AccountLinking){const ce=R.getExpirationStatus();ce!==pn.hB.NotExpired&&(this.logger.info(`Account Linking expired state ${ce} for ${R.providerType}`),this.syncChanged.next(this.getOwnershipProviderType(R.accountType)))}})}registerAccountLinkingServiceNotifications(){this.alPushSub=this.linkedAccountChangedNotification$.pipe((0,Se.zg)(d=>this.updateLinkedAccount(d))).subscribe()}updateLinkedAccount(d){if(d){if(d.accountLinkedInfo){const R=this.gameStoreToProviderType(d.accountLinkedInfo.account_type);if(!R)return this.logger.error(`Unknown account_type ${d.accountLinkedInfo.account_type} in notification`),(0,N.of)(!1);const ce=this.getAccountState(R),_e=this.accountProviders.get(R);if(ce.loggedIn)if(this.refreshUiService.setContentExpiryInfo(xi.Gx.LinkedAccountChanged),d.accountLinkedInfo.linked){const Le=this.dataBlocks.get(R),Re=d.accountLinkedInfo.expires_at;Le.expires=Re&&Re!==pn.DG?_e.getExpirationFromNow(1e3*Re):null,this.updateBlock(R,Le,!1,!1,!1)}else this.dataBlocks.set(R,{}),this.removeAlProviderCacheEntry(R),this.syncChanged.next(R),this.updateCallToAction(!1,R);else if(d.accountLinkedInfo.linked)return this.syncAccountLinking(_e);return(0,N.of)(!0)}return this.logger.error("Missing accountLinkedInfo field in notification",d),(0,N.of)(!1)}return this.logger.info("Refresh ALS for conditional triggers"),this.syncAccountLinking().pipe((0,St.b)(()=>this.checkAccountExpiration()),(0,St.b)(()=>this.updateCallToAction(!0)),(0,Ge.q)(1))}gameStoreToProviderType(d){switch(d){case pn.nO.EPIC:return pn.iD.Epic;case pn.nO.STEAM:return pn.iD.Steam;case pn.nO.GOG:return pn.iD.Gog;case pn.nO.UPLAY:return pn.iD.Uplay;default:return pn.iD.Unknown}}syncAccounts(d){const R=[];if(this.accountProviders.forEach(ce=>{ce.accountType===d&&R.push(ce)}),R.length>0){const ce=R.map(_e=>this.sync(_e.type));return(0,An.D)(ce).pipe((0,Je.U)(_e=>_e.every(Le=>Le)))}return(0,N.of)(!1)}syncAccountLinking(d,R=!1,ce){return this.logger.info(`Syncing Account Linking data for ${null==d?void 0:d.type}`),d&&!this.supportsAccountLinking(d)?(0,N.of)(!1):this.idmService.getAuthToken(R,ce).pipe((0,Se.zg)(_e=>{const Le={};return _e&&(d?Le[hi(d.type)]=d.sync(_e,ce):this.accountProviders.forEach(Re=>{this.supportsAccountLinking(Re)&&(this.logger.info(`syncing account linking data for ${Re.platform}`),Le[hi(Re.type)]=Re.sync(_e,ce))})),(0,An.D)(Le)}),(0,Se.zg)(_e=>{const Le={};return Object.keys(_e).forEach(Re=>{const Xe=this.dataBlocks.get(Re);Le[Re]=Xe&&((null==Xe?void 0:Xe.expires)||null)!==(_e[Re].expires||null)?this.resetNotifications().pipe((0,Tt.h)(_e[Re])):(0,N.of)(_e[Re])}),(0,An.D)(Le)}),(0,Je.U)(_e=>(Object.keys(_e).forEach(Le=>{_e[Le].platformSyncStatus===pn.hG.UNABLE_TO_CONNECT&&this.dataBlocks.has(hi(Le))?this.logger.info(`Skipping data block update for ${Le} since AL service was unavailable`):(this.refreshUiService.setContentExpiryInfo(xi.Gx.LinkedAccountChanged),this.updateBlock(Le,_e[Le],!1,!1))}),!0)),(0,xt.K)(_e=>(this.logger.error("Error syncing account linking providers: ",_e),(0,N.of)(!1))))}enableAccountLinking(d){this.logger.info("Setting up accountLinking from games list - waiting for AL server state"),this.pendingGamesListEnablement=this.waitForAlServerState.pipe((0,Ge.q)(1)).subscribe(()=>{this.logger.info("AL server state resolved, continuing to enable from games list"),this.pendingGamesListEnablement=null,this.accountProviders.forEach(R=>{var ce,_e;if(R.accountType===pn.ZC.AccountLinking){const Le=R;(null===(ce=Le.gamesList)||void 0===ce?void 0:ce.some(Xe=>!!d.includes(Xe.toString())&&(Le.enable(Xe),this.logger.info(`Enabling account linking for ${Le.type} because game ${Xe} was found in the whitelist`),this.syncChanged.next(Le.type),!0)))||(Le.enable(null),(null===(_e=Le.gamesList)||void 0===_e?void 0:_e.length)>0&&(this.logger.info("Shutting off account linking for "+Le.type),this.syncChanged.next(Le.type)))}}),this.waitForGamesListData.next(!0),this.updateCallToAction(!0)})}waitForAlOnMobile(){return this.mobileMode?this.waitForFirstAlState.asObservable():(0,N.of)(!0)}getAccountLinkingStateForGame(d="",R){const ce=R.toString();return this.waitForAlOnMobile().pipe((0,Ge.q)(1),(0,Je.U)(()=>{var _e;this.logger.info(`Checking account linking availability for game ${R} on ${d}`),this.initialized||this.logger.warn("Attempting to check against the list of account-linking availability for game before initialization is complete. Cloud variables may not have been loaded.");const Le=this.accountProviders.get(hi(d));if(!Le||!Le.isEnabled||Le.accountType!==pn.ZC.AccountLinking)return this.logger.info(`Account linking not available for ${d}`),{isEnabled:!1,isRequired:!1};if(!(null===(_e=Le.gamesList)||void 0===_e?void 0:_e.length)||Le.gamesList.includes(ce)){const Xe=this.getAccountState(hi(d));return this.logger.info(`Account linking is available for ${d} and for the game, ${R}`),{isEnabled:!0,isRequired:!!(null==Xe?void 0:Xe.isAccountLinkingRequired)}}return this.logger.info(`Account linking is not available for ${d} and for the game, ${R}`),{isEnabled:!1,isRequired:!1}}))}isAccountLinkEnabledForGame(d="",R){const ce=R.toString();return this.waitForAlOnMobile().pipe((0,Ge.q)(1),(0,Je.U)(()=>{var _e;this.logger.info(`Checking account linking enablement for game ${R} on ${d}`),this.initialized||this.logger.warn("Attempting to check against the list of account-linking enabled games before initialization is complete. Cloud variables may not have been loaded.");const Le=this.accountProviders.get(hi(d));if(!Le||!Le.isEnabled||Le.accountType!==pn.ZC.AccountLinking)return this.logger.info(`Account linking not provided for ${d}`),!1;if(!(null===(_e=Le.gamesList)||void 0===_e?void 0:_e.length)||Le.gamesList.includes(ce)){const Xe=this.getAccountState(hi(d));return this.logger.info("Account linking was enabled for the game, "+(Xe.isSynced&&!Xe.isExpired?"and account was linked and not expired":"but account was not linked or expired")),Xe.isSynced&&!Xe.isExpired}return this.logger.info(`Account linking is not available for ${d} and the game, ${ce}`),!1}))}isAccountLinked(d=""){if(this.isAccountLinkingAvailable(d)){const R=this.getAccountState(hi(d));return(null==R?void 0:R.isSynced)&&!(null==R?void 0:R.isExpired)}return!1}isAccountLinkingAvailable(d=""){const R=this.accountProviders.get(hi(d));return!(!R||R.accountType!==pn.ZC.AccountLinking)&&R.isEnabled}isOwnershipSyncAvailable(d){const R=this.accountProviders.get(hi(d));return void 0!==R&&R.accountType===pn.ZC.OwnershipSync}getAccountType(d){const R=this.accountProviders.get(d);return null==R?void 0:R.accountType}getOwnershipProviderType(d){this.accountProviders.forEach(R=>{if(R.accountType===d)return R.type})}supportsOwnershipSync(d){return d instanceof Ns}supportsAccountLinking(d){return d instanceof fr}connect(d,R=!1){var ce;if(!this.initialized)return(0,N.of)(!1);this.logger.info(`Connecting account "${d}"`);const _e=this.accountProviders.get(d);if(_e){let Le=null;return _e instanceof fr&&(Le=this.distributedtracingUtilService.startSpan(un.j1.AlsUserLogin)),((null===(ce=this.appConfig.featureEnablement)||void 0===ce?void 0:ce.openLinksOffDevice)?this.doLoginOffDevice(_e,Le):this.doLogin(_e,d,Le)).pipe((0,St.b)(()=>this.updateCallToAction(!1,d)),(0,xt.K)(mt=>(this.logger.error("Error logging in: ",mt),(0,N.of)(!1))),(0,Se.zg)(mt=>{const Gt=_e instanceof os?this.translateService.instant("ownership.providers.steam.name"):_e.digitalStoreInfo.accountLinkingMetadata.label;return mt?this.dialogService.openAccountLinkingSuccessDialog(Gt,mt,R):(this.syncChanged.next(d),this.dialogService.openAccountLinkingErrorDialog(Gt,mt))}),(0,Ye.x)(()=>{Le&&this.distributedtracingUtilService.closeSpan(Le)}))}return(0,N.of)(!1)}disconnect(d,R=!1,ce){if(!this.initialized)return(0,N.of)(!1);this.logger.info(`Disconnecting account "${d}"`);const _e=this.accountProviders.get(d);return this.idmService.getAuthToken(R,ce).pipe((0,Se.zg)(Le=>{if(!Le)return(0,N.of)(!1);if(this.supportsOwnershipSync(_e)){const Re=this.createRequestOptions({},this.createParams(d),Le),Xe=this.ownershipEndpoint.delete(_e.buildApiUrl("connect"),Re);return this.distributedtracingUtilService.handleHttpEndpointSpan(Xe,Re,un.j1.OwnershipDisconnect,ce)}return this.resetNotifications().pipe((0,Ka.j)(_e.disconnect(Le)))}),(0,xt.K)(Le=>this.idmService.handleAuthError(Le,R,this.disconnect.bind(this),d)),(0,xt.K)(()=>(0,N.of)(!0)),(0,Se.zg)(()=>(this.accountProviders.get(d).resetRefreshTimer(),this.sendOwnershipDisconnectTelemetry(this.dataBlocks.get(d),d),this.dataBlocks.set(d,{}),this.supportsAccountLinking(_e)&&(this.refreshUiService.setContentExpiryInfo(xi.Gx.LinkedAccountChanged),this.removeAlProviderCacheEntry(d)),this.syncChanged.next(d),this.updateCallToAction(!1,d),(0,N.of)(!0))))}sync(d,R="",ce=!1,_e){if(!this.initialized)return(0,N.of)(!1);this.logger.info(`Syncing account "${d}"`);const Le=this.accountProviders.get(d);return Le.accountType===pn.ZC.AccountLinking?this.syncAccountLinking(Le,ce,_e):R?this.idmService.getAuthToken(ce,_e).pipe((0,Se.zg)(Re=>{if(!Re)throw!1;const Xe=Object.assign(Object.assign({},this.createParams(d)),{platformUserId:R}),mt=this.createRequestOptions(Xe,{},Re),Gt=this.ownershipEndpoint.post(Le.buildApiUrl("connect"),mt);return this.distributedtracingUtilService.handleHttpEndpointSpan(Gt,mt,un.j1.OwnershipConnect,_e)}),(0,xt.K)(Re=>this.idmService.handleAuthError(Re,ce,this.sync.bind(this),d,R)),(0,xt.K)(Re=>{this.logger.error("error during ownership sync: ",Re);const Xe=this.createErrorBlock(d);return this.sendOwnershipSyncTelemetry(Xe,!1),(0,N.of)(Xe)}),(0,Je.U)(Re=>Re?this.updateBlock(d,Re,!0,!1):(this.sendOwnershipSyncTelemetry(this.createErrorBlock(d),!1),!1)),(0,St.b)(()=>this.updateCallToAction(!1,d))):this.idmService.getAuthToken(ce,_e).pipe((0,Se.zg)(Re=>{if(!Re)throw!1;const Xe=this.createRequestOptions({},this.createParams(d),Re),mt=this.ownershipEndpoint.get(Le.buildApiUrl("sync"),Xe);return this.distributedtracingUtilService.handleHttpEndpointSpan(mt,Xe,un.j1.OwnershipSync,_e)}),(0,xt.K)(Re=>this.idmService.handleAuthError(Re,ce,this.sync.bind(this),d,R)),(0,xt.K)(Re=>{this.logger.error("error during ownership sync: ",Re);const Xe=this.createErrorBlock(d);return this.sendOwnershipSyncTelemetry(Xe,!0),(0,N.of)(Xe)}),(0,Je.U)(Re=>Re?(this.updateBlock(d,Re,!0,!0),this.errorAccountSettings=!1,this.errorCreateProfile=!1,!0):(this.sendOwnershipSyncTelemetry(this.dataBlocks.get(d),!0),!1)),(0,St.b)(()=>this.updateCallToAction(!1,d)))}accountsUpdated(){return this.syncChanged.asObservable()}getEnabledOwnershipTypes(){const d=[];return this.accountProviders.forEach(R=>{R.isEnabled&&d.push(R.type)}),d.sort(),d}getEnabledAccountProviders(){const d=[];return this.accountProviders.forEach(R=>{R.isEnabled&&d.push(R)}),d}convertDataBlockToProviderInfo(d){var R,ce,_e,Le,Re;const Xe=this.accountProviders.get(d);if(!Xe)return;const mt=this.dataBlocks.get(d);let Gt;return(null===(R=this.appConfig.accountLinking)||void 0===R?void 0:R.expirationDate)?(Gt=new Date(null===(ce=this.appConfig.accountLinking)||void 0===ce?void 0:ce.expirationDate),NaN===Gt.getTime()&&(Gt=null)):(Gt=null==mt?void 0:mt.expires,(!Gt||parseInt(Gt,10)===pn.DG)&&(Gt=null)),new pn.vw(d,!!(null==mt?void 0:mt.personaName)||(null==mt?void 0:mt.platformSyncStatus)===pn.hG.SUCCESS,null==mt?void 0:mt.personaName,null==mt?void 0:mt.platformUserId,Xe.accountType,null==mt?void 0:mt.platformSyncStatus,null==mt?void 0:mt.timestamp,Gt,null==mt?void 0:mt.totalNumberOfGfnSupportedGames,null==mt?void 0:mt.totalNumberOfGames,new pn.Wx((null===(_e=this.appConfig.accountLinking)||void 0===_e?void 0:_e.expiringNow)?1e3*this.appConfig.accountLinking.expiringNow:void 0,(null===(Le=this.appConfig.accountLinking)||void 0===Le?void 0:Le.expiringToday)?1e3*this.appConfig.accountLinking.expiringToday:void 0,(null===(Re=this.appConfig.accountLinking)||void 0===Re?void 0:Re.expiringSoon)?1e3*this.appConfig.accountLinking.expiringSoon:void 0),Xe.isEnabled,Xe instanceof fr?Xe:void 0)}getAccountState(d){return this.convertDataBlockToProviderInfo(hi(d))}getAccountStates(){const d=[];return this.accountProviders.forEach(R=>{d.push(this.convertDataBlockToProviderInfo(R.type))}),d}callToAction(){return this.shouldShowCTA.asObservable()}callToActionValue(){return this.shouldShowCTA.getValue()}showCallToAction(d){!this.ownershipDbData||!this.ownershipDbCache||(this.shouldShowCTA.next(d),this.ownershipDbData.shouldShowCTA=d,this.updateOwnershipCache().subscribe())}updateCallToAction(d,R){var ce;const _e=this.getAccountStates(),Le=_e.filter(Xe=>Xe.enabled).every(Xe=>(null==Xe?void 0:Xe.isSynced)&&!(null==Xe?void 0:Xe.isExpired));let Re=!Le;Re&&d&&void 0!==(null===(ce=this.ownershipDbData)||void 0===ce?void 0:ce.shouldShowCTA)&&(Re=this.ownershipDbData.shouldShowCTA),!Le&&(void 0===this.ownershipDbData.numProviders||this.ownershipDbData.numProviders>_e.length)&&(Re=!0),R&&this.accountProviders.get(R).accountType===pn.ZC.OwnershipSync&&this.dataBlocks.get(R).platformSyncStatus===pn.hG.PLATFORM_ACCESS_DENIED&&(Re=!0),this.shouldShowCTA.next(Re),d||(this.ownershipDbData.shouldShowCTA=Re,this.updateOwnershipCache().subscribe())}syncCTATileClicked(){this.fromCTA=!0,this.usedCTA=!0}onCancelCTA(){return this.launchCTA.asObservable()}cancelPendingCTA(){this.launchCTA.next(!0),this.launchCTA.complete(),this.launchCTA=new ii.t(1)}resetNotifications(){return this.setNotificationSettings({hideExpiresToday:!1,hideExpiresInDays:!1})}getNotificationSettings(){return(0,u.cloneDeep)(this.ownershipDbData.notificationSettings)}setNotificationSettings(d){return this.ownershipDbData&&this.ownershipDbCache?(Object.assign(this.ownershipDbData.notificationSettings,d),this.ownershipDbCache.dbFormat=this.ownershipDbData,this.updateOwnershipCache()):(0,N.of)(!0)}triggerAllChanged(){this.accountProviders.forEach(d=>{this.syncChanged.next(d.type)})}syncDataFromKV(d=!1){return this.idmService.getAuthToken(d).pipe((0,Se.zg)(R=>{var ce;if(!R)throw!1;const _e={headers:this.createHeader(R),reportRequestData:{originalService:"KVSTORE",serviceUseCase:"Get_Client_Data"}},Le=this.formatKeyValStoreUrl(`${null===(ce=this.appConfig.starfleet)||void 0===ce?void 0:ce.keyValueServiceUrl}/clientData`,[ks]);return this.kvEndpoint.get(Le,_e)}),(0,xt.K)(R=>this.idmService.handleAuthError(R,d,this.syncDataFromKV.bind(this))),(0,xt.K)(R=>(this.logger.error("error reading ownership sync data from kv store: ",R),(0,N.of)({}))),(0,Je.U)(R=>{var ce;this.refreshUiService.setContentExpiryInfo(xi.Gx.KVStoreAls);let _e=!1;return null===(ce=null==R?void 0:R.data)||void 0===ce||ce.forEach(Le=>{if(Le.key!==ks)return;let Re;try{Re=Le.value.map(Xe=>JSON.parse(Xe))}catch(Xe){return}null==Re||Re.forEach(Xe=>{const mt=hi(Xe.platform);void 0!==mt&&(this.logger.info("Ownership sync data read successful from kv store.",Xe),_e=!0,this.updateBlock(mt,Xe,!1,!1,!1))})}),_e||(this.logger.info("Empty ownership sync data read from kv store.",_e),this.accountProviders.forEach(Le=>{const Re=this.getAccountState(Le.type);Le.accountType===pn.ZC.OwnershipSync&&Re.loggedIn&&this.updateBlock(Le.type,{},!1,!1,!1)})),_e}))}updateBlock(d,R,ce,_e,Le=!0){const Re=this.accountProviders.get(d);return R.platform=R.platform?R.platform:Re.providerId,R.timestamp=R.syncDate?new Date(R.syncDate):new Date(0),Re instanceof vr&&(R.isAlRequired=Re.digitalStoreInfo.accountLinkingMetadata.isRequired),this.dataBlocks.set(d,R),this.syncChanged.next(d),Le&&Re.resetRefreshTimer(),ce&&this.sendOwnershipSyncTelemetry(R,_e),Re.accountType===pn.ZC.AccountLinking&&this.updateAlCache(d,R),R.platformSyncStatus===pn.hG.SUCCESS}updateAlCache(d,R){var ce;let _e=!1;const Le=R.expires instanceof Date?R.expires.getTime():null;if(this.accountLinkingDbData.accounts.forEach(Re=>{var Xe;Re.providerName===d&&(Re.displayName=R.personaName,Re.expires=Le,Re.syncedAt=null===(Xe=R.timestamp)||void 0===Xe?void 0:Xe.getTime(),_e=!0)}),!_e){const Re={providerName:d,displayName:R.personaName,expires:Le,syncedAt:null===(ce=R.timestamp)||void 0===ce?void 0:ce.getTime()};this.accountLinkingDbData.accounts.push(Re)}this.accountLinkingDbCache.dbFormat=this.accountLinkingDbData,this.accountLinkingDbCache.persist_().pipe((0,Ge.q)(1)).subscribe(()=>{this.logger.info(`AL DB values written -- ${JSON.stringify(this.accountLinkingDbData)}`)},Re=>this.logger.info(`AL DB updated failed for ${d} with ${Re}`))}removeAlProviderCacheEntry(d){const R=this.accountLinkingDbData.accounts.findIndex(ce=>ce.providerName===d);-1!==R&&(this.accountLinkingDbData.accounts.splice(R,1),this.accountLinkingDbCache.dbFormat=this.accountLinkingDbData,this.accountLinkingDbCache.persist_().pipe((0,Ge.q)(1)).subscribe(()=>{this.logger.info(`AL DB values written -- ${JSON.stringify(this.accountLinkingDbData)}`)},ce=>this.logger.info(`AL DB updated failed for ${d} with ${ce}`)))}updateOwnershipCache(){return this.ownershipDbData&&this.ownershipDbCache?(this.ownershipDbCache.dbFormat=this.ownershipDbData,this.ownershipDbCache.persist_().pipe((0,Ge.q)(1),(0,Je.U)(()=>(this.logger.info(`DB values written - ${JSON.stringify(this.ownershipDbData)}`),!0)),(0,xt.K)(()=>(this.logger.error("Error writing DB values for expiration notifications"),(0,N.of)(!0))))):(0,N.of)(!0)}createErrorBlock(d){var R;const ce=null!==(R=this.dataBlocks.get(d))&&void 0!==R?R:{};return ce.platformSyncStatus=pn.hG.UNKNOWN,ce}createHeader(d){return{[is.n0.authorization]:`GFNJWT ${d.token}`}}createParams(d){return{platform:this.accountProviders.get(d).providerId}}createRequestOptions(d={},R={},ce){return{headers:this.createHeader(ce),params:R,body:d}}formatKeyValStoreUrl(d,R){if(0===R.length)return d;const ce=[];return R.forEach(_e=>{ce.push(`key=${_e}`)}),`${d}?${ce.join("&")}`}doLogin(d,R,ce){let _e;return _e=this.isBrowserClient?this.doLoginBrowser(d,ce):this.doLoginDesktop(d,ce),this.dialogService.openAccountLinkingConnectingDialog(_e).pipe((0,Se.zg)(Le=>{if(!Le)return(0,N.of)(!1);if(this.supportsOwnershipSync(d))return this.sync(R,Le,!1,ce);if(this.supportsAccountLinking(d)){this.logger.info("Data received from AL service: ",Le);const Re=d.parseUserData(Le);return this.resetNotifications().pipe((0,Tt.h)(this.updateBlock(R,Re,!0,!1)))}throw new Error("Unknown account provider type")}))}doLoginOffDevice(d,R){if(!this.supportsAccountLinking(d))return(0,q._)("Off device flow is not supported by this provider");const ce=d.postLoginUrl(R).pipe((0,vs.d)(1)),_e=ce.pipe((0,Se.zg)(Re=>{const Xe=Math.max(1,Math.floor(Re.expires_in/Re.interval)-1);return d.postToken(Re.device_code,R).pipe((0,Ls.a)(mt=>mt.pipe((0,Se.zg)((Gt,Qt)=>{var an;if(Qt+1>Xe)return this.logger.error("Off device login failed because number of retry has reached maximal value"),(0,q._)(Gt);const Cn=Gt.rawResponse;return 400===Gt.status&&"authorization_pending"===(null===(an=null==Cn?void 0:Cn.error)||void 0===an?void 0:an.error)?(0,Me.H)(1e3*Re.interval):void 0}))))}),(0,Se.zg)(Re=>{var Xe,mt;const Gt=null!==(mt=null===(Xe=this.appConfig.accountLinking)||void 0===Xe?void 0:Xe.offDeviceNotificationTimeout)&&void 0!==mt?mt:3e4;return this.linkedAccountChangedNotification$.pipe((0,Ge.q)(1),(0,Tt.h)(!0),(0,Rs.L)(Gt,this.syncAccountLinking(d,!1,R)))})),Le=ce.pipe((0,Je.U)(Re=>({userCode:Re.user_code,verificationUri:Re.verification_uri,verificationUriComplete:Re.verification_uri_complete})));return this.dialogService.openOffDeviceAccountLinkingDialog(_e,Le)}doLoginBrowser(d,R){const ce=window.open("","_blank"),_e=d.getLoginUrl(void 0,R).pipe((0,Se.zg)(Re=>(ce.location.href=Re,(0,xs.R)(window,"message"))),(0,pt.h)(Re=>this.validateMessageEvent(Re)),(0,Je.U)(Re=>this.getOAuthLoginData(Re)),(0,Je.U)(Re=>d.parseLoginResult(Re)),(0,Je.U)(Re=>{const Xe=new URL(d.redirectFinishedUrl);return Xe.searchParams.append("platform",d.platform),Xe.searchParams.append("ui_locales",this.localeService.getLocale()),Re.display_name&&Xe.searchParams.append("display_name",Re.display_name),ce.location.href=Xe.href,Re}),(0,xt.K)(Re=>{this.logger.error("error retrieving login url ",Re.message);const Xe=new URL(d.redirectFinishedUrl);return Xe.searchParams.append("platform",d.platform),Xe.searchParams.append("ui_locales",this.localeService.getLocale()),Xe.searchParams.append("error","accountlink_fail"),ce.location.href=Xe.href,(0,N.of)("")})),Le=(0,dt.F)(500).pipe((0,pt.h)(()=>ce.closed),(0,Tt.h)(""),(0,Ge.q)(1));return(0,Xr.S3)(Le,_e)}doLoginDesktop(d,R){var ce;let _e=null===(ce=this.appConfig.starfleet)||void 0===ce?void 0:ce.portNumbers;0===_e.length&&(_e=[4444]);const Le=new oe.xQ,Re=new oe.xQ;return this.bridgeService.executeCommand(mi.Gh.Common.Httpserver.StartHttpServer,{ports:_e,redirectUrl:"",redirectParams:[]}).pipe((0,Se.zg)(Xe=>{if("httpRequest"===(null==Xe?void 0:Xe.callbackReason)){const mt=d.parseLoginResult(Xe.url),Gt=[`ui_locales=${this.localeService.getLocale()}`,`platform=${d.platform}`];return mt.display_name&&Gt.push(`display_name=${mt.display_name}`),this.bridgeService.executeCommand(mi.Gh.Common.Httpserver.SendRedirectResponse,{redirectUrl:d.redirectFinishedUrl,redirectParams:Gt}).pipe((0,St.b)(()=>{Re.next(mt),Re.complete()}))}return"serverCreated"===(null==Xe?void 0:Xe.callbackReason)?(this.logger.info("HTTP server port is: ",Xe.portNumber),Le.next(Xe.portNumber),(0,N.of)(!0)):(0,q._)("Error in HTTP server response for account login")}),(0,xt.K)(Xe=>(this.logger.error("Error creating HTTP server for account login",Xe),this.bridgeService.executeCommand(mi.Gh.Common.Httpserver.SendRedirectResponse,{redirectUrl:d.redirectFinishedUrl,redirectParams:[`ui_locales=${this.localeService.getLocale()}`,`platform=${d.platform}`,"error=server_error"]}).pipe((0,St.b)(()=>{Le.error(Xe),Re.error(Xe)})))),(0,Ye.x)(()=>{Re.complete(),Le.complete()})).subscribe(),Le.pipe((0,Te.b)(Xe=>d.getLoginUrl(Xe,R)),(0,Te.b)(Xe=>(window.open(Xe,"_blank"),Re.asObservable())),(0,Ge.q)(1),(0,Rs.L)(3e5,(0,N.of)("")),(0,Ye.x)(()=>{this.logger.info("Closing HTTP server"),this.bridgeService.executeCommand(mi.Gh.Common.Httpserver.StopHttpServer).subscribe()}))}validateMessageEvent(d){let R=d&&d.data;return R=R&&d.origin===window.location.origin,!!R}getOAuthLoginData(d){var R;const ce=null===(R=d.data)||void 0===R?void 0:R.key;if(!ce)return{};const _e=window.localStorage.getItem(ce);window.localStorage.removeItem(ce);try{return JSON.parse(_e).data}catch(Le){return this.logger.error("malformed access code object",_e),null}}getGameSyncStatus(d){switch(d){case pn.hG.UNKNOWN:return ge.Mlh.Unknown;case pn.hG.SUCCESS:return ge.Mlh.Success;case pn.hG.RATE_LIMITED:return ge.Mlh.Rate_Limited;case pn.hG.NVIDIA_ACCESS_DENIED:return ge.Mlh.Nvidia_Access_Denied;case pn.hG.PLATFORM_ACCESS_DENIED:return ge.Mlh.Platform_Access_Denied;case pn.hG.PLATFORM_PROFILE_DENIED:return ge.Mlh.Platform_Profile_Denied}}sendOwnershipSyncTelemetry(d,R){var ce;let _e=this.supportsAccountLinking(this.accountProviders.get(hi(d.platform)))?ge.ZQU.AccountLinked:ge.ZQU.Sync;R&&(_e=this.errorAccountSettings?ge.ZQU.ResyncAfterResolve:this.errorCreateProfile?ge.ZQU.ResyncAfterProfileCreate:ge.ZQU.Resync);const Le=new ge.kr1({userAction:_e,state:d.platformSyncStatus===pn.hG.UNKNOWN?ge.jzO.Disconnected:ge.jzO.Connected,usedCTA:this.usedCTA?ge.wye.TRUE:ge.wye.FALSE,status:this.getGameSyncStatus(d.platformSyncStatus),serviceProviderName:(null===(ce=d.platform)||void 0===ce?void 0:ce.toUpperCase())||"",totalNumberOfGames:d.totalNumberOfGames||0,totalNumberOfGfnSupportedGames:d.totalNumberOfGfnSupportedGames||0,syncDate:d.syncDate||""});this.telemetryService.push(Le)}sendOwnershipDisconnectTelemetry(d,R){const ce=new ge.kr1({userAction:ge.ZQU.Disconnect,state:ge.jzO.Disconnected,usedCTA:this.usedCTA?ge.wye.TRUE:ge.wye.FALSE,status:ge.Mlh.Success,serviceProviderName:(null==R?void 0:R.toUpperCase())||"",totalNumberOfGames:0,totalNumberOfGfnSupportedGames:0,syncDate:(null==d?void 0:d.syncDate)||""});this.telemetryService.push(ce)}navigateToAccountsSection(){this.syncCTATileClicked(),this.customLocationService.backNavigationRoute=this.router.url,this.cancelPendingCTA(),this.router.navigate([ve.nn.Settings],{skipLocationChange:!0,fragment:"settings_integrations"})}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(f.dF),o.LFG(_n.VK),o.LFG(Kt.No),o.LFG(is.V9),o.LFG(f.LA),o.LFG(a.y0),o.LFG(f.OL),o.LFG(ni.K2),o.LFG(un.Dc),o.LFG(qr.x),o.LFG(Ho),o.LFG(m.sK),o.LFG(xi.eP),o.LFG(si.F0),o.LFG(ts))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var Xa=e(28723),rs=e(61074),_r=e(23361),Io=(()=>((Io||(Io={})).denied="denied",Io))(),ro=(()=>{return(J=ro||(ro={})).clientAddedData="CLIENT_ADDED_DATA",J.clientRemovedData="CLIENT_REMOVED_DATA",J.clientDataResponse="CLIENT_DATA_RESPONSE",J.serverDataRequest="SERVER_DATA_REQUEST",ro;var J})();let qa=(()=>{class J{constructor(d,R,ce,_e,Le,Re){this.cloudVarService=R,this.settingsService=ce,this.bridgeService=_e,this.distributedTracingUtilService=Le,this.telemetryUtilService=Re,this.detectClipboardChange=new Ai.X(!1),this.desktopPasteTelemetry={clientClipboardRead:ge.wye.UNDEFINED,clipboardDataSent:ge.wye.UNDEFINED,clipboardDataLength:0,streamSessionId:"",streamSubSessionId:"",requestId:""},this.logger=d.getLogger("ClipboardService")}setDefaultClipboardSetting(){this.gxtClipboardPasteConfig().pipe((0,Ge.q)(1),(0,Se.zg)(d=>(null==d?void 0:d.isEnabled)&&(null==d?void 0:d.maxPasteBuffer)?this.settingsService.getSettingsData().pipe((0,Ge.q)(1)):(this.logger.info("Skip default setting as clipboard paste disabled"),(0,N.of)(null)))).subscribe(d=>{d&&!d.hasOwnProperty(Bn.Bq.ClipboardPaste)&&(this.logger.info("Setting clipboard paste as enabled by default"),this.settingsService.storeChangedSettings({settingType:Bn.Bq.ClipboardPaste,selectedOption:!0}))})}init(){return this.detectClipboardChange||(this.detectClipboardChange=new Ai.X(!1)),this.detectClipboardChange.asObservable().pipe((0,Se.zg)(()=>this.clipboardFeatureConfig()),(0,Se.zg)(d=>null!==d?d.isEnabled&&d.maxPasteBuffer?this.readText().pipe((0,Je.U)(R=>this.getTextContent(R,d.maxPasteBuffer)),(0,Se.zg)(R=>this.sendClientDataAvailable(!!R))):(this.logger.info("Clipboard paste feature not enabled due to user settings"),(0,N.of)(!1)):(this.logger.info("Clipboard paste feature not enabled"),this.detectClipboardChange.complete(),this.detectClipboardChange=null,ur.E)),(0,xt.K)(d=>(this.logger.error("Error while sending clipboard availability",d),(0,N.of)(!1))))}setStreamingIds(d,R){this.desktopPasteTelemetry.streamSessionId=d,this.desktopPasteTelemetry.streamSubSessionId=R}sendClientDataAvailable(d){var R;this.clipboardAvailableSpan=this.distributedTracingUtilService.startSpan(un.j1.ClientClipboardAvailable);const ce=[],_e=this.distributedTracingUtilService.inject(rs.FORMAT_TEXT_MAP,this.clipboardAvailableSpan);null===(R=Object.keys(_e))||void 0===R||R.forEach(mt=>{ce.push({key:mt,value:_e[mt]})});const Le={messageType:ti.wM.paste,pasteData:{type:d?ro.clientAddedData:ro.clientRemovedData},tracingData:{traceId:this.clipboardAvailableSpan.context().toTraceId(),traceContext:ce}},Re=JSON.stringify(Le);return this.logger.info("Sending clipboard data available type",Le.pasteData.type),this.bridgeService.executeCommand(mi.Gh.Gfn.Streaming.SendClipboardUpdate,{clipboardInfo:Re},!1).pipe((0,St.b)(mt=>{this.distributedTracingUtilService.closeSpan(this.clipboardAvailableSpan),this.logger.info("Clipboard available data sent",mt)}),(0,xt.K)(()=>(this.logger.error("Bridge command for SendClipboardUpdate failed"),this.distributedTracingUtilService.closeSpan(this.clipboardAvailableSpan),(0,N.of)(!1))))}sendClipboardContentInternal(d,R,ce){var _e,Le;const Re=R.context().toTraceId(),Xe=[],mt=this.distributedTracingUtilService.inject(rs.FORMAT_TEXT_MAP,R);null===(_e=Object.keys(mt))||void 0===_e||_e.forEach(vn=>{Xe.push({key:vn,value:mt[vn]})});const Gt={messageType:ti.wM.paste,pasteData:{type:d?ro.clientDataResponse:ro.clientRemovedData},tracingData:{requestId:ce,traceId:Re,traceContext:Xe}};d&&(Gt.pasteData.data=d);const an={clipboardInfo:JSON.stringify(Gt)};return this.logger.info("Sending clipboard data type",Gt.pasteData.type),this.desktopPasteTelemetry.clipboardDataLength=null!==(Le=null==d?void 0:d.length)&&void 0!==Le?Le:0,this.desktopPasteTelemetry.clipboardDataSent=this.desktopPasteTelemetry.clientClipboardRead===ge.wye.FALSE?ge.wye.UNDEFINED:d?ge.wye.TRUE:ge.wye.FALSE,this.desktopPasteTelemetry.requestId=ce,this.bridgeService.executeCommand(mi.Gh.Gfn.Streaming.SendClipboardUpdate,an,!1)}readText(){return navigator.clipboard?(0,Co.D)(navigator.clipboard.readText()).pipe((0,xt.K)(d=>(this.logger.info(`Clipboard readText: ${d}`),(0,N.of)(null)))):(this.logger.warn("navigator.clipboard is undefined, readText() probably is being used in non secure context."),(0,N.of)(null))}sendClipboardData(d){var R;const ce={};null===(R=null==d?void 0:d.traceContext)||void 0===R||R.forEach(Re=>{ce[Re.key]=Re.value});const _e=this.distributedTracingUtilService.extract(rs.FORMAT_TEXT_MAP,ce),Le=this.distributedTracingUtilService.startSpan(un.j1.ClientDesktopPaste,_e);this.clipboardFeatureConfig().pipe((0,Ge.q)(1),(0,Se.zg)(Re=>null!==Re?(this.desktopPasteTelemetry.clientClipboardRead=Re.maxPasteBuffer?ge.wye.TRUE:ge.wye.FALSE,Re.isEnabled&&Re.maxPasteBuffer?this.readText().pipe((0,Je.U)(Xe=>this.getTextContent(Xe,Re.maxPasteBuffer)),(0,Se.zg)(Xe=>this.sendClipboardContentInternal(Xe,Le,null==d?void 0:d.requestId))):(this.logger.info("Clipboard paste feature disabled due to user settings"),this.sendClipboardContentInternal(null,Le,null==d?void 0:d.requestId))):(this.logger.info("Clipboard paste feature disabled"),this.sendClipboardContentInternal(null,Le,null==d?void 0:d.requestId)))).subscribe(Re=>{this.distributedTracingUtilService.closeSpan(Le),this.logger.info("Clipboard data sent",Re),this.telemetryUtilService.sendClipboardPasteEvent(this.desktopPasteTelemetry)},Re=>{null==Le||Le.setTag(un.NI.Error,!0),this.distributedTracingUtilService.closeSpan(Le),this.logger.error("Error sending custom Message")})}gxtClipboardPasteConfig(){return this.cloudVarService.getFeatureToggle(_r._P.CLIPBOARD_PASTE_FEATURE_CONFIG,{configCheckEnabled:!1})}clipboardFeatureConfig(){return this.gxtClipboardPasteConfig().pipe((0,Ge.q)(1),(0,Se.zg)(d=>(null==d?void 0:d.isEnabled)&&(null==d?void 0:d.maxPasteBuffer)?this.checkReadPermissions().pipe((0,Se.zg)(R=>{const ce={isEnabled:!1,maxPasteBuffer:0};return R!==Io.denied?this.settingsService.getSettingsData().pipe((0,Je.U)(_e=>(null==_e?void 0:_e.clipboardPaste)?d:ce)):(0,N.of)(ce)})):(0,N.of)(null)))}checkReadPermissions(){const d={name:"clipboard-read"};try{return(0,Co.D)(navigator.permissions.query(d)).pipe((0,Je.U)(R=>R.state),(0,xt.K)(R=>(this.logger.error("Error reading clipboard permissions",R),(0,N.of)(Io.denied))))}catch(R){return this.logger.error("Error while reading browser clipboard permissions"),(0,N.of)(Io.denied)}}getTextContent(d,R){return new Blob([d]).size<=R?d:(this.logger.warn("Invalid text on clipboard"),null)}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(_r.$l),o.LFG(Bn.gb),o.LFG(f.dF),o.LFG(un.Dc),o.LFG(ge.wU6))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();e(60249);var el=e(72946),ss=e(68637);let tl=(()=>{class J{constructor(d,R,ce){this.gamepadService=R,this.ngZone=ce,this.logger=d.getLogger("GamepadNavigationService")}initialize(){this.logger.info("Initializing gamepad navigation"),this.bindCommand(wn.pU.Up,this.gamepadService.upPressed$),this.bindCommand(wn.pU.Down,this.gamepadService.downPressed$),this.bindCommand(wn.pU.Left,this.gamepadService.leftPressed$),this.bindCommand(wn.pU.Right,this.gamepadService.rightPressed$),this.bindCommand(wn.pU.Enter,this.gamepadService.onButtonPressed$(ss.z.A,{repeat:!0}),{synthesizeClick:!0}),this.bindCommand(wn.pU.Escape,this.gamepadService.onButtonPressed$(ss.z.B,{repeat:!0}))}bindCommand(d,R,ce){const _e=!!(null==ce?void 0:ce.synthesizeClick);let Re,Le=!1;this.ngZone.runOutsideAngular(()=>{R.pipe((0,St.b)(Xe=>{const mt=(0,wn.tE)(),Gt=mt instanceof HTMLButtonElement||mt instanceof HTMLAnchorElement&&mt.hasAttribute("href");_e&&Xe&&Gt&&(Re=mt)}),(0,Ot.w)(Xe=>Xe?(0,N.of)("keydown"):Le?(0,N.of)("keyup"):fs.C)).subscribe(Xe=>{const mt=(0,wn.tE)();(0,wn.a9)(mt,Xe,d),Le="keydown"===Xe,_e&&"keyup"===Xe&&Re===mt&&((0,wn.tr)(mt),Re=void 0)})})}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(ss.S),o.LFG(o.R0b))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var Us=e(38998);let nl=(()=>{class J{constructor(d,R){this.ngZone=R,this.logger=d.getLogger("TizenInputService")}initialize(){if(!(0,zn.fO)())throw new Error("Attempting to initialize on platform without Tizen API support!");this.logger.info("init"),this.ngZone.runOutsideAngular(()=>{window.addEventListener("tizenhwkey",d=>{if("back"===d.keyName){const R=(0,wn.tE)();(0,wn.a9)(R,"keydown",wn.pU.Escape),(0,wn.a9)(R,"keyup",wn.pU.Escape)}})})}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(o.R0b))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var il=e(92377),xi=e(68590);let ol=(()=>{class J{constructor(d,R){this.localeService=R,this.logger=d.getLogger("gfn/RedirectService")}getLocalizedDate(d){return this.localeService.localeChanged.pipe((0,Ge.q)(1),(0,Se.zg)(R=>{const ce=new Date(d);if(isNaN(ce.getTime()))return(0,q._)("Invalid Date");const _e=R.replace("_","-"),Le=`${ce.toLocaleDateString(_e,{day:"2-digit",month:"long",year:"numeric"})}`;return(0,N.of)(Le)}),(0,xt.K)(R=>(this.logger.info("Error while localizing date ",R),(0,q._)(R))))}}return J.\u0275fac=function(d){return new(d||J)(o.LFG(f.ed),o.LFG(f.OL))},J.\u0275prov=o.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})()},83313:(He,de,e)=>{"use strict";e.d(de,{$:()=>_});var n=e(79441),i=e(80226),D=e(81134),m=e(90425),y=e(98636),T=e(85816),r=e(53466),a=e(79902),s=e(33392),p=e(33927),l=e(9170),t=e(88689),w=e(2984),h=e(6484),u=e(52349),o=e(14179);const f=new Map([[15868737,o.Y6.NVB_SN_ENTITLEMENT_TIMEOUT],[15868708,o.Y6.NVB_SN_EXITED_DUE_TO_USER_IDLE_TIMEOUT],[15867913,o.Y6.NVB_SN_EXITED_DUE_TO_USER_IDLE_TIMEOUT],[15868739,o.Y6.NVB_SN_TERMINATED_BY_OPERATOR],[15868704,o.Y6.NVB_SN_STOPPED_BY_USER],[15868741,o.Y6.NVB_SN_EXITED_DUE_TO_SESSION_TIMELIMIT],[15868743,o.Y6.NVB_SN_TERMINATED_BY_PM],[15868707,o.Y6.NVB_SN_TERMINATED_WINDOWED_MODE],[15868709,o.Y6.NVB_SN_TERMINATED_UNAUTHROIZED_PROCESS_ACCESS],[15868710,o.Y6.NVB_SN_TERMINATED_MALICIOUS_PROCESS_ACCESS],[15868712,o.Y6.NVB_SN_TERMINATED_MINER_PROCESS_ACCESS],[15868711,o.Y6.NVB_SN_TERMINATED_UNKNOWN_PROCESS_ACCESS],[15868744,o.Y6.NVB_SN_TERMINATED_MULTIPLE_LOGIN],[15868714,o.Y6.NVB_SN_TERMINATED_ANOTHER_CLIENT],[3237089282,o.dq.NVB_R_NETWORK_ERROR],[3237089281,o.dq.NVB_R_NETWORK_ERROR],[3237093895,o.dq.NVB_R_STREAMER_CONNECT_FAILED],[3237093377,o.dq.NVB_R_AUTH_ERR_TOKEN_NOT_UPDATED],[3237093643,o.dq.NVB_R_SESSION_LIMIT_REACHED],[3237093889,o.dq.NVB_R_STREAMER_CONNECT_FAILED],[3237093890,o.dq.NVB_R_STREAMER_CONNECT_FAILED],[3237093891,o.dq.NVB_R_STREAMER_CONNECT_FAILED],[3237093892,o.dq.NVB_R_STREAMER_CONNECT_FAILED],[3237093893,o.dq.NVB_R_STREAMER_CONNECT_FAILED],[3237093894,o.dq.NVB_R_STREAMER_CONNECT_FAILED],[3237093900,o.dq.NVB_R_STREAMER_CONNECT_FAILED],[3237093673,o.dq.NVB_R_APPLICATION_PATCHING],[3237093379,o.dq.NVB_R_INVALID_SERVER_RESPONSE],[3237093654,o.dq.NVB_R_SESSION_NOT_ACTIVE],[3237093668,o.dq.NVB_R_AUTH_ERR_UNSUPPORTED_PROTOCOL],[3237093670,o.dq.NVB_R_AUTH_ERR_UNAUTHORIZED_CLIENT],[3237093650,o.dq.NVB_R_USER_IS_NOT_ENTITLED],[3237093632,o.dq.NVB_R_SERVER_ERROR],[3237093656,o.dq.NVB_R_SEVER_MAINTENANCE_MODE],[3237093657,o.dq.NVB_R_SERVER_OUT_OF_SERVICE],[3237093901,o.Y6.NVB_SN_STREAMER_NETWORK_ERROR],[3237093906,o.Y6.NVB_SN_STREAMER_NETWORK_ERROR],[3237093899,o.Y6.NVB_SN_STREAMER_NETWORK_ERROR],[3237093694,o.dq.NVB_R_SERVER_SESSION_QUEUE_LENGTH_EXCEEDED],[3237093688,o.dq.NVB_R_APP_MAINTENANCE_STATUS],[3237093678,o.dq.NVB_R_SESSION_TERMINATED_ANOTHER_CLIENT],[3237093642,o.dq.NVB_R_TOO_MANY_SERVER_REQUESTS],[3237093693,o.dq.NVB_R_REQUIRED_SEAT_INSTANCE_TYPE_NOT_SUPPORTED],[3237093695,o.dq.NVB_R_REGION_NOT_SUPPORTED_FOR_STREAMING],[3237093698,o.dq.NVB_R_SESSION_GAME_BINARIES_NOT_AVAILABLE_IN_REGION],[3237093674,o.dq.NVB_R_INVALID_APP_IDENTIFIER],[15868717,o.Y6.NVB_SN_TERMINATED_GAME_NOT_OWNED_BY_USER],[15868417,o.dq.NVB_R_NETWORK_ERROR],[15868418,o.Y6.NVB_SN_STREAMER_NETWORK_ERROR],[3237093703,o.dq.NVB_R_SESSION_REMOVED_FROM_QUEUE_MAINTENANCE],[3237093704,o.dq.NVB_R_ZONE_MAITENANCE_STATUS],[15868745,o.Y6.NVB_SN_PM_TERMINATED_MAINTENANCE_MODE]]),c=new Map([[15867908,o.Y6.NVB_SN_TERMINATED_DUE_TO_SYSTEM_SLEEP],[15867909,o.Y6.NVB_SN_INIT_FAILED_DUE_TO_SYSTEM_SLEEP]]),g=new Map([[15867908,o.Y6.NVB_SN_PAUSED_DUE_TO_SYSTEM_SLEEP],[15867909,o.Y6.NVB_SN_INIT_PAUSED_DUE_TO_SYSTEM_SLEEP]]),I=new Map([[15868718,o.Sj.NVST_DISCONN_SERVER_VFP_PROTECTED_CONTENT]]),G=new Map([[3237093894,o.dq.NVB_R_SESSION_ICE_CONNECTION_FAILED]]);var x=e(12556);const E_create=F=>new t.GridApp(F);var P=e(2316),v=e(89166),O=e(93404);const C=w.Gh.Gfn.Streaming;let _=(()=>{class F extends h.nM{constructor(b,B,U,A,S,Y,se,fe){super(),this.zone=b,this.loggingService=B,this.libLoggingService=U,this.windowService=A,this.projectInterfaceService=S,this.distributedTracing=Y,this.platformInfoService=se,this.deeplinkHelperService=fe,this.gfnClientUI="GFN_CLIENT_UI",this.isInputEnabled=!0,this.ragnarokCodesNotificationMap=new Map,this.ragnarokExtenedCodesNotificationMap=new Map,this.isComboKeyHelperInitialized$=new n.xQ,this.streamingProfileGuid="",this.systemInfoGuid="",this.eventDataElements={},this.logger=B.getLogger("crimson/browser/streaming-plugin"),this.streamingEvents=new n.xQ,this.micEvents=new n.xQ}get handlers(){return{module:C.Start.module,commands:{[C.Start.method]:this.start.bind(this),[C.Prepare.method]:this.prepare.bind(this),[C.SetAuthInfo.method]:this.setAuthInfo.bind(this),[C.SetAuthToken.method]:this.setAuthToken.bind(this),[C.Stop.method]:this.stop.bind(this),[C.GetActiveSessions.method]:this.getActiveSessions.bind(this),[C.GetSessionInfo.method]:this.getSessionInfo.bind(this),[C.Cancel.method]:this.cancel.bind(this),[C.Resume.method]:this.resume.bind(this),[C.PauseStreaming.method]:this.pauseStreaming.bind(this),[C.UpdateRemoteConfig.method]:this.updateRemoteConfig.bind(this),[C.RegisterCallback.method]:this.registerCallback.bind(this),[C.OpenOsr.method]:this.winOpenOsr.bind(this),[C.CloseOsr.method]:this.winCloseOsr.bind(this),[C.OsrRegisterCustomKeyPress.method]:this.osrRegisterKeypress.bind(this),[C.OsrUnregisterCustomKeyPress.method]:this.osrUnregisterKeypress.bind(this),[C.OsrRegisterKeyPressCallback.method]:this.osrRegisterKeypressCallback.bind(this),[C.OsrSetOverlayResolution.method]:this.osrSetOverlayResolution.bind(this),[C.GetStreamVolume.method]:this.getStreamVolume.bind(this),[C.SetStreamVolume.method]:this.setStreamVolume.bind(this),[C.ToggleUserInput.method]:this.toggleUserInput.bind(this),[C.SendUnicode.method]:this.sendUnicode.bind(this),[C.SetVirtualKeyboardState.method]:this.setVirtualKeyboardState.bind(this),[C.SetVideoTransforms.method]:this.setVideoTransforms.bind(this),[C.RegisterMicCallback.method]:this.registerMicCallback.bind(this),[C.ShouldDefaultEnableMic.method]:this.shouldDefaultEnableMic.bind(this),[C.GetMicState.method]:this.getMicState.bind(this),[C.SetMicState.method]:this.setMicState.bind(this),[C.ConfigureStreamingSettings.method]:this.ConfigureStreamingSettings.bind(this),[C.GetUnifiedAPIVersion.method]:this.GetUnifiedAPIVersion.bind(this),[C.OsrCheckKeyPressCombination.method]:this.OsrCheckKeyPressCombination.bind(this),[C.SetKeyboardLayout.method]:this.SetKeyboardLayout.bind(this),[C.UpdateEventInfoGuids.method]:this.updateEventInfoGuids.bind(this),[C.ToggleJoystickMouse.method]:this.toggleJoystickMouse.bind(this),[C.UpdateEventDataElements.method]:this.updateEventDataElements.bind(this),[C.ToggleOnScreenStats.method]:this.toggleOnScreenStats.bind(this),[C.SendClipboardUpdate.method]:this.sendClipboardData.bind(this),[C.PlatformGetMaxBitRateForArray.method]:this.platformGetMaxBitRateForArray.bind(this),[C.SendKeyEvent.method]:this.SendKeyEvent.bind(this)}}}get virtualGamepadHandler(){var b;return null===(b=this.gridApp)||void 0===b?void 0:b.getVirtualGamepadHandler()}setMicRecordingEnabled(b){var B;null===(B=this.gridApp)||void 0===B||B.setMicRecordingEnabled(b)}SetKeyboardLayout(b){return this.zone.runOutsideAngular(()=>{this.gridApp.setKeyboardLayout(b.payload.kbLayout)}),this.makeResult("true")}toggleOnScreenStats(){return this.zone.runOutsideAngular(()=>{var b;null===(b=this.gridApp)||void 0===b||b.toggleOnScreenStats()}),this.makeResult("toggle on screen stats")}selectPlatformSpecificMap(b){return b?g:c}buildRagnarokErrorMap(b,B){const U="iOS"===b||"iPadOS"===b,A=parseFloat(B),S=U&&A>=15&&A<15.1;f.forEach((Y,se)=>this.ragnarokCodesNotificationMap.set(se,Y)),this.selectPlatformSpecificMap(U).forEach((Y,se)=>this.ragnarokCodesNotificationMap.set(se,Y)),S&&G.forEach((Y,se)=>this.ragnarokCodesNotificationMap.set(se,Y)),I.forEach((Y,se)=>this.ragnarokExtenedCodesNotificationMap.set(se,Y))}initializeGridApp(){return this.platformInfoService.getPlatformInfo().pipe((0,y.b)(b=>{if(this.logger.info("PlatformInfo:",b),!this.gridApp){this.gridApp=E_create(b.details),this.gridApp.updateEventDataElements(this.eventDataElements),this.logger.info("EventDataElements sent to ragnarok after gridapp init:",this.eventDataElements),this.buildRagnarokErrorMap(b.details.os,b.details.osVer);const B=(U,A)=>{this.gridApp.addListener(U,(...S)=>{this.zone.run(()=>{A.bind(this)(S[0])})})};this.projectInterfaceService.sendCustomMessage.subscribe(U=>{this.sendCustomMessage(U)}),B("SessionStartResult",this.onSessionStartResult),B("SessionStopResult",this.onSessionStopResult),B("ActiveSessionsResult",this.onActiveSessionResult),B("GetSessionResult",this.onGetSessionResult),B("ProgressUpdate",this.onProgressUpdate),B("StreamStopped",this.onStreamStopped),B("Log",this.onRagnarokLogEvent),B("StreamingEvent",this.onStreamingEvent),B("StreamingQuality",this.onStreamingQuality),B("MicCapture",this.onMicStatusUpdate),B("CustomMessage",this.onCustomMessage)}}))}onStreamingQuality(b){this.streamingEvents.next(JSON.stringify({event:o.V4.STREAMING_QUALITY,streamQuality:b.qualityScore,bandwidthScore:b.bandwidthScore,networkLossScore:b.networkLossScore,latencyScore:b.latencyScore}))}onStreamingEvent(b){if(this.logger.info("callback onStreamingEvent called from nvrtc with eventData, ",b),b.streamingWarnings){const B={event:o.V4.STREAMING_WARNINGS,time:b.streamingWarnings.secondsLeft};switch(b.streamingWarnings.code){case 1:B.warning=o.Y6.NVB_SN_APPROACHING_ENTITLEMENT_TIMEOUT;break;case 2:B.warning=o.Y6.NVB_SN_APPROACHING_IDLE_TIMEOUT;break;case 4:B.warning=o.Y6.NVB_SN_CLEAR_IDLE_TIMEOUT;break;case 3:B.warning=o.Y6.NVB_SN_APPROACHING_SESSION_MAX_TIMELIMIT}this.streamingEvents.next(JSON.stringify(B))}}onRagnarokLogEvent(b){this.libLoggingService.sendLog({logLevel:b.logLevel,logStr:b.logstr,logTag:b.logtag,timeStamp:b.timeStamp})}mapAppLaunchModeToString(b){switch(b){case 0:return x.xld.Default;case 1:return x.xld.GamepadFriendly;case 2:return x.xld.TouchFriendly}return this.logger.error("mapAppLaunchModeToString Unknown AppLaunchMode value:"+b+" using Default"),x.xld.Default}mapStringToAppLaunchMode(b){switch(b){case x.xld.Default:return 0;case x.xld.GamepadFriendly:return 1;case x.xld.TouchFriendly:return 2}return this.logger.error("mapStringToAppLaunchMode Unknown AppLaunchMode value:"+b+" using Default"),0}mapActiveSessionInfoToSession(b){const B=[];if(b)for(const U of b){const A={sessionId:U.sessionId,appId:U.appId,appLaunchMode:this.mapAppLaunchModeToString(U.appLaunchMode),clientId:void 0,deviceId:void 0,status:o.a1.NVB_SESSION_STATUS_UNKNOWN};switch(U.state){case"initializing":A.status=o.a1.NVB_SESSION_INITIALIZING;break;case"ready_for_connection":A.status=o.a1.NVB_SESSION_READY_FOR_CONNECT;break;case"streaming":A.status=o.a1.NVB_SESSION_STREAMING;break;case"paused":A.status=o.a1.NVB_SESSION_PAUSED_UNINTENTIONAL;break;case"resuming":A.status=o.a1.NVB_SESSION_RESUMING;break;case"finished":A.status=o.a1.NVB_SESSION_PAUSED_INTENTIONAL;break;default:A.status=o.a1.NVB_SESSION_STATUS_UNKNOWN}B.push(A)}return B}onSessionStartResult(b){var B,U,A;this.logger.info("callback onSessionStartResult called from nvrtc with eventData, ",b);const S={event:o.V4.SESSION_SETUP_SUCCESS};if(b.sessionId&&(S.sessionId=b.sessionId,S.subSessionId=b.subSessionId,S.streams=b.streams,null===(B=this.sessionId)||void 0===B||B.next(b.sessionId)),b.error){null===(U=this.sessionId)||void 0===U||U.complete(),this.sessionId=null,S.event=b.isResume?o.V4.SESSION_RESUME_FAILURE:o.V4.SESSION_SETUP_FAILURE,S.result={result:this.ragnarokCodesNotificationMap.get(b.error.code)||b.error.code},S.sessions=this.mapActiveSessionInfoToSession(b.sessionList);const Y=null===(A=b.error)||void 0===A?void 0:A.code;if(15867905===Y||15867906===Y)return}this.streamingEvents.next(JSON.stringify(S)),b.error||(this.streamingEvents.next(JSON.stringify({event:o.V4.STREAMING_BEGIN})),this.streamingEvents.next(JSON.stringify({event:o.V4.STREAMING_FIRST_FRAME})))}onSessionStopResult(b){var B;this.logger.info("callback onSessionStopResult called from nvrtc with result, ",b),null===(B=this.sessionId)||void 0===B||B.complete(),this.sessionId=null;const U={event:o.V4.STOP_RESULT};b.sessionId&&(U.sessionId=b.sessionId,U.subSessionId=b.subSessionId),b.error&&(U.result={result:this.ragnarokCodesNotificationMap.get(b.error.code)||b.error.code}),this.streamingEvents.next(JSON.stringify(U))}onActiveSessionResult(b){this.logger.info("callback onActiveSessionResult called from nvrtc with result, ",b);const B={event:o.V4.ACTIVE_SESSIONS,result:{extendedError:[],requestId:1,result:0},sessions:this.mapActiveSessionInfoToSession(b.sessionList)};b.error&&(B.result.result=this.ragnarokCodesNotificationMap.get(b.error.code)||b.error.code),this.streamingEvents.next(JSON.stringify(B))}onGetSessionResult(b){this.logger.info("callback onGetSessionResult called from nvrtc with result, ",b);const U={event:o.V4.GET_SESSION_INFO,result:{extendedError:[],requestId:1,result:0},sessions:this.mapActiveSessionInfoToSession([{sessionId:b.sessionId,appId:b.appId,appLaunchMode:b.appLaunchMode,state:b.state}])};b.error&&(U.result.result=this.ragnarokCodesNotificationMap.get(b.error.code)||b.error.code),this.streamingEvents.next(JSON.stringify(U))}onProgressUpdate(b){var B;this.logger.info("callback onProgressUpdate called from nvrtc with eventData, ",b);const U={event:o.V4.SESSION_SETUP_PROGRESS,eta:b.eta,queuePosition:b.queuePosition};switch(b.sessionId&&(null===(B=this.sessionId)||void 0===B||B.next(b.sessionId)),b.state){case"InQueue":U.state=o.Py.NVB_SSS_QUEUEPOSITION;break;case"Configuring":U.state=o.Py.NVB_SSS_CONFIGURING;break;case"StartingStreamer":U.state=o.Py.NVB_SSS_STARTINGSTREAMER;break;case"PreviousSessionCleanup":U.state=o.Py.NVB_SSS_PREVIOUS_SESSION_CLEANUP}this.streamingEvents.next(JSON.stringify(U))}onStreamStopped(b){var B,U;this.logger.info("callback onStreamStopped called from nvrtc with eventData object, ",b),null===(B=this.sessionId)||void 0===B||B.complete(),this.sessionId=null;const A={event:o.V4.STREAMING_TERMINATED,extendedCode:null!==(U=this.ragnarokExtenedCodesNotificationMap.get(b.error.code))&&void 0!==U?U:0};A.reason=this.ragnarokCodesNotificationMap.get(b.error.code)||b.error.code,A.isResumable=b.isResumable,this.streamingEvents.next(JSON.stringify(A))}onMicStatusUpdate(b){const B={uiMicState:u.tn.PermissionPending,internalMicState:"RAGNAROK_"};switch(b.state){case 0:B.internalMicState+="UNINITIALIZED",B.uiMicState=u.tn.PermissionPending;break;case 1:B.internalMicState+="PERMISSION_PENDING",B.uiMicState=u.tn.PermissionPending;break;case 6:B.internalMicState+="UNSUPPORTED",B.uiMicState=u.tn.PermissionPending;break;case 7:B.internalMicState+="ERROR",B.uiMicState=u.tn.PermissionPending;break;case 2:B.internalMicState+="PERMISSION_DENIED",B.uiMicState=u.tn.PermissionDenied;break;case 3:B.internalMicState+="STARTED",B.uiMicState=u.tn.Unmuted;break;case 4:B.internalMicState+="NO_SUITABLE_DEVICE",B.uiMicState=u.tn.NoMicFound;break;case 5:B.internalMicState+="STOPPED",B.uiMicState=u.tn.Muted}this.logger.info("State event received:",b.state,"state sent to MicrophoneService:",B),this.micEvents.next(JSON.stringify(B))}onCustomMessage(b){const B=b;this.processPasteMessage(B),this.processZoneMaintenanceMessage(B),this.projectInterfaceService.onCustomMessage(B)}processPasteMessage(b){b.messageType===x.wMv.paste&&this.streamingEvents.next(JSON.stringify({event:o.V4.STREAMING_CLIENT_MESSAGE,message:JSON.parse(b.data)}))}processZoneMaintenanceMessage(b){b.messageType===x.wMv.zoneMaintenance&&b.messageRecipient===this.gfnClientUI&&(this.logger.info("Browser client message event for zone maintenance: ",b),this.streamingEvents.next(JSON.stringify({event:o.V4.STREAMING_CLIENT_MESSAGE,message:JSON.parse(b.data)})))}generateAuthToken(b){return this.logger.info("callback generateAuthToken called from nvrtc"),this.streamingEvents.next(JSON.stringify({event:o.V4.UPDATE_AUTH_TOKEN,spanData:b})),this.authTokenSubject=new n.xQ,this.authTokenSubject.toPromise()}startInternal(b){const B={appId:b.payload.appId.toString(),appLaunchMode:this.mapStringToAppLaunchMode(b.payload.appLaunchMode),streamParams:[{width:b.payload.streamingProfile.width,height:b.payload.streamingProfile.height,fps:b.payload.streamingProfile.fps,maxBitrateKbps:b.payload.streamingProfile.maxBitrate,videoTagId:"remote-video",audioTagId:"remote-audio"}],metaData:b.payload.metaData,allowKeyboardLayoutChange:b.payload.allowKeyboardLayoutChange,keyboardLayout:b.payload.keyboardLayout,clientLocale:b.payload.locale,accountLinked:b.payload.accountLinked,shortName:b.payload.gameShortName,networkSessionId:b.payload.networkSessionId,partnerCustomData:b.payload.partnerCustomData};this.sessionId=new i.t(1);const U=b.payload.session;return U?(this.sessionId.next(U),this.gridApp.resumeSession(B,U,b.payload.spanData)):this.gridApp.startSession(B,b.payload.spanData),this.makeResult("true")}start(b){return this.zone.runOutsideAngular(()=>this.startInternal(b))}prepareInternal(b){return this.initializeGridApp().pipe((0,T.zg)(B=>{var U;const A=new Map;null===(U=b.payload.clientHeaders)||void 0===U||U.forEach(se=>{A.set(se.headerName,se.headerValue)});const S={clientAppVersion:b.payload.clientAppVersion,deviceHashId:b.payload.deviceId,serverAddress:b.payload.address,authTokenCallback:se=>this.zone.run(()=>this.generateAuthToken(se)),textInputElement:document.getElementById("hiddentext"),createTracer:this.distributedTracing.createTracer.bind(this.distributedTracing),clientHeaders:A};let Y;return this.deeplinkHelperService.windowedMode&&(Y=Object.assign(Object.assign({},t.defaultInputConfigFlags),{cursorType:2})),this.gridApp.initialize(S,Y)?this.makeResult("true"):this.makeError(500,"Grid application cannot be initialized")}))}prepare(b){return this.zone.runOutsideAngular(()=>this.prepareInternal(b))}setAuthInfo(b){return this.zone.runOutsideAngular(()=>{let B=0;switch(b.payload.tokenType){case x.qql.NVB_AUTH_JWT_GFN:B=1;break;case x.qql.NVB_AUTH_JWT:B=2}return this.gridApp.setAuthInfo({type:B,token:b.payload.token}),this.makeResult("true")})}setAuthToken(b){return this.authTokenSubject.next(b.payload.token),this.authTokenSubject.complete(),this.authTokenSubject=null,this.makeResult("true")}stopInternal(b){const B=b.payload.session;return B||this.sessionId?(B?(0,D.of)(B):this.sessionId.asObservable()).pipe((0,r.q)(1),(0,y.b)(A=>{const S=b.payload.reasonCode;this.logger.info("Stopping session ",A,S?`reason: 0x${S.toString(16)}`:""),this.gridApp.stopSession(A,S,b.payload.spanData)}),(0,T.zg)(A=>this.makeResult("true"))):this.makeError(500,"No session to be stopped")}stop(b){return this.zone.runOutsideAngular(()=>this.stopInternal(b))}getActiveSessions(b){return this.zone.runOutsideAngular(()=>{this.gridApp.getActiveSessions(b.payload.spanData)}),this.makeResult("true")}getSessionInfo(b){return this.zone.runOutsideAngular(()=>{this.gridApp.getSession(b.payload.session,b.payload.spanData)}),this.makeResult("true")}cancel(b){return this.makeResult("true")}resume(b){return this.zone.runOutsideAngular(()=>{this.gridApp.resume()}),this.makeResult("true")}pauseStreamingInternal(){var b;return(null!==(b=this.sessionId)&&void 0!==b?b:(0,D.of)(void 0)).subscribe(U=>{this.gridApp.pauseSession(U)}),this.makeResult("true")}pauseStreaming(b){return this.zone.runOutsideAngular(()=>this.pauseStreamingInternal())}updateRemoteConfig(b){return this.makeResult("true")}registerCallback(b){return this.makePersistentResult(this.streamingEvents.asObservable())}winCloseOsr(b){return this.isInputEnabled&&(this.logger.info("InputToggle: Closing OSR"),this.zone.runOutsideAngular(()=>{var B;null===(B=this.gridApp)||void 0===B||B.toggleUserInput(!0),this.isInputEnabled=!1})),this.makeResult("osrClose")}winOpenOsr(b){return(this.isInputEnabled&&!b.payload.enableInput||!this.isInputEnabled&&b.payload.enableInput)&&(this.logger.info("InputToggle: Opening OSR with enableInput:",b.payload.enableInput),this.zone.runOutsideAngular(()=>{var B;null===(B=this.gridApp)||void 0===B||B.toggleUserInput(!b.payload.enableInput),this.isInputEnabled=!this.isInputEnabled})),this.makeResult("osrOpen")}osrRegisterKeypress(b){return this.makeResult("true")}osrUnregisterKeypress(b){return this.makeResult("true")}osrRegisterKeypressCallback(b){return this.comboKeyHelper||(this.comboKeyHelper=new h.n2(this.loggingService,b.payload.osType,!0),this.projectInterfaceService.isNonEnglishKeyboardLayout.subscribe(B=>{this.comboKeyHelper.setNonEnglishKeyboardLayout(B),this.isComboKeyHelperInitialized$.next(!0),this.isComboKeyHelperInitialized$.complete()})),this.zone.runOutsideAngular(()=>{this.projectInterfaceService.enableListener.pipe((0,a.w)(B=>B?this.windowService.getKeydownEvent():m.C),(0,s.j)(B=>this.isComboKeyHelperInitialized$)).subscribe(B=>{B&&this.comboKeyHelper.processKeyDownEventForHotkeyInvocation(B)})}),this.makePersistentResult(this.comboKeyHelper.shortcutData.pipe((0,s.j)(B=>this.isComboKeyHelperInitialized$),(0,p.U)(B=>this.projectInterfaceService.checkIfShortcutIsPresentCallback(B)),(0,l.h)(B=>B.length>0),(0,p.U)(B=>(B=B.map(U=>U in h.zl?h.zl[U].toLowerCase():String.fromCharCode(U).toLowerCase())).join("-"))))}osrSetOverlayResolution(b){return this.makeResult("true")}getStreamVolume(b){return this.makeResult("true")}setStreamVolume(b){return this.makeResult("true")}toggleUserInput(b){return this.logger.info("InputToggle: Toggling input:",b.payload.enable),this.zone.runOutsideAngular(()=>{this.gridApp.toggleUserInput(b.payload.enable)}),this.makeResult("true")}toggleJoystickMouse(b){return this.logger.info("Toggling RSMouse/LSMouse: ",b.payload.enable),this.zone.runOutsideAngular(()=>{var B;null===(B=this.gridApp)||void 0===B||B.toggleRsdmm(b.payload.enable)}),this.makeResult("true")}sendUnicode(b){return this.zone.runOutsideAngular(()=>{const B=b.payload.unicodeInput,U=B instanceof Uint8Array?B:new Uint8Array(B);this.gridApp.sendTextInput(U.buffer)}),this.makeResult("true")}setVirtualKeyboardState(b){return this.zone.runOutsideAngular(()=>{var B;null===(B=this.gridApp)||void 0===B||B.setVirtualKeyboardState(b.payload.visible)}),this.makeResult("true")}setVideoTransforms(b){return this.zone.runOutsideAngular(()=>{this.gridApp.setVideoTransforms(b.payload.offsetX,b.payload.offsetY,b.payload.zoomFactor)}),this.makeResult("true")}registerMicCallback(b){return this.makePersistentResult(this.micEvents.asObservable())}shouldDefaultEnableMic(b){return this.zone.runOutsideAngular(()=>this.makeResult(this.gridApp.shouldDefaultEnableMic()?"true":"false"))}getMicState(b){return this.zone.runOutsideAngular(()=>{this.gridApp.getMicState()}),this.makeResult("true")}setMicState(b){return this.zone.runOutsideAngular(()=>{this.gridApp.setMicRecordingEnabled(b.payload.enable)}),this.makeResult("true")}ConfigureStreamingSettings(b){return this.logger.info("Streaming settings config:",b.payload),this.zone.runOutsideAngular(()=>{t.ConfigureRagnarokSettings(b.payload)}),this.makeResult("true")}GetUnifiedAPIVersion(b){return this.makeResult(t.CLIENT_VERSION)}OsrCheckKeyPressCombination(){return this.makeResult("true")}sendCustomMessage(b){var B;null===(B=this.gridApp)||void 0===B||B.sendCustomMessage(b)}updateEventInfoGuids(b){var B;return this.streamingProfileGuid=b.payload.streamingProfileGuid,this.systemInfoGuid=b.payload.systemInfoGuid,this.eventDataElements.telemetryEventIds={streamingProfileGuid:b.payload.streamingProfileGuid,systemInfoGuid:b.payload.systemInfoGuid},null===(B=this.gridApp)||void 0===B||B.updateEventDataElements(this.eventDataElements),this.logger.info("EventInfoGuids sent to ragnarok with other event data elements:",this.eventDataElements),this.makeResult("true")}updateEventDataElements(b){var B,U,A;return this.eventDataElements.commonData=Object.assign(Object.assign({},this.eventDataElements.commonData),b.payload.commonData),this.eventDataElements.config=null!==(B=b.payload.config)&&void 0!==B?B:this.eventDataElements.config,this.eventDataElements.experiments=null!==(U=b.payload.experiments)&&void 0!==U?U:this.eventDataElements.experiments,this.eventDataElements.telemetryEventIds={streamingProfileGuid:this.streamingProfileGuid,systemInfoGuid:this.systemInfoGuid},null===(A=this.gridApp)||void 0===A||A.updateEventDataElements(this.eventDataElements),this.logger.info("EventDataElements sent to ragnarok:",this.eventDataElements),this.makeResult("true")}sendClipboardData(b){return this.projectInterfaceService.postCustomMessage(b.payload.clipboardInfo,x.gOl.UIPlugin,x.wMv.paste),this.makeResult("true")}platformGetMaxBitRateForArray(b){const B=[];return b.payload.resolutions.forEach(A=>{const S=t.CalculateMaxBitrateKbps(A.width,A.height,A.frameRate);B.push({width:A.width,height:A.height,fps:A.frameRate,maxBandwidth:S})}),this.makeResult(JSON.stringify({resolutions:B}))}SendKeyEvent(b){var B;const U=b.payload.keyEvent;return U instanceof KeyboardEvent?(null===(B=this.gridApp)||void 0===B||B.sendKeyEvent(U),this.makeResult("true")):this.makeError(500,"event is not KeyboardEvent")}}return F.\u0275fac=function(b){return new(b||F)(P.LFG(P.R0b),P.LFG(h.ed),P.LFG(h._V),P.LFG(h.un),P.LFG(u.m3),P.LFG(v.Dc),P.LFG(O.tu),P.LFG(x.gIP))},F.\u0275prov=P.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})()},22087:(He,de,e)=>{"use strict";e.d(de,{h:()=>o});var n=e(79441),i=e(81134),D=e(90490),m=e(17163),y=e(53466),T=e(33927),r=e(2984),a=e(6484),s=e(12556),p=e(59780),l=e(19481),t=e(7830),w=e(2316),h=e(43124),u=e(13335);let o=(()=>{class f{constructor(g,I,G,x,E,P,v,O,C,_,F,V,b){this.telemetryService=I,this.streamerConfigService=G,this.streamingManagerService=x,this.networkConfigurationService=E,this.streamingProfileService=P,this.bridgeService=v,this.networkTestService=O,this.serverRoutingService=C,this.gameLaunchAnalyticsService=_,this.pathService=F,this.guestModeService=V,this.ownershipSyncService=b,this.oobeShown=!1,this.platformSelectionDialogDuration=0,this.gameLaunchStepList=[l.$D.UpdateCheck,l.$D.PreStreaming,l.$D.Authentication,l.$D.PlatformSelection,l.$D.Authorization,l.$D.NetworkTest,l.$D.Loading],this.overlappingDurations=[s.FRL.Lbr,s.FRL.SessionQueue],this.seatSetupDurations=[s.FRL.StreamerClientSetupDuration,s.FRL.StreamerConnectionDuration,s.FRL.SeatConfigDuration,s.FRL.StreamingStartDuration,s.FRL.SessionQueue],this.seatSetupOverlappingDurations=[s.FRL.StreamerConnectionDuration,s.FRL.SeatConfigDuration,s.FRL.SessionQueue],this.gameFeatureState=[{name:"",state:""}],this.seatSetupSequence$=new n.xQ,this.seatSetupSequenceCount=[],this.logger=g.getLogger("gameSessionAnalyticsService"),this.resetNetworkTestResult(),this.resetResumeType(),this.resetGameLaunchDurationsMatrix(),this.pathService.onExitingStreamer.subscribe(B=>{B&&this.cleanupGameLaunchMetrics()}),this.seatSetupEventSequence=[],this.recordAndLogSeatSetupSequence()}resetNetworkTestResult(){this.networkTestUIResult=s.DYb.Unknown}resetResumeType(){this.resumeType=s.NuE.None}getStreamingManagerCallbacks(g){return{callbackContext:this,onStateBegin:()=>{},onStateEnd:this.generateCallback(g).bind(this),onTerminalError:I=>this.onErrorState(g,I)}}initGameSessionAnalytics(){this.gameLaunchStepList.forEach(g=>{this.streamingManagerService.register(g,this.getStreamingManagerCallbacks(g))}),this.networkTestService.lbrState.subscribe(g=>{this.streamingManagerService.inActiveState()?g===s.eTr.Started?this.startGameLaunchDuration(s.FRL.Lbr):g===s.eTr.Finished&&this.stopGameLaunchDuration(s.FRL.Lbr):this.logger.info("Skipping LBR duation measrement since not triggered from Game Launch path")})}handleGeronimoLaunchResult(g,I=""){this.sendGameLaunchDurationEvent(g,I)}nextSeatSeatupEvent(g,I){this.seatSetupSequence$.next([g,I])}recordAndLogSeatSetupSequence(){this.seatSetupSequence$.subscribe(([g,I])=>{I?(this.logger.info("Seat setup sequence and count is ",this.seatSetupSequenceCount),this.seatSetupSequenceCount=[]):0!==this.seatSetupSequenceCount.length&&this.seatSetupSequenceCount.slice(-1)[0][0]!==g||0===this.seatSetupSequenceCount.length?this.seatSetupSequenceCount.push([g,1]):this.seatSetupSequenceCount[this.seatSetupSequenceCount.length-1][1]+=1})}handleGameLaunchFailure(g){this.sendGameLaunchDurationEvent(g)}updateGameLaunchDurations(g,I){this.updateSeatSetupEventSequence(I),this.stopGameLaunchDuration(g),I?(this.seatSetupOverlappingDurations.includes(I)&&this.gameLaunchDurations.get(I).duration&&(this.gameLaunchDurations.get(I).previousDurationCarry=this.gameLaunchDurations.get(I).duration),this.gameLaunchDurations.get(I).start=Date.now()):this.logger.info("Game launch durations measured upto session start: ",this.gameLaunchDurations)}moveGameLaunchDuration(g,I){this.gameLaunchDurations.get(g).start=this.gameLaunchDurations.get(I).start,this.gameLaunchDurations.get(g).duration=this.gameLaunchDurations.get(I).duration,this.gameLaunchDurations.get(I).start=0,this.gameLaunchDurations.get(I).duration=0}startGameLaunchDuration(g){g===s.FRL.StreamerClientSetupDuration&&(this.seatSetupEventSequence=[],this.updateSeatSetupEventSequence(s.FRL.StreamerClientSetupDuration)),this.gameLaunchDurations.get(g).start&&this.resetGameLaunchDuration(g),this.logger.info("starting game launch step duration",g),this.gameLaunchDurations.get(g).start=g===s.FRL.StreamerJsInit?window.jsInitStartTs:Date.now()}stopGameLaunchDuration(g){const I=this.gameLaunchDurations.get(g).start;this.logger.info("Current step: ",g," , Time stamp: ",I),this.gameLaunchDurations.get(g).duration=0!==I?Date.now()-I:0,this.seatSetupOverlappingDurations.includes(g)&&this.gameLaunchDurations.get(g).previousDurationCarry&&(this.gameLaunchDurations.get(g).duration+=this.gameLaunchDurations.get(g).previousDurationCarry,this.gameLaunchDurations.get(g).previousDurationCarry=0),this.logger.info("Game launch duration for ",g," is: ",this.gameLaunchDurations.get(g).duration)}resetGameLaunchDuration(g){this.logger.info("reset game launch duration for step: ",g),this.gameLaunchDurations.get(g).duration=0,this.gameLaunchDurations.get(g).start=0,this.gameLaunchDurations.get(g).previousDurationCarry=0}setIsOobeShown(g){this.oobeShown=g}setPlatformSelectionDialogDuration(g){this.platformSelectionDialogDuration=g}setNetworkTestUIResult(g){this.networkTestUIResult=g}setAuthenticationStatus(g){this.authenticationStatus=g}setResumeType(g){this.resumeType=g}getVSyncMode(g){return g===s.OAB.ValueAdaptive.value?s.ef6.Adaptive:g===s.OAB.ValueOn.value?s.ef6.On:s.ef6.Off}sendStreamingProfileEvent(){this.streamingProfileService.getStreamingProfile().pipe((0,m.M)(this.streamingProfileService.getStreamingProfileGuid()),(0,y.q)(1)).subscribe(([g,I])=>{const G={profileName:g.name,resolutionHeight:g.height,resolutionWidth:g.width,aspectRatio:g.aspectRatio,framerate:g.fps,maxBitrate:g.maxBitrate,DRC:g.drc?s.wye.TRUE:s.wye.FALSE,vSyncSetting:this.getVSyncMode(g.vSync),streamingProfileGuid:I,hdrEnabled:g.hdrStreaming?s.wye.TRUE:s.wye.FALSE};this.telemetryService.push(new s.pDK(G))},g=>{this.logger.error("Failed to get streaming profile settings: ",g)})}resetGameLaunchDurationsMatrix(){this.seatSetupEventSequence=[],this.gameLaunchDurations=new Map;for(const g in s.FRL)this.gameLaunchDurations.hasOwnProperty(g)||this.gameLaunchDurations.set(s.FRL[g],{start:0,duration:0,previousDurationCarry:0})}calculateLaunchDuration(){const g=this.gameLaunchAnalyticsService.getGameLaunchMetadata(),I=g.launchTs,G=this.gameLaunchDurations.get(s.FRL.StreamerJsInit).start;this.logger.info("initiallaunchts",I,"currentTs",Date.now());const x=this.streamerConfigService.activeConfig.launchSource;if(a.ng.isCefPlatform()){let E=0,P=0;return this.logger.info("Mall is running:",g.isMallRunning),g.isMallRunning?(this.isWarmLaunch=!0,P=0,E=x===s.zO5.GeForceNOW||g.isFromGameChangeDialog?0:G-I,this.updateGameLaunchStartupDurations({start:I,duration:P,previousDurationCarry:0}),(0,i.of)(E)):this.bridgeService.executeCommand(r.Gh.Common.Applicationinfo.GetApplicationTimeInfo,{type:r.Yk.Common.Applicationinfo.ApplicationTimeType.Launch}).pipe((0,T.U)(v=>(this.isWarmLaunch=v.isWarmLaunch||!1,this.logger.info("applaunchtimeinfo",v),g.isFromGameChangeDialog||(I>0&&I>v.startTime&&(P=I-v.startTime),E=G-v.startTime),this.updateGameLaunchStartupDurations({start:I,duration:P,previousDurationCarry:0},{start:v.startTime,duration:E,previousDurationCarry:0}),E)))}return 0!==I&&this.updateGameLaunchStartupDurations({start:I,duration:G-I,previousDurationCarry:0}),(0,i.of)(0)}updateGameLaunchStartupDurations(g,I){g&&(this.gameLaunchDurations.get(s.FRL.InitialLaunch).start=g.start,this.gameLaunchDurations.get(s.FRL.InitialLaunch).duration=g.duration),I&&(this.gameLaunchDurations.get(s.FRL.StreamerCefInit).start=I.start,this.gameLaunchDurations.get(s.FRL.StreamerCefInit).duration=I.duration)}onErrorState(g,I){if(g===I.errorSourceState)switch(I.errorSourceState){case l.$D.Authentication:this.logger.info(`Error ${I.errorData.errorCode} occured on state Authentication`),this.sendGameLaunchSourceInfoTelemetry();break;case l.$D.Authorization:{this.logger.info(`Error ${I.errorData.errorCode} occured on state Authorization`);const G={isResume:!1,status:I.errorData.errorCode===t.D8.NotEntitled?s.N3X.NesNotEntitled:s.N3X.NesAuthFailed,errorDetails:I.errorData.errorCode.toString()};this.sendGameLaunchDurationEvent(G);break}}}generateCallback(g){return()=>{this.onStateEndInternal(g)}}onStateEndInternal(g){switch(g){case l.$D.Init:this.startGameLaunchDuration(s.FRL.UpdateCheck);break;case l.$D.UpdateCheck:this.updateGameLaunchDurations(s.FRL.UpdateCheck,s.FRL.PreStreaming);break;case l.$D.PreStreaming:{this.stopGameLaunchDuration(s.FRL.PreStreaming);const I=Date.now();this.gameLaunchDurations.get(s.FRL.ManualLoginEntry).start=I,this.gameLaunchDurations.get(s.FRL.AutoLogin).start=I;break}case l.$D.Authentication:this.authenticationStatus!==p.y.AUTO_LOGIN?(this.resetGameLaunchDuration(s.FRL.AutoLogin),this.updateGameLaunchDurations(s.FRL.ManualLoginEntry,s.FRL.PlatformSelection)):(this.resetGameLaunchDuration(s.FRL.ManualLoginEntry),this.updateGameLaunchDurations(s.FRL.AutoLogin,s.FRL.PlatformSelection)),this.sendGameLaunchSourceInfoTelemetry();break;case l.$D.PlatformSelection:this.updateGameLaunchDurations(s.FRL.PlatformSelection,s.FRL.NesAuthorization);break;case l.$D.Authorization:this.updateGameLaunchDurations(s.FRL.NesAuthorization,s.FRL.NetworkTest);break;case l.$D.NetworkTest:this.updateGameLaunchDurations(s.FRL.NetworkTest,s.FRL.StartSession),this.startGameLaunchDuration(s.FRL.StreamerClientSetupDuration);break;case l.$D.Loading:this.sendStreamingProfileEvent()}}updateSeatSetupEventSequence(g){this.seatSetupDurations.includes(g)&&this.seatSetupEventSequence.push(g)}getSeatSetupEventSequence(){return this.seatSetupEventSequence}resetSeatSetupEventSequence(g){g?(this.seatSetupEventSequence=[],this.resetGameLaunchDuration(s.FRL.StreamerClientSetupDuration),this.resetGameLaunchDuration(s.FRL.StreamerConnectionDuration),this.resetGameLaunchDuration(s.FRL.SeatConfigDuration),this.resetGameLaunchDuration(s.FRL.StreamingStartDuration)):this.seatSetupEventSequence.length>=1&&this.updateGameLaunchDurations(this.seatSetupEventSequence[this.seatSetupEventSequence.length-1],void 0)}setGameFeatureState(g){this.logger.info("Game feature updated",g),this.gameFeatureState=g}getAccountLinksData(){const g=this.ownershipSyncService.getAccountStates(),I=[];for(const G of g)!G.enabled||(G.accountType===s.ZCG.OwnershipSync?I.push(G.providerType.toUpperCase()+(G.isSynced?"_SYNCED":"_UNSYNCED")):G.isAccountLinkingAvailable&&I.push(G.providerType.toUpperCase()+(G.isAccountLinked?"_LINKED":"_UNLINKED")));return I}sendGameLaunchSourceInfoTelemetry(){var g;const I=null!==(g=this.streamerConfigService.activeConfig.shortName)&&void 0!==g?g:"",G=this.streamerConfigService.activeConfig.launchSource,E=this.gameLaunchAnalyticsService.getGameLaunchMetadata().epicAccountLinked?s.wye.TRUE:s.wye.FALSE;this.logger.info("Game launch source for game: ",I," is :",G),(0,D.$R)(this.telemetryService.getDefaultClientConsentObserable(),this.telemetryService.getCommonDataObservable()).subscribe(P=>{this.logger.info("Sending Game launch event for game: ",I);const v=this.guestModeService.isGuestMode?{useBeacon:!0}:null;this.telemetryService.push(new s.U4l({gameShortName:I,gameLaunchSource:G,epicAccountLinked:E,accountLinks:this.getAccountLinksData()}),null,v)})}getNetworkTestDuration(){const g=this.gameLaunchDurations.get(s.FRL.NetworkTest).duration,I=this.gameLaunchDurations.get(s.FRL.Lbr).duration;return g>0?g-I:0}getStartSessionDuration(){const g=this.gameLaunchDurations.get(s.FRL.StartSession).duration,I=this.gameLaunchDurations.get(s.FRL.SessionQueue).duration;return g>0?g-I:0}getTotalGameLaunchDuration(){let g=0;return this.gameLaunchDurations.forEach((I,G)=>{!this.overlappingDurations.includes(G)&&!this.seatSetupEventSequence.includes(G)&&(g+=I.duration)}),g}getGameLaunchTelemetryStatus(g){return g&&Object.values(s.N3X).includes(g.status)?g.status:s.N3X.Success}sendGameLaunchDurationEvent(g,I=""){var G;const x=null!==(G=this.streamerConfigService.activeConfig.shortName)&&void 0!==G?G:"",E=this.streamerConfigService.activeConfig.launchSource,P=this.gameLaunchAnalyticsService.getGameLaunchMetadata(),v=P.shortName;if(this.logger.info(`Sending game launch metrics for game: ${x}, game in `,`metadata: ${v}, and game was launched via ${E}.`),v&&v!==x&&E!==s.zO5.External&&E!==s.zO5.Deeplink)return this.logger.error(`Event not sent! Game launched: ${x}, is different from the game launch info in `,`memory: ${v}, and game was launched via mallclient.`),void this.cleanupGameLaunchMetrics();const O=this.calculateLaunchDuration(),C=this.networkConfigurationService.getNetworkOverride();(0,D.$R)(C,O).pipe((0,y.q)(1)).subscribe(([_,F])=>{var V;const b=s.FRL,B=new s.Y_M({lbrDuration:this.gameLaunchDurations.get(b.Lbr).duration,initialLaunchDuration:this.gameLaunchDurations.get(b.InitialLaunch).duration,totalLaunchDuration:this.getTotalGameLaunchDuration(),platformSelectionDuration:this.gameLaunchDurations.get(b.PlatformSelection).duration,nesAuthorizationDuration:this.gameLaunchDurations.get(b.NesAuthorization).duration,geronimoLaunchDuration:0,manualLoginEntryDuration:this.gameLaunchDurations.get(b.ManualLoginEntry).duration,lbrRun:this.serverRoutingService.isLbrRun?s.wye.TRUE:s.wye.FALSE,resumeType:this.resumeType,networkTestDuration:this.getNetworkTestDuration(),isResume:g&&!0===g.isResume?s.wye.TRUE:s.wye.FALSE,networkTestUiResult:this.networkTestUIResult,accountLinked:this.streamerConfigService.activeConfig.accountLinked?s.wye.TRUE:s.wye.FALSE,overrideActive:_?s.wye.TRUE:s.wye.FALSE,sessionCleanupDuration:this.gameLaunchDurations.get(b.SessionCleanup).duration,sessionQueueDuration:this.gameLaunchDurations.get(b.SessionQueue).duration,autoLoginDuration:this.gameLaunchDurations.get(b.AutoLogin).duration,streamerCefStartupDuration:this.gameLaunchDurations.get(b.StreamerCefInit).duration,networkTestRun:this.networkTestService.isNetworkTestRun?s.wye.TRUE:s.wye.FALSE,gameLaunchSource:E,oobeShown:this.oobeShown?s.wye.TRUE:s.wye.FALSE,isWarmLaunch:this.isWarmLaunch?s.wye.TRUE:s.wye.FALSE,streamerJsStartupDuration:this.gameLaunchDurations.get(b.StreamerJsInit).duration,sessionId:I||"",oobeCheckDuration:this.gameLaunchDurations.get(b.PreStreaming).duration,startSessionDuration:this.getStartSessionDuration(),overrideZone:null!==(V=null==_?void 0:_.address)&&void 0!==V?V:"",isFromGameChangeDialog:P.isFromGameChangeDialog?s.wye.TRUE:s.wye.FALSE,gameShortName:x,updateCheckDuration:this.gameLaunchDurations.get(b.UpdateCheck).duration,status:this.getGameLaunchTelemetryStatus(g),errorDetails:g?g.errorDetails:"",streamerClientSetupDuration:this.gameLaunchDurations.get(s.FRL.StreamerClientSetupDuration).duration,streamerConnectionDuration:this.gameLaunchDurations.get(s.FRL.StreamerConnectionDuration).duration,seatConfigDuration:this.gameLaunchDurations.get(s.FRL.SeatConfigDuration).duration,streamingStartDuration:this.gameLaunchDurations.get(s.FRL.StreamingStartDuration).duration,featuresState:this.gameFeatureState,accountLinks:this.getAccountLinksData()});this.logger.info("Printing seat setup event sequence ",this.seatSetupEventSequence),this.telemetryService.push(B,null,this.guestModeService.isGuestMode?{useBeacon:!0}:null),this.cleanupGameLaunchMetrics()})}cleanupGameLaunchMetrics(){this.serverRoutingService.resetLbrStatus(),this.networkTestService.resetNetworkTestStatus(),this.resetNetworkTestResult(),this.resetResumeType(),this.resetGameLaunchDurationsMatrix(),this.gameLaunchAnalyticsService.resetGameLaunchMetadata(!0)}}return f.\u0275fac=function(g){return new(g||f)(w.LFG(a.ed),w.LFG(h.y0),w.LFG(u.o),w.LFG(l.bF),w.LFG(s.XS0),w.LFG(s.GKb),w.LFG(a.dF),w.LFG(s.R2C),w.LFG(s.mw3),w.LFG(s.V89),w.LFG(s.unb),w.LFG(s.o15),w.LFG(s.qMk))},f.\u0275prov=w.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},59780:(He,de,e)=>{"use strict";e.d(de,{y:()=>n});var n=(()=>{return(i=n||(n={}))[i.AUTO_LOGIN=0]="AUTO_LOGIN",i[i.MANUAL_LOGIN=1]="MANUAL_LOGIN",i[i.EMAIL_VERIFICATION=2]="EMAIL_VERIFICATION",n;var i})()},40519:(He,de,e)=>{"use strict";e.d(de,{r:()=>s});var n=e(89166),i=e(19481),D=e(202),y=e(12556),T=e(2316),r=e(6484),a=e(43124);let s=(()=>{class p{constructor(t,w,h,u,o){this.streamingManagerService=w,this.distributedTracingUtilService=h,this.networkConfigurationService=u,this.telemetryService=o,this.gameLaunchStepList=[i.$D.UpdateCheck,i.$D.PreStreaming,i.$D.Authentication,i.$D.PlatformSelection,i.$D.Authorization,i.$D.NetworkTest,i.$D.Loading],this.logger=t.getLogger("gameSessionDistributedTracingService"),this.streamerStateToSpanMap=new Map}getSpanName(t){switch(t){case i.$D.UpdateCheck:return n.j1.UpdateCheck;case i.$D.PreStreaming:return n.j1.PreStreaming;case i.$D.Authentication:return n.j1.StreamerAuthentication;case i.$D.PlatformSelection:return n.j1.PlatformSelection;case i.$D.Authorization:return n.j1.StreamerAuthorization;case i.$D.NetworkTest:return n.j1.StreamerNetworktest;case i.$D.Loading:return n.j1.SessionLoading;default:return t.name}}getStreamingManagerCallbacks(t){return{callbackContext:this,onStateBegin:this.generateBeginStateCallback(t).bind(this),onStateEnd:this.generateEndStateCallback(t).bind(this),onTerminalError:w=>this.onErrorState(t,w)}}generateBeginStateCallback(t){return()=>{this.logger.info("Generating Span for state:",t.name);const w=this.getSpanName(t),h=this.distributedTracingUtilService.startSpan(w,this.gameLaunchSpan);this.streamerStateToSpanMap.set(t,h)}}generateEndStateCallback(t){return()=>{const w=this.streamerStateToSpanMap.get(t);(0,D.isNil)(w)||(this.logger.info("Closing span for state:",t.name),t===i.$D.Authentication&&this.gameLaunchSpan.setTag(n.NI.LoginWindowShown,this.telemetryService.getScreen()!==y.CGJ.ScreenAutoLogin),this.distributedTracingUtilService.closeSpan(w))}}onErrorState(t,w){if(t===w.errorSourceState){(0,D.isNil)(this.gameLaunchSpan)||(this.gameLaunchSpan.setTag(n.NI.Error,!0),this.gameLaunchSpan.setTag(n.NI.FailurePoint,w.errorSourceState.name),this.gameLaunchSpan.setTag(n.NI.ErrorType,w.errorData.errorType),this.gameLaunchSpan.setTag(n.NI.ErrorCode,w.errorData.errorCode),this.gameLaunchSpan.setTag(n.NI.HttpStatusCode,w.errorData.httpErrorCode));const h=this.streamerStateToSpanMap.get(t);(0,D.isNil)(h)||h.setTag(n.NI.Error,!0)}this.closeGameLaunchSpan()}subscribeToOverrideZone(){this.networkConfigurationService.getNetworkOverride().subscribe(t=>{(0,D.isNil)(this.gameLaunchSpan)||(this.gameLaunchSpan.setTag(n.NI.RoutingOverrideUsed,!(0,D.isNil)(t)),(0,D.isNil)(t)||(this.gameLaunchSpan.setTag(n.NI.OverrideZoneName,t.name),this.gameLaunchSpan.setTag(n.NI.OverrideZoneAddress,t.address)))})}closeGameLaunchSpan(t){(0,D.isNil)(this.gameLaunchSpan)||((0,D.isNil)(t)||(this.gameLaunchSpan.setTag(n.NI.IsSessionAutoResumed,t.isResume),this.gameLaunchSpan.setTag(n.NI.ErrorDetails,t.errorDetails),this.gameLaunchSpan.setTag(n.NI.Error,t.status!==y.N3X.Success)),this.distributedTracingUtilService.closeSpan(this.gameLaunchSpan))}initGameSessionDistributedTracing(){this.gameLaunchStepList.forEach(t=>{this.streamingManagerService.register(t,this.getStreamingManagerCallbacks(t))})}startGameLaunchSpan(t){this.gameLaunchSpan=this.distributedTracingUtilService.startSpan(n.j1.GameLaunch),this.subscribeToOverrideZone(),this.gameLaunchSpan.setTag(n.NI.LaunchSource,t.launchSource),this.gameLaunchSpan.setTag(n.NI.CmsId,t.cmsId),this.gameLaunchSpan.setTag(n.NI.ShortName,t.shortName)}setTagOnGameLaunchSpan(t,w){(0,D.isNil)(this.gameLaunchSpan)||this.gameLaunchSpan.setTag(t,w)}updateGeronimoLaunchInfo(t,w){(0,D.isNil)(this.gameLaunchSpan)||this.gameLaunchSpan.setTag(n.NI.SessionId,w),this.closeGameLaunchSpan(t)}getCurrentActiveSpan(){return this.streamerStateToSpanMap.get(this.streamingManagerService.getCurrentState())}}return p.\u0275fac=function(t){return new(t||p)(T.LFG(r.ed),T.LFG(i.bF),T.LFG(n.Dc),T.LFG(y.XS0),T.LFG(a.y0))},p.\u0275prov=T.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},60:(He,de,e)=>{"use strict";e.d(de,{wu:()=>n.w,$e:()=>n.$,V$:()=>i.V,BJ:()=>D.B});var n=e(63483),i=e(80354),D=e(41023)},41023:(He,de,e)=>{"use strict";e.d(de,{B:()=>y});var n=e(53466),i=e(2316);e(80354),e(6484);let y=(()=>{class T{constructor(a,s,p,l,t){this.inputControl=p,this.logTag=l,this.osrBaseLogger=s.getLogger("OsrBaseComponent/"+l),this.osrHandler=a.createOsrHandler(l),this.hostClasses=["streamer-osr-component-flex"],t&&(this.hostClasses=this.hostClasses.concat(t)),this.hostClass=this.hostClasses.join(" ")}ngOnInit(){this.openOsr()}ngOnDestroy(){this.osrBaseLogger.info("ngOnDestroy closing and destroying osr handle"),this.osrHandler.closeAndDestroy().pipe((0,n.q)(1)).subscribe(a=>{this.osrBaseLogger.info("Closed osr, state after close: "+a)},a=>{this.osrBaseLogger.error("Received error when closing osr: ",a)})}setInputControl(a){this.osrBaseLogger.info("Setting input control after init to "+a),this.inputControl=a,this.openOsr()}openOsr(){this.osrBaseLogger.info("opening osr for",this.logTag,"with inputControl = "+this.inputControl),this.osrHandler.open(this.inputControl).pipe((0,n.q)(1)).subscribe(a=>{this.osrBaseLogger.info("Opened osr with state "+a)},a=>{this.osrBaseLogger.error("Received error when opening osr: ",a)})}}return T.\u0275fac=function(a){i.$Z()},T.\u0275dir=i.lG2({type:T,hostVars:2,hostBindings:function(a,s){2&a&&i.Tol(s.hostClass)}}),T})()},80354:(He,de,e)=>{"use strict";e.d(de,{V:()=>y});var n=e(63483),i=e(2316),D=e(6484),m=e(22573);let y=(()=>{class T{constructor(a,s,p){this.loggingService=a,this.bridgeService=s,this.spatialNavigationService=p,this.logger=a.getLogger("gfn/osr-handler-service")}createOsrHandler(a){return this.logger.info("Creating new OsrHandler instance"),new n.w(this.loggingService,this.bridgeService,a,this.spatialNavigationService)}}return T.\u0275fac=function(a){return new(a||T)(i.LFG(D.ed),i.LFG(D.dF),i.LFG(m.jr))},T.\u0275prov=i.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},63483:(He,de,e)=>{"use strict";e.d(de,{$:()=>y,w:()=>a});var n=e(33927),i=e(202),m=e(2984),y=(()=>{return(s=y||(y={}))[s.Closed=0]="Closed",s[s.Open=1]="Open",s[s.OpenWithInput=2]="OpenWithInput",y;var s})();const r="OsrHandler has already been destroyed";let a=(()=>{class s{constructor(l,t,w,h){this.bridgeService=t,this.spatialNavigationService=h,this.desiredOsrState=y.Closed,this.logTag="",this.logger=l.getLogger("gfn/osr-handler"),this.destroyed=!1,this.logTag=w,s.registeredHandlers.push(this),this.logger.info("Created new OSR component",this.logTag)}static getStringListOfRegisteredHandlers(){let l="";return this.registeredHandlers.forEach(t=>l+=`\nState: ${t.desiredOsrState}, Parent: ${t.logTag}`),l}static clearHandlers(){this.registeredHandlers=[]}static getHighestRequestedState(){return 0===s.registeredHandlers.length?y.Closed:s.registeredHandlers.reduce((l,t)=>l.desiredOsrState>t.desiredOsrState?l:t).desiredOsrState}convertOsrReturnToOsrState(l,t){switch(l){case"osrOpen":return t?y.OpenWithInput:y.Open;case"osrClose":return y.Closed;default:return this.logger.error("Unknown osr return string: "+l+" returning closed"),y.Closed}}open(l=!1){if(this.destroyed)throw new Error(r);return this.desiredOsrState=l?y.OpenWithInput:y.Open,this.executeCommandForDesiredState(s.getHighestRequestedState())}close(){if(this.destroyed)throw new Error(r);return this.desiredOsrState=y.Closed,this.executeCommandForDesiredState(s.getHighestRequestedState())}closeAndDestroy(){if(this.destroyed)throw new Error(r);return this.desiredOsrState=y.Closed,this.destroyed=!0,s.registeredHandlers=(0,i.without)(s.registeredHandlers,this),this.executeCommandForDesiredState(s.getHighestRequestedState())}executeCommandForDesiredState(l){this.logger.info("List of all handlers, highest requested state:",l,s.getStringListOfRegisteredHandlers());let w,t=!1;switch(l){case y.OpenWithInput:t=!0,w=this.openOsrInternal(t);break;case y.Open:w=this.openOsrInternal(t);break;case y.Closed:w=this.closeOsrInternal();break;default:this.logger.error("Unknown desired osr state: "+l+" calling close"),w=this.closeOsrInternal()}return w.pipe((0,n.U)(h=>this.convertOsrReturnToOsrState(h,t)))}openOsrInternal(l){return this.spatialNavigationService.activate(l),this.bridgeService.executeCommand(m.Gh.Gfn.Streaming.OpenOsr,{enableInput:l})}closeOsrInternal(){return this.spatialNavigationService.activate(!1),this.bridgeService.executeCommand(m.Gh.Gfn.Streaming.CloseOsr)}}return s.registeredHandlers=[],s})()},91279:(He,de,e)=>{"use strict";e.d(de,{m:()=>a});var n=e(76491),i=e(90490),D=e(6484),m=e(19481),y=e(20088),T=e(2316),r=e(12556);let a=(()=>{class s{constructor(l,t,w,h,u,o){this.streamingManagerService=t,this.systemInfo=w,this.networkConfigService=h,this.networkStatusService=u,this.guestModeService=o,this.networkConditionsData=new n.X(null),this._skipPostSessionTips=!0,this.logger=l.getLogger("gfn/postSessionConnection")}get skipPostSessionTips(){return this._skipPostSessionTips}set skipPostSessionTips(l){this._skipPostSessionTips=l}get networkConditionsData$(){return this.networkConditionsData.asObservable()}initializeStreamingUi(){this.streamingManagerService.register(m.$D.PostSessionConnection,{callbackContext:this,onStateBegin:this.onStateStarted,onStateEnd:this.onStateEnd})}closeDialog(){this.shownUiHandle&&(this.logger.info("closing post connection dialog"),this.shownUiHandle.hide(),this.shownUiHandle=null,this.uiHandle.goToNext(),this.uiHandle=null)}setNetworkConditions(){this.skipPostSessionTips=!1,this.networkStatusService.isOnline?(0,i.$R)(this.systemInfo.getNetworkInformation(),this.networkConfigService.getNetworkOverride()).pipe((0,y.P)()).subscribe(([l,t])=>{this.setNetworkConditionsInfo(!!l&&"1"===l.IsVPN,t,l?l.NetworkType:D.VV.Unknown,!1)},l=>this.logger.error("failed to set post session network conditions while online. Error: ",l)):this.networkConfigService.getNetworkOverride().pipe((0,y.P)()).subscribe(l=>{this.setNetworkConditionsInfo(!1,l,D.VV.Unknown,!0)},l=>this.logger.error("failed to set post session network conditions while offline. Error: ",l))}setNetworkConditionsInfo(l,t,w,h){const u={isVpn:l,zoneOverride:t,networkType:w,isOffline:h};this.logger.info("post session network conditions are: ",u),this.networkConditionsData.next(u)}onStateStarted(l){var t;this.uiHandle=l.handle,this.logger.info("skipping post session tips: ",this.skipPostSessionTips),this.skipPostSessionTips||this.guestModeService.isGuestMode&&!(null===(t=this.guestModeService.getGuestModeConfig())||void 0===t?void 0:t.isPostSessionTipsEnabled)?this.uiHandle.goToNext():(this.setNetworkConditions(),this.uiHandle.restoreWindow(),this.skipPostSessionTips=!0,this.uiHandleSub=this.uiHandle.show(["postSessionConnection"]).subscribe(w=>{this.shownUiHandle=w}))}onStateEnd(){this.uiHandleSub&&this.uiHandleSub.unsubscribe(),this.shownUiHandle&&(this.shownUiHandle=null)}}return s.\u0275fac=function(l){return new(l||s)(T.LFG(D.ed),T.LFG(m.bF),T.LFG(D.Ob),T.LFG(r.XS0),T.LFG(D._J),T.LFG(r.o15))},s.\u0275prov=T.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},11169:(He,de,e)=>{"use strict";e.d(de,{f:()=>p});var n=e(12556),i=e(202),m=e(2316),y=e(87335),T=e(57390),r=e(6484),a=e(13335);let p=(()=>{class l{constructor(w,h,u,o,f){this.applicationLifetimeService=w,this.sharedStorageService=h,this.updateService=u,this.loggingService=o,this.streamerConfigService=f,this.logger=o.getLogger("StreamerRelaunchService")}startRelaunch(w){return this.ensureNewRelaunchStateMachine(),this.currentStateMachine.startRelaunch(w,!0)}ensureNewRelaunchStateMachine(){!(0,i.isNil)(this.currentStateMachine)&&this.currentStateMachine.isActive()&&this.currentStateMachine.cancelRelaunch(),this.currentStateMachine=new n.WM6(this.applicationLifetimeService,this.sharedStorageService,this.updateService,this.loggingService),this.currentStateMachine.setRelaunchShutdownHandler(this.relaunchShutdownHandler.bind(this))}relaunchShutdownHandler(){return this.currentStateMachine.appendRelaunchSharedData({cmsId:String(this.streamerConfigService.activeConfig.cmsId),releaseHighlight:!0})}}return l.\u0275fac=function(w){return new(w||l)(m.LFG(y.Ll),m.LFG(T.OA),m.LFG(n.GMF),m.LFG(r.ed),m.LFG(a.o))},l.\u0275prov=m.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},76738:(He,de,e)=>{"use strict";e.d(de,{S:()=>T});var n=e(12556),i=e(2316),D=e(6484),m=e(13335),y=e(19481);let T=(()=>{class r{constructor(s,p,l){this.streamerConfigService=p,this.streamerManagerService=l,this.logger=s.getLogger("gfn/RelaunchGameService")}relaunchGame(){const s=(0,n.IGn)(this.streamerConfigService.activeConfig);this.logger.info("Same Game relaunch requested. Setting exit URL to",s),this.streamerManagerService.exitStreamer({exitUrl:s}).subscribe()}relaunchNewGame(s){const p=s.indexOf("#"),l=s.slice(p+1);this.logger.info("New Game relaunch requested. Setting exit URL to",l),this.streamerManagerService.exitStreamer({exitUrl:l}).subscribe()}}return r.\u0275fac=function(s){return new(s||r)(i.LFG(D.ed),i.LFG(m.o),i.LFG(y.bF))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},13335:(He,de,e)=>{"use strict";e.d(de,{o:()=>y});var n=e(76491),i=e(3076),D=e(12556),m=e(2316);let y=(()=>{class T{constructor(){this.streamerConfig=new n.X(this.createStreamerConfigFromSearchParameters())}get activeConfig(){return(0,i.IM)(this.streamerConfig.value)}set activeConfig(a){this.streamerConfig.next((0,i.IM)(a))}get config$(){return this.streamerConfig.asObservable()}createStreamerConfigFromSearchParameters(){const a=window.location.hash;return(0,D.A8q)(a)}}return T.\u0275fac=function(a){return new(a||T)},T.\u0275prov=m.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},7830:(He,de,e)=>{"use strict";e.d(de,{fD:()=>n,GR:()=>i,EP:()=>D,pY:()=>y,D8:()=>T,ym:()=>r});const n={width:470,height:618},i={width:560,height:166},D={width:560,height:146};var y=(()=>{return(a=y||(y={}))[a.InvalidParams=0]="InvalidParams",a[a.NetworkError=1]="NetworkError",a[a.ZeroCmsId=2]="ZeroCmsId",a[a.ScheduledMaintenance=3]="ScheduledMaintenance",a[a.UnsupportedPlatform=4]="UnsupportedPlatform",a[a.UnsupportedBrowser=5]="UnsupportedBrowser",a[a.PWARequired=6]="PWARequired",a[a.NativeAppOnly=7]="NativeAppOnly",y;var a})(),T=(()=>{return(a=T||(T={}))[a.UnsupportedRegion=0]="UnsupportedRegion",a[a.NotAffiliateEntitled=1]="NotAffiliateEntitled",a[a.NotEntitled=2]="NotEntitled",a[a.Unknown=3]="Unknown",T;var a})(),r=(()=>{return(a=r||(r={}))[a.MissingCmsId=0]="MissingCmsId",a[a.FailedToFetchAppStores=1]="FailedToFetchAppStores",a[a.PlatformSelectionCancelled=2]="PlatformSelectionCancelled",a[a.UnexpectedError=3]="UnexpectedError",r;var a})()},64199:(He,de,e)=>{"use strict";e.d(de,{Gj:()=>n,b_:()=>i,wO:()=>D,Ac:()=>y});const n={width:789,height:250,resultHeight:549,widthError:480,heightError:168,heightErrorSmall:148,widthErrorNetworkTest:744,heightErrorNetworkTest:312},i=549,D="rating",y="input"},11020:(He,de,e)=>{"use strict";e.d(de,{c:()=>D});var n=e(12556),i=e(14179);class D{constructor(y){this.appConfig=y}formatErrorCode(y){return(0,n.h6z)(y)}getErrorLink(y,T){let r,a;switch(T){case i.Sj.NVB_R_UDP_BUFFER_TOO_SMALL:r=n.hEi.UdpBufferTips,a="error.udpBufferTips";break;case i.Sj.NVB_R_FIREWALL_BLOCK:r=n.hEi.GfnPcNetHelpFirewall,a="error.checkFirewallSettingsTips";break;case i.Sj.NVB_R_WIFI_CONNECTIVITY_ISSUE1:case i.Sj.NVB_R_WIFI_CONNECTIVITY_ISSUE2:case i.Sj.NVB_R_WIFI_CONNECTIVITY_ISSUE3:case i.Sj.GFNPC_CLIENT_FRAME_LOSS_TIMEOUT_ERROR:r=n.hEi.GfnPcNetHelpWifi,a="common.troubleshootingTips";break;case i.dq.NVB_R_GFN_GAME_NOT_OWNED_BY_USER:r="",a="";break;case i.dq.NVB_R_VERSION_MISMATCH:r=n.hEi.GfnPcHelpUpdate,a="error.manualUpdateTips";break;case i.dq.NVB_R_SERVER_OUT_OF_SERVICE:case i.dq.NVB_R_SEVER_MAINTENANCE_MODE:case i.dq.NVB_R_INVALID_SERVER_RESPONSE:r=n.hEi.GfnServerStatus,a="common.viewServerStatus";break;case i.dq.NVB_R_REGION_NOT_SUPPORTED_FOR_STREAMING:case i.dq.NVB_R_REGION_NOT_SUPPORTED_FOR_STREAMING_WORKAROUND:r=n.hEi.GfnPcUnSupportedRegion,a="error.moreInformation";break;case i.dq.NVB_R_SESSION_ICE_CONNECTION_FAILED:return{url:"https://nvidia.custhelp.com/app/answers/detail/a_id/5244/",text:"common.learnMore"};default:T>=i.dq.NVB_R_SERVER_ERROR_BEGIN&&T<=i.dq.NVB_R_SERVER_ERROR_MAX?(r=n.hEi.GfnServerStatus,a="common.viewServerStatus"):this.isVideoDecoderError(T)?(r=n.hEi.GfnPcHelpMissingDecoder,a="common.learnMore"):r=""}return 0===r.length?{url:"",text:""}:{url:this.appConfig.redirect.serverUrl+y+"&page="+r,text:a,shortUrl:n.hD7[r]}}isVideoDecoderError(y){return y>>>12===i.Sj.VIDEO_DECODER_ERROR_MASK||y===i.Sj.VIDEO_DECODER_CREATION_FAILED}}},28151:(He,de,e)=>{"use strict";e.d(de,{u:()=>y,C:()=>D});var n=e(14179),i=e(11020);class D extends i.c{constructor(r){super(r),this.reasonToText=new Map([[n.Y6.NVB_SN_STOPPED_UNINTENTIONALLY,"error.sessionTerminated"],[n.Y6.NVB_SN_ENTITLEMENT_TIMEOUT,"error.entitlementTimeout"],[n.Y6.NVB_SN_STREAMER_NETWORK_ERROR,"error.streamerNetworkError"],[n.Y6.NVB_SN_EXITED_DUE_TO_USER_IDLE_TIMEOUT,"error.userIdleTimeout"],[n.Y6.NVB_SN_EXITED_DUE_TO_SESSION_TIMELIMIT,"error.sessionTimelimit"],[n.Y6.NVB_SN_TERMINATED_BY_OPERATOR,"error.maintenance"],[n.Y6.NVB_SN_TERMINATED_WINDOWED_MODE,"error.windowedMode"],[n.Y6.NVB_SN_TERMINATED_DUE_TO_SYSTEM_SLEEP,"error.systemWentToSleep"],[n.Y6.NVB_SN_TERMINATED_MULTIPLE_LOGIN,"error.multipleLogin"],[n.Y6.NVB_SN_TERMINATED_ANOTHER_CLIENT,"error.playingOnAnotherStream"],[n.Y6.NVB_SN_TERMINATED_GAME_NOT_OWNED_BY_USER,"error.gameNotOwnedByUser"],[n.Y6.NVB_SN_PAUSED_DUE_TO_SYSTEM_SLEEP,"error.systemWentToSleep"],[n.Y6.NVB_SN_INIT_FAILED_DUE_TO_SYSTEM_SLEEP,"error.systemSleepDuringSessionInit"],[n.Y6.NVB_SN_PM_TERMINATED_MAINTENANCE_MODE,"error.scheduleMaintenanceText"]])}getErrorInfo(r,a,s,p,l,t){const w=this.getErrorText(s,p),h=this.getErrorCode(s,p),u=this.getTerminationErrorLink(r,s,p);return{errorCode:h,errorText:w,linkText:u.text,linkUrl:u.url,isErrorResumable:a,appName:l,appStore:t,shortUrl:u.shortUrl}}getErrorText(r,a){return r===n.Y6.NVB_SN_STREAMING_START_FAILED?a===n.Sj.NVB_R_UDP_BUFFER_TOO_SMALL?"error.increaseUdpBuffer":"error.failedToConnect":r===n.Y6.NVB_SN_PAUSED_BY_USER&&a===n.Sj.GFNPC_CLIENT_FRAME_LOSS_TIMEOUT_ERROR?"error.streamerNetworkError":a===n.Sj.NVST_DISCONN_SERVER_VFP_PROTECTED_CONTENT?"error.protectedContent":this.reasonToText.has(r)?this.reasonToText.get(r):"error.sessionTerminated"}getErrorCode(r,a){if(r===n.Y6.NVB_SN_TERMINATED_DUE_TO_SYSTEM_SLEEP||r===n.Y6.NVB_SN_EXITED_DUE_TO_USER_IDLE_TIMEOUT||r===n.Y6.NVB_SN_EXITED_DUE_TO_SESSION_TIMELIMIT||r===n.Y6.NVB_SN_INIT_FAILED_DUE_TO_SYSTEM_SLEEP)return"";let s;return s=a||r,this.formatErrorCode(s)}getTerminationErrorLink(r,a,s){return this.getErrorLink(r,s||a)}}var m=e(202);class y extends i.c{constructor(r){super(r),this.reasonToText=new Map([[n.dq.NVB_R_AUTH_ERR_UNREACHABLE_AUTH_SERVER,"error.cloudDown"],[n.dq.NVB_R_GES_NOT_REACHABLE,"error.cloudDown"],[n.dq.NVB_R_SERVER_OUT_OF_SERVICE,"error.cloudDown"],[n.dq.NVB_R_SEVER_MAINTENANCE_MODE,"error.maintenance"],[n.dq.NVB_R_INSUFFICIENT_RESOURCES,"error.insufficientResources"],[n.dq.NVB_R_STREAMER_NETWORK_ERROR,"error.networkError"],[n.dq.NVB_R_STREAMER_CONNECT_FAILED,"error.networkError"],[n.dq.NVB_R_SESSION_NOT_ACTIVE,"error.userIdleTimeout"],[n.dq.NVB_R_NOT_SUPPORTED,"error.restartApp"],[n.dq.NVB_R_AUTH_ERR_UNSUPPORTED_PROTOCOL,"error.restartApp"],[n.dq.NVB_R_AUTH_ERR_UNSUPPORTED_TOKEN_FORMAT,"error.restartApp"],[n.dq.NVB_R_AUTH_ERR_TOKEN_NOT_UPDATED,"error.restartApp"],[n.dq.NVB_R_PREFERRED_CONTROLLER_NOT_FOUND,"error.restartApp"],[n.dq.NVB_R_VERSION_MISMATCH,"error.manualUpdateRequired"],[n.dq.NVB_R_OS_ERROR,"error.reinstallApp"],[n.dq.NVB_R_AUTH_ERR_UNAUTHORIZED_CLIENT,"error.reinstallApp"],[n.dq.NVB_R_APP_TITLE_FENCED,"error.titleFenced"],[n.dq.NVB_R_APPLICATION_PATCHING,"error.titleFenced"],[n.dq.NVB_R_APP_MAINTENANCE_STATUS,"fencedStatus.offlineSupplementalText"],[n.dq.NVB_R_APP_MAINTENANCE_STATUS_WORKAROUND,"fencedStatus.offlineSupplementalText"],[n.dq.NVB_R_INVALID_APP_IDENTIFIER,"error.invalidId"],[n.dq.NVB_R_USER_IS_NOT_ENTITLED,"error.affiliateAccessError"],[n.dq.NVB_R_REGION_NOT_SUPPORTED_FOR_STREAMING,"error.gfnNotAvailableInRegion"],[n.dq.NVB_R_REGION_NOT_SUPPORTED_FOR_STREAMING_WORKAROUND,"error.gfnNotAvailableInRegion"],[n.dq.NVB_R_TOO_MANY_SERVER_REQUESTS,"error.tooManyRequests"],[n.dq.NVB_R_SESSION_TERMINATED_MULTIPLE_LOGIN,"error.multipleLogin"],[n.dq.NVB_R_SESSION_TERMINATED_ANOTHER_CLIENT,"error.playingOnAnotherStream"],[n.dq.NVB_R_REQUIRED_SEAT_INSTANCE_TYPE_NOT_SUPPORTED,"error.instanceTypeNotSupported"],[n.dq.NVB_R_REQUIRED_SEAT_INSTANCE_TYPE_NOT_SUPPORTED_WORKAROUND,"error.instanceTypeNotSupported"],[n.dq.NVB_R_SERVER_SESSION_QUEUE_LENGTH_EXCEEDED,"error.sessionQueueLengthExceeded"],[n.dq.NVB_R_SERVER_SESSION_QUEUE_LENGTH_EXCEEDED_WORKAROUND,"error.sessionQueueLengthExceeded"],[n.dq.NVB_R_SESSION_GAME_BINARIES_NOT_AVAILABLE_IN_REGION,"error.gameBinariesNotAvailableInRegion"],[n.dq.NVB_R_SESSION_GAME_BINARIES_NOT_AVAILABLE_IN_REGION_WORKAROUND,"error.gameBinariesNotAvailableInRegion"],[n.dq.NVB_R_SESSION_IN_QUEUE_ABANDONED,"error.gameLaunchTimeout"],[n.dq.NVB_R_ZONE_MAITENANCE_STATUS,"error.scheduleMaintenanceLoadingText"],[n.dq.NVB_R_ZONE_MAITENANCE_STATUS_WORKAROUND,"error.scheduleMaintenanceLoadingText"],[n.dq.NVB_R_SESSION_REMOVED_FROM_QUEUE_MAINTENANCE,"error.scheduleMaintenanceLoadingText"],[n.dq.NVB_R_SESSION_REMOVED_FROM_QUEUE_MAINTENANCE_WORKAROUND,"error.scheduleMaintenanceLoadingText"],[n.dq.NVB_R_SESSION_ICE_CONNECTION_FAILED,"error.knowledgeSupportPageMessage"]])}getErrorInfo(r,a,s,p,l){const t=this.getErrorText(s),w=this.getErrorCode(s,p),h=this.getFailedErrorLink(r,s,p);return{errorCode:w,errorText:t,linkText:h.text,linkUrl:h.url,isErrorResumable:a,reasonCode:s,appName:l,shortUrl:h.shortUrl}}getErrorText(r){return r>=n.dq.NVB_R_NETWORK_ERROR&&r<=n.dq.NVB_R_UNEXPECTED_HTTPREDIRECT?"error.localNetworkError":this.reasonToText.has(r)?this.reasonToText.get(r):"error.sessionFailed"}getErrorCode(r,a){let s;return s=(0,m.isArray)(a)&&a.length>0?a[0]:r,s===n.dq.NVB_R_APPLICATION_PATCHING||s===n.dq.NVB_R_APP_MAINTENANCE_STATUS||s===n.dq.NVB_R_APP_MAINTENANCE_STATUS_WORKAROUND||s===n.dq.NVB_R_REQUIRED_SEAT_INSTANCE_TYPE_NOT_SUPPORTED||s===n.dq.NVB_R_USER_IS_NOT_ENTITLED||s===n.dq.NVB_R_REQUIRED_SEAT_INSTANCE_TYPE_NOT_SUPPORTED_WORKAROUND||s===n.dq.NVB_R_REGION_NOT_SUPPORTED_FOR_STREAMING||s===n.dq.NVB_R_REGION_NOT_SUPPORTED_FOR_STREAMING_WORKAROUND||s===n.dq.NVB_R_SESSION_GAME_BINARIES_NOT_AVAILABLE_IN_REGION||s===n.dq.NVB_R_SESSION_GAME_BINARIES_NOT_AVAILABLE_IN_REGION_WORKAROUND||s===n.dq.NVB_R_SESSION_NOT_ACTIVE?"":this.formatErrorCode(s)}getFailedErrorLink(r,a,s){let p;return p=(0,m.isArray)(s)&&s.length>0?s[0]:a,this.getErrorLink(r,p)}}},4389:(He,de,e)=>{"use strict";e.d(de,{r:()=>n,o:()=>i});var n=(()=>{return(D=n||(n={})).HotKey="Hotkey",D.Igo="IGO",D.Osc="OSC",n;var D})(),i=(()=>{return(D=i||(i={})).Send="Send",D.ToggleTextVisibility="ToggleTextVisibility",i;var D})()},49686:(He,de,e)=>{"use strict";e.d(de,{q:()=>f});var n=e(3786),i=e(202),D=e(28151),m=e(7830),y=e(19481),T=e(61486),r=e(14179),a=e(11020);class s extends a.c{getErrorInfo(g,I,G){const x=this.getErrorText(G),E=this.formatErrorCode(G),P=this.getErrorLink(g,G);return{errorCode:E,errorText:x,linkText:P.text,linkUrl:P.url,isErrorResumable:I,shortUrl:P.shortUrl}}getErrorText(g){return this.isVideoDecoderError(g)?"error.minRequirement":"error.invalidParams"}}var p=e(12556),l=e(73159),t=e(79902),w=e(53466),h=e(2316),u=e(6484);let f=(()=>{class c{constructor(I,G,x,E,P,v,O,C,_,F){this.streamingManagerService=G,this.streamingService=x,this.localeService=E,this.ecomService=P,this.gfnSdkService=O,this.guestModeService=C,this.unsupportedBrowserService=_,this.telemetryUtilService=F,this.genericErrorPath=["streamerError","genericError"],this.nesErrorPath=["streamerError","nesAuthError"],this.ecomNesErrorPath=["streamerError","entitlementError"],this.sessionErrorPath=["streamerError","sessionError"],this.nonUpgradableUser=!1,this.canUpgradeOnSessionLength=!1,this.userMembership={},this.unsupportedGfnErrorExists=!1,this.logger=I.getLogger("gfn/errorService"),this.geronimoTerminationErrors=new D.C(v),this.geronimoFailedErrors=new D.u(v),this.geronimoBridgeErrors=new s(v),this.routeDataGenerators=new Map,this.routeDataGenerators.set(y.fR.GenericError,this.generateGenericErrorData.bind(this)),this.routeDataGenerators.set(y.fR.NesAuthError,this.generateNesErrorData.bind(this)),this.routeDataGenerators.set(y.fR.GeronimoError,this.generateStreamerErrorData.bind(this)),this.routeDataGenerators.set(y.fR.PreStreamGeronimoError,this.generatePreStreamerErrorData.bind(this)),this.routeDataGenerators.set(y.fR.EntitlementError,this.generateEntitlementErrorData.bind(this)),this.localeService.localeChanged.subscribe(V=>{this.locale=V})}initializeStreamingUi(){this.checkUserEntitlement(),this.streamingManagerService.register(y.$D.Error,{callbackContext:this,onStateBegin:this.routeErrorState,onStateEnd:this.onStateEnd}),this.streamingManagerService.register(y.$D.ResumableError,{callbackContext:this,onStateBegin:this.onErrorState,onStateEnd:this.onStateEnd}),this.streamingManagerService.register(y.$D.TerminalError,{callbackContext:this,onStateBegin:this.onErrorState,onStateEnd:this.onStateEnd})}closeErrorDialog(){this.sendDialogClosedTelemetry(),this.shownUiHandle?(this.logger.info("closing error dialog"),this.shownUiHandle.hide(),this.shownUiHandle=null,this.uiHandle.goToDone(),this.uiHandle=null):(this.logger.error("closeErrorDialog was called while UI was not shown."),this.uiHandle&&(this.logger.info("Going to the done state."),this.uiHandle.goToDone(),this.uiHandle=null))}isErrorResumable(){return this.streamingService.isSessionResumable()}routeErrorState(I){this.isErrorResumable()?I.errorUIHandle.goToResumableError(I.data):I.errorUIHandle.goToTerminalError(I.data)}onErrorState(I){var G,x,E,P,v,O;if(this.uiHandle=I.handle,this.guestModeService.isGuestMode)return(null===(x=null===(G=I.data)||void 0===G?void 0:G.errorData)||void 0===x?void 0:x.errorCode)===r.Sj.GFNPC_CLIENT_GUESTMODE_SESSION_LIMIT_PER_DEVICE_REACHED?this.guestModeService.updateGuestModeExitUrl(p.et_.GFN_Error_SessionLimitReached):(null===(P=null===(E=I.data)||void 0===E?void 0:E.errorData)||void 0===P?void 0:P.errorCode)===r.Sj.GUEST_MODE_CAMAPAIGN_DISABLED?this.guestModeService.updateGuestModeExitUrl(p.et_.Campaign_Suspended):(null===(O=null===(v=I.data)||void 0===v?void 0:v.errorData)||void 0===O?void 0:O.errorCode)!==r.Y6.NVB_SN_EXITED_DUE_TO_SESSION_TIMELIMIT&&this.guestModeService.updateGuestModeExitUrl(p.et_.GFN_Error),void this.closeErrorDialog();const C=this.generateErrorData(I.data);this.logger.info("Final error route data:",C),this.uiHandleSub=this.uiHandle.show(C.path,C.data).subscribe(_=>{this.shownUiHandle=_,this.sendDialogOpenTelemetryOnError(I.data)})}sendDialogOpenTelemetryOnError(I){var G;switch(null===(G=null==I?void 0:I.errorData)||void 0===G?void 0:G.errorCode){case m.pY.UnsupportedBrowser:case m.pY.UnsupportedPlatform:case m.pY.PWARequired:case m.pY.NativeAppOnly:this.unsupportedGfnErrorExists=!0,this.telemetryUtilService.sendPopUpDialogShownEvent(p.ItH.Unsupported_Browser_Or_Platform_Game_Launch)}}sendDialogClosedTelemetry(){this.unsupportedGfnErrorExists&&this.telemetryUtilService.sendPopUpDialogClosedEvent(p.ItH.Unsupported_Browser_Or_Platform_Game_Launch,p.XzU.Dialog_Closed)}onStateEnd(){this.unsupportedGfnErrorExists=!1,this.uiHandleSub&&this.uiHandleSub.unsubscribe(),this.shownUiHandle&&(this.shownUiHandle=null)}generateErrorData(I){if(!this.routeDataGenerators.has(I.errorData.errorType))throw new Error("Cannot generate error route data for error type: "+I.errorData.errorType);return this.routeDataGenerators.get(I.errorData.errorType)(I.errorData)}generateNesErrorData(I){return this.logger.info("Generating Nes error data from:",I),{path:this.nesErrorPath,size:m.fD,data:{errorCode:I.errorCode}}}generateEntitlementErrorData(I){return this.logger.info("Generating Ecom user membership status error data from:",I),{path:this.ecomNesErrorPath,size:m.fD,data:{useCase:p.vq_.Join}}}generateGenericErrorData(I){this.logger.info("Generating generic error data from:",I);const G={errorText:"error.invalidParams",isErrorResumable:!1},x=this.unsupportedBrowserService.unsupportedBrowserState$.pipe((0,t.w)(P=>this.unsupportedBrowserService.getDialogLink$(P,{anchorLink:!0})));switch(I.errorCode){case m.pY.NetworkError:G.errorText="error.networkError";break;case m.pY.ZeroCmsId:G.errorText="error.desktopShortcutInvalid";break;case m.pY.ScheduledMaintenance:G.errorText="error.scheduleMaintenanceLoadingText",G.reasonCode=r.Y6.NVB_SN_PM_TERMINATED_MAINTENANCE_MODE;break;case m.pY.UnsupportedBrowser:case m.pY.PWARequired:case m.pY.NativeAppOnly:x.pipe((0,w.q)(1)).subscribe(P=>{G.errorText="layout.universalUnsupportedDialogText.unsupportedBrowserHeaderText",G.linkText=P.text,G.linkUrl=P.url,G.shortUrl=P.shortUrl});break;case m.pY.UnsupportedPlatform:x.pipe((0,w.q)(1)).subscribe(P=>{G.errorText="layout.universalUnsupportedDialogText.unsupportedPlatformHeaderText",G.linkText=P.text,G.linkUrl=P.url,G.shortUrl=P.shortUrl})}return{path:this.genericErrorPath,size:m.fD,data:G}}generatePreStreamerErrorData(I){let G;const x=this.isErrorResumable();return I instanceof y.yX&&(0,i.has)(I,"resultInfo.code")?G=this.geronimoBridgeErrors.getErrorInfo(this.locale,x,I.resultInfo.code):I instanceof y.yX&&(0,i.has)(I,"resultInfo.result")&&(0,i.has)(I,"resultInfo.extendedError")?(this.logger.info("Generating GeronimoPreStream error data from:",I,x),G=this.geronimoFailedErrors.getErrorInfo(this.locale,x,I.resultInfo.result,I.resultInfo.extendedError)):(this.logger.info("Unexpected Geronimo error data:",I,x),G={errorText:"error.sessionFailed",isErrorResumable:x}),{path:this.genericErrorPath,size:m.fD,data:G}}generateStreamerErrorData(I){var G,x,E,P,v,O;let C;this.logger.info("Generating Geronimo error data from:",I);const _=I,F=this.isErrorResumable();let V=I.errorCode;if(_.errorEventInfo.event===r.V4.STREAMING_TERMINATED){const S=null===(G=this.streamingService.streamingParams)||void 0===G?void 0:G.digitalStore;if(C=this.geronimoTerminationErrors.getErrorInfo(this.locale,F,V,_.errorEventInfo.extendedCode,null!==(E=null===(x=_.errorEventInfo)||void 0===x?void 0:x.latestStreamedAppName)&&void 0!==E?E:null===(P=this.streamingService.streamingParams)||void 0===P?void 0:P.appName,S),this.updateErrorTextForDefaultAppStore(S,C),this.logger.info("Game session limit reached: ",V," Show upsell dialog? ",this.canUpgradeOnSessionLength),V===r.Y6.NVB_SN_PM_TERMINATED_MAINTENANCE_MODE)return this.logger.info("Stream terminated for scheduled maintenance of zone: ",V),C.reasonCode=V,{path:this.sessionErrorPath,size:m.EP,data:C};if(this.nonUpgradableUser&&V===r.Y6.NVB_SN_EXITED_DUE_TO_SESSION_TIMELIMIT)return{path:this.sessionErrorPath,size:m.GR,data:C};if(this.canUpgradeOnSessionLength&&V===r.Y6.NVB_SN_EXITED_DUE_TO_SESSION_TIMELIMIT)return{path:this.ecomNesErrorPath,size:m.fD,data:{useCase:p.vq_.MaxSessionLengthExceeded}};V===r.Y6.NVB_SN_TERMINATED_GAME_NOT_OWNED_BY_USER&&(this.logger.info("Stream ended because user does not own the game: ",V),C.reasonCode=V)}else{if(this.userMembership.eComFeatureEnabled&&_.errorEventInfo.event===r.V4.SESSION_SETUP_FAILURE&&(_.errorCode===r.dq.NVB_R_SERVER_SESSION_QUEUE_LENGTH_EXCEEDED_WORKAROUND||_.errorCode===r.dq.NVB_R_SERVER_SESSION_QUEUE_LENGTH_EXCEEDED))return{path:this.ecomNesErrorPath,size:m.fD,data:{useCase:p.vq_.QueueLimitExceeded}};{const A=_.errorEventInfo;V=A.result.result,C=this.geronimoFailedErrors.getErrorInfo(this.locale,F,V,A.result.extendedError,null!==(v=null==A?void 0:A.latestStreamedAppName)&&void 0!==v?v:null===(O=this.streamingService.streamingParams)||void 0===O?void 0:O.appName)}}return{path:this.genericErrorPath,size:m.fD,data:C}}updateErrorTextForDefaultAppStore(I,G){I===p.f1U&&"error.gameNotOwnedByUser"===G.errorText&&(G.errorText="error.gameNotOwnedByUserWithoutAppStore")}checkUserEntitlement(){(0,T.aj)([this.ecomService.getUserMembership(),this.gfnSdkService.getAuthType()]).subscribe(([I,G])=>{var x,E;const v=(0,n._T)(I,["product"]);this.logger.info("Check user membership for showing upsell dialog: ",v),this.userMembership=I,this.canUpgradeOnSessionLength=I.eComFeatureEnabled&&I.membershipStatus===p.Tn6.Entitled&&(null===(x=I.subscription)||void 0===x?void 0:x.upsellOptions.betterSessionLengthProductExists),this.nonUpgradableUser=I.membershipStatus===p.Tn6.Entitled&&!(null===(E=I.subscription)||void 0===E?void 0:E.upsellOptions.betterSessionLengthProductExists),G===l.Gr.JWT&&(this.canUpgradeOnSessionLength=!0,this.nonUpgradableUser=!1)})}}return c.\u0275fac=function(I){return new(I||c)(h.LFG(u.ed),h.LFG(y.bF),h.LFG(r.FW),h.LFG(u.OL),h.LFG(p.BHV),h.LFG(p.VKt),h.LFG(l.s),h.LFG(p.o15),h.LFG(p.rHN),h.LFG(p.wU6))},c.\u0275prov=h.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},32431:(He,de,e)=>{"use strict";e.d(de,{S:()=>o});var n=e(68496),D=e(6484),m=e(81134),y=e(9170),T=e(56816),r=e(85816),a=e(53466),s=e(14179),p=e(19481),l=e(2316),t=e(71570),w=e(13335),h=e(12556),u=e(59321);let o=(()=>{class f{constructor(g,I,G,x,E,P,v,O,C){this.streamingManagerService=I,this.sanitizer=G,this.streamerConfigService=x,this.streamingService=E,this.gfcHelperService=P,this.surveyService=v,this.feedbackService=O,this.guestModeService=C,this.surveyURL=null,this.logger=g.getLogger("gfn/streamingFeedback"),this.logger.info("entered streamingFeedback"),this.sessionSetup$=this.streamingService.streamingEvent$.pipe((0,y.h)(_=>_.event===s.V4.SESSION_SETUP_SUCCESS)),this.sessionSetup$.subscribe(_=>{this.sessionStartTime=Date.now(),this.sessionId=this.streamingService.streamingProperties.sessionId},_=>{this.logger.error("Error encountered during has feedback check: ",_)})}initializeStreamingUi(){D.ng.isBrowserPlatform()&&this.gfcHelperService.getAppInstanceId().subscribe(I=>{this.appInstanceId=I}),this.streamingManagerService.register(p.$D.PostStreaming,{callbackContext:this,onStateBegin:this.onStateStarted,onStateEnd:this.onStateEnd})}finishFeedbackState(){this.shownUiHandle?(this.logger.info("Post-game feedback, finishFeedbackState - goToNext state"),this.shownUiHandle.hide(),this.shownUiHandle=null,this.uiHandle.goToNext(),this.uiHandle=null):(this.logger.error("finishFeedbackUIState was called while UI was not shown."),this.uiHandle&&(this.logger.info("Try going to the next state."),this.uiHandle.goToNext()))}onStateStarted(g){var I;this.uiHandle=g.handle,!this.guestModeService.isGuestMode||(null===(I=this.guestModeService.getGuestModeConfig())||void 0===I?void 0:I.isSurveyFeedbackEnabled)?this.uiHandleSub=this.uiHandle.show(["feedback"],{surveyURL:this.surveyURL}).subscribe(G=>{this.shownUiHandle=G},G=>this.logger.error("Error showing Feedback route: ",G)):this.finishFeedbackState()}onStateEnd(){this.uiHandleSub&&this.uiHandleSub.unsubscribe(),this.shownUiHandle&&(this.shownUiHandle=null),this.uiHandle&&(this.uiHandle=null)}resizeWindowForFeedback(){this.uiHandle&&this.uiHandle.restoreWindow()}getSessionDuration(){const g=Date.now()-this.sessionStartTime,I=Math.floor(g/6e4);return this.logger.info("Streaming session duration in minutes: ",I),I}getPostGameSurveyUrl(){return this.isAdminHubSurvey=!1,this.surveyService.isSurveyFeatureAvailable([n.TriggerType.PostGame]).pipe((0,T.b)(g=>g?this.streamerConfigService.config$.pipe((0,r.zg)(I=>this.surveyService.getAvailableSurvey([n.TriggerType.PostGame],`${I.cmsId}`,this.sessionId,this.getSessionDuration())),(0,a.q)(1),(0,r.zg)(I=>{if(I){this.logger.info("AdminHub Post-game Survey is available");const G=this.sanitizer.bypassSecurityTrustResourceUrl(I.surveyContainerUrl);return this.isAdminHubSurvey=!0,this.logger.info("got surveySafeUrl: ",G),this.subscribeToSurveyEvents(I),(0,m.of)(G)}return this.logger.info("AdminHub PostGame Survey is not available, do not show feedback"),(0,m.of)(null)})):(this.logger.info("AdminHub PostGame Survey is not available due to disabled Feature Rollout"),(0,m.of)(null))))}hasAdminHubSurvey(){return this.isAdminHubSurvey}getUser(){return(0,m.of)(!0)}subscribeToSurveyEvents(g){this.surveyEventReferenceSubmitted=(0,n.subscribeToIFrameEvents)({surveyId:g.surveyId,type:n.SurveyEventType.Submitted},this.surveyEventListenerSubmitted.bind(this)),this.surveyEventReferenceDismissed=(0,n.subscribeToIFrameEvents)({surveyId:g.surveyId,type:n.SurveyEventType.Dismissed},this.surveyEventListenerDismissed.bind(this)),this.surveyEventReferenceCloseDialog=(0,n.subscribeToIFrameEvents)({surveyId:g.surveyId,type:n.SurveyEventType.CloseDialog},this.surveyEventListenerCloseDialog.bind(this))}surveyEventListenerSubmitted(){this.logger.info("PostGAME Submitted, closing window"),this.feedbackService.onSurveySent(),this.finishFeedbackState(),this.surveyEventReferenceSubmitted.unsubscribe()}surveyEventListenerDismissed(){this.logger.info("PostGAME Dismissed, closing window..."),this.finishFeedbackState(),this.surveyEventReferenceDismissed.unsubscribe()}surveyEventListenerCloseDialog(){this.logger.info("PostGAME closed, closing window..."),this.surveySendDismissTelemetry(),this.finishFeedbackState(),this.surveyEventReferenceCloseDialog.unsubscribe()}surveySendDismissTelemetry(){this.surveyService.surveyEventListenerCloseDialog(n.TriggerType.PostGame)}showSurveyGuideToastIfNeeded(){this.feedbackService.showGuideToastIfNeeded()}}return f.\u0275fac=function(g){return new(g||f)(l.LFG(D.ed),l.LFG(p.bF),l.LFG(t.H7),l.LFG(w.o),l.LFG(s.FW),l.LFG(h.dgl),l.LFG(h.FR5),l.LFG(u.TB),l.LFG(h.o15))},f.\u0275prov=l.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},26721:(He,de,e)=>{"use strict";e.d(de,{C:()=>f,p:()=>c});var n=e(90490),i=e(98636),D=e(20088),m=e(9170),y=e(85816),T=e(202),r=e(2984),a=e(12556),s=e(22573),p=e(19481),l=e(6484),t=e(2316),w=e(25256),h=e(76738),u=e(13335),o=e(71570);const f="gameChange";let c=(()=>{class g{constructor(G,x,E,P,v,O,C,_,F,V,b,B){var U;this.streamerManagerService=E,this.nativeEventService=P,this.bridgeService=v,this.imageFormatService=O,this.streamingService=C,this.relaunchGameService=_,this.streamerConfigService=F,this.titleService=V,this.gameLaunchAnalyticsService=b,this.lcarsService=B,this.isPreviousGameChangeDialogOpen=!1,this.isGameLaunchEventPresent=!1,this.tvMode=!1,this.logger=G.getLogger("gfn/game-change"),this.tvMode=!!(null===(U=null==x?void 0:x.featureEnablement)||void 0===U?void 0:U.tvMode)}initiateStreamingUi(){this.streamerManagerService.register(p.$D.Streaming,{callbackContext:this,onStateBegin:this.onStreamingBegin,onStateEnd:this.onStreamingEnd},p.pH.Quit),this.registerGameLaunchEvents(),this.registerForegroundEvent()}completePendingGameChange(G){if(G){(0,T.isNil)(this.pendingNewUrlRoute)&&this.logger.error("Cannot complete pending game launch, dont have a pending new url route"),this.logger.info("Game change, Restart cmd args: ","--url-route="+this.pendingNewUrlRoute);const x=this.pendingNewUrlRoute;this.gameLaunchAnalyticsService.updateGameLaunchChangeMetadata(),this.hideGameChangeDialog(),this.streamingService.stopStreaming().pipe((0,i.b)(E=>{E&&(this.logger.info("Streaming stopped succesfully for game change"),this.titleService.setTitle(a.dCY),this.streamerManagerService.restoreWindow(),this.relaunchGameService.relaunchNewGame(x))})).subscribe()}else this.logger.info("hideGameChangeDialog"),this.gameLaunchAnalyticsService.resetGameLaunchMetadata(!0),this.hideGameChangeDialog()}registerForegroundEvent(){this.nativeEventService.get$(l.Nx.ForegroundEvent,l.bi.Types.HandlerEventType.StructuredWindowEvent).subscribe(()=>{this.isGameLaunchEventPresent||this.requestUserAttention(),this.isGameLaunchEventPresent=!1},G=>{this.logger.error("Received error for Foreground window event: ",G),this.isGameLaunchEventPresent=!1})}registerGameLaunchEvents(){this.nativeEventService.get$(l.Nx.RouteChange,l.bi.Types.HandlerEventType.StructuredWindowEvent).subscribe(G=>{this.isGameLaunchEventPresent=!0,this.checkToShowGameChangeDialog(G)},G=>{this.logger.error("Received error for game change window event: ",G)})}onStreamingBegin(G){this.isInStreamingState=!0,this.uiHandle=G.handle}checkToShowGameChangeDialog(G){try{const x=JSON.parse(G);if(this.logger.info("Received game change data: ",x),(0,T.isNil)(x)||(0,T.isNil)(x["current-route"])||(0,T.isNil)(x["new-route"]))return void this.logger.error("Invalid game change data given, ignoring");this.isInStreamingState?(this.logger.info("Game is already streaming. Handle game change dialog"),this.handleGameChange(x)):(this.logger.info("Game is not streaming, requesting focus"),this.requestUserAttention())}catch(x){this.logger.error(`Game change data failed JSON parsing. Error: ${x} | Game change string: ${G}`)}}onStreamingEnd(){this.isInStreamingState=!1,this.uiHandle&&(this.uiHandle=null),this.showSub&&this.showSub.unsubscribe()}handleGameChange(G){if(G["new-route"].startsWith("oauth/"))return void this.logger.info("Got oauth route message, ignoring");const x=this.streamerConfigService.activeConfig.cmsId;if((0,T.isNil)(x)||0===x)return void this.logger.error("Current cms id not found in url route, ignoring game change");const E=(0,a.X4o)(G["new-route"],this.logger);if(!(0,T.isNil)(E)&&0!==E)return x===E?(this.logger.info("Ignoring request to launch a second instance of the currently running game"),void this.requestUserAttention()):(this.pendingNewUrlRoute=G["new-route"],void(this.uiHandle?(this.shownUiHandle&&(this.isPreviousGameChangeDialogOpen=!0,this.completePendingGameChange(!1)),this.requestUserAttention(),this.showSub=this.showGameChangeDialog(x,E).subscribe(P=>{this.shownUiHandle=P},P=>{this.logger.error("Error when showing game change dialog: ",P)})):this.logger.error("Unknown error when showing game change dialog")));this.logger.error("New cms id not found in url route, ignoring game change")}requestUserAttention(){this.requestUserAttentionSub=this.bridgeService.executeCommand(r.Gh.Common.Windowcontrol.RequestUserAttention).pipe((0,D.P)()).subscribe()}showGameChangeDialog(G,x){return this.logger.info("ShowGameChangeDialog called"),(0,n.$R)(this.lcarsService.getMetadataByCmsId(G),this.lcarsService.getMetadataByCmsId(x)).pipe((0,m.h)(([E,P])=>!(0,T.isNil)(E)&&!(0,T.isNil)(P)),(0,y.zg)(([E,P])=>{const v=this.imageFormatService.formatImageServiceUrl(P.images.KEY_ART,{w:(0,s.av)(this.tvMode)});return this.uiHandle.show([f,{currentGameName:E.title,newGameName:P.title,newGameIcon:v}])}))}hideGameChangeDialog(){this.logger.info("Inside hideGameChangeDialog: ",this.shownUiHandle),this.shownUiHandle&&(this.shownUiHandle.hide(),this.shownUiHandle=null,this.showSub.unsubscribe(),this.showSub=null,this.isPreviousGameChangeDialogOpen||(this.pendingNewUrlRoute=null),this.isPreviousGameChangeDialogOpen=!1),this.requestUserAttentionSub&&(this.requestUserAttentionSub.unsubscribe(),this.requestUserAttentionSub=null)}}return g.\u0275fac=function(G){return new(G||g)(t.LFG(l.ed),t.LFG(a.VKt),t.LFG(p.bF),t.LFG(l.o1),t.LFG(l.dF),t.LFG(a.CQ2),t.LFG(w.F),t.LFG(h.S),t.LFG(u.o),t.LFG(o.Dx),t.LFG(a.V89),t.LFG(a.zcQ))},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},10070:(He,de,e)=>{"use strict";e.d(de,{el:()=>i,u7:()=>D});var i=(()=>{return(m=i||(i={})).EditBox="gfnEditBox",m.Unknown="unknown",i;var m})(),D=(()=>{return(m=D||(D={})).success="Success",m.missing="Missing event",m.invalidjson="Invalid JSON data",m.unknown="Unknown",D;var m})()},19434:(He,de,e)=>{"use strict";e.d(de,{x:()=>u});var n=e(79441),i=e(81134),D=e(9170),m=e(53466),y=e(33927),T=e(18293),r=e(14179),a=e(10070),s=e(43365),p=e(12556),l=e(2316),t=e(6484),w=e(43124),h=e(52349);let u=(()=>{class o{constructor(c,g,I,G,x,E,P){this.injector=g,this.streamingService=I,this.telemetryService=G,this.projectInterfaceService=x,this.configuration=E,this.experienceControlService=P,this.isAutoInvokeKbEnabled=!1,this.gfnEventEditboxSubject=new n.xQ,this.logger=c.getLogger("GfnEventsService"),this.gfnEditboxEventCounter=-1}GfnEventEditbox$(){return this.gfnEventEditboxSubject.asObservable()}initialize(){this.logger.info("GfnEvents service init"),this.streamingService.streamingEvent$.pipe((0,D.h)(c=>c.event===r.V4.STREAMING_BEGIN)).subscribe(()=>{this.cmsId=this.streamingService.streamingParams.appId,this.sessionId=this.streamingService.streamingProperties.sessionId,this.subSessionId=this.streamingService.streamingProperties.subSessionId}),this.streamingService.streamingEvent$.pipe((0,D.h)(c=>c.event===r.V4.STREAMING_TERMINATED||c.event===r.V4.STOP_RESULT)).subscribe(()=>{this.gfnEditboxEventCounter=-1}),this.getAutoInvokeKbEnabled().pipe((0,m.q)(1)).subscribe(c=>{this.isAutoInvokeKbEnabled=c.isAutoInvokeKbEnabled},c=>{this.isAutoInvokeKbEnabled=!1}),this.projectInterfaceService.onCustomMessageReceived.subscribe(c=>{if((null==c?void 0:c.messageRecipient)===p.gOl.Serenity){let g;g=null==c?void 0:c.data,this.parseGfnEvents(g)}})}sendTelemetry(c,g){const I=new p.g7J({cmsId:this.cmsId.toString(),streamSessionId:this.sessionId,streamSubSessionId:this.subSessionId,eventType:this.getGfnEventType(c),statusDetails:g});this.telemetryService.push(I)}parseGfnEvents(c){this.logger.info("parseGfnEvents",c);try{const g=JSON.parse(c);if((null==g?void 0:g.event)===a.el.EditBox&&this.isAutoInvokeKbEnabled){const I=null==g?void 0:g.counter;I&&(-1===this.gfnEditboxEventCounter?this.gfnEditboxEventCounter=I:++this.gfnEditboxEventCounter!==I&&(this.logger.error("Counter mismatch counter: "+I+" gfnEditboxEventCounter: "+this.gfnEditboxEventCounter+" "+c),this.sendTelemetry(a.el.EditBox,a.u7.missing),this.gfnEditboxEventCounter=I));const G=null==g?void 0:g.args;if(G){const x=null==G?void 0:G.id;if(x){const E={id:x},P=null==G?void 0:G.Rect;P&&(E.left=P.left,E.top=P.top,E.right=P.right,E.bottom=P.bottom),this.gfnEventEditboxSubject.next(E)}}}}catch(g){this.logger.error("Invalid JSON",c),this.sendTelemetry(a.el.Unknown,a.u7.invalidjson)}}getAutoInvokeKbEnabled(){return this.experienceControlService.getCloudVariable(this.configuration.gxTarget.experiences.isAutoInvokeKbEnabled,{},{useCache:!1},s.Z4.GxTargetGetCloudVariable,s.Qu.GxTargetGetAutoInvokeKbEnabled).pipe((0,y.U)(c=>(this.logger.info("GxTarget AutoInvokeKB value: ",c.value),c.value)),(0,T.K)(c=>(this.logger.info("GxTarget AutoInvokeKB fetch error",c),(0,i.of)(!1))))}getGfnEventType(c){switch(c){case a.el.EditBox:return p.YyK.EditBox;default:return p.YyK.EventNone}}}return o.\u0275fac=function(c){return new(c||o)(l.LFG(t.ed),l.LFG(l.zs3),l.LFG(r.FW),l.LFG(w.y0),l.LFG(h.m3),l.LFG(p.VKt),l.LFG(s.Q6))},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},80598:(He,de,e)=>{"use strict";e.d(de,{h:()=>c});var n=e(12556),i=e(73159),D=e(19481),m=e(81134),y=e(33927),T=e(85816),r=e(7830),a=e(89166),s=e(59780),p=e(202),t=e(2316),w=e(6484),h=e(13335),u=e(40519),o=e(22087),f=e(14179);let c=(()=>{class g{constructor(G,x,E,P,v,O,C,_,F){this.idmService=x,this.gfnSdkService=E,this.streamingManagerService=P,this.networkStatusService=v,this.streamerConfigService=O,this.gameSessionDistributedTracingService=C,this.gameSessionAnalyticsService=_,this.streamingService=F,this.logger=G.getLogger("gfn/streamingJarvisAuth")}initializeStreamingUi(){this.streamingManagerService.register(D.$D.Authentication,{callbackContext:this,onStateBegin:this.onStateStarted,onStateEnd:this.onStateEnd})}get hasShownUiHandle(){return!(0,p.isNil)(this.shownUiHandle)}finishJarvisAuthState(){this.shownUiHandle?(this.shownUiHandle.hide(),this.shownUiHandle=null,this.uiHandle.goToNext(),this.uiHandle=null):this.logger.error("finishJarvisAuthState was called while UI was not shown.")}onStateStarted(G){this.uiHandle=G.handle,this.streamingService.sessionTerminationListener(this.uiHandle);const x=this.gameSessionDistributedTracingService.getCurrentActiveSpan();this.networkStatusService.isOnline?this.gfnSdkService.getAuthInfo().subscribe(E=>{E.authType===i.Gr.JWT?(this.gameSessionAnalyticsService.setAuthenticationStatus(s.y.AUTO_LOGIN),this.logger.info("Using JWT auth flow, skipping the user auth check."),this.uiHandle.goToNext(),this.uiHandle=null):this.uiHandleSub=this.idmService.isUserTokenAvailable.pipe((0,y.U)(P=>P&&this.streamerConfigService.activeConfig.launchSource===n.zO5.GeForceNOW||this.gfnSdkService.isThisAGFNSDKSession()&&this.gfnSdkService.isAuthInfoValid(E)),(0,T.zg)(P=>(x.setTag(a.NI.SkippedAuthCheck,P),P?(0,m.of)(null):this.uiHandle.show(["login"])))).subscribe(P=>{this.shownUiHandle=P,(0,p.isNil)(P)&&(this.gameSessionAnalyticsService.setAuthenticationStatus(s.y.AUTO_LOGIN),this.logger.info("User is logged in and game is launched from mall. Hence, skipping the auth check"),this.uiHandle.goToNext(),this.uiHandle=null)})}):(this.uiHandle.goToError({errorType:D.fR.GenericError,errorCode:r.pY.NetworkError}),this.uiHandle=null)}onStateEnd(){this.streamingService.unsubscribeSessionTerminationListener(),this.uiHandleSub&&this.uiHandleSub.unsubscribe()}}return g.\u0275fac=function(G){return new(G||g)(t.LFG(w.ed),t.LFG(n.No2),t.LFG(i.s),t.LFG(D.bF),t.LFG(w._J),t.LFG(h.o),t.LFG(u.r),t.LFG(o.h),t.LFG(f.FW))},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},7161:(He,de,e)=>{"use strict";e.d(de,{wn:()=>W,q_:()=>n.q,Sc:()=>B.S,pp:()=>y.p,x9:()=>te.x,h$:()=>D.h,oG:()=>ie.o,rW:()=>ie.r,H9:()=>Q.H,J$:()=>b,gI:()=>m.g,iO:()=>fe.iO,nX:()=>se});var n=e(49686),D=(e(28151),e(80598)),m=e(53377),y=e(26721),T=e(90490),r=e(81134),a=e(61486),s=e(92941),p=e(85816),l=e(67202),t=e(20088),w=e(53466),h=e(33927),u=e(18293),o=e(79902),f=e(98636),c=e(202),g=e(19481),I=e(6484),G=e(12556),x=e(64199),E=e(89166),P=e(2316),v=e(22087),O=e(40519),C=e(87335),_=e(25256),F=(()=>{return(k=F||(F={})).Skipped="Skipped",k.Passed="Passed",k.UserInputPrompted="UserInputPrompted",k.LbrDone="LbrDone",F;var k})();let b=(()=>{class k{constructor(N,q,Me,xe,ct,Se,Ge,St,Tt,Te,Je,xt,Ye){this.streamingManagerService=q,this.gridService=Me,this.networkTestService=xe,this.serverRoutingService=ct,this.networkConfigurationService=Se,this.gameSessionAnalyticsService=Ge,this.gameSessionDistributedTracingService=St,this.applicationLifetimeService=Tt,this.streamingProfileService=Te,this.appConfig=Je,this.guestModeService=xt,this.streamingService=Ye,this.shutdownHandler=null,this.networkTestUIResult=G.DYb.Unknown,this.logger=N.getLogger("gfn/streamingNetworkTest")}initializeStreamingUi(){this.networkTestService.initialize(),this.streamingManagerService.register(g.$D.NetworkTest,{callbackContext:this,onStateBegin:this.onStateStarted,onStateEnd:this.onStateEnd}),this.shutdownHandler=this.applicationLifetimeService.addWorkOnShutdown(()=>this.serverRoutingService.cleanupOnCancel().pipe((0,p.zg)(()=>this.networkTestService.cleanupOnCancel()),(0,l.h)(void 0)))}onStateEnd(){this.logger.info("Unsubscribing all the subscriptions before State End "),this.streamingService.unsubscribeSessionTerminationListener(),this.networkOverridesSubscription&&this.networkOverridesSubscription.unsubscribe(),this.networkTestCallbacksSubscription&&this.networkTestCallbacksSubscription.unsubscribe()}onStateStarted(N){let q;this.uiHandle=N.handle,this.streamingService.sessionTerminationListener(this.uiHandle),this.networkTestUIResult=G.DYb.Unknown,this.networkTestSpan=this.gameSessionDistributedTracingService.getCurrentActiveSpan(),this.networkTestService.setParentSpanForNetworkTest(this.networkTestSpan),q=this.networkConfigurationService.getNetworkOverride().pipe((0,p.zg)(Me=>{(0,c.isNil)(Me)||(this.logger.info("The user selected a zone manually and runNetworkTest is: ",Me.runNetworkTest),this.networkTestSpan.setTag(E.NI.NetworkOverridePresent,!0),x.Gj.resultHeight=x.b_);const xe=this.isNetworkTestRequired(Me),ct=this.isLbrRequired(Me),Se=this.getUpdatedThresholdInfo();return(0,T.$R)(xe,ct,Se)}),(0,p.zg)(([Me,xe,ct])=>{if(Me||xe)return this.networkTestCallbacks(),this.uiHandle.show(["networkTest"]);if(ct.hasThresholdUpdated){this.networkTestCallbacks();const Se={networkTestResult:JSON.stringify(ct.updatedNetworkTestResult)};return this.uiHandle.show(["networkTest"],Se)}return this.gameSessionAnalyticsService.setNetworkTestUIResult(G.DYb.Skipped),this.networkTestSpan.setTag(E.NI.NetworkTestStatus,F.Skipped),this.gameSessionDistributedTracingService.setTagOnGameLaunchSpan(E.NI.NetworkTestStatus,F.Skipped),(0,r.of)({})}),(0,t.P)()),this.networkOverridesSubscription=q.subscribe(Me=>{this.logger.info("shownUiHandle",Me),(0,c.isEmpty)(Me)?(this.logger.info("Skip Network Test and LBR"),this.uiHandle.goToNext()):this.shownUiHandle=Me}),this.subscribeToZoneFromNetworkTestService()}getUpdatedThresholdInfo(){return I.ng.isBrowserPlatform()?(0,r.of)({hasThresholdUpdated:!1}):(0,a.aj)([this.networkTestService.getResolutionForThresholdComparision(),this.networkConfigurationService.getCurrentFingerprintInfo()]).pipe((0,w.q)(1),(0,p.zg)(([N,q])=>{if(!(null==q?void 0:q.networkTestReturn))return(0,r.of)(null);const Me=this.networkTestService.selectThresholdForResolution(q.networkTestReturn.testResult.thresholds,N);return Me.profile.width!==q.lastShownThresholdProfile.width||Me.profile.height!==q.lastShownThresholdProfile.height||Me.profile.frameRate!==q.lastShownThresholdProfile.frameRate?(this.networkConfigurationService.updateNetworkTestThresholdProfile(Me.profile).subscribe(s.Z,s.Z),this.networkTestService.analyzeNetworkTestResults(q.networkTestReturn,Me,!1)):(0,r.of)(null)}),(0,h.U)(N=>N?{hasThresholdUpdated:!0,updatedNetworkTestResult:N}:{hasThresholdUpdated:!1}),(0,u.K)(N=>(this.logger.error("Error while checking for updated threshold",N),(0,r.of)({hasThresholdUpdated:!1}))))}subscribeToZoneFromNetworkTestService(){this.networkTestService.zoneName.subscribe(N=>{this.networkTestSpan.setTag(E.NI.ZoneName,N.name),this.networkTestSpan.setTag(E.NI.ZoneAddress,N.address),this.gameSessionDistributedTracingService.setTagOnGameLaunchSpan(E.NI.ZoneName,N.name),this.gameSessionDistributedTracingService.setTagOnGameLaunchSpan(E.NI.ZoneAddress,N.address)})}isCachedZone(N,q){return N===q}networkTestCallbacks(){this.networkTestCallbacksSubscription=this.networkTestService.networkTestMessages.subscribe(N=>{var q;switch(this.logger.info("Received network test message",N),N.message){case G.Irw.NetworkTestAutoRunDone:N.data.networkTestStatus===G.ASW.Excellent?(this.networkTestUIResult===G.DYb.Unknown&&(this.networkTestUIResult=G.DYb.Passed),this.finishNetworkTestState(),this.networkTestSpan.setTag(E.NI.NetworkTestStatus,F.Passed),this.gameSessionDistributedTracingService.setTagOnGameLaunchSpan(E.NI.NetworkTestStatus,F.Passed),this.networkTestCallbacksSubscription.unsubscribe()):this.networkTestUIResult=G.DYb.DialogShown,this.gameSessionAnalyticsService.setNetworkTestUIResult(this.networkTestUIResult);break;case G.Irw.NetworkTestClosed:this.networkTestSpan.setTag(E.NI.NetworkTestStatus,F.UserInputPrompted),this.gameSessionDistributedTracingService.setTagOnGameLaunchSpan(E.NI.NetworkTestStatus,F.UserInputPrompted),this.finishNetworkTestState();break;case G.Irw.NetworkTestClosedOnError:this.isWebRtcNetworkTestEnabled?this.finishNetworkTestState():this.closeStreamerWindow();break;case G.Irw.NetworkTestFailed:this.gameSessionAnalyticsService.handleGameLaunchFailure({status:N.data.networkTestStatus,errorDetails:N.data.errorDetails});break;case G.Irw.NetworkTestAutoRunTryAgain:break;case G.Irw.LBRAutoRunDone:let Me,xe;this.finishNetworkTestState(),(null===(q=N.data)||void 0===q?void 0:q.isLbrRun)?(Me=F.LbrDone,xe=G.DYb.LbrDone):(Me=F.Skipped,xe=G.DYb.Skipped),this.networkTestSpan.setTag(E.NI.NetworkTestStatus,Me),this.gameSessionDistributedTracingService.setTagOnGameLaunchSpan(E.NI.NetworkTestStatus,Me),this.networkTestCallbacksSubscription.unsubscribe(),this.gameSessionAnalyticsService.setNetworkTestUIResult(xe);break;default:this.finishNetworkTestState()}})}finishNetworkTestState(){this.networkTestService.setNetworkTestExpiryTime().subscribe(),this.shownUiHandle?(this.shownUiHandle.hide(),this.shownUiHandle=null,this.uiHandle.goToNext(),this.uiHandle=null):this.logger.error("finishNetworkTestState was called while UI was not shown."),this.shutdownHandler&&(this.shutdownHandler.remove(),this.shutdownHandler=null)}closeStreamerWindow(){this.shownUiHandle?(this.shownUiHandle.hide(),this.shownUiHandle=null,this.uiHandle.goToDone(),this.uiHandle=null):this.logger.error("closeStreamerWindow was called while UI was not shown.")}isWebrtcNetworkTestRequired(N){return this.networkTestService.webrtcNetworkTestEnabled.pipe((0,o.w)(q=>q.showUI?this.networkTestService.isWebrtcNetworkTestRequired(N):(0,r.of)(!1)))}isNetworkTestRequired(N){var q,Me;if((null===(q=this.appConfig.featureEnablement)||void 0===q?void 0:q.disablePreStreamNetworkTest)||this.guestModeService.isGuestMode&&!(null===(Me=this.guestModeService.getGuestModeConfig())||void 0===Me?void 0:Me.isNetworkTestEnabled))return(0,r.of)(!1);let xe;return I.ng.isBrowserPlatform()?xe=this.isWebrtcNetworkTestRequired(N):(0,c.isNil)(N)||!N.runNetworkTest?xe=this.networkTestService.shouldNetworkTestRun().pipe((0,p.zg)(ct=>ct?(0,r.of)(!0):this.isMaxDisplayRequired().pipe((0,f.b)(Se=>{Se&&(this.logger.info("Max display is required, hence run network test"),this.networkTestService.setRetriggerPolicy(G.Yk9.MaxDisplayRequired))})))):(this.logger.info("Override zone has been set, hence run network test"),this.networkTestService.setRetriggerPolicy(G.Yk9.OverrideFlagSet),xe=(0,r.of)(N.runNetworkTest)),xe.pipe((0,f.b)(ct=>{this.networkTestService.isNetworkTestRequired=ct,this.logger.info(`Network test will ${ct?"":"not "}be run.`)}))}isLbrRequired(N){var q;if(null===(q=this.appConfig.featureEnablement)||void 0===q?void 0:q.disablePreStreamNetworkTest)return(0,r.of)(!1);let Me;return Me=(0,c.isNil)(N)&&I.ng.isCefPlatform()?this.gridService.zoneList$.pipe((0,u.K)(xe=>(this.logger.error("error to get zone list from server: ",xe),(0,r.of)({}))),(0,o.w)(xe=>this.serverRoutingService.shouldLbrRun(xe))):I.ng.isCefPlatform()?this.networkConfigurationService.getCurrentCachedLatencies().pipe((0,h.U)(xe=>!!(0,c.isNil)(xe))):(0,r.of)(!1),Me.pipe((0,f.b)(xe=>{this.serverRoutingService.isLbrRequired=xe,this.logger.info(`LBR will ${xe?"":"not "}be run.`)}))}isMaxDisplayRequired(){return this.streamingProfileService.getStreamingProfile().pipe((0,p.zg)(N=>{const q=N.networkInfo,Me=N.currentFingerprintMaxDisplay,xe=N.primaryDisplayResolution;return(0,c.isNil)(N)||(0,c.isNil)(q)||!this.appConfig.featureEnablement.dynamicStreamingResolution||N.name!==G.M1b.Balanced||q.NetworkType===I.VV.WiFi2_4?(0,r.of)(!1):(0,c.isNil)(Me)?(0,r.of)(!0):this.streamingProfileService.getNvSupportedResolutions().pipe((0,h.U)(ct=>{let Se=xe.width/xe.height,Ge=!1;for(const Tt of ct)if(Se===Tt.widthInPixels/Tt.heightInPixels){Ge=!0;break}return Ge||(Se=16/9),Se!==Me.width/Me.height}))}))}}return k.\u0275fac=function(N){return new(N||k)(P.LFG(I.ed),P.LFG(g.bF),P.LFG(G.rIG),P.LFG(G.R2C),P.LFG(G.mw3),P.LFG(G.XS0),P.LFG(v.h),P.LFG(O.r),P.LFG(C.Ll),P.LFG(G.GKb),P.LFG(G.VKt),P.LFG(G.o15),P.LFG(_.F))},k.\u0275prov=P.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();var B=e(32431),U=e(58640),A=e(11169),S=e(13335),Y=e(54364);let se=(()=>{class k{constructor(N,q,Me,xe,ct,Se,Ge,St,Tt){this.streamingManagerService=q,this.streamerRelaunchService=Me,this.updateService=xe,this.streamerConfigService=ct,this.location=Se,this.gfnSwUpdateService=Ge,this.streamingService=St,this.deeplinkHelperService=Tt,this.logger=N.getLogger("gfn/streamingUpdateCheck")}initializeStreamingUi(){this.streamingManagerService.register(g.$D.UpdateCheck,{callbackContext:this,onStateBegin:this.onStateStarted,onStateEnd:this.onStateEnd}),this.currentStateSubscription&&(this.currentStateSubscription.unsubscribe(),this.currentStateSubscription=null),this.currentStateSubscription=this.streamingManagerService.getCurrentStateChanges().subscribe(q=>{this.logger.info("streaming state change: ",q),this.currentState=q})}finishUpdateCheckState(){this.shownUiHandle?(this.shownUiHandle.hide(),this.shownUiHandle=null,this.uiHandle.goToNext(),this.uiHandle=null):this.logger.error("finishUpdateCheckState was called while UI was not shown.")}onStateStarted(N){this.uiHandle=N.handle,this.streamingService.sessionTerminationListener(this.uiHandle),I.ng.isBrowserPlatform()?this.handleBrowserUpdate():this.handleDesktopUpdate()}handleBrowserUpdate(){this.gfnSwUpdateService.isFirstInstallation()?(this.logger.info("First Installation, skipping update check"),this.uiHandle.goToNext()):this.browserUpdateCheckSubscription=this.gfnSwUpdateService.checkForUpdates().pipe((0,o.w)(N=>N.updateAvailable?(this.logger.info("Update was installed. Will request service worker to activate",N),this.updateService.appendUpdateData({updateFromJS:!0,updateFromStreamer:!0,updateStartTimestamp:Date.now()})):(this.logger.info("No update available."),(0,r.of)(!1))),(0,p.zg)(N=>{if(N&&this.deeplinkHelperService.allowApplicationReload()){const q=(0,G.IGn)(this.streamerConfigService.activeConfig);return this.location.replaceState(q),this.gfnSwUpdateService.activateServiceWorker()}return(0,r.of)(!1)}),(0,p.zg)(N=>N?this.gfnSwUpdateService.swActivationTimedOutNotification:(0,r.of)(!1))).subscribe(N=>{N?this.logger.info("Activation requested. Will reload in a moment..."):(this.logger.info("Moving to next state."),this.uiHandle.goToNext())},N=>{this.logger.error("Failed to check for update",N),this.currentState===g.$D.UpdateCheck&&this.uiHandle.goToNext()})}handleDesktopUpdate(){const N=(0,U.P)(()=>(0,r.of)(this.uiHandle.goToNext()));this.updateService.getAvailableUpdate$().pipe((0,o.w)(q=>q?(this.logger.info("Update available, attempting update"),this.streamerRelaunchService.startRelaunch(!0)):(this.logger.info("No update available on startup."),N))).subscribe(()=>this.logger.info("Finished update check"),q=>{this.logger.error("Failed to check for pending update",q),this.currentState===g.$D.UpdateCheck&&this.uiHandle.goToNext()})}onStateEnd(){this.logger.info("Unsubscribing all the subscriptions before State End"),this.streamingService.unsubscribeSessionTerminationListener(),this.uiHandleSub&&(this.uiHandleSub.unsubscribe(),this.uiHandleSub=null),this.browserUpdateCheckSubscription&&this.browserUpdateCheckSubscription.unsubscribe()}}return k.\u0275fac=function(N){return new(N||k)(P.LFG(I.ed),P.LFG(g.bF),P.LFG(A.f),P.LFG(G.GMF),P.LFG(S.o),P.LFG(Y.Ye),P.LFG(G.m$M),P.LFG(_.F),P.LFG(G.gIP))},k.\u0275prov=P.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();var fe=e(21732),$=e(76491),ae=e(79441),me=e(83720),ye=e(92597),ue=e(9170),X=e(2984),j=e(14179),K=e(43124),Z=e(43365),L=e(11889);let W=(()=>{class k{constructor(N,q,Me,xe,ct,Se,Ge,St,Tt,Te){var Je,xt,Ye,rt;this.configuration=Me,this.streamingService=xe,this.telemetryService=ct,this.streamerManagerService=Se,this.bridgeService=Ge,this.experienceControl=St,this.keyboardLayoutService=Tt,this.appConfig=Te,this.activeUiHandle=null,this.imeEnabled=!1,this.imeOpened=new $.X(!1),this.imeInputActionSubject=new ae.xQ,this.imeInputTextVisibleSubject=new ae.xQ,this.logger=q.getLogger("ClientImeLoaderService"),this.mobileMode=!!(null===(xt=null===(Je=this.appConfig)||void 0===Je?void 0:Je.featureEnablement)||void 0===xt?void 0:xt.mobileMode),this.tvMode=!!(null===(rt=null===(Ye=this.appConfig)||void 0===Ye?void 0:Ye.featureEnablement)||void 0===rt?void 0:rt.tvMode),this.isImeConfigEnabled$=(0,r.of)(Me.featureEnablement.clientIME).pipe((0,o.w)(ge=>ge&&this.mobileMode?N.accountStatusChanged.pipe((0,o.w)(Ve=>this.queryGxTargetForBrowserClientIME(Ve)),(0,me.x)()):(0,r.of)(ge)),(0,ye.d)(1)),this.isImeEnabled$=this.isImeConfigEnabled$.pipe((0,o.w)(ge=>(this.logger.info("Client IME support changes to",ge?"supported":"unsupported"),this.mobileMode||this.tvMode?(0,r.of)(ge):I.ng.isBrowserPlatform()?this.keyboardLayoutService.readCachedKeyboardLayout().pipe((0,o.w)(Ve=>{var at;return this.logger.info("Keyboard layout cache read response: ",Ve),Ve&&Object.keys(Ve).length>0?(0,r.of)(null===(at=null==Ve?void 0:Ve.params)||void 0===at?void 0:at.isOtherLayout):(0,r.of)(this.keyboardLayoutService.isOtherDefaultLayout)})):(0,a.aj)([this.keyboardLayoutService.getKeyboardLayoutsList(),this.keyboardLayoutService.onKBLayoutChange$,this.keyboardLayoutService.readCachedKeyboardLayout()]).pipe((0,o.w)(([Ve,at,ve])=>{var Ze;if(!(0,c.isNil)(ve)&&!(0,c.isEmpty)(ve))return(0,r.of)(null===(Ze=ve.params)||void 0===Ze?void 0:Ze.isOtherLayout);{const Ie=Ve;this.logger.info("kbChanged: ",at);const $e=Ie.find(ze=>ze.code===at);return(0,r.of)(void 0===$e)}})))),(0,u.K)(ge=>(this.logger.error("Error detected while checking whether the clientIME feature is enabled",ge),(0,r.of)(!1))))}get imeInputInProgress(){return this.imeOpened.value}get imeOpened$(){return this.imeOpened.asObservable()}get imeInputAction$(){return this.imeInputActionSubject.asObservable()}get imeInputTextVisible$(){return this.imeInputTextVisibleSubject.asObservable()}queryGxTargetForBrowserClientIME(N){var q,Me;const xe=(0,r.of)({userId:null!==(q=null==N?void 0:N.userId)&&void 0!==q?q:"",idpId:null!==(Me=null==N?void 0:N.idpId)&&void 0!==Me?Me:""});return this.experienceControl.getCloudVariable(this.configuration.gxTarget.experiences.isBrowserClientIMESupported,{},void 0,void 0,void 0,xe).pipe((0,h.U)(ct=>ct.value.isBrowserClientIMESupported),(0,u.K)(ct=>(this.logger.info("Failed to resolve gx-target cloud variable:",ct),(0,r.of)(!1))))}initialize(){this.streamerManagerService.register(g.$D.Streaming,{callbackContext:this,onStateBegin:this.onStateBegin,onStateEnd:this.onStateEnd},g.pH.Primary),this.isImeEnabled$.subscribe(q=>{this.logger.info("Cient IME",q?"enabled":"disabled"),this.imeEnabled=q}),this.streamingService.streamingEvent$.pipe((0,ue.h)(q=>q.event===j.V4.SESSION_SETUP_SUCCESS)).subscribe(q=>{this.sessionStartTime=Date.now()},q=>{this.logger.error("Error encountered while getting session setup time: ",q)})}onStateBegin(N){this.activeUiHandle=N.handle}onStateEnd(){this.activeUiHandle=null,this.imeOpened.next(!1)}initImeInputHandler(N){var q;this.imeEnabled?!1===this.imeInputInProgress&&(null===(q=this.activeUiHandle)||void 0===q||q.show(["input"]).subscribe(Me=>{this.imeOpened.next(!0),this.shownImeInputHandle=Me,this.logger.info("IME window opened");const xe=new G.aGN({streamDuration:0,source:""});xe.parameters.source=N,xe.parameters.streamDuration=Date.now()-this.sessionStartTime,this.telemetryService.push(xe)},Me=>{this.logger.info("Failed to open IME window")})):this.logger.error("Client IME is disabled!")}closeImeInputHandler(){this.shownImeInputHandle.hide(),this.imeOpened.next(!1),this.logger.info("IME window closed")}sendUnicodeInput(N){const Me=(new TextEncoder).encode(N);return this.bridgeService.executeCommand(X.Gh.Gfn.Streaming.SendUnicode,{unicodeInput:Me})}controlImeInput(N){this.imeInputActionSubject.next(N)}emitImeInputTextVisibility(N){this.imeInputTextVisibleSubject.next(N)}}return k.\u0275fac=function(N){return new(N||k)(P.LFG(G.No2),P.LFG(I.ed),P.LFG(G.VKt),P.LFG(_.F),P.LFG(K.y0),P.LFG(g.bF),P.LFG(I.dF),P.LFG(Z.Q6),P.LFG(L.G),P.LFG(G.VKt))},k.\u0275prov=P.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();var te=e(19434),ie=e(4389),Q=e(87994)},87994:(He,de,e)=>{"use strict";e.d(de,{H:()=>h});var n=e(79441),i=e(12702),D=e(85816),m=e(92597),y=e(9170),T=e(33927),r=e(98636),a=e(22663),s=e(12773),p=e(14179),l=e(2316),t=e(6484),w=e(12556);let h=(()=>{class u{constructor(f,c,g){this.streamingService=c,this.appConfig=g,this.quality$=new n.xQ,this.logger=f.getLogger("gfn/NetworkBarsUiService")}get qualityInfo$(){return(0,i.H)(this.appConfig.networkIndicators.initializationDelay).pipe((0,D.zg)(()=>this.quality$),(0,m.d)(1))}initializeStreamingUi(){this.logger.info("initializeStreamingUi");const f=this.streamingService.streamingEvent$.pipe((0,y.h)(c=>c.event===p.V4.STREAMING_QUALITY),(0,T.U)(c=>c));this.terminated$=this.streamingService.streamingEvent$.pipe((0,y.h)(c=>c.event===p.V4.STREAMING_TERMINATED),(0,T.U)(c=>c),(0,r.b)(c=>this.logger.info("got terminated event"))),this.onFrameLossWarning=this.streamingService.streamingEvent$.pipe((0,y.h)(c=>c.event===p.V4.STREAMING_FRAME_LOSS_WARNING),(0,r.b)(c=>this.logger.info("got onFrameLossWarning event",c))),this.onFrameLossCleared=this.streamingService.streamingEvent$.pipe((0,y.h)(c=>c.event===p.V4.STREAMING_FRAME_LOSS_CLEARED),(0,r.b)(c=>this.logger.info("got onFrameLossCleared event",c))),this.onStreamingFirstFrame=this.streamingService.streamingEvent$.pipe((0,y.h)(c=>c.event===p.V4.STREAMING_FIRST_FRAME),(0,r.b)(c=>this.logger.info("got onStreamingFirstFrame event",c))),f.pipe((0,a.R)(this.terminated$),(0,s.r)()).subscribe(c=>this.quality$.next(c),c=>this.logger.error("subscribe failed",c))}}return u.\u0275fac=function(f){return new(f||u)(l.LFG(t.ed),l.LFG(p.FW),l.LFG(w.VKt))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},53377:(He,de,e)=>{"use strict";e.d(de,{g:()=>t});var n=e(53466),i=e(98636),D=e(19481),m=e(6484),y=e(43124),T=e(12556),r=e(7830),a=e(2316),s=e(22087),p=e(13335),l=e(25256);let t=(()=>{class w{constructor(u,o,f,c,g,I,G,x){this.streamingManagerService=o,this.userConsentService=f,this.gameSessionAnalyticsService=c,this.streamerConfigService=g,this.streamingService=I,this.unsupportedBrowserService=G,this.configuration=x,this.logger=u.getLogger("gfn/streamingOobe")}initializeStreamingUi(){this.streamingManagerService.register(D.$D.PreStreaming,{callbackContext:this,onStateBegin:this.onStateStarted,onStateEnd:this.onStateEnd})}setDefaultConsents(){this.userConsentService.setDefaultConsentData(y.l3).subscribe()}finishOobeState(){this.shownUiHandle?(this.shownUiHandle.hide(),this.shownUiHandle=null,this.uiHandle.goToNext(),this.uiHandle=null,this.setDefaultConsents()):this.logger.error("finishOobeUIState was called while UI was not shown.")}onStateStarted(u){this.uiHandle=u.handle,this.streamingService.sessionTerminationListener(this.uiHandle),this.unsupportedBrowserService.unsupportedBrowserState$.pipe((0,n.q)(1),(0,i.b)(o=>{if(m.ng.isBrowserPlatform()&&o!==T.h6o.None&&!this.configuration.featureEnablement.unsupportedPlatformGameplay){const f={errorType:D.fR.GenericError,errorCode:this.getErrorCode(o)};this.uiHandle.goToError(f),this.uiHandle=null}else this.streamerConfigService.activeConfig.launchSource===T.zO5.GeForceNOW?(this.logger.info("Skipping oobe stage"),this.uiHandle.goToNext(),this.uiHandle=null,this.setDefaultConsents()):this.uiHandleSub=this.uiHandle.show(["oobe"]).subscribe(f=>{this.shownUiHandle=f})})).subscribe()}getErrorCode(u){switch(u){case T.h6o.UnsupportedOS:return r.pY.UnsupportedPlatform;case T.h6o.UnsupportedBrowser:return r.pY.UnsupportedBrowser;case T.h6o.NativeAppOnly:return r.pY.NativeAppOnly;case T.h6o.PWARequired:return r.pY.PWARequired;default:throw new Error("should not happen!")}}onStateEnd(){this.streamingService.unsubscribeSessionTerminationListener(),this.uiHandleSub&&this.uiHandleSub.unsubscribe()}setAnonymousUser(u){this.anonymousUser=u}isAnonymousUser(){return this.anonymousUser}}return w.\u0275fac=function(u){return new(u||w)(a.LFG(m.ed),a.LFG(D.bF),a.LFG(T.ZZY),a.LFG(s.h),a.LFG(p.o),a.LFG(l.F),a.LFG(T.rHN),a.LFG(T.VKt))},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},21732:(He,de,e)=>{"use strict";e.d(de,{Tp:()=>l,rI:()=>t,iO:()=>w});var n=e(76491),i=e(9170),D=e(20088),m=e(71435),y=e(2984),T=e(19481),r=e(14179),a=e(2316),s=e(6484),p=e(91279);const l="streamingReconnect";var t=(()=>{return(h=t||(t={}))[h.RECONNECTING=0]="RECONNECTING",h[h.STOP=1]="STOP",t;var h})();let w=(()=>{class h{constructor(o,f,c,g,I){this.streamerManagerService=f,this.bridgeService=c,this.streamingService=g,this.postSessionConnectionService=I,this.dialogStateSub=new n.X(t.RECONNECTING),this.logger=o.getLogger("gfn/streaming-reconnect")}get dialogState$(){return this.dialogStateSub.asObservable()}initiateStreamingUi(){this.streamerManagerService.register(T.$D.Streaming,{callbackContext:this,onStateBegin:this.onStreamingBegin,onStateEnd:this.onStreamingEnd},T.pH.Quit)}onStreamingBegin(o){this.uiHandle=o.handle,this.terminatedSub=this.streamingService.streamingEvent$.pipe((0,i.h)(f=>f.event===r.V4.STREAMING_TERMINATED)).subscribe(f=>{var c;if(f.reason===r.Y6.NVB_SN_INIT_FAILED_DUE_TO_SYSTEM_SLEEP||f.reason===r.Y6.NVB_SN_PAUSED_DUE_TO_SYSTEM_SLEEP){const g=new T.tw(f);null===(c=this.uiHandle)||void 0===c||c.goToError(g)}else this.dialogStateSub.next(t.STOP)}),this.streamingConnectionSub=this.streamingService.connectivityEvent$.subscribe(f=>{this.onConnectionEvent(f)})}onConnectionEvent(o){switch(this.logger.info("received connectivity event: ",o),o.event){case r.qC.STREAMING_CONNECTION_LOST:this.onLoseConnection(),this.postSessionConnectionService.skipPostSessionTips=!1;break;case r.qC.STREAMING_CONNECTION_FOUND:this.onGainConnection(),this.postSessionConnectionService.skipPostSessionTips=!0}}onLoseConnection(){this.shownUiHandle||(this.logger.info("Show lost connection dialog"),this.requestUserAttention(),this.showDialog())}onGainConnection(){this.shownUiHandle&&(this.logger.info("Exit lost connection dialog"),this.toggleDialog(!1))}showDialog(){this.uiHandle.show([l]).subscribe(o=>{this.shownUiHandle=o,this.dialogStateSub.next(t.RECONNECTING)})}onStreamingEnd(){var o,f;this.logger.info("on streaming reconnect service end"),null===(o=this.streamingConnectionSub)||void 0===o||o.unsubscribe(),null===(f=this.terminatedSub)||void 0===f||f.unsubscribe(),this.uiHandle=null,this.shownUiHandle=null}requestUserAttention(){this.bridgeService.executeCommand(y.Gh.Common.Windowcontrol.RequestUserAttention).pipe((0,D.P)()).subscribe()}toggleDialog(o){o?this.streamingService.isSessionResumable()?(this.logger.info("Session is resumable calling stop streaming"),this.streamingService.stopStreaming().pipe((0,m.x)(()=>{this.uiHandle&&this.uiHandle.goToNext()})).subscribe(f=>{this.logger.info("calling stopStreaming. result: ",f)})):(this.logger.info("Terminating auto resume."),this.streamingService.terminateAutoResume(),this.uiHandle&&this.uiHandle.goToNext()):o||this.shownUiHandle&&(this.shownUiHandle.hide(),this.shownUiHandle=null)}}return h.\u0275fac=function(o){return new(o||h)(a.LFG(s.ed),a.LFG(T.bF),a.LFG(s.dF),a.LFG(r.FW),a.LFG(p.m))},h.\u0275prov=a.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},19481:(He,de,e)=>{"use strict";e.d(de,{bF:()=>n.b,q8:()=>i.q8,z$:()=>i.z$,tw:()=>i.tw,yX:()=>i.yX,fR:()=>i.fR,pH:()=>i.pH,$D:()=>i.$D});var n=e(44494),i=e(2506)},44494:(He,de,e)=>{"use strict";e.d(de,{b:()=>B});var n=e(81134),i=e(76491),D=e(58640),m=e(61486),y=e(61786),T=e(85816),r=e(98636),a=e(33927),s=e(20088),p=e(71435),l=e(92597),t=e(53466),w=e(202),h=e(6484),u=e(87335),o=e(2984),f=e(12556),c=e(2506);class g{constructor(A){this.callbacks=A,this.callbacks.onStateBegin=this.callbacks.onStateBegin.bind(this.callbacks.callbackContext),this.callbacks.onStateEnd&&(this.callbacks.onStateEnd=this.callbacks.onStateEnd.bind(this.callbacks.callbackContext)),this.callbacks.onResumableError&&(this.callbacks.onResumableError=this.callbacks.onResumableError.bind(this.callbacks.callbackContext)),this.callbacks.onTerminalError&&(this.callbacks.onTerminalError=this.callbacks.onTerminalError.bind(this.callbacks.callbackContext))}begin(A){this.callbacks.onStateBegin(A)}end(){this.callbacks.onStateEnd&&this.callbacks.onStateEnd()}resumableError(A){this.callbacks.onResumableError&&this.callbacks.onResumableError(A)}terminalError(A){this.callbacks.onTerminalError&&this.callbacks.onTerminalError(A)}}class I{constructor(A,S){this.parent=A,this.id=S,this.hidden=!1}hide(){if(this.hidden)throw new Error("Cannot hide UI that has already been hidden");this.hidden=!0,this.parent.hide(this.id)}}const x={path:[c.z$],id:0},E={x:0,y:0,w:0,h:0};var P=e(60),v=e(7830),O=e(33987),C=e(2316),_=e(54364),F=e(13335),V=e(52349);const b=()=>(0,n.of)(!0);let B=(()=>{class U{constructor(S,Y,se,fe,$,ae,me,ye,ue,X,j,K,Z,L,W,te,ie,Q,k){this.loggingService=Y,this.bridgeService=se,this.pathService=fe,this.location=ae,this.applicationLifetimeService=me,this.streamerConfigService=ye,this.gfcHelperService=ue,this.gameShareUrlService=X,this.streamingProfileService=j,this.ownershipSyncService=K,this.projectInterfaceService=Z,this.redirectService=L,this.serviceWorkerService=W,this.gfnSwUpdateService=te,this.notificationUiService=ie,this.deeplinkHelperService=Q,this.guestModeService=k,this.restrictedStates=[c.$D.Init,c.$D.Done],this.pathSegments=[],this.logger=this.loggingService.getLogger("gfn/StreamerManagerService"),this.nextShowIdNumber=1,this.currentState=c.$D.Init,this.currentStateChange$=new i.X(this.currentState),this.stateRegistrations=new Map,this.currentViewStacks=new Map,this.stateMachineConnections=new Map,this.stateMachineConnections.set(c.$D.Init,c.$D.UpdateCheck),this.stateMachineConnections.set(c.$D.UpdateCheck,c.$D.PreStreaming),this.stateMachineConnections.set(c.$D.PreStreaming,c.$D.Authentication),this.stateMachineConnections.set(c.$D.Authentication,c.$D.PlatformSelection),this.stateMachineConnections.set(c.$D.PlatformSelection,c.$D.Authorization),this.stateMachineConnections.set(c.$D.Authorization,c.$D.NetworkTest),this.stateMachineConnections.set(c.$D.NetworkTest,c.$D.Loading),this.stateMachineConnections.set(c.$D.Loading,c.$D.Streaming),this.stateMachineConnections.set(c.$D.Streaming,c.$D.PostSessionConnection),this.stateMachineConnections.set(c.$D.PostSessionConnection,c.$D.PostStreaming),this.stateMachineConnections.set(c.$D.PostStreaming,c.$D.Done),this.stateMachineConnections.set(c.$D.ResumableError,c.$D.Loading),this.lastWindowSize=null,this.defaultOsrHandler=$.createOsrHandler("StreamerManagerService"),this.pathSegments=f.fFR.StreamerRoot.split("/"),this.projectInterfaceService.setExitStreamerCallBack(this.exitStreamer.bind(this))}register(S,Y,se=c.pH.Primary){S.supportedRouterTags.includes(se)||this.logAndThrowError("Router tag "+se+" is not supported in state "+S.name),(0,w.includes)(this.restrictedStates,S)&&this.logAndThrowError("Cannot register handler for state "+S+" as it is a restricted state"),this.currentState===c.$D.Init?(this.stateRegistrations.has(S)||this.stateRegistrations.set(S,[]),this.stateRegistrations.get(S).push({callbacks:new g(Y),handle:new U.InternalUIHandleImpl(this,S,se,this.loggingService),tag:se})):this.logAndThrowError("Cannot register new UI handlers after the Streamer state machine has begun")}initiateStreamer(){this.inActiveState()&&this.logAndThrowError("InitiateStreamer called in illegal state"),this.currentState===c.$D.Done&&(this.exitCurrentState(),this.enterState(c.$D.Init)),0!==this.streamerConfigService.activeConfig.cmsId||this.streamerConfigService.activeConfig.parentGameId?(this.currentStateChangeSubscription||(this.currentStateChangeSubscription=this.getCurrentStateChanges().pipe((0,T.zg)(S=>this.bridgeService.executeCommand(o.Gh.Gfn.Gfnsdkhost.UpdateStreamerStatus,{status:S.name}))).subscribe(()=>{},()=>{})),this.shutdownRequestedWorkHandle||(this.shutdownRequestedWorkHandle=this.applicationLifetimeService.addWorkOnShutdownRequested(()=>this.exitStreamer({skipsNavigation:!0}).pipe((0,r.b)(S=>{S&&(this.shutdownRequestedWorkHandle.remove(),this.shutdownRequestedWorkHandle=null)}),(0,a.U)(S=>!S)))),this.shutdownWorkHandle||(this.shutdownWorkHandle=this.applicationLifetimeService.addWorkOnShutdown(()=>(this.inDoneState()||this.goToDone({skipsNavigation:!0}),(0,n.of)(void 0)))),this.advanceState()):this.goToError({errorType:c.fR.GenericError,errorCode:v.pY.ZeroCmsId})}exitStreamer(S){return this.inDoneState()?(0,n.of)(!0):this.exitStreamer$?(this.logger.warn("An exit request is still in progress. New request will not be made."),this.exitStreamer$):(0,D.P)(()=>{const Y=this.getCurrentState(),se=this.stateRegistrations.has(Y)?this.stateRegistrations.get(Y).map(fe=>fe.handle.exitGuard().pipe((0,s.P)())):[(0,n.of)(!0)];return this.exitStreamer$=(0,m.aj)(se).pipe((0,a.U)(fe=>!fe.includes(!1)),(0,r.b)(fe=>{fe&&this.goToDone(S)}),(0,p.x)(()=>{this.exitStreamer$=null}),(0,l.d)({refCount:!1,bufferSize:1})),this.exitStreamer$})}getCurrentState(){return this.currentState}getCurrentStateChanges(){return this.currentStateChange$.asObservable()}inErrorState(){return this.isErrorState(this.currentState)}inTerminalState(){return this.inDoneState()}inDoneState(){return this.currentState===c.$D.Done}inActiveState(){return this.currentState!==c.$D.Init&&this.currentState!==c.$D.Done}updateDefaultOsrState(S,Y){if(null==Y||S!==Y){let se;switch(S){case P.$e.Open:se=this.defaultOsrHandler.open();break;case P.$e.OpenWithInput:se=this.defaultOsrHandler.open(!0);break;case P.$e.Closed:se=this.defaultOsrHandler.close();break;default:this.logger.error("Unrecognized osr state: ",S),se=this.defaultOsrHandler.close()}se.subscribe({next:fe=>{this.logger.info("Updated osr state to: "+fe)},error:fe=>{this.logger.error("Failed to update osr state: "+fe)}})}}exitCurrentState(){this.stateRegistrations.has(this.currentState)&&this.stateRegistrations.get(this.currentState).forEach(S=>{S.handle.disable(),S.callbacks.end()}),this.resetViewStacks()}enterState(S,Y){return this.currentState=S,this.logger.info("Entering state: ",S),this.currentStateChange$.next(this.currentState),!(0,w.includes)(this.restrictedStates,S)&&this.stateRegistrations.has(S)?(this.stateRegistrations.get(S).forEach(se=>{const fe={handle:se.handle,data:Y};se.handle.enable(),se.callbacks.begin(fe)}),!0):S===c.$D.Done&&(this.exit(Y),!0)}exit(S){var Y,se,fe;!(null===(Y=this.streamerConfigService.activeConfig)||void 0===Y?void 0:Y.sdkClient)||!h.ng.isCefPlatform()||this.guestModeService.isGuestMode&&(null===(se=this.guestModeService.getGuestModeConfig())||void 0===se?void 0:se.disableCloseOnStreamExit)?((null===(fe=this.streamerConfigService.activeConfig)||void 0===fe?void 0:fe.accountLinked)&&this.ownershipSyncService.syncAccounts(f.ZCG.AccountLinking).pipe((0,t.q)(1)).subscribe(),this.streamingProfileService.clearCachedStreamingProfile(),this.notificationUiService.clearNotificationsQueue(),this.deeplinkHelperService.resetDeeplinkPartnerData(),this.deeplinkHelperService.windowedMode=!1,h.ng.isCefPlatform()?this.bridgeService.executeCommand(o.Gh.Gfn.Streaming.Cleanup).pipe((0,p.x)(()=>this.handleExit(S))).subscribe():(this.gfnSwUpdateService.periodicallyCheckForUpdates(),this.handleExit(S))):this.applicationLifetimeService.shutdownApplication(u.ld.ApplicationRequestedExit)}handleExit(S){var Y;if(!(null==S?void 0:S.skipsNavigation)){const se=null!=(null==S?void 0:S.exitUrl);if(h.ng.isBrowserPlatform()&&!se){this.gfcHelperService.terminateRemoteLogSession(),this.serviceWorkerService.postMessageSw({type:O.rL.GameExit}),this.updateAddressBar();const $=this.gameShareUrlService.getExitUrl();return void($.includes("http")?this.redirectService.redirectToExternalUrl($,{replace:!0}):this.pathService.navigateByUrl($,{skipLocationChange:!0}))}h.ng.isCefPlatform()&&this.restoreWindow();const fe=null!==(Y=null==S?void 0:S.exitUrl)&&void 0!==Y?Y:f.fFR.Home;this.logger.info("Exiting to "+fe),this.pathService.navigateByUrl(fe,{skipLocationChange:!0})}}updateAddressBar(){this.logger.info(`UpdateAddressBar called. Current Streamer State: ${this.currentState.name}`),this.gameShareUrlService.setShareUrlInAddressBar()}enterErrorState(S,Y){return this.isErrorState(S)||this.logAndThrowError("enterErrorState called with a non-error state: "+S.name),this.logger.info("Advancing to error state: ",S.name),this.currentState=S,this.currentStateChange$.next(this.currentState),!!this.stateRegistrations.has(S)&&(this.stateRegistrations.get(S).forEach(se=>{const fe={handle:se.handle,errorUIHandle:se.handle,data:Y};se.handle.enable(),se.callbacks.begin(fe)}),!0)}advanceState(){if(this.inTerminalState())this.logger.info("Not advancing from terminal state: "+this.currentState.name);else if(this.stateMachineConnections.has(this.currentState)){const S=this.stateMachineConnections.get(this.currentState);this.updateDefaultOsrState(S.defaultOsrState,this.currentState.defaultOsrState),this.exitCurrentState(),this.logger.info("Advancing to state: "+this.stateMachineConnections.get(this.currentState).name),this.enterState(this.stateMachineConnections.get(this.currentState))||(this.logger.info("Skipping state with no registered handlers: "+this.currentState.name),this.advanceState())}else this.logAndThrowError("No state to advance to from state: "+this.currentState.name)}updateDisplays(){this.logger.info("UpdateDisplays called");const S={};this.currentViewStacks.forEach((se,fe)=>{if(se.length>0){const $=se[se.length-1];S[fe]=$.path.slice(),$.data&&S[fe].push($.data)}});const Y=this.pathService.navigate([...this.pathSegments,{outlets:S}],{skipLocationChange:!0});return Y.then(()=>{if(this.streamerConfigService.activeConfig.launchSource===f.zO5.GeForceNOW&&h.ng.isBrowserPlatform()){if(this.inDoneState())return void this.location.replaceState(this.gameShareUrlService.getExitUrl());this.updateAddressBar()}}),Y}show(S,Y,se){this.logger.info(`Show called for routerTag: ${S}, path: ${Y}`),this.currentViewStacks.has(S)||this.currentViewStacks.set(S,[x]);const fe=this.nextShowIdNumber++;return this.currentViewStacks.get(S).push({path:Y,id:fe,data:se}),new y.y($=>{this.updateDisplays().then(()=>{$.next(fe)}).catch(ae=>{$.error(ae)})})}hide(S){this.logger.info(`Hide called with id:${S}`),0===S&&this.logAndThrowError("Cannot hide default UI element"),this.currentViewStacks.forEach((Y,se)=>{Y.forEach((fe,$)=>{if(fe.id===S)return Y.splice($,1),void this.updateDisplays()})})}goToDone(S){this.inDoneState()?this.logger.warn("Already in Done state, no transition to make"):(this.updateDefaultOsrState(c.$D.Done.defaultOsrState),this.exitCurrentState(),this.enterState(c.$D.Done,S))}goToError(S){(this.inTerminalState()||this.inErrorState())&&this.logAndThrowError("Cannot enter Error state from Error or terminal state: "+this.currentState.name);const Y={errorSourceState:this.currentState,errorData:S};this.exitCurrentState(),this.enterErrorState(c.$D.Error,Y)}goToResumableError(S){this.currentState!==c.$D.Error&&this.logAndThrowError("Invalid state to call goToResumableError from: "+this.currentState.name),this.stateRegistrations.forEach((Y,se)=>{Y.forEach(fe=>{fe.callbacks.resumableError(S)})}),this.exitCurrentState(),this.enterErrorState(c.$D.ResumableError,S)}goToTerminalError(S){this.currentState!==c.$D.Error&&this.logAndThrowError("Invalid state to call goToTerminalError from: "+this.currentState.name),this.stateRegistrations.forEach((Y,se)=>{Y.forEach(fe=>{fe.callbacks.terminalError(S)})}),this.exitCurrentState(),this.enterErrorState(c.$D.TerminalError,S)}restoreWindow(){this.lastWindowSize?(this.lastWindowSize=null,this.bridgeService.executeCommand(o.Gh.Common.Windowcontrol.RestoreFromFullScreen).subscribe(()=>{})):this.logger.info("Not restoring window as there was no change in size")}fullscreenWindow(){this.lastWindowSize={width:window.innerWidth,height:window.innerHeight},this.logger.info("Fullscreening window"),this.bridgeService.executeCommand(o.Gh.Common.Windowcontrol.Resize,E).subscribe(()=>{})}resetViewStacks(){this.logger.info("Resetting view stacks"),this.currentViewStacks.clear(),this.currentViewStacks.set(c.pH.Primary,[x]),this.currentViewStacks.set(c.pH.Quit,[x]),this.updateDisplays()}isErrorState(S){return S===c.$D.Error||S===c.$D.ResumableError||S===c.$D.TerminalError}logAndThrowError(S){throw this.logger.error(S),new Error(S)}}return U.InternalUIHandleImpl=class{constructor(A,S,Y,se){this.parent=A,this.routerTag=Y,this.exitGuard=b,this.enabled=!0,this.logger=se.getLogger(["gfn","StreamerManagerService","InternalUIHandle",S.name,Y].join("/"))}disable(){this.enabled=!1,this.exitGuard=b}enable(){this.enabled=!0}goToError(A){this.checkEnabled(),this.parent.goToError(A)}goToNext(){this.checkEnabled(),this.parent.advanceState()}goToDone(A){return this.checkEnabled(),this.parent.exitStreamer(A).toPromise()}goToResumableError(A){this.checkEnabled(),this.parent.goToResumableError(A)}goToTerminalError(A){this.checkEnabled(),this.parent.goToTerminalError(A)}show(A,S){return this.checkEnabled(),this.parent.show(this.routerTag,A,S).pipe((0,a.U)(Y=>new I(this,Y)))}hide(A){this.checkEnabled(),this.parent.hide(A)}restoreWindow(){this.checkEnabled(),this.parent.restoreWindow()}fullscreenWindow(){this.checkEnabled(),this.parent.fullscreenWindow()}setExitGuard(A){this.checkEnabled(),this.exitGuard=A}checkEnabled(){if(!this.enabled){const A="Cannot use a disabled UI handle, likely due to using the handle after the streamer state advanced";throw this.logger.error(A),new Error(A)}}},U.\u0275fac=function(S){return new(S||U)(C.LFG(f.VKt),C.LFG(h.ed),C.LFG(h.dF),C.LFG(f.unb),C.LFG(P.V$),C.LFG(_.Ye),C.LFG(u.Ll),C.LFG(F.o),C.LFG(f.dgl),C.LFG(f.tDF),C.LFG(f.GKb),C.LFG(f.qMk),C.LFG(V.m3),C.LFG(f.VHe),C.LFG(O.HR),C.LFG(f.m$M),C.LFG(f.PTF),C.LFG(f.gIP),C.LFG(f.o15))},U.\u0275prov=C.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})()},2506:(He,de,e)=>{"use strict";e.d(de,{pH:()=>y,fR:()=>T,z$:()=>r,q8:()=>a,tw:()=>s,yX:()=>p,h2:()=>l,$D:()=>w});var n=e(60),i=e(46956),D=e(202),y=(()=>{return(h=y||(y={})).Primary="primary",h.Quit="quit",h.StreamingTimer="streamingTimer",y;var h})(),T=(()=>{return(h=T||(T={}))[h.GenericError=0]="GenericError",h[h.NesAuthError=1]="NesAuthError",h[h.GeronimoError=2]="GeronimoError",h[h.PreStreamGeronimoError=3]="PreStreamGeronimoError",h[h.EntitlementError=4]="EntitlementError",T;var h})();const r="empty";class a{constructor(u,o){this.errorType=u,this.errorCode=o}}class s extends a{constructor(u){super(T.GeronimoError,s.extractErrorCode(u)),this.errorEventInfo=u}static extractErrorCode(u){return u.event===i.V4.STREAMING_TERMINATED?u.reason:u.result.result}}class p extends a{constructor(u){const o=(0,D.has)(u,"code")?u.code:(0,D.has)(u,"result")?u.result:-1;super(T.PreStreamGeronimoError,o),this.resultInfo=u}}class l extends a{constructor(u){super(T.GenericError,u)}}var w,h;(h=w||(w={})).Init={name:"Init",supportedRouterTags:[],defaultOsrState:n.$e.Closed,showsBackNavigation:!1},h.UpdateCheck={name:"UpdateCheck",supportedRouterTags:[y.Primary],defaultOsrState:n.$e.Open,showsBackNavigation:!1},h.PreStreaming={name:"PreStreaming",supportedRouterTags:[y.Primary],defaultOsrState:n.$e.OpenWithInput,showsBackNavigation:!1},h.Authentication={name:"Authentication",supportedRouterTags:[y.Primary],defaultOsrState:n.$e.Open,showsBackNavigation:!1},h.Authorization={name:"Authorization",supportedRouterTags:[y.Primary],defaultOsrState:n.$e.Open,showsBackNavigation:!0},h.PlatformSelection={name:"PlatformSelection",supportedRouterTags:[y.Primary],defaultOsrState:n.$e.Open,showsBackNavigation:!0},h.NetworkTest={name:"NetworkTest",supportedRouterTags:[y.Primary],defaultOsrState:n.$e.Open,showsBackNavigation:!0},h.Loading={name:"Loading",supportedRouterTags:[y.Primary,y.Quit],defaultOsrState:n.$e.Open,showsBackNavigation:!0},h.PostSessionConnection={name:"PostSessionConnection",supportedRouterTags:[y.Primary],defaultOsrState:n.$e.Open,showsBackNavigation:!1},h.Streaming={name:"Streaming",supportedRouterTags:[y.Primary,y.StreamingTimer,y.Quit],defaultOsrState:n.$e.Closed,showsBackNavigation:!1},h.PostStreaming={name:"PostStreaming",supportedRouterTags:[y.Primary],defaultOsrState:n.$e.Open,showsBackNavigation:!1},h.Done={name:"Done",supportedRouterTags:[y.Primary],defaultOsrState:n.$e.OpenWithInput,showsBackNavigation:!1},h.Error={name:"Error",supportedRouterTags:[y.Primary],defaultOsrState:n.$e.Open,showsBackNavigation:!1},h.ResumableError={name:"ResumableError",supportedRouterTags:[y.Primary],defaultOsrState:n.$e.Open,showsBackNavigation:!1},h.TerminalError={name:"TerminalError",supportedRouterTags:[y.Primary],defaultOsrState:n.$e.Open,showsBackNavigation:!1}},46956:(He,de,e)=>{"use strict";e.d(de,{C3:()=>n,Sj:()=>i,dq:()=>D,Y6:()=>m,V4:()=>y,a1:()=>T,Py:()=>r,qC:()=>s,pi:()=>p});var n=(()=>{return(h=n||(n={}))[h.NVB_PROFILE_GAMING=0]="NVB_PROFILE_GAMING",h[h.NVB_PROFILE_PROFESSIONAL=1]="NVB_PROFILE_PROFESSIONAL",h[h.NVB_PROFILE_GAMING_720P_30FPS=2]="NVB_PROFILE_GAMING_720P_30FPS",h[h.NVB_PROFILE_GAMING_720P_60FPS=3]="NVB_PROFILE_GAMING_720P_60FPS",h[h.NVB_PROFILE_GAMING_1080P_30FPS=4]="NVB_PROFILE_GAMING_1080P_30FPS",h[h.NVB_PROFILE_GAMING_1080P_60FPS=5]="NVB_PROFILE_GAMING_1080P_60FPS",h[h.NVB_PROFILE_ROAMING_720P_30FPS=6]="NVB_PROFILE_ROAMING_720P_30FPS",h[h.NVB_PROFILE_ROAMING_720P_60FPS=7]="NVB_PROFILE_ROAMING_720P_60FPS",n;var h})(),i=(()=>{return(h=i||(i={}))[h.NVB_R_UDP_BUFFER_TOO_SMALL=2148204566]="NVB_R_UDP_BUFFER_TOO_SMALL",h[h.NVB_R_FIREWALL_BLOCK=2148016156]="NVB_R_FIREWALL_BLOCK",h[h.NVB_R_WIFI_CONNECTIVITY_ISSUE1=2147745808]="NVB_R_WIFI_CONNECTIVITY_ISSUE1",h[h.NVB_R_WIFI_CONNECTIVITY_ISSUE2=2147745799]="NVB_R_WIFI_CONNECTIVITY_ISSUE2",h[h.NVB_R_WIFI_CONNECTIVITY_ISSUE3=2147745796]="NVB_R_WIFI_CONNECTIVITY_ISSUE3",h[h.VIDEO_DECODER_CREATION_FAILED=67174402]="VIDEO_DECODER_CREATION_FAILED",h[h.VIDEO_DECODER_ERROR_MASK=790289]="VIDEO_DECODER_ERROR_MASK",h[h.NVST_NETERR_CLIENT_DISCONNECT_UNINTENDED_NO_VIDEO_PACKETS_RECENTLY=2147745808]="NVST_NETERR_CLIENT_DISCONNECT_UNINTENDED_NO_VIDEO_PACKETS_RECENTLY",h[h.NVST_DISCONN_SERVER_VFP_PROTECTED_CONTENT=2148438786]="NVST_DISCONN_SERVER_VFP_PROTECTED_CONTENT",h[h.GFNPC_CLIENT_FRAME_LOSS_TIMEOUT_ERROR=3237150722]="GFNPC_CLIENT_FRAME_LOSS_TIMEOUT_ERROR",h[h.GFNPC_CLIENT_SESSION_IN_INITIALIZING_STATE=3237150723]="GFNPC_CLIENT_SESSION_IN_INITIALIZING_STATE",h[h.GFNPC_CLIENT_VIDEO_PLAY_FAIL=3237150724]="GFNPC_CLIENT_VIDEO_PLAY_FAIL",h[h.GFNPC_CLIENT_AUDIO_PLAY_FAIL=3237150725]="GFNPC_CLIENT_AUDIO_PLAY_FAIL",h[h.GFNPC_CLIENT_GAME_LAUNCHED_IN_NEW_TAB=3237150726]="GFNPC_CLIENT_GAME_LAUNCHED_IN_NEW_TAB",h[h.GFNPC_CLIENT_GUESTMODE_SESSION_LIMIT_PER_DEVICE_REACHED=3237093682]="GFNPC_CLIENT_GUESTMODE_SESSION_LIMIT_PER_DEVICE_REACHED",h[h.GUEST_MODE_CAMAPAIGN_DISABLED=3237093705]="GUEST_MODE_CAMAPAIGN_DISABLED",i;var h})(),D=(()=>{return(h=D||(D={}))[h.NVB_R_UNKNOWN=-1]="NVB_R_UNKNOWN",h[h.NVB_R_SUCCESS=0]="NVB_R_SUCCESS",h[h.NVB_R_UNINITIALIZED=1]="NVB_R_UNINITIALIZED",h[h.NVB_R_CALLBACKS_NOT_REGISTERED=2]="NVB_R_CALLBACKS_NOT_REGISTERED",h[h.NVB_R_NOT_SUPPORTED=3]="NVB_R_NOT_SUPPORTED",h[h.NVB_R_VERSION_MISMATCH=4]="NVB_R_VERSION_MISMATCH",h[h.NVB_R_UPGRADE_RECOMMENDED=5]="NVB_R_UPGRADE_RECOMMENDED",h[h.NVB_R_OS_ERROR=6]="NVB_R_OS_ERROR",h[h.NVB_R_INVALID_PARAM=101]="NVB_R_INVALID_PARAM",h[h.NVB_R_INVALID_CLIENT_OBJECT=102]="NVB_R_INVALID_CLIENT_OBJECT",h[h.NVB_R_INVALID_SERVER_NAME=103]="NVB_R_INVALID_SERVER_NAME",h[h.NVB_R_INVALID_PORT_NUMBER=104]="NVB_R_INVALID_PORT_NUMBER",h[h.NVB_R_INVALID_VIDEO_DECODER=105]="NVB_R_INVALID_VIDEO_DECODER",h[h.NVB_R_INVALID_AUDIO_RENDERER=106]="NVB_R_INVALID_AUDIO_RENDERER",h[h.NVB_R_INVALID_AUTH_TYPE=107]="NVB_R_INVALID_AUTH_TYPE",h[h.NVB_R_INVALID_STREAM_SETTINGS=108]="NVB_R_INVALID_STREAM_SETTINGS",h[h.NVB_R_INVALID_CERTIFICATE=109]="NVB_R_INVALID_CERTIFICATE",h[h.NVB_R_INVALID_PRIVATE_KEY=110]="NVB_R_INVALID_PRIVATE_KEY",h[h.NVB_R_INVALID_CERTIFICATE_KEY_PAIR=111]="NVB_R_INVALID_CERTIFICATE_KEY_PAIR",h[h.NVB_R_REINITIALIZE_ERROR=112]="NVB_R_REINITIALIZE_ERROR",h[h.NVB_R_INVALID_PROFILE=113]="NVB_R_INVALID_PROFILE",h[h.NVB_R_INVALID_INPUT_DEVICE=114]="NVB_R_INVALID_INPUT_DEVICE",h[h.NVB_R_INVALID_STATS_OPTION=115]="NVB_R_INVALID_STATS_OPTION",h[h.NVB_R_INVALID_FEATURECONTROL_TYPE=116]="NVB_R_INVALID_FEATURECONTROL_TYPE",h[h.NVB_R_NETWORK_ERROR=151]="NVB_R_NETWORK_ERROR",h[h.NVB_R_SOCKET_ERROR=152]="NVB_R_SOCKET_ERROR",h[h.NVB_R_ADDRESS_RESOLVE_FAILED=153]="NVB_R_ADDRESS_RESOLVE_FAILED",h[h.NVB_R_CONNECT_FAILED=154]="NVB_R_CONNECT_FAILED",h[h.NVB_R_SSL_ERROR=155]="NVB_R_SSL_ERROR",h[h.NVB_R_CONNECTION_TIMEOUT=156]="NVB_R_CONNECTION_TIMEOUT",h[h.NVB_R_DATA_RECEIVE_TIMEOUT=157]="NVB_R_DATA_RECEIVE_TIMEOUT",h[h.NVB_R_PEER_NO_RESPONSE=158]="NVB_R_PEER_NO_RESPONSE",h[h.NVB_R_UNEXPECTED_HTTPREDIRECT=159]="NVB_R_UNEXPECTED_HTTPREDIRECT",h[h.NVB_R_NETWORK_CAPABLE=201]="NVB_R_NETWORK_CAPABLE",h[h.NVB_R_INSUFFICIENT_NETWORK_CAPABILITY=202]="NVB_R_INSUFFICIENT_NETWORK_CAPABILITY",h[h.NVB_R_MINIMUM_NETWORK_CAPABILITY=203]="NVB_R_MINIMUM_NETWORK_CAPABILITY",h[h.NVB_R_BLOCK_STREAM=204]="NVB_R_BLOCK_STREAM",h[h.NVB_R_AUTH_ERR_UNKNOWN=252]="NVB_R_AUTH_ERR_UNKNOWN",h[h.NVB_R_AUTH_ERR_DEFUNCT_TOKEN=253]="NVB_R_AUTH_ERR_DEFUNCT_TOKEN",h[h.NVB_R_AUTH_ERR_UNAUTHORIZED_CLIENT=254]="NVB_R_AUTH_ERR_UNAUTHORIZED_CLIENT",h[h.NVB_R_AUTH_ERR_UNSUPPORTED_PROTOCOL=255]="NVB_R_AUTH_ERR_UNSUPPORTED_PROTOCOL",h[h.NVB_R_AUTH_ERR_UNREACHABLE_AUTH_SERVER=256]="NVB_R_AUTH_ERR_UNREACHABLE_AUTH_SERVER",h[h.NVB_R_AUTH_ERR_UNSUPPORTED_TOKEN_FORMAT=257]="NVB_R_AUTH_ERR_UNSUPPORTED_TOKEN_FORMAT",h[h.NVB_R_AUTH_ERR_TOKEN_NOT_UPDATED=258]="NVB_R_AUTH_ERR_TOKEN_NOT_UPDATED",h[h.NVB_R_SESSION_NOT_ACTIVE=301]="NVB_R_SESSION_NOT_ACTIVE",h[h.NVB_R_SESSION_LIMIT_REACHED=302]="NVB_R_SESSION_LIMIT_REACHED",h[h.NVB_R_INSUFFICIENT_RESOURCES=303]="NVB_R_INSUFFICIENT_RESOURCES",h[h.NVB_R_EULA_NOT_ACCEPTED=304]="NVB_R_EULA_NOT_ACCEPTED",h[h.NVB_R_APP_TITLE_FENCED=305]="NVB_R_APP_TITLE_FENCED",h[h.NVB_R_INVALID_APP_IDENTIFIER=306]="NVB_R_INVALID_APP_IDENTIFIER",h[h.NVB_R_PREFERRED_CONTROLLER_NOT_FOUND=307]="NVB_R_PREFERRED_CONTROLLER_NOT_FOUND",h[h.NVB_R_NO_ACTIVE_SESSION_FOUND=308]="NVB_R_NO_ACTIVE_SESSION_FOUND",h[h.NVB_R_SESSION_NOT_PAUSED=309]="NVB_R_SESSION_NOT_PAUSED",h[h.NVB_R_SESSION_TERMINATED_MULTIPLE_LOGIN=310]="NVB_R_SESSION_TERMINATED_MULTIPLE_LOGIN",h[h.NVB_R_SESSION_TERMINATED_ANOTHER_CLIENT=311]="NVB_R_SESSION_TERMINATED_ANOTHER_CLIENT",h[h.NVB_R_STREAMER_UNINITIALIZED=341]="NVB_R_STREAMER_UNINITIALIZED",h[h.NVB_R_STREAMER_NETWORK_ERROR=342]="NVB_R_STREAMER_NETWORK_ERROR",h[h.NVB_R_STREAMER_CONNECT_FAILED=343]="NVB_R_STREAMER_CONNECT_FAILED",h[h.NVB_R_USER_IS_NOT_ENTITLED=351]="NVB_R_USER_IS_NOT_ENTITLED",h[h.NVB_R_GES_NOT_REACHABLE=352]="NVB_R_GES_NOT_REACHABLE",h[h.NVB_R_USER_NOT_REGISTERED_IN_GES=353]="NVB_R_USER_NOT_REGISTERED_IN_GES",h[h.NVB_R_NO_ENTITLEMENT_TIME_REMAINING=354]="NVB_R_NO_ENTITLEMENT_TIME_REMAINING",h[h.NVB_R_SERVER_ERROR=501]="NVB_R_SERVER_ERROR",h[h.NVB_R_SERVER_OUT_OF_SERVICE=502]="NVB_R_SERVER_OUT_OF_SERVICE",h[h.NVB_R_SEVER_MAINTENANCE_MODE=503]="NVB_R_SEVER_MAINTENANCE_MODE",h[h.NVB_R_INVALID_SERVER_RESPONSE=504]="NVB_R_INVALID_SERVER_RESPONSE",h[h.NVB_R_TOO_MANY_SERVER_REQUESTS=505]="NVB_R_TOO_MANY_SERVER_REQUESTS",h[h.NVB_R_APPLICATION_PATCHING=506]="NVB_R_APPLICATION_PATCHING",h[h.NVB_R_APP_MAINTENANCE_STATUS=3237290296]="NVB_R_APP_MAINTENANCE_STATUS",h[h.NVB_R_APP_MAINTENANCE_STATUS_WORKAROUND=-1057677e3]="NVB_R_APP_MAINTENANCE_STATUS_WORKAROUND",h[h.NVB_R_REQUIRED_SEAT_INSTANCE_TYPE_NOT_SUPPORTED=3237290301]="NVB_R_REQUIRED_SEAT_INSTANCE_TYPE_NOT_SUPPORTED",h[h.NVB_R_SERVER_SESSION_QUEUE_LENGTH_EXCEEDED=3237290302]="NVB_R_SERVER_SESSION_QUEUE_LENGTH_EXCEEDED",h[h.NVB_R_SERVER_SESSION_QUEUE_LENGTH_EXCEEDED_WORKAROUND=-1057676994]="NVB_R_SERVER_SESSION_QUEUE_LENGTH_EXCEEDED_WORKAROUND",h[h.NVB_R_REQUIRED_SEAT_INSTANCE_TYPE_NOT_SUPPORTED_WORKAROUND=-1057676995]="NVB_R_REQUIRED_SEAT_INSTANCE_TYPE_NOT_SUPPORTED_WORKAROUND",h[h.NVB_R_REGION_NOT_SUPPORTED_FOR_STREAMING=-1057676993]="NVB_R_REGION_NOT_SUPPORTED_FOR_STREAMING",h[h.NVB_R_REGION_NOT_SUPPORTED_FOR_STREAMING_WORKAROUND=3237290303]="NVB_R_REGION_NOT_SUPPORTED_FOR_STREAMING_WORKAROUND",h[h.NVB_R_SESSION_GAME_BINARIES_NOT_AVAILABLE_IN_REGION=3237290306]="NVB_R_SESSION_GAME_BINARIES_NOT_AVAILABLE_IN_REGION",h[h.NVB_R_SESSION_GAME_BINARIES_NOT_AVAILABLE_IN_REGION_WORKAROUND=-1057676990]="NVB_R_SESSION_GAME_BINARIES_NOT_AVAILABLE_IN_REGION_WORKAROUND",h[h.NVB_R_SESSION_IN_QUEUE_ABANDONED=3237093701]="NVB_R_SESSION_IN_QUEUE_ABANDONED",h[h.NVB_R_SESSION_ICE_CONNECTION_FAILED=3237093894]="NVB_R_SESSION_ICE_CONNECTION_FAILED",h[h.NVB_R_SERVER_ERROR_BEGIN=61440]="NVB_R_SERVER_ERROR_BEGIN",h[h.NVB_R_SERVER_ERROR_MAX=553648127]="NVB_R_SERVER_ERROR_MAX",h[h.NVB_R_SESSION_REMOVED_FROM_QUEUE_MAINTENANCE=3237290311]="NVB_R_SESSION_REMOVED_FROM_QUEUE_MAINTENANCE",h[h.NVB_R_SESSION_REMOVED_FROM_QUEUE_MAINTENANCE_WORKAROUND=-1057676985]="NVB_R_SESSION_REMOVED_FROM_QUEUE_MAINTENANCE_WORKAROUND",h[h.NVB_R_ZONE_MAITENANCE_STATUS=3237290312]="NVB_R_ZONE_MAITENANCE_STATUS",h[h.NVB_R_ZONE_MAITENANCE_STATUS_WORKAROUND=-1057676984]="NVB_R_ZONE_MAITENANCE_STATUS_WORKAROUND",h[h.NVB_R_GFN_GAME_NOT_OWNED_BY_USER=15806465]="NVB_R_GFN_GAME_NOT_OWNED_BY_USER",D;var h})(),m=(()=>{return(h=m||(m={}))[h.NVB_SN_STREAMING_PROPERTIES=0]="NVB_SN_STREAMING_PROPERTIES",h[h.NVB_SN_STREAMER_CONNECTED=1]="NVB_SN_STREAMER_CONNECTED",h[h.NVB_SN_STREAMING_QUALITY_CHANGED=2]="NVB_SN_STREAMING_QUALITY_CHANGED",h[h.NVB_SN_SERVER_INITIATED_PAUSE=3]="NVB_SN_SERVER_INITIATED_PAUSE",h[h.NVB_SN_SERVER_INITIATED_RESUME=4]="NVB_SN_SERVER_INITIATED_RESUME",h[h.NVB_SN_CONTROLLER_MAPPING_CHANGED=5]="NVB_SN_CONTROLLER_MAPPING_CHANGED",h[h.NVB_SN_APPROACHING_IDLE_TIMEOUT=11]="NVB_SN_APPROACHING_IDLE_TIMEOUT",h[h.NVB_SN_APPROACHING_SESSION_MAX_TIMELIMIT=12]="NVB_SN_APPROACHING_SESSION_MAX_TIMELIMIT",h[h.NVB_SN_APPROACHING_ENTITLEMENT_TIMEOUT=13]="NVB_SN_APPROACHING_ENTITLEMENT_TIMEOUT",h[h.NVB_SN_CLEAR_IDLE_TIMEOUT=14]="NVB_SN_CLEAR_IDLE_TIMEOUT",h[h.NVB_SN_WARNING_MAX=20]="NVB_SN_WARNING_MAX",h[h.NVB_SN_FRAME_STATISTICS=21]="NVB_SN_FRAME_STATISTICS",h[h.NVB_SN_SUMMARY_STATISTICS=22]="NVB_SN_SUMMARY_STATISTICS",h[h.NVB_SN_TERMINATION_BEGIN=50]="NVB_SN_TERMINATION_BEGIN",h[h.NVB_SN_STREAMING_START_FAILED=51]="NVB_SN_STREAMING_START_FAILED",h[h.NVB_SN_STOPPED_BY_USER=52]="NVB_SN_STOPPED_BY_USER",h[h.NVB_SN_STOPPED_UNINTENTIONALLY=53]="NVB_SN_STOPPED_UNINTENTIONALLY",h[h.NVB_SN_ENTITLEMENT_TIMEOUT=54]="NVB_SN_ENTITLEMENT_TIMEOUT",h[h.NVB_SN_STREAMER_NETWORK_ERROR=55]="NVB_SN_STREAMER_NETWORK_ERROR",h[h.NVB_SN_EXITED_DUE_TO_USER_IDLE_TIMEOUT=56]="NVB_SN_EXITED_DUE_TO_USER_IDLE_TIMEOUT",h[h.NVB_SN_EXITED_DUE_TO_SESSION_TIMELIMIT=57]="NVB_SN_EXITED_DUE_TO_SESSION_TIMELIMIT",h[h.NVB_SN_TERMINATED_BY_OPERATOR=58]="NVB_SN_TERMINATED_BY_OPERATOR",h[h.NVB_SN_PAUSED_BY_USER=59]="NVB_SN_PAUSED_BY_USER",h[h.NVB_SN_TERMINATED_BY_PM=60]="NVB_SN_TERMINATED_BY_PM",h[h.NVB_SN_TERMINATED_WINDOWED_MODE=61]="NVB_SN_TERMINATED_WINDOWED_MODE",h[h.NVB_SN_TERMINATED_GAME_EXITED=62]="NVB_SN_TERMINATED_GAME_EXITED",h[h.NVB_SN_TERMINATED_UNAUTHROIZED_PROCESS_ACCESS=63]="NVB_SN_TERMINATED_UNAUTHROIZED_PROCESS_ACCESS",h[h.NVB_SN_TERMINATED_MULTIPLE_LOGIN=64]="NVB_SN_TERMINATED_MULTIPLE_LOGIN",h[h.NVB_SN_TERMINATED_MALICIOUS_PROCESS_ACCESS=65]="NVB_SN_TERMINATED_MALICIOUS_PROCESS_ACCESS",h[h.NVB_SN_TERMINATED_UNKNOWN_PROCESS_ACCESS=66]="NVB_SN_TERMINATED_UNKNOWN_PROCESS_ACCESS",h[h.NVB_SN_TERMINATED_MINER_PROCESS_ACCESS=67]="NVB_SN_TERMINATED_MINER_PROCESS_ACCESS",h[h.NVB_SN_TERMINATED_FULL_TDR_OCCURRED=68]="NVB_SN_TERMINATED_FULL_TDR_OCCURRED",h[h.NVB_SN_TERMINATED_ANOTHER_CLIENT=69]="NVB_SN_TERMINATED_ANOTHER_CLIENT",h[h.NVB_SN_TERMINATED_GAME_NOT_OWNED_BY_USER=72]="NVB_SN_TERMINATED_GAME_NOT_OWNED_BY_USER",h[h.NVB_SN_PM_TERMINATED_MAINTENANCE_MODE=73]="NVB_SN_PM_TERMINATED_MAINTENANCE_MODE",h[h.NVB_SN_TERMINATION_MAX=200]="NVB_SN_TERMINATION_MAX",h[h.NVB_SN_TERMINATED_DUE_TO_SYSTEM_SLEEP=301]="NVB_SN_TERMINATED_DUE_TO_SYSTEM_SLEEP",h[h.NVB_SN_PAUSED_DUE_TO_SYSTEM_SLEEP=302]="NVB_SN_PAUSED_DUE_TO_SYSTEM_SLEEP",h[h.NVB_SN_INIT_FAILED_DUE_TO_SYSTEM_SLEEP=303]="NVB_SN_INIT_FAILED_DUE_TO_SYSTEM_SLEEP",h[h.NVB_SN_INIT_PAUSED_DUE_TO_SYSTEM_SLEEP=304]="NVB_SN_INIT_PAUSED_DUE_TO_SYSTEM_SLEEP",m;var h})(),y=(()=>{return(h=y||(y={})).STREAMING_BEGIN="STREAMING_BEGIN",h.SESSION_SETUP_SUCCESS="SESSION_SETUP_SUCCESS",h.SESSION_SETUP_FAILURE="SESSION_SETUP_FAILURE",h.STREAMING_TERMINATED="STREAMING_TERMINATED",h.ACTIVE_SESSIONS="ACTIVE_SESSIONS",h.GET_SESSION_INFO="GET_SESSION_INFO",h.STOP_RESULT="STOP_RESULT",h.SESSION_RESUME_FAILURE="SESSION_RESUME_FAILURE",h.STREAMING_WARNINGS="STREAMING_WARNINGS",h.SESSION_SETUP_PROGRESS="SESSION_SETUP_PROGRESS",h.ANALYTICS_EVENT="ANALYTICS_EVENT",h.SUMMARY_STATS="SUMMARY_STATS",h.FRAME_STATS="FRAME_STATS",h.UPDATE_AUTH_TOKEN="UPDATE_AUTH_TOKEN",h.STREAMING_QUALITY="STREAMING_QUALITY",h.STREAMING_FIRST_FRAME="STREAMING_FIRST_FRAME",h.STREAMING_PROPERTY_UPDATE="STREAMING_PROPERTY_UPDATE",h.STREAMING_FRAME_LOSS_WARNING="STREAMING_FRAME_LOSS_WARNING",h.STREAMING_FRAME_LOSS_ERROR="STREAMING_FRAME_LOSS_ERROR",h.STREAMING_FRAME_LOSS_CLEARED="STREAMING_FRAME_LOSS_CLEARED",h.BROWSER_ANALYTICS_EVENT="BROWSER_ANALYTICS_EVENT",h.SERENITY_EVENT="SERENITY_EVENT",h.STREAMING_CLIENT_MESSAGE="STREAMING_CLIENT_MESSAGE",y;var h})(),T=(()=>{return(h=T||(T={}))[h.NVB_SESSION_STATUS_UNKNOWN=-1]="NVB_SESSION_STATUS_UNKNOWN",h[h.NVB_SESSION_INITIALIZING=0]="NVB_SESSION_INITIALIZING",h[h.NVB_SESSION_READY_FOR_CONNECT=1]="NVB_SESSION_READY_FOR_CONNECT",h[h.NVB_SESSION_STREAMING=2]="NVB_SESSION_STREAMING",h[h.NVB_SESSION_WAITING_FOR_RECONNECT=3]="NVB_SESSION_WAITING_FOR_RECONNECT",h[h.NVB_SESSION_PAUSED_INTENTIONAL=4]="NVB_SESSION_PAUSED_INTENTIONAL",h[h.NVB_SESSION_PAUSED_UNINTENTIONAL=5]="NVB_SESSION_PAUSED_UNINTENTIONAL",h[h.NVB_SESSION_RESUMING=6]="NVB_SESSION_RESUMING",T;var h})(),r=(()=>{return(h=r||(r={}))[h.NVB_SSS_CONNECTING=0]="NVB_SSS_CONNECTING",h[h.NVB_SSS_QUEUEPOSITION=1]="NVB_SSS_QUEUEPOSITION",h[h.NVB_SSS_CONFIGURING=2]="NVB_SSS_CONFIGURING",h[h.NVB_SSS_STARTINGSTREAMER=3]="NVB_SSS_STARTINGSTREAMER",h[h.NVB_SSS_SEATREADY=4]="NVB_SSS_SEATREADY",h[h.NVB_SSS_PREVIOUS_SESSION_CLEANUP=5]="NVB_SSS_PREVIOUS_SESSION_CLEANUP",r;var h})(),s=(()=>{return(h=s||(s={})).STREAMING_CONNECTION_LOST="STREAMING_CONNECTION_LOST",h.STREAMING_CONNECTION_FOUND="STREAMING_CONNECTION_FOUND",s;var h})(),p=(()=>{return(h=p||(p={}))[h.RESUMABLE=0]="RESUMABLE",h[h.NOT_RESUMABLE=1]="NOT_RESUMABLE",h[h.NO_AUTH_TOKEN=2]="NO_AUTH_TOKEN",p;var h})()},14179:(He,de,e)=>{"use strict";e.d(de,{FW:()=>n.F,qC:()=>i.qC,dq:()=>i.dq,Y6:()=>i.Y6,Py:()=>i.Py,a1:()=>i.a1,Sj:()=>i.Sj,V4:()=>i.V4});var n=e(25256),i=e(46956)},25256:(He,de,e)=>{"use strict";e.d(de,{F:()=>ue});var n=e(3786),i=e(6484),D=e(2984),m=e(91992),y=e(22663),T=e(85816),r=e(9170),a=e(33927),s=e(98636),p=e(53466),l=e(67202),t=e(18293),w=e(20088),h=e(18511),u=e(40253),o=e(79441),f=e(12702),c=e(81134),g=e(61486),I=e(92941),G=e(90425),x=e(89919),E=e(34361),P=e(90490),v=e(45871),O=e(46956),C=e(202);class _{constructor(){this.result=O.dq.NVB_R_SESSION_NOT_ACTIVE,this.extendedError=[]}}var F=e(12556),V=e(61074),b=e(89166),B=e(73159),U=e(19481),A=e(31805),S=e(2316),Y=e(57390),se=e(22087),fe=e(40519),$=e(11889),ae=e(13335),me=e(52349),ye=e(33987);let ue=(()=>{class X{constructor(K,Z,L,W,te,ie,Q,k,oe,N,q,Me,xe,ct,Se,Ge,St,Tt,Te,Je,xt,Ye,rt,ge){this.bridgeService=Z,this.windowService=L,this.sharedStorageService=W,this.gameSessionAnalyticsService=te,this.gameSessionDistributedTracingService=ie,this.idmService=Q,this.gfnSdkService=k,this.appConfig=oe,this.discordService=N,this.networkStatusService=q,this.distributedTracingUtilService=Me,this.networkConfigurationService=xe,this.gfcHelperService=ct,this.keyboardLayoutService=Se,this.streamerConfigService=Ge,this.surveyService=St,this.projectInterfaceService=Tt,this.serviceWorkerService=Te,this.networkStatus=Je,this.streamingProfileService=xt,this.systemInfoService=Ye,this.deeplinkHelperService=rt,this.clipboardService=ge,this.connectivityEventSub=new o.xQ,this.startRequestsSub=new o.xQ,this.validResumeErrorCodes=[O.Y6.NVB_SN_STREAMER_NETWORK_ERROR,O.Y6.NVB_SN_STOPPED_UNINTENTIONALLY,O.Y6.NVB_SN_PAUSED_DUE_TO_SYSTEM_SLEEP,O.Y6.NVB_SN_INIT_PAUSED_DUE_TO_SYSTEM_SLEEP],this.validSleepErrorCodes=[O.Y6.NVB_SN_STREAMER_NETWORK_ERROR,O.Y6.NVB_SN_STOPPED_BY_USER],this.isVideoReceived=!1,this._hasFirstFrameBeenReceived=!1,this.isStreaming=!1,this.resumableSession=!1,this.waitForStop=!1,this.shuttingDownFromSleep=!1,this.sharedStreamingProperties={sessionId:null,subSessionId:null,streams:null},this.isResume=!1,this.autoResuming=!1,this.sessionStartAttempts=0,this.isAutoResumedSession=!1,this.terminatingAutoResume$=new o.xQ,this.cancelTimerSubject=new o.xQ,this.reconnectTimeout=(0,f.H)(this.appConfig.streamer.reconnectTimeout).pipe((0,m.B)(),(0,y.R)(this.cancelTimerSubject)),this.nvstNetworkErrorCodes=/^8004([A-F0-9]{4})/,this.isAuthTokenRefreshedOnce=!1,this.logger=K.getLogger("streamingService"),this.resetStreamingServiceFlags(),this.gameSessionAnalyticsService.setResumeType(this.resumeType),this.initializeCallbackHandlers(),this.registerCallback$=this.bridgeService.executeCommand(D.Gh.Gfn.Streaming.RegisterCallback),this._streamingEvent$=this.registerCallback$.pipe((0,T.zg)(Ve=>{const at=this.callbackHandler.get(Ve.event);return at?at.call(this,Ve):(0,c.of)(Ve)}),(0,m.B)()),this.streamingEvent$.subscribe(()=>{},Ve=>this.logger.error("callback error",Ve),()=>this.logger.info("callback complete")),this.activeSessionsEvent$=this.streamingEvent$.pipe((0,r.h)(Ve=>Ve.event===O.V4.ACTIVE_SESSIONS),(0,a.U)(Ve=>Ve)),this.getSessionInfoEvent$=this.streamingEvent$.pipe((0,r.h)(Ve=>Ve.event===O.V4.GET_SESSION_INFO),(0,a.U)(Ve=>Ve)),this.stopEvent$=this.streamingEvent$.pipe((0,r.h)(Ve=>Ve.event===O.V4.STOP_RESULT),(0,s.b)(Ve=>{this.waitForStop=!1,this.updateSessionId(Ve.sessionId,Ve.subSessionId)})),(0,g.aj)([this.streamingProfileService.getStreamingProfileGuid(),this.systemInfoService.getSystemInfoGuid()]).pipe((0,T.zg)(([Ve,at])=>this.bridgeService.executeCommand(D.Gh.Gfn.Streaming.UpdateEventInfoGuids,{streamingProfileGuid:Ve,systemInfoGuid:at}))).subscribe(),this.initProjectInterfaceNotifications()}get streamingProperties(){return this.sharedStreamingProperties}get hasFirstFrameBeenReceived(){return this._hasFirstFrameBeenReceived}get isStreamingOn(){return this.isStreaming}get connectivityEvent$(){return this.connectivityEventSub.asObservable()}get startRequests$(){return this.startRequestsSub.asObservable()}get resumeType(){return this.isResume?this.isAutoResumedSession?F.NuE.AutoResume:F.NuE.DeviceTransition:F.NuE.None}get streamingEvent$(){return this._streamingEvent$}sessionTerminationListener(K){this.swListenerSubscription=this.serviceWorkerService.swNotifyListener.subscribe(Z=>{this.logger.info("Msg received from SW to stop streaming: ",Z),this.stopStreaming(!1,O.Sj.GFNPC_CLIENT_GAME_LAUNCHED_IN_NEW_TAB).subscribe(()=>{const W=new U.tw({event:O.V4.STREAMING_TERMINATED,reason:O.Y6.NVB_SN_TERMINATED_ANOTHER_CLIENT,latestStreamedAppName:Z.content});null==K||K.goToError(W),K=null})})}unsubscribeSessionTerminationListener(){var K;null===(K=this.swListenerSubscription)||void 0===K||K.unsubscribe()}initProjectInterfaceNotifications(){this.streamingEvent$.subscribe(K=>{switch(K.event){case O.V4.SESSION_SETUP_SUCCESS:this.projectInterfaceService.notifyStreamingSessionSetupSuccess({event:K.event,sessionId:K.sessionId,subSessionId:K.subSessionId});break;case O.V4.STREAMING_BEGIN:this.projectInterfaceService.notifyStreamingBegin({event:K.event});break;case O.V4.STOP_RESULT:case O.V4.STREAMING_TERMINATED:case O.V4.SESSION_SETUP_FAILURE:const W={event:K.event,errorCode:K.reason,isResumable:this.isResumableNetworkErrorCode(K)};this.projectInterfaceService.notifyStreamingEnd(W)}},I.Z)}updateKeyboardLayout(){return(0,g.aj)([this.systemInfoService.getDeviceOSType().pipe((0,p.q)(1)),this.keyboardLayoutService.readCachedKeyboardLayout()]).pipe((0,s.b)(([K,Z])=>{this.logger.info("Keyboard layout cache read response for prepare:",Z);let L=null==Z?void 0:Z.code;!L&&i.ng.isBrowserPlatform()&&(L=this.keyboardLayoutService.getDefaultKBLayoutCode()),this.logger.info("Updating the keyboard layout data to be passed to the streamer:",L),this.keyboardLayoutCode=L,this.projectInterfaceService.setIsNonEnglishKeyboardLayout(this.keyboardLayoutService.isNonEnglishKeyboardLayout(L,K))},K=>this.logger.info("Keyboard layout cache read error:",K)),(0,l.h)(null))}initializeCallbackHandlers(){this.callbackHandler=new Map,this.callbackHandler.set(O.V4.SESSION_SETUP_SUCCESS,this.onSessionSetupSuccess),this.callbackHandler.set(O.V4.STREAMING_BEGIN,this.onStreamingBegin),this.callbackHandler.set(O.V4.SESSION_SETUP_FAILURE,this.onSetupFailure),this.callbackHandler.set(O.V4.STREAMING_TERMINATED,this.onStreamingTerminated),this.callbackHandler.set(O.V4.UPDATE_AUTH_TOKEN,this.onUpdateAuthToken),this.callbackHandler.set(O.V4.STREAMING_FIRST_FRAME,this.onStreamingFirstFrame),this.callbackHandler.set(O.V4.SESSION_RESUME_FAILURE,this.onSessionResumeFailure),this.callbackHandler.set(O.V4.SESSION_SETUP_PROGRESS,this.onSessionSetupProgress),this.callbackHandler.set(O.V4.STREAMING_FRAME_LOSS_WARNING,this.onFrameLossWarning),this.callbackHandler.set(O.V4.STREAMING_FRAME_LOSS_ERROR,this.onFrameLossError),this.callbackHandler.set(O.V4.STREAMING_FRAME_LOSS_CLEARED,this.onFrameLossCleared)}mapSleepErrorCode(K){return this.shuttingDownFromSleep&&(0,C.includes)(this.validSleepErrorCodes,K.reason)&&(this.logger.info("Valid error reason for sleep, replacing reason but leaving error code."),K.reason=O.Y6.NVB_SN_TERMINATED_DUE_TO_SYSTEM_SLEEP,this.shuttingDownFromSleep=!1),K}onUpdateAuthToken(K){this.logger.info("getDelegateToken");const Z=this.distributedTracingUtilService.extract(V.FORMAT_TEXT_MAP,K.spanData);return this.idmService.getAuthToken(!1,Z).pipe((0,t.K)(L=>(this.logger.info("Catch delegateToken error"),(0,c.of)({token:""}))),(0,T.zg)(L=>this.processDelegateToken(L||null)),(0,a.U)(L=>K))}processDelegateToken(K){this.logger.info("processDelegateToken");let Z="";return null!==K&&(Z=JSON.stringify({access_token:K.token})),this.bridgeService.executeCommand(D.Gh.Gfn.Streaming.SetAuthToken,{token:Z})}onStreamingBegin(K){return this.logger.info("onStreamingBegin"),this.discordService.updatePresence(this.streamingParams.appName),this.distributedTracingUtilService.closeSpan(this.streamingSpan),this.isStreaming=!0,this.sessionStartAttempts=0,this.clipboardInitSub=this.clipboardService.init().subscribe(),this.clipboardAvailableSub=this.windowService.getFocusEvent().subscribe(()=>{var Z;null===(Z=this.clipboardService.detectClipboardChange)||void 0===Z||Z.next(!0)}),this.networkConfigurationService.cacheCurrentFingerprint().pipe((0,t.K)(Z=>(this.logger.error("Unable to cache current fingerprint: ",Z),(0,c.of)(!1))),(0,T.zg)(Z=>this.autoResuming?(this.logger.info("auto resuming, suppress onStreamingBegin "),this.connectivityEventSub.next({event:O.qC.STREAMING_CONNECTION_FOUND}),this.cancelTimerSubject.next(!0),this.resetAutoResumingState(),this.sendStreamingBeginTelemetry(),G.C):(this.logger.info("not auto-resuming, stream starting"),this.gameSessionAnalyticsService.updateGameLaunchDurations(F.FRL.StartSession,void 0),this.gameSessionAnalyticsService.updateGameLaunchDurations(F.FRL.StreamingStartDuration,void 0),this.gameSessionAnalyticsService.nextSeatSeatupEvent(null,!0),this.sendStreamingBeginTelemetry(),(0,c.of)(K))))}sendStreamingBeginTelemetry(){this.logger.info("sending telemetry, onStreamingBegin");const K={status:F.N3X.Success,isResume:this.isResume,errorDetails:"0x00000000"};this.gameSessionAnalyticsService.setResumeType(this.resumeType),this.gameSessionAnalyticsService.handleGeronimoLaunchResult(K,this.sharedStreamingProperties.sessionId),this.gameSessionDistributedTracingService.updateGeronimoLaunchInfo(K,this.sharedStreamingProperties.sessionId)}onStreamingFirstFrame(K){return this.logger.info("onStreamingFirstFrame"),this.isVideoReceived=!0,this._hasFirstFrameBeenReceived=!0,(0,c.of)(K)}onSetupFailure(K){return this.logger.error("onSetupFailure",K),this.waitForStop=!1,this.updateSessionId(K.sessionId,K.subSessionId),!1===this.isAuthTokenRefreshedOnce&&K.result.result===O.dq.NVB_R_AUTH_ERR_UNKNOWN?(this.logger.info("Failed with NVB_R_AUTH_ERR_UNKNOWN starting with refreshed token"),this.isAuthTokenRefreshedOnce=!0,this.setAuthInfo(!0).pipe((0,T.zg)(()=>this.start()),(0,T.zg)(()=>G.C))):1===this.sessionStartAttempts&&K.result.result===O.dq.NVB_R_SESSION_LIMIT_REACHED?(this.logger.info("Attempted to launch a session resulted in session limit reached, stopping or resuming active session"),this.gameSessionAnalyticsService.moveGameLaunchDuration(F.FRL.SessionCleanup,F.FRL.StartSession),this.gameSessionAnalyticsService.resetSeatSetupEventSequence(!0),this.gameSessionAnalyticsService.nextSeatSeatupEvent(null,!0),this.sessionCleanup(K).pipe((0,p.q)(1),(0,s.b)(()=>{this.gameSessionAnalyticsService.updateGameLaunchDurations(F.FRL.SessionCleanup,F.FRL.StartSession),this.gameSessionAnalyticsService.startGameLaunchDuration(F.FRL.StreamerClientSetupDuration)}),(0,T.zg)(Z=>Z.error?this.forwardSetupFailure({event:O.V4.SESSION_SETUP_FAILURE,result:{requestId:0,result:Z.result},sessionId:""}):this.start(Z.sessionId).pipe((0,T.zg)(()=>G.C))))):this.forwardSetupFailure(K)}forwardSetupFailure(K){this.gameSessionAnalyticsService.updateGameLaunchDurations(F.FRL.StartSession,void 0),this.gameSessionAnalyticsService.resetSeatSetupEventSequence(!1),this.gameSessionAnalyticsService.nextSeatSeatupEvent(null,!0);const Z=this.getErrorCode(K.result),L={status:"0x00000000"!==Z?i.ng.isCefPlatform()?F.N3X.GeronimoLaunchError:F.N3X.RagnarokLaunchError:F.N3X.Success,isResume:this.isResume,errorDetails:Z.toString()};return this.logger.info("received session error : ",L),this.gameSessionAnalyticsService.setResumeType(this.resumeType),this.gameSessionAnalyticsService.handleGeronimoLaunchResult(L,K.sessionId),this.gameSessionDistributedTracingService.updateGeronimoLaunchInfo(L,K.sessionId),this.sessionStartAttempts=0,(0,c.of)(K)}getErrorCode(K){let Z;return Z=(0,C.isArray)(K.extendedError)&&K.extendedError.length>0?K.extendedError[0]:K.result,(0,F.h6z)(Z)}onSessionResumeFailure(K){return this.waitForStop=!1,this.autoResuming?this.hasSessionTimedOut?(this.logger.info("returning cached terminated event"),(0,c.of)(this.prevTerminatedInfo)):(this.logger.info("auto resume failed, retrying",K),this.resumeableTerminateWrapper(this.prevTerminatedInfo,!0)):(this.logger.error("onResumeFailure",K),this.sendResumeFailureTelemetryData({status:i.ng.isCefPlatform()?F.N3X.GeronimoLaunchError:F.N3X.RagnarokLaunchError,errorDetails:(0,C.propertyOf)(K)("result").toString()}),this.updateSessionId(K.sessionId,K.subSessionId),(0,c.of)(K))}resetAutoResumingState(){this.autoResuming=!1,this.prevTerminatedInfo=null}updateNetorkTestIndirectPolicy(K,Z){return K?this.networkConfigurationService.updateCurrentFingerprintNetworkTestFlag(K,Z):(0,c.of)(!1)}getStreamerNetworkErrorInfo(K,Z){const L=Z.toString(16).toUpperCase();let W=[!1];return K===O.Y6.NVB_SN_STREAMER_NETWORK_ERROR&&this.nvstNetworkErrorCodes.test(L)?W=[!0,F.VRd.StreamerNetworkError]:this.appConfig.featureEnablement.networkTestPolicy.isFrameLossTimeoutErrorEnabled&&K===O.Y6.NVB_SN_PAUSED_BY_USER&&Z===O.Sj.GFNPC_CLIENT_FRAME_LOSS_TIMEOUT_ERROR&&(W=[!0,F.VRd.StreamerFrameLossTimeoutError]),this.logger.info(`Network test should${W[0]?"":" not"} be triggered from network error code: 0x${L}`),W}onStreamingTerminated(K){var Z,L;K=this.mapSleepErrorCode(K),this.logger.info("onStreamingTerminated",K),this.discordService.clearPresence(),this.isStreaming=!1,this.waitForStop=!1,null===(Z=this.clipboardAvailableSub)||void 0===Z||Z.unsubscribe(),null===(L=this.clipboardInitSub)||void 0===L||L.unsubscribe();const[W,te]=this.getStreamerNetworkErrorInfo(K.reason,K.extendedCode);return A._x.setIsPlaytestSession(!1),this.updateNetorkTestIndirectPolicy(W,te).pipe((0,t.K)(ie=>(this.logger.error("Unable to update streamer network test policy: ",ie),(0,c.of)(!1))),(0,T.zg)(ie=>this.isVideoReceived&&this.isResumableNetworkErrorCode(K)?(this.resumableSession=!0,this.isVideoReceived=!1,this.logger.info("session is resumable, sending STREAMING_CONNECTION_LOST event"),this.connectivityEventSub.next({event:O.qC.STREAMING_CONNECTION_LOST}),this.reconnectTimeout.pipe((0,p.q)(1)).subscribe(()=>{this.hasSessionTimedOut=!0,this.logger.info("hasSessionTimedOut set to true")}),this.resumeableTerminateWrapper(K,!1)):(this.logger.info("clear state"),this.resumableSession=!1,this.clearSessionId(!this.isSessionResumable()),(0,c.of)(K))))}isResumableNetworkErrorCode(K){return this.logger.info("isNetworkErrorCode? :",K),K.isResumable||(0,C.includes)(this.validResumeErrorCodes,K.reason)||K.reason===O.Y6.NVB_SN_PAUSED_BY_USER&&(K.extendedCode===O.Sj.NVST_NETERR_CLIENT_DISCONNECT_UNINTENDED_NO_VIDEO_PACKETS_RECENTLY||K.extendedCode===O.Sj.NVB_R_WIFI_CONNECTIVITY_ISSUE1||K.extendedCode===O.Sj.NVB_R_WIFI_CONNECTIVITY_ISSUE2||K.extendedCode===O.Sj.NVB_R_WIFI_CONNECTIVITY_ISSUE3||K.extendedCode===O.Sj.GFNPC_CLIENT_FRAME_LOSS_TIMEOUT_ERROR)}resumeableTerminateWrapper(K,Z){const L=this.terminatingAutoResume$.asObservable().pipe((0,l.h)(null)),W=this.resumableTerminate(K),te=Z?(0,f.H)(this.appConfig.streamer.reconnectRefreshInterval).pipe((0,T.zg)(()=>W)):W;return(0,x.T)(te,L).pipe((0,w.P)(),(0,h.o)(()=>!1===this.isStreaming),(0,T.zg)(ie=>((0,C.isNil)(ie)?this.logger.info("Terminate Fired!"):this.logger.info("Auto resume failed!"),(0,c.of)(K))))}resumableTerminate(K){if(this.networkStatusService.isOnline)return this.attemptAutoResume(K);{const Z=this.networkStatusService.onlineStatusChanged.pipe((0,r.h)(L=>!0===L));return(0,x.T)(this.reconnectTimeout,Z).pipe((0,w.P)(),(0,T.zg)(L=>!0===L?this.attemptAutoResume(K):(this.logger.info("Network timed out!"),(0,c.of)(K))))}}attemptAutoResume(K){const Z=this.startSessionsPollingSpan(b.j1.GetSessionInfo);return this.getSessionInfo(this.sharedStreamingProperties.sessionId,Z).pipe((0,T.zg)(L=>this.getSessionInfoEvent$),(0,s.b)(L=>{this.logger.info("getSessionInfo - sessionInfo",L),this.logger.info("update resumable state and clear"),this.distributedTracingUtilService.closeSpan(Z),this.updateResumableSession(L)}),(0,w.P)(),(0,T.zg)(L=>this.resumableSession?(this.logger.info("auto resuming.... calling gfnResume"),this.autoResuming=!0,this.prevTerminatedInfo=K,this.autoResume().pipe((0,T.zg)(()=>(this.isAutoResumedSession=!0,this.logger.info("auto-resume invoked"),G.C)),(0,t.K)(W=>(this.logger.error("auto-resume failed",W),this.resetAutoResumingState(),this.clearSessionId(!this.isSessionResumable()),(0,c.of)(K))))):(this.logger.info("fire terminated",this.resumableSession,this.networkStatusService.isOnline),(0,c.of)(K))),(0,t.K)(L=>(this.logger.info("attemptAutoResume error:",L),(0,c.of)(K))))}autoResume(){return this.isResume=!0,this.gameSessionAnalyticsService.setResumeType(this.resumeType),this.networkConfigurationService.networkSessionId$.pipe((0,p.q)(1),(0,T.zg)(K=>this.gfnResume(K).pipe((0,s.b)(Z=>{this.waitForStop=Z,this.startRequestsSub.next()}))))}clearSessionId(K=!1){this.sharedStreamingProperties.sessionId=null,this.sharedStreamingProperties.subSessionId=null,K&&(this.logger.info("clear old streaming sessionId from sharedstorage.json."),this.updateSessionId())}updateResumableSession(K){this.logger.info("updateResumableSession"),this.resumableSession=!0,this.getResumableState(K.result,K.sessions)===O.pi.NOT_RESUMABLE&&(this.resumableSession=!1),this.logger.info("updateResumableSession resumeable",this.resumableSession)}onSessionSetupSuccess(K){return this.sharedStreamingProperties.sessionId=K.sessionId,this.sharedStreamingProperties.subSessionId=K.subSessionId,this.updateSessionId(K.sessionId,K.subSessionId),this.sharedStreamingProperties.streams=K.streams,this.logger.info("streams: "+JSON.stringify(this.sharedStreamingProperties.streams)),this.surveyService.setStreamingSessionId(this.sharedStreamingProperties.sessionId),this.clipboardService.setStreamingIds(this.sharedStreamingProperties.sessionId,this.sharedStreamingProperties.subSessionId),this.autoResuming?(this.logger.info("auto resuming, suppress success"),G.C):(this.logger.info("streaming mode is",K.streamingMode),(0,c.of)(K))}onSessionSetupProgress(K){return this.autoResuming?G.C:(0,c.of)(K)}onFrameLossError(K){return this.logger.info("onFrameLossError"),this.pauseStreaming(O.Sj.GFNPC_CLIENT_FRAME_LOSS_TIMEOUT_ERROR).pipe((0,a.U)(Z=>K),(0,t.K)(Z=>(this.logger.error("pauseStreaming failed",Z),(0,c.of)(K))))}onFrameLossWarning(K){return this.logger.info("onFrameLossWarning"),(0,c.of)(K)}onFrameLossCleared(K){return this.logger.info("onFrameLossCleared"),(0,c.of)(K)}updateSessionId(K,Z){this.logger.info("Update session Id"),K&&this.gfcHelperService.updateEventDataParamIds({streamSessionId:K,streamSubSessionId:Z}),this.sharedStorageService.writeBlock("streamingSessionId",{sessionId:K||null}).subscribe(I.Z,W=>{this.logger.error("Failed to update the session Id in shared storage. Error:",W)})}gfnStart(K){return this.gameSessionAnalyticsService.updateGameLaunchDurations(F.FRL.StreamerClientSetupDuration,F.FRL.StreamerConnectionDuration),this.bridgeService.executeCommand(D.Gh.Gfn.Streaming.Start,K)}gfnPrepare(K){return this.bridgeService.executeCommand(D.Gh.Gfn.Streaming.Prepare,K)}getActiveSessions(K){return this.logger.info("getActiveSessions"),this.setAuthInfo().pipe((0,T.zg)(()=>this.bridgeService.executeCommand(D.Gh.Gfn.Streaming.GetActiveSessions,{spanData:(0,C.isNil)(K)?{}:this.distributedTracingUtilService.inject(V.FORMAT_TEXT_MAP,K)})))}getSessionInfo(K,Z){return this.logger.info("getSessionInfo"),this.bridgeService.executeCommand(D.Gh.Gfn.Streaming.GetSessionInfo,{session:K,spanData:Z?this.distributedTracingUtilService.inject(V.FORMAT_TEXT_MAP,Z):{}})}start(K){const Z=(0,C.pick)(this.streamingParams,["appId","appLaunchMode","frameStatsEnabled","summaryStatsEnabled","maxLocalPlayers","advancedLatencyOptimization","networkPacketCaptureEnabled","metaData","frameLossWarningTimeout","frameLossErrorTimeout","address","serverType","port","partnerCustomData","streamingProfile","locale","accountLinked","persistingInGameSettings","gameShortName","networkSessionId","audioModeFormat"]);this.keyboardLayoutCode&&(Z.keyboardLayout=this.keyboardLayoutCode,Z.allowKeyboardLayoutChange=!1),this.streamingSpan=this.distributedTracingUtilService.startSpan(b.j1.StartStreaming,this.gameSessionDistributedTracingService.getCurrentActiveSpan()),Z.metaData.ClientImeSupport=this.appConfig.featureEnablement.serverIME?"0":"1",Z.session=K,(0,C.isNil)(K)||(this.isResume=!0,this.gameSessionAnalyticsService.setResumeType(this.resumeType)),(0,C.isNil)(this.streamingSpan)||(Z.spanData=this.distributedTracingUtilService.inject(V.FORMAT_TEXT_MAP,this.streamingSpan));const W=(0,n._T)(Z,["partnerCustomData"]);return this.logger.info("start",W),this.sessionStartAttempts+=1,this.gfnStart(Z).pipe((0,s.b)(te=>{this.waitForStop=te,this.startRequestsSub.next()}))}setAuthInfo(K=!1){return this.gfnSdkService.getAuthInfo().pipe((0,T.zg)(L=>L.authType===B.Gr.JWT?(0,c.of)({tokenType:F.qql.NVB_AUTH_JWT,token:L.authToken}):this.idmService.getAuthToken(K,this.streamingSpan).pipe((0,a.U)(W=>({tokenType:F.qql.NVB_AUTH_JWT_GFN,token:W.token})))),(0,T.zg)(L=>this.bridgeService.executeCommand(D.Gh.Gfn.Streaming.SetAuthInfo,L)))}startSessionsPollingSpan(K){return this.distributedTracingUtilService.startSpan(K,this.gameSessionDistributedTracingService.getCurrentActiveSpan())}getSessionState(K){if(K){this.logger.info("Recovering active session from session result Info.");const Z=K.sessions?K.sessions:[],L=this.getResumableState(K.result,Z);return this.logger.info("resumable state",K,L),(0,c.of)({resultInfo:K.result,sessions:Z,resumableState:L})}{this.logger.info("pollActiveSessions");const Z=this.startSessionsPollingSpan(b.j1.GetActiveSessions);return this.getActiveSessions(Z).pipe((0,T.zg)(L=>this.activeSessionsEvent$),(0,a.U)(L=>{const W=this.getResumableState(L.result,L.sessions);return this.logger.info("resumable state",L,W),{resultInfo:L.result,sessions:L.sessions,resumableState:W}}),(0,w.P)(),(0,s.b)(()=>this.distributedTracingUtilService.closeSpan(Z)))}}setupSession(K){if(this.logger.info("setupSession",K),(0,C.isNil)(K))throw new Error("Invalid session state");const Z=(0,C.get)(K,"resultInfo.result"),L={error:!this.isSuccess(Z),result:Z};if(L.error)return this.logger.error("unexpected result code in sessions",L.result),(0,c.of)(L);const W=K.sessions;let te=W.length;const ie=[];for(const k of W)k.appId===this.streamingParams.appId?k.status!==O.a1.NVB_SESSION_INITIALIZING?(this.logger.info("resuming session",k.sessionId),te--,L.sessionId=k.sessionId,L.appLaunchMode=k.appLaunchMode):(this.logger.info("found session in initializing state, stopping it"),ie.push(k.sessionId)):ie.push(k.sessionId);this.logger.info("stopEventsToWaitFor",te,L.sessionId);let Q=(0,c.of)(L);if(te>0){const k=(0,E.D)(ie).pipe((0,s.b)(oe=>this.logger.info("Stopping session ",oe)),(0,T.zg)(oe=>this.stopStreamingInternal(oe)),(0,t.K)(oe=>(this.logger.error("Caught error while stopping stream ",oe),(0,c.of)(null))));Q=this.stopEvent$.pipe((0,u.j)(te),(0,l.h)(L)),k.subscribe(oe=>this.logger.info("Stopped session: ",oe),oe=>{this.logger.error("Failed to stop session: ",oe),this.gameSessionAnalyticsService.handleGameLaunchFailure({status:F.N3X.HTTPError,errorDetails:oe&&oe.status?oe.status.toString():""})},()=>this.logger.info("Finished stopping all sessions"))}return Q}sessionCleanup(K){return this.getSessionState(K).pipe((0,T.zg)(Z=>this.setupSession(Z)))}isSuccess(K){return K===O.dq.NVB_R_SUCCESS||K===O.dq.NVB_R_UPGRADE_RECOMMENDED||K===O.dq.NVB_R_NO_ACTIVE_SESSION_FOUND||K===O.dq.NVB_R_SESSION_LIMIT_REACHED}getResumableState(K,Z){if(K.result===O.dq.NVB_R_AUTH_ERR_TOKEN_NOT_UPDATED)return this.logger.info("getResumableState - token not updated"),O.pi.NO_AUTH_TOKEN;if(!this.isSuccess(K.result))return this.logger.info("getResumableState - failure",K.result),O.pi.NOT_RESUMABLE;for(const L of Z)if(L.appId===this.streamingParams.appId&&this.isResumableSessionState(L))return this.logger.info("getResumableState - found resumable state"),O.pi.RESUMABLE;return this.logger.info("getResumableState - no resumable sessions found"),O.pi.NOT_RESUMABLE}isResumableSessionState(K){return K.status===O.a1.NVB_SESSION_READY_FOR_CONNECT||K.status===O.a1.NVB_SESSION_PAUSED_INTENTIONAL||K.status===O.a1.NVB_SESSION_PAUSED_UNINTENTIONAL||K.status===O.a1.NVB_SESSION_STREAMING}stopStreamingInternal(K,Z){return this.logger.info("calling stopstreaming internal"),this.setAuthInfo().pipe((0,T.zg)(()=>this.bridgeService.executeCommand(D.Gh.Gfn.Streaming.Stop,{session:K,reasonCode:Z})))}pauseStreamingInternal(K){return this.bridgeService.executeCommand(D.Gh.Gfn.Streaming.PauseStreaming,{reasonCode:K})}gfnResume(K){return this.setAuthInfo().pipe((0,T.zg)(()=>this.bridgeService.executeCommand(D.Gh.Gfn.Streaming.Resume,{networkSessionId:K})))}sendResumeFailureTelemetryData(K){this.gameSessionAnalyticsService.handleGameLaunchFailure({isResume:!0,status:K.status,errorDetails:K.errorDetails})}resetStreamingServiceFlags(){this.isVideoReceived=!1,this._hasFirstFrameBeenReceived=!1,this.isStreaming=!1,this.resumableSession=!1,this.waitForStop=!1,this.shuttingDownFromSleep=!1,this.sharedStreamingProperties={sessionId:null,subSessionId:null},this.isResume=!1,this.autoResuming=!1,this.sessionStartAttempts=0,this.isAutoResumedSession=!1,this.prevTerminatedInfo=null,this.hasSessionTimedOut=!1,this.isAuthTokenRefreshedOnce=!1}stopStreaming(K=!1,Z){var L,W;if(null===(L=this.clipboardAvailableSub)||void 0===L||L.unsubscribe(),null===(W=this.clipboardInitSub)||void 0===W||W.unsubscribe(),K&&(this.logger.info("System is sleeping, shutting down stream."),this.shuttingDownFromSleep=!0),this.logger.info("stop streaming called, waitForStop:",this.waitForStop," isStreaming:",this.isStreaming),!this.waitForStop&&!this.isStreaming&&!this.isSessionResumable())return this.clearSessionId(!0),(0,c.of)(!0);let te=this.streamingEvent$.pipe((0,r.h)(ie=>ie.event===O.V4.STREAMING_TERMINATED||ie.event===O.V4.STOP_RESULT));return this.networkStatus.isOnline||(this.logger.info("Stop Streaming when user is offline"),te=(0,c.of)({event:O.V4.STREAMING_TERMINATED})),(0,P.$R)(this.stopStreamingInternal(this.sharedStreamingProperties.sessionId,Z),te).pipe((0,w.P)(),(0,a.U)(ie=>ie[0]),(0,t.K)(ie=>(this.logger.error("Caught error while stopping the streaming",ie),(0,c.of)(!1))))}pauseStreaming(K){return this.logger.info("pause streaming called, isStreaming:",this.isStreaming),this.pauseStreamingInternal(K)}startStreaming(K){this.streamingParams=K;let Z=O.C3.NVB_PROFILE_GAMING_1080P_60FPS;(this.windowService.window.screen.height<1080||this.windowService.window.screen.width<1920)&&(Z=O.C3.NVB_PROFILE_GAMING_720P_60FPS);const L=(0,C.pick)(K,["address","serverType","port","deviceId","advancedLatencyOptimization","directInput","streamingProfile","appName","locale"]),W=[{headerName:"NV-Client-Version",headerValue:this.appConfig.build.version},{headerName:"NV-Client-ID",headerValue:this.appConfig.lcars.clientId}],te=Object.assign(Object.assign({},L),{profile:Z,cmsId:K.appId.toString(),shortName:K.gameShortName,clientAppVersion:this.appConfig.build.version,clientHeaders:W});return this.hasSessionTimedOut&&(this.hasSessionTimedOut=!1,this.cancelTimerSubject.next(!0)),this.logger.info("prepare params",te),this.sessionStartAttempts=0,this.gfnPrepare(te).pipe((0,T.zg)(ie=>this.setAuthInfo()),(0,T.zg)(ie=>this.processPartnerData()),(0,T.zg)(ie=>this.updateKeyboardLayout()),(0,T.zg)(ie=>this.start()))}processPartnerData(){let K=!1;const Z=this.deeplinkHelperService.getDeeplinkPartnerData();return Z&&(this.logger.info("Found partner-data in play-game deeplink"),this.streamingParams.metaData.partnerData=Z,K=!0),this.gfnSdkService.isThisAGFNSDKSession()?(0,g.aj)([this.gfnSdkService.getPartnerData(),this.gfnSdkService.getPartnerSecureData()]).pipe((0,a.U)(([L,W])=>(L&&L.length>0?(this.streamingParams.metaData.partnerData=L,this.logger.info("partnerData passed from GFN SDK"),K=!0):this.logger.info("No partnerData passed from GFN SDK"),W&&W.length>0?(this.streamingParams.partnerCustomData=W,this.logger.info("partnerSecureData passed from GFN SDK"),K=!0):this.logger.info("No partnerSecureData passed from GFN SDK"),K))):(K||this.logger.info("No partnerData and partnerSecureData present"),(0,c.of)(K))}isSessionResumable(){return this.resumableSession}isResumed(){return this.isResume}terminateAutoResume(){this.terminatingAutoResume$.next()}resume(){return this.logger.info("resuming...."),(0,g.aj)([this.getSessionState(),this.networkConfigurationService.networkSessionId$.pipe((0,p.q)(1))]).pipe((0,T.zg)(([K,Z])=>{if(this.resumableSession=K.resumableState===O.pi.RESUMABLE,this.resumableSession)return this.logger.info("resumable session found"),this.isAutoResumedSession=!1,this.isResume=!0,this.gameSessionAnalyticsService.setResumeType(this.resumeType),this.gfnResume(Z).pipe((0,s.b)(L=>{this.waitForStop=L,this.startRequestsSub.next()}));{this.logger.error("no resumable sessions found");const L=new _;return this.sendResumeFailureTelemetryData({status:F.N3X.ClientError,errorDetails:L.result.toString()}),(0,v._)(L)}}))}}return X.\u0275fac=function(K){return new(K||X)(S.LFG(i.ed),S.LFG(i.dF),S.LFG(i.un),S.LFG(Y.OA),S.LFG(se.h),S.LFG(fe.r),S.LFG(F.No2),S.LFG(B.s),S.LFG(F.VKt),S.LFG(F.hHP),S.LFG(i._J),S.LFG(b.Dc),S.LFG(F.XS0),S.LFG(F.dgl),S.LFG($.G),S.LFG(ae.o),S.LFG(F.FR5),S.LFG(me.m3),S.LFG(ye.HR),S.LFG(i._J),S.LFG(F.GKb),S.LFG(i.Ob),S.LFG(F.gIP),S.LFG(F.YvH))},X.\u0275prov=S.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})()},39207:(He,de,e)=>{"use strict";e.r(de),e.d(de,{BrowserModule:()=>V});var n=e(54364),i=e(71258),D=e(66660),m=e(51),y=e(6484),T=e(25816),r=e(79441),a=e(22663),s=e(85816),p=e(2984),l=e(94377),t=e(2316),w=e(58283),h=e(30582),u=e(83733),o=e(1124),f=e(94371),c=e(42118),g=e(24298),I=e(52529);function G(b,B){1&b&&t._UZ(0,"mat-icon",5)}let x=(()=>{class b{constructor(){}}return b.\u0275fac=function(U){return new(U||b)},b.\u0275cmp=t.Xpm({type:b,selectors:[["nv-browser-item"]],inputs:{item:"item",activeItem:"activeItem",noChevron:"noChevron"},decls:6,vars:5,consts:[["matRipple","",1,"browser-item","hig-button-overlay"],["fxLayout","row","fxLayoutAlign","start center",1,"browser-card"],[1,"icon-normal",3,"svgIcon"],[1,"font-body2"],["svgIcon","chevron_right","class","icon-normal",4,"ngIf"],["svgIcon","chevron_right",1,"icon-normal"]],template:function(U,A){1&U&&(t.TgZ(0,"mat-card",0),t.TgZ(1,"mat-card-content",1),t._UZ(2,"mat-icon",2),t.TgZ(3,"span",3),t._uU(4),t.qZA(),t.YNc(5,G,1,0,"mat-icon",4),t.qZA(),t.qZA()),2&U&&(t.ekj("focus",A.activeItem===A.item),t.xp6(2),t.Q6J("svgIcon",A.item.icon),t.xp6(2),t.Oqu(A.item.name),t.xp6(1),t.Q6J("ngIf",!A.noChevron))},directives:[c.a8,g.wG,c.dn,h.xw,h.Wh,I.Hw,n.O5],styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.browser-item[_ngcontent-%COMP%]{width:448px;height:36px;padding:0;box-sizing:border-box;background-color:transparent;box-shadow:none;border-radius:0}.browser-card[_ngcontent-%COMP%]{width:100%;text-align:center;word-wrap:break-word;padding:6px 8px}.browser-card[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px}.browser-card[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:calc(100% - 16px - 24px - 24px);padding:0 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.isLtr[_nghost-%COMP%]   .browser-card[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .browser-card[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{text-align:left}html[dir=ltr][_ngcontent-%COMP%]   .browser-card[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{--dummy0: 0;text-align:left}.isRtl[_nghost-%COMP%]   .browser-card[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .browser-card[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{text-align:right}html[dir=rtl][_ngcontent-%COMP%]   .browser-card[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{--dummy0: 0;text-align:right}"]}),b})();var E=e(80181);function P(b,B){if(1&b){const U=t.EpF();t.TgZ(0,"nv-browser-item",8),t.NdJ("dblclick",function(){const Y=t.CHM(U).$implicit;return t.oxw(2).goDownOneLevel(Y)}),t.qZA()}if(2&b){const U=B.$implicit,A=t.oxw(2);t.Q6J("item",U)("activeItem",A.browserSelection)("noChevron","file"===U.icon)}}function v(b,B){if(1&b){const U=t.EpF();t.TgZ(0,"div",5),t.TgZ(1,"nv-virtual-grid-container",6),t.NdJ("selectedItemChange",function(S){return t.CHM(U),t.oxw().browserSelection=S})("selectedItemChange",function(S){return t.CHM(U),t.oxw().selectedItemChanged(S)})("keydown",function(S){return t.CHM(U),t.oxw().selectBrowserItem(S)}),t.YNc(2,P,1,3,"ng-template",null,7,t.W1O),t.qZA(),t.qZA()}if(2&b){const U=t.MAs(3),A=t.oxw();t.xp6(1),t.Q6J("useFocusOutline",!1)("items",A.dataItems)("selectedItem",A.browserSelection)("itemHeight",36)("topBottomPad",16)("marginBottom",0)("itemWidth",448)("marginRight",0)("template",U)}}function O(b,B){1&b&&t._UZ(0,"mat-spinner",11)}function C(b,B){if(1&b&&(t.TgZ(0,"div",9),t.YNc(1,O,1,0,"mat-spinner",10),t.qZA()),2&b){const U=t.oxw();t.xp6(1),t.Q6J("ngIf",U.waiting)}}const F=[{path:"",component:(()=>{class b{constructor(U,A,S,Y,se,fe,$,ae,me,ye){this.loggingService=U,this.route=A,this.navigationService=S,this.osService=Y,this.bridgeService=se,this.translateService=fe,this.dialog=$,this.appBarService=ae,this.galleryService=me,this.igoConfig=ye,this.destroy$=new r.xQ,this.includeFiles=!1,this.dataItems=[],this.preFetchedItems=[],this.enableNetworkDrives=!1,this.waiting=!1,this.error=!1,this.getFolderListing$=void 0,this.enumDrives=void 0,this.checkMarkVisible=!1,this.saveChangeDisabled=!0,this.logger=this.loggingService.getLogger("NvBrowser")}ngOnInit(){this.title=this.route.snapshot.paramMap.get("title"),this.startFolder=this.route.snapshot.paramMap.get("location"),this.source=this.route.snapshot.paramMap.get("source"),this.caller=this.route.snapshot.paramMap.get("caller"),this.includeFiles="true"===this.route.snapshot.paramMap.get("files"),this.setupReturn(this.caller),this.dirSeparator=this.osService.getDirSeparator(),this.windows=this.osService.getOSType()===y.eJ.Windows,this.systemName=this.translateService.instant(this.windows?"browser.ThisPC":"browser.ThisMac"),this.enableExternalDrives=JSON.parse(this.route.snapshot.paramMap.get("external")),"GFE"===this.igoConfig.branding&&(this.enableNetworkDrives=!0),("undefined"===this.startFolder||""===this.startFolder)&&(this.startFolder=this.galleryService.getVideoFolder()),this.initialFolder=this.startFolder;const U=this.initialFolder.length-1;U>0&&"\\"===this.initialFolder[U]&&(this.initialFolder=this.initialFolder.slice(0,-1)),this.logger.info("Source: ",this.source),this.logger.info("External drives are valid: ",this.enableExternalDrives),this.logger.info("Network drives are valid: ",this.enableNetworkDrives),this.logger.info("Display files also: ",this.includeFiles),this.appBarService.setAll({title:this.title,navButtonArrow:!0,icons:[{id:"closeIgo",icon:"close",tooltip:"tooltips.Close"}]}),this.appBarService.actionClicked$.pipe((0,a.R)(this.destroy$)).subscribe(S=>{"nav"===S?this.onBackClicked():"check"===S&&this.onUseLocClicked()}),this.navigationService.escapeEvent().pipe((0,a.R)(this.destroy$)).subscribe(()=>{this.onBackClicked()}),this.bridgeService.executeCommand(p.Gh.Common.Gallery.EnumerateDrives).subscribe(S=>{this.enumDrives=S,this.logger.info("Enumerated Drives: ",S),this.getFolderData(this.startFolder)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}clearData(){this.waiting=!0,this.preFetchedItems.length=0,this.dataItems=this.preFetchedItems.slice(),this.browserSelection=void 0}getFolderData(U){this.clearData(),this.getFolderListing$&&(this.getFolderListing$.unsubscribe(),this.getFolderListing$=void 0);const S=this.bridgeService.executeCommand(p.Gh.Common.Gallery.GetFolderListing,{directory:U,excludeDirectoryType:this.source===l.Sc.Temporary?p.Yk.Common.Gallery.ExcludeDirectoryType.hiddenAndEmpty:p.Yk.Common.Gallery.ExcludeDirectoryType.hidden}).pipe((0,a.R)(this.destroy$));this.getFolderListing$=S.subscribe(Y=>{setTimeout(()=>{this.preFetchedItems.length=0,Y.directories.forEach(se=>{this.shouldFolderBeExcluded(U,se)||this.preFetchedItems.push({name:se,icon:"folder"})}),this.includeFiles&&Y.files.forEach(se=>{this.shouldFileBeExcluded(se.name)||this.preFetchedItems.push({name:se.name,icon:"file"})}),this.dataItems=this.preFetchedItems.slice(),this.waiting=!1,this.error=!1},0)},Y=>{this.logger.info("GetFolderListing error: ",Y),this.waiting=!1,this.error=!0})}selectedItemChanged(U){this.browserSelection=U,this.controlCheckmark()}goDownOneLevel(U){const A=this.startFolder===this.systemName;if(0===this.startFolder.length||A)if(A&&!this.windows)this.startFolder=this.dirSeparator+U.name;else{this.startFolder="";const S=U.name.lastIndexOf(this.dirSeparator);this.startFolder=-1===S?U.name:U.name.substr(0,S)}else this.startFolder=this.startFolder+this.dirSeparator+U.name;this.browserSelection=void 0,this.controlCheckmark(),this.getFolderData(this.startFolder)}goUpOneLevel(){if(this.startFolder===this.systemName)return;if(this.isRootOfDrive(this.startFolder))return void(this.windows?(this.logger.info("At root of drive: ",this.startFolder),this.processDrives()):(this.startFolder=this.systemName,this.getFolderData("/")));const U=this.startFolder.lastIndexOf(this.dirSeparator);this.startFolder=this.startFolder.substr(0,U),this.browserSelection=void 0,this.controlCheckmark(),this.getFolderData(this.startFolder)}processUpButton(U){("Enter"===U.key||" "===U.key)&&this.goUpOneLevel()}controlCheckmark(){const U=this.saveChangeDisabled,A=this.buildFolder();this.saveChangeDisabled=A===this.initialFolder,U!==this.saveChangeDisabled&&(this.checkMarkVisible?(this.appBarService.deleteIcon("check"),this.checkMarkVisible=!1):(this.appBarService.addIcon({id:"check",icon:"check",tooltip:"tooltips.Done"}),this.checkMarkVisible=!0))}buildFolder(){let U="";return this.startFolder!==this.systemName&&(U=this.startFolder,this.browserSelection&&U[U.length-1]!==this.dirSeparator&&(U+=this.dirSeparator)),this.browserSelection&&(!this.windows&&this.startFolder===this.systemName&&(U+=this.dirSeparator),U+=this.browserSelection.name),U}onUseLocClicked(){const U=this.buildFolder();U!==this.initialFolder&&"broadcast"!==this.caller?this.dialog.openAlertDialog({title:"confirmation.confirmFileLocationTitle",query:"confirmation.confirmFileLocationChange",queryParam:{arg:U},action1:"confirmation.NotRightNow",action2:"confirmation.yes"}).pipe((0,a.R)(this.destroy$),(0,s.zg)(S=>S.afterClosed())).subscribe(S=>{S===l.DX.Action2?this.onUseClick(U):this.onBackClicked()}):this.onUseClick(U)}setupReturn(U){switch(U){case"storage":this.returnPath="../settings/storage";break;case"broadcast":this.returnPath="../settings/broadcast";break;default:this.logger.error("Missing return path! ",U)}this.logger.info("Return to: ",this.returnPath)}onUseClick(U){this.navigationService.navigate([this.returnPath,{folder:U,source:this.source}],{relativeTo:this.route.parent,skipLocationChange:!0},l.wB.settings)}onBackClicked(){this.logger.info("Back clicked"),this.navigationService.navigate([this.returnPath],{relativeTo:this.route.parent,skipLocationChange:!0},l.wB.settings)}selectBrowserItem(U){("Enter"===U.key||" "===U.key)&&this.browserSelection&&this.goDownOneLevel(this.browserSelection)}isRootOfDrive(U){return U.split(this.dirSeparator).length===(this.windows?1:2)}shouldFolderBeExcluded(U,A){if(A.startsWith("$"))return!0;const S=U===this.dirSeparator?U+A:U+this.dirSeparator+A;let Y=!1;return this.enumDrives.drives.forEach(se=>{se.name!==S||"fixed"===se.type||this.enableExternalDrives&&"external"===se.type||(Y=!0)}),Y}shouldFileBeExcluded(U){const A=U.toLowerCase(),S=A.lastIndexOf(".");return-1!==S&&"png"!==A.slice(S+1)}getDriveImage(U){switch(U){case"network":return"browser_diskdrive_network";case"removable":return"browser_disk_drive_removable";case"fixed":default:return"browser_diskdrive"}}processDrives(){this.preFetchedItems.length=0,this.enumDrives.drives.forEach(U=>{if("fixed"===U.type||this.enableExternalDrives&&"external"===U.type||this.enableNetworkDrives&&"network"===U.type){let S=U.name;const Y=U.name.length-1;U.name[Y]===this.dirSeparator&&(S=U.name.slice(0,Y)),this.preFetchedItems.push({name:S,icon:this.getDriveImage(U.type)})}this.startFolder=this.systemName,this.dataItems=this.preFetchedItems.slice(),this.browserSelection=this.dataItems[0]})}}return b.\u0275fac=function(U){return new(U||b)(t.Y36(y.ed),t.Y36(i.gz),t.Y36(l.f5),t.Y36(l.HY),t.Y36(y.dF),t.Y36(w.sK),t.Y36(l.Mb),t.Y36(l.ad),t.Y36(l.rj),t.Y36(l.gs))},b.\u0275cmp=t.Xpm({type:b,selectors:[["igo-browser"]],decls:6,vars:4,consts:[["fxLayout","column","fxFlex",""],[1,"location-pad"],["caller","browser",3,"pathLocation","openFunction","clicked","keydown"],["fxFlex","grow",4,"ngIf"],["fxLayoutAlign","center center","fxFlex","grow",4,"ngIf"],["fxFlex","grow"],["tabIndex","0","fxFlex","","fxLayout","row",1,"nv-item-row",3,"useFocusOutline","items","selectedItem","itemHeight","topBottomPad","marginBottom","itemWidth","marginRight","template","selectedItemChange","keydown"],["browserTemplate",""],[3,"item","activeItem","noChevron","dblclick"],["fxLayoutAlign","center center","fxFlex","grow"],["diameter","40","color","accent",4,"ngIf"],["diameter","40","color","accent"]],template:function(U,A){1&U&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"nv-folder-browser",2),t.NdJ("clicked",function(){return A.goUpOneLevel()})("keydown",function(Y){return A.processUpButton(Y)}),t.qZA(),t.qZA(),t._UZ(3,"mat-divider"),t.YNc(4,v,4,9,"div",3),t.YNc(5,C,2,1,"div",4),t.qZA()),2&U&&(t.xp6(2),t.Q6J("pathLocation",A.startFolder)("openFunction",!1),t.xp6(2),t.Q6J("ngIf",!A.waiting&&!A.error),t.xp6(1),t.Q6J("ngIf",A.waiting||A.error))},directives:[h.xw,h.yH,u.t,o.d,n.O5,f.e,x,h.Wh,E.$g],styles:[".nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-error[_ngcontent-%COMP%]{color:#e02828}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}.location-pad[_ngcontent-%COMP%]{padding:16px 24px}"]}),b})(),data:{level:9}}];let V=(()=>{class b{}return b.\u0275fac=function(U){return new(U||b)},b.\u0275mod=t.oAB({type:b}),b.\u0275inj=t.cJS({imports:[[n.ez,T.m,D.o9,m.Q,i.Bz.forChild(F),(0,y.zv)()]]}),b})()},85013:(He,de,e)=>{"use strict";e.d(de,{DX:()=>b,Qr:()=>B});var n=e(22213),i=e(2316),D=e(6484),m=e(772),y=e(54364),T=e(30582),r=e(89460),a=e(80181),s=e(74058),p=e(84622),l=e(1707),t=e(365),w=e(70781),h=e(58283);function u(U,A){if(1&U&&i._UZ(0,"mat-progress-spinner",11),2&U){const S=i.oxw(2);i.Q6J("diameter",48)("mode",S.data.progressMode)("value",S.value)}}const o=function(U){return{spinnerContent:U}};function f(U,A){if(1&U&&(i.TgZ(0,"div",8),i.YNc(1,u,1,3,"mat-progress-spinner",9),i._UZ(2,"span",10),i.ALo(3,"translate"),i.qZA()),2&U){const S=i.oxw();i.Q6J("ngClass",i.VKq(6,o,S.data.spinner)),i.xp6(1),i.Q6J("ngIf",S.data.spinner),i.xp6(1),i.Q6J("innerHtml",i.xi3(3,3,S.data.query,S.data.queryParam),i.oJD)}}function c(U,A){if(1&U){const S=i.EpF();i.TgZ(0,"div",19),i.TgZ(1,"mat-checkbox",20),i.NdJ("ngModelChange",function(se){return i.CHM(S),i.oxw().$implicit.state=se})("change",function(){i.CHM(S);const se=i.oxw().index;return i.oxw(2).onStateChanged(se)}),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.qZA()}if(2&U){const S=i.oxw().$implicit;i.xp6(1),i.Q6J("ngModel",S.state),i.xp6(1),i.Oqu(i.lcZ(3,2,S.label))}}function g(U,A){if(1&U&&(i.TgZ(0,"div"),i.YNc(1,c,4,4,"div",18),i.qZA()),2&U){const S=A.$implicit;i.xp6(1),i.Q6J("ngIf",S.label)}}function I(U,A){if(1&U){const S=i.EpF();i.TgZ(0,"div",12),i._UZ(1,"span",10),i.ALo(2,"translate"),i.TgZ(3,"div"),i.TgZ(4,"div",13),i.TgZ(5,"mat-checkbox",14),i.NdJ("ngModelChange",function(se){return i.CHM(S),i.oxw().masterState=se})("change",function(){return i.CHM(S),i.oxw().onStateChanged()}),i._uU(6),i.ALo(7,"translate"),i.qZA(),i.qZA(),i.TgZ(8,"div",15),i.YNc(9,g,2,1,"div",16),i.qZA(),i.qZA(),i._UZ(10,"span",17),i.ALo(11,"translate"),i.qZA()}if(2&U){const S=i.oxw();i.xp6(1),i.Q6J("innerHtml",i.xi3(2,6,S.data.query,S.data.queryParam),i.oJD),i.xp6(4),i.Q6J("ngModel",S.masterState)("indeterminate",S.checkIndeterminate()),i.xp6(1),i.Oqu(i.lcZ(7,9,S.data.state)),i.xp6(3),i.Q6J("ngForOf",S.data.subActions),i.xp6(1),i.Q6J("innerHtml",i.lcZ(11,11,S.data.hint),i.oJD)}}function G(U,A){if(1&U&&i._UZ(0,"mat-progress-bar",24),2&U){const S=i.oxw(2);i.Q6J("mode",S.data.progressMode)("value",S.value)}}function x(U,A){if(1&U&&(i.TgZ(0,"div",25),i._uU(1),i.qZA()),2&U){const S=i.oxw(2);i.xp6(1),i.hij("",S.value,"%")}}const E=function(){return{progressBarContent:!0}};function P(U,A){if(1&U&&(i.TgZ(0,"div",21),i._UZ(1,"span",10),i.ALo(2,"translate"),i.YNc(3,G,1,2,"mat-progress-bar",22),i.YNc(4,x,2,1,"div",23),i.qZA()),2&U){const S=i.oxw();i.Q6J("ngClass",i.DdM(7,E)),i.xp6(1),i.Q6J("innerHtml",i.xi3(2,4,S.data.query,S.data.queryParam),i.oJD),i.xp6(2),i.Q6J("ngIf",S.data.progressBar),i.xp6(1),i.Q6J("ngIf",S.data.progressPercentage)}}const v=function(U){return{background:U}};function O(U,A){if(1&U&&(i.TgZ(0,"button",26),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&U){const S=i.oxw();i.Q6J("mat-dialog-close",S.getRetValue1())("ngStyle",i.VKq(5,v,S.data.action1Color)),i.xp6(1),i.hij(" ",i.lcZ(2,3,S.data.action1)," ")}}function C(U,A){if(1&U&&(i.TgZ(0,"button",27),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&U){const S=i.oxw();i.Q6J("mat-dialog-close",S.retVals.Action2),i.xp6(1),i.hij(" ",i.lcZ(2,2,S.data.action2)," ")}}function _(U,A){if(1&U&&(i.TgZ(0,"button",27),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&U){const S=i.oxw();i.Q6J("mat-dialog-close",S.retVals.Action3),i.xp6(1),i.hij(" ",i.lcZ(2,2,S.data.action3)," ")}}var b=(()=>{return(U=b||(b={})).Action1="action1",U.Action2="action2",U.Action3="action3",U.Action4="",b;var U})();let B=(()=>{class U{constructor(S,Y){this.data=S,this.localeSerive=Y,this.masterState=!0,this.retVals=b,this.direction="ltr",this.value=0,S.spinner&&(S.progressBar=!1),void 0===S.progressMode&&(S.progressMode="indeterminate"),this.direction=this.localeSerive.isRTLLayoutEnabled?"rtl":"ltr"}set dialogData(S){this.data=S}get dialogData(){return this.data}onStateChanged(S){if(void 0===S)this.data.subActions.forEach(Y=>{Y.state=this.masterState});else{let Y=!0;this.data.subActions.forEach(se=>{se.state&&(Y=!1)}),this.masterState=!Y}}getRetValue1(){return this.masterState?this.retVals.Action1:this.retVals.Action4}checkIndeterminate(){if(0===this.data.subActions.length)return!1;let S=!1;return this.data.subActions.forEach(Y=>{Y.state!==this.masterState&&(S=!0)}),S}}return U.\u0275fac=function(S){return new(S||U)(i.Y36(n.WI),i.Y36(D.OL))},U.\u0275cmp=i.Xpm({type:U,selectors:[["nv-hig-alert-dialog"]],inputs:{value:"value",dialogData:"dialogData"},decls:11,vars:11,consts:[[3,"dir"],["mat-dialog-title","",1,"font-header6"],["mat-dialog-content","","class","font-body2","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","14px",3,"ngClass",4,"ngIf"],["mat-dialog-content","","class","font-body2","fxLayout","column","fxLayoutAlign","start left","fxLayoutGap","16px",4,"ngIf"],["mat-dialog-content","","class","font-body2","fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","8px",3,"ngClass",4,"ngIf"],["mat-dialog-actions","",3,"align"],["mat-button","","class","font-button2 hig-button",3,"mat-dialog-close","ngStyle",4,"ngIf"],["mat-button","","class","font-button2 hig-button",3,"mat-dialog-close",4,"ngIf"],["mat-dialog-content","","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","14px",1,"font-body2",3,"ngClass"],["color","accent","fxFlex","none",3,"diameter","mode","value",4,"ngIf"],[3,"innerHtml"],["color","accent","fxFlex","none",3,"diameter","mode","value"],["mat-dialog-content","","fxLayout","column","fxLayoutAlign","start left","fxLayoutGap","16px",1,"font-body2"],[1,"checkbox"],[1,"font-body2",3,"ngModel","indeterminate","ngModelChange","change"],[1,"subcheckboxsize"],[4,"ngFor","ngForOf"],[1,"hinttext",3,"innerHtml"],["class","subcheckbox",4,"ngIf"],[1,"subcheckbox"],[1,"font-body2",3,"ngModel","ngModelChange","change"],["mat-dialog-content","","fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","8px",1,"font-body2",3,"ngClass"],["class","mat-accent",3,"mode","value",4,"ngIf"],["fxLayoutAlign","start start",4,"ngIf"],[1,"mat-accent",3,"mode","value"],["fxLayoutAlign","start start"],["mat-button","",1,"font-button2","hig-button",3,"mat-dialog-close","ngStyle"],["mat-button","",1,"font-button2","hig-button",3,"mat-dialog-close"]],template:function(S,Y){1&S&&(i.TgZ(0,"div",0),i.TgZ(1,"span",1),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.YNc(4,f,4,8,"div",2),i.YNc(5,I,12,13,"div",3),i.YNc(6,P,5,8,"div",4),i.TgZ(7,"div",5),i.YNc(8,O,3,7,"button",6),i.YNc(9,C,3,4,"button",7),i.YNc(10,_,3,4,"button",7),i.qZA(),i.qZA()),2&S&&(i.s9C("dir",Y.direction),i.xp6(2),i.Oqu(i.lcZ(3,9,Y.data.title)),i.xp6(2),i.Q6J("ngIf",void 0===Y.data.progressBar&&void 0===Y.data.hint||Y.data.spinner),i.xp6(1),i.Q6J("ngIf",Y.data.hint),i.xp6(1),i.Q6J("ngIf",Y.data.progressBar),i.xp6(1),i.Q6J("align","end"),i.xp6(1),i.Q6J("ngIf",Y.data.action1),i.xp6(1),i.Q6J("ngIf",Y.data.action2),i.xp6(1),i.Q6J("ngIf",Y.data.action3))},directives:[m.Lv,n.uh,y.O5,n.H8,n.xY,T.xw,T.Wh,T.SQ,y.mk,r.oO,a.Ou,T.yH,s.oG,p.xZ,l.JJ,l.On,y.sg,t.pW,w.lW,n.ZT,y.PC,r.Zl],pipes:[h.X$],styles:[".spinnerContent[_ngcontent-%COMP%]{overflow:hidden!important}.progressBarContent[_ngcontent-%COMP%]{padding-top:16px}.checkbox[_ngcontent-%COMP%]{margin-bottom:0!important}.subcheckboxsize[_ngcontent-%COMP%]{max-height:240px;overflow-y:auto}.isLtr[_nghost-%COMP%]   .subcheckbox[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .subcheckbox[_ngcontent-%COMP%]{padding-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .subcheckbox[_ngcontent-%COMP%]{--dummy1: 0;padding-left:16px}.isRtl[_nghost-%COMP%]   .subcheckbox[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .subcheckbox[_ngcontent-%COMP%]{padding-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .subcheckbox[_ngcontent-%COMP%]{--dummy1: 0;padding-right:16px}.hinttext[_ngcontent-%COMP%]{padding-bottom:28px}"]}),U})()},14873:(He,de,e)=>{"use strict";e.d(de,{I:()=>r});var n=e(54364),i=e(66660),D=e(51),m=e(6484),y=e(2316);let r=(()=>{class a{constructor(p){if(p)throw new Error("CoreModule already loaded; Import in root module only.")}}return a.\u0275fac=function(p){return new(p||a)(y.LFG(a,12))},a.\u0275mod=y.oAB({type:a}),a.\u0275inj=y.cJS({imports:[[n.ez,i.o9,D.Q,(0,m.zv)()]]}),a})()},94377:(He,de,e)=>{"use strict";e.d(de,{NX:()=>S.NX,WU:()=>S.WU,ad:()=>s,Oh:()=>St,QM:()=>v,SD:()=>At.S,uP:()=>Ze,uv:()=>dn,Mb:()=>Z,lm:()=>xt.l,AN:()=>S.AN,wn:()=>Fn,k6:()=>Zt,R5:()=>S.R5,Sc:()=>U.Sc,rj:()=>Me,A2:()=>U.A2,kq:()=>le,In:()=>ae.In,DX:()=>se.DX,ZB:()=>U.ZB,sW:()=>o.sW,z9:()=>o.z9,y1:()=>o.y1,qp:()=>G.q,gs:()=>f.g,Qy:()=>Te,YQ:()=>Ge,i8:()=>ln,WD:()=>Ct,rQ:()=>Ye,pJ:()=>S.pJ,f5:()=>bt.f,SX:()=>ae.SX,DU:()=>Ee,En:()=>Ln,pL:()=>gn,HY:()=>c,FC:()=>S.FC,vU:()=>y.v,_R:()=>A._R,nG:()=>A.nG,ZJ:()=>A.ZJ,Kw:()=>g.Kw,Fr:()=>g.Fr,Ec:()=>g.Ec,BH:()=>g.BH,lB:()=>S.pg,T7:()=>q,CN:()=>Pn,b5:()=>te,Vu:()=>nt,dS:()=>Ie,G0:()=>ft,$u:()=>dt,wB:()=>S.wB,_6:()=>De._6,_C:()=>g._C,Tj:()=>De.Tj,Po:()=>S.Po,l:()=>ye.l,Sp:()=>gt,IO:()=>jt,aM:()=>kt,cz:()=>ze}),e(14873);var i=e(79441),D=e(76491),m=e(2316),y=e(13595);let s=(()=>{class qe{constructor(M){this.oscDisplayService=M,this.actionClicked=new i.xQ,this.iconsChanged=new D.X([]),this.titleChanged=new D.X({title:"",params:{}}),this.navButtonChanged=new D.X(""),this.activeChanged=new D.X(!1),this.iconList=[],this.actionClicked$=this.actionClicked.asObservable(),this.icons$=this.iconsChanged.asObservable(),this.title$=this.titleChanged.asObservable(),this.navButton$=this.navButtonChanged.asObservable(),this.active$=this.activeChanged.asObservable()}reset(){this.titleChanged.next({title:"",params:{}}),this.iconsChanged.next([]),this.navButtonChanged.next(""),this.activeChanged.next(!1)}setTitle(M,re={}){this.titleChanged.next({title:M,params:re})}setNavButton(M){this.navButtonChanged.next(M)}setNavButtonArrow(){this.setNavButton("arrow_left")}setNavButtonClose(){this.setNavButton("close")}setActive(M){this.activeChanged.next(M)}addIcon(M){this.iconList.push(M),this.iconsChanged.next(this.iconList)}deleteIcon(M){const re=this.iconList.findIndex(Ce=>Ce.id===M);-1!==re&&(this.iconList.splice(re,1),this.iconsChanged.next(this.iconList))}setIcons(M){this.iconList=M.slice(),this.iconsChanged.next(this.iconList)}setAll(M){this.reset(),this.setTitle(M.title,M.params),this.setActive(M.active),this.setIcons(M.icons),M.navButton&&""!==M.navButton?this.setNavButton(M.navButton):M.navButtonArrow?this.setNavButtonArrow():M.navButtonClose&&this.setNavButtonClose()}clearIcons(){this.iconList=[],this.iconsChanged.next(this.iconList)}getIcons(){return this.iconList}clickIcon(M){"closeIgo"===M&&this.closeIgo(),this.actionClicked.next(M)}clickBack(){this.clickIcon("nav")}closeIgo(){this.oscDisplayService.closeOSC()}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(y.v))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})();var p=e(33927),l=e(85816),t=e(18293),w=e(81134),h=e(6484),u=e(2984),o=e(77142),f=e(47062);let c=(()=>{class qe{constructor(M,re,Ce,ke,tt){this.igoConfig=re,this.systemInfoService=Ce,this.bridgeService=ke,this.hotKeyHelper=tt,this.logger=M.getLogger("OsService")}init(){return this.logger.info("Initialize"),"GFE"===this.igoConfig.branding?this.systemInfoService.getSystemInfo().pipe((0,p.U)(M=>(this.logger.info("Platform: ",M.Platform),this.isWindows=M.Platform===h.eJ.Windows,this.isOptimus=!1,!0)),(0,l.zg)(()=>this.systemInfoService.getGPUHardwareInfo()),(0,p.U)(M=>(this.logger.info("IsOptimus: ",M.IsOptimus),this.isOptimus="0"!==M.IsOptimus,!0)),(0,t.K)(()=>(0,w.of)(!0))):this.systemInfoService.getSystemInfo().pipe((0,p.U)(M=>(this.logger.info("Platform: ",M.Platform),this.isWindows=M.Platform===h.eJ.Windows,this.isOptimus=!1,this.networkInfo=M.Network,this.logger.info("NetworkInfo: ",this.networkInfo),!0)))}getDirSeparator(){return this.isWindows?"\\":"/"}getFileBaseSize(){return this.isWindows?1024:1e3}getQuitHotkey(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetHotkeyShortcut,{hotkey:o.sW.QuitGame}).pipe((0,p.U)(M=>M.keys),(0,p.U)(M=>this.hotKeyHelper.shortcutToString(M)))}getOSType(){return this.isWindows?h.eJ.Windows:h.eJ.Mac}getIsOptimus(){return this.isOptimus}getNetworkInfo(){return this.networkInfo}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(h.ed),m.LFG(f.g),m.LFG(h.Ob),m.LFG(h.dF),m.LFG(h.d_))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})();var g=e(91213),G=(e(24338),e(20376)),x=e(41618),E=e(98636),P=(()=>{return(qe=P||(P={}))[qe.Empty=0]="Empty",qe[qe.Partial=1]="Partial",qe[qe.Full=2]="Full",P;var qe})();let v=(()=>{class qe{constructor(M,re,Ce){this.osService=re,this.bridgeService=Ce,this.videoPath="",this.directoryListOutdated=!0,this.directoryListUpdateCounts=!1,this.files=[],this.directoryList=[],this.directories=[],this.populatedFolder=[[],[],[],[],[]],this.folderData=[],this.fileData=[],this.mainCache=[],this.folderCache=[],this.cacheEntries=5,this.initialized=!1,this.ageCounter=0,this.dataIndex=0,this.freeInterval=3e5,this.minEntryAge=12e5,this.active=!1,this.logger=M.getLogger("CacheService")}resetCacheEntry(M){this.folderCache[M]={dirty:!0,crc:0,path:"",age:0,time:0,loaded:P.Empty}}init(){if(this.logger.info("Initialize"),this.dirSeparator=this.osService.getDirSeparator(),!this.initialized){this.directoryListOutdated=!0,this.mainCache[0]={dirty:!0,crc:0,path:""};for(let M=0;M<this.cacheEntries;M++)this.resetCacheEntry(M);this.cacheTimerOn(),this.initialized=!0,this.logger.info("Initialize complete")}}reInit(){this.cacheTimerOff(),this.initialized=!1,this.init()}galleryActive(M){this.active=M}cacheTimerOn(){this.cacheTimer||(this.cacheTimer=(0,x.F)(this.freeInterval).subscribe(()=>{if(this.logger.info("cacheTimer called"),this.active)return;let M=2147483647,re=-1;const ke=(new Date).getTime();for(let tt=0;tt<this.cacheEntries;tt++){const Ft=ke-this.folderCache[tt].time;0!==this.folderCache[tt].age&&this.folderCache[tt].age<M&&Ft>this.minEntryAge&&(re=tt,M=this.folderCache[tt].age)}0!==M&&-1!==re&&(this.logger.info("resetting cache entry: "+re+" age was: "+M),this.folderData[re].directories.length=0,this.folderData[re].files.length=0,this.folderCache[re].loaded===P.Full&&(this.fileData[re].popFolder.length=0),this.resetCacheEntry(re)),this.checkCacheState()}))}cacheTimerOff(){this.logger.info("cacheTimerOff called"),this.cacheTimer&&(this.cacheTimer.unsubscribe(),this.cacheTimer=void 0)}checkCacheState(){let M=!0;this.folderCache.forEach(re=>{re.loaded!==P.Empty&&(M=!1)}),M&&this.cacheTimerOff()}setRecordingPaths(M){this.videoPath=M,this.reInit()}getCurrentPopFolder(){return this.populatedFolder[this.dataIndex]}resetCurrentPopFolder(){this.populatedFolder[this.dataIndex].length=0}useCacheData(M,re){let Ce=!1;if(M!==this.videoPath){const ke=this.folderCache.findIndex($t=>$t.path===M);if(-1===ke)return!1;Ce=!this.folderCache[ke].dirty&&this.folderCache[ke].path===M;const tt=Ce&&this.folderCache[ke].loaded!==P.Empty,ut=Ce&&this.folderCache[ke].loaded===P.Full;this.dataIndex=ke;const zt=(new Date).getTime();return re?(tt&&(this.logger.info("useCacheData, updating partial!"),this.files=this.folderData[ke].files,this.directories=this.folderData[ke].directories,this.counts=this.folderData[ke].counts,this.logger.info("useCacheData, updating partial - DONE!!"),this.folderCache[ke].time=zt),tt):(ut&&(this.logger.info("useCacheData, updating full!"),this.populatedFolder[ke]=this.fileData[ke].popFolder,this.counts=this.folderData[ke].counts,this.logger.info("useCacheData, updating full - DONE!!"),this.folderCache[ke].time=zt),ut)}return Ce=!this.mainCache[0].dirty&&this.mainCache[0].path===M,Ce}setCacheNotDirty(M){if(M===this.videoPath)this.mainCache[0].dirty=!1;else{const re=this.folderCache.findIndex(Ce=>Ce.path===M);-1!==re&&(this.folderCache[re].dirty=!1)}}setCacheLoadedPartial(M){const re=this.folderCache.findIndex(Ce=>Ce.path===M);-1!==re&&(this.folderCache[re].loaded=P.Partial,this.folderData[re]={files:this.files,directories:this.directories,counts:this.counts})}setCacheLoaded(M){const re=this.folderCache.findIndex(Ce=>Ce.path===M);-1!==re&&(this.folderCache[re].loaded=P.Full,this.fileData[re]={popFolder:this.populatedFolder[re]})}setFileCounts(M,re){const Ce=this.folderCache.findIndex(ke=>ke.path===re);-1!==Ce?this.folderData[Ce].counts=M:this.logger.error("Could not find cache entry")}getVideoPathCRC(){return this.getGalleryFolderCRC(this.videoPath).pipe((0,p.U)(M=>{const re=this.mainCache[0].crc!==M.crc;return this.mainCache[0]={dirty:re,crc:M.crc,path:this.videoPath},re}),(0,t.K)(M=>(this.logger.info("getVideoPathCRC error: ",M),(0,w.of)(!0))))}getCachedDataCRC(M){void 0===M&&(this.logger.info("getCachedDataCRC: input undefined will use video path"),M=this.videoPath);let re=-1;if(M===this.videoPath)return this.getVideoPathCRC();if(re=this.folderCache.findIndex(Ce=>Ce.path===M),-1===re&&(re=this.folderCache.findIndex(Ce=>Ce.path===M)),-1===re){let Ce=2147483647;for(let ke=0;ke<this.cacheEntries;ke++)this.folderCache[ke].dirty&&this.folderCache[ke].age<Ce&&(re=ke,Ce=this.folderCache[ke].age)}if(-1===re){let Ce=2147483647;for(let ke=0;ke<this.cacheEntries;ke++)this.folderCache[ke].age<Ce&&(re=ke,Ce=this.folderCache[ke].age)}return re>=this.cacheEntries&&this.logger.error("folder cache has bad indexing!"),this.logger.info("Using index: "+re),this.getGalleryFolderCRC(M).pipe((0,l.zg)(Ce=>{const ke=this.folderCache[re].crc!==Ce.crc,ut=ke||this.folderCache[re].loaded===P.Empty;this.ageCounter++;const zt=(new Date).getTime();return this.folderCache[re]={dirty:ut,crc:Ce.crc,path:M,age:this.ageCounter,time:zt,loaded:ke?P.Empty:this.folderCache[re].loaded},this.cacheTimerOn(),(0,w.of)(!0)}),(0,t.K)(Ce=>(this.logger.info("getCachedDataCRC error: ",Ce),this.resetCacheEntry(re),(0,w.of)(!1))))}getGalleryFolderCRC(M){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetFolderCRC,{directory:M})}getDirectoryListCRC(){return this.getVideoPathCRC().pipe((0,E.b)(M=>{this.directoryListOutdated=M}))}getNewDirectoryList(){return this.directoryListOutdated?(this.directoryList.length=0,this.directoryListUpdateCounts=!0,this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetFolderListing,{directory:this.videoPath,shouldGetOnlyNv:!0,excludeDirectoryType:u.Yk.Common.Gallery.ExcludeDirectoryType.empty}).pipe((0,p.U)(re=>(this.setDirectoryList(re.directories),this.logger.info("New Directories: ",this.directoryList),this.directoryList)))):(this.logger.info("Current Directories: ",this.directoryList),this.directoryListUpdateCounts=!1,(0,w.of)(this.directoryList))}getDirectoryList(){return this.getDirectoryListCRC().pipe((0,l.zg)(()=>this.getNewDirectoryList()))}setDirectoryList(M){this.directoryList=M.slice(),this.directoryListOutdated=!1}updateDirectoryList(M){if(this.directoryList.length){let re=M.lastIndexOf(this.dirSeparator);const Ce=M.substr(0,re);re=Ce.lastIndexOf(this.dirSeparator)+1;const ke=Ce.substr(re);this.directoryList.find(tt=>tt===ke)||this.flushDirectoryList()}}flushDirectoryList(){this.directoryListOutdated=!0}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(h.ed),m.LFG(c),m.LFG(h.dF))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})();var O=e(90490),C=e(61786),_=e(61486),F=e(34361),V=e(20088),b=e(67202),B=e(27153),U=e(88106),A=e(48225),S=e(10125),Y=e(92941),se=e(85013),fe=e(12556),$=e(13335),ae=e(24181),me=e(58283),ye=e(78711),ue=e(9170),X=e(53466),j=e(22213),K=e(68456);let Z=(()=>{class qe{constructor(M,re,Ce){this.oscDisplayService=M,this.dialog=re,this.snackbar=Ce}openAlertDialog(M,re=!0){const Ce={panelClass:["nv-hig","nv-igo"],disableClose:re,autoFocus:!1,data:M};return this.oscDisplayService.getCanShowUI().pipe((0,ue.h)(ke=>ke),(0,X.q)(1),(0,l.zg)(()=>this.oscDisplayService.getCurrentOpenState()),(0,X.q)(1),(0,p.U)(ke=>{const tt="open"!==ke;tt&&this.oscDisplayService.openOSC("");const ut=this.dialog.open(se.Qr,Ce);return ut.afterClosed().subscribe(()=>{tt&&this.oscDisplayService.closeOSC()}),ut}))}openSnackBar(M,re="",Ce=5e3){return this.snackbar.open(M,re,{duration:Ce,horizontalPosition:"left",panelClass:["nv-hig","nv-igo"]})}closeSnackBar(){this.snackbar.dismiss()}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(y.v),m.LFG(j.uw),m.LFG(K.ux))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})();var L=e(79911);let te=(()=>{class qe{constructor(M,re,Ce,ke,tt,ut,Ft,zt,$t,fn,Jt){this.injector=M,this.bridgeService=Ce,this.translateService=ke,this.igoConfig=tt,this.oscNotificationService=ut,this.telemetry=Ft,this.dialogHelper=zt,this.endpointFactory=$t,this.hotkeyService=fn,this.gfnInfoService=Jt,this.disableRecordSpecialCase=ae.Kk.RECORD_SPECIAL_CASE_4K,this.appShortName="",this.scopes=[],this.highlightsActive=!1,this.overrideHighlightUI=!1,this.sdkHighlightSupported=!1,this.cachedShortName="",this.sdkInstance={appShortName:"",profileName:"",name:"",sdkVersion:""},this.highlightsActive$=new D.X(!1),this.gameSpecificHlData=[],this.subActions=[],this.logger=re.getLogger("SdkHighlightsService")}get streamerConfig(){return this.streamerConfigService.activeConfig}isHighlightsActive(){return this.highlightsActive$.asObservable()}overrideHighlightSettings(){return this.overrideHighlightUI}cachedAHLGameShortName(){return this.cachedShortName}init(){this.logger.info("Initialize"),this.gfnInfoService.getRecordSpecialCase().subscribe(M=>{this.logger.info("disableRecordSpecialCase mode: ",M),this.disableRecordSpecialCase=M}),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.RegisterSDKNotifications).subscribe(M=>this.highlightsEvent(M)),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetHighlightsActive).subscribe(M=>{M&&this.highlightsActive$.next(!this.disableRecordSpecialCase&&M.active)})}getPermissionsData(M){const re=[];re.push(this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetApplicationConfigs,{}).pipe((0,E.b)(Ce=>{if(this.gameSpecificHlData.length=0,Ce){const ke=Ce.apps.findIndex(tt=>tt.app.profileName===M);-1!==ke&&(this.gameSpecificHlData=Ce.apps[ke].highlights,this.gameSpecificHlData.forEach(tt=>tt.userEnabled=!0))}}))),re.push(this.hotkeyService.blockAllHotkeys(!0).pipe((0,E.b)(()=>{this.logger.info("Hotkeys disabled")}))),setTimeout(()=>{(0,O.$R)(...re).subscribe(()=>{this.askToSetPermissions(M)})},2e3)}askToSetPermissions(M){this.logger.info("permissions request");let re="GFE"===this.igoConfig.branding?"product.GFE":"product.GFN";re=this.translateService.instant(re),this.subActions.length=0,this.gameSpecificHlData.length>0&&this.gameSpecificHlData.forEach(ke=>{const tt=`highlightLabels.${ke.name}`;let ut=this.translateService.instant(tt);ut===tt&&(ut=ke.name),this.subActions.push({label:ut,state:ke.userEnabled})}),this.dialogHelper.openAlertDialog({title:re,query:"confirmation.HighlightsPermissions",queryParam:{arg:M},state:"confirmation.HighlightsMainCheckbox",hint:"confirmation.HighlightsHint",action1:"confirmation.LetsGo",action1Color:"#76b900",subActions:this.subActions}).pipe((0,l.zg)(ke=>ke.afterClosed())).subscribe(ke=>{ke===se.DX.Action1?this.allowHighlights():this.disallowHighlights(),this.hotkeyService.blockAllHotkeys(!1).subscribe()})}highlightsEvent(M){this.logger.info("Event: ",M),M?M.requestPermissions?this.eventRequestPermissions(M):M.createInstance?this.eventCreateInstance(M):M.destroyInstance?this.eventDestroyInstance(M):M.updatePermissions?(this.sdkInstance.appShortName=M.updatePermissions.app.appShortName,this.sdkInstance.profileName=M.updatePermissions.app.profileName,this.sdkInstance.name=M.updatePermissions.app.name):M.actionStatus?this.eventActionStatus(M):M.openGroup||M.closeGroup||(M.highlightSessionStatus?(this.highlightsActive=M.highlightSessionStatus.enable,this.highlightsActive$.next(M.highlightSessionStatus.enable)):M.manualRecordRunning?"GFE"===this.igoConfig.branding&&this.oscNotificationService.show(A.ZJ.ManualRecordRunning,M.manualRecordRunning.manualRecordGameName,M.manualRecordRunning.gameName):M.broadcastRunning?this.oscNotificationService.show(A.ZJ.BroadcastRunning,M.broadcastRunning.broadcastGameName,M.broadcastRunning.gameName):this.logger.info("Unknown or unhandled Event Type: ",M)):this.logger.info("Event: undefined or null")}eventRequestPermissions(M){this.appShortName=M.requestPermissions.app.appShortName,this.scopes=M.requestPermissions.scopes,this.getPermissionsData(M.requestPermissions.app.profileName)}eventCreateInstance(M){this.sdkInstance.appShortName=M.createInstance.app.appShortName,this.sdkInstance.profileName=M.createInstance.app.profileName,this.sdkInstance.name=M.createInstance.app.name,this.sdkInstance.sdkVersion=M.createInstance.sdkVersion}eventActionStatus(M){const re=M.actionStatus;"HighlightsSaveVideo"!==M.actionStatus.action&&"HighlightsSaveScreenshot"!==M.actionStatus.action||"NVGSDK_ERR_CAP_LIMIT_REACHED"!==M.actionStatus.status?"HighlightsSaveVideo"!==M.actionStatus.action&&"HighlightsSaveScreenshot"!==M.actionStatus.action||"NVGSDK_ERR_DISK_LIMIT_REACHED"!==M.actionStatus.status?"NVGSDK_SUCCESS"!==M.actionStatus.status&&(void 0===M.actionStatus.status&&(M.actionStatus.status="NVGSDK_ERR_NOT_SET"),this.logger.info("Event not handled: ",M)):(this.logger.info("Capture failed due to disk space limit"),this.oscNotificationService.show(A.ZJ.NoSpaceCaptureNotSaved,"commonLabels.Highlights")):(this.logger.info("Capture failed due to cap space limit"),this.oscNotificationService.show(A.ZJ.NoSpaceCaptureNotSaved,"commonLabels.Highlights")),this.telemetry.recordSDKCallResult(re.action,re.status,re.statusInternalCode,{shortName:re.app.appShortName},re.sdkVersion?re.sdkVersion:""),re.action===S.og.connect&&this.getStateOfCurrentGame(M.actionStatus.app).subscribe(Ce=>{Ce.permissionParams.permissions.length>0&&this.telemetry.sendHighlightsGameSetting({},Ce.state,Ce.state?S.pg.alreadyOn:S.pg.alreadyOff)})}eventDestroyInstance(M){this.sdkInstance.appShortName="",this.sdkInstance.profileName="",this.sdkInstance.name="",this.sdkInstance.sdkVersion=""}fillPermissions(M){const re={app:{},permissions:[]};return re.app.appShortName=this.appShortName,this.scopes.forEach((Ce,ke)=>{re.permissions[ke]={scope:Ce,permission:M}}),re}setPermissions(M){const re=this.fillPermissions(M);return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SetSDKPermissions,re).pipe((0,p.U)(Ce=>(this.logger.info("SetSDKPermissions "+(M===u.Yk.Share.Shareserver.SdkPermissions.granted?"granted":"denied")+" for: ",this.appShortName),this.gameSpecificHlData.length>0&&this.updateHighlightsSettings(),!0)),(0,t.K)(Ce=>(this.logger.info("SetSDKPermissions failed: ",Ce),(0,w.of)(!1))))}updateHighlightsSettings(){const re={app:{appShortName:this.sdkInstance.appShortName,profileName:this.sdkInstance.profileName,name:this.sdkInstance.name},highlightDefinitions:this.gameSpecificHlData};re.highlightDefinitions.forEach(Ce=>{const ke=`highlightLabels.${Ce.name}`;let tt=this.translateService.instant(ke);tt===ke&&(tt=Ce.name),Ce.userEnabled=this.subActions.find(ut=>ut.label===tt).state}),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SetHighlightsConfig,re).subscribe(()=>{})}allowHighlights(){this.setPermissions(u.Yk.Share.Shareserver.SdkPermissions.granted).subscribe(),this.telemetry.sendHighlightsGameSetting({shortName:this.sdkInstance.appShortName},!0,S.pg.initial)}disallowHighlights(){this.setPermissions(u.Yk.Share.Shareserver.SdkPermissions.denied).subscribe(),this.telemetry.sendHighlightsGameSetting({shortName:this.sdkInstance.appShortName},!1,S.pg.initial)}getStateOfCurrentGame(M){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetSDKPermissions,{app:M}).pipe((0,p.U)(ke=>{let tt=!1;for(let Ft=0;Ft<ke.permissions.length;Ft++)tt=ke.permissions[Ft].permission===u.Yk.Share.Shareserver.SdkPermissions.granted||tt,this.logger.info(ke.permissions[Ft].scope+" permissions for: "+M.profileName+" are: "+ke.permissions[Ft].permission);return{permissionParams:{app:M,permissions:ke.permissions},state:tt}}))}setStateOfCurrentGame(M){for(let Ce=0;Ce<M.permissionParams.permissions.length;Ce++)M.permissionParams.permissions[Ce].permission=M.state?u.Yk.Share.Shareserver.SdkPermissions.granted:u.Yk.Share.Shareserver.SdkPermissions.denied;return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SetSDKPermissions,M.permissionParams).pipe((0,p.U)(()=>{this.logger.info("Permissions for: "+M.permissionParams.app.profileName+" changed to: "+M.permissionParams.permissions[0].permission)}))}IsSDKHighlightSupportedGame(M){return this.lcarsService.getMetadataByCmsId(M).pipe((0,p.U)(re=>{var Ce,ke;if(re){if(this.logger.info("isHighlightsSupported: ",null===(Ce=re.nvidiaTech)||void 0===Ce?void 0:Ce.HIGHLIGHTS),null===(ke=re.nvidiaTech)||void 0===ke?void 0:ke.HIGHLIGHTS)return this.sdkHighlightSupported=!0,void(this.overrideHighlightUI=!1);this.sdkHighlightSupported=!1}else this.logger.info("isHighlightsSupported value not found for the game")})).subscribe(Y.Z,re=>{this.sdkHighlightSupported=!1,this.overrideHighlightUI=!1,this.logger.error("Unable to obtain game meta data.",re)})}createEndpoint(){return this.endpointFactory.createEndpoint({config:{timeout:1e4,timeBetweenRetries:3e4,maxRetries:2}})}toggleAutohighlight(M){!0===this.igoConfig.GFNCefClient&&(this.streamerConfigService=this.injector.get($.o),this.lcarsService=this.injector.get(fe.zcQ),this.IsSDKHighlightSupportedGame(this.streamerConfig.cmsId),this.enableAutohighlight(M))}enableAutohighlight(M){const re={toggle:M};M||this.sdkHighlightSupported?(this.overrideHighlightUI=!1,this.cachedShortName=""):(this.overrideHighlightUI=!0,this.cachedShortName=this.streamerConfig.shortName,this.logger.info("AHL disabled on a supported game: ",this.cachedShortName)),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.ToggleAutoHighlight,re).pipe((0,p.U)(Ce=>(this.logger.info("ToggleAutoHighlight returns: ",Ce),Ce)),(0,t.K)(Ce=>(this.logger.info("ToggleAutoHighlight error: ",Ce),(0,w.of)(!1)))).subscribe()}toggleSdkHighlights(M){!0===this.igoConfig.GFNCefClient&&this.bridgeService.executeCommand(u.Gh.Share.Shareserver.DisableRecordSpecialCase,{specialCase:M?ae.Kk.RECORD_SPECIAL_CASE_NONE:ae.Kk.RECORD_SPECIAL_CASE_4K}).pipe((0,p.U)(Ce=>(this.logger.info("DisableRecordSpecialCase returns: ",Ce),Ce)),(0,t.K)(Ce=>(this.logger.info("DisableRecordSpecialCase error: ",Ce),(0,w.of)(!1)))).subscribe()}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(m.zs3),m.LFG(h.ed),m.LFG(h.dF),m.LFG(me.sK),m.LFG(f.g),m.LFG(A.nG),m.LFG(ye.l),m.LFG(Z),m.LFG(L.V9),m.LFG(o.y1),m.LFG(ae.In))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})();var ie=e(54364),q=(()=>{return(qe=q||(q={}))[qe.BackNav=0]="BackNav",qe[qe.ForwardNav=1]="ForwardNav",qe[qe.DeleteFile=2]="DeleteFile",q;var qe})();let Me=(()=>{class qe{constructor(M,re,Ce,ke,tt,ut,Ft,zt,$t,fn,Jt,yn){this.bridgeService=re,this.osService=Ce,this.cacheService=ke,this.sdkService=tt,this.notifierService=ut,this.oscDisplayService=Ft,this.telemetry=zt,this.translateService=$t,this.dialogHelper=fn,this.datePipe=Jt,this.gfnInfoService=yn,this.videoPath="",this.thumbWidth=128,this.thumbHeight=128,this.directories=[],this.workingFolder="",this.lastUserSelectedFolder="",this.previewCaller=void 0,this.mostLikelyResolution={width:1920,height:1080},this.currentFileData$=new D.X(null),this.currentSelectedFilesData$=new D.X([]),this.captureSaved$=new D.X(""),this.activeFilter=0,this.fileCounts=new U.uc,this.topLevelCounts=[],this.updatingTracker=!1,this.highlightSummaryIsOpen=!1,this.trackerCallback$=new i.xQ,this.delayedCallback$=new i.xQ,this.canceledCallback$=new i.xQ,this.refreshEvent$=new i.xQ,this.recentEvent$=new i.xQ,this.lowDiskSpaceEvent$=new D.X(!1),this.previewPaneEvent$=new i.xQ,this.logger=M.getLogger("GalleryService")}get fileDataChangeListener(){return this.currentFileData$.asObservable()}get currentFileData(){return this.currentFileData$.getValue()}set currentFileData(M){this.logger.info("Updating metadata"),this.currentFileData$.next(M)}get filesSelectedDataChangeListener(){return this.currentSelectedFilesData$.asObservable()}get currentSelectedFilesData(){return this.currentSelectedFilesData$.getValue()}set currentSelectedFilesData(M){this.currentSelectedFilesData$.next(M)}listenForTrackerEvents(){return this.trackerCallback$.asObservable()}listenForDelayedEvents(){return this.delayedCallback$.asObservable()}isHighlightCanceled(){return this.canceledCallback$.asObservable()}refreshEvent(){return this.refreshEvent$.asObservable()}recentEvent(){return this.recentEvent$.asObservable()}previewPaneEvent(){return this.previewPaneEvent$.asObservable()}lowDiskSpaceEvent(){const M=this.checkDiskSpace().subscribe(()=>{M.unsubscribe()});return this.lowDiskSpaceEvent$.asObservable()}lowDiskSpaceValue(){return this.lowDiskSpaceEvent$.getValue()}captureSaved(){return this.captureSaved$.asObservable()}init(){this.logger.info("Initialize"),this.dirSeparator=this.osService.getDirSeparator(),this.bridgeService.executeCommand(u.Gh.Common.Gallery.GalleryNotifications).subscribe(M=>this.galleryEvent(M)),this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetSettings).subscribe(M=>{this.checkDiskLimits(M.settings.capacity),M.settings.path&&this.initPathItems(M.settings.path).subscribe(),this.telemetry.updateGallerySettings(M)}),this.checkDiskSpace().pipe((0,V.P)()).subscribe(),this.gfnInfoService.streamingTerminated().pipe().subscribe(()=>{this.setLastUserSelectedFolder("")})}hasAnyEntries(){if(this.topLevelCounts.length>0){let M=0;return this.topLevelCounts.forEach(re=>{M+=re.totalCount}),console.log("gallery entries: ",M),M>0}return!1}checkDiskLimits(M){this.logger.info("Disk Limits: ",M),M.enabled&&M.capacityPercent/100*M.totalDiskSpaceMB<=M.usageMB&&(this.logger.info("Gallery is full"),this.notifierService.show(A.ZJ.GalleryIsFull))}initPathItems(M){this.videoPath=M,this.cacheService.setRecordingPaths(this.videoPath);const re=this.videoPath.split(":")[0];return this.logger.info("Drive Letter: ",re),re.length&&this.getDriveSize(re),this.getFolders().pipe((0,E.b)(()=>{this.logger.info("Initialize complete")}))}pathChanged(){return this.logger.info("Re-initializing Gallery Service"),this.workingFolder="",this.setLastUserSelectedFolder(""),this.directories=[],this.topLevelCounts=[],this.cacheService.flushDirectoryList(),this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetSettings).pipe((0,l.zg)(re=>(this.checkDiskLimits(re.settings.capacity),this.initPathItems(re.settings.path))),(0,b.h)(!0))}getDriveSize(M){this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetDriveInfo,{drive:M}).subscribe(Ce=>{this.currentDriveSize=Ce.totalSpaceMB,this.currentDriveFreeSpace=Ce.freeSpaceMB,this.logger.info("Drive info: ",Ce)})}buildPath(M){return""===M?this.videoPath:this.videoPath+this.dirSeparator+M}setWorkingFolder(M){const re=this.buildPath(M);return this.cacheService.getCachedDataCRC(re).pipe((0,l.zg)(Ce=>this.getUsableData(M)),(0,l.zg)(Ce=>(this.cacheService.useCacheData(re,!1),(0,w.of)(this.cacheService.files.length))))}getWorkingFolder(){return""!==this.workingFolder&&this.directories.length&&(this.directories.find(re=>re===this.workingFolder)||(this.workingFolder="")),""===this.workingFolder&&this.directories.length&&(this.workingFolder=this.directories[0]),this.workingFolder}setLastUserSelectedFolder(M){this.lastUserSelectedFolder=M}getLastUserSelectedFolder(){return this.lastUserSelectedFolder}getVideoFolder(){return this.videoPath}saveCurrentLocation(M){this.currentLocation=M}getCurrentLocation(){return this.currentLocation}setGalleryThumbSize(M){this.thumbWidth=M,this.thumbHeight=M}populateDirectoryStats(){if(this.directories.length>0&&this.cacheService.directoryListUpdateCounts){this.topLevelCounts=[];const M=[];return this.directories.forEach(re=>{M.push(this.getAppStats(re))}),(0,O.$R)(...M).pipe((0,p.U)(()=>this.directories))}return(0,w.of)(this.directories)}getFolders(){return this.cacheService.getDirectoryList().pipe((0,l.zg)(M=>(this.directories=M,this.populateDirectoryStats())))}showFolderContents(M){return""===M?""===this.workingFolder?this.workingFolder=M=this.directories[0]:M=this.workingFolder:this.workingFolder=M,this.logger.info("Working Folder: ",this.workingFolder),this.setWorkingFolder(M).pipe((0,p.U)(()=>this.cacheService.getCurrentPopFolder()))}getUsableData(M){this.logger.info("GetUsableData Dir: ",M);const re=this.buildPath(M);if(this.cacheService.useCacheData(re,!0))return this.logger.info("GetUsableData - Using cached data"),this.fileCounts=this.cacheService.counts,this.telemetry.setGalleryAccessCached(!0),this.telemetry.setGalleryFolderCounts(this.cacheService.counts.images,this.cacheService.counts.total-this.cacheService.counts.images),(0,w.of)(!0);this.telemetry.setGalleryAccessCached(!1);let Ce=[];return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetApplicationConfigs,{}).pipe((0,E.b)(ke=>{if(ke&&ke.apps.length){const tt=ke.apps.find(ut=>ut.app.profileName===M||ut.app.name===M);tt&&(Ce=tt.highlights.map(ut=>({name:ut.name,displayName:"",count:0,enabled:!0})),Ce.forEach(ut=>{const Ft=`highlightLabels.${ut.name}`,zt=this.translateService.instant(Ft);ut.displayName=zt===Ft?ut.name:zt}))}}),(0,t.K)(()=>(0,w.of)(!1)),(0,l.zg)(()=>this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetAppUGC,{appName:M})),(0,p.U)(ke=>{this.cacheService.resetCurrentPopFolder();const tt=[],ut=this.cacheService.getCurrentPopFolder();let Ft=0,zt=0,$t=0,fn=0;return ke.ugc&&ke.ugc.forEach((Jt,yn)=>{zt+=Jt.fileSubType===u.Yk.Common.Gallery.SubType.InstantReplay?1:0,Ft+=Jt.fileSubType===u.Yk.Common.Gallery.SubType.Manual?1:0,Jt.fileType===u.Yk.Common.Gallery.FileType.video&&Jt.fileSubType!==u.Yk.Common.Gallery.SubType.InstantReplay&&Jt.fileSubType!==u.Yk.Common.Gallery.SubType.Manual&&Jt.fileSubType!==u.Yk.Common.Gallery.SubType.Highlight&&(Ft+=1),$t+=Jt.fileType===u.Yk.Common.Gallery.FileType.image?1:0,fn+=Jt.fileSubType===u.Yk.Common.Gallery.SubType.Highlight?1:0;const An=Jt.path.lastIndexOf(this.dirSeparator),Ke={name:Jt.path.substr(An+1),type:Jt.fileType,subtype:Jt.fileSubType,source:Jt.fileSource,thumbnail:""};tt.push(Ke);const Pe={fullFilename:Jt.path,file:Ke,folder:M,index:yn,duration:Jt.duration,date:Jt.date,fileSize:Jt.fileSizeKB.toString(),audiotype:Jt.audiotype,hlName:Jt.highlightName,hlId:Jt.id,hlGroup:Jt.highlightGroupId,cancel:!1,data:null};ut.push(Pe),Ce.some(it=>{if(it.name===Jt.highlightName)return it.count++,!0})}),this.cacheService.files=tt,this.cacheService.setCacheLoadedPartial(re),this.logger.info("Files: "+ke.ugc.length+" Highlights : "+fn+" Recordings: "+Ft+" IR: "+zt+" Images: "+$t),this.fileCounts={total:ke.ugc.length,highlights:fn,videos:Ft,instantReplays:zt,images:$t,highlightBreakDown:Ce},this.telemetry.setGalleryFolderCounts($t,ke.ugc.length-$t),this.cacheService.setFileCounts(this.fileCounts,re),!0}))}getAppStats(M){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetAppStats,{appName:M}).pipe((0,p.U)(Ce=>{this.logger.info("App Stats: "+M+" SS: "+Ce.screenshots+" V: "+Ce.videos);const ke=this.topLevelCounts.findIndex(tt=>tt.folder===M);return ke>=0?this.topLevelCounts[ke].totalCount=Ce.screenshots+Ce.videos:this.topLevelCounts.push({folder:M,totalCount:Ce.screenshots+Ce.videos}),Ce}))}getMetaData(M,re=!0){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetFileMetadata,{file:M,width:re?this.thumbWidth:void 0,height:re?this.thumbHeight:void 0})}getImageFileDimensions(M){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetImageFileDimensions,{file:M})}getFileData(M,re,Ce){const ke=this.cacheService.getCurrentPopFolder();return void 0===ke||ke.length<=re||M!==ke[0].folder||""===ke[re].file.name?(0,w.of)(void 0):this.getMetaData(ke[re].fullFilename,Ce).pipe((0,V.P)(),(0,p.U)(tt=>{const ut=this.cacheService.getCurrentPopFolder();if(void 0===ut||ut.length<=re||M!==ut[0].folder)return;const Ft=ut[re],zt=ut[re].file,$t=void 0===tt.audiotype?U.$K.Unknown:tt.audiotype;return zt.type===U.A2.Video&&zt.subtype===U.dM.Normal&&$t===u.Yk.Common.Gallery.AudioType.Separate&&(zt.subtype=U.dM.Mta),Ft.audiotype=$t,Ft.duration=void 0===tt.duration?"":tt.duration,Ft.memeTop=tt.memeInfo?tt.memeInfo.topBarText:"",Ft.memeBottom=tt.memeInfo?tt.memeInfo.bottomBarText:"",Ft.data=void 0===tt.thumbnail?null:tt.thumbnail,Ft}),(0,t.K)(tt=>(this.logger.error("GetMetaData failed: ",tt),(0,w.of)(void 0))))}fillInFileData(M){return this.getFileData(M.folder,M.index,!0)}removeItem(M){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.RemoveGalleryItem,{file:M,forceDelete:!1}).pipe((0,l.zg)(Ce=>{const ke=M.lastIndexOf(this.dirSeparator),tt=M.substr(ke+1,M.length-1);return this.logger.info("File deleted: ",tt),this.cleanupLocalHighlightsListAfterDelete(M),(0,w.of)(!0)}),(0,t.K)(Ce=>(this.logger.info("File remove failed: ",Ce),this.notifierService.show(A.ZJ.FailedToRemove,"",""),(0,w.of)(!1))))}getThumbnailForFile(M,re=70,Ce=70){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetThumbnail,{file:M,width:re,height:Ce}).pipe((0,p.U)(tt=>tt.thumbnail))}eventCaptureSaved(M){const re=M.captureSaved.ugc.fileSource===u.Yk.Common.Gallery.Source.GFE_SDK&&M.captureSaved.ugc.fileSubType===u.Yk.Common.Gallery.SubType.Highlight,Ce=M.captureSaved.ugc.fileType===u.Yk.Common.Gallery.FileType.image,ke=M.captureSaved.ugc.fileSource===u.Yk.Common.Gallery.Source.GFE_Ansel;if(M.captureSaved.unannounced||this.getThumbnailForFile(M.captureSaved.ugc.path).subscribe(tt=>{if(re){const ut=`highlightLabels.${M.captureSaved.ugc.highlightName}`;this.translateService.get(ut).subscribe(Ft=>{Ft===ut&&(Ft=M.captureSaved.ugc.highlightName),this.notifierService.show(A.ZJ.HighlightsSaved,Ft,"","",tt)})}else if(ke){let ut="";switch(M.captureSaved.ugc.fileSubType){case u.Yk.Common.Gallery.SubType.Normal_Ansel:ut="nvcamera.screenshot";break;case u.Yk.Common.Gallery.SubType.SuperResolution:case u.Yk.Common.Gallery.SubType.SuperResolution_Oversized:ut="nvcamera.highResolutionPhoto";break;case u.Yk.Common.Gallery.SubType.SubType_360Mono:ut="nvcamera.360PhotoSphere";break;case u.Yk.Common.Gallery.SubType.Stereo:ut="nvcamera.screenshot3D";break;case u.Yk.Common.Gallery.SubType.SubType_360Stereo:ut="nvcamera.360PhotoSphere3D"}this.notifierService.show(A.ZJ.HighlightsSaved,ut,"","",tt)}else Ce?this.notifierService.show(A.ZJ.ScreenshotSaved,"","","",tt):"Manual"===M.captureSaved.ugc.fileSubType?this.notifierService.show(A.ZJ.RecordStopped,"","","",tt):"InstantReplay"===M.captureSaved.ugc.fileSubType&&this.notifierService.show(A.ZJ.InstantReplaySaved,"","","",tt)}),this.highlightSummaryIsOpen?void 0===this.highlightsSummaryData.highlights.find(tt=>tt.path===M.captureSaved.ugc.path)&&this.highlightsSummaryData.highlights.push({id:M.captureSaved.ugc.id,path:M.captureSaved.ugc.path,fileType:M.captureSaved.ugc.fileType,highlightdefinitionId:M.captureSaved.ugc.highlightDefinitionId,highlightName:M.captureSaved.ugc.highlightName,highlightGroupId:M.captureSaved.ugc.highlightGroupId,highlightTags:M.captureSaved.ugc.highlightTags,highlightSignificance:M.captureSaved.ugc.highlightSignificance}):this.cacheService.updateDirectoryList(M.captureSaved.ugc.path),re){const tt={id:M.captureSaved.ugc.id,groupId:M.captureSaved.ugc.highlightGroupId,filename:M.captureSaved.ugc.path,name:M.captureSaved.ugc.highlightName,cancel:!1};if(this.delayedCallback$.observers.length){const ut=M.captureSaved.ugc.DRSProfileName,Ft=0===this.directories.length,zt=!Ft&&void 0===this.directories.find(Jt=>Jt===ut),$t=!Ft&&!zt&&this.workingFolder!==ut,fn=Ft||zt||$t;if(this.logger.info("Special cases: "+Ft+" "+zt+" "+$t),fn){const Jt=this.workingFolder;this.showFolderContents(M.captureSaved.ugc.DRSProfileName).subscribe(()=>{this.saveDelayedHighlight(tt),this.workingFolder=Jt})}else this.saveDelayedHighlight(tt)}this.telemetry.sendHighlightCapture({shortName:this.sdkService.sdkInstance.appShortName},this.sdkService.sdkInstance.sdkVersion,this.durationToSeconds(M.captureSaved.ugc.duration),M.captureSaved.ugc.highlightDefinitionId,"image"===M.captureSaved.ugc.fileType?S.zc.image:S.zc.video)}this.captureSaved$.observers.length&&this.captureSaved$.next(M.captureSaved.ugc.path),this.getFolders().subscribe(()=>this.updateRecentList()),!re&&this.refreshEvent$.observers.length&&this.refreshEvent$.next({folder:M.captureSaved.ugc.DRSProfileName})}durationToSeconds(M){const re=M.lastIndexOf(":"),Ce=M.slice(re+1),ke=M.slice(0,re),tt=ke.lastIndexOf(":"),ut=ke.slice(tt+1),Ft=M.slice(0,tt);return Number(Ce)+60*Number(ut)+3600*Number(Ft)}updateRecentList(){this.recentEvent$.observers.length&&this.recentEvent$.next()}updateAfterFileCreation(M){this.refreshEvent$.observers.length&&this.refreshEvent$.next({folder:M}),this.updateRecentList(),this.logger.info("Update Recent and Gallery complete")}getMissingItem(M){const re=M.filename;let Ce=re.lastIndexOf(this.dirSeparator);const ke=re.slice(Ce+1),tt=re.slice(0,Ce);Ce=tt.lastIndexOf(this.dirSeparator);const ut=tt.slice(Ce+1);if(this.workingFolder!==ut)return(0,w.of)(void 0);const Ft=this.cacheService.getCurrentPopFolder(),zt=Ft.findIndex($t=>M.id===$t.hlId);return-1===zt?(this.refreshEvent$.observers.length&&this.refreshEvent$.next({folder:ut}),(0,w.of)(void 0)):(Ft[zt].fullFilename=re,Ft[zt].file.name=ke,this.getFileData(ut,zt,!0))}getCurrentDropdownCount(M){return this.getAppStats(M).pipe((0,p.U)(re=>{const Ce=this.topLevelCounts.findIndex(ke=>ke.folder===M);return-1!==Ce?(this.topLevelCounts[Ce].totalCount=re.screenshots+re.videos,this.topLevelCounts[Ce].totalCount):0}))}saveDelayedHighlight(M){if(M.cancel)return this.logger.info("Canceling Highlight"),void this.canceledCallback$.next({hlEvent:U.ZB.HIGHLIGHT_COMPLETED,args:M});const re=this.getMissingItem(M).subscribe(Ce=>{Ce&&(this.delayedCallback$.next({hlEvent:U.ZB.HIGHLIGHT_COMPLETED,args:Ce}),re.unsubscribe())})}updateFolderSync(M,re){return new C.y(Ce=>{this.updateFolder(M,re).subscribe(()=>{Ce.next(),Ce.complete(),this.logger.info("Complete")})})}updateFolder(M,re){let Ce={};if(re===U.Sc.Highlights)Ce={userGalleryPath:M};else if(re===U.Sc.Temporary){const tt=M.lastIndexOf(this.dirSeparator),ut=M.length-1;tt===ut&&(M=M.slice(0,ut)),Ce={tempFolderPath:M}}return this.bridgeService.executeCommand(u.Gh.Common.Gallery.SetSettings,{settings:Ce}).pipe((0,p.U)(()=>!0),(0,b.h)(!0))}galleryEvent(M){if(M)if(M.captureSaved)this.logger.info("Gallery event: CaptureSaved"),this.eventCaptureSaved(M);else if(M.openSummary)this.logger.info("Gallery event: OpenSummary"),this.eventOpenSummary(M);else if(M.highlightCanceled)this.logger.info("Gallery event: HighlightCanceled"),this.eventHighlightCanceled(M);else if(M.ugcDeleted)this.logger.info("Gallery event: UgcDeleted"),this.eventUGCDeleted(M);else if(M.checkDiskSpace)this.logger.info("Gallery event: CheckDiskSpace"),this.lowDiskSpace(M);else if(void 0!==M.galleryIsFull)this.logger.info("Gallery event: GalleryIsFull"),!0===M.galleryIsFull&&this.notifierService.show(A.ZJ.GalleryIsFull);else if(M.highlightCaptureFailed)this.logger.info("Gallery event: HighlightCaptureFailed"),this.checkCaptureFailure(M);else if(M.galleryPathUpdateStatus){switch(M.galleryPathUpdateStatus.status){case u.Yk.Common.Gallery.GalleryPathUpdateStatus.TrackerUpdateInProgress:this.updatingTracker=!0;break;case u.Yk.Common.Gallery.GalleryPathUpdateStatus.TrackerUpdateComplete:case u.Yk.Common.Gallery.GalleryPathUpdateStatus.CancelUpdateComplete:this.updatingTracker=!1}this.trackerCallback$.next({trackerEvent:M.galleryPathUpdateStatus.status})}else this.logger.info("Unknown or unhandled Event Type: ",M);else this.logger.info("Event: undefined or null")}galleryTrackerChangePath(){return new C.y(M=>{this.pathChanged().subscribe(()=>{M.next(),M.complete(),this.logger.info("ChangePath Complete")})})}getRecentData(M,re){this.setGalleryThumbSize(M);const Ce=[];return Ce.length=0,this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetRecentUGC,{count:re}).pipe((0,l.zg)(ut=>{if(!ut||!ut.recents||!ut.recents.length)return this.logger.info("No recent items to view!"),(0,O.$R)((0,w.of)(!1));const Ft=Math.min(re,ut.recents.length);for(let $t=0;$t<Ft;$t++){const fn=ut.recents[$t].path;let Jt=fn.lastIndexOf(this.dirSeparator);const yn=fn.substr(Jt+1,fn.length-1);let An=fn.substr(0,Jt);Jt=An.lastIndexOf(this.dirSeparator),An=An.substr(Jt+1,An.length-1);const Ke={fullFilename:fn,file:{name:yn,type:ut.recents[$t].fileType,subtype:ut.recents[$t].fileSubType,source:ut.recents[$t].fileSource,thumbnail:""},folder:An,index:$t,duration:ut.recents[$t].duration,date:ut.recents[$t].date,fileSize:ut.recents[$t].fileSizeKB.toString(),audiotype:ut.recents[$t].audiotype,hlName:ut.recents[$t].highlightName,hlId:ut.recents[$t].id,hlGroup:ut.recents[$t].highlightGroupId,cancel:!1,data:null};Ce.push(Ke)}this.logger.info("Viewing "+Ce.length+" recent items");const zt=[];return Ce.forEach($t=>{zt.push(this.getRecentMetaData($t,M))}),(0,O.$R)(...zt)}),(0,p.U)(()=>(this.logger.info("Recent MetaData complete!"),Ce)))}setHighlightsSummaryOpen(M){this.highlightSummaryIsOpen=M}getRecentMetaData(M,re){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetFileMetadata,{file:M.fullFilename,width:re,height:re}).pipe((0,p.U)(ke=>void 0===ke.fileType?(this.logger.info("metadata not available for file ",M.fullFilename),!1):("video"===ke.fileType&&void 0!==M.duration&&(M.duration=ke.duration),M.date=ke.date,M.fileSize=ke.fileSizeKB+"",M.audiotype=ke.audiotype,M.data=ke.thumbnail,!0)))}eventOpenSummary(M){const re=this.sdkService.sdkInstance.profileName;if(!re||0===re.length)return void this.logger.error("Missing game name");this.highlightSummaryIsOpen=!0,this.highlightsSummaryData={sdkVersion:this.sdkService.sdkInstance.sdkVersion,profileName:re,appShortName:this.sdkService.sdkInstance.appShortName,name:this.sdkService.sdkInstance.name,highlights:M.openSummary.ugc};const Ce={callbackData:JSON.stringify({openedFromSDK:!0})};this.telemetry.beginStartupTimer(S.bq.highlightsButton),this.oscDisplayService.openOSC("sidebar/gallery",Ce)}eventHighlightCanceled(M){this.canceledCallback$.observers.length&&this.saveDelayedHighlight({id:M.highlightCanceled.highlight.id,groupId:M.highlightCanceled.highlight.groupId,filename:"",name:"",cancel:!0}),this.telemetry.sendHighlightCancelled({shortName:this.sdkService.sdkInstance.appShortName},this.sdkService.sdkInstance.name,this.sdkService.sdkInstance.sdkVersion)}eventUGCDeleted(M){const re=M.ugcDeleted.ugc,Ce=re.path;let ke=Ce.lastIndexOf(this.dirSeparator);const tt=Ce.slice(0,ke);ke=tt.lastIndexOf(this.dirSeparator);const ut=tt.slice(ke+1);this.getFolders().subscribe(()=>this.updateRecentList()),this.workingFolder===ut&&(-1===this.cacheService.getCurrentPopFolder().findIndex($t=>re.id===$t.hlId)||this.refreshEvent$.observers.length&&this.refreshEvent$.next({folder:ut,filename:Ce}))}lowDiskSpace(M){this.lowDiskSpaceEvent$.next(M.checkDiskSpace.lowDiskSpace)}checkCaptureFailure(M){this.logger.info("checkCaptureFailure: ",M),(M.highlightCaptureFailed.errorCode===u.Yk.Share.Shareserver.InternalErrorCodeEnum.ShadowPlay_E_FAIL_NO_DISC_SPACE||M.highlightCaptureFailed.errorCode===u.Yk.Share.Shareserver.InternalErrorCodeEnum.ShadowPlay_E_BOUNDS||M.highlightCaptureFailed.errorCode===u.Yk.Share.Shareserver.InternalErrorCodeEnum.ShadowPlay_E_FAIL_NO_GALLERY_SPACE)&&this.notifierService.show(A.ZJ.NoSpaceCaptureNotSaved,"commonLabels.Highlights")}checkDiskSpace(){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.CheckDiskSpace,{}).pipe((0,p.U)(re=>(this.lowDiskSpace({checkDiskSpace:{lowDiskSpace:re.lowDiskSpace}}),re.lowDiskSpace)))}cleanupLocalHighlightsListAfterDelete(M){if(this.highlightsSummaryData&&this.highlightsSummaryData.highlights.length>0){const re=this.highlightsSummaryData.highlights.find(Ce=>Ce.path===M);if(re){this.logger.info("Highlight to delete: ",re);const Ce=this.highlightsSummaryData.highlights.indexOf(re);Ce>-1&&this.highlightsSummaryData.highlights.splice(Ce,1)}}}getHighlightsToUse(M){return M?(this.highlightSummaryIsOpen=!0,this.highlightsSummaryData):{sdkVersion:"",profileName:"",appShortName:"",name:"",highlights:void 0}}generateGalleryFilename(M,re,Ce=new Date){return`${this.videoPath}${this.dirSeparator}${M}${this.dirSeparator}${M} ${this.datePipe.transform(Ce,"yyyy.MM.dd - HH.mm.ss.SS")}.${re}`}previewPaneSendEvent(M){this.previewPaneEvent$.next(M)}setPreviewCaller(M){this.previewCaller=M}getPreviewCaller(){return this.previewCaller}showDeleteSnackbar(M){let re=!0;const Ce=M.length,ke=1===Ce?"confirmation.deletedTitle":"confirmation.deletedTitleMulti";return M.length<=0?(0,w.of)(!1):new C.y(Ft=>{(0,_.aj)([this.translateService.get(ke,{arg:Ce}),this.translateService.get("confirmation.undo")]).pipe((0,l.zg)(([zt,$t])=>{const fn=this.dialogHelper.openSnackBar(zt,$t);return fn.onAction().subscribe(()=>{re=!1}),fn.afterDismissed()}),(0,l.zg)(()=>(0,F.D)(M)),(0,l.zg)(zt=>re?(this.telemetry.sendGalleryFileRemoved(zt),this.removeItem(zt.fullFilename)):(0,w.of)(!1)),(0,B.Z)()).subscribe(zt=>{Ft.next(zt),Ft.complete()})})}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(h.ed),m.LFG(h.dF),m.LFG(c),m.LFG(v),m.LFG(te),m.LFG(A.nG),m.LFG(y.v),m.LFG(ye.l),m.LFG(me.sK),m.LFG(Z),m.LFG(ie.uU),m.LFG(ae.In))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})();var xe=e(42720),ct=e(8095),Se=e(202),Ge=(()=>{return(qe=Ge||(Ge={})).off="off",qe.on="on",qe.recording="recording",Ge;var qe})(),St=(()=>{return(qe=St||(St={})).active="Active",qe.stopped="Stopped",qe.paused="Paused",St;var qe})(),Te=(()=>{return(qe=Te||(Te={})).low="Low",qe.medium="Medium",qe.high="High",qe.ultra="Ultra",qe.custom="Custom",Te;var qe})(),Je=e(52349),xt=e(65119),Ye=u.Yk.Share.Shareserver.MicModeEnum,rt=u.Yk.Share.Shareserver.Resolution,ge=u.Yk.Share.Shareserver.Quality,ve=u.Yk.Share.Shareserver.DeviceTypeEnum,Ze=u.Yk.Share.Shareserver.DeviceStateTypeEnum;let Ie=(()=>{class qe{constructor(M,re,Ce,ke,tt,ut,Ft,zt,$t,fn,Jt,yn){this.bridgeService=re,this.oscNotificationService=Ce,this.hotkeyService=ke,this.oscDisplayService=tt,this.telemetry=ut,this.dialogHelper=Ft,this.igoConfig=zt,this.gfnInfoService=$t,this.sdkHighlightService=fn,this.microphoneService=Jt,this.featureSupportService=yn,this.disableRecordSpecialCase=ae.Kk.RECORD_SPECIAL_CASE_4K,this.$mrState=new D.X(!1),this.$irState=new D.X(Ge.off),this.$micState=new D.X(Ye.off),this.$hlBadState=new D.X(!1),this.$micDeviceState=new i.xQ,this.$camDeviceState=new i.xQ,this._mrStartTime=null,this.isDTCaptureSupported=!1,this.notebookCoProc=!1,this.captureState=null,this.isGfnMicrophoneEnabled=!1,this.maxIRTime=15,this.throttleMs=333,this.microphoneSpecs=[],this.currentMicIndex=0,this.captureScreenshot=void 0,this.enableInstantReplay=void 0,this.disableInstantReplay=void 0,this.saveIR=void 0,this.startManualRecord=void 0,this.stopAndSaveManualRecord=void 0,this.logger=M.getLogger("ShadowPlayService")}throttled(M){return(0,Se.throttle)(M,1e3,{trailing:!1})}init(){this.captureScreenshot=this.throttled(this._captureScreenshot),this.enableInstantReplay=this.throttled(this._enableInstantReplay),this.disableInstantReplay=this.throttled(this._disableInstantReplay),this.saveIR=this.throttled(this._saveIR),this.startManualRecord=this.throttled(this._startManualRecord),this.stopAndSaveManualRecord=this.throttled(this._stopAndSaveManualRecord),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.RegisterCaptureStateChangeNotifications).pipe((0,ue.h)(re=>re.captureMode!==u.Yk.Share.Shareserver.CaptureModeEnum.gameCast)).subscribe(re=>this.handleCaptureEvent(re)),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.RegisterGeneralNotifications).subscribe(re=>this.handleGeneralNotification(re)),this.gfnInfoService.getRecordSpecialCase().subscribe(re=>{this.logger.info("disableRecordSpecialCase mode: ",re),this.disableRecordSpecialCase=re,this.sdkHighlightService.toggleAutohighlight(!this.disableRecordSpecialCase),this.sdkHighlightService.toggleSdkHighlights(!this.disableRecordSpecialCase)}),this.featureSupportService.isGfnMicrophoneEnabled().pipe((0,X.q)(1)).subscribe(re=>{if(this.isGfnMicrophoneEnabled=re,re)this.microphoneService.currentMicState$.subscribe(Ce=>{this.setMicMode(Ce===Je.tn.Unmuted?Ye.on:Ye.off)});else{const Ce=this.getMicrophoneData().subscribe(()=>{Ce.unsubscribe()});this.hotkeyService.listen(o.sW.MicToggle).pipe((0,ct.p)(this.throttleMs)).subscribe(()=>{let ke=this.$micState.getValue();ke=ke===Ye.ptt||ke===Ye.on?Ye.off:Ye.on,this.setMicMode(ke)}),this.hotkeyService.listenPTT().pipe((0,ct.p)(this.throttleMs)).subscribe(ke=>{this.setMicPTTMode(ke?Ye.on:Ye.off)})}}),this.hotkeyService.listen(o.sW.DVRToggle).pipe((0,ct.p)(this.throttleMs)).subscribe(()=>{this.disableRecordSpecialCase||(this.$irState.getValue()===Ge.off?this.enableInstantReplay():this.disableInstantReplay())}),this.hotkeyService.listen(o.sW.DVRSave).pipe((0,ct.p)(this.throttleMs)).subscribe(()=>{this.disableRecordSpecialCase||(this.$irState.getValue()===Ge.recording?this.saveIR():this.logger.info("Attempted to save and instant replay while instant replay was disabled"))}),this.hotkeyService.listen(o.sW.RecordToggle).pipe((0,ct.p)(this.throttleMs)).subscribe(()=>{this.disableRecordSpecialCase||(this.$mrState.getValue()?this.stopAndSaveManualRecord():this.startManualRecord())}),this.hotkeyService.listen(o.sW.Screenshot).pipe((0,ct.p)(this.throttleMs)).subscribe(()=>{ae.Kk.RECORD_SPECIAL_CASE_PLAYTEST!==this.disableRecordSpecialCase&&this.captureScreenshot()}),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetCaptureState).subscribe(re=>{this.captureState=re.state}),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetDesktopCaptureSupportReason).subscribe(re=>{if(this.logger.info("Desktop Support Reason: ",re),this.isDTCaptureSupported=re.support,!this.isDTCaptureSupported){const Ce=re.desktopCaptureUnsupportedReason[0];(Ce.indexOf("notebookDriver")>=0||Ce.indexOf("notebookCoProc")>=0||Ce.indexOf("notebookDGpu")>=0||Ce.indexOf("hideCheckboxAOSP")>=0)&&(this.notebookCoProc=!0)}},re=>{this.logger.info("Desktop support query failed")});const M=this.getInstantReplayMaxLength().subscribe(re=>{this.maxIRTime=re,this.logger.info("IR Length: "+re+" seconds"),M.unsubscribe()});(0,xe.D)([this.getInstantReplayEnableStatus(),this.getInstantReplayRunningStatus()]).subscribe(([re,Ce])=>{Ce?this.$irState.next(Ge.recording):re&&this.$irState.next(Ge.on),(Ce||re)&&this.hotkeyService.startListeningToHotkey(o.sW.DVRSave).subscribe()})}get mrStartTime(){return this._mrStartTime}handleCaptureEvent(M){switch(this.logger.info("Capture Event:",M),M.captureMode){case u.Yk.Share.Shareserver.CaptureModeEnum.manual:this.logger.info("Manual capture"),M.recordingState===u.Yk.Share.Shareserver.RecordingState.started?this.disableRecordSpecialCase||(this.oscNotificationService.show(A.ZJ.RecordStarted),this.$mrState.next(!0),this._mrStartTime=Date.now(),this.telemetry.sendCaptureEvent(S.rS.startManualCapture,M.captureMethod,M.recordWidth,M.recordHeight,M.recordFramerate,M.recordCodec,M.errorType,M.errorDetails)):M.recordingState===u.Yk.Share.Shareserver.RecordingState.available&&(this.oscNotificationService.show(A.ZJ.RecordSaving),this.$mrState.next(!1),this._mrStartTime=null,this.telemetry.sendCaptureEvent(S.rS.stopAndSaveManualCapture,M.captureMethod,M.recordWidth,M.recordHeight,M.recordFramerate,M.recordCodec,M.errorType,M.errorDetails));break;case u.Yk.Share.Shareserver.CaptureModeEnum.dvr:this.logger.info("DVR");const re=this.$irState.value===Ge.on||this.$irState.value===Ge.recording;M.recordingState===u.Yk.Share.Shareserver.RecordingState.enabled?this.disableRecordSpecialCase||(this.oscNotificationService.show(A.ZJ.InstantReplayStarted),this.logger.info("IR Enabled"),this.$irState.next(Ge.on),this.telemetry.sendCaptureEvent(S.rS.turnOnInstantReplay,M.captureMethod,M.recordWidth,M.recordHeight,M.recordFramerate,M.recordCodec,M.errorType,M.errorDetails)):M.recordingState===u.Yk.Share.Shareserver.RecordingState.started?this.disableRecordSpecialCase||(this.logger.info("IR Started"),this.$irState.next(Ge.recording)):M.recordingState===u.Yk.Share.Shareserver.RecordingState.available?this.disableRecordSpecialCase||(this.logger.info("IR Available"),this.$irState.next(Ge.on)):M.recordingState===u.Yk.Share.Shareserver.RecordingState.saved?this.disableRecordSpecialCase||(this.logger.info("IR Saved"),this.oscNotificationService.show(A.ZJ.InstantReplaySaving),this.telemetry.sendCaptureEvent(S.rS.instantReplaySaved,M.captureMethod,M.recordWidth,M.recordHeight,M.recordFramerate,M.recordCodec,M.errorType,M.errorDetails)):M.recordingState===u.Yk.Share.Shareserver.RecordingState.disabled&&(this.oscNotificationService.show(A.ZJ.InstantReplayStopped),this.logger.info("IR Disabled"),this.$irState.next(Ge.off),this.telemetry.sendCaptureEvent(S.rS.turnOffInstantReplay,M.captureMethod,M.recordWidth,M.recordHeight,M.recordFramerate,M.recordCodec,M.errorType,M.errorDetails));const Ce=this.$irState.value===Ge.on||this.$irState.value===Ge.recording;Ce!==re&&(Ce?this.hotkeyService.startListeningToHotkey(o.sW.DVRSave).subscribe():this.hotkeyService.stopListeningToHotkey(o.sW.DVRSave));break;case u.Yk.Share.Shareserver.CaptureModeEnum.gearHighlight:this.logger.info("Gear Highlight"),M.recordingState===u.Yk.Share.Shareserver.RecordingState.enabled?(this.logger.info("Gear Highlights Enabled"),this.$hlBadState.next(!1)):M.recordingState===u.Yk.Share.Shareserver.RecordingState.disabled&&(this.logger.info("Gear Highlights Disabled"),this.$hlBadState.next(!0));break;default:this.logger.info("Other",M.captureMode)}}handleGeneralNotification(M){this.logger.info("General Event: ",M),M.captureFailed?this.handleError():M.galleryIsFull?(this.logger.info("Gallery is full"),this.oscNotificationService.show(A.ZJ.GalleryIsFull)):M.diskSpaceIsLow?(this.logger.info("Gallery disk space is low"),this.oscNotificationService.show(A.ZJ.DiskSpaceIsLow)):M.deviceChange&&(M.deviceChange.device===ve.mic?(this.logger.info("Microphone has been ",M.deviceChange.state),this.microphoneSpecs[this.currentMicIndex].name===M.deviceChange.name&&this.$micDeviceState.next(M.deviceChange.state)):M.deviceChange.device===ve.webcam&&(this.logger.info("Camera has been ",M.deviceChange.state),this.$camDeviceState.next(M.deviceChange.state)))}handleError(){!1===this.isDTCaptureSupported&&!0===this.notebookCoProc&&("PID"===this.captureState?(this.oscNotificationService.show(A.ZJ.WarningSupportedGameRequired),this.logger.info("Supported game required")):(this.oscNotificationService.show(A.ZJ.WarningFullscreenGameRequired),this.logger.info("Fullscreen game required")))}getMRState(){return this.$mrState.asObservable()}getIRState(){return this.$irState.asObservable()}getMICState(){return this.$micState.asObservable()}getHLBadState(){return this.$hlBadState.asObservable()}getMICDeviceState(){return this.$micDeviceState.asObservable()}getCAMDeviceState(){return this.$camDeviceState.asObservable()}isNotebookCoProcSystem(){return this.notebookCoProc}doWeNeedToAskPermission(){return(0,_.aj)([this.isCaptureControlPIDModeValid(),this.isInDesktopMode(),this.getDesktopCaptureSupported(),this.getDesktopCaptureEnabled()]).pipe((0,p.U)(([M,re,Ce,ke])=>(this.logger.info("Supported data: ",re,ke,M,Ce),!(!re||ke||M)&&(!0===this.notebookCoProc?("PID"===this.captureState?(this.oscNotificationService.show(A.ZJ.WarningSupportedGameRequired),this.logger.info("Supported game required")):(this.oscNotificationService.show(A.ZJ.WarningFullscreenGameRequired),this.logger.info("Fullscreen game required")),!1):Ce))))}isCaptureControlPIDModeValid(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetCaptureControlPIDMode).pipe((0,p.U)(M=>(this.logger.info("Is Capture Control PID mode valid: ",M),M.valid)))}isInDesktopMode(){return this.oscDisplayService.getCurrentDesktopMode().pipe((0,X.q)(1),(0,p.U)(M=>(this.logger.info("Desktop mode: ",M),"desktop"===M)))}getDesktopCaptureSupported(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetDesktopCaptureSupported).pipe((0,p.U)(M=>(this.logger.info("DesktopCapture Supported: ",M.support),M.support)))}getDesktopCaptureEnabled(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetDesktopCaptureEnabled).pipe((0,p.U)(M=>(this.logger.info("DesktopCapture Enabled: ",M.enable),M.enable)))}SetDesktopCaptureEnabled(M){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SetDesktopCaptureEnabled,{enable:M}).pipe((0,p.U)(Ce=>(this.logger.info("SetDesktopCaptureEnabled: ",Ce),!0),Ce=>(this.logger.info("SetDesktopCaptureEnabled error: ",Ce),(0,w.of)(!1))))}handlePrivacyAndAvailability(M){return this.doWeNeedToAskPermission().pipe((0,l.zg)(re=>re?"GFE"===this.igoConfig.branding?this.askToEnableDTCapture(M):(0,w.of)(!1):(0,w.of)(!0)))}checkFailure(M,re){this.logger.info("Check Failure for ",re," returns: ",M),M._return_internal===u.Yk.Share.Shareserver.InternalErrorCodeEnum.ShadowPlay_E_FAIL_NO_DISC_SPACE||M._return_internal===u.Yk.Share.Shareserver.InternalErrorCodeEnum.ShadowPlay_E_BOUNDS||M._return_internal===u.Yk.Share.Shareserver.InternalErrorCodeEnum.ShadowPlay_E_FAIL_NO_GALLERY_SPACE?"mainMenu.ManualRecord"===re?this.oscNotificationService.show(A.ZJ.NoSpaceCaptureNotStarted):this.oscNotificationService.show(A.ZJ.NoSpaceCaptureNotSaved,re):M._return_internal===u.Yk.Share.Shareserver.InternalErrorCodeEnum.ShadowPlay_E_FAIL_CAPTURE_DISABLED&&this.oscNotificationService.show(A.ZJ.WarningSupportedGameRequired,re)}askToEnableDTCapture(M){this.logger.info("askToEnableDTCapture request for: ",M);let re="",Ce="";switch(M){case"ss":re="mainMenu.Screenshot",Ce="confirmation.CaptureScreenshot";break;case"mr":re="mainMenu.ManualRecord",Ce="confirmation.CaptureRecording";break;case"br":re="settings.Broadcast",Ce="confirmation.CaptureBroadcasting"}return this.dialogHelper.openAlertDialog({title:re,query:Ce,queryParam:"",action1:"confirmation.NotRightNow",action2:"confirmation.yes"}).pipe((0,l.zg)(tt=>tt.afterClosed()),(0,l.zg)(tt=>tt===se.DX.Action2?this.SetDesktopCaptureEnabled(!0):(0,w.of)(!1)),(0,p.U)(tt=>"ss"!==M&&tt))}_captureScreenshot(){const M=this.handlePrivacyAndAvailability("ss").subscribe(re=>{M.unsubscribe(),re&&(this.logger.info("Taking screenshot"),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.CaptureScreenshot).subscribe(Ce=>{this.checkFailure(Ce,"mainMenu.Screenshot"),Ce._return_code===u.Yk.Share.Shareserver.InternalErrorCodeEnum.GXP_Success_Ok&&this.telemetry.sendCaptureEvent(S.rS.screenshotSaved,"Unknown",0,0,0,"PNG","","")},Ce=>{this.logger.error("CaptureScreenshot failed: ",Ce)}),this.telemetry.startCaptureEvent(S.rS.screenshotSaved))})}captureCustomScreenshot(M,re,Ce){return this.logger.info("Got custom screenshot request: Filename "+re),new C.y(ke=>{let tt;tt=this.bridgeService.executeCommand(u.Gh.Share.Shareserver.CustomScreenshotNotifications).subscribe(ut=>{ke.next(ut),tt.unsubscribe(),ke.complete()},ut=>{ke.error(ut)}),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.CaptureCustomScreenshot,{controller:M,screenshotName:re,slotId:Ce}).subscribe(ut=>{(ut._return_code||ut._return_internal!==u.Yk.Share.Shareserver.InternalErrorCodeEnum.GXP_Success_Ok&&ut._return_internal!==u.Yk.Share.Shareserver.InternalErrorCodeEnum.GXP_Success_NoError)&&(this.logger.info("Internal error while capturing screenshot."+ut.return_code),ke.error(ut.return_code),tt.unsubscribe())},ut=>{this.logger.info("Error while initializing custom screenshot"),ke.error(ut),tt.unsubscribe()})})}_enableInstantReplay(){return this.logger.info("IR Enabled"),this.telemetry.startCaptureEvent(S.rS.turnOnInstantReplay),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.EnableInstantReplay,{enable:!0}).subscribe(M=>{this.checkFailure(M,"mainMenu.InstantReplay")},M=>{this.logger.error("EnableInstantReplay (enable) failed: ",M)})}_disableInstantReplay(){return this.logger.info("IR Disabled"),this.telemetry.startCaptureEvent(S.rS.turnOffInstantReplay),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.EnableInstantReplay,{enable:!1}).subscribe(M=>{this.checkFailure(M,"mainMenu.InstantReplay")},M=>{this.logger.error("EnableInstantReplay (disable) failed: ",M)})}_saveIR(){return this.logger.info("IR saved"),this.telemetry.startCaptureEvent(S.rS.instantReplaySaved),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SaveInstantReplay).subscribe(M=>{this.checkFailure(M,"mainMenu.InstantReplay")},M=>{this.logger.error("SaveInstantReplay failed: ",M)})}_startManualRecord(){this.logger.info("Try manual");const M=this.handlePrivacyAndAvailability("mr").subscribe(re=>{if(M.unsubscribe(),re)return this.logger.info("Manual Record started"),this.telemetry.startCaptureEvent(S.rS.startManualCapture),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.EnableRecord,{enable:!0}).subscribe(Ce=>{this.checkFailure(Ce,"mainMenu.ManualRecord")},Ce=>{this.logger.error("EnableRecord (start) failed: ",Ce)})})}_stopAndSaveManualRecord(){return this.logger.info("Manual Record saved"),this.telemetry.startCaptureEvent(S.rS.stopAndSaveManualCapture),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.EnableRecord,{enable:!1}).subscribe(M=>{this.checkFailure(M,"mainMenu.ManualRecord")},M=>{this.logger.error("EnableRecord (save) failed: ",M)})}getInstantReplayRunningStatus(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetInstantReplayRunningStatus).pipe((0,p.U)(M=>(this.logger.info("GetInstantReplayRunningStatus returns: ",M),M.status)))}getInstantReplayEnableStatus(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetInstantReplayEnableStatus).pipe((0,p.U)(M=>(this.logger.info("GetInstantReplayEnableStatus returns: ",M),M.status)))}getInstantReplayMaxLength(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetInstantReplaySettings).pipe((0,p.U)(M=>(this.logger.info("GetInstantReplaySettings returns: ",M),this.telemetry.updateReplayLength(M.replayLengthSeconds),M.replayLengthSeconds)))}getMicMode(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetMicMode).pipe((0,p.U)(M=>(this.logger.info("GetMicMode returns: ",M),this.$micState.next(M.mode),M.mode)),(0,t.K)(M=>(this.logger.info("GetMicMode error: ",M),(0,w.of)(Ye.off))))}setMicMode(M){const re={mode:M},Ce=M!==Ye.off;return!this.isGfnMicrophoneEnabled&&"GFN"===this.igoConfig.branding&&(this.logger.info(" SetMicState with ",Ce),this.bridgeService.executeCommand(u.Gh.Gfn.Streaming.SetMicState,{enable:Ce}).subscribe(ke=>{},ke=>{this.logger.error(" SetMicState: ",ke)})),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SetMicMode,re).subscribe(ke=>{this.$micState.next(M)},ke=>{this.logger.error(" SetMicMode: ",ke)})}setMicPTTMode(M){const re=!this.$mrState.getValue(),Ce=this.$irState.getValue()!==Ge.recording,ke=this.$micState.getValue()!==Ye.ptt;if(!(re&&Ce||ke))return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.MicPTTMode,{mode:M}).subscribe(ut=>{this.logger.info("SetMicPTTMode results: ",ut)},ut=>{this.logger.info("SetMicPTTMode error: ",ut)})}getFreestylePreviewBasePath(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetFreestylePreviewBasePath,{})}GetSupportedBitrates(M,re){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetSupportedBitrates,{quality:M,resolution:re})}GetQualityDefaultData(M){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetQualityDefaultData,{quality:M})}setInstantReplaySettings(M){return this.logger.info("setInstantReplaySettings params: ",M),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SetInstantReplaySettings,M).pipe((0,p.U)(re=>(this.logger.info("SetInstantReplaySettings returns: ",re),!0)))}getRecordSettings(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetRecordSettings).pipe((0,p.U)(M=>(this.logger.info("GetRecordSettings returns: ",M),M)))}setRecordSettings(M){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SetRecordSettings,M).subscribe(re=>{this.logger.info("SetRecordSettings returns: ",re)})}getBroadcastSettings(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetBroadcastSettings).pipe((0,p.U)(M=>(this.logger.info("GetBroadcastSettings returns: ",M),M)))}convertResolution(M){switch(M){case"In-game":return rt.In_game;case"2160p 4K":return rt.Resolution_2160p_4K;case"1440p HD":return rt.Resolution_1440p_HD;case"1080p HD":return rt.Resolution_1080p_HD;case"720p HD":return rt.Resolution_720p_HD;case"480p":return rt.Resolution_480p;case"360p":return rt.Resolution_360p;case"240p":return rt.Resolution_240p;case"Exact":return rt.Exact;default:return rt.In_game}}getVideoSpecsInit(){return(0,_.aj)([this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetSupportedResolutions),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetSupportedFramerates),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetInstantReplaySettings)]).pipe((0,p.U)(([M,re,Ce])=>{const ke=ge[Ce.quality],tt=this.convertResolution(Ce.resolution);return this.videoSpecs={resolutions:M.resolutions,frameRates:re.framerates,bitRatesMin:void 0,bitRatesMax:void 0,bitRatesDefault:void 0,recQualitySP:ke,recQualityIgo:this.convertQualitySpToIgo(ke),recResolution:tt,recFramerate:Ce.framerate,recBitrate:Ce.bitrateBps,recReplayLength:Ce.replayLengthSeconds},this.videoSpecs}))}getVideoSpecs(){return this.getVideoSpecsInit().pipe((0,l.zg)(M=>this.GetSupportedBitrates(M.recQualitySP,M.recResolution)),(0,p.U)(M=>(this.videoSpecs.bitRatesMin=M.bitrateBpsMin,this.videoSpecs.bitRatesMax=M.bitrateBpsMax,this.videoSpecs.bitRatesDefault=M.bitrateBpsDefault,this.videoSpecs)))}convertQualitySpToIgo(M){switch(M){case ge.Average:return Te.low;case ge.Good:return Te.medium;case ge.VeryGood:return Te.high;case ge.UltraGood:return Te.ultra;case ge.Custom:return Te.custom;default:this.logger.info("Invalid Quality: ",M)}}convertQualityIgoToSp(M){switch(M){case Te.low:return ge.Average;case Te.medium:return ge.Good;case Te.high:return ge.VeryGood;case Te.ultra:return ge.UltraGood;case Te.custom:return ge.Custom;default:this.logger.info("Invalid Quality: ",M)}}setVideoSpecs(M,re){if(!re)return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SetInstantReplaySettings,{replayLengthSeconds:M.recReplayLength}).pipe((0,p.U)(ke=>(this.logger.info("SetInstantReplaySettings returns: ",ke),this.maxIRTime=M.recReplayLength,!0)));this.videoSpecs.recQualitySP=this.convertQualityIgoToSp(M.recQualityIgo),this.videoSpecs.recResolution=M.recResolution,this.videoSpecs.recFramerate=30===M.recFramerate?30:60,this.videoSpecs.recBitrate=M.recBitrate,this.videoSpecs.recReplayLength=M.recReplayLength;const Ce={quality:this.videoSpecs.recQualitySP,resolution:M.recResolution,framerate:30===M.recFramerate?30:60,bitrateBps:M.recBitrate,replayLengthSeconds:M.recReplayLength};return M.recQualityIgo===Te.custom?(this.videoSpecs.recQualityIgo=Te.custom,this.videoSpecs.recQualitySP=ge.Custom,this.GetSupportedBitrates(Ce.quality,Ce.resolution).pipe((0,l.zg)(ke=>((Ce.bitrateBps<ke.bitrateBpsMin||Ce.bitrateBps>ke.bitrateBpsMax)&&(Ce.bitrateBps=this.videoSpecs.recBitrate=ke.bitrateBpsDefault),this.setInstantReplaySettings(Ce))))):(this.videoSpecs.recQualityIgo=M.recQualityIgo,this.setInstantReplaySettings(Ce))}getMicCount(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetMicCount).pipe((0,p.U)(M=>M.present),(0,t.K)(M=>(this.logger.info("GetMicCount error: ",M),(0,w.of)(0))))}getMicSettings(M){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetMicSettings,M).pipe((0,p.U)(re=>(this.microphoneSpecs[M.index]=re,!0)),(0,t.K)(re=>(this.logger.info("GetMicSettings error: ",re),(0,w.of)(!1))))}getCurrentMicSettings(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetMicSettings,{index:-1}).pipe((0,p.U)(re=>re.index),(0,t.K)(re=>(this.logger.info("getCurrentMicSettings error: ",re),(0,w.of)(0))))}setMicSettings(M){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SetMicSettings,{index:M.index,muted:M.micSpecs[M.index].muted,volumePercent:M.micSpecs[M.index].volumePercent,boostPercent:M.micSpecs[M.index].boostPercent}).pipe((0,t.K)(Ce=>(this.logger.info("setMicSettings error: ",Ce),(0,w.of)(!1))))}getAudioSettings(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetAudioSettings).pipe((0,p.U)(M=>({systemVolumePercent:M.systemVolumePercent,separateTracks:M.separateTracks})),(0,t.K)(M=>(this.logger.info("GetAudioSettings error: ",M),(0,w.of)({systemVolumePercent:0,separateTracks:!1}))))}setAudioSettings(M){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SetAudioSettings,M).pipe((0,t.K)(re=>(this.logger.info("setAudioSettings error: ",re),(0,w.of)(!1))))}getMicrophoneData(){return this.getMicCount().pipe((0,l.zg)(M=>{const re=M;if(0===re)return(0,w.of)({index:-1,micSpecs:void 0});const Ce=[];for(let ke=0;ke<re;ke++)Ce.push(this.getMicSettings({index:ke}));return(0,O.$R)(...Ce)}),(0,l.zg)(()=>this.getCurrentMicSettings()),(0,p.U)(M=>{this.currentMicIndex=M,this.logger.info("All Mic Data: ",this.microphoneSpecs),this.logger.info("Current Index: ",M);const re=[];return this.microphoneSpecs.forEach((ke,tt)=>{re[tt]={index:ke.index,name:ke.name,id:ke.id,muted:ke.muted,enabled:ke.enabled,volumePercent:ke.volumePercent,boostPercent:ke.boostPercent}}),{index:M,micSpecs:re}}))}isCurrentMicAvailable(){return this.getMicrophoneData().pipe((0,p.U)(()=>this.microphoneSpecs[this.currentMicIndex].enabled))}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(h.ed),m.LFG(h.dF),m.LFG(A.nG),m.LFG(o.y1),m.LFG(y.v),m.LFG(ye.l),m.LFG(Z),m.LFG(f.g),m.LFG(ae.In),m.LFG(te),m.LFG(Je.pJ),m.LFG(xt.l))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})(),ze=(()=>{class qe{constructor(M,re,Ce,ke,tt){this.bridgeService=re,this.hotkeyService=Ce,this.oscDisplayService=ke,this.igoConfig=tt,this.throttleMs=333,this.$webcamState=new D.X(!1),this.webcamInfo={present:!1,enabled:!1,visible:!1,preview:!1,queuePreview:!1,position:u.Yk.Share.Shareserver.OverlayPositionEnum.rightTop,size:u.Yk.Share.Shareserver.OverlaySizeEnum.small},this.logger=M.getLogger("WebcamService")}init(){if("GFE"===this.igoConfig.branding){this.hotkeyService.listen(o.sW.CameraToggle).pipe((0,ct.p)(this.throttleMs)).subscribe(()=>{this.toggleWebcam()}),this.initializeWebcam(),this.getWebcamOverlaySettings();let M=!1;this.oscDisplayService.getCurrentOpenState().subscribe(re=>{M&&this.getCurrentWebcamStates(re),M=!0})}}getCurrentWebcamStates(M){"open"===M&&!0===this.webcamInfo.preview?this.enableWebcamPreview(!1):"closed"===M&&(this.webcamInfo.preview=this.webcamInfo.queuePreview,this.enableWebcamPreview(this.webcamInfo.queuePreview))}initializeWebcam(){this.getWebcamPresent().subscribe(M=>{this.logger.info("Webcam present: ",M),this.webcamInfo.present=M,M&&(this.getWebcamEnable().subscribe(re=>{this.webcamInfo.enabled=re,this.$webcamState.next(this.webcamInfo.enabled),this.logger.info("Webcam Enabled: ",re)}),this.getWebcamShown().subscribe(re=>{this.webcamInfo.visible=re,this.logger.info("Webcam Shown: ",re)}),this.getWebcamPreviewState().subscribe(re=>{this.webcamInfo.preview=this.webcamInfo.queuePreview=re,this.logger.info("Webcam Preview: ",re)}))})}getWebcamState(){return this.$webcamState.asObservable()}getWebcamPresent(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetWebcamPresent).pipe((0,p.U)(M=>(this.logger.info("GetWebcamPresent returns: ",M),M.present),M=>(this.logger.info("GetWebcamPresent error: ",M),!1)))}getWebcamEnable(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetWebcamEnable).pipe((0,p.U)(M=>(this.logger.info("GetWebcamEnable returns: ",M),M.status),M=>(this.logger.info("GetWebcamEnable error: ",M),!1)))}enableWebcam(M){this.bridgeService.executeCommand(u.Gh.Share.Shareserver.EnableWebcam,{status:M}).subscribe(Ce=>{this.logger.info("EnableWebcam returns: ",Ce),this.webcamInfo.enabled=M},Ce=>{this.logger.info("EnableWebcam error: ",Ce)})}getWebcamShown(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetWebcamShown).pipe((0,p.U)(M=>(this.logger.info("GetWebcamShown returns: ",M),M.shown),M=>(this.logger.info("GetWebcamShown error: ",M),!1)))}toggleWebcam(){this.bridgeService.executeCommand(u.Gh.Share.Shareserver.ToggleWebcam).subscribe(M=>{this.logger.info("ToggleWebcam returns: ",M),this.webcamInfo.enabled=!this.webcamInfo.enabled,this.$webcamState.next(this.webcamInfo.enabled)},M=>{this.logger.info("ToggleWebcam error: ",M)})}getWebcamPreviewState(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetWebcamPreviewState).pipe((0,p.U)(M=>(this.logger.info("GetWebcamPreviewState returns: ",M),M.enabled),M=>(this.logger.info("GetWebcamPreviewState error: ",M),!1)))}enableWebcamPreview(M){this.bridgeService.executeCommand(u.Gh.Share.Shareserver.EnableWebcamPreview,{enable:M}).subscribe(Ce=>{this.logger.info("EnableWebcamPreview returns: ",Ce)},Ce=>{this.logger.info("EnableWebcamPreview error: ",Ce)})}queueWebcamPreview(M){this.webcamInfo.queuePreview=M}getWebcamOverlaySettings(){this.bridgeService.executeCommand(u.Gh.Share.Shareserver.GetIndicatorOverlaySettings,{id:u.Yk.Share.Shareserver.IndicatorEnum.webcam}).subscribe(re=>{this.logger.info("GetIndicatorOverlaySettings returns: ",re),this.webcamInfo.position=re.position,this.webcamInfo.size=re.size},re=>{this.logger.info("GetIndicatorOverlaySettings error: ",re)})}setWebcamOverlaySettings(M,re){this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SetIndicatorOverlaySettings,{id:u.Yk.Share.Shareserver.IndicatorEnum.webcam,enable:this.webcamInfo.enabled,position:M,size:re}).subscribe(ke=>{this.logger.info("SetIndicatorOverlaySettings returns: ",ke),this.webcamInfo.position=M,this.webcamInfo.size=re},ke=>{this.logger.info("SetIndicatorOverlaySettings error: ",ke)})}getWebcamInfo(){return this.webcamInfo}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(h.ed),m.LFG(h.dF),m.LFG(o.y1),m.LFG(y.v),m.LFG(f.g))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})();var _t=e(91992),be=e(22663),pt=e(56816),Ot=e(86828),Kt=e(53803),nn=e(75428),tn=e(71435),Mn=e(43365);class Fn{constructor(Ut,M,re,Ce,ke=[]){this.id=Ut,this.name=M,this.isSelected=re,this.stackIdx=Ce,this.controls=ke}}class yt{constructor(){this.filters=[],this.selectedFilterCount=0,this.upButtonDisabled=!0,this.downButtonDisabled=!0}moveSelectionUp(){const Ut=this.filters.length,M=new Set;for(let re=Ut-2;re>=0;re--)this.filters[re].isSelected&&!this.filters[re+1].isSelected&&(this.swapFilters(re,re+1),M.add(re),M.add(re+1));return M}moveSelectionDown(){const Ut=this.filters.length,M=new Set;for(let re=1;re<Ut;re++)this.filters[re].isSelected&&!this.filters[re-1].isSelected&&(this.swapFilters(re,re-1),M.add(re),M.add(re-1));return M}deleteSelection(){const Ut=this.getIndicesOfSelection();return(0,Se.remove)(this.filters,function(M){return M.isSelected}),this.selectedFilterCount=this.selectedFilterCount-Ut.length,Ut.reverse()}filterClicked(Ut,M){Ut.isSelected!==M&&(M?this.selectedFilterCount++:this.selectedFilterCount--),Ut.isSelected=M}getIndicesOfSelection(){const Ut=[];return this.filters.forEach((M,re,Ce)=>{M.isSelected&&Ut.push(re)}),Ut}getSelectedFilters(){return this.filters.filter(Ut=>Ut.isSelected)}swapFilters(Ut,M){if(Ut<0||Ut>=this.filters.length||M<0||M>=this.filters.length)return;let re;re=this.filters[Ut],this.filters[Ut]=this.filters[M],this.filters[M]=re,this.filters[Ut].stackIdx=Ut,this.filters[M].stackIdx=M}deserialize(Ut){if(!Ut.filters)return!1;const M=this;return M.selectedFilterCount=Ut.selectedFilterCount,M.upButtonDisabled=Ut.upButtonDisabled,M.downButtonDisabled=Ut.downButtonDisabled,Ut.filters.forEach((re,Ce)=>{const ke=new Fn(re.id,re.name,re.isSelected,re.stackIdx,re.controls);M.filters[Ce]=ke}),!0}}class Ht{constructor(Ut,M){this.filterStack=new yt,this.id=Ut,this.altText=M,this.slotName=void 0}deserialize(Ut){if(!Ut.filterStack)return!1;const M=this;return M.id=Ut.id,M.altText=Ut.altText,M.slotName=Ut.slotName,M.slotHotkey=Ut.slotHotkey,M.filterStack.deserialize(Ut.filterStack)}}class Ue{constructor(Ut){this.previewAvailable=!1,this.id=Ut}}class Mt{constructor(Ut){this.lastSlotIdx=0,this.slots=this.createEmptySlots(Ut),2===Ut&&(this.lastSlotIdx=1)}createEmptySlots(Ut){const M=[];for(let re=0;re<Ut;re++){const Ce=0===re?"settings.None":re.toString();M.push(new Ht(re,Ce))}return M}deserialize(Ut){const M=this;if(!Ut.slots||Ut.slots.length!==M.slots.length)return!1;let re;return M.lastSlotIdx=Ut.lastSlotIdx,M.slots.every((Ce,ke)=>(re=Ce.deserialize(Ut.slots[ke]),re)),re}}class ft{constructor(){this.anselSlotsInfo=new Mt(2),this.modsSlotsInfo=new Mt(4)}deserialize(Ut){return!(!Ut.anselSlotsInfo||!Ut.modsSlotsInfo)&&(this.anselSlotsInfo.deserialize(Ut.anselSlotsInfo)&&this.modsSlotsInfo.deserialize(Ut.modsSlotsInfo))}}class st{constructor(){this.filterPresets={}}deserialize(Ut){if(!Ut.filterPresets)return!1;const M=this;let re;return Object.keys(Ut.filterPresets).every(Ce=>(M.filterPresets[Ce]=new ft,re=M.filterPresets[Ce].deserialize(Ut.filterPresets[Ce]),re)),re}}var Et=(()=>{return(qe=Et||(Et={})).anselEnabledResponse="anselEnabledResponse",qe.anselEnabledState="anselEnabledState",qe.procInfo="procInfo",qe.captureTypesList="captureTypesList",qe.sdkIntegration="sdkIntegration",qe.rollRange="rollRange",qe.fovRange="fovRange",qe.setRollFovResponse="setRollFovResponse",qe.screenResolution="screenResolution",qe.highResResolutions="highResResolutions",qe.panoramaResolutions="panoramaResolutions",qe.captureShotStarted="captureShotStarted",qe.captureShotProgress="captureShotProgress",qe.captureShotFinished="captureShotFinished",qe.captureShotProcessingFinished="captureShotProcessingFinished",qe.captureShotCancel="captureShotCancel",qe.features="features",qe.filtersList="filtersList",qe.resetFilter="resetFilter",qe.insertFilter="insertFilter",qe.removeFilter="removeFilter",qe.moveFilter="moveFilter",qe.filterStackInfo="filterStackInfo",qe.filterDetails="filterDetails",qe.setFilterAttribute="setFilterAttribute",qe.setFovResponse="setFovResponse",qe.setRollResponse="setRollResponse",qe.fovValue="fovValue",qe.resetEntireStack="resetEntireStack",qe.nvCameraReady="nvCameraReady",qe.anselStatusReport="anselStatusReport",qe.ngxAIUpResProgress="ngxAIUpResProgress",qe.ngxAIUpResCaptureDone="ngxAIUpResCaptureDone",qe.cancelPendingOperations="cancelPendingOperations",Et;var qe})(),Ee=(()=>{return(qe=Ee||(Ee={}))[qe.slider=1]="slider",qe[qe.boolean=2]="boolean",qe[qe.button=3]="button",qe[qe.list=4]="list",qe[qe.edit=5]="edit",qe[qe.label=6]="label",qe[qe.pulldown=7]="pulldown",qe[qe.radiobutton=9]="radiobutton",Ee;var qe})(),dt=(()=>{return(qe=dt||(dt={})).HotKey="HK",qe.Ui="UI",dt;var qe})(),kt=(()=>{return(qe=kt||(kt={})).Top="Top",qe.Bottom="Bottom",kt;var qe})(),Zt=(()=>{return(qe=Zt||(Zt={})).MoveUp="MoveUp",qe.MoveDown="MoveDown",qe.Add="Add",qe.Delete="Delete",qe.Clicked="Clicked",qe.ApplyStyle="ApplyStyle",Zt;var qe})(),dn=(()=>{return(qe=dn||(dn={})).Keyboard="Keyboard",qe.Mouse="Mouse",qe.Gamepad="Gamepad",dn;var qe})(),gn=(()=>{return(qe=gn||(gn={})).UpdateStyleFail="updateStyleFail",qe.ApplyStyleFail="applyStyleFail",qe.RemoveFilterSuccess="RemoveFilterSuccess",qe.CaptureFinished="CaptureFinished",qe.CaptureFailed="CaptureFailed",gn;var qe})(),jt=(()=>{return(qe=jt||(jt={})).SUCCESS="Success",qe.ERROR_RESTART="Error occured, please restart the game",qe.ERROR_SUPPORTED_GAME="Supported game required",qe.ERROR_SESSION_NOT_ALLOWED="Session not allowed",qe.ERROR_TIMEOUT="Timeout has occurred",qe.ERROR_SYSTEM_OFFLINE="System is offline",jt;var qe})();const En={GPUArchitecture:"0x00000160",ExGPUArchImplementation:[8,7],OSBuildNumber:17134};var Pn=(()=>{return(qe=Pn||(Pn={}))[qe.KeyZ=0]="KeyZ",qe[qe.KeyX=1]="KeyX",qe[qe.KeyY=2]="KeyY",qe[qe.KeyW=3]="KeyW",qe[qe.KeyS=4]="KeyS",qe[qe.KeyA=5]="KeyA",qe[qe.KeyD=6]="KeyD",Pn;var qe})();let Ln=(()=>{class qe{constructor(M,re,Ce,ke,tt,ut,Ft,zt,$t,fn,Jt,yn,An,Pt,Ke,Pe,it,Lt,Dt){this.injector=M,this.igoConfig=re,this.loggingService=Ce,this.bridgeService=ke,this.hotkeyService=tt,this.oscDisplayService=ut,this.translateService=Ft,this.shadowPlayService=zt,this.galleryService=$t,this.localeService=fn,this.telemetryService=Jt,this.oscNotificationService=yn,this.dialogHelperService=An,this.dbService=Pt,this.endpointFactory=Ke,this.networkStatusService=Pe,this.systemInfoService=it,this.gfnInfoService=Lt,this.experienceControlService=Dt,this.gfnRTSPAccountedLatency=3e3,this.nvCameraStrictTimeout=250,this.nvCameraDefaultTimeout=2e3,this.nvCameraRelaxedTimeout=15e3,this.throttleDuration=500,this.dbStorageName="NvCamera",this.filterPresetsStorageKeyName="FilterPresets_v1",this.captureEnhanceSwitchKeyName="CaptureEnhanceSwitch",this.previewSupported=!0,this.freestylePreviewPrefix="Preview_",this.freestylePreviewExtension=".png",this.cmsBlackListDataUrl="https://static.nvidiagrid.net/titles/nvidiatech",this.previewInProgress=!1,this.isNvCameraEnabled=!1,this.isGameFilterEnabled=!1,this.isPhotoModeEnabled=!1,this.isRedirectionEnable=!1,this.notifications$=new i.xQ,this.currentUIMode=void 0,this.currentProcessInfo=void 0,this.cmsRequestOptions={includeRequestId:!0},this.currentGameStreamInfo=void 0,this.currentGFEGameInfo=void 0,this.currentFreestyleGameInfo=void 0,this.systemInfo=void 0,this.isDevServer=!1,this.freestyleBlacklistedCmsidArray=[],this.filterPresetsData=void 0,this.isModsAppliedCurrently=!1,this.isAIUpresSupported=void 0,this.isNvCameraReady=!1,this.nvcameraOperationUnderProgress=!1,this.uiRunning=new D.X(!1),this.cachedFeaturesAvailable=void 0,this.currentGameSlots=void 0,this.sourceTrigger=dt.HotKey,this.snackBarRef=void 0,this.restartRequired=!1,this.statusOfCaptureEnhance=!0,this.isSystemOnline=!1,this.nvCameraTimedOut=!1,this.gameFilterDisable=new D.X(!0),this.photoModeDisable=new D.X(!0),this.previewPaths=[],this.panningUsed=!1,this.panningWithGC=!1,this.panningWithKB=!1,this.panningWithMouse=!1,this.usedController=!1,this.usedKeyboard=!1,this.usedMouse=!1,this.menuLaunchTime=0,this.DDVersion="0.0",this.isAppStartedReceived=!1,this.slotsUsed=new Set,this.navigationInputDevice={KEYBOARD:!1,MOUSE:!1,GAMEPAD:!1},this.dialogRef=void 0,this.alertDialogData={title:"nvcamera.GameFilter",query:"",queryParam:{arg:""},action1:void 0,action2:void 0,spinner:void 0,progressBar:void 0,progressPercentage:void 0},this.preResetSessionData={uiMode:void 0,modsApplied:!1,currentGameInfo:void 0},this.appConfig=null,this.streamerStateSubscription=void 0,this.featureResult={gameFilterSupport:!1,photoModeSupport:!1},this.chromaDBResult=void 0,this.logger=this.loggingService.getLogger("NvCameraService"),this.dBStore=this.dbService.getGlobalStore(this.dbStorageName)}get currentGameInfo(){if(this.igoConfig.GFNCefClient){const M=this.gfnInfoService.getstreamerConfig();return this.currentGameStreamInfo={procId:void 0,cmsId:null==M?void 0:M.cmsId,drsName:void 0,drsProfileName:void 0,shortName:null==M?void 0:M.shortName,drsWhitelist:void 0},this.logger.info("Current Streaming Game:",this.currentGameStreamInfo),this.currentGameStreamInfo}return this.currentGFEGameInfo}init(){return this.logger.info("Initialize , feature support: ",this.igoConfig.NvCameraFeaturesEnabled),this.igoConfig.GFNCefClient&&(this.nvCameraStrictTimeout+=this.gfnRTSPAccountedLatency,this.nvCameraDefaultTimeout+=this.gfnRTSPAccountedLatency,this.nvCameraRelaxedTimeout+=this.gfnRTSPAccountedLatency,this.appConfig=this.injector.get(fe.VKt),this.appConfig||this.logger.info("ERROR:: Failed to obtain appConfig")),this.getSystemInfo().subscribe(M=>{this.logger.info("System Info: ",M)}),this.updateStreamerState(),this.checkFeatureSupport().toPromise().then(M=>(this.logger.info("Photo Mode supported = ",this.isPhotoModeSupported()),this.logger.info("Game Filter supported = ",this.isGameFilterSupported()),this.logger.info("initialized"),!0),M=>(this.logger.error("failed to initialize, error: ",M.message),!1))}queryChromaDB(){return this.chromaDBResult?(this.logger.info("Skipping Chroma query, already populated:",this.chromaDBResult),(0,w.of)(this.chromaDBResult)):this.isChromaApproved()}isChromaApproved(){var M,re;return this.isDevServer?(this.logger.info("Skipping launch checks, isDevServer: ",this.isDevServer),this.chromaDBResult={gameFilterSupport:!0,photoModeSupport:!0},(0,w.of)(this.chromaDBResult)):(null===(M=this.currentGameInfo)||void 0===M?void 0:M.cmsId)?this.gfnInfoService.getAppMetadataUsingCmsId(null===(re=this.currentGameInfo)||void 0===re?void 0:re.cmsId).pipe((0,p.U)(Ce=>(this.logger.info("isFreestyleSupported: ",Ce.nvidiaTech.FREESTYLE),this.logger.info("isAnselSupported: ",Ce.nvidiaTech.ANSEL),this.chromaDBResult={gameFilterSupport:Ce.nvidiaTech.FREESTYLE,photoModeSupport:Ce.nvidiaTech.ANSEL},this.chromaDBResult)),(0,t.K)(Ce=>(this.logger.error(`Unable to obtain game meta data ${Ce}`),this.chromaDBResult={gameFilterSupport:!0,photoModeSupport:!0},(0,w.of)(this.chromaDBResult)))):(this.logger.error("CmsId not available to query"),(0,w.of)(void 0))}isFeatureAvailable(){if(this.isSystemOnline=this.networkStatusService.isOnline,this.isSystemOnline)return this.queryChromaDB().pipe((0,p.U)(M=>{if(this.featureResult=M,this.featureResult.gameFilterSupport||this.featureResult.photoModeSupport)if(!this.isNvCameraReady&&this.isAppStartedReceived)this.logger.info("Checking if nvcamera is ready"),this.checkNvCameraReady();else if(this.isNvCameraReady)this.setAnselFreestyleState();else{const re="NvCamera is not ready";this.featureResult.gameFilterSupport&&this.sendFeatureDisableErrorTelemetry(S.AN.GameFilter,S.$R.featureNotAvailable,re),this.featureResult.photoModeSupport&&this.sendFeatureDisableErrorTelemetry(S.AN.PhotoMode,S.$R.featureNotAvailable,re)}return this.featureResult}),(0,t.K)(M=>(this.logger.error("Unable to get chroma results, using defaults."+M),this.featureResult={gameFilterSupport:!0,photoModeSupport:!0},(0,w.of)(this.featureResult))))}isGameFilterSupported(){return this.isNvCameraEnabled&&this.isGameFilterEnabled}isPhotoModeSupported(){return this.isNvCameraEnabled&&this.isPhotoModeEnabled}isPhotoModeLiteSupported(){return this.isNvCameraEnabled&&this.isPhotoModeEnabled&&!this.igoConfig.GFNCefClient}listenNotification(M){return this.notifications$.asObservable().pipe((0,ue.h)(re=>M.some(Ce=>!!re[Ce])))}launchPhotoModeMenu(M=dt.HotKey){this.logger.info("launchPhotoModeMenu"),this.isPhotoModeSupported()?(this.nvcameraOperationUnderProgress&&this.logger.info("Nvcamera operation underway, cancel menu launch"),this.currentUIMode=S.AN.PhotoMode,this.sourceTrigger=M,this.menuLaunchTime=Date.now(),this.tryLaunchMenu(u.Yk.Common.Nvcamera.FeaturesSupported.sdk).subscribe(()=>{this.logger.info("launchPhotoModeMenu successfull, AI Upres supported",this.isAIUpresSupported)},re=>{this.errorHandlingForLaunchMenu(u.Yk.Common.Nvcamera.FeaturesSupported.sdk,re.message),this.logger.error("launchPhotoModeMenu error: ",re.message)})):this.logger.info("Photo Mode not supported, should not be here")}launchGameFilterMenu(M=dt.HotKey){this.logger.info("launchGameFilterMenu"),this.isGameFilterSupported()?(this.nvcameraOperationUnderProgress&&this.logger.info("Nvcamera operation underway, cancel menu launch"),this.currentUIMode=S.AN.GameFilter,this.sourceTrigger=M,this.menuLaunchTime=Date.now(),this.tryLaunchMenu(u.Yk.Common.Nvcamera.FeaturesSupported.mods).subscribe(()=>{this.logger.info("launchGameFilterMenu successful")},re=>{this.errorHandlingForLaunchMenu(u.Yk.Common.Nvcamera.FeaturesSupported.mods,re.message),this.logger.error("launchGameFilterMenu error: ",re.message)})):this.logger.info("Game Filter not supported, should not be here")}postMenuClose(M,re=!1){this.currentUIMode=void 0,this.isModsAppliedCurrently=re,this.telemetryService.setModsActiveStatus(re),this.currentGameInfo&&(this.telemetryService.sendAnselFreestyleSession(M,Date.now()-this.menuLaunchTime,this.navigationInputDevice.KEYBOARD,this.navigationInputDevice.MOUSE,this.navigationInputDevice.GAMEPAD,this.currentGameInfo.cmsId.toString(),this.currentGameInfo.shortName,this.currentGameInfo.drsName,this.currentGameInfo.drsProfileName,this.panningUsed,this.panningWithKB,this.panningWithMouse),this.sendAnselFreestyleFiltersTelemetry(M))}closeMenu(M,re=!1){return(0,w.of)(M).pipe((0,l.zg)(Ce=>{if(Ce===S.AN.GameFilter)return(0,w.of)(u.Yk.Common.Nvcamera.AnselStatusEnum.ok);let ke;return this.currentUIMode=void 0,this.isModsAppliedCurrently?(ke=this.currentGameSlots.modsSlotsInfo.lastSlotIdx,re=!0,this.logger.info("reapplying mods after photo mode session")):ke=0,this.applySlot(ke,!0,S.AN.GameFilter)}),(0,t.K)(Ce=>(this.logger.error("error while closing the menu: ",Ce),(0,w.of)(u.Yk.Common.Nvcamera.AnselStatusEnum.ok))),(0,t.K)(Ce=>(this.logger.error("applySlot failed",Ce),(0,w.of)(Ce))),(0,l.zg)(()=>this.configureNvCameraSession(!1,!1,re,this.nvCameraDefaultTimeout)),(0,E.b)(()=>{this.postMenuClose(M,re)}),(0,t.K)(Ce=>{throw this.postMenuClose(M,re),Ce}))}getFilterList(){return this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.SetFilter,{enable:!1},Et.filtersList,this.nvCameraRelaxedTimeout)}setFilter(M,re,Ce,ke){const tt=this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.SetFilter,{enable:M,stackId:re,filterId:Ce},Et.filterDetails,this.nvCameraRelaxedTimeout).pipe((0,_t.B)());return this.customizeAndShowAlert(ke,Zt.Add),tt}customizeAndShowAlert(M,re){if(this.dialogRef)this.logger.error("Something messed up, should not be here, current dialog is already up");else{let Ce,ke;if(ke=this.getCurrentModSlotName(),re===Zt.MoveUp||re===Zt.MoveDown||re===Zt.Add||re===Zt.Delete)this.currentUIMode===S.AN.PhotoMode||this.currentUIMode===S.AN.PhotoModeLight?(Ce="nvcamera.UpdatingFilters",ke=""):ke?Ce="commonLabels.Updating":(Ce="nvcamera.UpdatingStyle",ke=this.getCurrentSlotIndex());else{if(re!==Zt.ApplyStyle)return;this.currentUIMode===S.AN.PhotoMode||this.currentUIMode===S.AN.PhotoModeLight?(Ce="nvcamera.ApplyingFilters",ke=""):ke?Ce="commonLabels.Applying":(Ce="nvcamera.ApplyingStyle",ke=this.getCurrentSlotIndex())}this.showAlert(void 0,Ce,ke,"confirmation.cancel",void 0,!0,!1,"indeterminate",M,{next:ut=>{if(ut===se.DX.Action1){this.logger.info("User cancelled the ongoing filter operation : ",ut);this.notifications$.next({cancelPendingOperations:{}}),this.closeAlert()}},error:ut=>{this.logger.error("failed in showAlert",ut),this.closeAlert()},complete:()=>{this.closeAlert()}})}}showAlert(M,re,Ce,ke,tt,ut,Ft,zt,$t,fn){this.dialogRef||(this.alertDialogData.title=M||(this.currentUIMode===S.AN.PhotoMode?"nvcamera.PhotoMode":"nvcamera.GameFilter"),this.alertDialogData.query=re,this.alertDialogData.queryParam={arg:Ce},this.alertDialogData.action1=ke,this.alertDialogData.action2=tt,this.alertDialogData.spinner=ut,this.alertDialogData.progressBar=Ft,this.alertDialogData.progressPercentage=Ft&&"determinate"===zt,this.alertDialogData.progressMode=zt,this.dialogHelperService.openAlertDialog(this.alertDialogData).pipe((0,E.b)(Jt=>this.dialogRef=Jt),(0,l.zg)(Jt=>Jt.afterClosed()),(0,be.R)($t)).subscribe(fn))}closeAlert(){this.dialogRef&&(this.dialogRef.close(),this.dialogRef=void 0)}showSnack(M,re){let Ce,ke;if(this.closeAlert(),ke=this.getCurrentModSlotName(),M===gn.UpdateStyleFail)ke?Ce="snacks.UnableToUpdate":(Ce="snacks.UnableToUpdateStyle",ke=this.getCurrentSlotIndex());else if(M===gn.ApplyStyleFail)ke?Ce="snacks.UnableToApply":(Ce="snacks.UnableToApplyStyle",ke=this.getCurrentSlotIndex());else if(M===gn.RemoveFilterSuccess)ke=re,Ce="1"===ke?"snacks.RemovedFilter":"snacks.RemovedFilters";else{if(M!==gn.CaptureFailed)return;Ce="nvcamera.UnableToPhotograph",ke=void 0}this.translateService.get(Ce,{arg:ke}).subscribe(tt=>{this.snackBarRef=this.dialogHelperService.openSnackBar(tt)})}setFilterAttribute(M,re,Ce,ke,tt,ut){return ke===Ee.boolean&&(ut.forEach((zt,$t)=>{ut[$t]=!!zt}),tt="bool"),this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.SetFilterAttribute,{filter:M,controlId:Ce,controlType:ke,stackId:re,dataType:tt,values:ut},Et.setFilterAttribute,this.nvCameraDefaultTimeout).pipe((0,p.U)(zt=>{if(zt.setFilterAttribute.status)return zt.setFilterAttribute.status;throw new Error(u.Yk.Common.Nvcamera.AnselStatusEnum.failed)}))}setFilterWithAttributes(M){return this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.SetFilter,{enable:!0,stackId:M.stackIdx,filterId:M.id},Et.filterDetails,this.nvCameraRelaxedTimeout).pipe((0,l.zg)(re=>(0,F.D)(re.filterDetails.controls)),(0,pt.b)(re=>this.setFilterAttribute(M.id,M.stackIdx,re.id,Ee[re.controlType],re.dataType,[M.controls[re.id].currentValue])),(0,t.K)(re=>(this.logger.error("setFilterAttribute failed: ",re),(0,w.of)(re))),(0,Ot.h)(1))}resetEntireStack(){return this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.ResetFilterStack,{},Et.resetEntireStack,this.nvCameraRelaxedTimeout).pipe((0,p.U)(M=>{if(M.resetEntireStack.status)return M.resetEntireStack.status;throw new Error(u.Yk.Common.Nvcamera.AnselStatusEnum.failed)}))}removeFilter(M){return this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.RemoveFilter,{stackId:M},Et.removeFilter,this.nvCameraRelaxedTimeout).pipe((0,p.U)(re=>{if(re.removeFilter.status)return re.removeFilter.status;throw new Error(u.Yk.Common.Nvcamera.AnselStatusEnum.failed)}))}resetFilterControls(M,re){return this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.ResetFilter,{resetAll:M,stackId:re},Et.resetFilter,this.nvCameraRelaxedTimeout).pipe((0,p.U)(Ce=>{if(Ce.resetFilter.status)return Ce.resetFilter.status;throw new Error(u.Yk.Common.Nvcamera.AnselStatusEnum.failed)}))}setGridOfThirds(M){return this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.SetCameraGridOfThirds,{enableGoT:M})}getFreestyleWhitelisted(M){return this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.GetFreestyleWhitelisted,{profileName:M})}getCaptureTypes(){return this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.GetAnselCaptureTypes,{},Et.captureTypesList,this.nvCameraRelaxedTimeout)}getCaptureResolutions(M){let re;return re=M===u.Yk.Common.Nvcamera.CaptureTypes.regular||M===u.Yk.Common.Nvcamera.CaptureTypes.stereoRegular?Et.screenResolution:M===u.Yk.Common.Nvcamera.CaptureTypes.highRes?Et.highResResolutions:Et.panoramaResolutions,this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.GetCaptureResolutions,{captureType:M},re,this.nvCameraRelaxedTimeout)}getCameraRange(M,re){return this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.GetCameraRangeFovRoll,{getCameraRoll:M,getCameraFov:re},M?Et.rollRange:Et.fovRange,this.nvCameraRelaxedTimeout)}SetCameraControlFovRoll(M,re,Ce){return this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.SetCameraControlFovRoll,{setFovRollEnable:M,setRollValue:void 0!==re?Math.round(re):void 0,setFovValue:void 0!==Ce?Math.round(Ce):void 0},Et.setRollFovResponse,this.nvCameraRelaxedTimeout)}GetCameraControlFov(M){return this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.GetCameraControlFov,{setFovRollEnable:M},Et.fovValue,this.nvCameraRelaxedTimeout)}captureScreenshot(M,re){return this.igoConfig.GFNCefClient?this.shadowPlayService.captureCustomScreenshot("photoMode","placeholder.png",this.getActiveModsSlot(this.currentUIMode).id):new C.y(Ce=>{let tt,ut,Ft;M?(ut=[Et.ngxAIUpResProgress,Et.ngxAIUpResCaptureDone],Ft=u.Gh.Common.Nvcamera.StartNgxAIUpRes):(ut=[Et.captureShotStarted,Et.captureShotFinished,Et.captureShotProcessingFinished,Et.captureShotProgress,Et.anselStatusReport],Ft=u.Gh.Common.Nvcamera.CaptureScreenshot),tt=this.listenNotification(ut).pipe((0,Kt.V)(9e5)).subscribe(zt=>{Ce.next(zt),(zt.captureShotProcessingFinished&&!M||zt.ngxAIUpResCaptureDone)&&(tt.unsubscribe(),Ce.complete())},zt=>{this.logger.info("listenerCaptureShotFinished timed out"),Ce.error(zt),tt.unsubscribe()}),this.bridgeService.executeCommand(Ft,re).subscribe(zt=>{this.logger.info(Ft,"command issued: ",zt)},zt=>{this.logger.info("nvcameraRequestWithWait",Ft," failed"),Ce.error(zt),tt.unsubscribe()})})}cancelCurrentCapture(){return this.igoConfig.GFNCefClient?(0,w.of)(u.Yk.Common.Nvcamera.AnselStatusEnum.ok):this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.CancelCapture,{},Et.captureShotCancel,this.nvCameraRelaxedTimeout).pipe((0,p.U)(M=>{if(M.captureShotCancel.status)return M.captureShotCancel.status;throw new Error(u.Yk.Common.Nvcamera.AnselStatusEnum.failed)}))}applySlot(M,re=!1,Ce=S.AN.GameFilter){let ke;return this.logger.info("applyslot index:",M," for ",Ce),ke=Ce===S.AN.GameFilter?this.currentGameSlots.modsSlotsInfo:this.currentGameSlots.anselSlotsInfo,(re=(re=re||0===M)||!this.isModsAppliedCurrently)||ke.lastSlotIdx!==M?(2!==ke.slots.length&&(ke.lastSlotIdx=M),this.resetEntireStack().pipe((0,l.zg)(()=>0===M?(0,w.of)(u.Yk.Common.Nvcamera.AnselStatusEnum.ok):this.applyFilters(ke.slots[M].filterStack.filters,Zt.ApplyStyle)))):(this.logger.info("slot",M,"is already applied, skipping"),(0,w.of)(u.Yk.Common.Nvcamera.AnselStatusEnum.ok))}enableModsAndApplySlot(M){return this.logger.info("enableModsAndApplySlot index = ",M),this.nvcameraOperationUnderProgress=!0,this.tryStartNvCameraSession(u.Yk.Common.Nvcamera.FeaturesSupported.mods).pipe((0,l.zg)(()=>this.applySlot(M,!0)),(0,nn.g)(250),(0,l.zg)(()=>(this.isModsAppliedCurrently=!0,this.telemetryService.setModsActiveStatus(!0),this.configureNvCameraSession(!1,!1,!0,this.nvCameraDefaultTimeout))),(0,tn.x)(()=>{this.nvcameraOperationUnderProgress=!1}))}applyFilters(M,re){if(M.length>0){const Ce=(0,F.D)(M).pipe((0,pt.b)(ke=>this.setFilterAndAttributes(ke,ke.stackIdx)),(0,be.R)(this.listenNotification([Et.cancelPendingOperations])),(0,t.K)(ke=>(this.logger.error("setFilterAndAttributes failed: ",ke),(0,w.of)(ke))),(0,Ot.h)(1),(0,_t.B)());return this.customizeAndShowAlert(Ce,re),Ce}return(0,w.of)(u.Yk.Common.Nvcamera.AnselStatusEnum.ok)}checkPreviewEnabled(){return!(this.currentUIMode!==S.AN.GameFilter||!this.previewSupported)||(this.logger.info("Freestyle previews not enabled."+this.currentUIMode),!1)}showPreviewImg(M,re,Ce,ke){if(!this.checkPreviewEnabled())return;if(void 0===M){const ut=this.getActiveModsSlot(this.currentUIMode);if(void 0===ut)return void this.logger.info("Active mod slot cannot be undefined");M=ut.id}const tt=this.slotsPreviewInfo[M];void 0===ke&&(ke=tt.previewPath),this.galleryService.getThumbnailForFile(ke,re,Ce).subscribe(ut=>{if(this.resetPreviewStatus(),void 0===ut)return this.logger.info("Image thumbnail cannot be undefined."),void(tt.previewAvailable=!1);this.logger.info("Freestyle preview available for slot: "+tt.id),tt.previewImgData=ut,tt.previewAvailable=!0},ut=>{this.logger.info("Freestyle preview not available for slot: "+tt.id),tt.previewAvailable=!1,this.resetPreviewStatus()})}resetPreviewStatus(){this.previewInProgress&&(this.logger.info("Freestyle preview shot completed."),this.previewInProgress=!1)}setPreviewDetails(M,re,Ce){this.logger.info("Setting preview details"),this.checkPreviewEnabled()&&(this.slotsPreviewInfo||this.initializePreviewInfo(),this.shadowPlayService.getFreestylePreviewBasePath().subscribe(ke=>{const tt=ke.previewBasePath;this.logger.info("Freestyle preview base folder"+tt);for(const ut of M)ut.id&&(this.slotsPreviewInfo[ut.id].previewPath=tt+"\\"+this.freestylePreviewPrefix+ut.id+this.freestylePreviewExtension,this.logger.info("Preview path for Slot: "+ut.id+" is "+this.slotsPreviewInfo[ut.id].previewPath),this.previewPaths.push(this.slotsPreviewInfo[ut.id].previewPath));this.sendPreviewPathToGalleryPlugin()},ke=>{this.logger.info("Error occured in setting preview details :"+ke)}))}sendPreviewPathToGalleryPlugin(){this.bridgeService.executeCommand(u.Gh.Common.Gallery.PreviewPathInfo,{paths:this.previewPaths}).subscribe(()=>{this.previewPaths=[]})}updatePreview(M,re){if(!this.checkPreviewEnabled())return;const Ce=this.getActiveModsSlot(this.currentUIMode);if(void 0===Ce)return void this.logger.info("Active mod slot cannot be undefined.");if(0===Ce.id||this.previewInProgress)return;this.previewInProgress=!0;const ke=this.freestylePreviewPrefix+Ce.id+this.freestylePreviewExtension;this.logger.info("Preview screenshot triggered for Slot "+Ce.id),this.triggerPreview(ke,Ce).subscribe(tt=>{this.showPreviewImg(Ce.id,M,re,tt.filePath)},tt=>{this.logger.info("Error in capturing screenshot for preview"),this.previewInProgress=!1})}triggerPreview(M,re){return this.shadowPlayService.captureCustomScreenshot("freestyle",M,re.id)}getAvailableFeatureSet(){return this.cachedFeaturesAvailable?(0,w.of)(this.cachedFeaturesAvailable):this.queryFeatureSet(this.isNvCameraReady?this.nvCameraDefaultTimeout:this.nvCameraStrictTimeout)}queryFeatureSet(M){return this.cachedFeaturesAvailable={[u.Yk.Common.Nvcamera.FeaturesSupported.mods]:!1,[u.Yk.Common.Nvcamera.FeaturesSupported.sdk]:!1,[u.Yk.Common.Nvcamera.FeaturesSupported.allowOffline]:!1},this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.GetFeatureSet,{},Et.features,M).pipe((0,p.U)(re=>(re.features.featureSet.includes(u.Yk.Common.Nvcamera.FeaturesSupported.sdk)&&(this.cachedFeaturesAvailable[u.Yk.Common.Nvcamera.FeaturesSupported.sdk]=!0),re.features.featureSet.includes(u.Yk.Common.Nvcamera.FeaturesSupported.mods)&&(this.cachedFeaturesAvailable[u.Yk.Common.Nvcamera.FeaturesSupported.mods]=!0),re.features.featureSet.includes(u.Yk.Common.Nvcamera.FeaturesSupported.allowOffline)&&(this.cachedFeaturesAvailable[u.Yk.Common.Nvcamera.FeaturesSupported.allowOffline]=!0),this.cachedFeaturesAvailable)),(0,t.K)(re=>(0,w.of)(this.cachedFeaturesAvailable)))}configureNvCameraSession(M,re,Ce,ke){return this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.SetAnselEnable,{sessionEnable:M,pauseOnEnable:re,leaveFiltersOn:Ce},Et.anselEnabledResponse,ke).pipe((0,E.b)(()=>{M||this.saveFilterPresetsData()}),(0,p.U)(tt=>{if(tt.anselEnabledResponse.capture)return tt.anselEnabledResponse.capture;throw new Error(u.Yk.Common.Nvcamera.AnselStatusEnum.failed)}))}getNvCameraSessionState(){return this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.GetAnselEnabledStatus,{},Et.anselEnabledState,this.nvCameraRelaxedTimeout).pipe((0,p.U)(M=>{if(void 0!==M.anselEnabledState.status)return M.anselEnabledState.status;throw new Error(u.Yk.Common.Nvcamera.AnselStatusEnum.failed)}))}getProcessInfo(){return this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.GetProcessInfo,{},Et.procInfo,this.nvCameraRelaxedTimeout).pipe((0,p.U)(M=>M),(0,t.K)(M=>(this.logger.error("GetProcessInfo failed:",M),(0,w.of)(void 0))))}getNvCameraSettings(){return this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.GetNvCameraConfig)}getFeatureToggleStatus(M){if(!this.igoConfig.GFNCefClient)return(0,w.of)(!0);let re,Ce;if(M===S.AN.GameFilter)re=Mn.Qu.GxTargetGetFreestyleFeature,Ce=this.appConfig.gxTarget.experiences.isFreestyleEnabled;else{if(M!==S.AN.PhotoMode)return(0,w.of)(!0);re=Mn.Qu.GxTargetGetAnselFeature,Ce=Ce=this.appConfig.gxTarget.experiences.isAnselEnabled}return this.experienceControlService.getCloudVariable(Ce,{},{useCache:!1},Mn.Z4.GxTargetGetCloudVariable,re).pipe((0,p.U)(ke=>(this.logger.info("GxTargetGet FeatureName: "+M+" enable status: ",ke.value),ke.value)),(0,t.K)(ke=>(this.logger.info("GxTargetGetFeatureEnabled fetch error",ke),(0,w.of)(!0))))}checkFeatureSupport(){return this.isPhotoModeEnabled=this.igoConfig.PhotoModeEnabled,this.isGameFilterEnabled=this.igoConfig.GameFilterEnabled,this.isNvCameraEnabled="DISABLED"!==this.igoConfig.NvCameraFeaturesEnabled,this.getFeatureToggleStatus(S.AN.GameFilter).pipe((0,l.zg)(M=>(this.isGameFilterEnabled=this.isGameFilterEnabled&&M,this.getFeatureToggleStatus(S.AN.PhotoMode))),(0,l.zg)(M=>(this.isPhotoModeEnabled=this.isPhotoModeEnabled&&M,this.isNvCameraEnabled=this.isNvCameraEnabled&&(this.isPhotoModeEnabled||this.isGameFilterEnabled),this.loadCaptureEnhanceSwitchValue())),(0,l.zg)(M=>(this.statusOfCaptureEnhance=M||!0,this.igoConfig.GFNCefClient?(0,w.of)(!0):(this.regKeyStatusForNvCamera=this.statusOfCaptureEnhance&&this.isNvCameraEnabled,this.configureNvcameraSettings(this.regKeyStatusForNvCamera,this.regKeyStatusForNvCamera)))),(0,l.zg)(M=>(this.logger.info("configureNvcameraSettings response: ",M),this.registerNotifications(),this.setHotkeyForSlotToggle(this.isGameFilterSupported()))),(0,l.zg)(()=>void 0!==this.isAIUpresSupported?(0,w.of)(this.isAIUpresSupported):this.getAiUpresSupported()),(0,p.U)(M=>(this.isAIUpresSupported=M,this.logger.info("AIUpres supported",this.isAIUpresSupported),!0)),(0,t.K)(M=>{throw this.logger.error("checkFeatureSupport failed: ",M),M}))}configureNvcameraSettings(M,re){return this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.SetNvCameraConfig,{ipcEnable:M,freestyleEnable:re}).pipe((0,p.U)(Ce=>(this.logger.info("ConfigureNvcameraSettings returned: ",Ce),!0)),(0,t.K)(Ce=>(this.logger.info("ConfigureNvcameraSettings returned: ",Ce),(0,w.of)(!1))))}changeUIRunning(M){this.uiRunning.next(M)}checkAndLaunchPhotoModeMenu(){this.igoConfig.GFNCefClient&&this.currentUIMode!==S.AN.PhotoMode?this.isSystemOnline&&this.queryChromaDB().subscribe(M=>{M.photoModeSupport&&this.togglePhotoModeUI()}):this.togglePhotoModeUI()}togglePhotoModeUI(){if(this.logger.info("UI running status",this.uiRunning.getValue()),this.uiRunning.getValue()){if(this.currentUIMode===S.AN.GameFilter){const M=this.uiRunning.subscribe(re=>{re||(this.launchPhotoModeMenu(),M.unsubscribe())})}this.oscDisplayService.closeOSC()}else this.launchPhotoModeMenu()}registerHotkey(M,re){this.hotkeyService.listen(M).pipe((0,ct.p)(this.throttleDuration)).subscribe(()=>{re()})}registerNotifications(){this.isNvCameraEnabled&&(this.isPhotoModeSupported()&&this.registerHotkey(o.sW.OpenAnsel,this.checkAndLaunchPhotoModeMenu.bind(this)),this.isGameFilterSupported()&&(this.registerHotkey(o.sW.FreeStyleToggleStyle1,this.applyOrToggleStyleAt.bind(this,1)),this.registerHotkey(o.sW.FreeStyleToggleStyle2,this.applyOrToggleStyleAt.bind(this,2)),this.registerHotkey(o.sW.FreeStyleToggleStyle3,this.applyOrToggleStyleAt.bind(this,3))),this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.NvCameraResponseNotification).subscribe(M=>{this.handleNotifications(M)}),this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.NvCameraFilterResponseNotification).subscribe(M=>{this.handleNotifications(M)}),this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.NgxAIUpResNotifications).subscribe(M=>{this.handleNotifications(M)}),this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.NvCameraUIControlNotificationData).subscribe(M=>{this.handleNotifications(M)}),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.RegisterGeneralNotifications).pipe((0,ue.h)(M=>!!M.gameExited)).subscribe(M=>{this.onGameExit(M)}),this.listenNotification([Et.nvCameraReady]).pipe((0,nn.g)(this.nvCameraDefaultTimeout)).subscribe(M=>{this.onNvCameraReady(M)}),this.getCmsData().subscribe())}applyOrToggleStyleAt(M){if(this.logger.info("Hotkey toggle style no ",M),this.nvcameraOperationUnderProgress)return void this.logger.info("Filter operations under progress, ignoring hotkey");if(this.uiRunning.getValue())return void this.logger.info("UI is up, ignoring hotkey");let re,Ce=!1;this.isModsAppliedCurrently&&this.currentGameSlots.modsSlotsInfo.lastSlotIdx===M?(re=this.enableModsAndApplySlot(0),this.previousStyleApplied=""):(re=this.checkSlotsForCurrentGame().pipe((0,l.zg)(ke=>this.enableModsAndApplySlot(M))),Ce=!0),re.subscribe(ke=>{this.logger.info("Status of applyOrToggleStyleAt = ",ke),Ce&&this.sendAnselFreestyleFiltersTelemetry(S.AN.GameFilter)},ke=>{this.logger.info("Error in applyOrToggleStyleAt. Error = ",ke),Ce&&(this.nvCameraTimedOut=!0,this.sendAnselFreestyleErrorTelemetry(S.NX.anselFreeStyle,S.AN.GameFilter))})}getHotkeyStringForSlot(M){switch(M){case 1:return this.hotkeyService.getHotkeyString(o.sW.FreeStyleToggleStyle1);case 2:return this.hotkeyService.getHotkeyString(o.sW.FreeStyleToggleStyle2);case 3:return this.hotkeyService.getHotkeyString(o.sW.FreeStyleToggleStyle3);default:return(0,w.of)(void 0)}}handleNotifications(M){this.logger.info("NvCamera Notification: ",M),this.notifications$.next(M)}saveFilterPresetsData(){!this.filterPresetsData||this.dBStore.setItem(this.filterPresetsStorageKeyName,JSON.stringify(this.filterPresetsData)).subscribe(()=>{this.logger.info("Filter presets data storage updated")},M=>{this.logger.error("Error while updating filter presets data storage: ",M)})}loadFilterPresetsData(){return this.filterPresetsData?(0,w.of)(!0):(this.filterPresetsData=new st,this.dBStore.getItem(this.filterPresetsStorageKeyName).pipe((0,p.U)(M=>(M?this.filterPresetsData.deserialize(JSON.parse(M))?this.logger.info("Filter presets data loaded from the storage"):(this.logger.error("Failed to parse stored filter presets data, stored data: ",JSON.stringify(M)),this.filterPresetsData=new st):this.logger.info("Filter presets data not found in the storage"),!0)),(0,t.K)(M=>(this.logger.error("Could not load filter presets data from the storage: ",JSON.stringify(M)),(0,w.of)(!0)))))}loadSlotsForCurrentGame(){return this.loadFilterPresetsData().pipe((0,E.b)(()=>{let M="";M=this.isDevServer?"devserver":this.igoConfig.GFNCefClient?this.currentGameInfo.cmsId.toString():this.currentProcessInfo.procPath,this.filterPresetsData.filterPresets[M]?this.logger.info("Saved filter presets loaded for the game",this.filterPresetsData):(this.logger.info("No saved filter presets found for the game"),this.filterPresetsData.filterPresets[M]=new ft),this.currentGameSlots=this.filterPresetsData.filterPresets[M]}))}getHotkeyStringForActiveSlot(){return this.isNvCameraReady?this.checkSlotsForCurrentGame().pipe((0,l.zg)(re=>this.currentGameSlots.modsSlotsInfo.lastSlotIdx>0?this.getHotkeyStringForSlot(this.currentGameSlots.modsSlotsInfo.lastSlotIdx):(0,w.of)(void 0))):(0,w.of)("None")}checkSlotsForCurrentGame(){return this.currentGameSlots?(0,w.of)(!0):this.getProcessInfo().pipe((0,ue.h)(M=>!!M),(0,l.zg)(M=>(this.currentProcessInfo=M[Et.procInfo],this.loadSlotsForCurrentGame())))}initializePreviewInfo(){if(!this.slotsPreviewInfo){this.slotsPreviewInfo=[];for(let M=0;M<=3;M++)this.slotsPreviewInfo.push(new Ue(M))}}deletePreviews(){if(this.slotsPreviewInfo)for(let M=0;M<=3;M++)this.slotsPreviewInfo[M].previewPath&&this.bridgeService.executeCommand(u.Gh.Common.Gallery.DeletePreview,{previewFilepath:this.slotsPreviewInfo[M].previewPath}).subscribe()}tryLaunchMenu(M){return this.nvcameraOperationUnderProgress=!0,this.tryStartNvCameraSession(M).pipe((0,l.zg)(()=>this.checkSlotsForCurrentGame()),(0,p.U)(()=>(this.logger.info("Launching UI Menu"),this.restartRequired=!1,M===u.Yk.Common.Nvcamera.FeaturesSupported.mods?this.oscDisplayService.openOSC("sidebar/nvcamera/game-filters",{showError:!1,errorType:jt.SUCCESS,nvCameraSessionExists:!0}):M===u.Yk.Common.Nvcamera.FeaturesSupported.sdk&&this.oscDisplayService.openOSC("sidebar/nvcamera/photo-mode",{UIMode:this.currentUIMode,isAIUpresEnabled:this.isAIUpresSupported,showError:!1,errorType:jt.SUCCESS}),!0)),(0,tn.x)(()=>{this.nvcameraOperationUnderProgress=!1}))}setNvcameraCmsInfo(){this.currentFreestyleGameInfo&&this.currentFreestyleGameInfo.cmsId&&this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.SetCMSInfo,{cmsId:this.currentFreestyleGameInfo.cmsId.toString(),shortName:this.currentFreestyleGameInfo.shortName}).subscribe()}getSystemInfo(){return this.systemInfo?(0,w.of)(this.systemInfo):(this.systemInfo={cpuName:"",gpuName:"",systemType:"",isOptimus:!1,osVersion:"",ddVersion:""},this.igoConfig.GFNCefClient?(0,w.of)(this.systemInfo):(0,xe.D)([this.systemInfoService.getSystemInfo(),this.systemInfoService.getOptimusStatus(),this.systemInfoService.getGenericInfo()]).pipe((0,p.U)(([M,re,Ce])=>{this.systemInfo.cpuName=M.CPUName;const ke=M.GPU.length;let tt=0;for(;tt<ke-1;tt++)this.systemInfo.gpuName+=M.GPU[tt].LongGPUName+", ";return this.systemInfo.gpuName+=M.GPU[tt].LongGPUName,this.systemInfo.osVersion=M.OSVersion,this.systemInfo.isOptimus="0"!==re,this.systemInfo.systemType=Ce.MoboType,this.systemInfo.ddVersion=Ce.DriverVersion,this.systemInfo}),(0,t.K)(M=>{this.logger.error("Error while fetching system info ",M);const re=this.systemInfo;return this.systemInfo=void 0,(0,w.of)(re)})))}checkFeatureLaunch(M){var re;let Ce=jt.SUCCESS;switch(this.isSystemOnline=this.networkStatusService.isOnline,this.currentGameInfo&&(this.igoConfig.GFNCefClient||(null===(re=this.currentFreestyleGameInfo)||void 0===re?void 0:re.procId)===this.currentGameInfo.procId)&&(this.currentFreestyleGameInfo=this.currentGameInfo),M){case S.AN.PhotoModeLight:case S.AN.GameFilter:if(this.isSystemOnline)return this.getBlacklistData(!0).pipe((0,p.U)(()=>(this.currentFreestyleGameInfo&&void 0!==this.currentFreestyleGameInfo.cmsId&&!this.freestyleBlacklistedCmsidArray.includes(this.currentFreestyleGameInfo.cmsId)?(this.logger.info("Game whitelisted in ChromaDB"),Ce=jt.SUCCESS):(this.logger.info("Game blacklisted in ChromaDB: ",this.currentFreestyleGameInfo),Ce=jt.ERROR_SUPPORTED_GAME),Ce)),(0,t.K)(ke=>(Ce=this.igoConfig.GFNCefClient?jt.ERROR_SYSTEM_OFFLINE:this.cachedFeaturesAvailable[u.Yk.Common.Nvcamera.FeaturesSupported.allowOffline]?jt.SUCCESS:jt.ERROR_SUPPORTED_GAME,(0,w.of)(Ce))));Ce=this.igoConfig.GFNCefClient?jt.ERROR_SYSTEM_OFFLINE:this.cachedFeaturesAvailable[u.Yk.Common.Nvcamera.FeaturesSupported.allowOffline]?jt.SUCCESS:jt.ERROR_SUPPORTED_GAME;break;case S.AN.PhotoMode:break;default:this.logger.error("Unknown feature: "+M)}return(0,w.of)(Ce)}nvcameraRequestWithWait(M,re,Ce,ke){return new C.y(tt=>{let ut;this.logger.info("command: ",M.method," params: ",re),ut=this.listenNotification([Ce]).pipe((0,Kt.V)(ke)).subscribe(Ft=>{tt.next(Ft),ut.unsubscribe(),tt.complete()},Ft=>{this.logger.error("nvcameraRequestWithWait ",M.method," timed out"),tt.error(Ft)}),this.bridgeService.executeCommand(M,re).subscribe(Ft=>{this.logger.info(M.method,"command issued: ",Ft)},Ft=>{this.logger.error("nvcameraRequestWithWait",M.method," failed"),tt.error(Ft),ut.unsubscribe()})})}enableNvCameraSession(){return this.configureNvCameraSession(!0,this.currentUIMode===S.AN.PhotoMode,!1,this.nvCameraDefaultTimeout).pipe((0,p.U)(re=>{const Ce=[u.Yk.Common.Nvcamera.AnselStatusEnum.ok,u.Yk.Common.Nvcamera.AnselStatusEnum.alreadyEnabled];if(Ce.push(this.currentUIMode===S.AN.PhotoMode?u.Yk.Common.Nvcamera.AnselStatusEnum.okAnsel:u.Yk.Common.Nvcamera.AnselStatusEnum.okModsOnly),Ce.includes(re))return!0;throw new Error(jt.ERROR_SESSION_NOT_ALLOWED)}))}tryStartNvCameraSession(M){return this.igoConfig.GFNCefClient?this.enableNvCameraSession():this.getAvailableFeatureSet().pipe((0,p.U)(re=>{if(this.cachedFeaturesAvailable[M])return M===u.Yk.Common.Nvcamera.FeaturesSupported.sdk?S.AN.PhotoMode:S.AN.GameFilter;if(M===u.Yk.Common.Nvcamera.FeaturesSupported.sdk&&this.cachedFeaturesAvailable[u.Yk.Common.Nvcamera.FeaturesSupported.mods]&&this.isPhotoModeLiteSupported())return this.currentUIMode=S.AN.PhotoModeLight,S.AN.PhotoModeLight;throw new Error(jt.ERROR_SUPPORTED_GAME)}),(0,l.zg)(re=>this.checkFeatureLaunch(re)),(0,E.b)(re=>{if(re!==jt.SUCCESS)throw new Error(re)}),(0,l.zg)(()=>this.enableNvCameraSession()))}onNvCameraReady(M){!this.statusOfCaptureEnhance||(M.nvCameraReady.deviceCreationCounter>0&&(this.logger.info("nvcamera ready notification received"),this.isNvCameraReady=!0,this.gameFilterDisable.next(!1),this.photoModeDisable.next(!1),this.queryFeatureSet(this.nvCameraRelaxedTimeout).subscribe()),this.getProcessInfo().pipe((0,ue.h)(re=>!!re),(0,l.zg)(re=>(this.currentProcessInfo=re[Et.procInfo],this.currentFreestyleGameInfo={procId:re[Et.procInfo].procId,cmsId:void 0,drsName:void 0,drsProfileName:void 0,shortName:void 0,drsWhitelist:!1},this.igoConfig.GFNCefClient?(0,w.of)(!1):this.loadSlotsForCurrentGame())),(0,ue.h)(re=>re),(0,l.zg)(()=>{const re=this.currentGameSlots.modsSlotsInfo.lastSlotIdx;return re>0?this.enableModsAndApplySlot(re).pipe((0,p.U)(Ce=>(this.logger.info("slot",re,"filters applied automatically"),this.sendAnselFreestyleFiltersTelemetry(S.AN.GameFilter,!0),Ce))):(0,w.of)(u.Yk.Common.Nvcamera.AnselStatusEnum.ok)})).subscribe(Y.Z,re=>{this.logger.error("failed to apply slot automatically: ",re.message)}))}resetState(M){const re=M.gameExited.exitAppPID;this.logger.info("currentProcessInfo:",this.currentProcessInfo),this.currentProcessInfo&&this.currentProcessInfo.procId!==re&&-1!==re?this.logger.info("gameExit ignored for Pid:",re):(this.igoConfig.GFNCefClient?(this.preResetSessionData.currentGameInfo=this.currentGameInfo,this.preResetSessionData.uiMode=this.currentUIMode,this.preResetSessionData.modsApplied=this.isModsAppliedCurrently):this.currentProcessInfo&&this.currentProcessInfo.procId===M.gameExited.exitAppPID&&(this.currentFreestyleGameInfo=void 0,this.freestyleBlacklistedCmsidArray=[]),this.cachedFeaturesAvailable=void 0,this.currentGameSlots=void 0,this.currentUIMode=void 0,this.isModsAppliedCurrently=!1,this.gameFilterDisable.next(!0),this.photoModeDisable.next(!0),this.isNvCameraReady=!1,this.currentProcessInfo=void 0,this.telemetryService.setModsActiveStatus(!1),this.saveFilterPresetsData(),this.restartRequired=!1,this.currentGFEGameInfo=void 0,this.currentGameStreamInfo=void 0,this.previewInProgress=!1,this.deletePreviews(),this.slotsPreviewInfo=void 0,this.chromaDBResult=void 0,this.isAppStartedReceived=!1)}onGameExit(M){return this.resetState(M)}togglePanning(){this.enableAnselRedirection(!this.isRedirectionEnable)}gfnMouseEvent(M,re,Ce,ke){return this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.MouseEventToNvcamera,{eventName:M,button:re,coordinateX:Ce,coordinateY:ke}).subscribe()}gfnKBEvent(M,re,Ce,ke){return this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.KeyboardEventToNvcamera,{eventName:M,keyCode:re,code:Ce,shiftKey:ke}).subscribe()}enableAnselRedirection(M,re,Ce){if(re=u.Yk.Common.Nvcamera.Hid.mouse,this.isRedirectionEnable===M)return;let ke;this.isRedirectionEnable=M,this.isInDesktopMode().pipe((0,l.zg)(tt=>{if(tt){if(this.currentUIMode!==S.AN.PhotoMode)return(0,w.of)(!1);ke=u.Yk.Common.Nvcamera.Mode.windowedSDK}else if(this.currentUIMode===S.AN.PhotoMode)ke=u.Yk.Common.Nvcamera.Mode.fullscreenSDK;else{if(this.currentUIMode!==S.AN.PhotoModeLight)return(0,w.of)(!1);ke=u.Yk.Common.Nvcamera.Mode.fullscreenNoSDK}return this.igoConfig.GFNCefClient?(0,w.of)(!1):this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.SetAnselRedirection,{enable:M,mode:ke,hid:re})})).subscribe(tt=>{this.logger.info("EnableAnselRedirection status: ",tt)},tt=>{this.logger.error("EnableAnselRedirection error: ",tt)})}getRedirectionState(){return this.isRedirectionEnable}isInDesktopMode(){return this.oscDisplayService.getCurrentDesktopMode().pipe((0,V.P)(),(0,p.U)(M=>(this.logger.info("Current display mode is ",M),"desktop"===M)))}setLanguageAndGetFilterList(){return this.localeService.localeChanged.pipe((0,V.P)(),(0,l.zg)(M=>this.bridgeService.executeCommand(u.Gh.Common.Nvcamera.SetLanguage,{langId:M})),(0,l.zg)(()=>this.getFilterList()))}getCurrentUIMode(){return this.currentUIMode}setCurrentModSlotName(M){this.currentGameSlots.modsSlotsInfo.slots[this.currentGameSlots.modsSlotsInfo.lastSlotIdx].slotName=M}getCurrentModSlotName(){if(this.isAnyGameFilterSlotSelected()){const M=this.currentGameSlots.modsSlotsInfo.slots[this.currentGameSlots.modsSlotsInfo.lastSlotIdx].slotName;return M&&""!==M.trim()?M:void 0}}getCurrentSlotIndex(){return this.isAnyGameFilterSlotSelected()?this.currentGameSlots.modsSlotsInfo.lastSlotIdx.toString():""}getActiveModsSlot(M){let re;return re=M===S.AN.GameFilter?this.currentGameSlots.modsSlotsInfo:this.currentGameSlots.anselSlotsInfo,re.slots[re.lastSlotIdx]}isAnyGameFilterSlotSelected(){return!!this.statusOfCaptureEnhance&&this.currentGameSlots&&0!==this.currentGameSlots.modsSlotsInfo.lastSlotIdx}getCmsData(){return this.bridgeService.executeCommand(u.Gh.Share.Shareserver.RegisterAppNotifications,{}).pipe((0,l.zg)(M=>(this.logger.info("app notification:",M),!M.appStarted||(this.isAppStartedReceived=!0,this.currentGameInfo&&this.currentGameInfo.drsWhitelist)?(0,w.of)(void 0):this.currentFreestyleGameInfo&&this.currentFreestyleGameInfo.cmsId?(this.logger.info("not updating current app data"),(0,w.of)(void 0)):(this.logger.info("updating current app data"),this.currentGFEGameInfo={procId:M.appStarted.pid,cmsId:M.appStarted.cmsId,drsName:M.appStarted.DRSAppName,drsProfileName:M.appStarted.profileName,shortName:M.appStarted.shortName,drsWhitelist:!1},this.igoConfig.GFNCefClient?(0,w.of)({}):this.getFreestyleWhitelisted(M.appStarted.DRSAppName)))),(0,l.zg)(M=>(M&&(this.currentGameInfo.drsWhitelist=M.freestyleWhitelisted),this.getBlacklistData(!1))),(0,t.K)(M=>(this.logger.error("Unable to fetch cms blacklist data: "+M),(0,w.of)(this.freestyleBlacklistedCmsidArray))))}setAnselFreestyleState(){this.gameFilterDisable.value&&this.gameFilterDisable.next(!1),this.photoModeDisable.value&&this.photoModeDisable.next(!1)}checkNvCameraReady(){this.queryFeatureSet(this.nvCameraRelaxedTimeout).pipe((0,E.b)(M=>{this.isAppStartedReceived=!1,M&&(M[u.Yk.Common.Nvcamera.FeaturesSupported.mods]||M[u.Yk.Common.Nvcamera.FeaturesSupported.sdk])&&(this.isNvCameraReady=!0,this.logger.info("Setting NvCamera ready"),this.setAnselFreestyleState())})).subscribe()}getBlacklistData(M){return 0!==this.freestyleBlacklistedCmsidArray.length?(0,w.of)(this.freestyleBlacklistedCmsidArray):this.queryBlacklistData(M)}queryBlacklistData(M){return this.endpoint||(this.endpoint=this.createEndpoint(M)),this.endpoint.get(this.cmsBlackListDataUrl,this.cmsRequestOptions).pipe((0,p.U)(Ce=>(Ce&&Ce.data&&(this.freestyleBlacklistedCmsidArray=[],Ce.data.forEach(ke=>{!1===ke.isFreeStyleSupported&&this.freestyleBlacklistedCmsidArray.push(ke.cms_appId)})),this.logger.info("freestyleBlacklistedCmsidArray: ",this.freestyleBlacklistedCmsidArray),this.freestyleBlacklistedCmsidArray)),(0,t.K)(Ce=>(this.logger.error("Unable to obtain game meta data."),(0,w.of)(this.freestyleBlacklistedCmsidArray))))}createEndpoint(M){return this.endpointFactory.createEndpoint({config:{timeout:3e3,timeBetweenRetries:3e4,maxRetries:M?1:3}})}setNavigationInputDevice(M=[],re=[]){if(M.length===re.length)for(let Ce=0;Ce<M.length;Ce++)switch(M[Ce]){case dn.Keyboard:this.navigationInputDevice.KEYBOARD=!!re[Ce];break;case dn.Mouse:this.navigationInputDevice.MOUSE=!!re[Ce];break;case dn.Gamepad:this.navigationInputDevice.GAMEPAD=!!re[Ce]}}sendAnselFreestyleFiltersTelemetry(M,re=!1){let Ce="",ke="",tt="",ut="",Ft=0;M===S.AN.GameFilter&&(this.currentGameSlots.modsSlotsInfo.slots.forEach(zt=>{const $t=zt.filterStack.filters.length;let fn="";if($t){this.slotsUsed.add(Ft);for(let Jt=0;Jt<$t;Jt++)fn+=Jt<$t-1?zt.filterStack.filters[Jt].name+", ":zt.filterStack.filters[Jt].name}else this.slotsUsed.delete(Ft);switch(Ft){case 1:Ce=fn;break;case 2:ke=fn;break;case 3:tt=fn}if(Ft===this.currentGameSlots.modsSlotsInfo.lastSlotIdx&&(ut=fn,this.previousStyleApplied!==ut))for(let Jt=0;Jt<$t;Jt++)this.telemetryService.sendAnselFreestyleFilters(zt.filterStack.filters[Jt].name,M,this.currentGameInfo.cmsId.toString(),this.currentGameInfo.shortName,this.currentGameInfo.drsName,this.currentGameInfo.drsProfileName);Ft++}),""!==ut&&this.previousStyleApplied!==ut&&this.telemetryService.sendFreestyleSlotTelemetry(Ce,ke,tt,ut,this.currentGameSlots.modsSlotsInfo.lastSlotIdx,this.slotsUsed.size,re,this.currentGameInfo.cmsId.toString(),this.currentGameInfo.shortName,this.currentGameInfo.drsName,this.currentGameInfo.drsProfileName)),this.previousStyleApplied=ut}sendAnselScreenshotTelemetry(M,re){let Ce="",ke=0,tt=this.currentGameInfo;tt||(tt=this.preResetSessionData.currentGameInfo),M===S.WU.completed&&this.currentGameSlots.anselSlotsInfo.slots.forEach(ut=>{const Ft=ut.filterStack.filters.length;let zt="";if(Ft)for(let $t=0;$t<Ft;$t++)this.telemetryService.sendAnselFreestyleFilters(ut.filterStack.filters[$t].name,S.AN.PhotoMode,null==tt?void 0:tt.cmsId.toString(),null==tt?void 0:tt.shortName,null==tt?void 0:tt.drsName,null==tt?void 0:tt.drsProfileName),zt+=$t<Ft-1?ut.filterStack.filters[$t].name+", ":ut.filterStack.filters[$t].name;switch(ke){case 1:Ce=zt}ke++}),this.telemetryService.sendAnselScreenshotTelemetry(M,null==tt?void 0:tt.cmsId,null==tt?void 0:tt.shortName,re.screenshotType,re.screenshotResolution,this.panningUsed,re.mode,re.totalMs,re.gridUsed,re.roll,re.fov,Ce,re.errorType,re.errorString)}sendAnselFreestyleErrorTelemetry(M,re,Ce){this.getSystemInfo().subscribe(ke=>{let tt=S.Wg.unsupportedGame,ut=this.currentGameInfo;Ce?(tt=S.Wg.streamerError,ut||(ut=this.preResetSessionData.currentGameInfo)):ut&&this.freestyleBlacklistedCmsidArray.includes(ut.cmsId)?tt=S.Wg.gameBlacklisted:this.nvCameraTimedOut&&(tt=S.Wg.nvCameraTimedOut,this.nvCameraTimedOut=!1),ut&&this.telemetryService.sendAnselFreestyleErrorTelemetry(M,re,ut.cmsId.toString(),ut.shortName,ut.drsName,ut.drsProfileName,ke.cpuName,ke.gpuName,ke.osVersion,ke.isOptimus,ke.systemType,ke.ddVersion,tt,Ce)})}setSwitchForNvCameraSettings(M){return this.configureNvcameraSettings(M,M).pipe((0,p.U)(re=>{if(re)return this.statusOfCaptureEnhance=M,this.saveCaptureEnhanceSwitchValue(),this.onCaptureEnhanceToggle(),!0}))}saveCaptureEnhanceSwitchValue(){this.dBStore.setItem(this.captureEnhanceSwitchKeyName,this.statusOfCaptureEnhance)}loadCaptureEnhanceSwitchValue(){return this.igoConfig.GFNCefClient?(0,w.of)(!0):this.dBStore.getItem(this.captureEnhanceSwitchKeyName)}errorHandlingForLaunchMenu(M,re){this.currentUIMode=void 0,this.igoConfig.GFNCefClient?M===u.Yk.Common.Nvcamera.FeaturesSupported.sdk?(re===jt.ERROR_SESSION_NOT_ALLOWED?this.oscNotificationService.show(A.ZJ.PhotoModeNotAllowed):this.photoModeDisable.next(!0),this.sendFeatureDisableErrorTelemetry(S.AN.PhotoMode,S.$R.nvCameraSessionConfigurationFailed,JSON.stringify(re))):M===u.Yk.Common.Nvcamera.FeaturesSupported.mods&&(this.gameFilterDisable.next(!0),this.sendFeatureDisableErrorTelemetry(S.AN.GameFilter,S.$R.nvCameraSessionConfigurationFailed,JSON.stringify(re))):re!==jt.ERROR_SESSION_NOT_ALLOWED||M!==u.Yk.Common.Nvcamera.FeaturesSupported.sdk?re===jt.ERROR_RESTART?(this.restartRequired=!0,M===u.Yk.Common.Nvcamera.FeaturesSupported.mods?this.oscDisplayService.openOSC("sidebar/nvcamera/game-filters",{showError:!1,errorType:jt.ERROR_RESTART}):M===u.Yk.Common.Nvcamera.FeaturesSupported.sdk&&this.oscDisplayService.openOSC("sidebar/nvcamera/photo-mode",{showError:!1,errorType:jt.ERROR_RESTART})):M===u.Yk.Common.Nvcamera.FeaturesSupported.mods?this.oscDisplayService.openOSC("sidebar/nvcamera/game-filters",{showError:!0,errorType:re}):M===u.Yk.Common.Nvcamera.FeaturesSupported.sdk&&this.oscDisplayService.openOSC("sidebar/nvcamera/photo-mode",{UIMode:this.currentUIMode,isAIUpresEnabled:!1,showError:!0,errorType:re}):this.oscNotificationService.show(A.ZJ.PhotoModeNotAllowed)}onCaptureEnhanceToggle(){this.statusOfCaptureEnhance&&this.isNvCameraReady?this.applySlot(this.currentGameSlots.modsSlotsInfo.lastSlotIdx,!0).subscribe(M=>{this.logger.info("applySlot success")},M=>{this.logger.error("applySlot failed:",M)}):!this.statusOfCaptureEnhance&&this.isNvCameraReady&&this.resetEntireStack().subscribe(M=>{this.logger.info("resetEntireStack success")},M=>{this.logger.error("resetEntireStack failed:",M)}),this.setHotkeyForSlotToggle(this.statusOfCaptureEnhance&&this.isGameFilterSupported()).subscribe()}setHotkeyForSlotToggle(M){return this.igoConfig.GFNCefClient?(0,w.of)(!1):this.bridgeService.executeCommand(u.Gh.Share.Shareserver.SetHotkeyDynamicEnable,{enable:M,keys:[o.sW.FreeStyleToggleStyle1,o.sW.FreeStyleToggleStyle2,o.sW.FreeStyleToggleStyle3]}).pipe((0,p.U)(re=>(this.logger.info("SetHotkeyDynamicEnable returned: ",re),!0)),(0,t.K)(re=>(this.logger.error("SetHotkeyDynamicEnable failed: ",re),(0,w.of)(!1))))}formatDataForUnifiedIPC(M,re){if(!M||!M.controls||!Array.isArray(M.controls)||0===M.controls.length)return this.logger.error("Fields missing (Filter / Controls). Abort formatting..."),null;const Ce={filterId:void 0,stackIdx:void 0,controls:[void 0]},ke={slider:1,multislider:1,boolean:2,edit:5,multiedit:5,pulldown:7};return Ce.filterId=M.id,Ce.stackIdx=re,Ce.controls=[],M.controls.forEach(function(tt){Ce.controls.push({id:tt.id,type:ke[tt.controlType],values:tt.currentValueArray,dataType:tt.dataType})}),Ce}setFilterAndAttributes(M,re){this.logger.info("service.setFilterAndAttributes(). Try to formatDataForUnifiedIPC().");const Ce=this.formatDataForUnifiedIPC(M,re);return Ce?(this.logger.info("SetFilterAndAttributes request: ",Ce),this.nvcameraRequestWithWait(u.Gh.Common.Nvcamera.SetFilterAndAttributes,{filterId:Ce.filterId,stackIdx:Ce.stackIdx,controls:Ce.controls},Et.filterDetails,this.nvCameraRelaxedTimeout).pipe((0,p.U)(ke=>ke.filterDetails.filter.status?ke.filterDetails.filter.status:u.Yk.Common.Nvcamera.AnselStatusEnum.failed),(0,Ot.h)(1))):(this.logger.error("Fallback to old API (setFilterType)."),this.setFilterWithAttributes(M))}normalizeSliderValue(M,re,Ce,ke,tt){return(M-re)/(Ce-re)*(tt-ke)+ke}startNvCameraSession(){this.currentUIMode=S.AN.GameFilter,this.tryStartNvCameraSession(u.Yk.Common.Nvcamera.FeaturesSupported.mods).subscribe()}getAiUpresSupported(){return this.igoConfig.GFNCefClient?(0,w.of)(!1):this.systemInfoService.getOsInformation().pipe((0,p.U)(M=>{const re=M.OSVersion.split(".");return En.OSBuildNumber<=parseInt(re[re.length-1],10)}),(0,l.zg)(M=>M?this.systemInfoService.getGPUHardwareInfo():(0,w.of)(void 0)),(0,p.U)(M=>{if(M){const re=(0,Se.find)(M.GPU,{IsPrimary:"1"})||M.GPU[0],Ce=re.GPUArchitecture,ke=void 0!==re.GPUArchImplementation?parseInt(re.GPUArchImplementation,16):void 0,tt=parseInt(En.GPUArchitecture,16)<=parseInt(Ce,10),ut=tt&&ke&&!En.ExGPUArchImplementation.includes(ke);return!(!tt||!ut)}return!1}),(0,t.K)(M=>(this.logger.error("Error in checking AIUpresSupport: ",M),(0,w.of)(!1))))}updateStreamerState(){this.streamerStateSubscription=this.oscDisplayService.streamerState$.subscribe(M=>{if(M){if(this.logger.info("streaming state change: ",M.name),["Error","TerminalError","ResumableError"].indexOf(M.name)>=0&&(this.isModsAppliedCurrently||this.preResetSessionData.modsApplied||this.currentUIMode)){const Ce="State: "+M.name+", modsActive: "+(this.isModsAppliedCurrently||this.preResetSessionData.modsApplied)+", UI mode: "+(this.currentUIMode?this.currentUIMode:this.preResetSessionData.uiMode||"Other");this.logger.info("StreamerError errorString = ",Ce),this.sendAnselFreestyleErrorTelemetry(S.NX.anselFreestyleGeneralFailure,this.currentUIMode||S.AN.GameFilter,Ce)}"Done"===M.name&&this.streamerStateSubscription&&(this.streamerStateSubscription.unsubscribe(),this.streamerStateSubscription=void 0)}})}sendFunctionalityErrorTelemetry(M){this.sendAnselFreestyleErrorTelemetry(S.NX.anselFreestyleGeneralFailure,this.currentUIMode||S.AN.GameFilter,M)}sendFeatureDisableErrorTelemetry(M,re,Ce){let ke=this.currentGameInfo;ke||(ke=this.preResetSessionData.currentGameInfo),this.telemetryService.sendAnselFreestyleFeatureDisableTelemetry(null==ke?void 0:ke.cmsId.toString(),null==ke?void 0:ke.shortName.toString(),M||S.AN.GameFilter,re,Ce||"Unknown Error")}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(m.zs3),m.LFG(f.g),m.LFG(h.ed),m.LFG(h.dF),m.LFG(o.y1),m.LFG(y.v),m.LFG(me.sK),m.LFG(Ie),m.LFG(Me),m.LFG(h.OL),m.LFG(ye.l),m.LFG(A.nG),m.LFG(Z),m.LFG(h.MC),m.LFG(L.V9),m.LFG(h._J),m.LFG(h.Ob),m.LFG(ae.In),m.LFG(Mn.Q6))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})(),Ct=(()=>{class qe{constructor(M,re,Ce,ke,tt){this.loggingService=M,this.osService=re,this.bridgeService=Ce,this.galleryService=tt,this.uploadDataList=[],this.memeQueue=[],this.DefaultMemeMaxLength=80,this.upperMemeMaxed=this.DefaultMemeMaxLength,this.lowerMemeMaxed=this.DefaultMemeMaxLength,this.saveBitmap=!0,this.idTracker=0,this.dirSeparator="",this.logger=this.loggingService.getLogger("MemeService"),this.renderer=ke.createRenderer(null,null)}init(){this.logger.info("Initializing Meme Service"),this.dirSeparator=this.osService.getDirSeparator(),this.galleryService.captureSaved().subscribe(M=>{if(this.memeQueue.length>0){const re=this.memeQueue.find(Ce=>Ce.source===M);re&&(this.saveMemeStrings(re).subscribe(),this.memeQueue=this.memeQueue.filter(Ce=>Ce.source!==M))}})}createMeme(M){this.memeParams=M,this.memeCanvasData="",this.logger.info("Meme params: ",M),0!==M.width&&setTimeout(()=>{if(this.memeCanvasData=this.createMemeCanvasForGIFTranscoder(this.memeParams.width,this.memeParams.height),this.saveBitmap){const Ce=this.writeEncryptedBmp(this.memeCanvasData).subscribe(()=>{Ce.unsubscribe()})}const re=this.setupTranscode(!1).subscribe(Ce=>{Ce&&this.logger.info("Transcode Meme/GIF complete!",M),re.unsubscribe()})})}createGIF(M){this.gifParams=M,this.logger.info("GIF params: ",M),setTimeout(()=>{const re=this.setupTranscode(!0).subscribe(Ce=>{Ce&&this.logger.info("Transcode GIF complete!",M),re.unsubscribe()})})}setupTranscode(M){const ke={file:M?this.gifParams.file:this.memeParams.file,targetPath:"",maxFileSizeMB:M?void 0:200,quality:"medium",newHeight:720,newFps:"high",newDuration:M?this.gifParams.duration:this.memeParams.duration,userData:this.idTracker,memeImage:M?"":this.memeCanvasData};return this.getTemporaryFolderPath().pipe((0,l.zg)(tt=>(this.idTracker++,tt[tt.length-1]===this.dirSeparator&&(tt=tt.slice(0,-1)),ke.targetPath=tt,this.saveUploadData(this.idTracker,ke))),(0,l.zg)(()=>this.gifTranscode(ke)))}saveUploadData(M,re){return this.getMemeStrings(re.file).pipe((0,p.U)(Ce=>(this.uploadData={id:M,folder:re.targetPath,fileSize:0,type:"video",subtype:"",videoUploadTitle:"",privacy:"",destination:"",fileSource:"",highlightDefinitionId:"",conversionStartTime:"",DRSName:"",DRSProfileName:"",fullFilename:re.file,fileName:"",containsMeme:""===re.memeImage?"No":"Yes",topMemeLength:Ce.top.length,bottomMemeLength:Ce.bottom.length},-1===this.findUploadDataInList(this.uploadData.id)&&(this.uploadDataList.push(this.uploadData),this.logger.info("Stored UploadData: ",this.uploadData)),!0)))}findUploadDataInList(M){let re=-1;return this.uploadDataList.forEach(function(Ce,ke){Ce.id===M&&(re=ke)}),re}getFilename(M){return/.*[\\/](.*)/.exec(M)[1]}getTemporaryFolderPath(){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetSettings).pipe((0,p.U)(M=>M.settings.tempFolderPath))}createMemeCanvasForGIFTranscoder(M,re){this.logger.info("Begin creating Bitmap at: "+M+"x"+re);const Ce=M,ke=re,tt=this.renderer.createElement("canvas");tt.width=Ce,tt.height=ke;const ut=tt.getContext("2d");ut.fillStyle="rgba(0,0,0,0)",ut.fillRect(0,0,Ce,ke);const Ft=this.memeParams.topFontSize*(Ce/this.memeParams.clientWidth),zt=this.memeParams.bottomFontSize*(Ce/this.memeParams.clientWidth),$t=this.memeParams.strokeColor||"black",fn=this.memeParams.fillColor||"white";let Jt=Ft.toFixed(0);ut.font=Jt+"px Roboto",this.logger.info("Video Font top: ",ut.font);let yn=this.calculateFontWidth(Ft,this.memeParams.topString),An=Math.floor(Ce/2-yn/2),Pt=parseInt(Jt,10);this.logger.info("Top string at x: "+An+" y: "+Pt),ut.strokeStyle=$t,ut.lineWidth=this.getLineWidth(Jt),ut.strokeText(this.memeParams.topString,An,Pt,yn),ut.fillStyle=fn,ut.fillText(this.memeParams.topString,An,Pt,yn),Jt=zt.toFixed(0),ut.font=Jt+"px Roboto",this.logger.info("Video Font bottom: ",ut.font),yn=this.calculateFontWidth(zt,this.memeParams.bottomString);const Ke=.025*ke;An=Math.floor(Ce/2-yn/2),Pt=Math.floor(ke-Ke),this.logger.info("Bottom string at x: "+An+" y: "+Pt),ut.strokeStyle=$t,ut.lineWidth=this.getLineWidth(Jt),ut.strokeText(this.memeParams.bottomString,An,Pt,yn),ut.fillStyle=fn,ut.fillText(this.memeParams.bottomString,An,Pt,yn),this.logger.info("Canvas created");const Pe=this.CanvasToBMPToDataURL(tt);return this.logger.info("BMP Image created"),Pe}calculateFontWidth(M,re){const ke=this.renderer.createElement("canvas").getContext("2d");return ke.font=M+"px Roboto",ke.measureText(re).width}getLineWidth(M){const re=parseInt(M,10),Ce=Math.round((re+20)/20);return Math.min(Ce,5)}toArrayBuffer(M){const re=M.width,Ce=M.height,ke=4*re,tt=M.getContext("2d").getImageData(0,0,re,Ce),ut=new Uint32Array(tt.data.buffer),Ft=4*Math.floor((32*re+31)/32),$t=56+Ft*Ce,fn=new ArrayBuffer($t),Jt=new DataView(fn);let Lt,Dt,An=0,Pt=0,Ke=0,Pe=0,it=0;for(cn(19778),Rn($t),An+=4,Rn(54),Rn(40),Rn(re),Rn(Ce),cn(1),cn(32),An+=24,Ke=Ce-1;Ke>=0;){for(Pe=54+Ke*Ft,Pt=0;Pt<ke;)Dt=ut[it++],Lt=Dt>>>24,Jt.setUint32(Pe+Pt,Dt<<8|Lt),Pt+=4;Ke--}return fn;function cn(Wn){Jt.setUint16(An,Wn,!0),An+=2}function Rn(Wn){Jt.setUint32(An,Wn,!0),An+=4}}CanvasToBMPToDataURL(M){const re=new Uint8Array(this.toArrayBuffer(M)),Ce=re.length;let ke="",tt=0;for(;tt<Ce;)ke+=String.fromCharCode(re[tt++]);return btoa(ke)}saveMemeStrings(M){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.AddMeme,{file:M.source,memeInfo:{topBarText:M.top,bottomBarText:M.bottom}}).pipe((0,p.U)(Ce=>(this.logger.info("AddMeme complete: ",Ce),!0),Ce=>(this.logger.error("AddMeme failed: ",Ce),!1)),(0,t.K)(Ce=>(this.logger.info("AddMeme error: ",Ce),(0,w.of)(!1))))}getMemeStrings(M){const re={top:"",bottom:"",source:M,color:""};return this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetFileMetadata,{file:M}).pipe((0,p.U)(Ce=>(re.top=Ce.memeInfo.topBarText,re.bottom=Ce.memeInfo.bottomBarText,re)),(0,t.K)(Ce=>(this.logger.info("Get Meme Strings from metaData error: ",Ce),(0,w.of)(re))))}clearMemeStrings(M){this.logger.info("Source to clear: ",M),this.saveMemeStrings({top:"",bottom:"",source:M,color:""}).subscribe()}queueToUpdateMeme(M,re,Ce){const ke={top:"",bottom:"",source:M,color:""};(""!==re||""!==Ce)&&(ke.top=re,ke.bottom=Ce),this.memeQueue.push(ke)}writeEncryptedBmp(M){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.WriteEncryptedBitmap,{bitmapImage:M}).pipe((0,p.U)(Ce=>(this.logger.info("WriteEncryptedBmp complete: ",Ce),!0),Ce=>(this.logger.error("WriteEncryptedBmp failed: ",Ce),!1)),(0,t.K)(Ce=>(this.logger.info("WriteEncryptedBitmap error: ",Ce),(0,w.of)(!1))))}gifTranscode(M){const re={file:M.file,targetPath:M.targetPath,maxFileSizeMB:M.maxFileSizeMB,quality:M.quality,newHeight:M.newHeight,newFps:M.newFps,newDuration:M.newDuration,userData:M.userData.toString(),memeImage:M.memeImage};return this.logger.info("Final Transcode parameters: ",re),this.bridgeService.executeCommand(u.Gh.Common.Gallery.TranscodeMediaFile,re).pipe((0,p.U)(Ce=>{this.logger.info("gifTranscode complete: ",Ce);const ke=parseInt(Ce.userData,10),tt=this.findUploadDataInList(ke);return this.logger.info("UserData: ",this.uploadDataList[tt]),Ce.newFile},Ce=>{this.logger.info("gifTranscode failed: ",Ce)}),(0,t.K)(Ce=>(this.logger.info("gifTranscode error: ",Ce),(0,w.of)(void 0))))}setUpperMemeMaxed(M){this.upperMemeMaxed=M}setLowerMemeMaxed(M){this.lowerMemeMaxed=M}isUpperMemeMaxed(){return this.upperMemeMaxed}isLowerMemeMaxed(){return this.lowerMemeMaxed}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(h.ed),m.LFG(c),m.LFG(h.dF),m.LFG(m.FYo),m.LFG(Me))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})(),gt=(()=>{class qe{constructor(M,re){this.loggingService=M,this.bridgeService=re,this.logger=this.loggingService.getLogger("TrimService")}init(){this.logger.info("Initializing Trim Service")}trim(M){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.Trim,M).pipe((0,p.U)(re=>(this.logger.info("Trim complete: ",re),!0),re=>(this.logger.info("Trim failed: ",re),!0)),(0,t.K)(re=>(this.logger.info("Trim error: ",re),(0,w.of)(!1))))}moveFile(M,re){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.MoveFile,{source:M,destination:re})}copyFile(M,re){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.CopyFile,{source:M,destination:re})}deleteFile(M){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.RemoveGalleryItem,{file:M})}overwriteOriginal(M,re){return this.logger.info("Overwriting original!"),this.deleteFile(re).pipe((0,l.zg)(()=>(this.logger.info("Original deleted!"),this.moveFile(M,re))))}getMetaData(M){return this.bridgeService.executeCommand(u.Gh.Common.Gallery.GetFileMetadata,{file:M})}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(h.ed),m.LFG(h.dF))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})();var At=e(95102);let le=(()=>{class qe{constructor(M,re,Ce,ke,tt,ut,Ft,zt,$t){this.injector=M,this.loggingService=re,this.bridgeService=Ce,this.hotkeyService=ke,this.igoConfig=tt,this.dbService=ut,this.experienceControlService=Ft,this.oscNotificationService=zt,this.telemetryService=$t,this.ingestUrl="",this.ingestUrlDb="",this.protocolType="rtp",this.presetData=void 0,this.validUrl=!1,this.throttleDuration=500,this.broadcastConnectionTimeOut=1e4,this.isGfnBroadcastEnabled=!1,this.appConfig=null,this.connectionStatus=2,this.connection$=new i.xQ,this.urlValidity$=new i.xQ,this.notifications$=new i.xQ,this.gfnBroadcastEnable$=new i.xQ,this.dbStorageName="GfnBroadcast",this.urlPresetStorageKeyName="urlPreset",this.broadcastMode="Lightstream",this.currentGameInfo=void 0,this.broadcastStartTime=0,this.broadcastEndTime=0,this.portalCheckMap=new Map,this.currentGameInfo=void 0,this.logger=this.loggingService.getLogger("GFNBroadcast Service"),this.dBStore=this.dbService.getGlobalStore(this.dbStorageName)}init(){this.checkGfnBroadcastFeatureSupport().subscribe(M=>{this.logger.info("Checking GFN Broadcast Feature Support: ",M),this.loadUrlPresetData(),this.registerHotkey(o.sW.ConnectGfnBroadcastToggle,this.toggleConnection.bind(this)),this.registerNotifications(),this.isGfnBroadcastEnabled=M,this.gfnBroadcastEnable$.next(this.isGfnBroadcastEnabled)},M=>{throw this.logger.info("Checking GFN Broadcast Feature Support: ",M),this.gfnBroadcastEnable$.next(!1),M}),this.setPortalCheckMap()}checkGfnBroadcastFeatureSupport(){return this.igoConfig.GFNCefClient?this.appConfig||(this.appConfig=this.injector.get(fe.VKt),this.appConfig)?this.experienceControlService.getCloudVariable(this.appConfig.gxTarget.experiences.isBroadcastEnabled,{},{useCache:!1},Mn.Z4.GxTargetGetCloudVariable,Mn.Qu.GxTargetGetGfnBroadcastFeature).pipe((0,p.U)(M=>(this.logger.info("GxTargetGet Broadcast enable status: ",M.value),M.value)),(0,t.K)(M=>(this.logger.info("GxTargetGetFeatureEnabled fetch error",M),(0,w.of)(!0)))):(this.logger.info("ERROR:: Failed to obtain appConfig"),(0,w.of)(!1)):(0,w.of)(!0)}isGfnBroadcastSupported(){return this.igoConfig.GFNBroadcastEnabled}DirectBroadcastSupported(){return this.igoConfig.DirectBroadcastEnabled}checkPortal(){for(const[M,re]of this.portalCheckMap.entries()){const Ce=this.ingestUrl.match(M);if(Ce&&1===Ce.length)return re}return""}isValidUrl(){const M=this.ingestUrl.match(/^rtmp:\/\/|^rtmps:\/\/|^rtmpe:\/\//g);if(M&&0!==M.length){if(this.logger.info("Valid RTMP URL:",this.ingestUrl),this.DirectBroadcastSupported()){if(this.broadcastMode=this.checkPortal(),""===this.broadcastMode)return void this.logger.info("Not a valid broadcast portal");this.logger.info(" Valid broadcast portal:",this.broadcastMode)}return this.validUrl=!0,this.protocolType="rtmp",void this.urlValidity$.next({isValidServer:!0,server:this.ingestUrl})}const re=this.ingestUrl.match(/^rtsp:\/\/|^rtp:\/\//g),Ce=this.ingestUrl.match(/lightstream\.com/g);re&&Ce&&0!==re.length&&0!==Ce.length?(this.protocolType="rtp",this.bridgeService.executeCommand(u.Gh.Gfn.Gfnbroadcast.ValidateRtspServer,{rtspUrl:this.ingestUrl}).subscribe(ke=>{this.validUrl=ke.isValidServer,this.urlValidity$.next(ke)},ke=>{this.logger.info("Failed checking url validity: ",ke),this.validUrl=!1,this.urlValidity$.next({isValidServer:!1,server:this.ingestUrl})})):this.setFalseUrl()}setFalseUrl(){this.validUrl=!1,this.urlValidity$.next({isValidServer:!1,server:this.ingestUrl})}registerHotkey(M,re){this.hotkeyService.listen(M).pipe((0,ct.p)(this.throttleDuration)).subscribe(()=>{re()})}saveUrlPresetData(){this.logger.info("Saving URL Preset Data"),this.ingestUrlDb!==this.ingestUrl?(this.presetData={ingestUrl:this.ingestUrl,protocolType:this.protocolType},this.savePresetData(this.urlPresetStorageKeyName,this.presetData).subscribe(()=>{this.logger.info("Successfully stored "+this.urlPresetStorageKeyName+"preset data"),this.ingestUrlDb=this.ingestUrl},M=>{this.logger.info("Failed to store "+this.urlPresetStorageKeyName+" preset data")})):this.logger.info("Skipped storing URL Preset data! Data already available")}savePresetData(M,re){return this.logger.info("Saving Preset data: "+M+" "+re),this.dBStore.setItem(M,re)}loadUrlPresetData(){this.logger.info("Loading URL Preset Data"),this.dBStore.getItem(this.urlPresetStorageKeyName).subscribe(M=>{M?"object"==typeof M?(this.logger.info("URL preset data found new format",M),this.ingestUrl=M.ingestUrl,this.ingestUrlDb=this.ingestUrl,this.validUrl=!0,this.protocolType=M.protocolType):(this.logger.info("URL preset data found old format",M),this.ingestUrl=M):this.logger.info("URL preset data not found")},M=>{this.logger.error("Could not load URL presets data: ",M)})}registerNotifications(){this.logger.info("Registering Broadcast Notification"),this.bridgeService.executeCommand(u.Gh.Gfn.Gfnbroadcast.GfnBroadcastResponseNotification).subscribe(M=>{this.logger.info("GFN Broadcast Notification: ",M),this.notifications$.next(M)},M=>{this.logger.info("GFN Broadcast Notification Error: ",M),this.notifications$.next(M)}),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.RegisterGeneralNotifications).pipe((0,ue.h)(M=>!!(null==M?void 0:M.gameExited))).subscribe(M=>{this.onGameExit(M)}),this.bridgeService.executeCommand(u.Gh.Share.Shareserver.RegisterAppNotifications).pipe((0,ue.h)(M=>!!(null==M?void 0:M.appStarted))).subscribe(M=>{this.logger.info("App Start Data: ",M),this.currentGameInfo={procId:M.appStarted.pid,cmsId:M.appStarted.cmsId,drsName:M.appStarted.DRSAppName,drsProfileName:M.appStarted.profileName,shortName:M.appStarted.shortName,drsWhitelist:!1}})}handleConnectionNotification(M,re,Ce){const ke=M.pipe((0,Kt.V)(re)).subscribe(tt=>{var ut,Ft,zt,$t,fn,Jt;this.logger.info("On Connection Handle: ",tt);let yn="";tt.broadcastConnectResponse?tt.broadcastConnectResponse.enableStatus===u.Yk.Gfn.Gfnbroadcast.EnableStatus.success?(this.connectionStatus=0,yn=tt.broadcastConnectResponse.enableStatus,this.oscNotificationService.show(A.ZJ.ConnectedToGfnBroadcast,this.broadcastMode),this.saveUrlPresetData(),this.broadcastStartTime=Date.now(),this.telemetryService.sendBroadcastEventTelemetry((null===(ut=this.currentGameInfo)||void 0===ut?void 0:ut.cmsId.toString())||"",(null===(Ft=this.currentGameInfo)||void 0===Ft?void 0:Ft.shortName.toString())||"",S.MG.start,S.ZA.lightstream,0)):tt.broadcastConnectResponse.enableStatus===u.Yk.Gfn.Gfnbroadcast.EnableStatus.genericFailure&&(this.connectionStatus=2,yn=tt.broadcastConnectResponse.enableStatus,this.oscNotificationService.show(A.ZJ.FailedToConnectGfnBroadcast,this.broadcastMode),this.telemetryService.sendBroadcastErrorTelemetry((null===(zt=this.currentGameInfo)||void 0===zt?void 0:zt.cmsId.toString())||"",(null===($t=this.currentGameInfo)||void 0===$t?void 0:$t.shortName.toString())||"",S.kt.failedToStart,S.ZA.lightstream,tt.broadcastConnectResponse.enableStatus)):tt.broadcasDisconnectResponse&&(this.connectionStatus=2,yn=tt.broadcasDisconnectResponse.disconnectStatus,this.oscNotificationService.show(A.ZJ.DisconnectedFromGfnBroadcast,this.broadcastMode),this.broadcastEndTime=Date.now(),this.telemetryService.sendBroadcastEventTelemetry((null===(fn=this.currentGameInfo)||void 0===fn?void 0:fn.cmsId.toString())||"",(null===(Jt=this.currentGameInfo)||void 0===Jt?void 0:Jt.shortName.toString())||"",S.MG.stop,S.ZA.lightstream,this.broadcastEndTime-this.broadcastStartTime)),this.connection$.next({connectionStatus:this.connectionStatus,connectionFeedback:yn}),ke.unsubscribe()},tt=>{var ut,Ft;this.connectionStatus=2,this.connection$.next({connectionStatus:this.connectionStatus}),this.telemetryService.sendBroadcastErrorTelemetry((null===(ut=this.currentGameInfo)||void 0===ut?void 0:ut.cmsId.toString())||"",(null===(Ft=this.currentGameInfo)||void 0===Ft?void 0:Ft.shortName.toString())||"",S.kt.timeoutError,S.ZA.lightstream,""),this.oscNotificationService.show(Ce?A.ZJ.FailedToConnectGfnBroadcast:A.ZJ.DisconnectedFromGfnBroadcast,this.broadcastMode),ke.unsubscribe()})}connect(){if(this.logger.info("Lightstream Broadcast trying to connect"),!this.validUrl)return void this.logger.info("Lightstream Broadcast connect failed! Invalid Url");if(1===this.connectionStatus)return void this.logger.info("Lightstream Broadcast connect failed! Already Connecting");const M=this.protocolType;this.logger.info("Broadcast protocol = ",M);const re=this.ingestUrl;this.logger.info("Lightstream Broadcast trying to connect.. ",re),this.connectionStatus=1,this.connection$.next({connectionStatus:this.connectionStatus}),this.oscNotificationService.show(A.ZJ.ConnectingToGfnBroadcast,this.broadcastMode),this.handleConnectionNotification(this.notifications$.asObservable(),this.broadcastConnectionTimeOut,!0),this.bridgeService.executeCommand(u.Gh.Gfn.Gfnbroadcast.BroadcastConnect,{protocol:M,ingestURL:re,ports:[5e3,5002]}).subscribe(ke=>this.logger.info("Lightstream Broadcast Connect On Next: ",ke))}disconnect(){this.logger.info("Lightstream Broadcast trying to disconnect.. ",this.ingestUrl),1!==this.connectionStatus?(this.connectionStatus=3,this.connection$.next({connectionStatus:this.connectionStatus}),this.handleConnectionNotification(this.notifications$.asObservable(),2e3,!1),this.bridgeService.executeCommand(u.Gh.Gfn.Gfnbroadcast.BroadcastDisconnect).subscribe(M=>this.logger.info("Lightstream Broadcast Disconnect On Next: ",M))):this.logger.info("Lightstream Broadcast disconnect failed! Already Connecting")}toggleConnection(){0===this.connectionStatus?this.disconnect():2===this.connectionStatus&&this.connect()}onGameExit(M){const re=M.gameExited.exitAppPID;if(-1===re)return this.logger.info("Game Exit Broadcast disconnected"),this.disconnect();this.logger.info("gameExit ignored for Pid:",re)}listenConnectionNotification(){return this.connection$.asObservable()}listenUrlValidityNotification(){return this.urlValidity$.asObservable()}listenGfnBroadcastEnableNotification(){return this.gfnBroadcastEnable$.asObservable()}set IngestUrl(M){this.ingestUrl=M}get IngestUrl(){return this.ingestUrl}get ConnectionStatus(){return this.connectionStatus}get IsGfnBroadcastEnabled(){return this.isGfnBroadcastEnabled}get ValidUrl(){return this.validUrl}setPortalCheckMap(){this.portalCheckMap.set(/\/\/live.twitch.tv\//g,"Twitch"),this.portalCheckMap.set(/contribute.live-video.net\/app/g,"Twitch"),this.portalCheckMap.set(/.rtmp.youtube.com/g,"YouTube Studio")}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(m.zs3),m.LFG(h.ed),m.LFG(h.dF),m.LFG(o.y1),m.LFG(f.g),m.LFG(h.MC),m.LFG(Mn.Q6),m.LFG(A.nG),m.LFG(ye.l))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})();var De=e(44790);let nt=(()=>{class qe{constructor(M,re,Ce,ke,tt,ut,Ft,zt,$t,fn,Jt,yn,An,Pt,Ke,Pe,it,Lt,Dt,cn,Rn,Wn){this.loggingService=M,this.osService=re,this.hotkey=Ce,this.oscDisplay=ke,this.cacheService=tt,this.oscNotification=ut,this.galleryService=Ft,this.sdkGalleryService=zt,this.shadowPlayService=$t,this.webcamService=fn,this.igoConfig=Jt,this.nvcamera=yn,this.osdService=An,this.telemetryHelperService=Pt,this.gfnInfo=Ke,this.memeService=Pe,this.oscDisplayService=it,this.trimService=Lt,this.clientInputService=Dt,this.gfnBroadcastService=cn,this.featureSupportService=Rn,this.statisticsService=Wn,this.logger=this.loggingService.getLogger("IGO ServiceLoader"),this.isInitialised=!1}init(){return this.featureSupportService.init().pipe((0,p.U)(M=>(this.logger.info("Feature Support Data: ",M),!!this.isInitialised||!!(null==M?void 0:M.igo)&&((null==M?void 0:M.initData)?(this.isInitialised=!0,this.initSelectiveServices(M)):(this.isInitialised=!0,this.initAllServices(),this.igoConfig.RecordingFeaturesDisabled=!0,setTimeout(()=>this.oscDisplayService.openOSC(),1e3)),!0))))}initAllServices(){this.initBaseServices(),this.shadowPlayService.init(),this.webcamService.init(),this.nvcamera.init(),this.gfnBroadcastService.init(),this.clientInputService.init(),this.statisticsService.init()}initSelectiveServices(M){M.hotkey&&this.hotkey.init(),M.oscDisplay&&this.oscDisplay.init(),M.os&&this.osService.init().subscribe(()=>{M.oscNotification&&this.oscNotification.init(),M.cache&&this.cacheService.init(),M.gallery&&this.galleryService.init(),M.sdkGallery&&this.sdkGalleryService.init(),M.meme&&this.memeService.init(),M.trim&&this.trimService.init(),M.telemetryHelper&&this.telemetryHelperService.init()}),M.gfnInfo&&this.gfnInfo.init(),M.osd&&this.osdService.init(),M.shadowPlay&&this.shadowPlayService.init(),M.webcam&&this.webcamService.init(),M.nvcamera&&this.nvcamera.init(),M.gfnBroadcast&&this.gfnBroadcastService.init(),M.clientInput&&this.clientInputService.init(),M.statistics&&this.statisticsService.init()}initBaseServices(){this.hotkey.init(),this.oscDisplay.init(),this.osService.init().subscribe(()=>{this.oscNotification.init(),this.cacheService.init(),this.galleryService.init(),this.sdkGalleryService.init(),this.memeService.init(),this.trimService.init(),this.telemetryHelperService.init()}),this.gfnInfo.init(),this.osdService.init()}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(h.ed),m.LFG(c),m.LFG(o.y1),m.LFG(y.v),m.LFG(v),m.LFG(A.nG),m.LFG(Me),m.LFG(te),m.LFG(Ie),m.LFG(ze),m.LFG(f.g),m.LFG(Ln),m.LFG(g.Ec),m.LFG(ye.l),m.LFG(ae.In),m.LFG(Ct),m.LFG(y.v),m.LFG(gt),m.LFG(At.S),m.LFG(le),m.LFG(xt.l),m.LFG(De._6))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})();var bt=e(81468),Wt=e(90084);let ln=(()=>{class qe{constructor(M,re){this.loggingService=M,this.bridgeService=re,this.logger=this.loggingService.getLogger("KeyboardService")}onKeyDown(M,re){switch(M.key){case"ArrowDown":re===kt.Bottom?(M.stopPropagation(),M.preventDefault()):(this.bridgeService.executeCommand(u.Gh.Share.Osc.GenerateKeyboardMessage,{keycode:Wt.Mf,keymodifier:0}).subscribe(Ce=>{this.logger.info("ArrowDown pressed"+Ce)}),M.stopPropagation());break;case"ArrowUp":re===kt.Top?(M.stopPropagation(),M.preventDefault()):(this.bridgeService.executeCommand(u.Gh.Share.Osc.GenerateKeyboardMessage,{keycode:Wt.Mf,keymodifier:Wt.JU}).subscribe(Ce=>{this.logger.info("ArrowUp pressed"+Ce)}),M.stopPropagation())}}}return qe.\u0275fac=function(M){return new(M||qe)(m.LFG(h.ed),m.LFG(h.dF))},qe.\u0275prov=m.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})();e(82446)},88106:(He,de,e)=>{"use strict";e.d(de,{A2:()=>i,Sc:()=>D,$K:()=>m,dM:()=>y,uc:()=>s,ZB:()=>w});var n=e(2984),i=(()=>{return(g=i||(i={})).Video="video",g.Image="image",g.Other="other",i;var g})(),D=(()=>{return(g=D||(D={})).Temporary="temporary",g.Highlights="highlights",D;var g})(),m=n.Yk.Common.Gallery.AudioType,y=(()=>{return(g=y||(y={})).Normal="Normal",g.SuperResolution="SuperResolution",g.SuperResolutionOversized="SuperResolution_Oversized",g.Mono360="360Mono",g.Stereo="Stereo",g.Stereo360="360Stereo",g.Exr="Exr",g.Live="Live",g.Offline="Offline",g.Highlights="Highlight",g.Mta="MTA",g.NormalAnsel="Normal_Ansel",g.Gif="AnimatedGif",g.InstantReplay="InstantReplay",g.Manual="Manual",g.Screenshot="Screenshot",y;var g})();class s{constructor(){this.total=0,this.highlights=0,this.videos=0,this.instantReplays=0,this.images=0,this.highlightBreakDown=[]}}var w=(()=>{return(g=w||(w={})).HIGHLIGHT_COMPLETED="highlightCompleted",g.MOVE_STARTED="moveStarted",g.MOVE_INPROGRESS="moveInProgress",g.MOVE_DONE="moveDone",w;var g})()},47062:(He,de,e)=>{"use strict";e.d(de,{g:()=>n});class n{}},82446:(He,de,e)=>{"use strict";e.d(de,{d:()=>n,P:()=>i});const n={igo:!0,shadowPlay:!0,broadcast:!1,webcam:!1,nvcamera:!0,gfnBroadcast:!1,clientInput:!1,hotkey:!0,oscDisplay:!0,os:!0,oscNotification:!0,cache:!0,gallery:!0,sdkGallery:!0,telemetryHelper:!0,meme:!1,trim:!1,gfnInfo:!1,osd:!0,gfnMicrophone:!1,statistics:!1,gamepadOrientedMode:!1,virtualKeyboard:!1,controlUGC:!1,connectionStatus:!1,isKBMGameSupported:!0,inputControlHints:!1,nvKeyboardSupported:!1,clientIME:!1,useGamepadLSControl:!1},i=Object.assign({initData:{}},n)},95102:(He,de,e)=>{"use strict";e.d(de,{S:()=>t});var n=e(7161),i=e(79441),D=e(81134),m=e(9170),y=e(8095),T=e(85816),r=e(53466),a=e(77142),s=e(2316),p=e(6484),l=e(47062);let t=(()=>{class w{constructor(u,o,f,c,g){this.igoConfig=o,this.injector=f,this.hotkeyService=c,this.systemVirtualKeyboardService=g,this.inputUISubject=new i.xQ,this.clientImeLoaderService=null,this.throttleMs=333,this.logger=u.getLogger("IGO ClientInputService"),this.igoConfig.GFNCefClient&&(this.clientImeLoaderService=this.injector.get(n.wn))}get inputControlUIOpened$(){return this.inputUISubject.asObservable().pipe((0,m.h)(u=>!0===u))}get inputControlUIClosed$(){return this.inputUISubject.asObservable().pipe((0,m.h)(u=>!1===u))}get systemKeyboardState$(){return this.systemVirtualKeyboardService.keyboardVisible$}get imeOpened$(){var u,o;return null!==(o=null===(u=this.clientImeLoaderService)||void 0===u?void 0:u.imeOpened$)&&void 0!==o?o:(0,D.of)(!1)}get isImeEnabled$(){var u,o;return null!==(o=null===(u=this.clientImeLoaderService)||void 0===u?void 0:u.isImeEnabled$)&&void 0!==o?o:(0,D.of)(!1)}get imeInputInProgress(){var u,o;return null!==(o=null===(u=this.clientImeLoaderService)||void 0===u?void 0:u.imeInputInProgress)&&void 0!==o&&o}get imeInputTextVisible$(){var u,o;return null!==(o=null===(u=this.clientImeLoaderService)||void 0===u?void 0:u.imeInputTextVisible$)&&void 0!==o?o:(0,D.of)(!1)}init(){this.logger.info("Initializing ClientInputService"),this.igoConfig.GFNCefClient&&this.hotkeyService.listen(a.sW.NativeKeyboardInputDialog).pipe((0,y.p)(this.throttleMs),(0,T.zg)(()=>this.clientImeLoaderService.isImeEnabled$.pipe((0,r.q)(1)))).subscribe(u=>{this.clientImeLoaderService.imeInputInProgress?this.clientImeLoaderService.closeImeInputHandler():(this.logger.info("ClientIME window opening triggered"),u?(this.logger.info("ClientIME feature is enabled, opening IME window"),this.clientImeLoaderService.initImeInputHandler(n.rW.HotKey)):this.logger.info("ClientIME feature is disabled"))})}toggleInputUI(u){this.inputUISubject.next(u)}initImeInput(u){var o;null===(o=this.clientImeLoaderService)||void 0===o||o.initImeInputHandler(u)}controlImeInput(u){var o;null===(o=this.clientImeLoaderService)||void 0===o||o.controlImeInput(u)}closeImeInput(){var u;null===(u=this.clientImeLoaderService)||void 0===u||u.closeImeInputHandler()}}return w.\u0275fac=function(u){return new(u||w)(s.LFG(p.ed),s.LFG(l.g),s.LFG(s.zs3),s.LFG(a.y1),s.LFG(p.sp))},w.\u0275prov=s.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},65119:(He,de,e)=>{"use strict";e.d(de,{l:()=>o});var n=e(54364),i=e(81134),D=e(53466),m=e(85816),y=e(67202),T=e(18293),r=e(33927),a=e(2984),s=e(6484),p=e(12556),l=e(82446),t=e(2316),w=e(47062),h=e(98221),u=e(52825);let o=(()=>{class f{constructor(g,I,G,x,E,P,v){var O,C;this.injector=I,this.bridgeService=G,this.igoConfig=x,this.systemInfoService=E,this.browserSupportService=P,this.consoleHotkeyNotification=!1,this.logger=g.getLogger("igo/FeatureSupportService"),this.isBrowserPlatform=s.ng.isBrowserPlatform(),this.isCaptureSupported=!0,"GFN"===this.igoConfig.branding&&(this.appConfig=this.injector.get(p.VKt),this.isTVMode=!!(null===(C=null===(O=this.appConfig)||void 0===O?void 0:O.featureEnablement)||void 0===C?void 0:C.tvMode),this.isVirtualKbEnabled=!!this.appConfig.featureEnablement.virtualKeyboard,this.inputHintsEnabled=!!this.appConfig.featureEnablement.inputControlHints,this.nvKeyboardSupported=v.enabled,this.clientImeEnabled=!!this.appConfig.featureEnablement.clientIME,this.useGamepadLSControl=!!this.appConfig.featureEnablement.useGamepadLSControl,this.consoleHotkeyNotification=!!this.appConfig.featureEnablement.consoleHotkeyNotification),this.initFeatureControl()}initFeatureControl(){this.featureControl$="GFN"===this.igoConfig.branding&&this.igoConfig.IGOFeatureEnabled?this.systemInfoService.getDeviceType().pipe((0,D.q)(1),(0,m.zg)(g=>(this.cachedDeviceType=g,(0,i.of)({igo:!0,shadowPlay:this.isShadowPlayEnabled(),broadcast:this.isBroadcastEnabled(),webcam:this.isWebcamEnabled(),nvcamera:this.isNvcameraEnabled(),gfnBroadcast:this.isGfnBroadcastEnabled(),clientInput:!0,hotkey:!0,oscDisplay:!0,os:!0,oscNotification:!0,cache:!0,gallery:this.isGalleryEnabled(),sdkGallery:this.isSdkGalleryEnabled(),telemetryHelper:!0,meme:this.isMemeEnabled(),trim:this.isTrimEnabled(),gfnInfo:!0,osd:!0,gfnMicrophone:this.evaluateGfnMicEnablement(g),statistics:this.isStatisticsEnabled(),gamepadOrientedMode:this.isGamepadOrientedMode(),virtualKeyboard:this.isVirtualKeyboardEnabled(),controlUGC:this.isControlUGCEnabled(),connectionStatus:this.isConnectionStatusEnabled(),isKBMGameSupported:this.isKeyboardMouseGamesAllowed(),inputControlHints:this.isInputControlHintsEnabled(),nvKeyboardSupported:this.isNvKeyboardSupported(),clientIME:this.isClientImeEnabled(),useGamepadLSControl:this.isGamepadLSControlUsed()})))):(0,i.of)(l.d)}evaluateGfnMicEnablement(g){return g!==s.z7.TV}init(){let g;return this.featureControl$.pipe((0,m.zg)(I=>(g=I,this.injector.get(n.V_,Promise.resolve(null)))),(0,m.zg)(I=>this.bridgeService.executeCommand(a.Gh.Share.Shareserver.GetInitData)),(0,m.zg)(I=>(I&&(this.isCaptureSupported=I.captureSupported),g.igo?(this.igoSupportData=Object.assign({initData:I},g),(0,i.of)(this.igoSupportData)):(this.logger.info("Disabling IGO due to feature toggle"),this.igoSupportData=l.P,this.bridgeService.executeCommand(a.Gh.Share.Shareserver.SetCaptureSupported,{supported:!1}).pipe((0,y.h)(this.igoSupportData))))),(0,T.K)(I=>(this.logger.info("Error occured while fetching GetInitDataReturn : ",I),(0,i.of)(this.igoSupportData))))}isShadowPlayEnabled(){return!this.isBrowserPlatform&&this.isCaptureSupported}isBroadcastEnabled(){return!this.isBrowserPlatform}isWebcamEnabled(){return!this.isBrowserPlatform}isNvcameraEnabled(){return!this.isBrowserPlatform}isGfnBroadcastEnabled(){return!0}isDirectBroadcastEnabled(){return this.isBrowserPlatform}isGalleryEnabled(){return!this.isBrowserPlatform&&this.isCaptureSupported}isSdkGalleryEnabled(){return!this.isBrowserPlatform}isMemeEnabled(){return!this.isBrowserPlatform}isTrimEnabled(){return!this.isBrowserPlatform}isMicrophoneEnabled(){return"GFN"!==this.igoConfig.branding}isGfnMicrophoneEnabled(){return"GFN"===this.igoConfig.branding?this.systemInfoService.getDeviceType().pipe((0,D.q)(1),(0,r.U)(g=>this.evaluateGfnMicEnablement(g))):(0,i.of)(!1)}isStatisticsEnabled(){return!this.isBrowserPlatform&&"GFN"===this.igoConfig.branding}isGamepadOrientedMode(){return this.isTVMode&&"GFN"===this.igoConfig.branding}isVirtualKeyboardEnabled(){return this.isVirtualKbEnabled&&"GFN"===this.igoConfig.branding}isSystemEnabled(){return this.systemInfoService.getDeviceOSType().pipe((0,D.q)(1),(0,r.U)(g=>{const I=g===s.wi.Windows,x=g===s.wi.MacOS;return this.isBrowserPlatform?I||g===s.wi.ChromeOS||x||g===s.wi.XBox:I||x}))}isControlUGCEnabled(){return!this.isBrowserPlatform&&"GFN"===this.igoConfig.branding}isConnectionStatusEnabled(){return"GFN"===this.igoConfig.branding}isKeyboardMouseGamesAllowed(){var g,I;return"GFN"!==this.igoConfig.branding||(null===(I=null===(g=this.appConfig)||void 0===g?void 0:g.client)||void 0===I?void 0:I.supportsKeyboardMouseGames)}isInputControlHintsEnabled(){return this.inputHintsEnabled&&"GFN"===this.igoConfig.branding}isGfnBrowserDevMode(){return"GFN"===this.igoConfig.branding&&this.isBrowserPlatform&&this.browserSupportService.isStagingOrDevDomain()}isNvKeyboardSupported(){return this.nvKeyboardSupported&&"GFN"===this.igoConfig.branding}isClientImeEnabled(){return this.clientImeEnabled&&"GFN"===this.igoConfig.branding}isGamepadLSControlUsed(){return this.useGamepadLSControl&&"GFN"===this.igoConfig.branding}isConsoleHotKeyNotificationCombination(){return this.consoleHotkeyNotification&&"GFN"===this.igoConfig.branding}}return f.\u0275fac=function(g){return new(g||f)(t.LFG(s.ed),t.LFG(t.zs3),t.LFG(s.dF),t.LFG(w.g),t.LFG(s.Ob),t.LFG(h.OA),t.LFG(u.Ow))},f.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},24181:(He,de,e)=>{"use strict";e.d(de,{Kk:()=>A,SX:()=>S,In:()=>Y});var n=e(9170),i=e(53466),D=e(8095),m=e(17163),y=e(85816),T=e(98636),r=e(202),s=e(6484),p=e(2984),l=e(52349),t=e(59321),w=e(14179),h=e(7161),u=e(13335),o=e(12556),f=e(76491),c=e(79441),g=e(12702),I=e(68496),x=e(98221),E=e(77142),P=e(48225),v=e(31805),O=e(2316),C=e(47062),_=e(65119),F=e(13595),V=e(20376),b=e(44790),B=e(95102),U=(()=>{return(se=U||(U={}))[se.MIN_COMPACT_ICON_DURATION=1e3]="MIN_COMPACT_ICON_DURATION",se[se.MIN_EXPANDED_NETWORK_MESSAGE_DURATION=6e3]="MIN_EXPANDED_NETWORK_MESSAGE_DURATION",U;var se})(),A=(()=>{return(se=A||(A={}))[se.RECORD_SPECIAL_CASE_NONE=0]="RECORD_SPECIAL_CASE_NONE",se[se.RECORD_SPECIAL_CASE_4K=1]="RECORD_SPECIAL_CASE_4K",se[se.RECORD_SPECIAL_CASE_PLAYTEST=2]="RECORD_SPECIAL_CASE_PLAYTEST",A;var se})(),S=(()=>{return(se=S||(S={}))[se.NORMAL=0]="NORMAL",se[se.WARNING=1]="WARNING",se[se.ALERT=2]="ALERT",S;var se})();let Y=(()=>{class se{constructor($,ae,me,ye,ue,X,j,K,Z,L,W,te,ie,Q,k){this.injector=$,this.igoConfig=ae,this.featureSupportService=me,this.browserSupportService=ye,this.oscDisplayService=ue,this.projectInterfaceService=X,this.loggingService=j,this.bridgeService=K,this.hotkeyService=Z,this.hotkeyShareService=L,this.microphoneService=W,this.statisticsService=te,this.notifierService=ie,this.clientInputService=Q,this.dbService=k,this.streamingEndTime=-1,this.appTitle="",this.appInstanceId="",this.currentGameProfileName="",this.gfnEnabled=!1,this.imeEnabled=!1,this.throttleMs=333,this.isGfnMicEnabled=!1,this.$disableRecordSpecialCase=new f.X(A.RECORD_SPECIAL_CASE_NONE),this.$gpuFriendlyName=new f.X(""),this.$streamingTerminated=new c.xQ,this.$networkState=new f.X(S.NORMAL),this.subscriptions=[],this.networkStatusInit=!1,this.globalStore=null,this.igoNotifications="IgoNotifications",this.netWorkNotificationEnabled=!1,this.logger=this.loggingService.getLogger("GfnInfoService"),this.globalStore=this.dbService.getGlobalStore(this.igoNotifications)}init(){this.logger.info("GfnInfo service init"),!0===this.igoConfig.GFNCefClient&&this.igoConfig.IGOFeatureEnabled&&(this.streamerConfigService=this.injector.get(u.o),this.streamingService=this.injector.get(w.FW),this.streamingService.streamingEvent$.pipe((0,n.h)($=>$.event===w.V4.SESSION_SETUP_SUCCESS)).subscribe($=>{this.onSessionSetupSuccess($),this.onGetGpuName($),this.onGetGameName()}),this.streamingService.streamingEvent$.pipe((0,n.h)($=>$.event===w.V4.STREAMING_WARNINGS)).subscribe($=>{this.processStreamingWarningEvent($)}),this.streamingService.streamingEvent$.pipe((0,n.h)($=>$.event===w.V4.STREAMING_BEGIN)).subscribe(()=>{this.appTitle=this.streamingService.streamingParams.appName,this.streamingEndTime=-1}),this.feedbackService=this.injector.get(t.TB),this.surveyService=this.injector.get(o.FR5),this.nesUserInfoService=this.injector.get(o.fIQ),this.gfcHelperService=this.injector.get(o.dgl),this.lcarsService=this.injector.get(o.zcQ),this.appConfig=this.injector.get(o.VKt),s.ng.isBrowserPlatform()&&this.gfcHelperService.getAppInstanceId().subscribe($=>{this.appInstanceId=$}),this.featureSupportService.isGfnMicrophoneEnabled().pipe((0,i.q)(1)).subscribe($=>{this.isGfnMicEnabled=$,$&&(this.hotkeyService.listen(E.sW.MicToggle).pipe((0,D.p)(this.throttleMs),(0,m.M)(this.microphoneService.currentMicState$)).subscribe(([ae,me])=>{me!==l.tn.PermissionPending&&me!==l.tn.PermissionDenied&&this.microphoneService.toggleMicrophone()}),this.streamingService.streamingEvent$.pipe((0,n.h)(ae=>ae.event===w.V4.STREAMING_BEGIN)).subscribe(()=>{this.microphoneService.start(this.streamingService.streamingProperties.sessionId,this.streamingService.streamingProperties.subSessionId)}))}),this.streamingService.streamingEvent$.pipe((0,n.h)($=>$.event===w.V4.STREAMING_TERMINATED||$.event===w.V4.STOP_RESULT)).subscribe(()=>{this.isGfnMicEnabled&&this.microphoneService.stop(),this.$gpuFriendlyName.next(""),this.$streamingTerminated.next(!0),this.statisticsService.killStats(),this.$networkState.next(S.NORMAL),this.networkNotificationSubscription&&(this.networkNotificationSubscription.unsubscribe(),this.networkNotificationSubscription=void 0)}),this.idmService=this.injector.get(o.No2),this.idmService.accountStatusChanged.subscribe($=>{this.feedbackService.onAccountStatusChanged({userId:$.userId,externalUserId:$.externalId,idpId:$.idpId,isAuthenticated:$.isAuthenticated})}),this.gfnEnabled=!0,this.projectInterfaceService.triggerQuitStreaming.subscribe($=>{$&&this.quitStreaming()}),this.clientInputService.isImeEnabled$.subscribe($=>{this.logger.info("Checking ClientIME enablement value ",$),this.imeEnabled=$,this.imeEnabled?(this.hotkeyShareService.removeFromHotkeyIgnoreList(E.sW.NativeKeyboardInputDialog),this.hotkeyService.startListeningToHotkey(E.sW.NativeKeyboardInputDialog).subscribe()):this.hotkeyService.stopListeningToHotkey(E.sW.NativeKeyboardInputDialog)},$=>{this.logger.info("Error getting ClientIME enablement value, defaulting to false",$),this.hotkeyService.stopListeningToHotkey(E.sW.NativeKeyboardInputDialog),this.imeEnabled=!1}),this.releaseHighlights=this.injector.get(o.NS5),this.networkConfigurationService=this.injector.get(o.XS0),this.networkBarsUiService=this.injector.get(h.H9),this.settingsService=this.injector.get(o.gbG),this.networkConfigurationService.getNetworkOverride().subscribe($=>{null!=$&&(this.currentServer1={server:$.name})}),this.networkConfigurationService.getCurrentCachedZone().subscribe($=>{null!=$&&(this.currentServer2={server:$.name})}))}getstreamerConfig(){return this.streamerConfigService.activeConfig}processStreamingWarningEvent($){const ae=(0,r.pick)($,["time","warning"]);switch(ae.warning){case w.Y6.NVB_SN_APPROACHING_SESSION_MAX_TIMELIMIT:this.streamingEndTime=Date.now()+1e3*ae.time}}getStreamingEndTime(){return this.streamingEndTime}getStreamingTitle(){return this.appTitle}quitGfnStreaming(){this.gfnEnabled&&(this.oscDisplayService.closeOSC(x.Y.QuitGath),this.quitStreaming())}quitStreaming(){this.projectInterfaceService.exitStreamerCallBack().pipe((0,i.q)(1)).subscribe(()=>this.oscDisplayService.gfnQuitting())}exitFullScreen(){this.browserSupportService.exitFullscreen()}sendFeeback($){if(this.feedbackService.setUpToastContainer($),!this.gfnEnabled)return;const ae=()=>this.streamerConfigService.config$.pipe((0,y.zg)(ue=>this.surveyService.getAvailableSurvey([I.TriggerType.Feedback],`${ue.cmsId}`,this.streamingService.streamingProperties.sessionId))),me=()=>this.surveyService.isSurveyFeatureAvailable([I.TriggerType.Feedback]),ye=()=>this.surveyService.surveyEventListenerCloseDialog(I.TriggerType.Feedback);this.nesUserInfoService.fetchUserInfoWithStreamingUrl().pipe((0,y.zg)(ue=>this.feedbackService.initializeFeedback(ue.serviceEndpoint.loginProvider,ae,me,this.appInstanceId)),(0,n.h)(ue=>ue),(0,i.q)(1)).subscribe(()=>{this.feedbackService.onOpenFeedbackDialog(ye)})}getAppMetadataUsingCmsId($){return this.lcarsService.getMetadataByCmsId($)}getRecordSpecialCase(){return this.$disableRecordSpecialCase.asObservable()}onSessionSetupSuccess($){if(this.logger.info("OnSessionSetupSuccess EventInfo: ",$),this.hasWarningBeenShown=this.hasAlertBeenShown=this.ignoreQScore=!1,this.getNetworkNotificationStateFromMall(),this.networkStatusInit||(this.networkStatusInit=!0,this.networkStatus()),!this.featureSupportService.isControlUGCEnabled()||!this.igoConfig.ControlUGCEnabled)return void this.$disableRecordSpecialCase.next(A.RECORD_SPECIAL_CASE_NONE);const ae=$.streamSettings[0].videoSettings.resolution.width,me=$.streamSettings[0].videoSettings.resolution.height,ye=v._x.getIsPlaytestSession();this.logger.info("videoSettings.resolution.width : ",ae),this.logger.info("videoSettings.resolution.height: ",me),this.logger.info("DeeplinkService.isPlaytestSession: ",ye),ye?(this.logger.info("SpecialCase: PLAYTEST"),this.$disableRecordSpecialCase.next(A.RECORD_SPECIAL_CASE_PLAYTEST)):ae>=3840||me>=2160?(this.logger.info("Streaming at 4K, check if transcode to 1440p is supported for record"),this.bridgeService.executeCommand(p.Gh.Share.Shareserver.GetIf4KRecordingFallbackAvailable).subscribe(ue=>{this.logger.info("GetIf4KRecordingFallbackAvailable result:",ue),ue?(this.logger.info("SpecialCase: NONE"),this.$disableRecordSpecialCase.next(A.RECORD_SPECIAL_CASE_NONE)):(this.logger.info("SpecialCase: 4K"),this.$disableRecordSpecialCase.next(A.RECORD_SPECIAL_CASE_4K))},ue=>{this.logger.error("GetIf4KRecordingFallbackAvailable error:",ue),this.logger.info("SpecialCase: 4K"),this.$disableRecordSpecialCase.next(A.RECORD_SPECIAL_CASE_4K)})):(this.logger.info("SpecialCase: NONE"),this.$disableRecordSpecialCase.next(A.RECORD_SPECIAL_CASE_NONE))}getGpuName(){return this.$gpuFriendlyName.asObservable()}onGetGpuName($){this.$gpuFriendlyName.next($.gpuType)}streamingTerminated(){return this.$streamingTerminated.asObservable()}onGetGameName(){const $=this.bridgeService.executeCommand(p.Gh.Share.Shareserver.RegisterAppNotifications).pipe((0,n.h)(ae=>!!(null==ae?void 0:ae.appStarted))).subscribe(ae=>{this.currentGameProfileName=ae.appStarted.profileName,$.unsubscribe()})}showReleaseHighlight($){this.releaseHighlights.onShowReleaseHighlight(!1,$,"0")}getCurrentServer(){const $=null==this.currentServer1;return $&&null==this.currentServer2?{server:"Auto"}:$?this.currentServer2:this.currentServer1}networkStatus(){const $=this.networkBarsUiService.qualityInfo$.pipe((0,n.h)(()=>!this.ignoreQScore),(0,T.b)(()=>{this.ignoreQScore=!0})).subscribe(ae=>{let me=!1;if(this.netWorkNotificationEnabled)if(this.isQosUnderThreshold(ae.streamQuality))if(ae.streamQuality>this.appConfig.networkIndicators.alertThreshold){const ye=!(this.hasWarningBeenShown||this.hasAlertBeenShown),ue="notification.network.spottyConnection";this.hasWarningBeenShown=!0,ye?(me=!1,this.notifierService.show(P.ZJ.NetworkSpottyConnection,ue)):(me=!0,this.$networkState.next(S.WARNING))}else{const ye="notification.network.badNetworkMessage";this.hasAlertBeenShown?(me=!0,this.$networkState.next(S.ALERT)):(me=!1,this.notifierService.show(P.ZJ.NetworkBadConnection,ye)),this.hasAlertBeenShown=!0}else this.$networkState.next(S.NORMAL);else me=!1;this.delayTimer(me)});this.subscriptions.push($)}getNetworkNotificationStateFromMall(){var $;this.networkNotificationSubscription=null===($=this.settingsService)||void 0===$?void 0:$.networkWarningsEnabled$.subscribe(ae=>{this.netWorkNotificationEnabled=ae,this.globalStore.setItem("noteConnectionStatus",ae).pipe((0,i.q)(1)).subscribe(()=>{this.logger.info("Network Notification enabled: ",ae)},me=>{this.logger.error(`Unable to set noteConnectionStatus in store ${this.igoNotifications}`,me)})})}getNetworkState(){return this.$networkState.asObservable()}delayTimer($){const me=(0,g.H)($?U.MIN_COMPACT_ICON_DURATION:U.MIN_EXPANDED_NETWORK_MESSAGE_DURATION).subscribe(()=>{this.ignoreQScore=!1});this.subscriptions.push(me)}isQosUnderThreshold($){return $<=this.appConfig.networkIndicators.warningThreshold}}return se.\u0275fac=function($){return new($||se)(O.LFG(O.zs3),O.LFG(C.g),O.LFG(_.l),O.LFG(x.OA),O.LFG(F.v),O.LFG(l.m3),O.LFG(s.ed),O.LFG(s.dF),O.LFG(E.y1),O.LFG(V.q),O.LFG(l.pJ),O.LFG(b._6),O.LFG(P.nG),O.LFG(B.S),O.LFG(s.MC))},se.\u0275prov=O.Yz7({token:se,factory:se.\u0275fac,providedIn:"root"}),se})()},24338:(He,de,e)=>{"use strict";e.d(de,{i:()=>t});var n=e(6484),i=e(202),m=e(79441),y=e(85816),T=e(33392),r=e(1558),a=e(77142),s=e(2316),p=e(52349),l=e(20376);let t=(()=>{class w{constructor(u,o,f,c){this.dbCacheService=u,this.projectInterfaceService=o,this.hotkeyShareService=c,this.isHotKeyMappingInitialized$=new m.xQ,this.logger=f.getLogger("HotkeyMonitoringService"),this.inMemoryHotkeyMapping=new Map,this.igoShortcutsDb=this.dbCacheService.getOrCreateCachedGlobalItem(r.Vi,r.Sk.Shortcuts)}initOsInfo(u){this.defaultHotkeyMapping=u===n.wi.MacOS?r.u3:r.vq,this.projectInterfaceService.setShortcutCheckCallBacks(this.checkIfShortcutIsPresent.bind(this)),0===this.inMemoryHotkeyMapping.size&&this.initializeHotkeyMemory(),this.isHotKeyMappingInitialized$.next(!0),this.isHotKeyMappingInitialized$.complete()}get ignoreList(){return this.hotkeyShareService.hotkeyIgnoreList}initializeHotkeyMemory(){this.igoShortcutsDb.sync_().subscribe(()=>{this.cacheExists()?this.defaultHotkeyMapping.forEach((u,o)=>{void 0!==this.igoShortcutsDb[o]?this.inMemoryHotkeyMapping.set(o,this.igoShortcutsDb[o]):this.updateCacheAndMemory(o,u)}):this.resetToDefault()})}cacheExists(){return void 0!==this.igoShortcutsDb[a.sW.OpenIGO]}updateHotkeyMapping(u,o){this.inMemoryHotkeyMapping.set(u,o)}checkIfShortcutIsPresent(u){let o=null;const f=u.slice().sort();return this.defaultHotkeyMapping.forEach((c,g)=>{const I=c.slice().sort();if(!this.ignoreList.includes(g))if(this.inMemoryHotkeyMapping.has(g)&&void 0!==this.inMemoryHotkeyMapping.get(g)){const G=this.inMemoryHotkeyMapping.get(g).slice().sort();(0,i.isEqual)(G,f)&&(o=u)}else this.updateCacheAndMemory(g,I),(0,i.isEqual)(I,f)&&(o=u)}),o?(this.logger.info("Key combo is defined",o),o):[]}updateCacheAndMemory(u,o){this.igoShortcutsDb.sync_().pipe((0,y.zg)(()=>(this.igoShortcutsDb[u]=o,this.inMemoryHotkeyMapping.set(u,o),this.igoShortcutsDb.persist_()))).subscribe()}resetToDefault(){return this.resetToDefaultObs$().subscribe()}resetToDefaultObs$(){return this.igoShortcutsDb.sync_().pipe((0,T.j)(u=>this.isHotKeyMappingInitialized$),(0,y.zg)(()=>(this.defaultHotkeyMapping.forEach((u,o)=>{this.igoShortcutsDb[o]=u,this.inMemoryHotkeyMapping.set(o,u)}),this.igoShortcutsDb.persist_())))}}return w.\u0275fac=function(u){return new(u||w)(s.LFG(n.LA),s.LFG(p.m3),s.LFG(n.ed),s.LFG(l.q))},w.\u0275prov=s.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},77142:(He,de,e)=>{"use strict";e.d(de,{sW:()=>E,z9:()=>P,y1:()=>v});var n=e(79441),i=e(42720),D=e(81134),m=e(9170),y=e(33927),T=e(85816),r=e(18293),a=e(53466),s=e(67202),p=e(98636),l=e(6484),t=e(2984),w=e(202);class h{constructor(C){this.osrName=C}}const o={CMD:new h("cmd"),N0:new h("0"),ALT:new h("alt"),TAB:new h("tab"),CTRL:new h("ctrl")};var f=e(92941),c=e(2316);class g{constructor(C,_,F){this.bridgeService=_,this.systemInfoService=F,this.keyPressCallback$=new n.xQ,this.keyBindings=new Map,this.platformUniqueKeys=new Map,this.logger=C.getLogger("gfn/KeybindingService"),this.setPlatformUniqueKeys(),this.init()}registerKeyBinding(C,_){if(0===C.length)throw Error("Key combination cannot have length 0");for(const V of C)if(this.platformUniqueKeys.has(V)&&!this.platformUniqueKeys.get(V).includes(_))throw Error(`Key ${V.osrName} is not supported by current platform`);const F=this.generateKeyBindingName(C);if(this.keyBindings.has(F))throw Error("Key combination already exists in keyBindings");return this.keyBindings.set(F,C),this.osrRegisterCustomKeyPress(F,F).subscribe(f.Z,V=>{this.logger.error(`Failed to register ${F} with error`,V)}),new g.KeyBindImpl(F,this,this.keyPressCallback$.pipe((0,m.h)(V=>V===F)))}unregisterKeyBinding(C){if(!this.keyBindings.has(C))throw Error(`Key binding ${C} does not exist and cannot be unregisterd.`);this.keyBindings.delete(C),this.osrUnregisterCustomKeyPress(C).subscribe(f.Z,_=>{this.logger.error(`Failed to unregister ${C} with error`,_)})}generateKeyBindingName(C){return(0,w.map)(C,"osrName").join("-")}init(){this.registerKeybindingCallback()}setPlatformUniqueKeys(){this.platformUniqueKeys.set(o.CMD,[l.wi.MacOS])}registerKeybindingCallback(){this.logger.info("osrRegisterKeyPressCallback"),this.systemInfoService.getDeviceOSType().pipe((0,T.zg)(C=>this.bridgeService.executeCommand(t.Gh.Gfn.Streaming.OsrRegisterKeyPressCallback,{osType:C}))).subscribe(C=>{if(null!==C){const _=C.toString();this.keyBindings.has(_)?this.keyPressCallback$.next(_):this.logger.error("Unhandled custom keypress event type: ",_)}else this.logger.error("null custom keypress event: ",C)},C=>{this.logger.error("osrRegisterKeyPressCallback callback failure",C)})}osrRegisterCustomKeyPress(C,_){return this.logger.info("osrRegisterCustomKeyPress",C,_),this.bridgeService.executeCommand(t.Gh.Gfn.Streaming.OsrRegisterCustomKeyPress,{name:C,keyCombination:_})}osrUnregisterCustomKeyPress(C){return this.logger.info("osrUnregisterCustomKeyPress",C),this.bridgeService.executeCommand(t.Gh.Gfn.Streaming.OsrUnregisterCustomKeyPress,{keyCombination:C})}}g.KeyBindImpl=class{constructor(O,C,_){this.keyBindingName=O,this.parent=C,this.keyPressed$=new n.xQ,_.subscribe(this.keyPressed$)}get onKeyPressed$(){return this.keyPressed$.asObservable()}unregister(){this.parent.unregisterKeyBinding(this.keyBindingName),this.keyPressed$.complete()}},g.\u0275fac=function(C){return new(C||g)(c.LFG(l.ed),c.LFG(l.dF),c.LFG(l.Ob))},g.\u0275prov=c.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"});var I=e(19481),G=e(47062),x=e(20376),E=t.Yk.Share.Shareserver.HotkeyEnum,P=(()=>{return(O=P||(P={})).Valid="Valid",O.Invalid="Invalid",O.InUse="InUse",O.Error="Error",P;var O})();let v=(()=>{class O{constructor(_,F,V,b,B,U,A){this.loggingService=_,this.bridgeService=F,this.igoConfig=V,this.injector=b,this.hotkeyShareService=B,this.hotKeyHelper=U,this.systemInfoService=A,this.hkCallback$=new n.xQ,this.hkPTTCallback$=new n.xQ,this.hotkeyList={},this.gfnHotkeyMappings={},this.keybindingService=null,this.streamerManagerService=null,this.blockHotkeys=!1,this.logger=this.loggingService.getLogger("HotkeyService")}listen(_){return this.hkCallback$.pipe((0,m.h)(F=>F===_))}listenPTT(){return this.hkPTTCallback$.asObservable()}init(){this.logger.info("Hotkey service init"),!0===this.igoConfig.GFNCefClient&&this.igoConfig.IGOFeatureEnabled&&(this.keybindingService=this.injector.get(g),this.streamerManagerService=this.injector.get(I.bF)),this.getAllHotkeys(),this.bridgeService.executeCommand(t.Gh.Share.Shareserver.RegisterHotkeyNotifications).subscribe(_=>this.hotkeyEvent(_))}get ignoreList(){return this.hotkeyShareService.hotkeyIgnoreList}hotkeyEvent(_){null===_||(this.logger.info("Hotkey: ",_),this.blockHotkeys||void 0===_.hotkey)||("PTT"===_.hotkey?this.hkPTTCallback$.next("Down"===_.state):this.hkCallback$.next(_.hotkey))}getAllHotkeys(){const _=Object.keys(E).map(V=>E[V]),F=[];_.forEach(V=>{const b=E[V];F.push(this.getHotkeyNum(b).pipe((0,y.U)(B=>(this.hotkeyList[b]=B,!0))))}),(0,i.D)(F).subscribe(()=>{_.forEach(V=>{const b=E[V];this.keybindingService&&this.hotkeyList[b]&&this.hotkeyList[b].length>0&&this.registerGfnHotkey(b,this.hotkeyList[b])})})}getHotkeyNum(_){return this.hotkeyList[_]?(0,D.of)(this.hotkeyList[_]):this.bridgeService.executeCommand(t.Gh.Share.Shareserver.GetHotkeyShortcut,{hotkey:_}).pipe((0,y.U)(F=>F.keys))}getHotkeyString(_){return this.hotkeyList[_]?(0,D.of)(this.hotKeyHelper.shortcutToString(this.hotkeyList[_])):this.getHotkeyNum(_).pipe((0,y.U)(F=>this.hotKeyHelper.shortcutToString(F)))}setHotkeyString(_,F){return this.checkIfValidGfnHotkey(F).pipe((0,T.zg)(V=>V?this.bridgeService.executeCommand(t.Gh.Share.Shareserver.SetHotkeyShortcut,{hotkey:_,keys:F}):(0,D.of)({_return_internal:t.Yk.Share.Shareserver.InternalErrorCodeEnum.GXP_Error_InvalidArg})),(0,y.U)(V=>V._return_internal===t.Yk.Share.Shareserver.InternalErrorCodeEnum.GXP_Success_Ok?(this.keybindingService&&(this.gfnHotkeyMappings[_]&&(this.gfnHotkeyMappings[_].unregister(),this.gfnHotkeyMappings[_]=void 0),(1!==F.length||0!==F[0])&&this.registerGfnHotkey(_,F)),this.hotkeyList[_]=F,P.Valid):V._return_internal===t.Yk.Share.Shareserver.InternalErrorCodeEnum.GXP_Error_InvalidArg?P.Invalid:V._return_internal===t.Yk.Share.Shareserver.InternalErrorCodeEnum.GXP_Error_HotkeyInUse?P.InUse:(this.logger.info("SetHotkeyShortcut Unhandled result: ",V._return_internal),P.Error)),(0,r.K)(V=>(this.logger.info("SetHotkeyShortcut failed: ",V),(0,D.of)(P.Error))))}checkForDup(_,F){let V=!1;const b=_.slice().sort();return F.forEach(B=>{if(this.hotkeyList[B].length){const U=this.hotkeyList[B].slice().sort();(0,w.isEqual)(b,U)&&(V=!0)}}),V}checkIdenticalEntry(_,F){const V=_.slice().sort(),b=this.hotkeyList[F].slice().sort();return(0,w.isEqual)(V,b)}checkIfModifierKey(_){let F=!1;return l.Du.forEach(V=>{V===_&&(F=!0)}),F}checkIfWinKey(_){return 91===_||92===_}checkIfValidGfnHotkey(_){if(!this.keybindingService||!_||0===_.length||1===_.length&&0===_[0])return(0,D.of)(!0);const b=_.map(B=>this.hotKeyHelper.processKey(B).toLowerCase()).map(B=>new h(B)).map(B=>B.osrName).join("-");return this.bridgeService.executeCommand(t.Gh.Gfn.Streaming.OsrCheckKeyPressCombination,{keyCombination:b}).pipe((0,r.K)(B=>(this.logger.info("Check KeyPress Combo err: ",B),(0,D.of)(!0))))}registerGfnHotkey(_,F){if(-1!==this.ignoreList.indexOf(_))return;const B=F.map(U=>this.hotKeyHelper.processKey(U).toLowerCase()).map(U=>new h(U));this.gfnHotkeyMappings[_]&&this.gfnHotkeyMappings[_].unregister(),(1!==F.length||0!==F[0])&&this.systemInfoService.getDeviceOSType().pipe((0,a.q)(1)).subscribe(U=>{this.gfnHotkeyMappings[_]=this.keybindingService.registerKeyBinding(B,U),this.gfnHotkeyMappings[_]&&this.gfnHotkeyMappings[_].onKeyPressed$.subscribe(()=>{this.logger.info("key pressed: ",_),!this.blockHotkeys&&this.streamerManagerService.getCurrentState()===I.$D.Streaming&&this.hkCallback$.next(_)})})}blockAllHotkeys(_){return this.blockHotkeys=_,this.bridgeService.executeCommand(t.Gh.Share.Shareserver.SetHotkeyMonitoring,{enable:!_}).pipe((0,y.U)(F=>(this.logger.info("setHotkeyMonitoring returned: ",F),!0)),(0,r.K)(F=>(this.logger.error("setHotkeyMonitoring failed: ",F),(0,D.of)(!1))))}stopListeningToHotkey(_){this.hotkeyList[_]&&this.hotkeyList[_].length<=0||(this.keybindingService&&this.gfnHotkeyMappings[_]&&(this.gfnHotkeyMappings[_].unregister(),this.gfnHotkeyMappings[_]=void 0),this.ignoreList.push(_))}startListeningToHotkey(_){if(void 0===this.hotkeyList[_]||this.hotkeyList[_].length<=0)return(0,D.of)(!0);const F=this.ignoreList.indexOf(_);return F>=0&&this.ignoreList.splice(F,1),this.keybindingService?this.resolveInnerConflicts(_):(0,D.of)(!0)}resolveInnerConflicts(_){const F=[];return this.systemInfoService.getDeviceOSType().pipe((0,a.q)(1),(0,y.U)(V=>{this.removeMappings(_,F,V),F&&F.length>0&&F.forEach(b=>{this.setHotkeyString(b,this.hotkeyShareService.hotkeyMapping(V).get(b)).subscribe(B=>{B===P.Valid?this.logger.info("Resolve Conflicts result is: ",B):this.logger.error("Some Error occurred while resolving conflicts")})}),this.registerGfnHotkey(_,this.hotkeyList[_])}),(0,s.h)(!0))}removeMappings(_,F,V){const b=this.findDuplicate(_,F,V);void 0!==b&&(this.gfnHotkeyMappings[b]&&(this.gfnHotkeyMappings[b].unregister(),this.gfnHotkeyMappings[b]=void 0),F.push(b),this.removeMappings(b,F,V))}findDuplicate(_,F,V){let b;return Object.keys(E).map(U=>E[U]).forEach(U=>{const A=E[U];if(A!==_&&(void 0!==this.hotkeyList[A]||this.hotkeyList[A].length>0))if(0===F.length)this.checkIdenticalEntry(this.hotkeyList[A],_)&&(b=A);else{const S=this.hotkeyShareService.hotkeyMapping(V).get(_);b=S&&this.checkIdenticalEntry(S,A)?A:void 0}}),this.logger.info("duplicate hotkey found: ",b),b}resetToDefaults(){return this.bridgeService.executeCommand(t.Gh.Share.Shareserver.ResetHotkeysToDefault).pipe((0,r.K)(()=>(0,D.of)(!0)),(0,p.b)(()=>{this.hotkeyList={},this.keybindingService&&Object.keys(E).map(F=>E[F]).forEach(F=>{this.gfnHotkeyMappings[F]&&(this.gfnHotkeyMappings[F].unregister(),this.gfnHotkeyMappings[F]=void 0)}),this.getAllHotkeys()}),(0,s.h)(!0))}}return O.\u0275fac=function(_){return new(_||O)(c.LFG(l.ed),c.LFG(l.dF),c.LFG(G.g),c.LFG(c.zs3),c.LFG(x.q),c.LFG(l.d_),c.LFG(l.Ob))},O.\u0275prov=c.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},20376:(He,de,e)=>{"use strict";e.d(de,{q:()=>T});var n=e(2984),i=e(6484),D=e(1558),m=e(2316),y=n.Yk.Share.Shareserver.HotkeyEnum;let T=(()=>{class r{constructor(){this.ignoreList=[y.DVRSave]}addToHotkeyIgnoreList(s){-1===this.ignoreList.indexOf(s)&&this.ignoreList.push(s)}removeFromHotkeyIgnoreList(s){s&&(this.ignoreList=this.ignoreList.filter(p=>p!==s))}get hotkeyIgnoreList(){return this.ignoreList}hotkeyMapping(s){return s===i.wi.MacOS?D.u3:D.vq}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=m.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},81468:(He,de,e)=>{"use strict";e.d(de,{f:()=>T});var n=e(79441),i=e(2316),D=e(6484),m=e(78711),y=e(71258);let T=(()=>{class r{constructor(s,p,l){this.telemetryHelperService=p,this.router=l,this.disableEscape=!1,this.escapeCallback$=new n.xQ,this.centerPaneCallback$=new n.xQ,this.centerPaneOpened=!1,this.logger=s.getLogger("NavigationService")}escapeEvent(){return this.escapeCallback$.asObservable()}centerPaneClosedEvent(){return this.centerPaneCallback$.asObservable()}navigate(s,p,l){this.disableEscape=!1;const t=Date.now();return l?this.router.navigate(s,p).then(w=>(this.telemetryHelperService.trackNavigation(t,l),w)):this.router.navigate(s,p)}goToNextNavState(){this.disableEscape||(this.centerPaneOpened?this.centerPaneCallback$.next():this.escapeCallback$.next(),this.centerPaneOpened=!1),this.disableEscape=!1}openCenterPane(s){this.centerPaneOpened&&!s&&this.centerPaneCallback$.next(),this.centerPaneOpened=s}disableEscapeEvent(s){this.disableEscape=s}disableCenterPaneCallback(){this.centerPaneOpened=!1}}return r.\u0275fac=function(s){return new(s||r)(i.LFG(D.ed),i.LFG(m.l),i.LFG(y.F0))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},13595:(He,de,e)=>{"use strict";e.d(de,{v:()=>S});var n=e(71258),i=e(76491),D=e(81134),m=e(61486),y=e(90425),T=e(89919),r=e(67202),a=e(18293),s=e(53466),p=e(79902),l=e(9170),t=e(98636),w=e(84515),h=e(85816),u=e(6484),o=e(2984),f=e(87335),c=e(68637),g=e(77142),I=e(48225),G=e(10125),x=e(60),E=e(19481),P=e(98221),v=e(2316),O=e(65119),C=e(91213),_=e(47062),F=e(78711),V=e(81468),b=e(22213),B=e(68456),U=e(52349),A=e(95102);let S=(()=>{class Y{constructor(fe,$,ae,me,ye,ue,X,j,K,Z,L,W,te,ie,Q,k,oe){this.featureSupportService=fe,this.hotkeyService=$,this.notifierService=ae,this.loggingService=me,this.bridgeService=ye,this.osdService=ue,this.injector=X,this.igoConfig=j,this.telemetry=K,this.navigationService=Z,this.dialog=L,this.snackBar=W,this.browserSupportService=te,this.projectInterfaceService=ie,this.gamepadService=Q,this.clientInputService=k,this.systemInfoService=oe,this.transitioning=!1,this.openNoInput=0,this.openWithInput=!1,this.needToOpen=!1,this.paintingAllowed=!0,this.lastActiveWindow=null,this.inDesktopMode=null,this.inFakeFSMode=null,this.inGamepadOrientedMode=null,this.isGfnBrowserDevMode=null,this.appInFocus=null,this.needTransitionWorkaround=!1,this.pathSegments=[],this.startingState="sidebar/main-menu",this.startingStateName=G.wB.mainMenu,this.osrHandler=null,this.applicationLifetime=null,this.quitShownHandle=null,this.isXboxHotkeyNotification=!1,this.currentOpenState$=new i.X("closed"),this.currentDesktopMode$=new i.X("desktop"),this.showUI$=new i.X(!0),this.gfnStreamerService=null,this.storeDelayedState=void 0,this.osdDisplayRect=[],this.notificationDisplayRect=[],this.streamerState$=new i.X(void 0),this.logger=this.loggingService.getLogger("OscDisplayService"),this.inGamepadOrientedMode=fe.isGamepadOrientedMode(),this.isGfnBrowserDevMode=fe.isGfnBrowserDevMode(),j.Path&&(this.pathSegments=j.Path.split("/"))}getCurrentOpenStateImmediate(){return this.currentOpenState$.value}getCurrentOpenState(){return this.currentOpenState$.asObservable()}getCurrentDesktopMode(){return this.currentDesktopMode$.asObservable()}getLastActiveWindow(){return this.lastActiveWindow}getCanShowUI(){return this.showUI$.asObservable()}getIsUIAllowed(){return this.showUI$.value}doOpenWindow(fe,$=!1){return u.ng.isBrowserPlatform()&&fe&&this.browserSupportService.setExitPath(P.Y.IGO),null!==this.osrHandler?this.osrHandler.open(fe).pipe((0,r.h)(null)):(!fe&&$?setTimeout(()=>{this.openNoInput>0&&!this.openWithInput&&this.setDisplayRects().subscribe()},1e3):fe?this.unsetDisplayRects().subscribe():this.setDisplayRects().subscribe(),this.bridgeService.executeCommand(o.Gh.Share.Osc.OpenWindow,{enableInput:fe}))}doCloseWindow(fe){u.ng.isBrowserPlatform()&&this.browserSupportService.resetExitPath(),null===this.osrHandler?(this.unsetDisplayRects().subscribe(),this.bridgeService.executeCommand(o.Gh.Share.Osc.CloseWindow).subscribe()):this.osrHandler.close().subscribe()}setDisplayRects(){return"GFE"===this.igoConfig.branding?this.bridgeService.executeCommand(o.Gh.Share.Osc.SetDisplayRects,{displayRects:[...this.osdDisplayRect,...this.notificationDisplayRect]}).pipe((0,a.K)(()=>(0,D.of)("Error setting display rects"))):(0,D.of)("")}unsetDisplayRects(){return"GFE"===this.igoConfig.branding?this.bridgeService.executeCommand(o.Gh.Share.Osc.SetDisplayRects,{displayRects:[]}).pipe((0,a.K)(()=>(0,D.of)("Error setting display rects"))):(0,D.of)("")}init(){if(this.logger.info("initialized osc display"),this.router=this.injector.get(n.F0),!0===this.igoConfig.GFNCefClient&&this.igoConfig.IGOFeatureEnabled){const ae=this.injector.get(x.V$);ae&&(this.osrHandler=ae.createOsrHandler("OscDisplayService")),this.applicationLifetime=this.injector.get(f.Ll),this.applicationLifetime&&(this.quitShownHandle=this.applicationLifetime.addWorkOnShutdownRequested(this.gfnQuitting.bind(this))),this.showUI$.next(!1),this.gfnStreamerService=this.injector.get(E.bF),this.gfnStreamerService.getCurrentStateChanges().subscribe(me=>{this.logger.info("streaming state change: ",me),this.streamerState$.next(me),me===E.$D.Streaming?this.gfnStreamingEnter():this.gfnStreamingExit()}),this.projectInterfaceService.triggerCloseIGO.subscribe(me=>{me&&this.closeOSC(P.Y.QuitGath)}),this.clientInputService.inputControlUIOpened$.subscribe(()=>{this.closeOSC()}),this.clientInputService.imeOpened$.subscribe(me=>{me&&this.closeOSC()})}this.router.events.subscribe(ae=>{ae instanceof n.OD?this.preNavigate(ae.url):ae instanceof n.m2&&this.postNavigate()}),this.isXboxHotkeyNotification=this.featureSupportService.isConsoleHotKeyNotificationCombination(),this.bridgeService.executeCommand(o.Gh.Share.Shareserver.RegisterWindowStateChangeNotifications).subscribe(ae=>this.windowEvent(ae));const fe=(0,m.aj)([this.projectInterfaceService.enableListener,this.getCanShowUI(),this.systemInfoService.getDeviceOSType().pipe((0,s.q)(1))]).pipe((0,p.w)(([ae,me,ye])=>ae&&me?ye===u.wi.XBox?this.gamepadService.onButtonComboPressed$([c.z.DpadUp,c.z.LeftBumper]).pipe((0,l.h)(ue=>ue),(0,t.b)(ue=>this.logger.info("IGO hotkey combination buttons pressed."))):this.getCurrentOpenState().pipe((0,p.w)(ue=>{const X=this.gamepadService.onButtonPressed$(c.z.Start).pipe((0,l.h)(j=>!1===j));return"closed"===ue?this.gamepadService.onButtonLongPressed$(c.z.Start):X.pipe((0,w.T)(1))})):y.C));(this.inGamepadOrientedMode?(0,T.T)(this.hotkeyService.listen(g.sW.OpenIGO),fe):this.hotkeyService.listen(g.sW.OpenIGO)).subscribe(()=>this.toggleOSCFromHotkey()),this.igoConfig.GFNCefClient||this.bridgeService.executeCommand(o.Gh.Share.Osc.RegisterCloseCommand).subscribe(()=>{this.closeOSC()}),this.isGfnBrowserDevMode&&this.inGamepadOrientedMode&&this.gamepadService.onButtonComboPressed$([c.z.LeftBumper,c.z.LeftTrigger,c.z.X]).pipe((0,l.h)(ae=>ae),(0,h.zg)(()=>this.bridgeService.executeCommand(o.Gh.Gfn.Streaming.ToggleOnScreenStats))).subscribe()}preNavigate(fe){"/"!==fe&&(this.bridgeService.executeCommand(o.Gh.Share.Osc.SetPainting,{enablePainting:!1}).subscribe(),this.paintingAllowed=!1),this.needToOpen&&(this.needToOpen=!1,this.doOpenWindow(!0).subscribe($=>{$&&"noWindow"!==$&&(this.lastActiveWindow=$),this.notifyOverlayState(!0),this.telemetry.sendStartupTelemetry()}))}postNavigate(){this.needTransitionWorkaround?(this.needTransitionWorkaround=!1,this.router.navigate([...this.pathSegments,{outlets:{igo:[this.startingState]}}]),this.logger.info("Going to starting state now")):(this.paintingAllowed||(this.bridgeService.executeCommand(o.Gh.Share.Osc.SetPainting,{enablePainting:!0}).subscribe(),this.paintingAllowed=!0),this.transitioning=!1)}windowEvent(fe){if(null!=fe)if(this.logger.info("Window event: ",fe),"dismiss"===fe.windowMsg)this.closeOSC();else if("fullscreenTransition"===fe.windowMsg)null!==this.inDesktopMode&&(this.openNoInput||this.openWithInput)&&this.getFSMode().subscribe($=>{if(!$)return;const ae=!$.fullscreen;(ae!==this.inDesktopMode||!ae&&$.borderlessMode!==this.inFakeFSMode)&&(this.inDesktopMode=ae,this.inFakeFSMode=$.borderlessMode,this.logger.info("new fs state: ",$.fullscreen,$.borderlessMode,$),this.currentDesktopMode$.next(this.inDesktopMode?"desktop":"fullscreen"),this.transitionDisplayFullscreen(),this.logger.info("closing OSC because of state change"))});else if("overlayToggle"===fe.windowMsg)this.toggleOSCFromHotkey();else if("showHotkeyMessage"===fe.windowMsg){const $="GFE"===this.igoConfig.branding?"product.GFE":"product.GFN";this.inGamepadOrientedMode&&!this.isXboxHotkeyNotification?this.notifierService.show(I.ZJ.OpenShare,$,"","","",!0):this.inGamepadOrientedMode&&this.isXboxHotkeyNotification?this.notifierService.show(I.ZJ.OpenShare,"notification.HotkeyForXbox",$):this.hotkeyService.getHotkeyString(o.Yk.Share.Shareserver.HotkeyEnum.OpenIGO).subscribe(ae=>{ae&&ae.length&&this.notifierService.show(I.ZJ.OpenShare,ae,$)})}}gfnStreamingEnter(){this.showUI$.next(!0),this.bridgeService.executeCommand(o.Gh.Gfn.Streaming.OsrSetOverlayResolution,{width:1920,height:1080}).subscribe(),this.storeDelayedState&&this.storeDelayedState.state&&this.storeDelayedState.state.length>0&&setTimeout(()=>{this.openOSC(this.storeDelayedState.state,this.storeDelayedState.stateParams),this.storeDelayedState=void 0},500)}gfnStreamingExit(){!this.getIsUIAllowed()||(this.showUI$.next(!1),this.closeAll(),this.bridgeService.executeCommand(o.Gh.Gfn.Streaming.OsrSetOverlayResolution,{width:0,height:0}).subscribe())}gfnQuitting(){return this.openWithInput&&this.closeOSC(),(0,D.of)(!1)}getFSMode(){return this.bridgeService.executeCommand(o.Gh.Share.Osc.FullscreenState)}getAppInFocus(){return this.appInFocus}requestAppInFocus(){return this.bridgeService.executeCommand(o.Gh.Share.Shareserver.GetCaptureProcessInfo,{appType:o.Yk.Share.Shareserver.AppType.in_focus}).pipe((0,h.zg)(fe=>(this.logger.info("requestAppInFocus: success ",fe),this.appInFocus=fe,(0,D.of)(!0))),(0,a.K)(fe=>(this.logger.info("requestAppInFocus: error ",fe),(0,D.of)(!0))))}closeAll(){for(this.openWithInput&&this.closeOSC();this.openNoInput>0;)this.closeOSCForNotification();this.doCloseWindow()}openOSC(fe=null,$={}){this.transitioning||(this.clientInputService.imeInputInProgress&&setTimeout(()=>{this.clientInputService.closeImeInput()}),this.clientInputService.toggleInputUI(!1),this.requestAppInFocus().subscribe(()=>{this.openSelectedOSC(fe,$)}))}openSelectedOSC(fe=null,$={}){if(this.showUI$.value)return!fe&&""!==fe&&(fe=this.startingState),this.router.url===this.startingState&&(this.needTransitionWorkaround=!0,fe=null,this.logger.info("Need transition workaround")),this.openWithInput||(this.transitioning=!0,this.openWithInput=!0,this.needToOpen=!0,this.currentOpenState$.next("open")),this.getFSMode().subscribe(ae=>{!ae||(this.inDesktopMode=!ae.fullscreen)},ae=>{this.logger.info("Could not query fs state: ",ae),this.inDesktopMode=!0},()=>{this.currentDesktopMode$.next(this.inDesktopMode?"desktop":"fullscreen")}),fe&&""!==fe?void this.navigationService.navigate([...this.pathSegments,{outlets:{igo:[...fe.split("/"),$]}}],{skipLocationChange:!0},this.startingStateName):(this.preNavigate("/"),void this.postNavigate());this.storeDelayedState={state:fe,stateParams:$}}navigateToNull(){return this.navigationService.navigate([...this.pathSegments,{outlets:{igo:null}}],{skipLocationChange:!0},G.wB.none)}closeOSC(fe){!this.openWithInput||this.transitioning||(this.dialog.closeAll(),this.snackBar.dismiss(),this.appInFocus=null,this.openWithInput=!1,this.navigateToNull().then($=>{$||(this.logger.info("navigation failed, retrying"),setTimeout(()=>{this.navigateToNull()},100))},$=>{this.logger.info("navigation rejected: ",$),setTimeout(()=>{this.navigateToNull()},100)}),this.currentOpenState$.next("closed"),this.notifyOverlayState(!1),this.openNoInput>0?(this.logger.info("Open OSC without input"),this.doOpenWindow(!1,!0).subscribe(),setTimeout(()=>{this.setDisplayRects().subscribe()})):(this.logger.info("Close OSC"),this.doOpenWindow(!1,!0).subscribe(),setTimeout(()=>{0===this.openNoInput&&!this.openWithInput&&this.doCloseWindow(fe)},1e3)))}openOSCForNotification(){!this.showUI$.value||(this.openNoInput+=1,this.openWithInput||(this.logger.info("Open OSC without input"),this.doOpenWindow(!1).subscribe()))}closeOSCForNotification(){0!==this.openNoInput&&(this.openNoInput-=1,this.openNoInput<0&&(this.openNoInput=0),setTimeout(()=>{0===this.openNoInput&&!this.openWithInput&&(this.logger.info("Close OSC"),this.doCloseWindow(P.Y.OscNotification))},5e3))}convertRect(fe){return fe.map($=>({x:Math.round($.x),y:Math.round($.y),width:Math.round($.width),height:Math.round($.height)}))}setOSDDisplayRectangles(fe){this.osdDisplayRect=this.convertRect(fe),this.openNoInput>0&&!this.openWithInput&&this.setDisplayRects().subscribe()}setNotificationDisplayRectangles(fe){this.notificationDisplayRect=this.convertRect(fe),this.openNoInput>0&&!this.openWithInput&&this.setDisplayRects().subscribe()}transitionDisplayFullscreen(){this.openNoInput<=0&&!this.openWithInput||(this.doCloseWindow(),setTimeout(()=>{this.logger.info("Reopening OSC after state change"),this.doOpenWindow(this.openWithInput).subscribe(),this.osdService.triggerChange(null)},1e3))}notifyOverlayState(fe){}toggleOSCFromHotkey(){this.transitioning||(this.openWithInput?this.closeOSC():(this.telemetry.beginStartupTimer(G.bq.openHotkey),this.openOSC()))}}return Y.\u0275fac=function(fe){return new(fe||Y)(v.LFG(O.l),v.LFG(g.y1),v.LFG(I.nG),v.LFG(u.ed),v.LFG(u.dF),v.LFG(C.Ec),v.LFG(v.zs3),v.LFG(_.g),v.LFG(F.l),v.LFG(V.f),v.LFG(b.uw),v.LFG(B.ux),v.LFG(P.OA),v.LFG(U.m3),v.LFG(c.S),v.LFG(A.S),v.LFG(u.Ob))},Y.\u0275prov=v.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})()},48225:(He,de,e)=>{"use strict";e.d(de,{ZJ:()=>m,_R:()=>y,nG:()=>T});var n=e(79441),i=e(2316),D=e(6484),m=(()=>{return(r=m||(m={}))[r.Empty=0]="Empty",r[r.OpenShare=1]="OpenShare",r[r.InstantReplayStarted=2]="InstantReplayStarted",r[r.InstantReplayStopped=3]="InstantReplayStopped",r[r.InstantReplaySaving=4]="InstantReplaySaving",r[r.InstantReplaySaved=5]="InstantReplaySaved",r[r.RecordStarted=6]="RecordStarted",r[r.RecordSaving=7]="RecordSaving",r[r.RecordStopped=8]="RecordStopped",r[r.ScreenshotSaved=9]="ScreenshotSaved",r[r.PhotographicScreenshotSavedToGallery=10]="PhotographicScreenshotSavedToGallery",r[r.WarningFullscreenGameRequired=11]="WarningFullscreenGameRequired",r[r.WarningRecordingStopToCustomize=12]="WarningRecordingStopToCustomize",r[r.WarningHighlightsStopToCustomize=13]="WarningHighlightsStopToCustomize",r[r.WarningRecordingStopToUseFeature=14]="WarningRecordingStopToUseFeature",r[r.WarningInstantReplayStopToUseFeature=15]="WarningInstantReplayStopToUseFeature",r[r.WarningSupportedGameRequired=16]="WarningSupportedGameRequired",r[r.WarningNvidiaGpuRequired=17]="WarningNvidiaGpuRequired",r[r.HighlightsSaved=18]="HighlightsSaved",r[r.FailedToRemove=19]="FailedToRemove",r[r.GalleryIsFull=20]="GalleryIsFull",r[r.DiskSpaceIsLow=21]="DiskSpaceIsLow",r[r.NoSpaceCaptureNotSaved=22]="NoSpaceCaptureNotSaved",r[r.NoSpaceCaptureNotStarted=23]="NoSpaceCaptureNotStarted",r[r.ErrorRestartGame=24]="ErrorRestartGame",r[r.BroadcastStarted=25]="BroadcastStarted",r[r.BroadcastPaused=26]="BroadcastPaused",r[r.BroadcastResumed=27]="BroadcastResumed",r[r.BroadcastStopped=28]="BroadcastStopped",r[r.PhotoModeNotAllowed=29]="PhotoModeNotAllowed",r[r.CustomOverlaySlotEmpty=30]="CustomOverlaySlotEmpty",r[r.ManualRecordRunning=31]="ManualRecordRunning",r[r.BroadcastRunning=32]="BroadcastRunning",r[r.ConnectingToGfnBroadcast=33]="ConnectingToGfnBroadcast",r[r.ConnectedToGfnBroadcast=34]="ConnectedToGfnBroadcast",r[r.FailedToConnectGfnBroadcast=35]="FailedToConnectGfnBroadcast",r[r.DisconnectedFromGfnBroadcast=36]="DisconnectedFromGfnBroadcast",r[r.NetworkSpottyConnection=37]="NetworkSpottyConnection",r[r.NetworkBadConnection=38]="NetworkBadConnection",r[r.OnscreenKeyboardUsage=39]="OnscreenKeyboardUsage",m;var r})(),y=(()=>{return(r=y||(y={}))[r.Empty=0]="Empty",r[r.OpenOverlay=1]="OpenOverlay",r[r.ConnectionStatus=2]="ConnectionStatus",r[r.SaveIRToGallery=3]="SaveIRToGallery",r[r.SaveMRToGallery=4]="SaveMRToGallery",r[r.SaveSSToGallery=5]="SaveSSToGallery",r[r.SaveHLToGallery=6]="SaveHLToGallery",r[r.IROnOff=7]="IROnOff",r[r.MROn=8]="MROn",r[r.BCOnOff=9]="BCOnOff",r[r.BCPauseResume=10]="BCPauseResume",y;var r})();let T=(()=>{class r{constructor(s,p){this.loggingService=s,this.dbService=p,this.notification$=new n.xQ,this.globalStore=null,this.igoNotifications="IgoNotifications",this.globalToggleStore="GlobalToggle",this.globalState=!0,this.initialState=!0,this.controls=[{saveStr:"noteOverlay",control:y.OpenOverlay,enable:this.initialState,controlledNotifiers:[m.OpenShare]},{saveStr:"noteSaveIR",control:y.SaveIRToGallery,enable:this.initialState,controlledNotifiers:[m.InstantReplaySaving,m.InstantReplaySaved]},{saveStr:"noteSaveMR",control:y.SaveMRToGallery,enable:this.initialState,controlledNotifiers:[m.RecordSaving,m.RecordStopped]},{saveStr:"noteSaveSS",control:y.SaveSSToGallery,enable:this.initialState,controlledNotifiers:[m.ScreenshotSaved,m.PhotographicScreenshotSavedToGallery]},{saveStr:"noteSaveHL",control:y.SaveHLToGallery,enable:this.initialState,controlledNotifiers:[m.HighlightsSaved]},{saveStr:"noteOnOffIR",control:y.IROnOff,enable:this.initialState,controlledNotifiers:[m.InstantReplayStarted,m.InstantReplayStopped]},{saveStr:"noteOnMR",control:y.MROn,enable:this.initialState,controlledNotifiers:[m.RecordStarted]},{saveStr:"noteOnOffBC",control:y.BCOnOff,enable:this.initialState,controlledNotifiers:[m.BroadcastStarted,m.BroadcastStopped]},{saveStr:"notePauseResumeBC",control:y.BCPauseResume,enable:this.initialState,controlledNotifiers:[m.BroadcastPaused,m.BroadcastResumed]},{saveStr:"noteConnectionStatus",control:y.ConnectionStatus,enable:this.initialState,controlledNotifiers:[m.NetworkSpottyConnection,m.NetworkBadConnection]}],this.logger=this.loggingService.getLogger("OscNotificationService"),this.globalStore=this.dbService.getGlobalStore(this.igoNotifications)}getOscEvents(){return this.notification$.asObservable()}showInternal(s,p,l="",t="",w="",h="",u=!1){this.isNotificationBlocked(s)||this.notification$.next({selection:s,arg1:l,arg2:t,flip:p,thumb:h,useAlternativeMessage:u})}show(s,p="",l="",t="",w="",h=!1){this.showInternal(s,!1,p,l,t,w,h)}flipTo(s,p="",l="",t="",w="",h=!1){this.showInternal(s,!0,p,l,t,w,h)}init(){const s=this.globalStore.getItem(this.globalToggleStore).subscribe(p=>{void 0!==p&&(this.globalState=p)},p=>{this.logger.error("Failed to read global notification state",p)},()=>{s.unsubscribe()});this.controls.forEach(p=>{const l=this.globalStore.getItem(p.saveStr).subscribe(t=>{p.enable=void 0===t?this.initialState:t},t=>{this.logger.error("Failed to read Notification Control in database: ",t)},()=>{l.unsubscribe()})})}getNotificationControls(){return this.controls}setNotificationControl(s,p){const l=this.controls.find(w=>w.control===s);l&&(l.enable=p);const t=this.globalStore.setItem(l.saveStr,l.enable).subscribe(()=>{t.unsubscribe(),this.logger.info("Notification Control Stored: "+l.saveStr+" Value: "+l.enable)})}isNotificationBlocked(s){let p=!1;return this.controls.forEach(l=>{l.controlledNotifiers.forEach(t=>{t===s&&(p=!l.enable||!this.globalState)})}),p}getGlobalToggle(){return this.globalState}setGlobalToggle(s){this.globalState=s;const p=this.globalStore.setItem(this.globalToggleStore,this.globalState).subscribe({complete:()=>{p.unsubscribe()}})}}return r.\u0275fac=function(s){return new(s||r)(i.LFG(D.ed),i.LFG(D.MC))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},91213:(He,de,e)=>{"use strict";e.d(de,{Kw:()=>a,Fr:()=>s,BH:()=>p,_C:()=>l,Ec:()=>t});var n=e(79441),i=e(90490),D=e(98636),m=e(67202),y=e(2316),T=e(6484),r=e(47062),a=(()=>{return(w=a||(a={})).Recording="Recording",w.IR="IR",w.Highlights="Highlights",w.Broadcast="Broadcast",w.Mic="Mic",w.ViewerCount="ViewerCount",w.Comments="Comments",w.Webcam="Webcam",w.WebcamSize="WebcamSize",w.GfnMic="GfnMic",w.Statistics="Statistics",w.StatsSize="StatsSize",w.Network="Network",a;var w})(),s=(()=>{return(w=s||(s={})).rightTop="rightTop",w.rightBottom="rightBottom",w.leftBottom="leftBottom",w.leftTop="leftTop",w.none="none",s;var w})(),p=(()=>{return(w=p||(p={})).small="small",w.medium="medium",w.large="large",p;var w})(),l=(()=>{return(w=l||(l={})).compact="compact",w.standard="standard",l;var w})();let t=(()=>{class w{constructor(u,o){this.dbService=u,this.igoConfig=o,this.osdChanged$=new n.xQ,this.globalStore=null,this.dbStoreName="IgoIndicatorSettings",this.overlaySettings={Recording:s.rightTop,IR:s.rightTop,Highlights:s.rightTop,Mic:s.rightTop,Broadcast:s.rightTop,ViewerCount:s.rightTop,Comments:s.rightTop,GfnMic:s.rightTop,Statistics:s.none,StatsSize:l.compact,Network:s.none},"GFN"===this.igoConfig.branding&&(this.overlaySettings.Statistics=s.rightTop),this.globalStore=this.dbService.getGlobalStore(this.dbStoreName)}init(){const u=[];Object.keys(this.overlaySettings).forEach(o=>{const f=this.globalStore.getItem(o).pipe((0,D.b)(c=>{const g=s[c],I=l[c];void 0!==g?this.overlaySettings[o]=g:void 0!==I&&(this.overlaySettings[o]=I)}));u.push(f)}),(0,i.$R)(...u).subscribe(()=>{this.triggerChange(null)})}saveOverlaySettings(){const u=[];return Object.keys(this.overlaySettings).forEach(o=>{const f=this.globalStore.setItem(o,this.overlaySettings[o]);u.push(f)}),(0,i.$R)(...u).pipe((0,D.b)(()=>this.triggerChange(null)),(0,m.h)(!0))}getPosition(u){return this.overlaySettings[u]}setPosition(u,o){this.overlaySettings[u]=o}getStatsSize(){return this.overlaySettings[a.StatsSize]}setStatsSize(u){this.overlaySettings[a.StatsSize]=u}getOsdIndicatorSize(u){return this.overlaySettings[u]}setOsdIndicatorSize(u,o){this.overlaySettings[u]=o}listen(){return this.osdChanged$.asObservable()}triggerChange(u){this.osdChanged$.next(u)}}return w.\u0275fac=function(u){return new(u||w)(y.LFG(T.MC),y.LFG(r.g))},w.\u0275prov=y.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},44790:(He,de,e)=>{"use strict";e.d(de,{Tj:()=>t,_6:()=>w});var n=e(79441),i=e(90490),D=e(98636),m=e(77142),y=e(91213),T=e(12556),r=e(2984),a=e(2316),s=e(94377),p=e(6484),l=(()=>{return(h=l||(l={})).Normal="normal-color",h.Bright="bright-color",h.Warning="warning-color",h.Error="error-color",l;var h})(),t=(()=>{return(h=t||(t={}))[h.Off=0]="Off",h[h.Standard=1]="Standard",h[h.Compact=2]="Compact",t;var h})();let w=(()=>{class h{constructor(o,f,c,g,I,G,x){this.injector=o,this.igoConfig=f,this.loggingService=c,this.hotkeyService=g,this.osdService=I,this.bridgeService=G,this.systemInfoService=x,this.throttleDuration=500,this.statsWindowPosition=y.Fr.rightTop,this.statsWindowSize=y._C.standard,this.statsState=t.Off,this.statsRunning=!1,this.mrPosition=y.Fr.none,this.irPosition=y.Fr.none,this.hlPosition=y.Fr.none,this.micPosition=y.Fr.none,this.mrState=!1,this.irState=!1,this.hlState=!1,this.micState=!1,this.statistics$=new n.xQ,this.statsHotkey$=new n.xQ,this.totalDroppedFrames=0,this.previousPacketLoss=0,this.networkData={roundTripDelay:0,streamingFps:0,gameEngineFps:0,frameLoss:"0",totalFrameLoss:"0",packetLoss:"0",totalPacketLoss:"0",totalAvailableBandwidth:0,bandwidthUsed:0,bandwidthPrecentage:0,networkName:"",connectionType:"",isVpnOn:!1,resolution:"",serverLoc:""},this.colorDataEnabled=!0,this.colorData={roundTripDelay:l.Bright,streamingFps1:l.Bright,streamingFps2:l.Normal,gameEngineFps:l.Bright,packetLoss1:l.Bright,packetLoss2:l.Normal,packetLossTotal:l.Normal,frameLoss:l.Normal,frameLossTotal:l.Normal,totalAvailableBandwidth:l.Normal,connectionType:l.Normal,vpnIndicator:l.Normal,resolution:l.Normal,serverLoc:l.Normal},this.statsEvent={state:this.statsState,position:this.statsWindowPosition,size:this.statsWindowSize,data:this.networkData,colors:this.colorData},this.zone="",this.zoneDefault="","GFN"===this.igoConfig.branding&&(this.gridService=this.injector.get(T.rIG),this.logger=this.loggingService.getLogger("StatisticsService"))}init(){this.logger.info("Initializing Statistics Service"),this.hotkeyService.listen(m.sW.StatisticsToggle).subscribe(()=>{this.logger.info("Hotkey for Statistics toggle pressed."),this.statsState=this.statsState===t.Compact?t.Off:this.statsState+1,this.toggleStatistics(),this.statsHotkey$.next(this.statsState)})}toggleStatistics(){this.statsWindowPosition=this.osdService.getPosition(y.Kw.Statistics),this.statsWindowSize=this.osdService.getStatsSize(),this.logger.info("Stat Position: "+this.statsWindowPosition+" Size: "+this.statsWindowSize),this.statsRunning?(this.statsRunning=this.statsState!==t.Off,this.sendUICurrentData()):(this.sendUICurrentData(),this.updateStatsData())}updateStatsData(){var o,f;if(this.statsState!==t.Off){const c=!this.statsRunning;this.statsRunning=!0;const g=[];c&&(this.zone=this.zoneDefault="",g.push(null===(o=this.gridService)||void 0===o?void 0:o.defaultZone$.pipe((0,D.b)(I=>{I&&(this.zoneDefault=I.name)}))),g.push(null===(f=this.gridService)||void 0===f?void 0:f.detectedLocalZone$.pipe((0,D.b)(I=>{I&&(this.zone=I.name)})))),g.push(this.systemInfoService.getNetworkInformation().pipe((0,D.b)(I=>{this.networkInfo=I}))),g.push(this.bridgeService.executeCommand(r.Gh.Gfn.Streaming.GetStreamStats,{}).pipe((0,D.b)(I=>{this.streamingStats=I}))),(0,i.$R)(...g).subscribe(()=>{this.updateUIData(),this.getStatsData()},I=>{this.logger.error("UpdateStats Error: ",I),c&&(this.statsRunning=!1),this.getStatsData()})}}getStatsData(){setTimeout(()=>{this.updateStatsData()},1e3)}sendUICurrentData(){this.statsEvent={state:this.statsState,position:this.statsWindowPosition,size:this.statsWindowSize,data:this.networkData,colors:this.colorData},this.statistics$.next(this.statsEvent)}updateUIData(){var o,f,c,g,I,G,x,E,P,v;const O=this.streamingStats,C=O.streamStats.frameWidth+" \xd7 "+O.streamStats.frameHeight;this.totalDroppedFrames+=O.streamStats.droppedFrames;const _=O.streamStats.packetloss-this.previousPacketLoss;this.previousPacketLoss=O.streamStats.packetloss;const F=O.streamStats.bandwidth||0,V=O.streamStats.streamBitrate||0,b=0===F?0:Math.round(100*V/F),B=V/1e3,U=Math.round(F/1e3);let A=null===(o=O.streamStats.serverZone)||void 0===o?void 0:o.toUpperCase().replace(/-/g,"\u2011");A=void 0===A||""===A?"--":A;const S=""===this.zone?this.zoneDefault:this.zone,Y=void 0!==(null===(f=this.networkInfo)||void 0===f?void 0:f.NetworkName)&&""!==(null===(c=this.networkInfo)||void 0===c?void 0:c.NetworkName),se=void 0!==(null===(g=this.networkInfo)||void 0===g?void 0:g.NetworkType)&&""!==(null===(I=this.networkInfo)||void 0===I?void 0:I.NetworkType);if(this.networkData={roundTripDelay:O.streamStats.roundTripDelayMs||0,streamingFps:O.streamStats.frameRate||0,gameEngineFps:O.streamStats.avgGameFrameRate||0,frameLoss:O.streamStats.droppedFrames.toString(),totalFrameLoss:this.totalDroppedFrames.toString(),packetLoss:_.toString(),totalPacketLoss:O.streamStats.packetloss.toString(),totalAvailableBandwidth:U,bandwidthUsed:B,bandwidthPrecentage:b,networkName:Y?null===(G=this.networkInfo)||void 0===G?void 0:G.NetworkName:"--",connectionType:se?null===(x=this.networkInfo)||void 0===x?void 0:x.NetworkType:"--",isVpnOn:"1"===(null===(E=this.networkInfo)||void 0===E?void 0:E.IsVPN),resolution:C,serverLoc:S+" ("+A+")"},this.colorDataEnabled){const fe=this.networkData.roundTripDelay<=40?l.Bright:this.networkData.roundTripDelay<=80?l.Warning:l.Error;let $=l.Normal;(null===(P=this.networkData.connectionType)||void 0===P?void 0:P.includes("2.4"))&&($=l.Warning),this.colorData={roundTripDelay:fe,streamingFps1:l.Bright,streamingFps2:l.Normal,gameEngineFps:l.Bright,packetLoss1:0===_?l.Bright:l.Error,packetLoss2:0===_?l.Normal:l.Error,packetLossTotal:0===O.streamStats.packetloss?l.Normal:l.Error,frameLoss:0===O.streamStats.droppedFrames?l.Normal:l.Error,frameLossTotal:0===this.totalDroppedFrames?l.Normal:l.Error,totalAvailableBandwidth:l.Normal,connectionType:$,vpnIndicator:"1"===(null===(v=this.networkInfo)||void 0===v?void 0:v.IsVPN)?l.Warning:l.Normal,resolution:l.Normal,serverLoc:l.Normal}}this.sendUICurrentData()}getStatisticsEvents(){return this.statistics$.asObservable()}statisticsLayoutChanged(){this.toggleStatistics()}statisticsStateChanged(o){this.statsState=o,this.toggleStatistics()}statisticsHotkeyPressed(){return this.statsHotkey$.asObservable()}getStatsState(){return this.statsState}killStats(){this.totalDroppedFrames=0,this.previousPacketLoss=0,this.statsRunning=!1,this.statsState=t.Off,this.sendUICurrentData()}}return h.\u0275fac=function(o){return new(o||h)(a.LFG(a.zs3),a.LFG(s.gs),a.LFG(p.ed),a.LFG(m.y1),a.LFG(y.Ec),a.LFG(p.dF),a.LFG(p.Ob))},h.\u0275prov=a.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},10125:(He,de,e)=>{"use strict";e.d(de,{fP:()=>i,zc:()=>D,pg:()=>m,AN:()=>y,og:()=>T,SE:()=>r,Po:()=>a,bq:()=>s,Z1:()=>p,pJ:()=>l,R5:()=>t,wB:()=>w,rS:()=>h,W6:()=>u,K8:()=>o,FU:()=>f,h7:()=>c,F8:()=>g,NX:()=>I,Wg:()=>G,WU:()=>x,FC:()=>E,$R:()=>v,MG:()=>O,ZA:()=>C,kt:()=>_,f3:()=>F,ON:()=>V,QR:()=>b,M8:()=>B,eZ:()=>U,kT:()=>A,p9:()=>S,bo:()=>Y,RY:()=>se,uz:()=>fe,ky:()=>$,ci:()=>ae,Jd:()=>me,j6:()=>ye,zZ:()=>ue,KZ:()=>X,qG:()=>j,LN:()=>K,ze:()=>Z,m$:()=>L,o8:()=>W,RX:()=>te,cd:()=>ie,gY:()=>Q,lH:()=>k,J2:()=>oe,HR:()=>N,lj:()=>q,Nj:()=>Me,PH:()=>xe,VC:()=>ct,ck:()=>Se,_B:()=>Ge,Rb:()=>St,AD:()=>Tt});var n=e(43124),i=(()=>{return(Te=i||(i={})).gfn="GFN",Te.standalone="Standalone",i;var Te})(),D=(()=>{return(Te=D||(D={})).image="Image",Te.video="Video",Te.none="None",D;var Te})(),m=(()=>{return(Te=m||(m={})).initial="Initial",Te.settings="Settings",Te.alreadyOn="AlreadyOn",Te.alreadyOff="AlreadyOff",m;var Te})(),y=(()=>{return(Te=y||(y={})).GameFilter="Freestyle",Te.PhotoMode="Ansel",Te.PhotoModeLight="AnselLite",y;var Te})(),T=(()=>{return(Te=T||(T={})).connect="Connect",Te.disconnect="Disconnect",Te.requestpermissions="RequestPermissions",Te.getlanguage="GetLanguage",Te.highlightsconfigure="HighlightsConfigure",Te.highlightsopengroup="HighlightsOpenGroup",Te.highlightsclosegroup="HighlightsCloseGroup",Te.highlightssavevideo="HighlightsSaveVideo",Te.highlightssavescreenshot="HighlightsSaveScreenshot",Te.highlightsopensummary="HighlightsOpenSummary",Te.highlightsgetcount="HighlightsGetCount",Te.highlightsgetuserconfig="HighlightsGetUserConfig",Te.opsoptimize="OpsOptimize",Te.unknown="UNKNOWN",T;var Te})(),r=(()=>{return(Te=r||(r={})).success="NVGSDK_SUCCESS",Te.successversionoldsdk="NVGSDK_SUCCESS_VERSION_OLD_SDK",Te.successversionoldgfe="NVGSDK_SUCCESS_VERSION_OLD_GFE",Te.successpending="NVGSDK_SUCCESS_PENDING",Te.successusernotinterested="NVGSDK_SUCCESS_USER_NOT_INTERESTED",Te.successpermissiongranted="NVGSDK_SUCCESS_PERMISSION_GRANTED",Te.successlinked="NVGSDK_SUCCESS_LINKED",Te.errgeneric="NVGSDK_ERR_GENERIC",Te.errgfeversion="NVGSDK_ERR_GFE_VERSION",Te.errsdkversion="NVGSDK_ERR_SDK_VERSION",Te.errnotimplemented="NVGSDK_ERR_NOT_IMPLEMENTED",Te.errinvalidparameter="NVGSDK_ERR_INVALID_PARAMETER",Te.errnotset="NVGSDK_ERR_NOT_SET",Te.errshadowplayirdisabled="NVGSDK_ERR_SHADOWPLAY_IR_DISABLED",Te.errsdkinuse="NVGSDK_ERR_SDK_IN_USE",Te.errgroupnotfound="NVGSDK_ERR_GROUP_NOT_FOUND",Te.errfilenotfound="NVGSDK_ERR_FILE_NOT_FOUND",Te.errhighlightssetupfailed="NVGSDK_ERR_HIGHLIGHTS_SETUP_FAILED",Te.errhighlightsnotconfigured="NVGSDK_ERR_HIGHLIGHTS_NOT_CONFIGURED",Te.errhighlightssavefailed="NVGSDK_ERR_HIGHLIGHTS_SAVE_FAILED",Te.errunexpectedexception="NVGSDK_ERR_UNEXPECTED_EXCEPTION",Te.errnohighlights="NVGSDK_ERR_NO_HIGHLIGHTS",Te.errnoconnection="NVGSDK_ERR_NO_CONNECTION",Te.errpermissionnotgranted="NVGSDK_ERR_PERMISSION_NOT_GRANTED",Te.errpermissiondenied="NVGSDK_ERR_PERMISSION_DENIED",Te.errinvalidhandle="NVGSDK_ERR_INVALID_HANDLE",Te.errunhandledexception="NVGSDK_ERR_UNHANDLED_EXCEPTION",Te.erroutofmemory="NVGSDK_ERR_OUT_OF_MEMORY",Te.errloadlibrary="NVGSDK_ERR_LOAD_LIBRARY",Te.errlibcallfailed="NVGSDK_ERR_LIB_CALL_FAILED",Te.erripcfailed="NVGSDK_ERR_IPC_FAILED",Te.errconnection="NVGSDK_ERR_CONNECTION",Te.errmodulenotloaded="NVGSDK_ERR_MODULE_NOT_LOADED",Te.errapplicationlookupfailed="NVGSDK_ERR_APPLICATION_LOOKUP_FAILED",Te.errapplicationnotknown="NVGSDK_ERR_APPLICATION_NOT_KNOWN",Te.errfeaturedisabled="NVGSDK_ERR_FEATURE_DISABLED",Te.errlibcalltimeout="NVGSDK_ERR_LIB_CALL_TIMEOUT",Te.errappnooptimization="NVGSDK_ERR_APP_NO_OPTIMIZATION",Te.errappsettingsread="NVGSDK_ERR_APP_SETTINGS_READ",Te.errappsettingswrite="NVGSDK_ERR_APP_SETTINGS_WRITE",Te.errhighlightnotdefined="NVGSDK_ERR_HIGHLIGHT_NOT_DEFINED",Te.errcaplimitreached="NVGSDK_ERR_CAP_LIMIT_REACHED",Te.errdisklimitreached="NVGSDK_ERR_DISK_LIMIT_REACHED",r;var Te})(),a=(()=>{return(Te=a||(a={})).on="Yes",Te.true="Yes",Te.yes="Yes",Te.off="No",Te.false="No",Te.no="No",a;var Te})(),s=(()=>{return(Te=s||(s={})).openHotkey="OpenHotkey",Te.highlightsButton="HighlightsButton",s;var Te})(),p=(()=>{return(Te=p||(p={})).internal="Internal",Te.external="External",Te.network="Network",Te.unknown="Unknown",p;var Te})(),l=(()=>{return(Te=l||(l={})).root="Root",Te.folder="Folder",Te.content="Content",l;var Te})(),t=(()=>{return(Te=t||(t={})).none="None",Te.screenshot="Screenshot",Te.video="Video",Te.ir="InstantReplay",Te.highlight="Highlight",t;var Te})(),w=(()=>{return(Te=w||(w={})).none="None",Te.settings="Settings",Te.galleryMain="GalleryMain",Te.galleryImagePreview="GalleryImagePreview",Te.galleryVideoPreview="GalleryVideoPreview",Te.browser="FolderBrowser",Te.mainMenu="MainMenu",Te.general="General",Te.highlights="HighlightsSettings",Te.videoCapture="VideoCaptureSettings",Te.storage="StorageSettings",Te.shortcuts="HotkeySettings",Te.headsup="HUDSettings",Te.notifications="NotificationSettings",Te.audioCapture="AudioCaptureSettings",Te.broadcast="BroadcastSettings",Te.gfnBroadcast="GfnBroadcast",Te.connect="ConnectSettings",Te.connectOauth="ConnectOauth",Te.broadcastLive="BroadcastLive",Te.share="Share",Te.privacy="Privacy",Te.system="System",Te.gameplay="Gameplay",Te.debug="Debug",w;var Te})(),h=(()=>{return(Te=h||(h={})).startManualCapture="StartManualCapture",Te.stopAndSaveManualCapture="StopAndSaveManualCapture",Te.turnOnInstantReplay="TurnOnInstantReplay",Te.instantReplaySaved="InstantReplaySaved",Te.turnOffInstantReplay="TurnOffInstantReplay",Te.screenshotSaved="ScreenshotSaved",h;var Te})(),u=(()=>{return(Te=u||(u={})).upperRight="UpperRight",Te.lowerRight="LowerRight",Te.lowerLeft="LowerLeft",Te.upperLeft="UpperLeft",Te.none="None",u;var Te})(),o=(()=>{return(Te=o||(o={})).standard="Standard",Te.compact="Compact",o;var Te})(),f=(()=>{return(Te=f||(f={})).balanced="Balanced",Te.dataSaver="DataSaver",Te.competitive="Competitive",Te.custom="Custom",f;var Te})(),c=(()=>{return(Te=c||(c={})).recording="Recording",Te.iR="IR",Te.highlights="Highlights",Te.mic="Mic",Te.statistics="Statistics",Te.network="Network",c;var Te})(),g=(()=>{return(Te=g||(g={})).empty="Empty",Te.openOverlay="OpenOverlay",Te.connectionStatus="ConnectionStatus",Te.saveIRToGallery="SaveIRToGallery",Te.saveMRToGallery="SaveMRToGallery",Te.saveSSToGallery="SaveSSToGallery",Te.saveHLToGallery="SaveHLToGallery",Te.iROnOff="IROnOff",Te.mROn="MROn",Te.bCOnOff="BCOnOff",Te.bCPauseResume="BCPauseResume",g;var Te})(),I=(()=>{return(Te=I||(I={})).anselFreeStyle="AnselFreestyleNoResponse",Te.anselFreestyleGeneralFailure="AnselFreestyleGeneralFailure",Te.anselFailedToStart="AnselFailedToStart",Te.anselNoSpaceLeft="AnselNoSpaceLeft",Te.anselPermissionDenied="AnselPermissionDenied",Te.anselInvalidRequest="AnselInvalidRequest",Te.anselFreestyleAlreadyEnabled="AnselFreestyleAlreadyEnabled",Te.anselFreestyleAlreadyDisabled="AnselFreestyleAlreadyDisabled",Te.anselOutOfRange="AnselOutOfRange",Te.anselFreestyleAlreadySet="AnselFreestyleAlreadySet",Te.anselFreestyleIncompatibleVersion="AnselFreestyleIncompatibleVersion",Te.anselFreestyleAppFatalError="AnselFreestyleAppFatalError",Te.anselFreestyleAppNonFatalError="AnselFreestyleAppNonFatalError",Te.anselFreestyleUnsupportedGameError="AnselFreestyleUnsupportedGameError",Te.anselFreestyleMenuLaunchError="AnselFreestyleMenuLaunchError",I;var Te})(),G=(()=>{return(Te=G||(G={})).nvCameraTimedOut="NvCameraTimedOut",Te.gameBlacklisted="GameBlackListed",Te.unsupportedGame="UnSupportedGame",Te.streamerError="StreamerError",G;var Te})(),x=(()=>{return(Te=x||(x={})).started="Started",Te.completed="Completed",Te.cancelled="Cancelled",Te.failed="Failed",x;var Te})(),E=(()=>{return(Te=E||(E={})).anselScreenshotTimeoutFailure="AnselScreenshotTimeoutFailure",Te.anselScreenshotUnknownFailure="AnselScreenshotUnknownFailure",Te.anselScreenshotNoFailure="AnselScreenshotNoFailure",E;var Te})(),v=(()=>{return(Te=v||(v={})).nvCameraReadyNotificationNotReceived="NvCameraReadyNotificationNotReceived",Te.featureNotAvailable="FeatureNotAvailable",Te.nvCameraSessionConfigurationFailed="NvCameraSessionConfigurationFailed",Te.featureDisabledReasonUnknown="FeatureDisabledReasonUnknown",v;var Te})(),O=(()=>{return(Te=O||(O={})).start="Start",Te.stop="Stop",Te.pause="Pause",Te.resume="Resume",O;var Te})(),C=(()=>{return(Te=C||(C={})).adobe="Adobe",Te.facebook="Facebook",Te.lightstream="Lightstream",Te.twitch="Twitch",Te.youtube="YouTube",C;var Te})(),_=(()=>{return(Te=_||(_={})).failedToStart="FailedToStart",Te.failedToStop="FailedToStop",Te.timeoutError="TimeoutError",Te.unknownError="UnknownError",_;var Te})();class F extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="GFNSession"}}class V extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="OpenedIGO"}}class b extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Behavioral,this.name="SettingSnapshot"}}class B extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Behavioral,this.name="UITransition"}}class U extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="HighlightCapture"}}class A extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="HighlightsGameSetting"}}class S extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Behavioral,this.name="HighlightsIndividualGameToggle"}}class Y extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="HighlightsCancelled"}}class se extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="SDKCallResult"}}class fe extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="GalleryAccess"}}class $ extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Behavioral,this.name="GalleryFilterUsed"}}class ae extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Behavioral,this.name="GalleryPlayedVideo"}}class me extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Behavioral,this.name="GalleryFileRemoved"}}class ye extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Behavioral,this.name="GalleryOpenedFileLocation"}}class ue extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="CaptureEvent"}}class X{constructor(Je,xt){this.bridgeService=Je,this.streamerConfigService=xt}get streamerConfig(){return this.streamerConfigService.activeConfig}generateFinalizedEvent(Je,xt){return Je.cmsId=Je.cmsId||(this.streamerConfig?this.streamerConfig.cmsId.toString():""),Je.shortName=Je.shortName||(this.streamerConfig?this.streamerConfig.shortName:""),new xt(Je)}}class j extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="AnselFreestyleSession"}}class K extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="AnselFreestyleSession"}}class Z extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="AnselFreestyleFilters"}}class L extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="AnselFreestyleFilters"}}class W extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="FreestyleStylesApplied"}}class te extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="FreestyleStylesApplied"}}class ie extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="AnselScreenshotEvent"}}class Q extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="AnselFreestyleError"}}class k extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="AnselFreestyleError"}}class oe extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Technical,this.name="AnselFreestyleFeatureDisabled"}}class N extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="BroadcastEvent"}}class q extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="BroadcastError"}}class Me extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="StatsClosedEvent"}}class xe extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="StatsViewChangedEvent"}}class ct extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="GameplayEntryEvent"}}class Se extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="StreamingQualityChangedEvent"}}class Ge extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="ResolutionUpscalingChangedEvent"}}class St extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="WidgetViewChangedEvent"}}class Tt extends n.MW{constructor(){super(...arguments),this.gdprLevel=n.KM.Functional,this.name="NotificationChangedEvent"}}},78711:(He,de,e)=>{"use strict";e.d(de,{l:()=>v});var n=e(43124),i=e(2984),D=e(80226),m=e(81134),y=e(61786),T=e(42720),r=e(33927),a=e(85816),s=e(11045),p=e(98636),l=e(10125),t=e(25256),w=e(46956),h=e(12556),u=e(73341),o=e(91213),f=e(48225),c=e(13335),g=e(2316),I=e(6484),G=e(47062),x=e(77142),E=e(87335),P=e(71906);let v=(()=>{class O{constructor(_,F,V,b,B,U,A,S,Y,se,fe){this.loggingService=_,this.telemetryService=F,this.bridgeService=V,this.igoConfig=b,this.injector=B,this.hotkeyService=U,this.appLifetimeService=A,this.dbService=S,this.osdService=Y,this.notificationService=se,this.igoAppConfig=fe,this.commonData={},this.lastUiState=l.wB.none,this.lastUiTransitionTime=null,this.sdkCalls=[],this.maxBatchSDKCalls=100,this.clientHost=l.fP.standalone,this.driveTypeMap={unknown:l.Z1.unknown,removable:l.Z1.external,fixed:l.Z1.internal,network:l.Z1.network},this.captureEventsMap={},this.screenPosMap={},this.statsFormat={},this.profileNameMap={},this.widgetIndicatorMap={},this.notificationMap={},this.wasHighlightsEnabled=!1,this.cachedSessionId="",this.folderScreenshots=0,this.folderVideos=0,this.irBufLength=new D.t(1),this.gallerySettings=new D.t(1),this.modsActive=!1,this.logger=this.loggingService.getLogger("TelemetryHelperService"),this.screenPosMap[o.Fr.leftBottom]=l.W6.lowerLeft,this.screenPosMap[o.Fr.leftTop]=l.W6.upperLeft,this.screenPosMap[o.Fr.rightBottom]=l.W6.lowerRight,this.screenPosMap[o.Fr.rightTop]=l.W6.upperRight,this.screenPosMap[o.Fr.none]=l.W6.none,this.statsFormat[o._C.standard]=l.K8.standard,this.statsFormat[o._C.compact]=l.K8.compact,this.profileNameMap[h.M1b.Balanced]=l.FU.balanced,this.profileNameMap[h.M1b.DataSaver]=l.FU.dataSaver,this.profileNameMap[h.M1b.Competitive]=l.FU.competitive,this.profileNameMap[h.M1b.Custom]=l.FU.custom,this.widgetIndicatorMap[o.Kw.Recording]=l.h7.recording,this.widgetIndicatorMap[o.Kw.IR]=l.h7.iR,this.widgetIndicatorMap[o.Kw.Highlights]=l.h7.highlights,this.widgetIndicatorMap[o.Kw.Mic]=l.h7.mic,this.widgetIndicatorMap[o.Kw.Statistics]=l.h7.statistics,this.widgetIndicatorMap[o.Kw.Network]=l.h7.network,this.notificationMap[f._R.Empty]=l.F8.empty,this.notificationMap[f._R.OpenOverlay]=l.F8.openOverlay,this.notificationMap[f._R.ConnectionStatus]=l.F8.connectionStatus,this.notificationMap[f._R.SaveIRToGallery]=l.F8.saveIRToGallery,this.notificationMap[f._R.SaveMRToGallery]=l.F8.saveMRToGallery,this.notificationMap[f._R.SaveSSToGallery]=l.F8.saveSSToGallery,this.notificationMap[f._R.SaveHLToGallery]=l.F8.saveHLToGallery,this.notificationMap[f._R.IROnOff]=l.F8.iROnOff,this.notificationMap[f._R.MROn]=l.F8.mROn,this.notificationMap[f._R.BCOnOff]=l.F8.bCOnOff,this.notificationMap[f._R.BCPauseResume]=l.F8.bCPauseResume}getUserId(){return(0,m.of)("123456789")}init(){let _;this.logger.info("Initializing telemetry"),this.sessionStartTime=Date.now(),"GFN"===this.igoConfig.branding&&(this.streamingService=this.injector.get(t.F),_=this.injector.get(c.o),this.appConfig=this.injector.get(u.VK),this.streamingSubscription=this.streamingService.streamingEvent$.subscribe(F=>{F.event===w.V4.SESSION_SETUP_SUCCESS&&(this.sendSettingsTelemetry(),this.cachedSessionId=this.streamingService.streamingProperties.sessionId||"",this.streamingSubscription.unsubscribe())}),this.gridService=this.injector.get(h.rIG),this.gridService.getCachedZone().subscribe(F=>{this.zone=F})),this.perGameEventFactory=new l.KZ(this.bridgeService,_),this.clientHost="GFN"===this.igoConfig.branding?l.fP.gfn:l.fP.standalone,"GFN"===this.igoConfig.branding?this.appLifetimeService.addWorkOnShutdown(()=>new y.y(F=>{F.next(this.sendExitTelemetry()),F.complete()})):(this.commonData.clientVer=this.igoAppConfig.config.build.version,(0,T.D)([this.getUserId(),this.bridgeService.executeCommand(i.Gh.Common.Systeminfo.GetDeviceId)]).subscribe(([F,V])=>{this.logger.info("Setting events common data. userId: "+F+", deviceId: "+V),this.commonData.userId=F,this.commonData.deviceId=V,this.telemetryService.setDefaultClientConsent(n.l3),this.telemetryService.setEventsCommonData(this.commonData)}))}sendExitTelemetry(){this.sendSDKCallResults(!1,!0);const _=this.perGameEventFactory.generateFinalizedEvent({wasHighlightsAvailable:this.toTelemetryBoolean(this.wasHighlightsEnabled),sessionDurationMs:Date.now()-this.sessionStartTime,sessionId:this.cachedSessionId},l.f3);this.telemetryService.push(_,0,{appExit:!0})}beginStartupTimer(_){this.uiBringupStartTime=Date.now(),this.uiBringupOrigin=_}sendStartupTelemetry(){if(!this.uiBringupStartTime)return void this.logger.error("Cannot send ui bringup time, timer was never started");const _=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,openedFrom:this.uiBringupOrigin,totalMs:Date.now()-this.uiBringupStartTime},l.ON);this.telemetryService.push(_)}sendSettingsTelemetry(){const _=this.dbService.getGlobalStore("IGOTelemetry");_.getItem("lastSettingsSendTime").subscribe(F=>{this.logger.info("sendTime: ",F,"alwaysSend: ",this.appConfig?this.appConfig.featureEnablement?this.appConfig.featureEnablement.alwaysSendSettingsTelemetry:"No featureEnablement in config":"No appConfig"),(this.appConfig&&this.appConfig.featureEnablement&&this.appConfig.featureEnablement.alwaysSendSettingsTelemetry||!F||Date.now()-F>6048e5)&&(this.logger.info("Sending settings"),this.doSendSettingsTelemetry(),_.setItem("lastSettingsSendTime",Date.now()))})}doSendSettingsTelemetry(){let F=0,V=0,b=0,B=l.Z1.unknown;const U={clientHost:this.clientHost,gallerySizeMB:0,gallerySpaceUsedPercent:0,typeOfStorageDrive:B,areGlobalHighlightsOn:this.toTelemetryBoolean(!1),openIGOHotkey:"",numGalleryImages:0,numGalleryVideos:0,instantReplayBufferLength:0,galleryTotalSizeMB:0,screenshotHotkey:"",irToggleHotkey:"",saveIRHotkey:"",mrHotkey:"",statsHotkey:"",recordingHUDLocation:this.screenPosMap[this.osdService.getPosition(o.Kw.Recording)],instantReplayHUDLocation:this.screenPosMap[this.osdService.getPosition(o.Kw.IR)],highlightsHUDLocation:this.screenPosMap[this.osdService.getPosition(o.Kw.Highlights)],micHUDLocation:this.screenPosMap[this.osdService.getPosition(o.Kw.Mic)],connectionStatusHUDLocation:this.screenPosMap[this.osdService.getPosition(o.Kw.Network)],statsLocation:this.screenPosMap[this.osdService.getPosition(o.Kw.Statistics)],statsFormat:this.statsFormat[this.osdService.getStatsSize()],irSavedIndicatorOn:this.toTelemetryBoolean(this.notificationService.getNotificationControls()[f._R.SaveIRToGallery-1].enable),mrSavedIndicatorOn:this.toTelemetryBoolean(this.notificationService.getNotificationControls()[f._R.SaveMRToGallery-1].enable),screenshotSavedIndicatorOn:this.toTelemetryBoolean(this.notificationService.getNotificationControls()[f._R.SaveSSToGallery-1].enable),irToggleIndicatorOn:this.toTelemetryBoolean(this.notificationService.getNotificationControls()[f._R.IROnOff-1].enable),mrStartedIndicatorOn:this.toTelemetryBoolean(this.notificationService.getNotificationControls()[f._R.MROn-1].enable),highlightSavedIndicatorOn:this.toTelemetryBoolean(this.notificationService.getNotificationControls()[f._R.SaveHLToGallery-1].enable)},A=(0,T.D)([this.bridgeService.executeCommand(i.Gh.Common.Gallery.EnumerateDrives),this.gallerySettings]).pipe((0,r.U)(([Y,se])=>{if(se.settings.path)for(const fe of Y.drives)if(se.settings.path.startsWith(fe.name))return B=this.driveTypeMap[fe.type]||l.Z1.unknown,B;return B})),S=this.gallerySettings.pipe((0,r.U)(Y=>(Y.settings.capacity&&(F=Y.settings.capacity.enabled?Math.round(Y.settings.capacity.capacityPercent*Y.settings.capacity.totalDiskSpaceMB):0,V=Y.settings.capacity.usageMB,b=Y.settings.capacity.totalDiskSpaceMB),U.gallerySizeMB=V,U.gallerySpaceUsedPercent=F>0?Math.round(100*V/F):0,U.galleryTotalSizeMB=b,Y)),(0,a.zg)(Y=>Y.settings.path?this.bridgeService.executeCommand(i.Gh.Common.Gallery.GetFolderListing,{directory:Y.settings.path,shouldGetOnlyNv:!0,excludeDirectoryType:i.Yk.Common.Gallery.ExcludeDirectoryType.empty}):(0,m.of)(null)),(0,r.U)(Y=>Y&&Y.directories.length>0?Y.directories:[""]),(0,a.zg)(Y=>(0,m.of)(...Y)),(0,a.zg)(Y=>0===Y.length?(0,m.of)({screenshots:0,videos:0}):this.bridgeService.executeCommand(i.Gh.Common.Gallery.GetAppStats,{appName:Y})),(0,s.u)((Y,se)=>(Y.numImages+=se.screenshots,Y.numVideos+=se.videos,Y),{numImages:0,numVideos:0}),(0,p.b)(Y=>{U.numGalleryImages=Y.numImages,U.numGalleryVideos=Y.numVideos}),(0,a.zg)(()=>A),(0,p.b)(Y=>{U.typeOfStorageDrive=Y||l.Z1.unknown}),(0,a.zg)(()=>this.bridgeService.executeCommand(i.Gh.Share.Shareserver.GetHighlightsEnable)),(0,p.b)(Y=>{U.areGlobalHighlightsOn=this.toTelemetryBoolean(Y.enable)}),(0,a.zg)(()=>this.irBufLength),(0,p.b)(Y=>{U.instantReplayBufferLength=Y}),(0,a.zg)(()=>this.hotkeyService.getHotkeyString(i.Yk.Share.Shareserver.HotkeyEnum.OpenIGO)),(0,p.b)(Y=>{U.openIGOHotkey=Y}),(0,a.zg)(()=>this.hotkeyService.getHotkeyString(i.Yk.Share.Shareserver.HotkeyEnum.Screenshot)),(0,p.b)(Y=>{U.screenshotHotkey=Y}),(0,a.zg)(()=>this.hotkeyService.getHotkeyString(i.Yk.Share.Shareserver.HotkeyEnum.DVRToggle)),(0,p.b)(Y=>{U.irToggleHotkey=Y}),(0,a.zg)(()=>this.hotkeyService.getHotkeyString(i.Yk.Share.Shareserver.HotkeyEnum.DVRSave)),(0,p.b)(Y=>{U.saveIRHotkey=Y}),(0,a.zg)(()=>this.hotkeyService.getHotkeyString(i.Yk.Share.Shareserver.HotkeyEnum.RecordToggle)),(0,p.b)(Y=>{U.mrHotkey=Y}),(0,a.zg)(()=>this.hotkeyService.getHotkeyString(i.Yk.Share.Shareserver.HotkeyEnum.StatisticsToggle)),(0,p.b)(Y=>{U.statsHotkey=Y})).subscribe(()=>{this.logger.info("Actually sending settings telemetry",U);const Y=new l.QR(U);this.telemetryService.push(Y,0,{immediateRequest:!0}),S.unsubscribe()})}updateReplayLength(_){this.irBufLength.next(_),this.irBufLength.complete()}updateGallerySettings(_){this.gallerySettings.next(_),this.gallerySettings.complete()}trackNavigation(_,F=l.wB.none){this.telemetryService.push(new l.M8({clientHost:this.clientHost,sessionId:this.cachedSessionId,oldState:this.lastUiState,newState:F,lingerTimeMs:_-this.lastUiTransitionTime,transitionTimeMs:Date.now()-_})),this.lastUiTransitionTime=Date.now(),this.lastUiState=F}toTelemetryBoolean(_){return _?l.Po.yes:l.Po.no}sendHighlightCapture(_,F,V,b,B){const U=this.perGameEventFactory.generateFinalizedEvent(Object.assign(Object.assign({clientHost:this.clientHost,sessionId:this.cachedSessionId},_),{sdkVersion:F,videoLengthMs:V||-1,highlightId:b,contentType:B,modsActive:this.toTelemetryBoolean(this.modsActive)}),l.eZ);this.telemetryService.push(U)}sendHighlightsGameSetting(_,F,V){const b=this.perGameEventFactory.generateFinalizedEvent(Object.assign(Object.assign({clientHost:this.clientHost,sessionId:this.cachedSessionId},_),{isOn:this.toTelemetryBoolean(F),permissionSource:V,modsActive:this.toTelemetryBoolean(this.modsActive)}),l.kT);this.telemetryService.push(b)}sendHighlightsIndividualGameToggle(_,F,V){const b=this.perGameEventFactory.generateFinalizedEvent(Object.assign(Object.assign({clientHost:this.clientHost},_),{highlightId:F,isOn:this.toTelemetryBoolean(V)}),l.p9);this.telemetryService.push(b)}sendHighlightCancelled(_,F,V){const b=this.perGameEventFactory.generateFinalizedEvent(Object.assign(Object.assign({clientHost:this.clientHost,sessionId:this.cachedSessionId},_),{highlightId:F,sdkVersion:V}),l.bo);this.telemetryService.push(b)}recordSDKCallResult(_,F,V,b,B){this.wasHighlightsEnabled=!0,this.sdkCalls.unshift({apiAction:_,apiStatus:F,internalCode:V,gameInfo:b,sdkVersion:B}),F!==l.SE.success&&F!==l.SE.successversionoldsdk&&F!==l.SE.successversionoldgfe&&F!==l.SE.successpending&&F!==l.SE.successusernotinterested&&F!==l.SE.successpermissiongranted&&F!==l.SE.successlinked&&this.sendSDKCallResults(!0,!1),this.sdkCalls.length>=this.maxBatchSDKCalls&&this.sendSDKCallResults(!1,!1)}sendSDKCallResults(_,F){if(_)for(const V of this.sdkCalls){const b=this.perGameEventFactory.generateFinalizedEvent(Object.assign(Object.assign({clientHost:this.clientHost,sessionId:this.cachedSessionId},V.gameInfo),{apiAction:V.apiAction,apiStatus:V.apiStatus,internalCode:V.internalCode,sdkVersion:V.sdkVersion,count:1,highlightsSessionId:this.streamingService?this.cachedSessionId:"12345"}),l.RY);F?this.telemetryService.push(b,0,{appExit:!0}):this.telemetryService.push(b)}else{const V=[];for(const b of this.sdkCalls){let B=!1;for(const U of V)if(U.apiAction===b.apiAction&&U.apiStatus===b.apiStatus){U.count++,B=!0;break}B||V.push(Object.assign(Object.assign({},b),{count:1}))}for(const b of V){const B=this.perGameEventFactory.generateFinalizedEvent(Object.assign(Object.assign({clientHost:this.clientHost,sessionId:this.cachedSessionId},b.gameInfo),{apiAction:b.apiAction,apiStatus:b.apiStatus,internalCode:b.internalCode,sdkVersion:b.sdkVersion,count:b.count,highlightsSessionId:this.streamingService?this.cachedSessionId:"12345"}),l.RY);F?this.telemetryService.push(B,0,{appExit:!0}):this.telemetryService.push(B)}}this.sdkCalls=[]}startCaptureEvent(_){this.captureEventsMap[_]=Date.now()}sendCaptureEvent(_,F,V,b,B,U,A,S){if(!this.captureEventsMap[_])return void this.logger.error("Attempted to end a performance measurement for "+_+" without starting it!");const Y=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,action:_,timeMs:Date.now()-this.captureEventsMap[_],modsActive:this.toTelemetryBoolean(this.modsActive),captureMethod:F,recordWidth:V,recordHeight:b,recordFramerate:B,recordCodec:U,errorType:A,errorDetails:S},l.zZ);this.telemetryService.push(Y),this.captureEventsMap[_]=0}startGalleryAccess(_){this.galleryAccessType=_,this.galleryNavStart=Date.now()}setGalleryAccessCached(_){this.galleryAccessCached=_}setGalleryFolderCounts(_,F){this.folderScreenshots=_,this.folderVideos=F}sendGalleryAccess(){if(!this.galleryAccessType||this.galleryAccessType!==l.pJ.folder&&this.galleryAccessType!==l.pJ.root)return void this.logger.error("Atempting to send gallery navigation telemetry that was never started!");const _=this.galleryAccessType;this.galleryAccessType=null;const F=Date.now()-this.galleryNavStart,V=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,isCached:this.toTelemetryBoolean(this.galleryAccessCached),contentType:l.zc.none,highlightId:"",navigationLevel:_,timeTakenMs:F,ageOfContent:0,numImages:this.folderScreenshots,numVideos:this.folderVideos,contentMatchesCurrentGame:l.Po.false},l.uz);this.telemetryService.push(V)}sendGalleryFileAccess(_){if(!this.galleryAccessType||this.galleryAccessType!==l.pJ.content)return void this.logger.error("Atempting to send gallery navigation telemetry that was never started!");const F=Date.now()-this.galleryNavStart;this.bridgeService.executeCommand(i.Gh.Common.Gallery.GetFileMetadata,{file:_.fullFilename}).subscribe(V=>{if(void 0===V.fileType)return;const b=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,isCached:l.Po.false,contentType:"image"===_.file.type?l.zc.image:l.zc.video,highlightId:_.hlName,navigationLevel:l.pJ.content,timeTakenMs:F,ageOfContent:Date.now()-new Date(_.date).getTime(),numImages:0,numVideos:0,contentMatchesCurrentGame:l.Po.false},l.uz);this.telemetryService.push(b)})}sendGalleryFilterUsed(_){const F=new l.ky({clientHost:this.clientHost,sessionId:this.cachedSessionId,filterCategory:_});this.telemetryService.push(F)}sendGalleryPlayedVideo(_,F){this.bridgeService.executeCommand(i.Gh.Common.Gallery.GetFileMetadata,{file:_}).subscribe(V=>{if(void 0===V.fileType)return;const b=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,highlightId:F},l.ci);this.telemetryService.push(b)})}sendGalleryFileRemoved(_){this.bridgeService.executeCommand(i.Gh.Common.Gallery.GetFileMetadata,{file:_.fullFilename}).subscribe(F=>{if(void 0===F.fileType)return;const V=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,contentType:"image"===_.file.type?l.zc.image:l.zc.video,highlightId:_.hlName},l.Jd);this.telemetryService.push(V)})}sendGalleryOpenedFileLocation(){const _=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId},l.j6);this.telemetryService.push(_)}sendAnselFreestyleSession(_,F,V,b,B,U,A,S,Y,se,fe,$){if("GFN"===this.igoConfig.branding){const ae=this.perGameEventFactory.generateFinalizedEvent({mode:_,totalMs:F,usedKeyboard:this.toTelemetryBoolean(V),usedMouse:this.toTelemetryBoolean(b),cmsId:U||"",shortName:A||"",panningUsed:this.toTelemetryBoolean(se),panningWithKB:this.toTelemetryBoolean(fe),panningWithMouse:this.toTelemetryBoolean($)},l.qG);this.telemetryService.push(ae)}else{const ae=this.perGameEventFactory.generateFinalizedEvent({mode:_,totalMs:F,usedKeyboard:this.toTelemetryBoolean(V),usedMouse:this.toTelemetryBoolean(b),usedController:this.toTelemetryBoolean(B),cmsId:U||"",shortName:A||"",DRSName:S||"",DRSProfileName:Y||"",panningUsed:this.toTelemetryBoolean(se),panningWithKB:this.toTelemetryBoolean(fe),panningWithMouse:this.toTelemetryBoolean($),panningWithGC:l.Po.false},l.LN);this.telemetryService.push(ae)}}sendAnselFreestyleFilters(_,F,V,b,B,U){if("GFN"===this.igoConfig.branding){const A=this.perGameEventFactory.generateFinalizedEvent({mode:F,filterName:_||"",cmsId:V||"",shortName:b||""},l.ze);this.telemetryService.push(A)}else{const A=this.perGameEventFactory.generateFinalizedEvent({mode:F,filterName:_||"",cmsId:V||"",shortName:b||"",DRSName:B||"",DRSProfileName:U||""},l.m$);this.telemetryService.push(A)}}sendFreestyleSlotTelemetry(_,F,V,b,B,U,A,S,Y,se,fe){if("GFN"===this.igoConfig.branding){const $=this.perGameEventFactory.generateFinalizedEvent({usedStyles:U,style1Filters:_,style2Filters:F,style3Filters:V,activeStyle:B||0,activeFilters:b,cmsId:S||"",shortName:Y||"",persistedFilters:this.toTelemetryBoolean(A),usedMenu:this.toTelemetryBoolean(!A)},l.o8);this.telemetryService.push($)}else{const $=this.perGameEventFactory.generateFinalizedEvent({usedStyles:U,style1Filters:_,style2Filters:F,style3Filters:V,activeStyle:B||0,activeFilters:b,cmsId:S||"",shortName:Y||"",DRSName:se||"",DRSProfileName:fe||"",persistedFilters:this.toTelemetryBoolean(A),usedMenu:this.toTelemetryBoolean(!A)},l.RX);this.telemetryService.push($)}}sendAnselScreenshotTelemetry(_,F,V,b,B,U,A,S,Y,se,fe,$,ae,me){if("GFN"===this.igoConfig.branding){const ye=new l.cd({state:_,cmsId:F||0,shortName:V||"",screenshotType:b,screenshotResolution:B,panningUsed:this.toTelemetryBoolean(U),mode:A,totalMs:S||0,gridUsed:this.toTelemetryBoolean(Y),installedDDVersion:_===l.WU.failed&&this.zone.name||"",gpuName:_===l.WU.failed&&this.zone.address||"",errorType:ae,errorString:me,roll:se,fov:fe,stackedFilters:$});this.telemetryService.push(ye)}}sendAnselFreestyleErrorTelemetry(_,F,V,b,B,U,A,S,Y,se,fe,$,ae,me){if("GFN"===this.igoConfig.branding){const ye=this.perGameEventFactory.generateFinalizedEvent({errorType:_,errorSubType:ae,errorString:me||"",mode:F,serverGPUType:this.zone.name,serverOSVersion:this.zone.address,usedMenu:l.Po.true,cmsId:V||"",shortName:b||""},l.gY);this.telemetryService.push(ye)}else{const ye=this.perGameEventFactory.generateFinalizedEvent({errorType:_,errorString:"",mode:F,systemType:fe||"",isOptimus:this.toTelemetryBoolean(se),usedMenu:l.Po.true,cmsId:V||"",shortName:b||"",DRSName:B||"",DRSProfileName:U||"",osVersion:Y||"",gpuName:S||"",cpuName:A||"",installedDDVersion:$||""},l.lH);this.telemetryService.push(ye)}}sendAnselFreestyleFeatureDisableTelemetry(_,F,V,b,B){if("GFN"===this.igoConfig.branding){const U=this.perGameEventFactory.generateFinalizedEvent({cmsId:"",shortName:F||"",mode:V,errorType:b,errorInfo:B||"",serverInfo:this.zone.address||""},l.J2);this.telemetryService.push(U)}}sendBroadcastEventTelemetry(_,F,V,b,B){if("GFN"===this.igoConfig.branding){const U=this.perGameEventFactory.generateFinalizedEvent({cmsId:"",shortName:F||"",action:V||l.MG.start,provider:l.ZA.lightstream,timeMs:0,modsActive:this.toTelemetryBoolean(this.modsActive)},l.HR);this.telemetryService.push(U)}}sendBroadcastErrorTelemetry(_,F,V,b,B){if("GFN"===this.igoConfig.branding){const U=this.perGameEventFactory.generateFinalizedEvent({cmsId:"",shortName:F||"",errorType:V||l.kt.unknownError,provider:l.ZA.lightstream,errorString:B||""},l.lj);this.telemetryService.push(U)}}setModsActiveStatus(_){this.modsActive=_}sendStatsClosedTelemetry(_,F,V){const b=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,totalMs:_,format:this.statsFormat[V],position:this.screenPosMap[F]},l.Nj);this.logger.info("Stats Closed Telemetry: ",b),this.telemetryService.push(b)}sendStatsViewChanged(_,F,V){const b=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,format:this.statsFormat[F],position:this.screenPosMap[V],uiOpen:this.toTelemetryBoolean(_)},l.PH);this.logger.info("Stats View Changed Telemetry: ",b),this.telemetryService.push(b)}sendGameplayEntrySetting(_){const F=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,profile:this.profileNameMap[_]},l.VC);this.logger.info("Gameplay Profile Entry Telemetry: ",F),this.telemetryService.push(F)}sendStreamingQualityChanged(_){const F=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,maxBitrateAuto:this.toTelemetryBoolean(_.maxBitrateAuto),maxBitrateAutoChanged:this.toTelemetryBoolean(_.maxBitrateAutoChanged),maxBitrate:_.maxBitrate,maxBitrateChanged:this.toTelemetryBoolean(_.MaxBitrateChanged),vsync:_.vSync,vsyncChanged:this.toTelemetryBoolean(_.vSyncChanged),drc:this.toTelemetryBoolean(_.drc),drcChanged:this.toTelemetryBoolean(_.drcChanged)},l.ck);this.logger.info("StreamingQuality Changed Telemetry: ",F),this.telemetryService.push(F)}sendResolutionUpscalingChanged(_){const F=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,upscaleMode:_.upscaleMode,detailEnhancement:_.detailEnhancement},l._B);this.logger.info("ResolutionUpscaling Changed Telemetry: ",F),this.telemetryService.push(F)}sendWidgetViewChanged(_,F){const V=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,indicator:this.widgetIndicatorMap[_],position:this.screenPosMap[F]},l.Rb);this.logger.info("Widget View Changed Telemetry: ",V),this.telemetryService.push(V)}sendNotificationChanged(_,F){const V=this.perGameEventFactory.generateFinalizedEvent({clientHost:this.clientHost,sessionId:this.cachedSessionId,control:this.notificationMap[_],state:this.toTelemetryBoolean(F)},l.AD);this.logger.info("Notification Changed Telemetry: ",V),this.telemetryService.push(V)}}return O.\u0275fac=function(_){return new(_||O)(g.LFG(I.ed),g.LFG(n.y0),g.LFG(I.dF),g.LFG(G.g),g.LFG(g.zs3),g.LFG(x.y1),g.LFG(E.Ll),g.LFG(I.MC),g.LFG(o.Ec),g.LFG(f.nG),g.LFG(P._c))},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},64067:(He,de,e)=>{"use strict";e.r(de),e.d(de,{GalleryModule:()=>te});var n=e(54364),i=e(71258),D=e(66660),m=e(51),y=e(6484),T=e(25816),r=e(79441),a=e(81134),s=e(34361),p=e(22663),l=e(85816),t=e(33927),w=e(98636),h=e(9170),u=e(27153),o=e(202),f=e(2984),c=e(94377),g=e(2316),I=e(24181),G=e(30582),x=e(85136),E=e(78819),P=e(1625),v=e(24298),O=e(52529),C=e(1124),_=e(70781),F=e(74058),V=e(84622),b=e(1707),B=e(94371),U=e(3603),A=e(58283);const S=["grid"],Y=["accordion"],se=function(ie){return{arg:ie}};function fe(ie,Q){if(1&ie){const k=g.EpF();g.TgZ(0,"button",21),g.NdJ("click",function(){g.CHM(k);const N=g.oxw().$implicit;return g.oxw(2).onMenuChanged(N)}),g.TgZ(1,"div",22),g.TgZ(2,"div",23),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.qZA(),g.qZA()}if(2&ie){const k=g.oxw().$implicit;g.xp6(2),g.ekj("active",k.active),g.xp6(1),g.hij(" ",g.xi3(4,3,k.label,g.VKq(6,se,k.value))," ")}}function $(ie,Q){if(1&ie){const k=g.EpF();g.ynx(0),g.TgZ(1,"div",22),g.TgZ(2,"mat-checkbox",30),g.NdJ("ngModelChange",function(N){return g.CHM(k).$implicit.enabled=N})("change",function(){const q=g.CHM(k).$implicit;return g.oxw(4).onHighlightFilterChanged(q)}),g.qZA(),g.TgZ(3,"span",31),g.NdJ("click",function(){const q=g.CHM(k).$implicit;return g.oxw(4).onHighlightFilterClicked(q)}),g._uU(4),g.qZA(),g.qZA(),g.BQk()}if(2&ie){const k=Q.$implicit;g.xp6(2),g.Q6J("ngModel",k.enabled),g.xp6(2),g.Oqu(k.displayName+" ("+k.count+")")}}function ae(ie,Q){if(1&ie){const k=g.EpF();g.TgZ(0,"mat-expansion-panel",24),g.TgZ(1,"mat-expansion-panel-header",25),g.TgZ(2,"div",12),g.TgZ(3,"button",26),g.NdJ("click",function(N){g.CHM(k);const q=g.oxw().$implicit,Me=g.oxw(2);return N.stopPropagation(),Me.onMenuChanged(q)}),g.TgZ(4,"div",27),g._uU(5),g.ALo(6,"translate"),g.qZA(),g.qZA(),g.TgZ(7,"button",28),g._UZ(8,"mat-icon",15),g.qZA(),g.qZA(),g.qZA(),g.TgZ(9,"div",29),g.YNc(10,$,5,2,"ng-container",17),g.qZA(),g.qZA()}if(2&ie){const k=g.oxw().$implicit;g.xp6(4),g.ekj("active",k.active),g.xp6(1),g.hij(" ",g.xi3(6,4,k.label,g.VKq(7,se,k.value))," "),g.xp6(5),g.Q6J("ngForOf",k.children)}}function me(ie,Q){if(1&ie&&(g.ynx(0),g.YNc(1,fe,5,8,"button",19),g.YNc(2,ae,11,9,"mat-expansion-panel",20),g.BQk()),2&ie){const k=Q.$implicit;g.xp6(1),g.Q6J("ngIf",!k.children),g.xp6(1),g.Q6J("ngIf",k.children)}}function ye(ie,Q){if(1&ie){const k=g.EpF();g.ynx(0),g._UZ(1,"div",6),g.TgZ(2,"nv-dropdown",7),g.NdJ("selectionChanged",function(N){return g.CHM(k),g.oxw().onDropdownChanged(N)}),g.qZA(),g.TgZ(3,"mat-accordion",8),g.TgZ(4,"mat-expansion-panel",9,10),g.NdJ("opened",function(){return g.CHM(k),g.oxw().accordionOpen=!0})("closed",function(){return g.CHM(k),g.oxw().accordionOpen=!1}),g.TgZ(6,"mat-expansion-panel-header",11),g.TgZ(7,"div",12),g.TgZ(8,"div",13),g._uU(9),g.ALo(10,"translate"),g.qZA(),g.TgZ(11,"div",14),g._UZ(12,"mat-icon",15),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"div",16),g.YNc(14,me,3,2,"ng-container",17),g._UZ(15,"div",18),g.qZA(),g.qZA(),g.qZA(),g._UZ(16,"mat-divider"),g.BQk()}if(2&ie){const k=g.oxw();g.xp6(2),g.Q6J("selection",k.dropdownIndex)("disabled",k.dropdownDisabled1||k.lowDiskSpace)("input",k.dropdownInput),g.xp6(2),g.ekj("extra-bottom",k.accordionOpen),g.Q6J("@.disabled",k.delay)("disabled",k.dropdownDisabled2||k.lowDiskSpace),g.xp6(5),g.hij(" ",g.lcZ(10,9,"gallery.ViewSettings")," "),g.xp6(5),g.Q6J("ngForOf",k.menuItems)}}function ue(ie,Q){1&ie&&g._UZ(0,"div")}function X(ie,Q){if(1&ie&&(g.TgZ(0,"div",32),g.TgZ(1,"div",33),g._uU(2),g.ALo(3,"translate"),g.qZA(),g.qZA()),2&ie){const k=g.oxw();g.xp6(2),g.Oqu(g.xi3(3,1,k.emptyContainerString,k.emptyContainerParams))}}function j(ie,Q){if(1&ie){const k=g.EpF();g.TgZ(0,"nv-gallery-item",37),g.NdJ("dblclick",function(){const q=g.CHM(k).$implicit;return g.oxw(2).openFile(q)}),g.qZA()}if(2&ie){const k=Q.$implicit,oe=Q.scroll,N=g.oxw(2);g.Q6J("item",k)("scrolling",oe)("activeItem",N.galleryOpenItem)("thumbSize",N.thumbSize)("initialDelay",N.delay)}}function K(ie,Q){if(1&ie){const k=g.EpF();g.TgZ(0,"nv-virtual-grid-container",34,35),g.NdJ("multiSelectMode",function(N){return g.CHM(k),g.oxw().onMultiSelectMode(N)})("multiSelectList",function(N){return g.CHM(k),g.oxw().onMultiSelectList(N)})("selectedItemChange",function(N){return g.CHM(k),g.oxw().gallerySelection=N})("selectedItemChange",function(N){return g.CHM(k),g.oxw().selectedItemChanged(N)})("keydown",function(N){return g.CHM(k),g.oxw().openGalleryItem(N)}),g.YNc(2,j,1,5,"ng-template",null,36,g.W1O),g.qZA()}if(2&ie){const k=g.MAs(3),oe=g.oxw();g.Q6J("items",oe.galleryItems)("selectedItem",oe.gallerySelection)("itemHeight",oe.thumbSize)("marginBottom",8)("itemWidth",oe.thumbSize)("marginRight",8)("template",k)("topBottomPad",16)}}let Z=(()=>{class ie{constructor(k,oe,N,q,Me,xe,ct,Se,Ge,St,Tt,Te,Je,xt){this.loggingService=k,this.route=oe,this.osService=N,this.galleryService=q,this.bridgeService=Me,this.sdkService=xe,this.oscDisplayService=ct,this.cacheService=Se,this.telemetry=Ge,this.navigationService=St,this.dialogHelper=Tt,this.igoConfig=Te,this.appBarService=Je,this.gfnInfoService=xt,this.destroy$=new r.xQ,this.previewOpen=!1,this.initComplete=!1,this.accordionOpen=!1,this.lowDiskSpace=!1,this.shareEnabled=!1,this.originalItems=[],this.useItems=[],this.galleryItems=[],this.dropdownDisabled1=!1,this.dropdownDisabled2=!1,this.noEntriesYet=!1,this.emptyString="",this.emptyContainerVisible=!1,this.emptyContainerString="",this.emptyContainerParams={},this.emptyHideDropdown=!1,this.thumbSize=104,this.delay=!0,this.currentDropdownSelection="",this.dropdownIndex=-1,this.addMenu=!0,this.menuItems=[],this.menuStrings=[],this.filters=["all","highlight","video","instantreplay","image"],this.telemetryFilters=[c.R5.none,c.R5.highlight,c.R5.video,c.R5.ir,c.R5.screenshot],this.activeFilter=this.filters[0],this.multiSelectMode=!1,this.multiSelectList=void 0,this.openFromSdk=!1,this.recentHighlightsIndex=1,this.highlightsGame="",this.hlPending=!1,this.logger=this.loggingService.getLogger("Gallery"),"GFE"===this.igoConfig.branding&&(this.shareEnabled=!0),this.setAppBarInitial(),this.appBarService.actionClicked$.pipe((0,p.R)(this.destroy$)).subscribe(Ye=>{this.appBarClicked(Ye)})}ngOnInit(){this.dirSeparator=this.osService.getDirSeparator(),this.telemetry.startGalleryAccess(c.pJ.root),this.galleryService.setGalleryThumbSize(this.thumbSize),this.cacheService.galleryActive(!0),this.handleView(),this.initializeFilters(),this.backCallback$=this.navigationService.escapeEvent().subscribe(()=>{this.onBackClicked()}),this.galleryService.filesSelectedDataChangeListener.pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.handleView()}),this.galleryService.lowDiskSpaceEvent().pipe((0,p.R)(this.destroy$)).subscribe(k=>{this.lowDiskSpace=k,this.logger.info("The disk space is low: ",k),this.handleView()}),this.initializeView().pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.telemetry.sendGalleryAccess(),this.delayedHighlightSubscription$=this.galleryService.listenForDelayedEvents().subscribe(k=>{k.hlEvent===c.ZB.HIGHLIGHT_COMPLETED&&(this.resetView(k.args),this.processDelayedHighlight(k.args))}),this.canceledHighlightSubscription$=this.galleryService.isHighlightCanceled().subscribe(k=>{k.hlEvent===c.ZB.HIGHLIGHT_COMPLETED&&this.processCanceledHighlight(k.args)}),this.refreshGallerySubscription$=this.galleryService.refreshEvent().subscribe(k=>{this.currentDropdownSelection===k.folder&&(k.filename?this.originalItems.findIndex(N=>N.fullFilename===k.filename)>=0?this.reloadItems():this.checkForZeroEntryDropdown():this.reloadItems())}),this.initComplete=!0}),setTimeout(()=>this.delay=!1,300),this.galleryService.previewPaneEvent().pipe((0,p.R)(this.destroy$)).subscribe(k=>{this.previewEvent(k)})}setAppBarInitial(){this.appBarService.setTitle("gallery.Gallery"),this.appBarService.setActive(!1),this.appBarService.setNavButtonArrow(),this.appBarService.setIcons([{id:"closeIgo",icon:"close",tooltip:"tooltips.Close"}])}initializeFilters(){this.menuStrings=["filterMenu.ShowAll","filterMenu.Highlights","filterMenu.VideoRecordings","filterMenu.InstantReplay","filterMenu.Screenshots"],this.menuStrings.forEach(k=>{this.menuItems.push({label:k,value:0,active:!1,children:null})})}setupFilterList(){const k=(0,o.cloneDeep)(this.galleryService.fileCounts);if(k.highlights=0,this.openFromSdk&&(k.total=0,k.videos=0,k.instantReplays=0,k.images=0),this.useItems.forEach(oe=>{k.highlights+="Highlight"===oe.file.subtype?1:0,this.openFromSdk&&(k.total++,k.videos+="Manual"===oe.file.subtype?1:0,k.instantReplays+="InstantReplay"===oe.file.subtype?1:0,k.images+="image"===oe.file.type?1:0)}),this.menuItems[0].value=k.total,this.menuItems[1].value=k.highlights,this.menuItems[2].value=k.videos,this.menuItems[3].value=k.instantReplays,this.menuItems[4].value=k.images,k.highlightBreakDown&&k.highlightBreakDown.length){if(this.openFromSdk){const oe=this.galleryService.highlightsSummaryData.highlights;k.highlightBreakDown.forEach(N=>{N.count=oe.filter(q=>""!==q.path&&q.highlightName===N.name).length})}this.menuItems[1].children=k.highlightBreakDown}else this.menuItems[1].children=[];this.logger.info("File counts: ",k),0!==k.total&&!this.openFromSdk&&(1===this.galleryService.activeFilter&&0===k.highlights||2===this.galleryService.activeFilter&&0===k.videos||3===this.galleryService.activeFilter&&0===k.instantReplays||4===this.galleryService.activeFilter&&0===k.images)&&(this.menuItems[this.galleryService.activeFilter].active=!1,this.galleryService.activeFilter=0,this.activeFilter=this.filters[0],this.menuItems[0].active=!0)}initializeDropdown(k){const oe=k,N=oe.length;if(0===N)return this.dropdownDisabled1=this.dropdownDisabled2=!0,this.dropdownInput=["settings.NoGamesFound"],this.dropdownFolders=[""],this.noEntriesYet=!0,void this.handleView();const q=this.galleryService.topLevelCounts.slice();this.dropdownInput=[],this.dropdownFolders=[];for(let Me=0;Me<N;Me++){const xe=q.find(Se=>Se.folder===oe[Me]);let ct=xe?xe.totalCount:0;this.openFromSdk&&(ct=this.highlightsData.highlights.length,this.dropdownDisabled1=!0,this.dropdownDisabled2=!1),this.dropdownInput.push(`${oe[Me]} (${ct})`),this.dropdownFolders.push(oe[Me])}}initializeView(){let k=!1;if(this.route.snapshot.params.callbackData)try{const oe=JSON.parse(this.route.snapshot.params.callbackData);oe&&oe.openedFromSDK&&(k=oe.openedFromSDK)}catch(oe){}return this.logger.info("InitializeView openViaSDK: ",k),this.highlightsData=this.galleryService.getHighlightsToUse(k),this.galleryService.highlightSummaryIsOpen&&k?(this.openFromSdk=!0,this.activeFilter=this.filters[this.recentHighlightsIndex],this.highlightsGame=this.highlightsData.profileName,this.menuItems[this.recentHighlightsIndex].active=!0):(this.activeFilter=this.filters[this.galleryService.activeFilter],this.menuItems[this.galleryService.activeFilter].active=!0),this.galleryService.getFolders().pipe((0,l.zg)(oe=>{const N=this.gfnInfoService.currentGameProfileName,q=this.galleryService.getLastUserSelectedFolder(),Me=this.openFromSdk||N,ct=this.openFromSdk?this.highlightsData.profileName:""===q?N:q;let Se=void 0!==oe.find(St=>St===ct);this.openFromSdk&&!Se&&(oe.push(ct),oe.sort(),Se=!0),this.initializeDropdown(oe);const Ge=Me&&Se?ct:this.galleryService.getWorkingFolder();return""===Ge?(0,a.of)([]):(this.currentDropdownSelection=Ge,this.dropdownIndex=this.dropdownFolders.indexOf(Ge),this.galleryService.showFolderContents(this.currentDropdownSelection))}),(0,t.U)(oe=>(this.processGalleryContent(oe),!0)))}resetView(k){this.initComplete&&!this.openFromSdk&&(this.emptyContainerVisible&&this.noEntriesYet?(this.emptyContainerVisible=!1,this.noEntriesYet=!1,this.dropdownDisabled1=this.dropdownDisabled2=!1,this.cacheService.flushDirectoryList(),this.initializeView().pipe((0,p.R)(this.destroy$)).subscribe()):void 0===this.dropdownFolders.find(oe=>oe===k.folder)?(this.logger.info("Folder not found...adding!"),this.galleryService.getFolders().pipe((0,p.R)(this.destroy$)).subscribe(oe=>{this.initializeDropdown(oe)})):(this.logger.info("Folder found...updating count!"),this.fixMissingCounts(k.folder)))}processGalleryContent(k){if(this.hlPending=this.isHighlightInUGCPending(k),this.checkForZeroEntryDropdown(),!k.length&&!this.hlPending)return this.setupFilterList(),!1;this.emptyString=void 0,this.handleView(),this.originalItems=k.slice(),this.preFilterData(!0)}isHighlightInUGCPending(k){let oe=0;if(k)return k.forEach(N=>{""===N.fullFilename&&oe++}),!!oe}handleView(){this.emptyContainerVisible=!!(this.lowDiskSpace||this.noEntriesYet||this.emptyString),this.emptyHideDropdown=!1,this.lowDiskSpace?(this.emptyContainerString="mainMenu.LowDiskSpace",this.emptyContainerParams={},this.emptyHideDropdown=!0):this.noEntriesYet?(this.emptyContainerString="gallery.NoEntriesYet",this.emptyContainerParams={},this.emptyHideDropdown=!0):this.emptyString&&(this.emptyContainerString=this.emptyString,this.emptyContainerParams={arg1:this.currentDropdownSelection})}checkForZeroEntryDropdown(){const k=this.openFromSdk&&0!==this.galleryService.highlightsSummaryData.highlights.length,N=this.galleryService.topLevelCounts.slice().find(Me=>Me.folder===this.currentDropdownSelection);this.emptyString=N&&N.totalCount||this.hlPending||k?void 0:"gallery.ZeroEntries",this.handleView()}preFilterData(k){this.useItems=this.openFromSdk&&this.currentDropdownSelection===this.highlightsGame?this.originalItems.filter(N=>this.galleryService.highlightsSummaryData.highlights.find(q=>N.hlId===q.id)):this.originalItems.slice();const oe=(new Date).toISOString();this.useItems.forEach(N=>{""===N.date&&(N.date=oe)}),k&&this.setupFilterList(),this.filterData()}filterData(){this.activeFilter===this.filters[0]?this.galleryItems=this.useItems:this.activeFilter===this.filters[1]?this.galleryItems=this.useItems.filter(k=>{if("Highlight"===k.file.subtype){if(this.menuItems[1].children&&k.hlName){const oe=this.menuItems[1].children.find(N=>N.name===k.hlName);if(oe)return oe.enabled}return!0}return!1}):this.activeFilter===this.filters[2]?this.galleryItems=this.useItems.filter(k=>"Manual"===k.file.subtype||"video"===k.file.type&&"InstantReplay"!==k.file.subtype&&"Manual"!==k.file.subtype&&"Highlight"!==k.file.subtype):this.activeFilter===this.filters[3]?this.galleryItems=this.useItems.filter(k=>"InstantReplay"===k.file.subtype):this.activeFilter===this.filters[4]&&(this.galleryItems=this.useItems.filter(k=>k.file.type===this.activeFilter)),this.multiSelectMode&&this.onCancelMultiSelectClicked(),this.gallerySelection&&this.galleryItems.findIndex(k=>k===this.gallerySelection)<0&&(this.gallerySelection=void 0)}ngOnDestroy(){this.dialogHelper.closeSnackBar(),this.update$&&this.update$.unsubscribe(),this.backCallback$&&this.backCallback$.unsubscribe(),this.centerPaneCallback$&&this.centerPaneCallback$.unsubscribe(),this.delayedHighlightSubscription$&&this.delayedHighlightSubscription$.unsubscribe(),this.canceledHighlightSubscription$&&this.canceledHighlightSubscription$.unsubscribe(),this.refreshGallerySubscription$&&this.refreshGallerySubscription$.unsubscribe(),this.destroy$.next(!0),this.destroy$.unsubscribe(),this.cacheService.galleryActive(!1),this.galleryService.setHighlightsSummaryOpen(!1)}onBackClicked(){setTimeout(()=>{this.logger.info("Back clicked"),this.navigationService.navigate(["../main-menu"],{relativeTo:this.route.parent,skipLocationChange:!0},c.wB.mainMenu)})}onOpenClicked(){if(this.logger.info("Open clicked"),!this.gallerySelection)return void this.logger.info("no selected item");let k=this.gallerySelection.fullFilename;const oe=k.lastIndexOf(this.dirSeparator);if(-1!==oe&&(k=k.slice(0,oe)),""!==k){this.oscDisplayService.closeOSC();const N=this.bridgeService.executeCommand(f.Gh.Common.Applicationinfo.OpenDirectoryBrowser,{name:k}).subscribe(()=>{N.unsubscribe()});this.telemetry.sendGalleryOpenedFileLocation()}}arrayDeleteFile(k,oe){const N=oe.indexOf(k);N>=0&&oe.splice(N,1)}onRemoveClicked(){if(this.logger.info("Remove clicked"),!this.gallerySelection)return void this.logger.info("no selected item");let k;k=this.multiSelectMode?this.multiSelectList:[this.gallerySelection];const oe=this.multiSelectMode&&this.multiSelectList.length>1,xe={title:oe?"confirmation.confirmDeleteTitleMulti":"confirmation.confirmDeleteTitle",query:oe?"confirmation.confirmDeleteMulti":"confirmation.confirmDelete",queryParam:{arg1:oe?this.multiSelectList.length:"0"},action1:"confirmation.NotRightNow",action2:"confirmation.remove"};let ct=!1;const Se=this.galleryItems.slice(),Ge=this.useItems.slice(),St=this.originalItems.slice(),Tt=(0,o.cloneDeep)(this.menuItems),Te=this.dropdownInput.slice(),Je=(0,o.cloneDeep)(this.galleryService.topLevelCounts),xt=()=>{this.menuItems.forEach((Ye,rt)=>{Ye.value=Tt[rt].value}),this.galleryService.topLevelCounts.forEach((Ye,rt)=>{Ye.totalCount=Je[rt].totalCount}),Tt[1].value>0&&this.menuItems[1].children.forEach((Ye,rt)=>{Ye.count=Tt[1].children[rt].count}),this.checkForZeroEntryDropdown(),setTimeout(()=>{this.originalItems=St,this.useItems=Ge,this.galleryItems=Se,this.dropdownInput=Te},0)};this.dialogHelper.openAlertDialog(xe).pipe((0,p.R)(this.destroy$),(0,l.zg)(Ye=>Ye.afterClosed()),(0,w.b)(()=>{this.multiSelectMode&&this.onCancelMultiSelectClicked()}),(0,h.h)(Ye=>Ye===c.DX.Action2),(0,w.b)(()=>this.closePreview()),(0,l.zg)(()=>(0,s.D)(k)),(0,w.b)(Ye=>{if(this.arrayDeleteFile(Ye,this.galleryItems),this.arrayDeleteFile(Ye,this.useItems),this.arrayDeleteFile(Ye,this.originalItems),this.galleryService.topLevelCounts.slice().forEach(ge=>{if(Ye.folder===ge.folder){const Ve=this.dropdownFolders.indexOf(ge.folder);let at=0;this.openFromSdk?at=this.galleryItems.length:(at=ge.totalCount||0,at>0&&at--),ge.totalCount=at,Ve>=0&&(this.dropdownInput[Ve]=`${ge.folder} (${at})`)}this.dropdownInput=this.dropdownInput.slice()}),this.menuItems[0].value--,Ye.file.subtype===f.Yk.Common.Gallery.SubType.Highlight&&(this.menuItems[1].value--,Ye.hlName)){const ge=this.menuItems[1].children.find(Ve=>Ve.name===Ye.hlName);ge&&ge.count--}(Ye.file.subtype===f.Yk.Common.Gallery.SubType.Manual||Ye.file.type===f.Yk.Common.Gallery.FileType.video&&Ye.file.subtype!==f.Yk.Common.Gallery.SubType.InstantReplay&&Ye.file.subtype!==f.Yk.Common.Gallery.SubType.Manual&&Ye.file.subtype!==f.Yk.Common.Gallery.SubType.Highlight)&&this.menuItems[2].value--,Ye.file.subtype===f.Yk.Common.Gallery.SubType.InstantReplay&&this.menuItems[3].value--,Ye.file.type===f.Yk.Common.Gallery.FileType.image&&this.menuItems[4].value--}),(0,u.Z)(),(0,w.b)(()=>this.checkForZeroEntryDropdown()),(0,w.b)(()=>this.galleryItems=this.galleryItems.slice()),(0,l.zg)(()=>this.galleryService.showDeleteSnackbar(k)),(0,w.b)(Ye=>ct=Ye),(0,h.h)(Ye=>!0===Ye),(0,l.zg)(()=>this.galleryService.getCurrentDropdownCount(this.currentDropdownSelection)),(0,w.b)(()=>{this.galleryService.topLevelCounts.slice().forEach(rt=>{const ge=this.dropdownFolders.indexOf(rt.folder);ge>=0&&(this.dropdownInput[ge]=`${rt.folder} (${this.openFromSdk?this.galleryItems.length:rt.totalCount||0})`)}),this.dropdownInput=this.dropdownInput.slice()})).subscribe(()=>{},()=>{ct||xt()},()=>{ct||xt()})}selectedItemChanged(k){this.gallerySelection=k,this.multiSelectMode||(this.galleryService.currentSelectedFilesData=[k])}onDropdownChanged(k){this.logger.info("Dropdown selection changed to: "+k),this.closePreview(),this.dialogHelper.closeSnackBar(),this.dropdownIndex=k,this.currentDropdownSelection=this.dropdownFolders[k],this.galleryService.setLastUserSelectedFolder(this.currentDropdownSelection),this.reloadItems()}reloadItems(){this.telemetry.startGalleryAccess(c.pJ.folder),this.update$&&this.update$.unsubscribe(),this.gallerySelection=void 0,this.originalItems=[],this.useItems=[],this.galleryItems=[],this.update$=this.galleryService.showFolderContents(this.currentDropdownSelection).subscribe(k=>{this.processGalleryContent(k),this.fixMissingCounts(this.currentDropdownSelection),this.telemetry.sendGalleryAccess()})}openFile(k){!k.fullFilename||this.multiSelectMode||(this.galleryService.currentFileData=this.gallerySelection,this.galleryOpenItem=this.gallerySelection,this.telemetry.startGalleryAccess(c.pJ.content),this.previewOpen?this.telemetry.sendGalleryFileAccess(k):(this.centerPaneOpened(),this.galleryService.setPreviewCaller(c.wB.galleryMain),this.navigationService.navigate([{outlets:{centerPane:"center-view/preview"}}],{relativeTo:this.route,skipLocationChange:!0},"image"===k.file.type?c.wB.galleryImagePreview:c.wB.galleryVideoPreview).then(()=>{this.telemetry.sendGalleryFileAccess(k)})))}centerPaneOpened(){this.previewOpen||(this.navigationService.openCenterPane(!0),this.previewOpen=!0,this.centerPaneCallback$=this.navigationService.centerPaneClosedEvent().subscribe(()=>{this.galleryOpenItem=void 0,this.previewOpen=!1,this.centerPaneCallback$.unsubscribe(),this.centerPaneCallback$=void 0}))}closePreview(){this.previewOpen&&this.navigationService.navigate([{outlets:{centerPane:null}}],{relativeTo:this.route,skipLocationChange:!0},c.wB.galleryMain)}onMenuChanged(k){this.dialogHelper.closeSnackBar(),this.logger.info("Menu changed to: ",k),this.menuItems.forEach(N=>N.active=!1);const oe=this.menuItems.findIndex(N=>N===k);k.active=!0,this.openFromSdk||(this.galleryService.activeFilter=oe),this.activeFilter=this.filters[oe],this.preFilterData(!1),this.checkForZeroEntryDropdown(),this.telemetry.sendGalleryFilterUsed(this.telemetryFilters[oe])}onHighlightFilterChanged(k){this.dialogHelper.closeSnackBar(),this.preFilterData(!1),this.checkForZeroEntryDropdown()}onHighlightFilterClicked(k){this.dialogHelper.closeSnackBar(),k.enabled=!k.enabled,this.preFilterData(!1)}openGalleryItem(k){"Enter"===k.key&&this.gallerySelection?this.openFile(this.gallerySelection):"Delete"===k.key&&this.onRemoveClicked()}onMultiSelectMode(k){this.multiSelectMode=k,k&&this.previewOpen&&this.closePreview()}onMultiSelectList(k){this.multiSelectList=k.slice(0),this.changeAppBarSelected(this.multiSelectList.length),this.galleryService.currentSelectedFilesData=this.multiSelectList}onCancelMultiSelectClicked(){this.virtualGrid.cancelMultiSelect()}fixMissingCounts(k){const oe=this.dropdownFolders.indexOf(k);if(-1!==oe){const N=this.galleryService.getCurrentDropdownCount(k).subscribe(q=>{this.openFromSdk&&(q=this.galleryItems.length),this.dropdownInput[oe]=`${k} (${q})`,this.dropdownInput=this.dropdownInput.slice(),this.setupFilterList(),this.handleView(),N.unsubscribe()})}}processCanceledHighlight(k){const oe=this.galleryItems.slice(),N=oe.findIndex(q=>q.hlId===k.id);-1!==N?(this.logger.info("Canceled item: ",oe[N]),oe[N].cancel=!0,this.galleryItems=oe.slice()):this.logger.info("highlightUpdate could not find a match...skipping")}processDelayedHighlight(k){const oe=this.galleryItems.findIndex(N=>N.hlId===k.hlId);-1!==oe?(Object.assign(this.galleryItems[oe],k),this.fixMissingCounts(this.galleryItems[oe].folder)):this.logger.info("highlightUpdate could not find a match...skipping")}appBarClicked(k){this.dialogHelper.closeSnackBar(),setTimeout(()=>{"nav"===k?this.multiSelectMode?this.onCancelMultiSelectClicked():this.onBackClicked():"delete"===k&&this.onRemoveClicked()},0)}changeAppBarSelected(k){0===k?this.setAppBarInitial():1===k?(this.appBarService.setActive(!0),this.appBarService.setNavButtonClose(),this.appBarService.setTitle("gallery.OneSelected"),this.appBarService.setIcons([{id:"delete",icon:"delete_forever",tooltip:"tooltips.Remove"}]),this.shareEnabled&&this.appBarService.addIcon({id:"share",icon:"share",tooltip:"share.Share"})):k>1&&(this.appBarService.setTitle("gallery.XSelected",{arg:k}),this.shareEnabled&&this.appBarService.deleteIcon("share"))}previewEvent(k){if(k===c.T7.DeleteFile)this.gallerySelection=this.galleryOpenItem,this.onRemoveClicked();else if(k===c.T7.BackNav||k===c.T7.ForwardNav){let oe=this.galleryItems.indexOf(this.galleryOpenItem);if(oe<0)return;k===c.T7.BackNav?oe-=1:oe+=1,oe=oe>=this.galleryItems.length?0:oe<0?this.galleryItems.length-1:oe,this.gallerySelection=this.galleryItems[oe],this.openFile(this.gallerySelection)}}}return ie.\u0275fac=function(k){return new(k||ie)(g.Y36(y.ed),g.Y36(i.gz),g.Y36(c.HY),g.Y36(c.rj),g.Y36(y.dF),g.Y36(c.b5),g.Y36(c.vU),g.Y36(c.QM),g.Y36(c.l),g.Y36(c.f5),g.Y36(c.Mb),g.Y36(c.gs),g.Y36(c.ad),g.Y36(I.In))},ie.\u0275cmp=g.Xpm({type:ie,selectors:[["igo-gallery"]],viewQuery:function(k,oe){if(1&k&&(g.Gf(S,5),g.Gf(Y,5)),2&k){let N;g.iGM(N=g.CRH())&&(oe.virtualGrid=N.first),g.iGM(N=g.CRH())&&(oe.accordion=N.first)}},decls:8,vars:4,consts:[["fxLayout","column","fxFlex",""],["fxFlex","grow","fxLayout","column"],[4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],["noGrid",""],["useGrid",""],[1,"nv-gap-24"],[1,"nv-item-row",3,"selection","disabled","input","selectionChanged"],["displayMode","flat",1,"accordion","nv-item-row"],["hideToggle","true",1,"nv-item-row","view-panel",3,"disabled","opened","closed"],["accordion",""],["matRipple","","collapsedHeight","36px","expandedHeight","36px",1,"hig-button-overlay"],["fxLayout","row","fxLayoutAlign","start center","fxFlexFill",""],["fxFlex","grow",1,"font-body2","accordion-label"],["fxFlex","none","fxLayout","row","fxLayoutAlign","center center",1,"nv-item-icon"],["svgIcon","chevron_down",1,"accordion-chevron"],["fxLayout","column",1,"indent","max-accordion-height"],[4,"ngFor","ngForOf"],["fxFlex","none",1,"nv-gap-16"],["mat-button","","class","complex-button","fxFlex","none",3,"click",4,"ngIf"],["fxFlex","none","hideToggle","true",4,"ngIf"],["mat-button","","fxFlex","none",1,"complex-button",3,"click"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","shrink",1,"font-body2","accordion-item"],["fxFlex","none","hideToggle","true"],["collapsedHeight","36px","expandedHeight","36px"],["mat-button","","fxFlex","grow",1,"font-body2","accordion-label",3,"click"],[1,"font-body2"],["mat-button","","fxFlex","none","fxLayout","row","fxLayoutAlign","center center",1,"nv-item-icon","complex-button"],["fxLayout","column",1,"indent"],["fxFlex","none",3,"ngModel","ngModelChange","change"],["fxFlex","shrink",1,"font-body2","check-label",3,"click"],["fxFlex","","fxLayout","row","fxLayoutAlign","center center",1,"emptyContainer"],[1,"font-body2","emptyMessage"],["tabIndex","0","fxFlex","","fxLayout","row","multiSelect","true","chunkFileMetadata","true",1,"nv-item-row",3,"items","selectedItem","itemHeight","marginBottom","itemWidth","marginRight","template","topBottomPad","multiSelectMode","multiSelectList","selectedItemChange","keydown"],["grid",""],["galleryTemplate",""],[3,"item","scrolling","activeItem","thumbSize","initialDelay","dblclick"]],template:function(k,oe){if(1&k&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.YNc(2,ye,17,11,"ng-container",2),g.YNc(3,ue,1,0,"div",3),g.YNc(4,X,4,4,"ng-template",null,4,g.W1O),g.YNc(6,K,4,8,"ng-template",null,5,g.W1O),g.qZA(),g.qZA()),2&k){const N=g.MAs(5),q=g.MAs(7);g.xp6(2),g.Q6J("ngIf",!oe.emptyHideDropdown),g.xp6(1),g.Q6J("ngIf",oe.emptyContainerVisible)("ngIfThen",N)("ngIfElse",q)}},directives:[G.xw,G.yH,n.O5,x.y,E.i,P.pp,P.ib,P.yz,v.wG,G.Wh,G.s9,O.Hw,n.sg,C.d,_.lW,F.oG,V.xZ,b.JJ,b.On,B.e,U.x],pipes:[A.X$],styles:['.nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-error[_ngcontent-%COMP%]{color:#e02828}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}body[_ngcontent-%COMP%]   nv-oogg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:0;background:rgba(255,255,255,.3)}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:0;background:rgba(255,255,255,.7)}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus, .nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none}nv-oogg[_ngcontent-%COMP%]   [readonly][_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   [type=readonly][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   [readonly][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   [type=readonly][_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;padding:0}nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled), nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled), .nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none}nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   dir[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   dir[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{-webkit-margin-before:0!important;-webkit-margin-after:0!important;-webkit-margin-start:0!important;-webkit-margin-end:0!important;-webkit-padding-start:0!important;-moz-margin-start:0!important;-moz-margin-end:0!important;-moz-padding-start:0!important}nv-oogg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0}nv-oogg[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}.emptyContainer[_ngcontent-%COMP%]{align-items:center}.emptyMessage[_ngcontent-%COMP%]{height:52px;margin:0 24px;max-width:400px;text-align:center}.gallery-scroller[_ngcontent-%COMP%]{padding:16px 24px}.accordion[_ngcontent-%COMP%]{padding:8px 24px 16px}.extra-bottom[_ngcontent-%COMP%]{margin-bottom:-16px}.accordion-label[_ngcontent-%COMP%]{padding:8px}.isLtr[_nghost-%COMP%]   .accordion-label[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .accordion-label[_ngcontent-%COMP%]{text-align:left}html[dir=ltr][_ngcontent-%COMP%]   .accordion-label[_ngcontent-%COMP%]{--dummy0: 0;text-align:left}.isRtl[_nghost-%COMP%]   .accordion-label[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .accordion-label[_ngcontent-%COMP%]{text-align:right}html[dir=rtl][_ngcontent-%COMP%]   .accordion-label[_ngcontent-%COMP%]{--dummy0: 0;text-align:right}.accordion-item[_ngcontent-%COMP%]{padding:8px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;min-width:0;width:0}.isLtr[_nghost-%COMP%]   .accordion-item[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .accordion-item[_ngcontent-%COMP%]{text-align:left}html[dir=ltr][_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{--dummy0: 0;text-align:left}.isRtl[_nghost-%COMP%]   .accordion-item[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .accordion-item[_ngcontent-%COMP%]{text-align:right}html[dir=rtl][_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{--dummy0: 0;text-align:right}.check-label[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;min-width:0;width:0;padding-top:8px;padding-bottom:8px}.isLtr[_nghost-%COMP%]   .check-label[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .check-label[_ngcontent-%COMP%]{padding-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .check-label[_ngcontent-%COMP%]{--dummy1: 0;padding-left:8px}.isRtl[_nghost-%COMP%]   .check-label[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .check-label[_ngcontent-%COMP%]{padding-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .check-label[_ngcontent-%COMP%]{--dummy1: 0;padding-right:8px}.active[_ngcontent-%COMP%]{color:#76b900}.isLtr[_nghost-%COMP%]   .mat-expansion-panel.view-panel[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .mat-expansion-panel.view-panel[_ngcontent-%COMP%]{margin-right:-24px!important}html[dir=ltr][_ngcontent-%COMP%]   .mat-expansion-panel.view-panel[_ngcontent-%COMP%]{--dummy4: 0;margin-right:-24px!important}.isRtl[_nghost-%COMP%]   .mat-expansion-panel.view-panel[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .mat-expansion-panel.view-panel[_ngcontent-%COMP%]{margin-left:-24px!important}html[dir=rtl][_ngcontent-%COMP%]   .mat-expansion-panel.view-panel[_ngcontent-%COMP%]{--dummy4: 0;margin-left:-24px!important}.isLtr[_nghost-%COMP%]   .mat-expansion-panel.view-panel[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .mat-expansion-panel.view-panel[_ngcontent-%COMP%]{padding-right:24px!important}html[dir=ltr][_ngcontent-%COMP%]   .mat-expansion-panel.view-panel[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px!important}.isRtl[_nghost-%COMP%]   .mat-expansion-panel.view-panel[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .mat-expansion-panel.view-panel[_ngcontent-%COMP%]{padding-left:24px!important}html[dir=rtl][_ngcontent-%COMP%]   .mat-expansion-panel.view-panel[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px!important}.max-accordion-height[_ngcontent-%COMP%]{max-height:526px;overflow:overlay}.isLtr[_nghost-%COMP%]   .max-accordion-height[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .max-accordion-height[_ngcontent-%COMP%]{margin-right:-24px}html[dir=ltr][_ngcontent-%COMP%]   .max-accordion-height[_ngcontent-%COMP%]{--dummy4: 0;margin-right:-24px}.isRtl[_nghost-%COMP%]   .max-accordion-height[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .max-accordion-height[_ngcontent-%COMP%]{margin-left:-24px}html[dir=rtl][_ngcontent-%COMP%]   .max-accordion-height[_ngcontent-%COMP%]{--dummy4: 0;margin-left:-24px}.isLtr[_nghost-%COMP%]   .max-accordion-height[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .max-accordion-height[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .max-accordion-height[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .max-accordion-height[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .max-accordion-height[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .max-accordion-height[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.isLtr[_nghost-%COMP%]   .indent[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .indent[_ngcontent-%COMP%]{padding-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .indent[_ngcontent-%COMP%]{--dummy1: 0;padding-left:16px}.isRtl[_nghost-%COMP%]   .indent[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .indent[_ngcontent-%COMP%]{padding-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .indent[_ngcontent-%COMP%]{--dummy1: 0;padding-right:16px}']}),ie})();var L=e(44211);const W=[{path:"",component:Z,data:{level:1}},{path:"center-view",component:L.LD,outlet:"centerPane",children:[{path:"preview",component:L.BP}]}];let te=(()=>{class ie{}return ie.\u0275fac=function(k){return new(k||ie)},ie.\u0275mod=g.oAB({type:ie}),ie.\u0275inj=g.cJS({imports:[[n.ez,y.it,T.m,D.o9,m.Q,i.Bz.forChild(W),(0,y.zv)()]]}),ie})()},90795:(He,de,e)=>{"use strict";e.d(de,{s:()=>ft});var n=e(97175),i=e(79441),D=e(22663),m=e(8095),y=e(94377),T=e(98221),r=e(2316),a=e(6484),s=e(22213),p=e(52349),l=e(3786),t=e(41618),w=e(202);const h=[{id:y.ZJ.OpenShare,icon:"nvidia_symbol",iconColor:"icon-preview notifier-icon-large",iconBackground:"icon-green-bg",message:"notification.OpenShare",alternativeMessage:"notification.OpenShareGamepad"},{id:y.ZJ.InstantReplayStarted,icon:"replay",iconColor:"icon-highlighted",message:"notification.InstantReplayStarted"},{id:y.ZJ.InstantReplayStopped,icon:"replay",iconColor:"icon-normal",message:"notification.InstantReplayStopped"},{id:y.ZJ.InstantReplaySaving,icon:"replay",iconColor:"icon-highlighted",message:"notification.InstantReplaySaving"},{id:y.ZJ.InstantReplaySaved,icon:"replay",iconColor:"icon-highlighted",message:"notification.InstantReplaySaved"},{id:y.ZJ.RecordStarted,icon:"record",iconColor:"icon-highlighted",message:"notification.ManualRecordStarted"},{id:y.ZJ.RecordSaving,icon:"record",iconColor:"icon-normal",message:"notification.ManualRecordSaving"},{id:y.ZJ.RecordStopped,icon:"record",iconColor:"icon-normal",message:"notification.ManualRecordStopped"},{id:y.ZJ.ScreenshotSaved,icon:"gallery",iconColor:"icon-normal",message:"notification.ScreenshotSaved"},{id:y.ZJ.PhotographicScreenshotSavedToGallery,icon:"gallery",iconColor:"icon-normal",message:"notification.PhotographicScreenshotSavedToGallery"},{id:y.ZJ.WarningFullscreenGameRequired,icon:"warning",iconColor:"icon-warning",message:"notification.WarningFullscreenGameRequired"},{id:y.ZJ.WarningRecordingStopToCustomize,icon:"warning",iconColor:"icon-warning",message:"notification.WarningStopRecordingToCustomize"},{id:y.ZJ.WarningHighlightsStopToCustomize,icon:"warning",iconColor:"icon-warning",message:"notification.WarningStopHighlightsToCustomize"},{id:y.ZJ.WarningRecordingStopToUseFeature,icon:"warning",iconColor:"icon-warning",message:"notification.WarningStopRecording"},{id:y.ZJ.WarningInstantReplayStopToUseFeature,icon:"warning",iconColor:"icon-warning",message:"notification.WarningStopInstantReplay"},{id:y.ZJ.WarningSupportedGameRequired,icon:"warning",iconColor:"icon-warning",message:"notification.WarningGameRequired"},{id:y.ZJ.WarningNvidiaGpuRequired,icon:"warning",iconColor:"icon-warning",message:"notification.WarningNvidiaGpuRequired"},{id:y.ZJ.HighlightsSaved,icon:"highlights",iconColor:"icon-normal",message:"notification.HighlightsSaved"},{id:y.ZJ.FailedToRemove,icon:"warning",iconColor:"icon-warning",message:"notification.FailedToRemove"},{id:y.ZJ.GalleryIsFull,icon:"warning",iconColor:"icon-warning",message:"notification.GalleryIsFull"},{id:y.ZJ.DiskSpaceIsLow,icon:"warning",iconColor:"icon-warning",message:"notification.DiskSpaceIsLow"},{id:y.ZJ.NoSpaceCaptureNotSaved,icon:"warning",iconColor:"icon-warning",message:"notification.NoSpaceCaptureNotSaved"},{id:y.ZJ.NoSpaceCaptureNotStarted,icon:"warning",iconColor:"icon-warning",message:"notification.NoSpaceCaptureNotStarted"},{id:y.ZJ.ErrorRestartGame,icon:"warning",iconColor:"icon-warning",message:"notification.ErrorRestartGame"},{id:y.ZJ.BroadcastStarted,icon:"broadcast",iconColor:"icon-highlighted",message:"notification.BroadcastStarted"},{id:y.ZJ.BroadcastPaused,icon:"broadcast",iconColor:"icon-normal",message:"notification.BroadcastPaused"},{id:y.ZJ.BroadcastResumed,icon:"broadcast",iconColor:"icon-highlighted",message:"notification.BroadcastResumed"},{id:y.ZJ.BroadcastStopped,icon:"broadcast",iconColor:"icon-normal",message:"notification.BroadcastStopped"},{id:y.ZJ.PhotoModeNotAllowed,icon:"warning",iconColor:"icon-warning",message:"notification.PhotoModeNotAllowed"},{id:y.ZJ.CustomOverlaySlotEmpty,icon:"warning",iconColor:"icon-warning",message:"notification.CustomOverlaySlotEmpty"},{id:y.ZJ.ManualRecordRunning,icon:"warning",iconColor:"icon-warning",message:"notification.ManualRecordRunning"},{id:y.ZJ.BroadcastRunning,icon:"warning",iconColor:"icon-warning",message:"notification.BroadcastRunning"},{id:y.ZJ.ConnectingToGfnBroadcast,icon:"broadcast",iconColor:"icon-highlighted",message:"notification.ConnectingTo"},{id:y.ZJ.ConnectedToGfnBroadcast,icon:"check",iconColor:"icon-highlighted",message:"notification.ConnectedTo"},{id:y.ZJ.FailedToConnectGfnBroadcast,icon:"warning",iconColor:"icon-warning",message:"notification.FailedConnect"},{id:y.ZJ.DisconnectedFromGfnBroadcast,icon:"close",iconColor:"icon-highlighted",message:"notification.DisconnectedFrom"},{id:y.ZJ.NetworkSpottyConnection,icon:"network_signal",iconColor:"icon-warning",message:"notification.network.spottyConnection"},{id:y.ZJ.NetworkBadConnection,icon:"network_signal",iconColor:"icon-error",message:"notification.network.badNetworkMessage"},{id:y.ZJ.OnscreenKeyboardUsage,icon:"remote",iconColor:"icon-normal",message:"notification.OnscreenKeyboardUsage"}];var u=e(58283),o=e(30582),f=e(54364),c=e(52529);function g(st,Et){if(1&st&&r._UZ(0,"img",6),2&st){const Ee=r.oxw();r.Q6J("src",Ee.notifierIconPath,r.LSH)}}function I(st,Et){if(1&st&&r._UZ(0,"mat-icon",7),2&st){const Ee=r.oxw();r.Gre("mat-icon notifier-icon ",Ee.notifierIconColor,""),r.Q6J("svgIcon",Ee.notifierIcon)}}let G=(()=>{class st{constructor(Ee,dt,kt,Zt,dn,gn,jt){this.loggingService=Ee,this.oscDisplayService=dt,this.oscNotificationService=kt,this.el=Zt,this.renderer=dn,this.translateService=gn,this.isOpen=!1,this.doFlip=!1,this.flipToMessage="",this.flipToIcon="",this.flipToIconColor="",this.flipToIconBackground="",this.flipToIconPath="",this.countDown=0,this.notifierMessage="",this.notifierIconPath="",this.notifierIcon="",this.notifierIconColor="",this.notifierIconBackground="",this.countDownStart=5,this.isRTLLayout=!1,this.logger=this.loggingService.getLogger("NvOscNotifierComponent"),this.isRTLLayout=jt.isRTLLayoutEnabled}ngAfterViewInit(){this.renderer.addClass(this.el.nativeElement,"notifier-slider"),this.events=this.oscNotificationService.getOscEvents().subscribe(Ee=>{const kt=(0,l._T)(Ee,["thumb"]);this.logger.info("got message: ",kt),this.oscDisplayService.getIsUIAllowed()&&(Ee.selection===y.ZJ.Empty?this.close():this.setupNotifier(Ee))})}ngOnDestroy(){this.events.unsubscribe()}changeClass(Ee){"tall"===Ee?(this.renderer.removeClass(this.el.nativeElement,"notifier-large"),this.renderer.addClass(this.el.nativeElement,"notifier-tall")):"large"===Ee?(this.renderer.removeClass(this.el.nativeElement,"notifier-tall"),this.renderer.addClass(this.el.nativeElement,"notifier-large")):"small"===Ee&&(this.renderer.removeClass(this.el.nativeElement,"notifier-tall"),this.renderer.removeClass(this.el.nativeElement,"notifier-large"))}getWidthOfText(Ee,dt,kt){return this.renderer.createElement("canvas").getContext("2d").measureText(Ee).width}close(){this.isOpen=!1,this.oscDisplayService.closeOSCForNotification(),this.renderer.removeClass(this.el.nativeElement,"notifier-flip"),this.renderer.removeClass(this.el.nativeElement,this.isRTLLayout?"notifier-open-rtl":"notifier-open"),setTimeout(()=>{this.isOpen||this.oscDisplayService.setNotificationDisplayRectangles([])},5e3)}flip(){this.renderer.addClass(this.el.nativeElement,"notifier-flip")}open(){this.isOpen=!0;const Ee=DOMRect.fromRect({x:1590,y:90,width:330,height:240});this.oscDisplayService.setNotificationDisplayRectangles([Ee]),this.oscDisplayService.openOSCForNotification();const dt=this.getWidthOfText(this.notifierMessage,"Roboto","18px");this.changeClass(dt>525?"tall":dt>270?"large":"small"),this.renderer.addClass(this.el.nativeElement,this.isRTLLayout?"notifier-open-rtl":"notifier-open");const kt=(0,t.F)(1e3).subscribe(()=>{if(this.countDown<0&&this.doFlip){this.countDown=this.countDownStart,this.flip(),this.doFlip=!1;const Zt=(0,t.F)(250).subscribe(()=>{this.notifierIcon=this.flipToIcon,this.notifierIconColor=this.flipToIconColor,this.notifierIconBackground=this.flipToIconBackground,this.notifierIconPath=this.flipToIconPath,this.notifierMessage=this.flipToMessage,Zt.unsubscribe()})}else this.countDown<0?(this.countDown=0,this.close(),kt.unsubscribe()):this.countDown--})}setupNotifier(Ee){const dt=(0,w.find)(h,jt=>jt.id===Ee.selection);let kt=Ee.arg1;(0,w.isString)(kt)&&""!==kt&&(kt=this.translateService.instant(kt,{}));let Zt=Ee.arg2;(0,w.isString)(Zt)&&""!==Zt&&(Zt=this.translateService.instant(Zt,{})),""!==Ee.thumb&&(dt.img=Ee.thumb,dt.icon="");const gn=this.translateService.instant(Ee.useAlternativeMessage?dt.alternativeMessage:dt.message,{arg1:kt,arg2:Zt});Ee.flip?(this.flipToIcon=dt.icon||"",this.flipToIconColor=dt.iconColor||"",this.flipToIconBackground=dt.iconBackground||"",this.flipToIconPath=dt.img||"",this.flipToMessage=gn,this.doFlip=!0):(this.notifierMessage=gn,this.notifierIcon=dt.icon||"",this.notifierIconColor=dt.iconColor||"",this.notifierIconBackground=dt.iconBackground||"",this.notifierIconPath=dt.img||"",this.countDown=this.countDownStart,this.open())}}return st.\u0275fac=function(Ee){return new(Ee||st)(r.Y36(a.ed),r.Y36(y.vU),r.Y36(y.nG),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(u.sK),r.Y36(a.OL))},st.\u0275cmp=r.Xpm({type:st,selectors:[["nv-osc-notifier"]],decls:7,vars:6,consts:[[1,"notifier-black","mat-elevation-z6"],["fxLayout","row","fxLayoutAlign","start center",1,"notifier"],["fxFlex","none","fxLayout","row","fxLayoutAlign","center center"],["class","notifier-icon","fxFlex","none",3,"src",4,"ngIf"],[3,"svgIcon","class",4,"ngIf"],["fxLayout","column",1,"font-body2","notifier-text"],["fxFlex","none",1,"notifier-icon",3,"src"],[3,"svgIcon"]],template:function(Ee,dt){1&Ee&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.YNc(3,g,1,1,"img",3),r.YNc(4,I,1,4,"mat-icon",4),r.qZA(),r.TgZ(5,"div",5),r._uU(6),r.qZA(),r.qZA(),r.qZA()),2&Ee&&(r.xp6(2),r.Gre("notifier-icon-container ",dt.notifierIconBackground,""),r.xp6(1),r.Q6J("ngIf",dt.notifierIconPath),r.xp6(1),r.Q6J("ngIf",dt.notifierIcon),r.xp6(2),r.Oqu(dt.notifierMessage))},directives:[o.xw,o.Wh,o.yH,f.O5,c.Hw],styles:['@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.notifier-slider[_nghost-%COMP%]{perspective:800px}.notifier-black[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;overflow:hidden;width:300px;height:90px;top:105px;z-index:1000;background-color:#000000d9}.isLtr[_nghost-%COMP%]   .notifier-black[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .notifier-black[_ngcontent-%COMP%]{right:-330px;transition:right .25s cubic-bezier(.4,0,1,1) .25s,border-left-width .25s cubic-bezier(.4,0,1,1) 0s;border-left:300px solid #76b900}.isRtl[_nghost-%COMP%]   .notifier-black[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .notifier-black[_ngcontent-%COMP%]{left:-330px;transition:left .25s cubic-bezier(.4,0,1,1) .25s,border-right-width .25s cubic-bezier(.4,0,1,1) 0s;border-right:300px solid #76b900}.notifier-large[_nghost-%COMP%] > .notifier-black[_ngcontent-%COMP%]{width:330px!important;height:124px!important;top:90px!important}.notifier-tall[_nghost-%COMP%] > .notifier-black[_ngcontent-%COMP%]{width:330px!important;height:150px!important;top:90px!important}.notifier[_ngcontent-%COMP%]{width:100%;height:100%;opacity:0;transition-property:opacity 0s linear 0s}.notifier-icon-container[_ngcontent-%COMP%]{margin:10px 16px;height:70px;width:70px}.notifier-icon[_ngcontent-%COMP%]{box-sizing:border-box;width:48px;height:48px;font-size:48px}.notifier-icon-large[_ngcontent-%COMP%]{width:60px;height:60px}.notifier-text[_ngcontent-%COMP%]{width:calc(100% - 70px - 32px)}.isLtr[_nghost-%COMP%]   .notifier-text[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .notifier-text[_ngcontent-%COMP%]{padding-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .notifier-text[_ngcontent-%COMP%]{--dummy2: 0;padding-right:16px}.isRtl[_nghost-%COMP%]   .notifier-text[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .notifier-text[_ngcontent-%COMP%]{padding-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .notifier-text[_ngcontent-%COMP%]{--dummy2: 0;padding-left:16px}.notifier-open[_nghost-%COMP%] > .notifier-black[_ngcontent-%COMP%]{transition:right .25s cubic-bezier(0,0,.2,1) 0s,border-left-width .25s cubic-bezier(0,0,.2,1) .25s;right:0;border-left-width:5px}.notifier-open[_nghost-%COMP%] > .notifier-black[_ngcontent-%COMP%] > .notifier[_ngcontent-%COMP%]{transition:opacity .5s linear .5s;opacity:1}.notifier-open-rtl[_nghost-%COMP%] > .notifier-black[_ngcontent-%COMP%]{transition:left .25s cubic-bezier(0,0,.2,1) 0s,border-right-width .25s cubic-bezier(0,0,.2,1) .25s;left:0;border-right-width:5px}.notifier-open-rtl[_nghost-%COMP%] > .notifier-black[_ngcontent-%COMP%] > .notifier[_ngcontent-%COMP%]{transition:opacity .5s linear .5s;opacity:1}.notifier-flip[_nghost-%COMP%] > .notifier-green[_ngcontent-%COMP%], .notifier-flip[_nghost-%COMP%] > .notifier-black[_ngcontent-%COMP%]{transition:transform 1s;transform-style:preserve-3d;transform:rotateX(180deg)}.notifier-flip[_nghost-%COMP%] > .notifier-black[_ngcontent-%COMP%] > .notifier[_ngcontent-%COMP%]{transition:transform 1s;transform-style:preserve-3d;transform:rotateX(-180deg)}']}),st})();const x=["statusIndicator"];function E(st,Et){if(1&st&&(r.TgZ(0,"div",4),r._UZ(1,"mat-icon",5),r.qZA()),2&st){const Ee=r.oxw(2);r.xp6(1),r.Q6J("svgIcon",Ee.icon)}}function P(st,Et){if(1&st&&(r.TgZ(0,"div",2),r.YNc(1,E,2,1,"div",3),r.qZA()),2&st){const Ee=r.oxw();r.xp6(1),r.Q6J("ngIf",Ee.icon)}}let v=(()=>{class st{constructor(Ee,dt,kt){this.sdkService=Ee,this.shadowplayService=dt,this.changed=new r.vpe,this.showHighlights=!1,this.showMic=!1,this.showRecording=!1,this.showAny=!1,this.icon="",this.destroy$=new i.xQ,this.IRState=!1,this.MRState=!1,this.HLBadState=!1,this.viewInit=!1,this.logger=kt.getLogger("SPStatus")}set mode(Ee){const dt=y.Kw[Ee];this._mode=void 0!==dt?dt:y.Kw.Recording,this.setup()}get mode(){return this._mode}ngAfterViewInit(){this.viewInit=!0,setTimeout(()=>this.setup(),0)}setup(){this.mode===y.Kw.Highlights?(this.icon="highlights",this.SetHighlightIcon()):this.mode===y.Kw.Recording?this.icon="record":this.mode===y.Kw.IR?this.icon="replay":this.mode===y.Kw.Mic&&(this.icon="mic"),this.viewInit&&(this.destroy$.next(),this.destroy$.complete(),this.destroy$=new i.xQ,this.sdkService.isHighlightsActive().pipe((0,D.R)(this.destroy$)).subscribe(Ee=>{this.updateHighlights(Ee)}),this.shadowplayService.getMICState().pipe((0,D.R)(this.destroy$)).subscribe(Ee=>{this.updateMic(Ee)}),this.shadowplayService.getMRState().pipe((0,D.R)(this.destroy$)).subscribe(Ee=>{this.updateRecording(Ee,!0)}),this.shadowplayService.getIRState().pipe((0,D.R)(this.destroy$)).subscribe(Ee=>{this.updateRecording(Ee===y.YQ.recording,!1)}),this.shadowplayService.getHLBadState().pipe((0,D.R)(this.destroy$)).subscribe(Ee=>{this.updateHLBadState(Ee)}))}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}SetHighlightIcon(){this.mode===y.Kw.Highlights&&this.showHighlights&&(this.icon=this.HLBadState?"highlights_disabled":"highlights")}updateHighlights(Ee){this.showHighlights=!(!Ee&&!1!==Ee)&&Ee,this.SetHighlightIcon(),this.updateShowAny()}updateHLBadState(Ee){this.HLBadState=!(!Ee&&!1!==Ee)&&Ee,this.SetHighlightIcon(),this.updateShowAny()}updateMic(Ee){const dt=Ee!==y.rQ.off;this.showMic=!(!dt&&!1!==dt)&&dt,this.updateShowAny()}updateRecording(Ee,dt){let kt=!1;(Ee||!1===Ee)&&(kt=Ee),dt?this.MRState=kt:this.IRState=kt,this.showRecording=this.MRState||this.IRState,this.updateShowAny()}updateShowAny(){const Ee=this.mode===y.Kw.Highlights&&this.showHighlights||this.mode===y.Kw.Recording&&this.MRState||this.mode===y.Kw.IR&&this.IRState||this.mode===y.Kw.Mic&&this.showMic&&(this.showRecording||this.showHighlights);Ee!==this.showAny&&(this.showAny=Ee,this.changed.emit())}getDimensions(){return this.statusIndicator?this.statusIndicator.nativeElement.getBoundingClientRect():null}}return st.\u0275fac=function(Ee){return new(Ee||st)(r.Y36(y.b5),r.Y36(y.dS),r.Y36(a.ed))},st.\u0275cmp=r.Xpm({type:st,selectors:[["nv-shadowplay-status"]],viewQuery:function(Ee,dt){if(1&Ee&&r.Gf(x,7),2&Ee){let kt;r.iGM(kt=r.CRH())&&(dt.statusIndicator=kt.first)}},inputs:{mode:"mode"},outputs:{changed:"changed"},decls:3,vars:1,consts:[["statusIndicator",""],["fxLayout","row",4,"ngIf"],["fxLayout","row"],["class","osd-general osd-status-image","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"osd-general","osd-status-image"],[3,"svgIcon"]],template:function(Ee,dt){1&Ee&&(r.TgZ(0,"div",null,0),r.YNc(2,P,2,1,"div",1),r.qZA()),2&Ee&&(r.xp6(2),r.Q6J("ngIf",dt.showAny))},directives:[f.O5,o.xw,o.Wh,c.Hw],styles:[".osd-general[_ngcontent-%COMP%]{opacity:.9}.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-top:5px;transform-origin:top left}.isLtr.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=ltr]   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-left:5px}.isRtl.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=rtl]   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-right:5px}.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-top:5px;transform-origin:top right}.isLtr.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=ltr]   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-right:5px}.isRtl.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=rtl]   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-left:5px}.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-bottom:5px;transform-origin:bottom left}.isLtr.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=ltr]   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-left:5px}.isRtl.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=rtl]   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-right:5px}.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-bottom:5px;transform-origin:bottom right}.isLtr.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=ltr]   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-right:5px}.isRtl.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=rtl]   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-left:5px}.osd-topright[_nghost-%COMP%], .osd-topright   [_nghost-%COMP%], .osd-bottomright[_nghost-%COMP%], .osd-bottomright   [_nghost-%COMP%], .osd-topright[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-bottomright[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-direction:column-reverse}.osd-status-image[_ngcontent-%COMP%]{width:24px;height:24px;background-color:#000c}.osd-status-image[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;line-height:18px;font-size:18px;height:18px;width:18px}.osd-topright   [_nghost-%COMP%] > div[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%] > div[_ngcontent-%COMP%]{flex-direction:row-reverse}"]}),st})();const O=["microphoneStatusIndicator"];function C(st,Et){1&st&&(r.TgZ(0,"div",2),r.TgZ(1,"div",3),r._UZ(2,"mat-icon",4),r.qZA(),r.qZA())}let _=(()=>{class st{constructor(Ee,dt){this.microphoneService=Ee,this.showAny=!0,this.viewInit=!1,this.changed=new r.vpe,this.logger=dt.getLogger("MicStatusComponent"),this.setup()}setup(){!this.viewInit||(this.micStateSub=this.microphoneService.currentMicState$.subscribe(Ee=>{switch(this.currentMicButtonState=Ee,this.currentMicButtonState){case p.tn.Unmuted:this.showAny=!0,this.changed.emit();break;default:this.showAny=!1,this.changed.emit()}}))}ngAfterViewInit(){this.viewInit=!0,setTimeout(()=>this.setup(),0)}ngOnDestroy(){var Ee;null===(Ee=this.micStateSub)||void 0===Ee||Ee.unsubscribe()}getDimensions(){return this.microphoneStatusIndicator?this.microphoneStatusIndicator.nativeElement.getBoundingClientRect():null}}return st.\u0275fac=function(Ee){return new(Ee||st)(r.Y36(p.pJ),r.Y36(a.ed))},st.\u0275cmp=r.Xpm({type:st,selectors:[["nv-microphone-status"]],viewQuery:function(Ee,dt){if(1&Ee&&r.Gf(O,7),2&Ee){let kt;r.iGM(kt=r.CRH())&&(dt.microphoneStatusIndicator=kt.first)}},outputs:{changed:"changed"},decls:3,vars:1,consts:[["microphoneStatusIndicator",""],["fxLayout","row",4,"ngIf"],["fxLayout","row"],["fxLayout","row","fxLayoutAlign","center center",1,"osd-general","osd-status-image"],["svgIcon","mic"]],template:function(Ee,dt){1&Ee&&(r.TgZ(0,"div",null,0),r.YNc(2,C,3,0,"div",1),r.qZA()),2&Ee&&(r.xp6(2),r.Q6J("ngIf",dt.showAny))},directives:[f.O5,o.xw,o.Wh,c.Hw],styles:[".osd-general[_ngcontent-%COMP%]{opacity:.9}.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-top:5px;transform-origin:top left}.isLtr.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=ltr]   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-left:5px}.isRtl.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=rtl]   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-right:5px}.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-top:5px;transform-origin:top right}.isLtr.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=ltr]   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-right:5px}.isRtl.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=rtl]   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-left:5px}.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-bottom:5px;transform-origin:bottom left}.isLtr.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=ltr]   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-left:5px}.isRtl.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=rtl]   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-right:5px}.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-bottom:5px;transform-origin:bottom right}.isLtr.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=ltr]   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-right:5px}.isRtl.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=rtl]   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-left:5px}.osd-topright[_nghost-%COMP%], .osd-topright   [_nghost-%COMP%], .osd-bottomright[_nghost-%COMP%], .osd-bottomright   [_nghost-%COMP%], .osd-topright[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-bottomright[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-direction:column-reverse}.osd-status-image[_ngcontent-%COMP%]{width:24px;height:24px;background-color:#000c}.osd-status-image[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;line-height:18px;font-size:18px;height:18px;width:18px}"]}),st})();var F=e(81134),V=e(43365),b=e(33927),B=e(18293),U=e(12556),A=e(71570),S=e(34663);const Y=["statsOverlay"];function se(st,Et){if(1&st&&(r.TgZ(0,"div",13),r._UZ(1,"mat-icon",14),r.TgZ(2,"span",15),r._uU(3),r.qZA(),r.qZA()),2&st){const Ee=r.oxw(2);r.xp6(3),r.Oqu(Ee.userVisibleGpuName)}}function fe(st,Et){if(1&st&&(r.TgZ(0,"div",7),r.TgZ(1,"span",8),r._uU(2),r.qZA(),r.TgZ(3,"div",9),r.TgZ(4,"span",10),r._uU(5),r.ALo(6,"uppercase"),r.ALo(7,"translate"),r.qZA(),r.TgZ(8,"span",10),r._uU(9),r.ALo(10,"uppercase"),r.ALo(11,"translate"),r.qZA(),r.qZA(),r.qZA()),2&st){const Ee=r.oxw(2);r.xp6(1),r.Gre("font-header4 compact-text-spacing2 ",Ee.colors.gameEngineFps,""),r.xp6(1),r.Oqu(Ee.gameEngineFpsString),r.xp6(3),r.Oqu(r.lcZ(6,6,r.lcZ(7,8,"statistics.FPS"))),r.xp6(4),r.Oqu(r.lcZ(10,10,r.lcZ(11,12,"statistics.GameEngine")))}}function $(st,Et){if(1&st&&(r.TgZ(0,"div",3),r._UZ(1,"div",16),r.TgZ(2,"div",17),r.TgZ(3,"span",10),r._uU(4),r.qZA(),r.qZA(),r.qZA()),2&st){const Ee=r.oxw(2);r.xp6(4),r.Oqu(Ee.networkData.serverLoc)}}function ae(st,Et){if(1&st&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&st){const Ee=r.oxw(3);r.Gre("standard-post ",Ee.colors.vpnIndicator,""),r.xp6(1),r.Oqu(Ee.vpnString)}}function me(st,Et){if(1&st&&(r.TgZ(0,"div",3),r.TgZ(1,"span",18),r._uU(2),r.ALo(3,"translate"),r.qZA(),r.TgZ(4,"span",19),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.TgZ(7,"div",20),r.TgZ(8,"span",21),r._uU(9),r.ALo(10,"translate"),r.qZA(),r.TgZ(11,"div",22),r.TgZ(12,"span"),r._uU(13),r.qZA(),r.TgZ(14,"span"),r._uU(15),r.ALo(16,"translate"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(17,"div",23),r.TgZ(18,"span",21),r._uU(19),r.ALo(20,"translate"),r.qZA(),r.TgZ(21,"div",22),r.TgZ(22,"span"),r._uU(23),r.qZA(),r.TgZ(24,"span"),r._uU(25),r.ALo(26,"translate"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(27,"span",19),r._uU(28),r.ALo(29,"translate"),r.qZA(),r.TgZ(30,"div",20),r.TgZ(31,"span",21),r._uU(32),r.ALo(33,"translate"),r.qZA(),r.TgZ(34,"div",22),r.TgZ(35,"span"),r._uU(36),r.qZA(),r.TgZ(37,"span"),r._uU(38),r.ALo(39,"translate"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(40,"div",23),r.TgZ(41,"span",21),r._uU(42),r.ALo(43,"translate"),r.qZA(),r.TgZ(44,"div",22),r.TgZ(45,"span",24),r._uU(46),r.qZA(),r.TgZ(47,"span",25),r._uU(48),r.ALo(49,"translate"),r.qZA(),r.TgZ(50,"span",25),r._uU(51),r.qZA(),r.qZA(),r.qZA(),r.TgZ(52,"span",19),r._uU(53),r.ALo(54,"translate"),r.qZA(),r.TgZ(55,"div",20),r.TgZ(56,"span",21),r._uU(57),r.ALo(58,"translate"),r.qZA(),r.TgZ(59,"div",22),r.TgZ(60,"span"),r._uU(61),r.qZA(),r.YNc(62,ae,2,4,"span",26),r.qZA(),r.qZA(),r.TgZ(63,"div",27),r.TgZ(64,"span",21),r._uU(65),r.ALo(66,"translate"),r.qZA(),r.TgZ(67,"span",28),r._uU(68),r.qZA(),r.qZA(),r._UZ(69,"nv-divider"),r.TgZ(70,"span",29),r._uU(71),r.ALo(72,"translate"),r.qZA(),r.TgZ(73,"div",20),r.TgZ(74,"span",21),r._uU(75),r.ALo(76,"translate"),r.qZA(),r.TgZ(77,"div",22),r.TgZ(78,"span"),r._uU(79),r.qZA(),r.TgZ(80,"span",30),r._uU(81,"@"),r.qZA(),r.TgZ(82,"span"),r._uU(83),r.qZA(),r.qZA(),r.qZA(),r.TgZ(84,"div",31),r.TgZ(85,"span",21),r._uU(86),r.ALo(87,"translate"),r.qZA(),r.TgZ(88,"span",28),r._uU(89),r.qZA(),r.qZA(),r.qZA()),2&st){const Ee=r.oxw(2);r.xp6(2),r.Oqu(r.lcZ(3,57,"statistics.Header1")),r.xp6(3),r.Oqu(r.lcZ(6,59,"statistics.Subheader1")),r.xp6(4),r.Oqu(r.lcZ(10,61,"statistics.FrameLoss")),r.xp6(3),r.Gre("standard-base ",Ee.colors.frameLoss,""),r.xp6(1),r.Oqu(Ee.networkData.frameLoss),r.xp6(1),r.Gre("standard-post ",Ee.colors.frameLossTotal,""),r.xp6(1),r.AsE("(",Ee.networkData.totalFrameLoss," ",r.lcZ(16,63,"statistics.Total"),")"),r.xp6(4),r.Oqu(r.lcZ(20,65,"statistics.PacketLoss")),r.xp6(3),r.Gre("standard-base ",Ee.colors.packetLoss2,""),r.xp6(1),r.Oqu(Ee.networkData.packetLoss),r.xp6(1),r.Gre("standard-post ",Ee.colors.packetLossTotal,""),r.xp6(1),r.AsE("(",Ee.networkData.totalPacketLoss," ",r.lcZ(26,67,"statistics.Total"),")"),r.xp6(3),r.Oqu(r.lcZ(29,69,"statistics.Subheader2")),r.xp6(4),r.Oqu(r.lcZ(33,71,"statistics.TotalAvailable")),r.xp6(3),r.Gre("standard-base ",Ee.colors.totalAvailableBandwidth,""),r.xp6(1),r.Oqu(Ee.networkData.totalAvailableBandwidth),r.xp6(1),r.Gre("standard-post ",Ee.colors.totalAvailableBandwidth,""),r.xp6(1),r.Oqu(r.lcZ(39,73,"statistics.Mbps")),r.xp6(4),r.Oqu(r.lcZ(43,75,"statistics.BandwidthUsed")),r.xp6(4),r.Oqu(Ee.networkData.bandwidthUsed),r.xp6(2),r.Oqu(r.lcZ(49,77,"statistics.Mbps")),r.xp6(3),r.hij("(",Ee.networkData.bandwidthPrecentage,"%)"),r.xp6(2),r.Oqu(r.lcZ(54,79,"statistics.Subheader3")),r.xp6(4),r.Oqu(r.lcZ(58,81,"statistics.ConnectionType")),r.xp6(3),r.Gre("standard-base ",Ee.colors.connectionType,""),r.xp6(1),r.Oqu(Ee.networkData.connectionType),r.xp6(1),r.Q6J("ngIf",Ee.vpnPresent),r.xp6(3),r.Oqu(r.lcZ(66,83,"statistics.NetworkName")),r.xp6(3),r.Oqu(Ee.ssid),r.xp6(3),r.Oqu(r.lcZ(72,85,"statistics.Header2")),r.xp6(4),r.Oqu(r.lcZ(76,87,"statistics.Resolution")),r.xp6(3),r.Gre("standard-base ",Ee.colors.resolution,""),r.xp6(1),r.Oqu(Ee.networkData.resolution),r.xp6(3),r.Gre("standard-base ",Ee.colors.streamingFps2,""),r.xp6(1),r.Oqu(Ee.networkData.streamingFps),r.xp6(3),r.Oqu(r.lcZ(87,89,"statistics.ServerLocation")),r.xp6(3),r.Oqu(Ee.networkData.serverLoc)}}function ye(st,Et){if(1&st&&(r.TgZ(0,"div",2),r.TgZ(1,"div",3),r.YNc(2,se,4,1,"div",4),r.TgZ(3,"div",5),r.YNc(4,fe,12,14,"div",6),r.TgZ(5,"div",7),r.TgZ(6,"span",8),r._uU(7),r.qZA(),r.TgZ(8,"div",9),r.TgZ(9,"span",10),r._uU(10),r.ALo(11,"uppercase"),r.ALo(12,"translate"),r.qZA(),r.TgZ(13,"span",10),r._uU(14),r.ALo(15,"uppercase"),r.ALo(16,"translate"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(17,"div",11),r.TgZ(18,"span",8),r._uU(19),r.qZA(),r.TgZ(20,"div",9),r.TgZ(21,"span",10),r._uU(22),r.ALo(23,"translate"),r.qZA(),r.TgZ(24,"span",10),r._uU(25),r.ALo(26,"uppercase"),r.ALo(27,"translate"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(28,$,5,1,"div",12),r.YNc(29,me,90,91,"div",12),r.qZA(),r.qZA()),2&st){const Ee=r.oxw();r.xp6(2),r.Q6J("ngIf",!Ee.hideGpuName),r.xp6(2),r.Q6J("ngIf",Ee.isso12Enabled),r.xp6(2),r.Gre("font-header4 compact-text-spacing2 ",Ee.colors.streamingFps1,""),r.xp6(1),r.Oqu(Ee.networkData.streamingFps),r.xp6(3),r.Oqu(r.lcZ(11,16,r.lcZ(12,18,"statistics.FPS"))),r.xp6(4),r.Oqu(r.lcZ(15,20,r.lcZ(16,22,"statistics.Stream"))),r.xp6(4),r.Gre("font-header4 compact-text-spacing2 ",Ee.colors.roundTripDelay,""),r.xp6(1),r.Oqu(Ee.networkData.roundTripDelay),r.xp6(3),r.Oqu(r.lcZ(23,24,"statistics.Millisec")),r.xp6(3),r.Oqu(r.lcZ(26,26,r.lcZ(27,28,"statistics.Ping"))),r.xp6(3),r.Q6J("ngIf",Ee.useSize===Ee.compact),r.xp6(1),r.Q6J("ngIf",Ee.useSize===Ee.standard)}}let ue=(()=>{class st{constructor(Ee,dt,kt,Zt,dn,gn,jt,En,Pn,Ln,ht,Vt){this.injector=Ee,this.igoConfig=dt,this.loggingService=kt,this.statisticsService=Zt,this.gfnInfoService=dn,this.oscDisplayService=gn,this.osdService=jt,this.translateService=En,this.telemetryService=Pn,this.experienceControlService=Ln,this.domSanitizer=ht,this.matIconRegistry=Vt,this.destroy$=new i.xQ,this.statsState=y.Tj.Off,this.colors=void 0,this.useSize=y._C.standard,this.compact=y._C.compact,this.standard=y._C.standard,this.vpnText="",this.vpnString="",this.vpnPresent=!1,this.naText="",this.ssid="",this.statsStarted=0,this.gpuFriendlyName="",this.userVisibleGpuName="",this.hideGpuName=!0,this.isso12Enabled=!1,this.gameEngineFpsString="",this.appConfig=null,this.uiOpen=!1,this.changed=new r.vpe,this.logger=this.loggingService.getLogger("StatisticsOverlayComponent"),this.matIconRegistry.addSvgIcon("gpuBranding",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/img/geforce_mark.svg"))}ngOnInit(){this.logger.info("init"),this.vpnText="("+this.translateService.instant("statistics.Vpn")+")",this.naText=this.translateService.instant("statistics.NotAvailable")}ngAfterViewInit(){this.events=this.statisticsService.getStatisticsEvents().subscribe(Ee=>{if(this.logger.info("Got message: ",Ee),Ee.state===y.Tj.Standard&&this.statsState!==y.Tj.Standard)this.useSize=y._C.standard,this.handleUIEvent(Ee.state);else{if(Ee.state===y.Tj.Off&&this.statsState!==y.Tj.Off)return this.uiOpen&&(this.oscDisplayService.closeOSCForNotification(),this.uiOpen=!1),this.statsState=Ee.state,this.changed.emit(),void this.overlayClosed();if(Ee.state===y.Tj.Compact&&this.statsState!==y.Tj.Compact)this.useSize=y._C.compact,this.handleUIEvent(Ee.state);else if(Ee.state===y.Tj.Off&&this.statsState===y.Tj.Off)return}this.osdService.setStatsSize(this.useSize),this.isso12Enabled=0!==Ee.data.gameEngineFps,this.gameEngineFpsString=Ee.data.gameEngineFps>999?"---":Ee.data.gameEngineFps.toString(),this.networkData=Ee.data,this.colors=Ee.colors,this.vpnString=Ee.data.isVpnOn?this.vpnText:"",this.vpnPresent=Ee.data.isVpnOn,this.ssid="Ethernet"===Ee.data.connectionType?this.naText:Ee.data.networkName}),this.appConfig||"GFN"!==this.igoConfig.branding||(this.appConfig=this.injector.get(U.VKt),this.appConfig)?this.gfnInfoService.getGpuName().pipe((0,D.R)(this.destroy$)).subscribe(Ee=>{this.gpuFriendlyName=Ee,""===Ee?(this.hideGpuName=!0,this.userVisibleGpuName=""):this.getGpuMappings()}):this.logger.info("ERROR:: Failed to obtain appConfig")}ngOnDestroy(){this.statsState!==y.Tj.Off&&(this.statsState=y.Tj.Off,this.overlayClosed()),this.events&&(this.events.unsubscribe(),this.events=void 0),this.getCloudVarSub&&(this.getCloudVarSub.unsubscribe(),this.getCloudVarSub=void 0),this.destroy$.next(!0),this.destroy$.unsubscribe()}handleUIEvent(Ee){this.uiOpen||(this.oscDisplayService.openOSCForNotification(),this.uiOpen=!0),this.statsStarted=Date.now(),this.statsState=Ee,this.openedPosition=this.getPosition(),this.changed.emit()}overlayClosed(){const Ee=Date.now()-this.statsStarted;this.telemetryService.sendStatsClosedTelemetry(Ee,this.openedPosition,this.useSize)}getPosition(){return this.osdService.getPosition(y.Kw.Statistics)}getDimensions(){return this.statsOverlay?this.statsOverlay.nativeElement.getBoundingClientRect():null}getGpuMappings(){this.getCloudVarSub=this.experienceControlService.getCloudVariable(this.appConfig.gxTarget.experiences.enableGpuNameMapping,{},{useCache:!0,useNetworkTimeoutForCacheFallback:!0},V.Z4.GxTargetGetCloudVariable,V.Qu.Other).pipe((0,b.U)(Ee=>{Ee.value.enableGpuNameMapping&&this.findVisibleGpuName(Ee.value.gpuNameMap)}),(0,B.K)(Ee=>(this.logger.info("GxTargetGetFeatureEnabled fetch error",Ee),this.hideGpuName=!0,(0,F.of)(!0)))).subscribe()}findVisibleGpuName(Ee){const dt=Ee.findIndex(kt=>kt.gpuName===this.gpuFriendlyName);dt>=0&&(this.hideGpuName=!1,this.userVisibleGpuName=Ee[dt].mappedGpuName)}}return st.\u0275fac=function(Ee){return new(Ee||st)(r.Y36(r.zs3),r.Y36(y.gs),r.Y36(a.ed),r.Y36(y._6),r.Y36(y.In),r.Y36(y.vU),r.Y36(y.Ec),r.Y36(u.sK),r.Y36(y.l),r.Y36(V.Q6),r.Y36(A.H7),r.Y36(c.jv))},st.\u0275cmp=r.Xpm({type:st,selectors:[["nv-statistics-overlay"]],viewQuery:function(Ee,dt){if(1&Ee&&r.Gf(Y,7),2&Ee){let kt;r.iGM(kt=r.CRH())&&(dt.statsOverlay=kt.first)}},outputs:{changed:"changed"},decls:3,vars:1,consts:[["statsOverlay",""],["class","stat-window osd-general font-body2",4,"ngIf"],[1,"stat-window","osd-general","font-body2"],["fxLayout","column"],["class","gpu-window","fxLayout","row",4,"ngIf"],["fxLayout","row"],["class","compact-box box-space","fxLayout","column",4,"ngIf"],["fxLayout","column",1,"compact-box","box-space"],["fxFlexAlign","center"],["fxLayout","column",1,"compact-text-spacing1"],[1,"compact-text"],["fxLayout","column",1,"compact-box"],["fxLayout","column",4,"ngIf"],["fxLayout","row",1,"gpu-window"],["svgIcon","gpuBranding",1,"gpu-icon"],[1,"font-header6","gpu-style"],[1,"nv-gap-8"],["fxFlex","","fxLayoutAlign","center center",1,"server-box"],[1,"font-header6","header-text","header-first"],[1,"font-sub2","subheader-text1","normal-color"],["fxLayout","row",1,"font-body2","standard-holder9"],["fxFlex","",1,"standard-label"],["fxLayoutAlign","end start",1,"standard-data"],["fxLayout","row",1,"font-body2","standard-holder12"],[1,"standard-base"],[1,"standard-post"],[3,"class",4,"ngIf"],["fxLayout","row",1,"font-body2","standard-holder"],[1,"standard-base","standard-data"],[1,"font-header6","header-text"],[1,"standard-base","separator"],["fxLayout","row",1,"font-body2","standard-holder","extra-bottom"]],template:function(Ee,dt){1&Ee&&(r.TgZ(0,"div",null,0),r.YNc(2,ye,30,30,"div",1),r.qZA()),2&Ee&&(r.xp6(2),r.Q6J("ngIf",0!==dt.statsState))},directives:[f.O5,o.xw,o.XD,c.Hw,o.yH,o.Wh,S.n],pipes:[f.gd,u.X$],styles:['@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.osd-general[_ngcontent-%COMP%]{opacity:.9}.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-top:5px;transform-origin:top left}.isLtr.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=ltr]   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-left:5px}.isRtl.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=rtl]   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-right:5px}.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-top:5px;transform-origin:top right}.isLtr.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=ltr]   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-right:5px}.isRtl.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=rtl]   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-left:5px}.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-bottom:5px;transform-origin:bottom left}.isLtr.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=ltr]   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-left:5px}.isRtl.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=rtl]   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-right:5px}.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-bottom:5px;transform-origin:bottom right}.isLtr.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=ltr]   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-right:5px}.isRtl.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=rtl]   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-left:5px}.osd-topright[_nghost-%COMP%], .osd-topright   [_nghost-%COMP%], .osd-bottomright[_nghost-%COMP%], .osd-bottomright   [_nghost-%COMP%], .osd-topright[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-bottomright[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-direction:column-reverse}.stat-window[_ngcontent-%COMP%]{background-color:#000;transform:scale(.8)}.isLtr[_nghost-%COMP%]   .stat-window[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .stat-window[_ngcontent-%COMP%]{padding:16px}html[dir=ltr][_ngcontent-%COMP%]   .stat-window[_ngcontent-%COMP%]{--dummy: 0;padding:16px}.isRtl[_nghost-%COMP%]   .stat-window[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .stat-window[_ngcontent-%COMP%]{padding:16px}html[dir=rtl][_ngcontent-%COMP%]   .stat-window[_ngcontent-%COMP%]{--dummy: 0;padding:16px}.gpu-window[_ngcontent-%COMP%]{margin-bottom:14px}.gpu-style[_ngcontent-%COMP%]{color:#fff}.isLtr[_nghost-%COMP%]   .gpu-style[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .gpu-style[_ngcontent-%COMP%]{padding:1px 0 0 4px}html[dir=ltr][_ngcontent-%COMP%]   .gpu-style[_ngcontent-%COMP%]{--dummy: 0;padding:1px 0 0 4px}.isRtl[_nghost-%COMP%]   .gpu-style[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .gpu-style[_ngcontent-%COMP%]{padding:1px 4px 0 0}html[dir=rtl][_ngcontent-%COMP%]   .gpu-style[_ngcontent-%COMP%]{--dummy: 0;padding:1px 4px 0 0}.gpu-icon[_ngcontent-%COMP%]{height:28px!important}.isLtr[_nghost-%COMP%]   .box-space[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .box-space[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .box-space[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .box-space[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .box-space[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .box-space[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.compact-box[_ngcontent-%COMP%]{width:106px;background-color:#393939}.server-box[_ngcontent-%COMP%]{width:100%;height:24px;background-color:#393939}.compact-text[_ngcontent-%COMP%]{line-height:20px;font-size:12px;font-weight:700;color:#ffffffb3;text-align:center;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.isLtr[_nghost-%COMP%]   .compact-text[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .compact-text[_ngcontent-%COMP%]{padding:0 8px}html[dir=ltr][_ngcontent-%COMP%]   .compact-text[_ngcontent-%COMP%]{--dummy: 0;padding:0 8px}.isRtl[_nghost-%COMP%]   .compact-text[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .compact-text[_ngcontent-%COMP%]{padding:0 8px}html[dir=rtl][_ngcontent-%COMP%]   .compact-text[_ngcontent-%COMP%]{--dummy: 0;padding:0 8px}.compact-text-spacing1[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px}.compact-text-spacing2[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:2px}.compact-text-empty[_ngcontent-%COMP%]{margin-bottom:20px}.header-first[_ngcontent-%COMP%]{margin-top:24px}.header-text[_ngcontent-%COMP%]{margin-bottom:12px}.subheader-text1[_ngcontent-%COMP%]{margin-bottom:12px}.standard-holder[_ngcontent-%COMP%]{line-height:24px!important}.standard-holder9[_ngcontent-%COMP%]{line-height:24px!important;margin-bottom:9px}.standard-holder12[_ngcontent-%COMP%]{line-height:24px!important;margin-bottom:12px}.standard-label[_ngcontent-%COMP%]{width:150px}.isLtr[_nghost-%COMP%]   .standard-label[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .standard-label[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .standard-label[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .standard-label[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .standard-label[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .standard-label[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.standard-data[_ngcontent-%COMP%]{width:150px}.isLtr[_nghost-%COMP%]   .standard-data[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .standard-data[_ngcontent-%COMP%]{margin-left:26px}html[dir=ltr][_ngcontent-%COMP%]   .standard-data[_ngcontent-%COMP%]{--dummy3: 0;margin-left:26px}.isRtl[_nghost-%COMP%]   .standard-data[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .standard-data[_ngcontent-%COMP%]{margin-right:26px}html[dir=rtl][_ngcontent-%COMP%]   .standard-data[_ngcontent-%COMP%]{--dummy3: 0;margin-right:26px}.standard-base[_ngcontent-%COMP%], .standard-post[_ngcontent-%COMP%]{font-weight:500}.isLtr[_nghost-%COMP%]   .standard-base[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .standard-base[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%]{text-align:right}html[dir=ltr][_ngcontent-%COMP%]   .standard-base[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .standard-post[_ngcontent-%COMP%]{--dummy0: 0;text-align:right}.isRtl[_nghost-%COMP%]   .standard-base[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .standard-base[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%]{text-align:left}html[dir=rtl][_ngcontent-%COMP%]   .standard-base[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .standard-post[_ngcontent-%COMP%]{--dummy0: 0;text-align:left}.isLtr[_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%]{padding-left:3px}html[dir=ltr][_ngcontent-%COMP%]   .standard-post[_ngcontent-%COMP%]{--dummy1: 0;padding-left:3px}.isRtl[_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%]{padding-right:3px}html[dir=rtl][_ngcontent-%COMP%]   .standard-post[_ngcontent-%COMP%]{--dummy1: 0;padding-right:3px}.extra-bottom[_ngcontent-%COMP%]{margin-bottom:8px}.separator[_ngcontent-%COMP%]{font-weight:500}.isLtr[_nghost-%COMP%]   .separator[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .separator[_ngcontent-%COMP%]{padding-left:3px}html[dir=ltr][_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{--dummy1: 0;padding-left:3px}.isRtl[_nghost-%COMP%]   .separator[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .separator[_ngcontent-%COMP%]{padding-right:3px}html[dir=rtl][_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{--dummy1: 0;padding-right:3px}.isLtr[_nghost-%COMP%]   .separator[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .separator[_ngcontent-%COMP%]{padding-right:3px}html[dir=ltr][_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{--dummy2: 0;padding-right:3px}.isRtl[_nghost-%COMP%]   .separator[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .separator[_ngcontent-%COMP%]{padding-left:3px}html[dir=rtl][_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{--dummy2: 0;padding-left:3px}.bright-color[_ngcontent-%COMP%]{color:#fff}.normal-color[_ngcontent-%COMP%]{color:#ffffffb3}.warning-color[_ngcontent-%COMP%]{color:#ffb43e}.error-color[_ngcontent-%COMP%]{color:#e02828}.isLtr.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=ltr]   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], html[dir=ltr]   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-left:5px}.isRtl.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=rtl]   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], html[dir=rtl]   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-right:5px}.isLtr.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=ltr]   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], html[dir=ltr]   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-right:5px}.isRtl.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=rtl]   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], html[dir=rtl]   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-left:5px}']}),st})();var X=e(83720),j=e(89460);const K=["networkStatusIndicator"],Z=function(st,Et){return{"icon-warning":st,"icon-error":Et}};function L(st,Et){if(1&st&&(r.TgZ(0,"div",2),r.TgZ(1,"div",3),r._UZ(2,"mat-icon",4),r.qZA(),r.qZA()),2&st){const Ee=r.oxw();r.xp6(2),r.Q6J("ngClass",r.WLB(1,Z,Ee.iconWarning,Ee.iconAlert))}}let W=(()=>{class st{constructor(Ee,dt){this.gfnInfoService=Ee,this.showAny=!0,this.iconWarning=!1,this.iconAlert=!1,this.viewInit=!1,this.changed=new r.vpe,this.logger=dt.getLogger("NetworkStatusComponent"),this.setup()}setup(){!this.viewInit||(this.networkStateSub=this.gfnInfoService.getNetworkState().pipe((0,X.x)()).subscribe(Ee=>{this.showAny=Ee!==y.SX.NORMAL,this.iconWarning=Ee===y.SX.WARNING,this.iconAlert=Ee===y.SX.ALERT,this.changed.emit()}))}ngAfterViewInit(){this.viewInit=!0,setTimeout(()=>this.setup(),0)}ngOnDestroy(){var Ee;null===(Ee=this.networkStateSub)||void 0===Ee||Ee.unsubscribe()}getDimensions(){return this.networkStatusIndicator?this.networkStatusIndicator.nativeElement.getBoundingClientRect():null}}return st.\u0275fac=function(Ee){return new(Ee||st)(r.Y36(y.In),r.Y36(a.ed))},st.\u0275cmp=r.Xpm({type:st,selectors:[["nv-network-status"]],viewQuery:function(Ee,dt){if(1&Ee&&r.Gf(K,7),2&Ee){let kt;r.iGM(kt=r.CRH())&&(dt.networkStatusIndicator=kt.first)}},outputs:{changed:"changed"},decls:3,vars:1,consts:[["networkStatusIndicator",""],["fxLayout","row",4,"ngIf"],["fxLayout","row"],["fxLayout","row","fxLayoutAlign","center center",1,"osd-general","osd-status-image"],["svgIcon","network_signal",3,"ngClass"]],template:function(Ee,dt){1&Ee&&(r.TgZ(0,"div",null,0),r.YNc(2,L,3,4,"div",1),r.qZA()),2&Ee&&(r.xp6(2),r.Q6J("ngIf",dt.showAny))},directives:[f.O5,o.xw,o.Wh,c.Hw,f.mk,j.oO],styles:[".osd-general[_ngcontent-%COMP%]{opacity:.9}.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-top:5px;transform-origin:top left}.isLtr.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=ltr]   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-left:5px}.isRtl.osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=rtl]   .osd-topleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-right:5px}.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-top:5px;transform-origin:top right}.isLtr.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=ltr]   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-right:5px}.isRtl.osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=rtl]   .osd-topright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-left:5px}.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-bottom:5px;transform-origin:bottom left}.isLtr.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=ltr]   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-left:5px}.isRtl.osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=rtl]   .osd-bottomleft[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomleft   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy3: 0;margin-right:5px}.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-bottom:5px;transform-origin:bottom right}.isLtr.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr.osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isLtr   .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isLtr[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isLtr   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-right:5px}html[dir=ltr]   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-right:5px}.isRtl.osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl.osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .isRtl   .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isRtl[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   .isRtl   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{margin-left:5px}html[dir=rtl]   .osd-bottomright[_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%]   .osd-general[_ngcontent-%COMP%]{--dummy4: 0;margin-left:5px}.osd-topright[_nghost-%COMP%], .osd-topright   [_nghost-%COMP%], .osd-bottomright[_nghost-%COMP%], .osd-bottomright   [_nghost-%COMP%], .osd-topright[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-topright   [_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-bottomright[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-bottomright   [_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-direction:column-reverse}.osd-status-image[_ngcontent-%COMP%]{width:24px;height:24px;background-color:#000c}.osd-status-image[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:18px;font-size:18px;height:18px;width:18px}"]}),st})();var te=e(53466);function ie(st,Et){if(1&st){const Ee=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"nv-shadowplay-status",7),r.NdJ("changed",function(){return r.CHM(Ee),r.oxw(2).updateVisibility()}),r.qZA(),r.qZA()}}function Q(st,Et){if(1&st){const Ee=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"nv-shadowplay-status",8),r.NdJ("changed",function(){return r.CHM(Ee),r.oxw(2).updateVisibility()}),r.qZA(),r.qZA()}}function k(st,Et){if(1&st){const Ee=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"nv-shadowplay-status",9),r.NdJ("changed",function(){return r.CHM(Ee),r.oxw(2).updateVisibility()}),r.qZA(),r.qZA()}}function oe(st,Et){if(1&st){const Ee=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"nv-shadowplay-status",10),r.NdJ("changed",function(){return r.CHM(Ee),r.oxw(2).updateVisibility()}),r.qZA(),r.qZA()}}function N(st,Et){if(1&st){const Ee=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"nv-microphone-status",11),r.NdJ("changed",function(){return r.CHM(Ee),r.oxw(2).updateVisibility()}),r.qZA(),r.qZA()}}function q(st,Et){if(1&st){const Ee=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"nv-network-status",11),r.NdJ("changed",function(){return r.CHM(Ee),r.oxw(2).updateVisibility()}),r.qZA(),r.qZA()}}function Me(st,Et){if(1&st){const Ee=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"nv-statistics-overlay",11),r.NdJ("changed",function(){return r.CHM(Ee),r.oxw(2).updateVisibility()}),r.qZA(),r.qZA()}}function xe(st,Et){if(1&st&&(r.TgZ(0,"div",2),r.TgZ(1,"div",3),r.TgZ(2,"div",4),r.TgZ(3,"div",5),r.YNc(4,ie,2,0,"div",6),r.qZA(),r.TgZ(5,"div",5),r.YNc(6,Q,2,0,"div",6),r.qZA(),r.TgZ(7,"div",5),r.YNc(8,k,2,0,"div",6),r.qZA(),r.TgZ(9,"div",5),r.YNc(10,oe,2,0,"div",6),r.qZA(),r.TgZ(11,"div",5),r.YNc(12,N,2,0,"div",6),r.qZA(),r.TgZ(13,"div",5),r.YNc(14,q,2,0,"div",6),r.qZA(),r.qZA(),r.TgZ(15,"div",5),r.YNc(16,Me,2,0,"div",6),r.qZA(),r.qZA(),r.qZA()),2&st){const Ee=Et.$implicit,dt=r.oxw();r.xp6(1),r.Q6J("ngClass",Ee.value),r.xp6(3),r.Q6J("ngIf",dt.visibility.Recording===Ee.key),r.xp6(2),r.Q6J("ngIf",dt.visibility.IR===Ee.key),r.xp6(2),r.Q6J("ngIf",dt.visibility.Highlights===Ee.key),r.xp6(2),r.Q6J("ngIf",dt.isMicEnabled&&dt.visibility.Mic===Ee.key),r.xp6(2),r.Q6J("ngIf",dt.isGfnMicEnabled&&dt.visibility.GfnMic===Ee.key),r.xp6(2),r.Q6J("ngIf",dt.visibility.Network===Ee.key),r.xp6(2),r.Q6J("ngIf",dt.visibility.Statistics===Ee.key)}}let ct=(()=>{class st{constructor(Ee,dt,kt,Zt){this.oscDisplayService=dt,this.osdService=kt,this.featureSupportService=Zt,this.isMicEnabled=!1,this.isGfnMicEnabled=!1,this.visibility={Recording:y.Fr.none,IR:y.Fr.none,Highlights:y.Fr.none,Mic:y.Fr.none,ViewerCount:y.Fr.none,Comments:y.Fr.none,GfnMic:y.Fr.none,Statistics:y.Fr.none,Network:y.Fr.none},this.quadrants={leftTop:"osd-topleft",rightTop:"osd-topright",leftBottom:"osd-bottomleft",rightBottom:"osd-bottomright"},this.anythingVisible=!1,this.logger=Ee.getLogger("OsdComponent"),this.isMicEnabled=this.featureSupportService.isMicrophoneEnabled()}ngOnInit(){this.gfnMicEnableSub=this.featureSupportService.isGfnMicrophoneEnabled().pipe((0,te.q)(1)).subscribe(Ee=>this.isGfnMicEnabled=Ee)}updatePositions(){Object.keys(this.visibility).forEach(Ee=>{this.visibility[Ee]=this.osdService.getPosition(y.Kw[Ee])})}updateRects(){var Ee,dt,kt;const Zt=[];this.statusShadowplayChildren.forEach(dn=>{dn.showAny&&Zt.push(dn.getDimensions())}),(null===(Ee=this.statusMicrophoneChild)||void 0===Ee?void 0:Ee.showAny)&&Zt.push(this.statusMicrophoneChild.getDimensions()),(null===(dt=this.statisticsOverlayChild)||void 0===dt?void 0:dt.statsState)!==y.Tj.Off&&Zt.push(this.statisticsOverlayChild.getDimensions()),(null===(kt=this.statusNetworkChild)||void 0===kt?void 0:kt.showAny)&&Zt.push(this.statusNetworkChild.getDimensions()),this.oscDisplayService.setOSDDisplayRectangles(Zt)}updateVisibility(){var Ee,dt,kt;const Zt=this.anythingVisible;let dn=!1;this.statusShadowplayChildren.forEach(gn=>{gn.showAny&&(dn=!0)}),(null===(Ee=this.statusMicrophoneChild)||void 0===Ee?void 0:Ee.showAny)&&(dn=!0),(null===(dt=this.statisticsOverlayChild)||void 0===dt?void 0:dt.statsState)!==y.Tj.Off&&(dn=!0),(null===(kt=this.statusNetworkChild)||void 0===kt?void 0:kt.showAny)&&(dn=!0),this.anythingVisible=dn,setTimeout(()=>{this.updateRects(),Zt!==this.anythingVisible&&(this.anythingVisible?this.oscDisplayService.openOSCForNotification():this.oscDisplayService.closeOSCForNotification())},0)}ngOnDestroy(){var Ee;this.listener.unsubscribe(),null===(Ee=this.gfnMicEnableSub)||void 0===Ee||Ee.unsubscribe()}ngAfterViewInit(){setTimeout(()=>{this.updatePositions(),this.updateVisibility()},200),this.listener=this.osdService.listen().subscribe(()=>{setTimeout(()=>{this.updatePositions(),this.updateVisibility()},200)})}}return st.\u0275fac=function(Ee){return new(Ee||st)(r.Y36(a.ed),r.Y36(y.vU),r.Y36(y.Ec),r.Y36(y.lm))},st.\u0275cmp=r.Xpm({type:st,selectors:[["nv-osd"]],viewQuery:function(Ee,dt){if(1&Ee&&(r.Gf(_,5),r.Gf(ue,5),r.Gf(W,5),r.Gf(v,5)),2&Ee){let kt;r.iGM(kt=r.CRH())&&(dt.statusMicrophoneChild=kt.first),r.iGM(kt=r.CRH())&&(dt.statisticsOverlayChild=kt.first),r.iGM(kt=r.CRH())&&(dt.statusNetworkChild=kt.first),r.iGM(kt=r.CRH())&&(dt.statusShadowplayChildren=kt)}},decls:3,vars:4,consts:[[3,"hidden"],["class","osd-container",4,"ngFor","ngForOf"],[1,"osd-container"],["fxLayout","row",3,"ngClass"],["fxLayout","column","fxFlex","none",1,"osd-column"],["fxLayout","row","fxFlex","none"],[4,"ngIf"],["mode","Recording",3,"changed"],["mode","IR",3,"changed"],["mode","Highlights",3,"changed"],["mode","Mic",3,"changed"],[3,"changed"]],template:function(Ee,dt){1&Ee&&(r.TgZ(0,"div",0),r.YNc(1,xe,17,8,"div",1),r.ALo(2,"keyvalue"),r.qZA()),2&Ee&&(r.Q6J("hidden",!dt.anythingVisible),r.xp6(1),r.Q6J("ngForOf",r.lcZ(2,2,dt.quadrants)))},directives:[f.sg,o.xw,f.mk,j.oO,o.yH,f.O5,v,_,W,ue],pipes:[f.Nd],styles:[".osd-container[_ngcontent-%COMP%]{position:fixed;left:0;right:0;width:100vw;height:calc(100vh - 48px);pointer-events:none;z-index:0;margin:24px 0}.osd-topleft[_ngcontent-%COMP%]{left:0;top:0;position:absolute;transform-origin:left top}.osd-topright[_ngcontent-%COMP%]{right:0;top:0;position:absolute;transform-origin:right top}.osd-bottomleft[_ngcontent-%COMP%]{left:0;bottom:0;position:absolute;transform-origin:left bottom}.osd-bottomleft[_ngcontent-%COMP%] > .osd-column[_ngcontent-%COMP%]{flex-direction:column-reverse!important}.osd-bottomright[_ngcontent-%COMP%]{right:0;bottom:0;position:absolute;transform-origin:right bottom}.osd-bottomright[_ngcontent-%COMP%] > .osd-column[_ngcontent-%COMP%]{flex-direction:column-reverse!important}.osd-topright[_ngcontent-%COMP%], .osd-bottomright[_ngcontent-%COMP%], .osd-topright[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .osd-bottomright[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-direction:row-reverse!important}.isRtl[_nghost-%COMP%]   .osd-topright[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .osd-topright[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .osd-bottomright[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .osd-bottomright[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .osd-topright[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .osd-topright[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .osd-bottomright[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .osd-bottomright[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-direction:row!important}.isRtl[_nghost-%COMP%]   .osd-topleft[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .osd-topleft[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .osd-bottomleft[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .osd-bottomleft[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .osd-topleft[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .osd-topleft[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .osd-bottomleft[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .osd-bottomleft[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-direction:row-reverse!important}"]}),st})();var Se=e(71258);let Ge=(()=>{class st{constructor(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight}ngOnInit(){}}return st.\u0275fac=function(Ee){return new(Ee||st)},st.\u0275cmp=r.Xpm({type:st,selectors:[["igo-nv-grid"]],decls:10,vars:34,consts:[[1,"grid-svg","pos-abs"],[1,"grid-line-white"],[1,"grid-line-white","pos-abs"],[1,"grid-line-black"]],template:function(Ee,dt){1&Ee&&(r.TgZ(0,"div"),r.O4$(),r.TgZ(1,"svg",0),r._UZ(2,"line",1),r._UZ(3,"line",1),r._UZ(4,"line",2),r._UZ(5,"line",1),r._UZ(6,"line",3),r._UZ(7,"line",3),r._UZ(8,"line",3),r._UZ(9,"line",3),r.qZA(),r.qZA()),2&Ee&&(r.xp6(1),r.uIk("width",dt.windowWidth)("height",dt.windowHeight),r.xp6(1),r.uIk("x1",0)("x2",dt.windowWidth)("y1",dt.windowHeight/3)("y2",dt.windowHeight/3),r.xp6(1),r.uIk("x1",0)("x2",dt.windowWidth)("y1",2*dt.windowHeight/3)("y2",2*dt.windowHeight/3),r.xp6(1),r.uIk("x1",dt.windowWidth/3)("x2",dt.windowWidth/3)("y1",0)("y2",dt.windowHeight),r.xp6(1),r.uIk("x1",2*dt.windowWidth/3)("x2",2*dt.windowWidth/3)("y1",0)("y2",dt.windowHeight),r.xp6(1),r.uIk("x1",0)("x2",dt.windowWidth)("y1",dt.windowHeight/3)("y2",dt.windowHeight/3),r.xp6(1),r.uIk("x1",0)("x2",dt.windowWidth)("y1",2*dt.windowHeight/3)("y2",2*dt.windowHeight/3),r.xp6(1),r.uIk("x1",dt.windowWidth/3)("x2",dt.windowWidth/3)("y1",0)("y2",dt.windowHeight),r.xp6(1),r.uIk("x1",2*dt.windowWidth/3)("x2",2*dt.windowWidth/3)("y1",0)("y2",dt.windowHeight))},styles:[".grid-line-white[_ngcontent-%COMP%]{stroke:#fff;stroke-width:5}.grid-line-black[_ngcontent-%COMP%]{stroke:#000;stroke-width:2}.grid-svg[_ngcontent-%COMP%]{z-index:-1}.pos-abs[_ngcontent-%COMP%]{position:absolute}"]}),st})();var St=e(2984),Tt=e(68637),Te=e(7161),Je=e(61486),xt=e(82516),Ye=e(89919),rt=e(90425),ge=e(79902),Ve=e(9170),at=e(67202),ve=e(85816),Ze=e(98636),Ie=e(20088),$e=e(48225),ze=e(60),_t=e(22573),be=e(52825);const pt=["textInput"];function Ot(st,Et){if(1&st&&(r.TgZ(0,"div",5),r._UZ(1,"mat-icon",6),r.TgZ(2,"span",7),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&st){const Ee=r.oxw(2);r.xp6(1),r.Q6J("svgIcon",Ee.toggleIcon),r.xp6(2),r.Oqu(r.lcZ(4,2,Ee.toggleHint))}}function Kt(st,Et){if(1&st&&(r.TgZ(0,"div",5),r._UZ(1,"mat-icon",6),r.TgZ(2,"span",7),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&st){const Ee=r.oxw(2);r.xp6(1),r.Q6J("svgIcon",Ee.clientImeIcon),r.xp6(2),r.Oqu(r.lcZ(4,2,Ee.clientImeHint))}}function nn(st,Et){if(1&st&&(r.TgZ(0,"div",5),r._UZ(1,"mat-icon",6),r.TgZ(2,"span",7),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&st){const Ee=r.oxw(2);r.xp6(1),r.Q6J("svgIcon",Ee.mouseIcon),r.xp6(2),r.Oqu(r.lcZ(4,2,Ee.mouseHint))}}function tn(st,Et){if(1&st&&(r.TgZ(0,"div",5),r._UZ(1,"mat-icon",6),r.TgZ(2,"span",7),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&st){const Ee=r.oxw(2);r.xp6(1),r.Q6J("svgIcon",Ee.textVisibilityIcon),r.xp6(2),r.Oqu(r.lcZ(4,2,Ee.textVisibilityHint))}}function Mn(st,Et){if(1&st&&(r.TgZ(0,"div",3),r.TgZ(1,"div",4),r.TgZ(2,"div",5),r._UZ(3,"mat-icon",6),r.TgZ(4,"span",7),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.YNc(7,Ot,5,4,"div",8),r.YNc(8,Kt,5,4,"div",8),r.YNc(9,nn,5,4,"div",8),r.YNc(10,tn,5,4,"div",8),r.qZA(),r.qZA()),2&st){const Ee=r.oxw();r.xp6(3),r.Q6J("svgIcon",Ee.escapeIcon),r.xp6(2),r.Oqu(r.lcZ(6,6,Ee.escapeHint)),r.xp6(2),r.Q6J("ngIf",Ee.isDefaultMode),r.xp6(1),r.Q6J("ngIf",Ee.isClientImeEnabled),r.xp6(1),r.Q6J("ngIf",Ee.isJoystickEnabled),r.xp6(1),r.Q6J("ngIf",Ee.isClientImeMode)}}var Un=(()=>{return(st=Un||(Un={})).Default="Default",st.ClientIme="ClientIme",Un;var st})(),_n=(()=>{return(st=_n||(_n={})).B="B",st.Y="Y",st.X="X",st.RT="RT",st.RS="RS",st.LS="LS",_n;var st})();let xn=(()=>{class st{constructor(Ee,dt,kt,Zt,dn,gn,jt,En,Pn,Ln){this.loggingService=Ee,this.ngZone=dt,this.clientInputService=kt,this.bridgeService=Zt,this.gamepadService=dn,this.oscNotificationService=gn,this.systemInfoService=jt,this.spatialNavigationService=En,this.nvKeyboardService=Pn,this.featureSupportService=Ln,this.controlHintVisible=!1,this.isJoystickEnabled=!0,this.isClientImeEnabled=!1,this.currentMode=Un.Default,this.logger=Ee.getLogger("IGOInputControlComponent"),this.destroy$=new i.xQ,this.escapeHint="clientInput.CloseHint",this.toggleHint="clientInput.HideKeyboardHint",this.clientImeHint="clientInput.NativeKeyboardInputHint",this.mouseHint="clientInput.MouseHint",this.textVisibilityHint="clientInput.HideImeInputTextHint",this.nvKeyboardSupported=this.featureSupportService.isNvKeyboardSupported(),this.isClientImeEnabled=this.featureSupportService.isClientImeEnabled()}get nvKeyboardOpened(){return!!this.nvKeyboardRef}get keyboardOpened(){return this.systemKeyboardOpened||this.nvKeyboardOpened}get isClientImeMode(){return this.currentMode===Un.ClientIme}get isDefaultMode(){return this.currentMode===Un.Default}ngOnInit(){this.clientInputService.imeInputTextVisible$.pipe((0,D.R)(this.destroy$)).subscribe(Ee=>{this.imeInputTextVisible=Ee,this.updateToggleHint()}),this.clientInputService.imeOpened$.pipe((0,X.x)(),(0,D.R)(this.destroy$)).subscribe(Ee=>{this.switchInputMode(Ee?Un.ClientIme:Un.Default)}),this.nvKeyboardSupported?(this.osrHandler=new ze.wu(this.loggingService,this.bridgeService,"nvKeyboard",this.spatialNavigationService),this.escapeIcon="gamepad_blue_b",this.toggleIcon="gamepad_blue_y",this.clientImeIcon="gamepad_blue_rt",this.mouseIcon="gamepad_blue_rs"):(this.escapeIcon="gamepad_b_hint",this.toggleIcon="gamepad_y_hint",this.clientImeIcon="gamepad_rt_hint",this.mouseIcon=this.featureSupportService.isGamepadLSControlUsed()?"gamepad_ls_hint":"gamepad_rs_hint"),this.textVisibilityIcon="gamepad_blue_x"}ngAfterViewInit(){this.systemInfoService.getDeviceOSType().pipe((0,te.q)(1),(0,ge.w)(jt=>(0,Je.aj)([(0,F.of)(jt),jt===a.wi.XBox?(0,F.of)(!1):this.clientInputService.systemKeyboardState$])),(0,D.R)(this.destroy$)).subscribe(([jt,En])=>{var Pn;this.isXboxOs=jt===a.wi.XBox,this.systemKeyboardOpened=En,this.updateToggleHint();const Ln=jt===a.wi.WebOS;Ln&&this.systemKeyboardOpened&&!this.isUsagePresented&&(this.oscNotificationService.show($e.ZJ.OnscreenKeyboardUsage),this.isUsagePresented=!0),Ln&&!this.systemKeyboardOpened&&document.activeElement===(null===(Pn=this.inputElement)||void 0===Pn?void 0:Pn.nativeElement)&&this.inputElement.nativeElement.blur()});const Ee=this.gamepadService.rightStickMoved$.pipe((0,Ve.h)(jt=>!0===jt),(0,at.h)(_n.RS)),dt=this.gamepadService.onButtonPressed$(Tt.z.RightTrigger).pipe((0,Ve.h)(jt=>!0===jt),(0,at.h)(_n.RT)),kt=this.gamepadService.onButtonPressed$(Tt.z.Y).pipe((0,Ve.h)(jt=>!0===jt),(0,at.h)(_n.Y)),Zt=this.gamepadService.onButtonPressed$(Tt.z.X).pipe((0,Ve.h)(jt=>!0===jt),(0,at.h)(_n.X)),dn=this.ngZone.runOutsideAngular(()=>(0,xt.R)(document,"keydown").pipe((0,Ve.h)(jt=>"Escape"===jt.key),(0,at.h)(_n.B))),gn=(0,Ye.T)(Ee,dt,kt,Zt,dn).pipe((0,D.R)(this.clientInputService.inputControlUIClosed$));this.clientInputService.inputControlUIClosed$.pipe((0,D.R)(this.destroy$)).subscribe(()=>{this.showInputUI(!1)}),this.clientInputService.inputControlUIOpened$.pipe((0,ve.zg)(()=>(this.showInputUI(!0),this.inputControlHintsEnabled?gn:rt.C)),(0,D.R)(this.destroy$)).subscribe(jt=>{switch(jt){case _n.RS:this.isDefaultMode&&this.keyboardOpened&&this.toggleKeyboard(!1);break;case _n.RT:this.isClientImeMode?this.clientInputService.controlImeInput(Te.oG.Send):this.nvKeyboardOpened?(this.nvKeyboardRef.afterDismissed().pipe((0,te.q)(1),(0,D.R)(this.destroy$)).subscribe(()=>{this.clientInputService.initImeInput(Te.rW.Igo)}),this.nvKeyboardRef.dismiss()):this.clientInputService.initImeInput(Te.rW.Igo);break;case _n.Y:this.isDefaultMode&&this.toggleKeyboard(!this.keyboardOpened,!0);break;case _n.X:this.isClientImeMode&&this.clientInputService.controlImeInput(Te.oG.ToggleTextVisibility);break;case _n.B:this.isDefaultMode&&(this.keyboardOpened?this.toggleKeyboard(!1):this.clientInputService.toggleInputUI(!1))}})}openNvKeyboard(){this.nvKeyboardRef=this.nvKeyboardService.open(),this.switchInputMode(Un.Default),(0,Ye.T)(this.nvKeyboardRef.afterOpened().pipe((0,te.q)(1),(0,at.h)(!0)),this.nvKeyboardRef.afterDismissed().pipe((0,te.q)(1),(0,at.h)(!1))).pipe((0,Ze.b)(Ee=>{Ee?this.openOsr():(this.closeOsr(),this.nvKeyboardRef=void 0,this.updateToggleHint())}),(0,ge.w)(Ee=>this.nvKeyboardService.onInput$.pipe((0,Ie.P)(dt=>"keyup"===dt.type&&"Escape"===dt.key))),(0,D.R)(this.destroy$)).subscribe(Ee=>{this.nvKeyboardOpened&&(this.activateNvKeyboard(!1),Ee.stopPropagation())})}activateNvKeyboard(Ee){Ee&&!this.nvKeyboardOpened?this.openNvKeyboard():!Ee&&this.nvKeyboardOpened&&this.nvKeyboardRef.dismiss()}showInputUI(Ee){this.controlHintVisible=this.inputControlHintsEnabled&&Ee,this.toggleKeyboard(Ee),this.enableJoystickMouse(this.inputControlHintsEnabled&&Ee)}switchInputMode(Ee){!this.controlHintVisible||(this.currentMode=Ee,this.isClientImeMode?(this.escapeHint="clientInput.CancelHint",this.clientImeHint="clientInput.SendHint",this.enableJoystickMouse(!1)):(this.escapeHint="clientInput.CloseHint",this.clientImeHint="clientInput.NativeKeyboardInputHint",this.enableJoystickMouse(!0)),this.updateToggleHint())}enableJoystickMouse(Ee){this.isJoystickEnabled=Ee,this.bridgeService.executeCommand(St.Gh.Gfn.Streaming.ToggleJoystickMouse,{enable:Ee}).pipe((0,te.q)(1),(0,D.R)(this.destroy$)).subscribe()}toggleSystemKeyboardForXbox(Ee,dt=!1){var kt,Zt;dt?(null===(kt=this.inputElement)||void 0===kt||kt.nativeElement.blur(),null===(Zt=this.inputElement)||void 0===Zt||Zt.nativeElement.focus(),this.logger.info("Force open virtual keyboard on Xbox.")):this.toggleSystemKeyboard(Ee)}toggleKeyboard(Ee,dt=!1){this.nvKeyboardSupported?this.activateNvKeyboard(Ee):this.isXboxOs?this.toggleSystemKeyboardForXbox(Ee,dt):this.toggleSystemKeyboard(Ee)}toggleSystemKeyboard(Ee){var dt;const kt=null===(dt=this.inputElement)||void 0===dt?void 0:dt.nativeElement;kt&&(Ee?kt.focus():kt.blur())}updateToggleHint(){this.isDefaultMode?this.toggleHint=this.keyboardOpened?this.systemKeyboardOpened&&this.nvKeyboardSupported?"clientInput.AppKeyboardHint":"clientInput.HideKeyboardHint":"clientInput.ShowKeyboardHint":this.isClientImeMode&&(this.textVisibilityHint=this.imeInputTextVisible?"clientInput.HideImeInputTextHint":"clientInput.ShowImeInputTextHint")}openOsr(){this.osrHandler.open(!0).pipe((0,te.q)(1)).subscribe(Ee=>{this.logger.info("Opened osr with state "+Ee)},Ee=>{this.logger.error("Received error when opening osr: ",Ee)})}closeOsr(){this.osrHandler.close().pipe((0,te.q)(1)).subscribe(Ee=>{this.logger.info("Closed osr, state after close: "+Ee)},Ee=>{this.logger.error("Received error when closing osr: ",Ee)})}ngOnDestroy(){var Ee;null===(Ee=this.nvKeyboardRef)||void 0===Ee||Ee.dismiss(),this.destroy$.next(!0),this.destroy$.complete()}}return st.\u0275fac=function(Ee){return new(Ee||st)(r.Y36(a.ed),r.Y36(r.R0b),r.Y36(y.SD),r.Y36(a.dF),r.Y36(Tt.S),r.Y36($e.nG),r.Y36(a.Ob),r.Y36(_t.jr),r.Y36(be.Ow),r.Y36(y.lm))},st.\u0275cmp=r.Xpm({type:st,selectors:[["igo-input-control"]],viewQuery:function(Ee,dt){if(1&Ee&&r.Gf(pt,5),2&Ee){let kt;r.iGM(kt=r.CRH())&&(dt.inputElement=kt.first)}},inputs:{inputControlHintsEnabled:"inputControlHintsEnabled"},decls:3,vars:1,consts:[["autocomplete","off","autocorrect","off","autocapitalize","off","type","text","id","hiddentext","tabIndex","-1",1,"hidden-text-input"],["textInput",""],["class","input-control",4,"ngIf"],[1,"input-control"],["fxFlex","","fxLayout","column","fxLayoutGap","24px",1,"icon-hint-container"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"item-container"],[3,"svgIcon"],[1,"hint-bar"],["class","item-container","fxFlex","","fxLayout","row","fxLayoutAlign","start center",4,"ngIf"]],template:function(Ee,dt){1&Ee&&(r._UZ(0,"input",0,1),r.YNc(2,Mn,11,8,"div",2)),2&Ee&&(r.xp6(2),r.Q6J("ngIf",dt.controlHintVisible))},directives:[f.O5,o.yH,o.xw,o.SQ,o.Wh,c.Hw],pipes:[u.X$],styles:[".hidden-text-input[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:50px;opacity:0;pointer-events:none;font-size:24em}.input-control[_ngcontent-%COMP%]{position:absolute;top:64px}.isLtr[_nghost-%COMP%]   .input-control[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .input-control[_ngcontent-%COMP%]{left:64px}.isRtl[_nghost-%COMP%]   .input-control[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .input-control[_ngcontent-%COMP%]{right:64px}.icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]{height:48px}.icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:48px;height:48px;flex:1 0 48px;z-index:1}.icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .hint-bar[_ngcontent-%COMP%]{width:100%;font-size:24px;line-height:48px;background-color:#191919cc;white-space:nowrap}.isLtr[_nghost-%COMP%]   .icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .hint-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .hint-bar[_ngcontent-%COMP%]{padding:0 24px 0 48px}html[dir=ltr][_ngcontent-%COMP%]   .icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .hint-bar[_ngcontent-%COMP%]{--dummy: 0;padding:0 24px 0 48px}.isRtl[_nghost-%COMP%]   .icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .hint-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .hint-bar[_ngcontent-%COMP%]{padding:0 48px 0 24px}html[dir=rtl][_ngcontent-%COMP%]   .icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .hint-bar[_ngcontent-%COMP%]{--dummy: 0;padding:0 48px 0 24px}.isLtr[_nghost-%COMP%]   .icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .hint-bar[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .hint-bar[_ngcontent-%COMP%]{transform:translate(-24px)}.isRtl[_nghost-%COMP%]   .icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .hint-bar[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .icon-hint-container[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .hint-bar[_ngcontent-%COMP%]{transform:translate(24px)}"]}),st})();const Fn=["textInput"];function yt(st,Et){1&st&&r._UZ(0,"igo-nv-grid")}function Ht(st,Et){if(1&st&&r._UZ(0,"igo-input-control",5),2&st){const Ee=r.oxw();r.Q6J("inputControlHintsEnabled",Ee.inputControlHintsEnabled)}}const Ue=function(st,Et,Ee,dt){return{left_void:st,right_void:Et,left_igo:Ee,right_igo:dt}},Mt=function(st,Et){return{value:st,params:Et}};let ft=(()=>{class st{constructor(Ee,dt,kt,Zt,dn,gn,jt,En,Pn,Ln){this.igoConfig=Zt,this.navigationService=dn,this.oscDisplayService=gn,this.matDialog=jt,this.localeService=En,this.projectInterfaceService=Pn,this.hotkeyService=Ln,this.uiStateSub=void 0,this.destroy$=new i.xQ,this.curUIState="closed",this.showGrid=!1,this.throttleDuration=500,this.slideInOutParams={left_void:"-100%",right_void:"0",left_igo:"0",right_igo:"100%"},this.inputControlHintsEnabled=!1,this.virtualKbEnabled=!1,this.logger=dt.getLogger("IGO"),Ee.init().subscribe(ht=>{ht&&(this.logger.info("IGO singleton services initialized"),Zt.GFNCefClient&&Zt.IGOFeatureEnabled&&(this.virtualKbEnabled=kt.isVirtualKeyboardEnabled(),this.inputControlHintsEnabled=kt.isInputControlHintsEnabled()))}),this.uiStateSub=this.oscDisplayService.getCurrentOpenState().pipe((0,D.R)(this.destroy$)).subscribe(ht=>{this.curUIState=ht}),this.hotkeyService.listen(y.sW.QuitGame).pipe((0,m.p)(this.throttleDuration),(0,D.R)(this.destroy$)).subscribe(()=>{this.quitStreaming()})}onkeydown(Ee){if(this.igoConfig.IGOFeatureEnabled&&"Escape"===Ee.key&&"open"===this.curUIState){if(this.matDialog.openDialogs.length>0)return;this.logger.info("IGO Detected Escape"),this.navigationService.goToNextNavState(),this.preventDefaultAndStopPropagation(Ee)}}quitStreaming(){"open"===this.curUIState?(this.logger.info("IGO detected Quit Wih open state"),this.oscDisplayService.closeOSC(T.Y.QuitGath)):this.logger.info("IGO detected Quit with closed state"),this.projectInterfaceService.quitStreaming()}preventDefaultAndStopPropagation(Ee){Ee.preventDefault(),Ee.stopPropagation()}setShowGrid(Ee){this.showGrid=Ee}getShowGrid(){return this.showGrid}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}prepareRoute(Ee){return this.localeService.isRTLLayoutEnabled&&(this.slideInOutParams={left_void:"0",right_void:"-100%",left_igo:"100%",right_igo:"0"}),Ee&&Ee.isActivated&&Ee.activatedRoute?"igo":"void"}}return st.\u0275fac=function(Ee){return new(Ee||st)(r.Y36(y.Vu),r.Y36(a.ed),r.Y36(y.lm),r.Y36(y.gs),r.Y36(y.f5),r.Y36(y.vU),r.Y36(s.uw),r.Y36(a.OL),r.Y36(p.m3),r.Y36(y.y1))},st.\u0275cmp=r.Xpm({type:st,selectors:[["nv-igo"]],viewQuery:function(Ee,dt){if(1&Ee&&r.Gf(Fn,5),2&Ee){let kt;r.iGM(kt=r.CRH())&&(dt.inputElement=kt.first)}},hostBindings:function(Ee,dt){1&Ee&&r.NdJ("keydown",function(Zt){return dt.onkeydown(Zt)},!1,r.evT)},decls:7,vars:11,consts:[[4,"ngIf"],["fxFlexFill","",1,"sidebar"],["name","igo"],["outletigo","outlet"],[3,"inputControlHintsEnabled",4,"ngIf"],[3,"inputControlHintsEnabled"]],template:function(Ee,dt){if(1&Ee&&(r._UZ(0,"nv-osc-notifier"),r._UZ(1,"nv-osd"),r.YNc(2,yt,1,0,"igo-nv-grid",0),r.TgZ(3,"div",1),r._UZ(4,"router-outlet",2,3),r.qZA(),r.YNc(6,Ht,1,1,"igo-input-control",4)),2&Ee){const kt=r.MAs(5);r.xp6(2),r.Q6J("ngIf",dt.showGrid),r.xp6(1),r.Q6J("@slideInOut",r.WLB(8,Mt,dt.prepareRoute(kt),r.l5B(3,Ue,dt.slideInOutParams.left_void,dt.slideInOutParams.right_void,dt.slideInOutParams.left_igo,dt.slideInOutParams.right_igo))),r.xp6(3),r.Q6J("ngIf",dt.virtualKbEnabled)}},directives:[G,ct,f.O5,o.s9,Se.lC,Ge,xn],styles:["[_nghost-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;overflow:hidden!important;-webkit-user-select:none;user-select:none;cursor:default;margin:0;background:rgba(0,0,0,0)!important;pointer-events:none}.sidebar[_ngcontent-%COMP%]{position:relative;overflow:hidden}.hidden-text-input[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:50px;opacity:0;pointer-events:none;font-size:24em}"],data:{animation:[(0,n.X$)("slideInOut",[(0,n.SB)("void",(0,n.oB)({opacity:0,left:"{{ left_void }}",right:"{{ right_void }}"}),{params:{left_void:"-100%",right_void:"0"}}),(0,n.SB)("igo",(0,n.oB)({opacity:1,left:"{{ left_igo }}",right:"{{ right_igo }}"}),{params:{left_igo:"0",right_igo:"100%"}}),(0,n.eR)("void => igo",(0,n.jt)("300ms cubic-bezier(0, 0, 0.2, 1)")),(0,n.eR)("igo => void",[(0,n.IO)(":leave",(0,n.jt)("300ms cubic-bezier(0.4, 0, 1, 1)"))])])]}}),st})()},13833:(He,de,e)=>{"use strict";e.r(de),e.d(de,{MainMenuModule:()=>$e});var n=e(54364),i=e(71258),D=e(66660),m=e(6484),y=e(51),T=e(25816),r=e(2316),a=e(79441),s=e(42720),p=e(41618),l=e(22663),t=e(53466),w=e(8095),h=e(79902),u=e(2984),o=e(94377),f=e(7161),c=e(98221),g=e(52349),I=e(12556),G=e(24181),x=e(2281),E=e(30582),P=e(52529),v=e(58283);function O(ze,_t){if(1&ze&&r._UZ(0,"div",7),2&ze){const be=r.oxw();r.ekj("disabled-opacity",!be.disabled),r.Q6J("translate",be.subTitle)("translateParams",be.subTitleArg)}}const C=["*"];let _=(()=>{class ze{constructor(){this.icon=void 0,this.titleString=void 0,this.subTitle=void 0,this.subTitleArg=void 0,this.disabled=!1,this.subtitleVisible=!0}ngOnInit(){}}return ze.\u0275fac=function(be){return new(be||ze)},ze.\u0275cmp=r.Xpm({type:ze,selectors:[["nv-main-menu-item"]],inputs:{icon:"icon",titleString:"titleString",subTitle:"subTitle",subTitleArg:"subTitleArg",disabled:"disabled",subtitleVisible:"subtitleVisible"},ngContentSelectors:C,decls:10,vars:9,consts:[["fxLayout","row","fxLayoutAlign","start start"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"nv-item-icon"],[3,"svgIcon"],["fxFlexAlign","center","fxLayout","column","fxLayoutAlign","start start","fxFlex","grow",1,"nv-item-labels"],[1,"font-body2"],["class","font-body3",3,"disabled-opacity","translate","translateParams",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start start","fxFlex","none"],[1,"font-body3",3,"translate","translateParams"]],template:function(be,pt){1&be&&(r.F$t(),r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._UZ(2,"mat-icon",2),r.qZA(),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.YNc(7,O,1,4,"div",5),r.qZA(),r.TgZ(8,"div",6),r.Hsn(9),r.qZA(),r.qZA()),2&be&&(r.Udp("height",pt.subTitle?52:36,"px"),r.ekj("disabled-opacity",pt.disabled),r.xp6(2),r.Q6J("svgIcon",pt.icon),r.xp6(3),r.Oqu(r.lcZ(6,7,pt.titleString)),r.xp6(2),r.Q6J("ngIf",pt.subTitle&&pt.subtitleVisible))},directives:[E.xw,E.Wh,E.yH,P.Hw,E.XD,n.O5,v.Pi],pipes:[v.X$],styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}"]}),ze})();var F=e(34663),V=e(3794),b=e(78819),B=e(85816),U=e(9170),A=e(98636),S=e(42791),Y=e(59798),se=e(3603),fe=e(36914);const $=["scroller"];function ae(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"div",9),r.TgZ(1,"nv-virtual-grid-item",10),r.TgZ(2,"nv-gallery-item",11),r.NdJ("dblclick",function(){const Kt=r.CHM(be).$implicit;return r.oxw(2).openFile(Kt.item)})("mousedown",function(){const Kt=r.CHM(be).$implicit;return r.oxw(2).selectedItemChanged(Kt.item)}),r.qZA(),r.qZA(),r.qZA()}if(2&ze){const be=_t.$implicit,pt=r.oxw(2);r.xp6(1),r.Q6J("item",be)("selectedItemIndex",pt.selectedItemIndex)("itemWidth",pt.recentThumbSize)("itemHeight",pt.recentThumbSize),r.xp6(1),r.Q6J("item",be.item)("activeItem",pt.recentSelection)("thumbSize",pt.recentThumbSize)}}function me(ze,_t){if(1&ze){const be=r.EpF();r.ynx(0),r._UZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"nv-item-button",3),r.NdJ("clicked",function(){return r.CHM(be),r.oxw().recentGoLeft()}),r.qZA(),r.TgZ(4,"div",4),r.TgZ(5,"cdk-virtual-scroll-viewport",5,6),r.NdJ("keydown",function(Ot){return r.CHM(be),r.oxw().keydownRecent(Ot)}),r.YNc(7,ae,3,7,"div",7),r.qZA(),r.qZA(),r.TgZ(8,"nv-item-button",8),r.NdJ("clicked",function(){return r.CHM(be),r.oxw().recentGoRight()}),r.qZA(),r.qZA(),r._UZ(9,"div",1),r.BQk()}if(2&ze){const be=r.oxw();r.xp6(3),r.Q6J("disabled",be.leftDisabled),r.xp6(2),r.Q6J("itemSize",be.recentThumbSize),r.xp6(2),r.Q6J("cdkVirtualForOf",be.recentList),r.xp6(1),r.Q6J("disabled",be.rightDisabled)}}let ye=(()=>{class ze{constructor(be,pt,Ot,Kt,nn){this.loggingService=be,this.route=pt,this.navigationService=Ot,this.galleryService=Kt,this.dialogHelper=nn,this.destroy$=new a.xQ,this.previewOpen=!1,this.recentList=[],this.recentThumbSize=88,this.recentItemsToDisplay=10,this.recentItemsVisible=4,this.recentSize=this.recentThumbSize,this._selectedItem=void 0,this.selectedItemIndex=-1,this.leftDisabled=!1,this.rightDisabled=!1,this.logger=this.loggingService.getLogger("MainMenu")}ngOnInit(){this.initializeRecent(),this.galleryService.recentEvent().pipe((0,l.R)(this.destroy$),(0,w.p)(1e3)).subscribe(()=>{this.initializeRecent(),this.scroller&&this.scroller.scrollToIndex(0,"smooth")}),this.galleryService.previewPaneEvent().pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.previewEvent(be)})}ngOnDestroy(){this.dialogHelper.closeSnackBar(),this.destroy$.next(!0),this.destroy$.unsubscribe(),this.centerPaneCallback$&&this.centerPaneCallback$.unsubscribe()}initializeRecent(be=0){this.galleryService.getRecentData(this.recentThumbSize,this.recentItemsToDisplay).pipe((0,l.R)(this.destroy$)).subscribe(pt=>{this.logger.info("RecentList length",pt.length),pt.length>0&&(this._selectedItem=pt[be],this.recentList=pt.map((Ot,Kt)=>(Ot===this._selectedItem&&(this.selectedItemIndex=Kt),{index:Kt,selected:Ot===this._selectedItem,element:void 0,item:Ot})),this.chevronControl())})}keydownRecent(be){("Enter"===be.key||" "===be.key)&&this.recentList.length>0&&this.selectedItemIndex>=0&&this.selectedItemIndex<this.recentList.length?this.openFile(this.recentList[this.selectedItemIndex].item):"ArrowLeft"===be.key?this.recentGoLeft():"ArrowRight"===be.key&&this.recentGoRight()}openFile(be){this.dialogHelper.closeSnackBar(),this.recentSelection=this.recentList.find(pt=>pt.item.fullFilename===be.fullFilename).item,this.galleryService.currentFileData=this.recentSelection,this.previewOpen||(this.centerPaneOpened(),this.galleryService.setPreviewCaller(o.wB.mainMenu),this.navigationService.navigate([{outlets:{centerPane:"center-view/preview"}}],{relativeTo:this.route,skipLocationChange:!0},"image"===be.file.type?o.wB.galleryImagePreview:o.wB.galleryVideoPreview))}centerPaneOpened(){this.previewOpen||(this.navigationService.openCenterPane(!0),this.previewOpen=!0,this.centerPaneCallback$=this.navigationService.centerPaneClosedEvent().subscribe(()=>{this.recentSelection=void 0,this.previewOpen=!1,this.centerPaneCallback$.unsubscribe(),this.centerPaneCallback$=void 0}))}closePreview(){this.previewOpen&&this.navigationService.navigate([{outlets:{centerPane:null}}],{relativeTo:this.route,skipLocationChange:!0},o.wB.galleryMain)}selectedItemChanged(be){this.selectedItemIndex>=0&&this.selectedItemIndex<this.recentList.length&&(this.recentList[this.selectedItemIndex].selected=!1),this.selectedItemIndex=this.recentList.findIndex(pt=>pt.item.fullFilename===be.fullFilename),-1!==this.selectedItemIndex&&(this.logger.info("SelectedItemChanged item: ",this.selectedItemIndex,be.file.name),this.recentList[this.selectedItemIndex].selected=!0,this.chevronControl())}recentNav(be,pt=!1){let Ot=this.selectedItemIndex;this.recentList[this.selectedItemIndex].selected=!1,be?Ot--:Ot++,Ot=pt?Ot>=this.recentList.length?0:Ot<0?this.recentList.length-1:Ot:Ot>=this.recentList.length?this.recentList.length-1:Ot<0?0:Ot,this.scroller.scrollToIndex(Ot,"smooth"),this.selectedItemIndex=Ot,this.recentList[this.selectedItemIndex].selected=!0,this.previewOpen&&this.openFile(this.recentList[Ot].item),this.chevronControl()}recentGoLeft(){this.recentNav(!0)}recentGoRight(){this.recentNav(!1)}chevronControl(){this.recentList.length<=this.recentItemsVisible?(this.leftDisabled=!0,this.rightDisabled=!0):0===this.selectedItemIndex?(this.leftDisabled=!0,this.rightDisabled=!1):this.selectedItemIndex===this.recentList.length-1?(this.leftDisabled=!1,this.rightDisabled=!0):(this.leftDisabled=!1,this.rightDisabled=!1)}deleteCurrentFile(){this.logger.info("Remove clicked");const pt=this.recentList[this.selectedItemIndex].item;this.dialogHelper.openAlertDialog({title:"confirmation.confirmDeleteTitle",query:"confirmation.confirmDelete",queryParam:"",action1:"confirmation.NotRightNow",action2:"confirmation.remove"}).pipe((0,l.R)(this.destroy$),(0,B.zg)(Ot=>Ot.afterClosed()),(0,U.h)(Ot=>Ot===o.DX.Action2),(0,A.b)(()=>{this.closePreview(),this.recentList.splice(this.selectedItemIndex,1),this.selectedItemIndex>=this.recentList.length&&(this.selectedItemIndex=this.recentList.length-1),this.recentList.length>0&&(this.recentList[this.selectedItemIndex].selected=!0),this.recentList=this.recentList.slice()}),(0,B.zg)(()=>this.galleryService.showDeleteSnackbar([pt])),(0,U.h)(Ot=>!1===Ot),(0,A.b)(()=>this.initializeRecent(this.selectedItemIndex))).subscribe()}previewEvent(be){be===o.T7.DeleteFile?this.deleteCurrentFile():(be===o.T7.BackNav||be===o.T7.ForwardNav)&&(this.recentNav(be===o.T7.BackNav,!0),this.openFile(this.recentList[this.selectedItemIndex].item))}}return ze.\u0275fac=function(be){return new(be||ze)(r.Y36(m.ed),r.Y36(i.gz),r.Y36(o.f5),r.Y36(o.rj),r.Y36(o.Mb))},ze.\u0275cmp=r.Xpm({type:ze,selectors:[["nv-recent-view"]],viewQuery:function(be,pt){if(1&be&&r.Gf($,5),2&be){let Ot;r.iGM(Ot=r.CRH())&&(pt.scroller=Ot.first)}},decls:1,vars:1,consts:[[4,"ngIf"],[1,"nv-gap-8"],["fxLayout","row","fxLayoutAlign","center center","fxFlexFill",""],["svgIcon","chevron_left",3,"disabled","clicked"],[1,"recent-layout"],["fxFlex","","orientation","horizontal","tabIndex","0",1,"recent-container",3,"itemSize","keydown"],["scroller",""],["class","recent-item",4,"cdkVirtualFor","cdkVirtualForOf"],["svgIcon","chevron_right",3,"disabled","clicked"],[1,"recent-item"],[3,"item","selectedItemIndex","itemWidth","itemHeight"],["nvHoverFocus","",3,"item","activeItem","thumbSize","dblclick","mousedown"]],template:function(be,pt){1&be&&r.YNc(0,me,10,4,"ng-container",0),2&be&&r.Q6J("ngIf",pt.recentList.length>0)},directives:[n.O5,E.xw,E.Wh,E.s9,V.n,b.i,S.N7,S.xd,E.yH,S.x0,Y.H,se.x,fe.X],styles:[".nv-gap-4{height:4px}.nv-horizontal-gap-4{width:4px}.nv-gap-8{height:8px}.nv-horizontal-gap-8{width:8px}.nv-gap-12{height:12px}.nv-gap-16{height:16px}.nv-gap-24{height:24px}.nv-horizontal-gap-24{width:24px}.nv-gap-32{height:32px}.nv-horizontal-gap-32{width:32px}.nv-gap-40{height:40px}.nv-gap-48{height:48px}.icon-preview{color:#fff}.icon-error{color:#e02828}:host[disabled] .nv-item *{cursor:default}.nv-item-icon{width:36px;height:36px}.nv-item-icon mat-icon{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row{padding:0 24px}.nv-item-labels{padding:8px 0;height:100%}.nv-label{padding:8px 0}.default-cursor{cursor:default}.disabled-opacity{opacity:.38}:host{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}.icon-normal{color:#ffffffb3}.icon-highlighted{color:#76b900}.icon-green-bg{background:#76b900}.icon-preview-visible{color:#fff}.icon-preview-hidden{opacity:0}.icon-warning{color:#ffb43e}.icon-alert{color:#0b8abc!important}.recent-layout{height:88px;width:376px}.recent-container{height:88px;overflow-y:hidden;overflow-x:scroll}.recent-container::-webkit-scrollbar{width:0;height:0}.recent-container .cdk-virtual-scroll-content-wrapper{display:flex;flex-direction:row}.center-text{text-align:center}.recent-item{width:96px;height:100%}:host{padding:0 24px}\n"],encapsulation:2}),ze})();var ue=e(32080),X=e(84622),j=e(4597);const K=["tc"];function Z(ze,_t){if(1&ze&&(r.ynx(0),r.TgZ(1,"nv-main-menu-item",7),r.TgZ(2,"div",8),r._uU(3),r.qZA(),r.qZA(),r._UZ(4,"nv-divider"),r.BQk()),2&ze){const be=r.oxw();r.xp6(3),r.Oqu(be.timeLeftInStream)}}function L(ze,_t){1&ze&&(r.ynx(0),r._UZ(1,"nv-recent-view"),r.BQk())}function W(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"div",9),r.TgZ(1,"nv-item-button",10),r.NdJ("clicked",function(){return r.CHM(be),r.oxw().onGalleryClicked()}),r.qZA(),r.YNc(2,L,2,0,"ng-container",2),r.qZA()}if(2&ze){const be=r.oxw();r.xp6(1),r.Q6J("chevron",!be.lowDiskSpace)("disabled",be.lowDiskSpace),r.xp6(1),r.Q6J("ngIf",be.showRecent)}}function te(ze,_t){if(1&ze&&(r.TgZ(0,"span",20),r._uU(1),r.qZA()),2&ze){const be=r.oxw(2);r.xp6(1),r.Oqu(be.mrTime)}}function ie(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"nv-item-button",21),r.NdJ("clicked",function(){return r.CHM(be),r.oxw(2).onClickIRSave()}),r.qZA()}if(2&ze){const be=r.oxw(2);r.Q6J("disabled",be.recordSpecialCase.RECORD_SPECIAL_CASE_NONE!==be.disableRecordSpecialCase)}}function Q(ze,_t){if(1&ze){const be=r.EpF();r.ynx(0),r._UZ(1,"div",15),r.TgZ(2,"nv-item-button",22),r.NdJ("clicked",function(){return r.CHM(be),r.oxw(2).onPhotoModeClicked()}),r.qZA(),r.BQk()}if(2&ze){const be=r.oxw(2);r.xp6(2),r.Q6J("chevron",!0)("subTitle",be.getPhotoModeSubTitle())("subtitleVisible",!(be.isGamepadOrientedMode&&!be.photoModeDisabled))("disabled",be.photoModeDisabled)}}function k(ze,_t){if(1&ze){const be=r.EpF();r.ynx(0),r._UZ(1,"div",15),r.TgZ(2,"nv-item-button",23),r.NdJ("clicked",function(){return r.CHM(be),r.oxw(2).onGfnBroadcastClicked()}),r.qZA(),r.BQk()}if(2&ze){const be=r.oxw(2);r.xp6(2),r.Q6J("chevron",!0)("subTitle",be.getGfnBroadcastSubTitle())("subtitleVisible",!(be.isGamepadOrientedMode&&be.getGfnBroadcastSubTitle().length>0))}}function oe(ze,_t){if(1&ze){const be=r.EpF();r.ynx(0),r._UZ(1,"div",15),r.TgZ(2,"nv-item-button",24),r.NdJ("clicked",function(){return r.CHM(be),r.oxw(2).onGamesFilterClicked()}),r.qZA(),r.BQk()}if(2&ze){const be=r.oxw(2);r.xp6(2),r.Q6J("chevron",!0)("subTitle",be.getGameFilterSubTitle().subTitle)("subTitleArg",be.getGameFilterSubTitle().args)("subtitleVisible",!(be.isGamepadOrientedMode&&"None"!==be.gfStyleToggleHotkey))("disabled",be.gameFilterDisabled)}}function N(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"mat-slide-toggle",28),r.NdJ("change",function(Ot){return r.CHM(be),r.oxw(3).onToggleMicSwitch(Ot)}),r.qZA()}if(2&ze){const be=r.oxw(3);r.Q6J("checked",be.micSwitchState)}}function q(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"nv-rotary",29),r.NdJ("selectionChanged",function(Ot){return r.CHM(be),r.oxw(3).onRotaryMic(Ot)}),r.qZA()}if(2&ze){const be=r.oxw(3);r.Q6J("input",be.micRotaryOptions)("initialState",be.micRotaryInit)("width",be.rotaryWidth)}}const Me=function(ze){return{arg:ze}};function xe(ze,_t){if(1&ze&&(r.TgZ(0,"nv-main-menu-item",25),r.YNc(1,N,1,1,"mat-slide-toggle",26),r.YNc(2,q,1,3,"nv-rotary",27),r.qZA()),2&ze){const be=r.oxw(2);r.Q6J("subTitle",be.micHotkeyText)("subTitleArg",r.VKq(5,Me,be.micHotkeyArg))("subtitleVisible",be.isKBMGamesAllowed&&be.micHotkeyArg.length>0),r.xp6(1),r.Q6J("ngIf",be.useMicSwitch),r.xp6(1),r.Q6J("ngIf",!be.useMicSwitch&&be.showMicRotary)}}const ct=function(ze,_t,be){return{arg:ze,arg2:_t,arg3:be}};function Se(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"div"),r._UZ(1,"nv-divider"),r.TgZ(2,"nv-main-menu-item",11),r.YNc(3,te,2,1,"span",12),r._UZ(4,"div",13),r.TgZ(5,"nv-item-button",14),r.NdJ("clicked",function(){return r.CHM(be),r.oxw().onClickManualRecord()}),r.qZA(),r.qZA(),r._UZ(6,"div",15),r.TgZ(7,"nv-main-menu-item",16),r.YNc(8,ie,1,1,"nv-item-button",17),r.qZA(),r._UZ(9,"div",15),r.TgZ(10,"nv-item-button",18),r.NdJ("clicked",function(){return r.CHM(be),r.oxw().onScreenshotClicked()}),r.qZA(),r.YNc(11,Q,3,4,"ng-container",2),r.YNc(12,k,3,3,"ng-container",2),r.YNc(13,oe,3,5,"ng-container",2),r._UZ(14,"nv-divider"),r.YNc(15,xe,3,7,"nv-main-menu-item",19),r.qZA()}if(2&ze){const be=r.oxw();r.xp6(2),r.Q6J("subTitle",be.mrHotkeyText)("subTitleArg",r.VKq(20,Me,be.mrHotkey))("subtitleVisible",!(be.isGamepadOrientedMode&&!be.disableRecordSpecialCase))("disabled",be.recordSpecialCase.RECORD_SPECIAL_CASE_NONE!==be.disableRecordSpecialCase),r.xp6(1),r.Q6J("ngIf",be.mrTime),r.xp6(2),r.Q6J("svgIcon",be.isRecording?"stop":"play_arrow")("tooltip",be.isRecording?"tooltips.StopAndSave":"tooltips.Start")("disabled",be.recordSpecialCase.RECORD_SPECIAL_CASE_NONE!==be.disableRecordSpecialCase),r.xp6(2),r.Q6J("subTitle",be.irHotkeyText)("subTitleArg",r.kEZ(22,ct,be.irHotkey,be.irMin,be.irSec))("subtitleVisible",!be.isGamepadOrientedMode)("disabled",!be.isSaveEnabled||be.disableRecordSpecialCase),r.xp6(1),r.Q6J("ngIf",be.isSaveEnabled),r.xp6(2),r.Q6J("subTitle",be.screenshotHotkey)("subtitleVisible",!be.isGamepadOrientedMode)("disabled",be.recordSpecialCase.RECORD_SPECIAL_CASE_PLAYTEST===be.disableRecordSpecialCase),r.xp6(1),r.Q6J("ngIf",be.photoMode),r.xp6(1),r.Q6J("ngIf",be.gfnBroadcast),r.xp6(1),r.Q6J("ngIf",be.gameFilter),r.xp6(2),r.Q6J("ngIf",!be.isGfnMicEnabled)}}function Ge(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"nv-item-button",30),r.NdJ("clicked",function(){return r.CHM(be),r.oxw().onIMEClicked()}),r.qZA()}if(2&ze){const be=r.oxw();r.Q6J("subTitle",be.imeHotkeyText)("subTitleArg",r.VKq(3,Me,be.imeHotkeyArg))("subtitleVisible",be.isKBMGamesAllowed)}}function St(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"nv-rotary",29),r.NdJ("selectionChanged",function(Ot){return r.CHM(be),r.oxw(2).onChangeWebcam(Ot)}),r.qZA()}if(2&ze){const be=r.oxw(2);r.Q6J("input",be.webcamRotaryOptions)("initialState",be.webcamRotaryInit)("width",be.rotaryWidth)}}function Tt(ze,_t){if(1&ze&&(r.ynx(0),r._UZ(1,"div",15),r.TgZ(2,"nv-main-menu-item",31),r.YNc(3,St,1,3,"nv-rotary",27),r.qZA(),r.BQk()),2&ze){const be=r.oxw();r.xp6(2),r.Q6J("subTitle",be.camHotkeyText)("subTitleArg",r.VKq(4,Me,be.camHotkeyArg))("subtitleVisible",!(be.isGamepadOrientedMode&&be.camHotkeyArg.length>0)),r.xp6(1),r.Q6J("ngIf",be.showWebcamRotary)}}function Te(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"nv-item-button",33),r.NdJ("clicked",function(){return r.CHM(be),r.oxw(2).onToggleMicrophone()}),r.qZA()}if(2&ze){const be=r.oxw(2);r.Q6J("subTitle",be.micHotkeyText)("disabled",be.isGfnMicButtonDisabled)}}function Je(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"nv-main-menu-item",25),r.TgZ(1,"mat-slide-toggle",28),r.NdJ("change",function(){return r.CHM(be),r.oxw(2).onToggleMicrophone()}),r.qZA(),r.qZA()}if(2&ze){const be=r.oxw(2);r.Q6J("subTitle",be.micHotkeyText)("subTitleArg",r.VKq(4,Me,be.micHotkeyArg))("subtitleVisible",be.isGfnMicEnabled),r.xp6(1),r.Q6J("checked",be.gfnMicSwitchState)}}function xt(ze,_t){if(1&ze&&(r.ynx(0),r.YNc(1,Te,1,2,"nv-item-button",32),r.YNc(2,Je,2,6,"nv-main-menu-item",19),r.BQk()),2&ze){const be=r.oxw();r.xp6(1),r.Q6J("ngIf",be.isGfnMicBlocked||be.isGfnMicButtonDisabled),r.xp6(1),r.Q6J("ngIf",!be.isGfnMicBlocked&&!be.isGfnMicButtonDisabled)}}function Ye(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"nv-item-button",34),r.NdJ("clicked",function(){return r.CHM(be),r.oxw().openVirtualKeyboard()}),r.qZA()}if(2&ze){const be=r.oxw();r.Q6J("titleString",be.virtualKbTitleString)}}function rt(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"nv-main-menu-item",38),r.TgZ(1,"nv-rotary",29),r.NdJ("selectionChanged",function(Ot){return r.CHM(be),r.oxw(2).onChangeStats(Ot)}),r.qZA(),r.qZA()}if(2&ze){const be=r.oxw(2);r.Q6J("subTitle",be.statsHotkeyText)("subTitleArg",r.VKq(6,Me,be.statsHotkeyArg))("subtitleVisible",be.isKBMGamesAllowed),r.xp6(1),r.Q6J("input",be.statsRotaryOptions)("initialState",be.statsRotatyState)("width",be.rotaryWidth)}}function ge(ze,_t){if(1&ze){const be=r.EpF();r.TgZ(0,"nv-item-button",39),r.NdJ("clicked",function(){return r.CHM(be),r.oxw(2).exitFullScreen()}),r.qZA()}}function Ve(ze,_t){if(1&ze){const be=r.EpF();r.ynx(0),r._UZ(1,"nv-divider"),r.YNc(2,rt,2,8,"nv-main-menu-item",35),r.YNc(3,ge,1,0,"nv-item-button",36),r.TgZ(4,"nv-item-button",37),r.NdJ("clicked",function(){return r.CHM(be),r.oxw().quitGfn()}),r.qZA(),r.BQk()}if(2&ze){const be=r.oxw();r.xp6(2),r.Q6J("ngIf",be.isStatisticsEnabled),r.xp6(1),r.Q6J("ngIf",be.isBrowserPlatform&&!be.tvMode),r.xp6(1),r.Q6J("titleArg",r.VKq(5,Me,be.gfnTitle))("subTitle",be.gfnQuitHotkey)("subtitleVisible",be.isKBMGamesAllowed)}}let ve=(()=>{class ze{constructor(be,pt,Ot,Kt,nn,tn,Mn,Un,_n,xn,Fn,yt,Ht,Ue,Mt,ft,st,Et,Ee){var dt;if(this.loggingService=be,this.route=pt,this.navigationService=Ot,this.hotkeyService=Kt,this.galleryService=nn,this.shadowPlayService=tn,this.webcamService=Mn,this.nvcameraService=Un,this.oscDisplayService=_n,this.igoConfig=xn,this.appBarService=Fn,this.gfnInfoService=yt,this.osService=Ht,this.injector=Ue,this.gfnBroadcastService=Mt,this.featureSupportService=ft,this.microphoneService=st,this.statisticsService=Et,this.clientInputService=Ee,this.destroy$=new a.xQ,this.screenshotHotkey="",this.mrHotkey="",this.mrHotkeyText="",this.mrTime="",this.isRecording=!1,this.irToggleHotkey="",this.irSaveHotkey="",this.gfStyleToggleHotkey="None",this.minSeconds=15,this.irMin="",this.irSec="",this.irSeconds=0,this.irState=o.YQ.off,this.isIROn=!1,this.isSaveEnabled=!1,this.irHotkey="",this.irHotkeyText="",this.micHotkey="",this.micHotkeyPTT="",this.micHotkeyText="",this.micHotkeyArg="",this.statsHotkey="",this.statsHotkeyText="",this.statsHotkeyArg="",this.imeHotkeyText="",this.imeHotkeyArg="",this.imeEnabled=!1,this.imeHotkey="",this.camHotkeyText="",this.camHotkeyArg="",this.disableRecordSpecialCase=G.Kk.RECORD_SPECIAL_CASE_4K,this.recordSpecialCase=G.Kk,this.photoMode=!1,this.photoModeDisabled=!1,this.gfnBroadcast=!1,this.directBroadcast=!1,this.gfnBroadcstHotkey="",this.photoModeHotkey="",this.gameFilter=!1,this.gameFilterDisabled=!1,this.lowDiskSpace=!1,this.enableLanguage=!1,this.initialLangIndex=5,this.gfnIntegration=!1,this.timeLeftInStream=void 0,this.gfnTitle="",this.gfnQuitHotkey="",this.micRotaryOptions=["commonLabels.Off","commonLabels.On","mainMenu.PushToTalk"],this.micState=o.rQ.off,this.micRotaryInit=0,this.showMicRotary=!1,this.useMicSwitch=!1,this.micSwitchState=!1,this.micCount=0,this.rotaryWidth=132,this.webcamRotaryOptions=["commonLabels.Off","mainMenu.CaptureOnly","mainMenu.PreviewCapture"],this.webcamRotaryInit=0,this.statsRotaryOptions=["commonLabels.Off","settings.stats.Standard","settings.stats.Compact"],this.statsRotatyState=o.Tj.Off,this.throttleDuration=500,this.showRecent=!1,this.bcHotkey="",this.bcSubtitle="",this.showWebcamControls=!1,this.showWebcamRotary=!1,this.webcamHotkey="",this.isGalleryEnabled=!1,this.isShadowPlayEnabled=!1,this.isWebcamEnabled=!1,this.isBrowserPlatform=!1,this.isGfnMicEnabled=!1,this.isStatisticsEnabled=!1,this.isVirtualKeyboardEnabled=!1,this.isGfnMicBlocked=!0,this.isGfnMicButtonDisabled=!1,this.gfnMicSwitchState=!1,this.isGamepadOrientedMode=!1,this.tvMode=!1,this.isKBMGamesAllowed=!0,this.virtualKbTitleString="",this.logger=this.loggingService.getLogger("MainMenu"),this.isGalleryEnabled=this.featureSupportService.isGalleryEnabled(),this.isShadowPlayEnabled=this.featureSupportService.isShadowPlayEnabled(),this.isWebcamEnabled=this.featureSupportService.isWebcamEnabled(),this.isBrowserPlatform=m.ng.isBrowserPlatform(),this.isStatisticsEnabled=this.featureSupportService.isStatisticsEnabled(),this.isVirtualKeyboardEnabled=this.featureSupportService.isVirtualKeyboardEnabled(),this.isGamepadOrientedMode=ft.isGamepadOrientedMode(),this.isKBMGamesAllowed=ft.isKeyboardMouseGamesAllowed(),this.virtualKbTitleString="mainMenu.VirtualKeyboard",this.appBarService.setAll({title:"GFN"===xn.branding?"product.GFN":"product.NVIDIAGFE",icons:[{id:"closeIgo",icon:"close",tooltip:"tooltips.Close"},{id:"settings",icon:"settings",tooltip:"tooltips.Settings"}]}),this.gfnIntegration="GFN"===xn.branding,this.gfnIntegration){const kt=this.injector.get(I.VKt);this.tvMode=!!(null===(dt=null==kt?void 0:kt.featureEnablement)||void 0===dt?void 0:dt.tvMode),this.useMicSwitch=!0,this.rotaryWidth=68,this.gfnTitle=this.gfnInfoService.getStreamingTitle(),this.osService.getQuitHotkey().pipe((0,l.R)(this.destroy$)).subscribe(Zt=>{this.logger.info("Quit Game hotkey: ",Zt),this.gfnQuitHotkey=Zt===m.zl[0]?"":Zt}),this.appBarService.addIcon({id:"feedback",icon:"feedback",tooltip:"tooltips.Feedback"}),this.clientInputService.isImeEnabled$.pipe((0,l.R)(this.destroy$)).subscribe(Zt=>{this.logger.info("Checking ClientIME enablement value ",Zt),this.imeEnabled=Zt},Zt=>{this.logger.info("Error getting ClientIME enablement value, defaulting to false",Zt),this.imeEnabled=!1}),this.gfnInfoService.getRecordSpecialCase().pipe((0,l.R)(this.destroy$)).subscribe(Zt=>{this.logger.info("disableRecordSpecialCase mode: ",Zt),this.disableRecordSpecialCase=Zt})}else this.disableRecordSpecialCase=G.Kk.RECORD_SPECIAL_CASE_NONE;this.appBarService.actionClicked$.pipe((0,l.R)(this.destroy$)).subscribe(kt=>{"settings"===kt?this.onSettingsClicked():"feedback"===kt&&this.gfnInfoService.sendFeeback(this.tc)})}ngOnInit(){if(this.isGalleryEnabled&&(this.showRecent=this.galleryService.hasAnyEntries()&&!this.galleryService.lowDiskSpaceValue()),this.featureSupportService.isDirectBroadcastEnabled()&&(this.directBroadcast=this.gfnBroadcastService.DirectBroadcastSupported()),this.igoConfig.GFNCefClient?(this.featureSupportService.isNvcameraEnabled()&&(this.nvcameraService.isFeatureAvailable().pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.photoMode=be.photoModeSupport,this.gameFilter=be.gameFilterSupport,this.getHotkeyAndStyleSlotString()}),this.nvcameraService.gameFilterDisable.pipe((0,l.R)(this.destroy$)).subscribe(be=>this.gameFilterDisabled=be),this.nvcameraService.photoModeDisable.pipe((0,l.R)(this.destroy$)).subscribe(be=>this.photoModeDisabled=be)),this.featureSupportService.isGfnBroadcastEnabled()&&(this.gfnBroadcast=this.gfnBroadcastService.IsGfnBroadcastEnabled&&this.gfnBroadcastService.isGfnBroadcastSupported(),this.logger.info("Checking GFN Broadcast: ",this.gfnBroadcastService.IsGfnBroadcastEnabled,this.gfnBroadcastService.isGfnBroadcastSupported()),this.gfnBroadcastService.listenGfnBroadcastEnableNotification().pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.gfnBroadcast=this.gfnBroadcastService.IsGfnBroadcastEnabled&&this.gfnBroadcastService.isGfnBroadcastSupported()}))):(this.photoMode=this.nvcameraService.isPhotoModeSupported(),this.gameFilter=this.nvcameraService.isGameFilterSupported()),this.backCallback$=this.navigationService.escapeEvent().subscribe(()=>{this.oscDisplayService.closeOSC()}),"GFE"===this.igoConfig.branding){this.showWebcamControls=!0,this.webcamInfo=this.webcamService.getWebcamInfo(),this.showWebcamRotary=this.webcamInfo.present,this.webcamRotaryInit=this.webcamInfo.enabled?this.webcamInfo.preview?2:1:0,this.logger.info("Webcam Info:",this.webcamInfo);let be=!0;this.shadowPlayService.getMicCount().pipe((0,l.R)(this.destroy$)).subscribe(pt=>{this.micCount=pt,0===pt?(this.showMicRotary=!1,this.createMicSubtitle()):this.shadowPlayService.isCurrentMicAvailable().pipe((0,l.R)(this.destroy$)).subscribe(Ot=>{this.showMicRotary=Ot,this.createMicSubtitle()})}),this.hotkeyService.getHotkeyString(u.Yk.Share.Shareserver.HotkeyEnum.CameraToggle).pipe((0,l.R)(this.destroy$)).subscribe(pt=>{this.logger.info("Webcam hotkey: ",pt),this.webcamHotkey=pt,this.showWebcamRotary&&this.createCameraSubtitle()}),this.webcamService.getWebcamState().pipe((0,l.R)(this.destroy$)).subscribe(pt=>{be||(this.webcamRotaryInit=pt?this.webcamInfo.preview?2:1:0),be=!1}),this.shadowPlayService.getCAMDeviceState().pipe((0,l.R)(this.destroy$)).subscribe(pt=>{(pt===o.uP.plugged_in||pt===o.uP.plugged_out)&&(this.showWebcamRotary=pt===o.uP.plugged_in,this.webcamInfo.present=pt===o.uP.plugged_in,this.createCameraSubtitle())})}this.isGalleryEnabled&&(this.galleryService.lowDiskSpaceEvent().pipe((0,l.R)(this.destroy$)).subscribe(be=>{be!==this.lowDiskSpace&&(this.showRecent=this.galleryService.hasAnyEntries()&&!be),this.lowDiskSpace=be,this.logger.info("The disk space is low: ",be)}),this.galleryService.recentEvent().pipe((0,l.R)(this.destroy$)).subscribe(()=>{this.showRecent=this.galleryService.hasAnyEntries()&&!this.lowDiskSpace})),this.hotkeyService.getHotkeyString(u.Yk.Share.Shareserver.HotkeyEnum.Screenshot).pipe((0,l.R)(this.destroy$)).subscribe(be=>{G.Kk.RECORD_SPECIAL_CASE_PLAYTEST===this.disableRecordSpecialCase?this.screenshotHotkey="mainMenu.DisabledForPlaytest":(this.logger.info("Screenshot hotkey: ",be),this.screenshotHotkey=be)}),this.hotkeyService.getHotkeyString(u.Yk.Share.Shareserver.HotkeyEnum.NativeKeyboardInputDialog).pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.logger.info("IME hotkey: ",be),this.imeHotkey=be}),this.disableRecordSpecialCase||(this.hotkeyService.getHotkeyString(u.Yk.Share.Shareserver.HotkeyEnum.RecordToggle).pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.logger.info("Manual record hotkey: ",be),this.mrHotkey=be}),this.hotkeyService.getHotkeyString(u.Yk.Share.Shareserver.HotkeyEnum.DVRToggle).pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.logger.info("Instant replay toggle hotkey: ",be),this.irToggleHotkey=be}),this.hotkeyService.getHotkeyString(u.Yk.Share.Shareserver.HotkeyEnum.DVRSave).pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.logger.info("Instant replay save hotkey: ",be),this.irSaveHotkey=be})),this.hotkeyService.getHotkeyString(u.Yk.Share.Shareserver.HotkeyEnum.MicToggle).pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.logger.info("Microphone hotkey: ",be),this.micHotkey=be}),this.hotkeyService.getHotkeyString(u.Yk.Share.Shareserver.HotkeyEnum.PTT).pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.logger.info("Microphone PTT hotkey: ",be),this.micHotkeyPTT=be}),this.hotkeyService.getHotkeyString(u.Yk.Share.Shareserver.HotkeyEnum.BroadcastToggle).pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.logger.info("Broadcast toggle hotkey: ",be),this.bcHotkey=be}),this.hotkeyService.getHotkeyString(u.Yk.Share.Shareserver.HotkeyEnum.StatisticsToggle).pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.logger.info("Statistics hotkey: ",be),this.statsHotkey=be,this.statsHotkeyText="mainMenu.ChangeFormat",this.statsHotkeyArg=this.statsHotkey}),this.isShadowPlayEnabled&&(this.shadowPlayService.getIRState().pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.irState=be,this.setIRHotkeyFormat()}),this.shadowPlayService.getMRState().pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.isRecording=be,this.setMRHotkeyFormat()}),(0,s.D)([this.shadowPlayService.getInstantReplayRunningStatus(),this.shadowPlayService.getInstantReplayMaxLength()]).pipe((0,l.R)(this.destroy$)).subscribe(([be,pt])=>{this.irState=be?o.YQ.recording:this.irState,this.irSeconds=void 0===pt?this.minSeconds:pt,this.setIRHotkeyFormat()})),(0,p.F)(500).pipe((0,l.R)(this.destroy$)).subscribe(()=>{this.isShadowPlayEnabled&&(this.mrTime=this.shadowPlayService.mrStartTime?this.getFormattedTime(this.shadowPlayService.mrStartTime):""),this.gfnIntegration&&this.updateStreamingTimeLeft()}),this.setupIME(),this.featureSupportService.isGfnMicrophoneEnabled().pipe((0,t.q)(1)).subscribe(be=>{this.isGfnMicEnabled=be,be?this.setupGfnMicrophone():this.isShadowPlayEnabled&&(this.setupMic(),this.shadowPlayService.getMICState().pipe((0,l.R)(this.destroy$)).subscribe(pt=>{this.micState=pt,this.micSwitchState=pt!==o.rQ.off,this.micRotaryInit=this.getMicState(pt),this.createMicSubtitle()}),this.shadowPlayService.getMICDeviceState().pipe((0,l.R)(this.destroy$)).subscribe(pt=>{(pt===o.uP.plugged_in||pt===o.uP.plugged_out)&&(this.showMicRotary=pt===o.uP.plugged_in,this.createMicSubtitle())}))}),this.gfnIntegration&&this.updateStreamingTimeLeft(),this.statisticsService.statisticsHotkeyPressed().pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.statsRotatyState=be}),this.statsRotatyState=this.statisticsService.getStatsState()}ngOnDestroy(){this.backCallback$&&this.backCallback$.unsubscribe(),this.destroy$.next(!0),this.destroy$.unsubscribe()}getHotkeyAndStyleSlotString(){this.hotkeyService.getHotkeyString(u.Yk.Share.Shareserver.HotkeyEnum.OpenAnsel).pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.logger.info("Photo mode hotkey: ",be),this.photoModeHotkey=be}),this.hotkeyService.getHotkeyString(u.Yk.Share.Shareserver.HotkeyEnum.ConnectGfnBroadcastToggle).pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.logger.info("Gfn Broadcast hotkey: ",be),this.gfnBroadcstHotkey=be}),this.nvcameraService.getHotkeyStringForActiveSlot().pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.gfStyleToggleHotkey=be}),this.hotkeyService.listen(u.Yk.Share.Shareserver.HotkeyEnum.FreeStyleToggleStyle1).pipe((0,l.R)(this.destroy$),(0,w.p)(this.throttleDuration),(0,h.w)(be=>this.hotkeyService.getHotkeyString(be))).subscribe(be=>{this.gfStyleToggleHotkey=be}),this.hotkeyService.listen(u.Yk.Share.Shareserver.HotkeyEnum.FreeStyleToggleStyle2).pipe((0,l.R)(this.destroy$),(0,w.p)(this.throttleDuration),(0,h.w)(be=>this.hotkeyService.getHotkeyString(be))).subscribe(be=>{this.gfStyleToggleHotkey=be}),this.hotkeyService.listen(u.Yk.Share.Shareserver.HotkeyEnum.FreeStyleToggleStyle3).pipe((0,l.R)(this.destroy$),(0,w.p)(this.throttleDuration),(0,h.w)(be=>this.hotkeyService.getHotkeyString(be))).subscribe(be=>{this.gfStyleToggleHotkey=be})}createCameraSubtitle(){this.webcamInfo.present?(this.camHotkeyText="mainMenu.Toggle",this.camHotkeyArg=this.webcamHotkey):(this.camHotkeyText="mainMenu.NotAvailable",this.camHotkeyArg="")}setIRHotkeyFormat(){const be=this.irState===o.YQ.recording;if(this.isIROn=this.irState!==o.YQ.off,this.isSaveEnabled=this.irState===o.YQ.recording,this.irHotkey=be?this.irSaveHotkey:this.irToggleHotkey,this.irSec="",this.irMin="",this.disableRecordSpecialCase)this.irHotkeyText=G.Kk.RECORD_SPECIAL_CASE_PLAYTEST===this.disableRecordSpecialCase?"mainMenu.DisabledForPlaytest":"mainMenu.DisabledFor1440";else if(be)if(this.irSeconds<60)this.irSec=this.irSeconds.toString(),this.irHotkeyText="mainMenu.SaveLastSecs";else{const pt=Math.floor(this.irSeconds/60);this.irSec=(this.irSeconds-60*pt).toString(),this.irMin=pt.toString(),this.irHotkeyText="mainMenu.SaveLast"}else this.irHotkeyText="mainMenu.Toggle"}setMRHotkeyFormat(){this.mrHotkeyText=this.disableRecordSpecialCase?G.Kk.RECORD_SPECIAL_CASE_PLAYTEST===this.disableRecordSpecialCase?"mainMenu.DisabledForPlaytest":"mainMenu.DisabledFor1440":this.isRecording?"mainMenu.StopAndSave":"mainMenu.Start"}onBCStateChange(be){this.bcState=be,this.bcSubtitle=be===o.Oh.active||be===o.Oh.paused?"mainMenu.StopBroadcast":""}getFormattedTime(be){return this.formatTime(be,Date.now())}formatTime(be,pt){const Ot=Math.max(0,Math.floor((pt-be)/1e3));return x.utc(1e3*Ot).format("HH:mm:ss")}updateStreamingTimeLeft(){const be=this.gfnInfoService.getStreamingEndTime();be>0&&(this.timeLeftInStream=this.formatTime(Date.now(),be))}onScreenshotClicked(){this.logger.info("Screenshot button clicked"),this.shadowPlayService.captureScreenshot()}onIMEClicked(){this.oscDisplayService.closeOSC(c.Y.IGO),this.clientInputService.initImeInput(f.rW.Igo)}onClickIRStart(){this.logger.info("IR Start clicked"),this.shadowPlayService.enableInstantReplay()}onClickIRSave(){this.logger.info("IR Save clicked"),this.shadowPlayService.saveIR()}onClickIRStop(){this.logger.info("IR Stop clicked"),this.shadowPlayService.disableInstantReplay()}onToggleIR(be){this.logger.info("on toggle IR: ",be.checked),be.checked?this.onClickIRStart():this.onClickIRStop()}onClickManualRecord(){this.logger.info("Manual Record clicked"),this.isRecording?this.shadowPlayService.stopAndSaveManualRecord():this.shadowPlayService.startManualRecord()}onRotaryMic(be){this.logger.info("Microphone Rotary: ",be);const pt=this.getMicRotaryInit(be);this.micState=pt,this.micRotaryInit=be,this.createMicSubtitle(),this.shadowPlayService.setMicMode(pt)}onToggleMicSwitch(be){const pt=be.checked?o.rQ.on:o.rQ.off;this.micSwitchState=be.checked,this.micState=pt,this.createMicSubtitle(),this.shadowPlayService.setMicMode(pt)}onToggleMicrophone(){this.microphoneService.toggleMicrophone()}onChangeStats(be){this.statisticsService.statisticsStateChanged(be)}getMicRotaryInit(be){switch(be){case 0:default:return o.rQ.off;case 1:return o.rQ.on;case 2:return o.rQ.ptt}}getMicState(be){switch(be){case o.rQ.off:default:return 0;case o.rQ.on:return 1;case o.rQ.ptt:return 2}}onBroadcastClicked(){this.logger.info("Broadcast clicked"),this.shadowPlayService.handlePrivacyAndAvailability("br").pipe((0,l.R)(this.destroy$)).subscribe(be=>{!be||this.navigationService.navigate(["../content/share"],{relativeTo:this.route.parent,skipLocationChange:!0},o.wB.broadcast)})}onChangeWebcam(be){this.logger.info("Webcam changed: ",be),this.webcamRotaryInit=be,this.webcamService.enableWebcam(0!==be),this.webcamService.queueWebcamPreview(2===be)}onGalleryClicked(){this.logger.info("Gallery clicked"),this.navigationService.navigate(["../gallery"],{relativeTo:this.route.parent,skipLocationChange:!0},o.wB.galleryMain)}onSettingsClicked(){this.logger.info("Settings clicked"),this.navigationService.navigate(["../settings/settings"],{relativeTo:this.route.parent,skipLocationChange:!0},o.wB.settings)}onPhotoModeClicked(){this.logger.info("Photo mode clicked"),this.nvcameraService.launchPhotoModeMenu(o.$u.Ui)}onGfnBroadcastClicked(){this.logger.info("Gfn Broadcast clicked"),this.navigationService.navigate(["../gfn-broadcast"],{relativeTo:this.route.parent,skipLocationChange:!0},o.wB.gfnBroadcast)}onDirectBroadcastClicked(){this.logger.info("Gfn Direct Broadcast clicked"),this.navigationService.navigate(["../gfn-broadcast/direct-broadcast"],{relativeTo:this.route.parent,skipLocationChange:!0},o.wB.gfnBroadcast)}onGamesFilterClicked(){this.logger.info("Games Filter mode clicked"),this.nvcameraService.launchGameFilterMenu(o.$u.Ui)}createGfnMicSubtitle(){this.isGfnMicBlocked?(this.micHotkeyText=m.ng.isCefPlatform()?"mainMenu.MicBlockedMessage":"mainMenu.MicDisabled",this.micHotkeyArg=""):this.isGfnMicButtonDisabled?(this.micHotkeyText="mainMenu.MicNotFoundMessage",this.micHotkeyArg=""):(this.micHotkeyText="mainMenu.Toggle",this.micHotkeyArg=this.micHotkey)}createMicSubtitle(){this.showMicRotary||this.useMicSwitch?(this.micHotkeyText="mainMenu.Toggle",this.micHotkeyArg=this.micHotkey,this.micState===o.rQ.ptt&&(this.micHotkeyText="mainMenu.ActivatePushToTalk",this.micHotkeyArg=this.micHotkeyPTT)):(this.micHotkeyText=0===this.micCount?"mainMenu.NotAvailable":"mainMenu.Disabled",this.micHotkeyArg="")}setupGfnMicrophone(){this.microphoneService.currentMicState$.pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.isGfnMicBlocked=be===g.tn.PermissionPending||be===g.tn.PermissionDenied,this.isGfnMicButtonDisabled=be===g.tn.NoMicFound,this.gfnMicSwitchState=be===g.tn.Unmuted,this.logger.info("Microphone blocked?",this.isGfnMicBlocked),this.logger.info("Microphone button disabled?",this.isGfnMicButtonDisabled),this.createGfnMicSubtitle()})}setupMic(){this.shadowPlayService.getMicMode().pipe((0,l.R)(this.destroy$)).subscribe(be=>{this.micState=be,this.micSwitchState=be!==o.rQ.off,this.micRotaryInit=this.getMicState(be),this.createMicSubtitle()})}setupIME(){this.imeHotkeyText="mainMenu.OpenClose",this.imeHotkeyArg=this.imeHotkey}getGameFilterSubTitle(){const be=this.nvcameraService.isAnyGameFilterSlotSelected(),pt={subTitle:"",args:{}};if(this.gameFilterDisabled)pt.subTitle="nvcamera.NotCurrentlyAvailable";else if(be){const Ot=this.nvcameraService.getCurrentModSlotName();Ot||"None"!==this.gfStyleToggleHotkey?Ot&&"None"!==this.gfStyleToggleHotkey?(pt.subTitle="nvcamera.StyleAndHotkeySubtitle",pt.args={hotkey:this.gfStyleToggleHotkey,styleName:Ot}):Ot?(pt.subTitle="nvcamera.StyleOnlySubtitle",pt.args={styleName:Ot}):"None"!==this.gfStyleToggleHotkey&&(pt.subTitle="nvcamera.HotkeyOnlySubtitle",pt.args={hotkey:this.gfStyleToggleHotkey,slotIndex:this.nvcameraService.getCurrentSlotIndex()}):(pt.subTitle="nvcamera.Style",pt.args={arg:this.nvcameraService.getCurrentSlotIndex()})}else pt.subTitle="nvcamera.None";return pt}getPhotoModeSubTitle(){return this.photoModeDisabled?"nvcamera.NotCurrentlyAvailable":this.photoModeHotkey}getGfnBroadcastSubTitle(){return this.gfnBroadcstHotkey}quitGfn(){this.gfnInfoService.quitGfnStreaming()}exitFullScreen(){this.gfnInfoService.exitFullScreen()}openVirtualKeyboard(){this.clientInputService.toggleInputUI(!0)}}return ze.\u0275fac=function(be){return new(be||ze)(r.Y36(m.ed),r.Y36(i.gz),r.Y36(o.f5),r.Y36(o.y1),r.Y36(o.rj),r.Y36(o.dS),r.Y36(o.cz),r.Y36(o.En),r.Y36(o.vU),r.Y36(o.gs),r.Y36(o.ad),r.Y36(o.In),r.Y36(o.HY),r.Y36(r.zs3),r.Y36(o.kq),r.Y36(o.lm),r.Y36(g.pJ),r.Y36(o._6),r.Y36(o.SD))},ze.\u0275cmp=r.Xpm({type:ze,selectors:[["app-main-menu"]],viewQuery:function(be,pt){if(1&be&&r.Gf(K,5,r.s_b),2&be){let Ot;r.iGM(Ot=r.CRH())&&(pt.tc=Ot.first)}},decls:12,vars:8,consts:[["fxLayout","column","fxFlex",""],["fxFlex","grow"],[4,"ngIf"],["fxLayout","column",4,"ngIf"],["svgIcon","keyboard","titleString","mainMenu.NativeKeyboardInputDialog",3,"subTitle","subTitleArg","subtitleVisible","clicked",4,"ngIf"],["svgIcon","keyboard",3,"titleString","clicked",4,"ngIf"],["tc",""],["icon","time","titleString","mainMenu.TimeRemaining"],[1,"font-body2","nv-item-labels"],["fxLayout","column"],["svgIcon","gallery","titleString","gallery.Gallery",3,"chevron","disabled","clicked"],["icon","record","titleString","mainMenu.ManualRecord",3,"subTitle","subTitleArg","subtitleVisible","disabled"],["class","font-body2 timer-spacing",4,"ngIf"],["fxFlex","none",1,"nv-horizontal-gap-24"],[3,"svgIcon","tooltip","disabled","clicked"],[1,"nv-gap-16"],["icon","replay","titleString","mainMenu.InstantReplay",3,"subTitle","subTitleArg","subtitleVisible","disabled"],["svgIcon","save","tooltip","tooltips.Save",3,"disabled","clicked",4,"ngIf"],["svgIcon","image","titleString","mainMenu.Screenshot",3,"subTitle","subtitleVisible","disabled","clicked"],["icon","mic","titleString","mainMenu.Microphone",3,"subTitle","subTitleArg","subtitleVisible",4,"ngIf"],[1,"font-body2","timer-spacing"],["svgIcon","save","tooltip","tooltips.Save",3,"disabled","clicked"],["svgIcon","photo_camera","titleString","nvcamera.PhotoMode",3,"chevron","subTitle","subtitleVisible","disabled","clicked"],["svgIcon","broadcast","titleString","mainMenu.Broadcast",3,"chevron","subTitle","subtitleVisible","clicked"],["svgIcon","freestyle","titleString","nvcamera.GameFilter",3,"chevron","subTitle","subTitleArg","subtitleVisible","disabled","clicked"],["icon","mic","titleString","mainMenu.Microphone",3,"subTitle","subTitleArg","subtitleVisible"],["class","mic-spacing",3,"checked","change",4,"ngIf"],[3,"input","initialState","width","selectionChanged",4,"ngIf"],[1,"mic-spacing",3,"checked","change"],[3,"input","initialState","width","selectionChanged"],["svgIcon","keyboard","titleString","mainMenu.NativeKeyboardInputDialog",3,"subTitle","subTitleArg","subtitleVisible","clicked"],["icon","videocam","titleString","mainMenu.Webcam",3,"subTitle","subTitleArg","subtitleVisible"],["svgIcon","mic","titleString","mainMenu.Microphone",3,"subTitle","disabled","clicked",4,"ngIf"],["svgIcon","mic","titleString","mainMenu.Microphone",3,"subTitle","disabled","clicked"],["svgIcon","keyboard",3,"titleString","clicked"],["icon","analytics","titleString","settings.stats.Statistics",3,"subTitle","subTitleArg","subtitleVisible",4,"ngIf"],["svgIcon","fullscreen_exit","titleString","mainMenu.ExitFullscreen",3,"clicked",4,"ngIf"],["svgIcon","logout","titleString","mainMenu.QuitGame",3,"titleArg","subTitle","subtitleVisible","clicked"],["icon","analytics","titleString","settings.stats.Statistics",3,"subTitle","subTitleArg","subtitleVisible"],["svgIcon","fullscreen_exit","titleString","mainMenu.ExitFullscreen",3,"clicked"]],template:function(be,pt){1&be&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.YNc(2,Z,5,1,"ng-container",2),r.YNc(3,W,3,3,"div",3),r.YNc(4,Se,16,26,"div",2),r.YNc(5,Ge,1,5,"nv-item-button",4),r.YNc(6,Tt,4,6,"ng-container",2),r.YNc(7,xt,3,2,"ng-container",2),r.YNc(8,Ye,1,1,"nv-item-button",5),r.qZA(),r.YNc(9,Ve,5,7,"ng-container",2),r._UZ(10,"div",null,6),r.qZA()),2&be&&(r.xp6(2),r.Q6J("ngIf",pt.gfnIntegration&&pt.timeLeftInStream),r.xp6(1),r.Q6J("ngIf",pt.isGalleryEnabled),r.xp6(1),r.Q6J("ngIf",pt.isShadowPlayEnabled),r.xp6(1),r.Q6J("ngIf",pt.imeEnabled&&pt.isKBMGamesAllowed),r.xp6(1),r.Q6J("ngIf",pt.isWebcamEnabled&&pt.showWebcamControls),r.xp6(1),r.Q6J("ngIf",pt.isGfnMicEnabled),r.xp6(1),r.Q6J("ngIf",pt.isVirtualKeyboardEnabled),r.xp6(1),r.Q6J("ngIf",pt.gfnIntegration))},directives:[E.xw,E.yH,n.O5,_,F.n,V.n,b.i,ye,ue.Rr,X.xZ,j.T],styles:[".nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-error[_ngcontent-%COMP%]{color:#e02828}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.timer-spacing[_ngcontent-%COMP%]{padding:8px 0}.mic-spacing[_ngcontent-%COMP%]{padding:8px}.main-item-height[_ngcontent-%COMP%]{height:60px}[_nghost-%COMP%]{padding:24px}"]}),ze})();var Ze=e(44211);const Ie=[{path:"",component:ve,data:{level:0}},{path:"center-view",component:Ze.LD,outlet:"centerPane",children:[{path:"preview",component:Ze.BP}]}];let $e=(()=>{class ze{}return ze.\u0275fac=function(be){return new(be||ze)},ze.\u0275mod=r.oAB({type:ze}),ze.\u0275inj=r.cJS({imports:[[n.ez,D.o9,T.m,y.Q,i.Bz.forChild(Ie),(0,m.zv)()]]}),ze})()},51:(He,de,e)=>{"use strict";e.d(de,{Q:()=>O});var n=e(1707),i=e(42118),D=e(80181),m=e(365),y=e(70781),T=e(28417),r=e(80221),a=e(64106),s=e(1124),p=e(52529),l=e(37007),t=e(32080),w=e(15644),h=e(1625),u=e(55519),o=e(74058),f=e(22213),c=e(42791),g=e(68456),I=e(50298),G=e(24298),x=e(51606),E=e(22573),P=e(2316);const v=[n.u5,y.ot,i.QW,T.ie,r.Tx,a.g0,D.Cq,m.Cv,s.t,p.Ps,l.LD,t.rP,w.Fk,u.c,c.Cl,h.To,o.p9,f.Is,g.ZX,I.AV,G.si,x.rt,E.hp];let O=(()=>{class C{}return C.\u0275fac=function(F){return new(F||C)},C.\u0275mod=P.oAB({type:C}),C.\u0275inj=P.cJS({imports:[[n.u5,...v],n.u5,y.ot,i.QW,T.ie,r.Tx,a.g0,D.Cq,m.Cv,s.t,p.Ps,l.LD,t.rP,w.Fk,u.c,c.Cl,h.To,o.p9,f.Is,g.ZX,I.AV,G.si,x.rt,E.hp]}),C})()},16661:(He,de,e)=>{"use strict";e.r(de),e.d(de,{NvcameraModule:()=>Ln});var n=e(54364),i=e(71258),D=e(365),m=e(66660),y=e(6484),T=e(25816),r=e(51),a=e(79441),s=e(41618),p=e(22663),l=e(94377),t=e(2316),w=e(58283),h=e(30582),u=e(32080),o=e(84622),f=e(36914),c=e(1707),g=e(52529);function I(ht,Vt){1&ht&&(t.TgZ(0,"div",6),t.TgZ(1,"span",7),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",8),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"div",9),t.TgZ(8,"span",7),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"span",8),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA()),2&ht&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"nvcamera.PhotoMode")),t.xp6(3),t.Oqu(t.lcZ(6,6,"nvcamera.PhotoModeHelper")),t.xp6(4),t.Oqu(t.lcZ(10,8,"nvcamera.GameFilter")),t.xp6(3),t.Oqu(t.lcZ(13,10,"nvcamera.GameFilterHelper")))}function G(ht,Vt){1&ht&&(t.TgZ(0,"div",10),t._UZ(1,"mat-icon",11),t.TgZ(2,"div",12),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&ht&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"notification.RestartGame")))}let x=(()=>{class ht{constructor(ne,Be,vt,Ct){this.nvCameraService=ne,this.router=Be,this.route=vt,this.loggingService=Ct,this.restartRequired=!1,this.showError=!1,this.toggled=new t.vpe,this.logger=this.loggingService.getLogger("GameFilter")}ngOnInit(){this.captureEnhanceState=this.nvCameraService.statusOfCaptureEnhance,this.restartState=this.nvCameraService.restartRequired,this.showError="true"===this.route.snapshot.params.showError}onToggle(ne){this.nvCameraService.setSwitchForNvCameraSettings(this.captureEnhanceState).subscribe(),this.toggled.emit({captureEnhanceState:this.captureEnhanceState})}}return ht.\u0275fac=function(ne){return new(ne||ht)(t.Y36(l.En),t.Y36(i.F0),t.Y36(i.gz),t.Y36(y.ed))},ht.\u0275cmp=t.Xpm({type:ht,selectors:[["igo-capture-enhance"]],outputs:{toggled:"toggled"},decls:8,vars:6,consts:[["fxLayOut","column","fxFlex",""],["fxLayout","row","fxLayoutAlign","start center",1,"limit-padding"],["fxFlex","grow",1,"font-sub1"],["fxFlex","none","md-invert","","nvHoverFocus","",3,"ngModel","ngModelChange","change"],["class","nv-label","fxLayout","column",4,"ngIf"],["class","font-body2 limit-padding","fxLayout","row",4,"ngIf"],["fxLayout","column",1,"nv-label"],[1,"font-sub1","nv-label"],[1,"font-body2","limit-padding"],["fxFlex","none",1,"nv-gap-24"],["fxLayout","row",1,"font-body2","limit-padding"],["svgIcon","info",1,"restart-icon","icon-alert"],[1,"nv-label","limit-padding"]],template:function(ne,Be){1&ne&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-slide-toggle",3),t.NdJ("ngModelChange",function(Ct){return Be.captureEnhanceState=Ct})("change",function(Ct){return Be.onToggle(Ct)}),t.qZA(),t.qZA(),t.YNc(6,I,14,12,"div",4),t.YNc(7,G,5,3,"div",5),t.qZA()),2&ne&&(t.xp6(3),t.Oqu(t.lcZ(4,4,"nvcamera.CaptureEnhance")),t.xp6(2),t.Q6J("ngModel",Be.captureEnhanceState),t.xp6(1),t.Q6J("ngIf",!Be.captureEnhanceState),t.xp6(1),t.Q6J("ngIf",Be.restartState&&Be.captureEnhanceState&&!Be.showError))},directives:[h.yH,h.xw,h.Wh,u.Rr,o.xZ,f.X,c.JJ,c.On,n.O5,g.Hw],pipes:[w.X$],styles:[".global-switch[_ngcontent-%COMP%]{height:40px;width:400px}.restart-icon[_ngcontent-%COMP%]{padding:6px}.limit-padding[_ngcontent-%COMP%]{padding:8px 0}"]}),ht})();var E=e(34663),P=e(89460),v=e(48919),O=e(9442),C=e(78819),_=e(34361),F=e(81134),V=e(56816),b=e(18293),B=e(86828),U=e(98636),A=e(80221),S=e(1625),Y=e(3794),se=e(70781),fe=e(9082);let $=(()=>{class ht{constructor(ne,Be,vt){this.nvCameraService=ne,this.loggingService=Be,this.cdr=vt,this.logger=this.loggingService.getLogger("FilterSlider")}onSliderMoved(ne){this.control.currentUIValue!==ne.value&&(this.control.currentUIValue=ne.value,this.onSliderValueChanged())}onSliderValueChanged(){this.cdr.detectChanges(),this.control.currentValue=this.nvCameraService.normalizeSliderValue(this.control.currentUIValue,this.control.uiMinValue,this.control.uiMaxValue,this.control.minValue,this.control.maxValue),this.filter.controls[this.control.id].currentValueArray[this.control.dimension]=this.control.currentValue,this.nvCameraService.setFilterAttribute(this.filter.id,this.filter.stackIdx,this.control.id,l.DU.slider,this.control.dataType,this.filter.controls[this.control.id].currentValueArray).subscribe(ne=>{this.logger.info("slider change successful = "+ne)},ne=>{this.logger.error("slider change failed = "+JSON.stringify(ne))})}}return ht.\u0275fac=function(ne){return new(ne||ht)(t.Y36(l.En),t.Y36(y.ed),t.Y36(t.sBO))},ht.\u0275cmp=t.Xpm({type:ht,selectors:[["igo-filter-slider"]],inputs:{control:"control",filter:"filter"},decls:6,vars:6,consts:[["fxLayout","column"],["fxLayout","row"],["fxFlex","grow"],["fxFlex","none"],["fxFlex","","valueEntry","true","formatTextAs","Decimal",3,"min","max","step","value","default","input","valueChange"]],template:function(ne,Be){1&ne&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"nv-hig-slider",4),t.NdJ("input",function(Ct){return Be.onSliderMoved(Ct)})("valueChange",function(){return Be.onSliderValueChanged()}),t.qZA(),t.qZA(),t.qZA()),2&ne&&(t.xp6(3),t.Oqu(Be.control.displayName),t.xp6(2),t.Q6J("min",Be.control.uiMinValue)("max",Be.control.uiMaxValue)("step",Be.control.uiStepSize)("value",Be.control.currentUIValue)("default",Be.control.defaultValue))},directives:[h.xw,h.yH,fe.Q],encapsulation:2}),ht})();var ae=e(85136),me=e(15644);function ye(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"mat-radio-button",2),t.NdJ("change",function(){const Ct=t.CHM(ne).index;return t.oxw().onChange(Ct)}),t._uU(1),t.qZA()}if(2&ht){const ne=Vt.$implicit;t.Q6J("value",ne),t.xp6(1),t.hij(" ",ne," ")}}let ue=(()=>{class ht{constructor(){this.disable=!1,this.changedSelection=new t.vpe}ngOnInit(){this.setEntry()}onChange(ne){this.selection!==ne&&(this.selection=ne,this.changedSelection.emit(ne),this.setEntry())}setEntry(){this.input&&this.input.length>0?((this.selection<0||this.selection>=this.input.length)&&(this.selection=0),this.entry=this.input[this.selection],this.disable=!!this.disabled||this.input.length<2):(this.entry="",this.disable=!0)}}return ht.\u0275fac=function(ne){return new(ne||ht)},ht.\u0275cmp=t.Xpm({type:ht,selectors:[["nv-radio-button"]],inputs:{selection:"selection",input:"input",disabled:"disabled"},outputs:{changedSelection:"changedSelection"},decls:2,vars:3,consts:[["fxLayout","column",3,"ngModel","disabled","ngModelChange"],["class","nv-radio-button",3,"value","change",4,"ngFor","ngForOf"],[1,"nv-radio-button",3,"value","change"]],template:function(ne,Be){1&ne&&(t.TgZ(0,"mat-radio-group",0),t.NdJ("ngModelChange",function(Ct){return Be.entry=Ct}),t.YNc(1,ye,2,2,"mat-radio-button",1),t.qZA()),2&ne&&(t.Q6J("ngModel",Be.entry)("disabled",Be.disable),t.xp6(1),t.Q6J("ngForOf",Be.input))},directives:[me.VQ,h.xw,c.JJ,c.On,C.i,n.sg,me.U0,o.xZ],styles:[".nv-radio-button{padding:8px}\n"],encapsulation:2}),ht})(),X=(()=>{class ht{constructor(ne,Be){this.nvCameraService=ne,this.loggingService=Be,this.logger=this.loggingService.getLogger("FilterEditbox")}editBoxChanged(ne){this.control.currentValueArray[this.control.dimension]=parseFloat(ne),this.nvCameraService.setFilterAttribute(this.filter.id,this.filter.stackIdx,this.control.id,l.DU.edit,this.control.dataType,this.control.currentValueArray).subscribe(Be=>{this.logger.info("editbox value change successful = "+Be)},Be=>{this.logger.error("editbox value change failed = "+JSON.stringify(Be))})}}return ht.\u0275fac=function(ne){return new(ne||ht)(t.Y36(l.En),t.Y36(y.ed))},ht.\u0275cmp=t.Xpm({type:ht,selectors:[["igo-filter-editbox"]],inputs:{control:"control",filter:"filter"},decls:6,vars:4,consts:[["fxLayout","row"],["fxFlex","grow"],[3,"text","placeholderText","disabled","textMaxLength","textChange"]],template:function(ne,Be){1&ne&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._uU(2),t.qZA(),t.qZA(),t.TgZ(3,"div",0),t.TgZ(4,"div",1),t.TgZ(5,"nv-input",2),t.NdJ("textChange",function(Ct){return Be.control.currentValue=Ct})("textChange",function(Ct){return Be.editBoxChanged(Ct)}),t.qZA(),t.qZA(),t.qZA()),2&ne&&(t.xp6(2),t.Oqu(Be.control.displayName),t.xp6(3),t.Q6J("text",Be.control.currentValue)("disabled",!1)("textMaxLength",100))},directives:[h.xw,h.yH,O._,C.i],encapsulation:2}),ht})();function j(ht,Vt){if(1&ht){const ne=t.EpF();t.ynx(0),t.TgZ(1,"nv-item-button",14),t.NdJ("clicked",function(){return t.CHM(ne),t.oxw().moveSelectedFiltersUp()}),t.qZA(),t.TgZ(2,"nv-item-button",15),t.NdJ("clicked",function(){return t.CHM(ne),t.oxw().moveSelectedFiltersDown()}),t.qZA(),t.TgZ(3,"nv-item-button",16),t.NdJ("clicked",function(){return t.CHM(ne),t.oxw().deleteSelectedFilters()}),t.qZA(),t.BQk()}if(2&ht){const ne=t.oxw();t.xp6(1),t.Q6J("disabled",ne.filterStack.upButtonDisabled),t.xp6(1),t.Q6J("disabled",ne.filterStack.downButtonDisabled)}}function K(ht,Vt){1&ht&&(t.ynx(0),t._UZ(1,"nv-item-button",17),t.BQk()),2&ht&&(t.xp6(1),t.Q6J("disabled",!0))}function Z(ht,Vt){if(1&ht&&(t.ynx(0),t._UZ(1,"nv-item-button",18),t.BQk()),2&ht){t.oxw();const ne=t.MAs(11);t.xp6(1),t.Q6J("matMenuTriggerFor",ne)}}function L(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(ne);const vt=t.oxw().$implicit;return t.oxw().onFilterAdded(vt)}),t.TgZ(1,"span",21),t._uU(2),t.qZA(),t.qZA()}if(2&ht){const ne=t.oxw().$implicit;t.xp6(2),t.Oqu(ne.name)}}function W(ht,Vt){if(1&ht&&(t.ynx(0),t.YNc(1,L,3,1,"button",19),t.BQk()),2&ht){const ne=Vt.$implicit;t.xp6(1),t.Q6J("ngIf",ne.isVisible)}}function te(ht,Vt){1&ht&&(t.TgZ(0,"button",29),t._UZ(1,"mat-icon",30),t.qZA())}function ie(ht,Vt){if(1&ht&&(t.TgZ(0,"div"),t._UZ(1,"igo-filter-slider",35),t.qZA()),2&ht){const ne=t.oxw().$implicit,Be=t.oxw().$implicit;t.xp6(1),t.Q6J("control",ne)("filter",Be)}}function Q(ht,Vt){if(1&ht&&(t.TgZ(0,"div",39),t._UZ(1,"igo-filter-slider",35),t.qZA()),2&ht){const ne=Vt.$implicit,Be=t.oxw(3).$implicit;t.xp6(1),t.Q6J("control",ne)("filter",Be)}}function k(ht,Vt){if(1&ht&&(t.TgZ(0,"div",36),t.TgZ(1,"div",37),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.qZA(),t.YNc(4,Q,2,2,"div",38),t.qZA()),2&ht){const ne=t.oxw().$implicit;t.xp6(3),t.Oqu(ne.displayName),t.xp6(1),t.Q6J("ngForOf",ne.subControls)}}function oe(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"div",37),t.TgZ(1,"div",2),t._uU(2),t.qZA(),t.TgZ(3,"div",5),t.TgZ(4,"mat-slide-toggle",40),t.NdJ("ngModelChange",function(vt){return t.CHM(ne),t.oxw().$implicit.currentValue=vt})("change",function(){t.CHM(ne);const vt=t.oxw().$implicit,Ct=t.oxw().$implicit;return t.oxw().onBooleanToggled(vt,Ct)}),t.qZA(),t.qZA(),t.qZA()}if(2&ht){const ne=t.oxw().$implicit;t.xp6(2),t.Oqu(ne.displayName),t.xp6(2),t.Q6J("ngModel",ne.currentValue)}}function N(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"div",41),t.TgZ(1,"div",37),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",42),t.TgZ(5,"nv-dropdown",43),t.NdJ("selectionChanged",function(vt){t.CHM(ne);const Ct=t.oxw().$implicit,gt=t.oxw().$implicit;return t.oxw().pullDownOrRadioButtonChanged(vt,Ct,gt)}),t.qZA(),t.qZA(),t.qZA()}if(2&ht){const ne=t.oxw().$implicit;t.xp6(3),t.Oqu(ne.displayName),t.xp6(2),t.Q6J("maxHeight",300)("selection",ne.currentValueArray[0])("disabled",!1)("input",ne.pullDownOrRadioButtonItems)}}function q(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"div",41),t.TgZ(1,"div",37),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",42),t.TgZ(5,"nv-radio-button",44),t.NdJ("changedSelection",function(vt){t.CHM(ne);const Ct=t.oxw().$implicit,gt=t.oxw().$implicit;return t.oxw().pullDownOrRadioButtonChanged(vt,Ct,gt)}),t.qZA(),t.qZA(),t.qZA()}if(2&ht){const ne=t.oxw().$implicit;t.xp6(3),t.Oqu(ne.displayName),t.xp6(2),t.Q6J("selection",ne.currentValueArray[0])("disabled",!1)("input",ne.pullDownOrRadioButtonItems)}}function Me(ht,Vt){if(1&ht&&(t.TgZ(0,"div",36),t._UZ(1,"igo-filter-editbox",35),t.qZA()),2&ht){const ne=t.oxw().$implicit,Be=t.oxw().$implicit;t.xp6(1),t.Q6J("control",ne)("filter",Be)}}function xe(ht,Vt){if(1&ht&&(t.TgZ(0,"div",39),t._UZ(1,"igo-filter-editbox",35),t.qZA()),2&ht){const ne=Vt.$implicit,Be=t.oxw(3).$implicit;t.xp6(1),t.Q6J("control",ne)("filter",Be)}}function ct(ht,Vt){if(1&ht&&(t.TgZ(0,"div",36),t.TgZ(1,"div",37),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.qZA(),t.YNc(4,xe,2,2,"div",38),t.qZA()),2&ht){const ne=t.oxw().$implicit;t.xp6(3),t.Oqu(ne.displayName),t.xp6(1),t.Q6J("ngForOf",ne.subControls)}}function Se(ht,Vt){if(1&ht&&(t.TgZ(0,"div",31),t.YNc(1,ie,2,2,"div",4),t.YNc(2,k,5,2,"div",32),t.YNc(3,oe,5,2,"div",33),t.YNc(4,N,6,5,"div",34),t.YNc(5,q,6,4,"div",34),t.YNc(6,Me,2,2,"div",32),t.YNc(7,ct,5,2,"div",32),t.qZA()),2&ht){const ne=Vt.$implicit;t.xp6(1),t.Q6J("ngIf","slider"===ne.controlType),t.xp6(1),t.Q6J("ngIf","multislider"===ne.controlType),t.xp6(1),t.Q6J("ngIf","boolean"===ne.controlType),t.xp6(1),t.Q6J("ngIf","pulldown"===ne.controlType),t.xp6(1),t.Q6J("ngIf","radiobutton"===ne.controlType),t.xp6(1),t.Q6J("ngIf","edit"===ne.controlType),t.xp6(1),t.Q6J("ngIf","multiedit"===ne.controlType)}}function Ge(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"mat-expansion-panel",22),t.TgZ(1,"mat-expansion-panel-header",23),t.NdJ("click",function(vt){const gt=t.CHM(ne).$implicit;return t.oxw().onFilterClicked(gt,!0,vt)}),t.TgZ(2,"div",24),t.TgZ(3,"div",25),t.NdJ("click",function(vt){const gt=t.CHM(ne).$implicit;return t.oxw().onFilterTitleClicked(gt,vt)}),t._uU(4),t.qZA(),t.YNc(5,te,2,0,"button",26),t.qZA(),t.qZA(),t.TgZ(6,"div",27),t.YNc(7,Se,8,7,"div",28),t.qZA(),t.qZA()}if(2&ht){const ne=Vt.$implicit;t.ekj("active",ne.isSelected),t.Q6J("expanded",!1),t.xp6(4),t.hij(" ",ne.name," "),t.xp6(1),t.Q6J("ngIf",ne.controls.length>0),t.xp6(2),t.Q6J("ngForOf",ne.controls)}}let St=(()=>{class ht{constructor(ne,Be,vt){this.nvCameraService=ne,this.loggingService=Be,this.cdr=vt,this.panelOpenState=!1,this.disableAnimation=!0,this.defaultFilter="",this.filterList=[],this.multiFilterInstanceAvailable=!1,this.destroy$=new a.xQ,this.logger=this.loggingService.getLogger("FilterSection")}ngOnInit(){this.nvCameraService.setLanguageAndGetFilterList().subscribe(ne=>{ne.filtersList.filtersListArray.forEach(vt=>{this.filterList.push({id:vt.id,name:vt.name,isVisible:!0})}),this.refreshFilterList(),this.filterList.length>0&&(this.defaultFilter=this.filterList[0].id),this.logger.info("initialized")},ne=>{this.logger.error("error during filter section init = "+ne),this.nvCameraService.sendFunctionalityErrorTelemetry("FunctionalError - FilterSection Init Failed:  "+ne)})}ngAfterViewInit(){setTimeout(()=>this.disableAnimation=!1)}set filterStack(ne){this._filterStack=ne,this.refreshFilterList()}get filterStack(){return this._filterStack}refreshFilterList(){this.multiFilterInstanceAvailable||this.filterList.forEach(ne=>{ne.isVisible=!0,ne.isVisible=!(this.filterStack.filters.findIndex(Be=>Be.id===ne.id)>-1)})}isFilterDropdownDisabled(){return!this.multiFilterInstanceAvailable&&this.filterStack.filters.length===this.filterList.length}onFilterAdded(ne){this.logger.info("onFilterAdded: ",ne.name);const Be=new a.xQ;this.disableUpDownButton(l.k6.Add),this.nvCameraService.setFilter(!0,this.filterStack.filters.length,ne.id,Be).subscribe(vt=>{const Ct=new l.wn(ne.id,ne.name,!1,this.filterStack.filters.length);if(this.filterStack.filters.push(Ct),!this.multiFilterInstanceAvailable){const gt=this.filterList.indexOf(ne);gt>-1&&(this.filterList[gt].isVisible=!1)}this.createFilterControls(vt,Ct),Be.next(!0),Be.complete(),this.logger.info("filter applied succesfully",ne.name)},vt=>{this.logger.error("failed to apply filter with error: ",vt),Be.next(!1),Be.complete(),this.nvCameraService.showSnack(l.pL.UpdateStyleFail)})}onFilterClicked(ne,Be,vt){this.filterStack.filterClicked(ne,Be);const Ct=this.filterStack.getIndicesOfSelection();this.disableUpDownButton(l.k6.Clicked,Ct)}onFilterTitleClicked(ne,Be){Be.stopPropagation(),this.onFilterClicked(ne,!ne.isSelected,Be)}disableUpDownButton(ne,Be){let vt=0;switch(Be&&(vt=Be.length),ne){case l.k6.MoveUp:this.filterStack.downButtonDisabled=!1;for(let Ct=0;Ct<vt;Ct++)if(this.filterStack.filters&&Be[Ct]===this.filterStack.filters.length-1){this.filterStack.upButtonDisabled=!0;break}break;case l.k6.MoveDown:this.filterStack.upButtonDisabled=!1;for(let Ct=0;Ct<vt;Ct++)if(0===Be[Ct]){this.filterStack.downButtonDisabled=!0;break}break;case l.k6.Add:this.filterStack.upButtonDisabled=!1;break;case l.k6.Clicked:vt>0&&(this.filterStack.downButtonDisabled=0===Be[0],this.filterStack.filters&&(this.filterStack.upButtonDisabled=Be[vt-1]===this.filterStack.filters.length-1))}}onBooleanToggled(ne,Be){this.cdr.detectChanges(),ne.currentValueArray=[ne.currentValue],this.nvCameraService.setFilterAttribute(Be.id,Be.stackIdx,ne.id,l.DU.boolean,ne.dataType,ne.currentValueArray).subscribe(Ct=>{this.logger.info("attribute change successful = "+Ct)},Ct=>{this.logger.error("attribute change failed = "+JSON.stringify(Ct))})}updateFilters(ne,Be){if(this.disableUpDownButton(Be,Array.from(ne)),ne.size>0){const vt=[];ne.forEach(Ct=>{vt.push(this.filterStack.filters[Ct])}),this.nvCameraService.applyFilters(vt,Be).subscribe(Ct=>{this.logger.info("Filter sequence changed successfully")},Ct=>{this.logger.error("Failed updating filter sequence, error: ",Ct),this.nvCameraService.showSnack(l.pL.UpdateStyleFail)})}}moveSelectedFiltersUp(){const ne=this.filterStack.moveSelectionUp();this.updateFilters(ne,l.k6.MoveUp)}moveSelectedFiltersDown(){const ne=this.filterStack.moveSelectionDown();this.updateFilters(ne,l.k6.MoveDown)}deleteSelectedFilters(){let ne="confirmation.confirmFilterDelete";const Be=this.filterStack.getIndicesOfSelection().length.toString();this.filterStack.getIndicesOfSelection().length>1&&(ne="confirmation.confirmFiltersDelete");let vt=!1;this.nvCameraService.showAlert("confirmation.remove",ne,Be,"confirmation.NotRightNow","confirmation.remove",!1,void 0,void 0,this.destroy$,{next:gt=>{gt===l.DX.Action1?vt=!1:gt===l.DX.Action2&&(vt=!0)},error:gt=>{this.logger.error("failed in showAlert",gt),this.nvCameraService.closeAlert()},complete:()=>{if(this.nvCameraService.closeAlert(),vt){if(!this.multiFilterInstanceAvailable){const le=this.filterStack.getSelectedFilters();le.reverse(),le.forEach(De=>{const nt_id=De.id,bt=this.filterList.findIndex(Wt=>Wt.id===nt_id);bt>-1&&(this.filterList[bt].isVisible=!0)})}const gt=this.filterStack.deleteSelection(),At=(0,_.D)(gt).pipe((0,V.b)(le=>this.nvCameraService.removeFilter(le)),(0,b.K)(le=>(this.logger.error("filter deletion failed",le),(0,F.of)(le))),(0,B.h)(1),(0,U.b)(()=>{this.nvCameraService.showSnack(l.pL.RemoveFilterSuccess,Be)}));this.nvCameraService.customizeAndShowAlert(At,l.k6.Delete)}}})}fillSingleSliderControl(ne,Be,vt,Ct){const gt=100;Ct.id=Be.id,Ct.dataType=Be.dataType,Ct.dimension=vt,Ct.measureUnit=Be.measureUnit||"",Ct.minValue=Math.round(Be.minValue[vt]*gt)/gt,Ct.maxValue=Math.round(Be.maxValue[vt]*gt)/gt,Ct.stepSize=Math.round(Be.stepSize[vt]*gt)/gt,Ct.currentValue=Math.round(Be.currentValue[vt]*gt)/gt,Ct.uiMinValue=Be.uiMinValueV1?Be.uiMinValueV1[vt]:Be.uiMinValue,Ct.uiMaxValue=Be.uiMaxValueV1?Be.uiMaxValueV1[vt]:Be.uiMaxValue,Ct.uiStepSize=Math.round(10*Be.uiStepSize[vt])/10,Ct.currentUIValue=Math.round(10*this.nvCameraService.normalizeSliderValue(Be.currentValue[vt]*gt/gt,Ct.minValue,Ct.maxValue,Ct.uiMinValue,Ct.uiMaxValue))/10,Ct.defaultValue=Math.round(10*this.nvCameraService.normalizeSliderValue(Be.defaultValue[vt]*gt/gt,Ct.minValue,Ct.maxValue,Ct.uiMinValue,Ct.uiMaxValue))/10,"int"===Be.dataType&&(Ct.stepSize=Ct.uiStepSize=1)}fillSingleEditControl(ne,Be,vt,Ct){Ct.id=Be.id,Ct.dataType=Be.dataType,Ct.dimension=vt,Ct.currentValue=Be.currentValue[vt],Ct.minValue=Be.minValue[vt],Ct.maxValue=Be.maxValue[vt]}createFilterControls(ne,Be){var vt;ne&&ne.filterDetails&&(Be.controls=[],null===(vt=ne.filterDetails.controls)||void 0===vt||vt.forEach((Ct,gt,At)=>{const le={};let De;if(le.controlType=Ct.controlType,le.displayName=Ct.displayName,le.currentValueArray=[],De=(Ct.defaultValue||Ct.currentValue||[Ct.defaultId]).length,"slider"===Ct.controlType){if(1===De)this.fillSingleSliderControl(Be,Ct,0,le),le.currentValueArray[0]=le.currentValue;else if(De>1){le.controlType="multislider",le.subControls=[],le.id=Ct.id,le.dataType=Ct.dataType;for(let nt=0;nt<De;nt++){const bt={};bt.displayName=Ct.uiDisplayNameV1?Ct.uiDisplayNameV1[nt]:"",this.fillSingleSliderControl(Be,Ct,nt,bt),le.currentValueArray[nt]=bt.currentValue,le.subControls.push(bt)}}}else if("boolean"===Ct.controlType)le.id=Ct.id,le.controlType=Ct.controlType,le.dataType="bool",le.dimension=0,le.currentValue=0!==Ct.currentValue[0],le.currentValueArray[0]=le.currentValue;else if("pulldown"===Ct.controlType||"radiobutton"===Ct.controlType)le.id=Ct.id,le.dimension=0,le.dataType="int",le.pullDownOrRadioButtonItems=Ct.uiDisplayNameV1,le.currentValueArray[0]=Ct.currentId;else{if("edit"!==Ct.controlType)return void this.logger.error("unknown filter control type:",Ct.controlType);if(1===De)this.fillSingleEditControl(Be,Ct,0,le),le.currentValueArray[0]=le.currentValue;else if(De>1){le.controlType="multiedit",le.id=Ct.id,le.dataType=Ct.dataType,le.subControls=[];for(let nt=0;nt<De;nt++){const bt={};bt.displayName=Ct.uiDisplayNameV1?Ct.uiDisplayNameV1[nt]:"",this.fillSingleEditControl(Be,Ct,nt,bt),le.currentValueArray[nt]=bt.currentValue,le.subControls.push(bt)}}}Be.controls.push(le)}))}pullDownOrRadioButtonChanged(ne,Be,vt){Be.currentValueArray[0]=ne,this.nvCameraService.setFilterAttribute(vt.id,vt.stackIdx,Be.id,l.DU[Be.controlType],Be.dataType,Be.currentValueArray).subscribe(Ct=>{this.logger.info("value change successful for "+Be.controlType+"="+Ct)},Ct=>{this.logger.error("value change failed for "+Be.controlType+"="+JSON.stringify(Ct))})}ngOnDestroy(){this.logger.info("ngOnDestroy"),this.destroy$.next(!0),this.destroy$.unsubscribe()}}return ht.\u0275fac=function(ne){return new(ne||ht)(t.Y36(l.En),t.Y36(y.ed),t.Y36(t.sBO))},ht.\u0275cmp=t.Xpm({type:ht,selectors:[["app-filter-section"]],inputs:{filterStack:"filterStack"},decls:18,vars:9,consts:[["fxLayout","column",1,"filter-section"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","grow"],[1,"font-sub1"],[4,"ngIf"],["fxFlex","none"],["xPosition","before","yPosition","below","overlapTrigger","false",1,"nv-igo"],["menu","matMenu"],[1,"filtermenu"],[4,"ngFor","ngForOf"],[1,"nv-gap-8"],[1,"filter-stack-section"],["multi","",1,"filter-stack"],["hideToggle","true","class","panel-spacing",3,"expanded","active",4,"ngFor","ngForOf"],["fxFlex","none","svgIcon","arrow_up","tooltip","tooltips.MoveUp",3,"disabled","clicked"],["fxFlex","none","svgIcon","arrow_down","tooltip","tooltips.MoveDown",3,"disabled","clicked"],["fxFlex","none","svgIcon","delete_forever","tooltip","tooltips.Remove",3,"clicked"],["svgIcon","add","tooltip","tooltips.AddFilter",3,"disabled"],["svgIcon","add","tooltip","tooltips.AddFilter",3,"matMenuTriggerFor"],["mat-menu-item","","class","nv-dropdown-menu hig-button-overlay","fxLayout","row","fxLayoutAlign","start center",3,"click",4,"ngIf"],["mat-menu-item","","fxLayout","row","fxLayoutAlign","start center",1,"nv-dropdown-menu","hig-button-overlay",3,"click"],[1,"font-body2","filter-dropdown-button"],["hideToggle","true",1,"panel-spacing",3,"expanded"],["collapsedHeight","36px","expandedHeight","36px",3,"click"],["fxLayout","row","fxLayoutAlign","start center","fxFlexFill",""],["fxFlex","",1,"font-body2","filter-title",3,"click"],["mat-button","","fxFlex","none","class","nv-item-icon complex-button","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","16px",1,"accordion-body","font-body2"],["style","width: 100%;",4,"ngFor","ngForOf"],["mat-button","","fxFlex","none","fxLayout","row","fxLayoutAlign","center center",1,"nv-item-icon","complex-button"],["svgIcon","chevron_down",1,"accordion-chevron"],[2,"width","100%"],["fxLayout","column",4,"ngIf"],["fxLayout","row",4,"ngIf"],["fxLayout","column","fxLayoutGap","8px",4,"ngIf"],["fxFlex","",3,"control","filter"],["fxLayout","column"],["fxLayout","row"],["fxFlex","none","class","subcontrols","fxLayoutGap","12px",4,"ngFor","ngForOf"],["fxFlex","none","fxLayoutGap","12px",1,"subcontrols"],[3,"ngModel","ngModelChange","change"],["fxLayout","column","fxLayoutGap","8px"],["fxLayout","row","fxFlex","none"],["fxFlex","",3,"maxHeight","selection","disabled","input","selectionChanged"],[3,"selection","disabled","input","changedSelection"]],template:function(ne,Be){1&ne&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"span",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.YNc(6,j,4,2,"ng-container",4),t.TgZ(7,"div",5),t.YNc(8,K,2,1,"ng-container",4),t.YNc(9,Z,2,1,"ng-container",4),t.TgZ(10,"mat-menu",6,7),t.TgZ(12,"div",8),t.YNc(13,W,2,1,"ng-container",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"mat-accordion",12),t.YNc(17,Ge,8,6,"mat-expansion-panel",13),t.qZA(),t.qZA(),t.qZA()),2&ne&&(t.xp6(4),t.Oqu(t.lcZ(5,7,"nvcamera.HeaderTitleFilters")),t.xp6(2),t.Q6J("ngIf",Be.filterStack.selectedFilterCount>0),t.xp6(2),t.Q6J("ngIf",Be.isFilterDropdownDisabled()),t.xp6(1),t.Q6J("ngIf",!Be.isFilterDropdownDisabled()),t.xp6(4),t.Q6J("ngForOf",Be.filterList),t.xp6(3),t.Q6J("@.disabled",Be.disableAnimation),t.xp6(1),t.Q6J("ngForOf",Be.filterStack.filters.slice().reverse()))},directives:[h.xw,h.Wh,h.yH,n.O5,A.VK,n.sg,S.pp,Y.n,C.i,A.p6,A.OP,S.ib,S.yz,h.s9,h.SQ,se.lW,g.Hw,$,u.Rr,o.xZ,c.JJ,c.On,ae.y,ue,X],pipes:[w.X$],styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.filter-section[_ngcontent-%COMP%]{max-width:448px;min-width:448px;width:448px}.filtermenu[_ngcontent-%COMP%]{max-height:494px;width:280px;overflow:auto}.nv-dropdown-menu[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;width:100%;height:36px}.nv-dropdown-menu[_ngcontent-%COMP%]:first-of-type{margin-top:8px}.nv-dropdown-menu[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{width:194px}.filter-dropdown-button[_ngcontent-%COMP%]{padding:0 16px}.filter-title[_ngcontent-%COMP%]{padding:8px}.accordion-body[_ngcontent-%COMP%]{padding:16px 24px}.mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#fff0}.mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[disabled][_ngcontent-%COMP%]{opacity:.38}.mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]:not(:disabled):hover{background-color:#ffffff14}.mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]:not(:disabled):focus{background-color:#ffffff52}.mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]:not(:disabled):active{background-color:#fff6}.mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel.active[_ngcontent-%COMP%]{background-color:#ffffff29}.panel-spacing[_ngcontent-%COMP%]:first-of-type{margin:0}.panel-spacing[_ngcontent-%COMP%]:not(:first-of-type){margin:8px 0 0}.isLtr[_nghost-%COMP%]   .subcontrols[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .subcontrols[_ngcontent-%COMP%]{padding:10px 0 0 20px}html[dir=ltr][_ngcontent-%COMP%]   .subcontrols[_ngcontent-%COMP%]{--dummy: 0;padding:10px 0 0 20px}.isRtl[_nghost-%COMP%]   .subcontrols[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .subcontrols[_ngcontent-%COMP%]{padding:10px 20px 0 0}html[dir=rtl][_ngcontent-%COMP%]   .subcontrols[_ngcontent-%COMP%]{--dummy: 0;padding:10px 20px 0 0}"]}),ht})();function Tt(ht,Vt){if(1&ht){const ne=t.EpF();t.ynx(0),t.TgZ(1,"igo-capture-enhance",3),t.NdJ("toggled",function(vt){return t.CHM(ne),t.oxw().setToggleState(vt)}),t.qZA(),t.BQk()}}function Te(ht,Vt){1&ht&&(t.ynx(0),t._UZ(1,"nv-divider"),t.BQk())}function Je(ht,Vt){if(1&ht&&t._UZ(0,"img",14),2&ht){const ne=t.oxw().$implicit,Be=t.oxw(2);t.Q6J("src",Be.slotsPreview[ne.id].previewImgData,t.LSH)}}function xt(ht,Vt){if(1&ht&&(t.TgZ(0,"span",15),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&ht){const ne=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,ne.altText))}}const Ye=function(ht,Vt,ne){return{active:ht,"preview-panel__preview-pane-basic":Vt,"preview-panel__preview-pane":ne}};function rt(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"div",11),t.NdJ("click",function(){const Ct=t.CHM(ne).$implicit;return t.oxw(2).onSlotSelection(Ct)})("keydown.enter",function(){const Ct=t.CHM(ne).$implicit;return t.oxw(2).onSlotSelection(Ct)}),t.YNc(1,Je,1,1,"img",12),t.YNc(2,xt,3,3,"span",13),t.qZA()}if(2&ht){const ne=Vt.$implicit,Be=t.oxw(2);t.Q6J("ngClass",t.kEZ(5,Ye,Be.isSlotActive(ne),Be.restartGame,!Be.restartGame))("nvAutoFocus",Be.isSlotActive(ne))("tabindex",Be.restartGame?-1:0),t.xp6(1),t.Q6J("ngIf",Be.checkPreviewForSlot(ne.id)),t.xp6(1),t.Q6J("ngIf",!Be.checkPreviewForSlot(ne.id))}}function ge(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"div",17),t.TgZ(2,"div",15),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"nv-input",18),t.NdJ("textChange",function(vt){return t.CHM(ne),t.oxw(2).slotNameEditBox.activeSlotName=vt})("textChange",function(vt){return t.CHM(ne),t.oxw(2).slotNameEditBox.onEditboxChanged(vt)}),t.qZA(),t.TgZ(6,"div",19),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"nv-input",20),t.NdJ("textChange",function(vt){return t.CHM(ne),t.oxw(2).hotKeyEditBox.slotHK=vt})("textChange",function(vt){return t.CHM(ne),t.oxw(2).hotKeyEditBox.onEditboxChanged(vt)})("click",function(){return t.CHM(ne),t.oxw(2).changeHotKey()})("keydown.enter",function(){return t.CHM(ne),t.oxw(2).changeHotKey()}),t.qZA(),t.qZA(),t.qZA()}if(2&ht){const ne=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,11,"nvcamera.EditFieldTitleGameName")),t.xp6(2),t.Q6J("text",ne.slotNameEditBox.activeSlotName)("placeholderText",ne.slotNameEditBox.placeHolder)("disabled",ne.slotNameEditBox.disabled)("characterCounter",ne.slotNameEditBox.characterCounter)("textMaxLength",ne.slotNameEditBox.slotTextMaxLen),t.xp6(2),t.Oqu(t.lcZ(8,13,"nvcamera.EditFieldTitleHotkey")),t.xp6(2),t.Q6J("text",ne.hotKeyEditBox.slotHK)("disabled",ne.hotKeyEditBox.disabled)("readonly",!0)("textMaxLength",ne.hotKeyEditBox.slotTextMaxLen)}}function Ve(ht,Vt){1&ht&&t._UZ(0,"nv-divider")}function at(ht,Vt){if(1&ht&&(t.TgZ(0,"div",21),t._UZ(1,"app-filter-section",22),t.qZA()),2&ht){const ne=t.oxw(2);t.xp6(1),t.Q6J("filterStack",ne.slots[ne.activeSlotIndex].filterStack)}}function ve(ht,Vt){if(1&ht&&(t.ynx(0),t.YNc(1,Te,2,0,"ng-container",1),t.TgZ(2,"div",4),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.YNc(7,rt,3,9,"div",7),t.qZA(),t._UZ(8,"nv-divider"),t.YNc(9,ge,10,15,"div",8),t.YNc(10,Ve,1,0,"nv-divider",1),t.YNc(11,at,2,1,"div",9),t.qZA(),t._UZ(12,"div",10),t.BQk()),2&ht){const ne=t.oxw();t.xp6(1),t.Q6J("ngIf",!ne.isGFNClient),t.xp6(1),t.ekj("disabled-opacity",ne.restartGame),t.xp6(1),t.hij(" ",t.lcZ(4,10,"nvcamera.Styles")," "),t.xp6(2),t.ekj("disabled-opacity",ne.restartGame),t.xp6(2),t.Q6J("ngForOf",ne.slots),t.xp6(2),t.Q6J("ngIf",!ne.restartGame&&0!==ne.activeSlotIndex),t.xp6(1),t.Q6J("ngIf",!ne.restartGame&&0!==ne.activeSlotIndex),t.xp6(1),t.Q6J("ngIf",!ne.restartGame&&0!==ne.activeSlotIndex)}}function Ze(ht,Vt){if(1&ht&&(t.TgZ(0,"div",23),t._UZ(1,"mat-icon",24),t.TgZ(2,"div",25),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&ht){const ne=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,1,ne.errorMsg))}}let Ie=(()=>{class ht{constructor(ne,Be,vt,Ct,gt,At,le,De,nt,bt,Wt){this.loggingService=ne,this.router=Be,this.route=vt,this.translateService=Ct,this.nvCameraService=gt,this.navigationService=At,this.oscDisplayService=le,this.keyboardService=De,this.appBarService=nt,this.telemetryService=bt,this.igoConfig=Wt,this.destroy$=new a.xQ,this.currentGameName="PUBG Lowlight",this.slotHotkey="Alt + F1",this.panelOpenState=!1,this.activeSlotIndex=null,this.positionEnum=l.aM,this.slotNameEditBox={activeSlotName:"",title:"Name",placeHolder:{text:"nvcamera.Style",arg:0},slotTextMaxLen:30,disabled:!1,characterCounter:!0,onEditboxChanged:ln=>{this.nvCameraService.setCurrentModSlotName(ln)}},this.hotKeyEditBox={slotHK:"Alt+3",slotTextMaxLen:100,disabled:!0,onEditboxChanged:ln=>{this.logger.info("In progress")}},this.previewRefreshDelay=1e3,this.previewImgWidth=100,this.previewImgHeight=100,this.showError=!1,this.captureEnhanceSwitch=this.nvCameraService.statusOfCaptureEnhance,this.restartGame=!1,this.logger=this.loggingService.getLogger("GameFilter"),this.appBarService.setAll({title:"nvcamera.GameFilter",navButtonArrow:!0,icons:[{id:"closeIgo",icon:"close",tooltip:"tooltips.Close"}]}),this.appBarService.actionClicked$.pipe((0,p.R)(this.destroy$)).subscribe(ln=>{"nav"===ln&&this.onBackClicked()})}ngOnInit(){if(this.nvCameraService.changeUIRunning(!0),this.telemetryInit(),this.navigationService.escapeEvent().pipe((0,p.R)(this.destroy$)).subscribe(()=>{"UI"===this.nvCameraService.sourceTrigger?(this.logger.info("Return to Main Menu"),this.onBackClicked()):"HK"===this.nvCameraService.sourceTrigger&&this.oscDisplayService.closeOSC()}),this.isGFNClient=this.igoConfig.GFNCefClient,this.showError="true"===this.route.snapshot.params.showError,this.errorType=this.route.snapshot.params.errorType,this.nvCameraSessionExists=this.route.snapshot.params.nvCameraSessionExists,!this.showError)return this.restartGame=this.nvCameraService.restartRequired,this.restartGame?(this.emptySlots=new l.G0,void(this.slots=this.emptySlots.modsSlotsInfo.slots)):(this.nvCameraSessionExists||this.nvCameraService.startNvCameraSession(),this.slots=this.nvCameraService.currentGameSlots.modsSlotsInfo.slots,this.activeSlotIndex=this.nvCameraService.currentGameSlots.modsSlotsInfo.lastSlotIdx,this.slotNameEditBox.activeSlotName=this.nvCameraService.getCurrentModSlotName(),this.slotNameEditBox.placeHolder.arg=this.activeSlotIndex,this.previewEnabled=this.nvCameraService.checkPreviewEnabled(),this.logger.info("current active slot = ",this.activeSlotIndex),this.nvCameraService.setPreviewDetails(this.slots,this.previewImgWidth,this.previewImgHeight),this.triggerPreview(),this.slotsPreview=this.nvCameraService.slotsPreviewInfo,this.nvCameraService.applySlot(this.activeSlotIndex).subscribe(ne=>{this.logger.info("initialized successfully: ",ne)},ne=>{this.logger.error("error during init: ",ne)}),void this.nvCameraService.getHotkeyStringForSlot(this.activeSlotIndex).pipe((0,p.R)(this.destroy$)).subscribe(ne=>{this.hotKeyEditBox.slotHK=ne,this.hotKeyEditBox.disabled=void 0===this.hotKeyEditBox.slotHK||"None"===this.hotKeyEditBox.slotHK}));this.showErrorMessage()}ngOnDestroy(){let ne=!1;this.nvCameraService.resetPreviewStatus(),this.destroy$.next(!0),this.destroy$.unsubscribe(),this.showError||this.nvCameraService.restartRequired?this.nvCameraService.changeUIRunning(!1):(this.slots[this.activeSlotIndex].filterStack.filters.length>0&&(ne=!0),this.nvCameraService.closeMenu(l.AN.GameFilter,ne).subscribe(Be=>{this.nvCameraService.changeUIRunning(!1),this.logger.info("menu closed successfully: ",Be)},Be=>{this.nvCameraService.changeUIRunning(!1),this.logger.error("error while closing menu: ",Be)}))}showErrorMessage(){switch(this.errorType){case l.IO.ERROR_TIMEOUT:this.nvCameraService.nvCameraTimedOut=!0,this.errorMsg="notification.WarningGameRequired",this.nvCameraService.sendAnselFreestyleErrorTelemetry(l.NX.anselFreestyleUnsupportedGameError,l.AN.GameFilter);break;case l.IO.ERROR_SUPPORTED_GAME:this.errorMsg="notification.WarningGameRequired",this.nvCameraService.sendAnselFreestyleErrorTelemetry(l.NX.anselFreestyleUnsupportedGameError,l.AN.GameFilter);break;case l.IO.ERROR_RESTART:this.errorMsg="notification.ErrorRestartGame",this.nvCameraService.sendAnselFreestyleErrorTelemetry(l.NX.anselFreestyleMenuLaunchError,l.AN.GameFilter);break;default:this.logger.error("Unknown error msg type: "+this.errorType),this.errorMsg="notification.WarningGameRequired",this.nvCameraService.sendAnselFreestyleErrorTelemetry(l.NX.anselFreestyleGeneralFailure,l.AN.GameFilter)}}triggerPreview(){this.nvCameraService.updatePreview(this.previewImgWidth,this.previewImgHeight),(0,s.F)(this.previewRefreshDelay).pipe((0,p.R)(this.destroy$)).subscribe(Be=>{this.nvCameraService.updatePreview(this.previewImgWidth,this.previewImgHeight)})}checkPreviewForSlot(ne){return!this.restartGame&&this.previewEnabled&&this.slotsPreview[ne].previewAvailable}onBackClicked(){this.logger.info("Back clicked"),this.navigationService.navigate(["../main-menu"],{relativeTo:this.route.parent,skipLocationChange:!0},l.wB.mainMenu),this.nvCameraService.setNavigationInputDevice([l.uv.Mouse],[l.Po.yes])}onSlotSelection(ne){this.restartGame||(this.logger.info("slot switching"),this.nvCameraService.applySlot(ne.id).subscribe(Be=>{this.nvCameraService.updatePreview(this.previewImgWidth,this.previewImgHeight),this.logger.info("slot switched successfully")},Be=>{this.logger.error("slot switch failed with error: ",Be),this.nvCameraService.showSnack(l.pL.ApplyStyleFail)}),this.activeSlotIndex=this.nvCameraService.currentGameSlots.modsSlotsInfo.lastSlotIdx,this.slotNameEditBox.activeSlotName=this.nvCameraService.getCurrentModSlotName(),this.slotNameEditBox.placeHolder.arg=this.activeSlotIndex,this.nvCameraService.getHotkeyStringForSlot(ne.id).pipe((0,p.R)(this.destroy$)).subscribe(Be=>{this.hotKeyEditBox.slotHK=Be}))}isSlotActive(ne){return this.restartGame?0===ne.id:this.activeSlotIndex===ne.id}onKeyDown(ne,Be){"Tab"===ne.code&&this.nvCameraService.setNavigationInputDevice([l.uv.Keyboard],[l.Po.yes]),this.keyboardService.onKeyDown(ne,Be)}onMouseDown(){this.nvCameraService.setNavigationInputDevice([l.uv.Mouse],[l.Po.yes])}changeHotKey(){this.navigationService.navigate(["../settings/shortcuts",{caller:"../nvcamera/game-filters"}],{relativeTo:this.route.parent,skipLocationChange:!0},l.wB.mainMenu)}setToggleState(ne){this.captureEnhanceSwitch=ne.captureEnhanceState,this.captureEnhanceSwitch&&this.nvCameraService.restartRequired&&(this.restartGame=!0)}telemetryInit(){this.nvCameraService.navigationInputDevice.KEYBOARD=!1,this.nvCameraService.navigationInputDevice.MOUSE=!1,this.nvCameraService.panningUsed=!1,this.nvCameraService.panningWithKB=!1,this.nvCameraService.panningWithMouse=!1}}return ht.\u0275fac=function(ne){return new(ne||ht)(t.Y36(y.ed),t.Y36(i.F0),t.Y36(i.gz),t.Y36(w.sK),t.Y36(l.En),t.Y36(l.f5),t.Y36(l.vU),t.Y36(l.i8),t.Y36(l.ad),t.Y36(l.l),t.Y36(l.gs))},ht.\u0275cmp=t.Xpm({type:ht,selectors:[["app-game-filters"]],decls:4,vars:3,consts:[["fxLayout","column","fxFlex","",3,"keydown","mousedown"],[4,"ngIf"],["class","max-warning-area","fxLayout","row","fxLayoutGap","8px",4,"ngIf"],[3,"toggled"],["fxFlex","none",1,"font-sub1","nv-label"],["fxFlex","","fxLayout","column",1,"game-filters-layout"],["fxFlex","none",1,"preview-panel"],["fxFlex","","fxLayoutAlign","center center",3,"ngClass","nvAutoFocus","tabindex","click","keydown.enter",4,"ngFor","ngForOf"],["class","game-info-section","fxFlex","none",4,"ngIf"],["class","filter-section-embed","fxFlex","none","fxLayout","column",4,"ngIf"],["fxFlex","none",1,"nv-gap-24"],["fxFlex","","fxLayoutAlign","center center",3,"ngClass","nvAutoFocus","tabindex","click","keydown.enter"],[3,"src",4,"ngIf"],["class","font-body2",4,"ngIf"],[3,"src"],[1,"font-body2"],["fxFlex","none",1,"game-info-section"],["fxLayout","column"],[3,"text","placeholderText","disabled","characterCounter","textMaxLength","textChange"],[1,"font-body2","nv-label"],[3,"text","disabled","readonly","textMaxLength","textChange","click","keydown.enter"],["fxFlex","none","fxLayout","column",1,"filter-section-embed"],[3,"filterStack"],["fxLayout","row","fxLayoutGap","8px",1,"max-warning-area"],["svgIcon","warning",1,"icon-warning","nv-item-icon"],[1,"font-body2","limit-padding"]],template:function(ne,Be){1&ne&&(t.TgZ(0,"div",0),t.NdJ("keydown",function(Ct){return Be.onKeyDown(Ct)})("mousedown",function(){return Be.onMouseDown()}),t.YNc(1,Tt,2,0,"ng-container",1),t.YNc(2,ve,13,12,"ng-container",1),t.YNc(3,Ze,5,3,"div",2),t.qZA()),2&ne&&(t.xp6(1),t.Q6J("ngIf",!Be.isGFNClient),t.xp6(1),t.Q6J("ngIf",!Be.showError&&Be.captureEnhanceSwitch),t.xp6(1),t.Q6J("ngIf",Be.showError&&Be.captureEnhanceSwitch))},directives:[h.xw,h.yH,n.O5,x,n.sg,E.n,h.Wh,n.mk,P.oO,v.h,O._,C.i,St,h.SQ,g.Hw],pipes:[w.X$],styles:['.nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-error[_ngcontent-%COMP%]{color:#e02828}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}body[_ngcontent-%COMP%]   nv-oogg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:0;background:rgba(255,255,255,.3)}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:0;background:rgba(255,255,255,.7)}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus, .nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none}nv-oogg[_ngcontent-%COMP%]   [readonly][_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   [type=readonly][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   [readonly][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   [type=readonly][_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;padding:0}nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled), nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled), .nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none}nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   dir[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   dir[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{-webkit-margin-before:0!important;-webkit-margin-after:0!important;-webkit-margin-start:0!important;-webkit-margin-end:0!important;-webkit-padding-start:0!important;-moz-margin-start:0!important;-moz-margin-end:0!important;-moz-padding-start:0!important}nv-oogg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0}nv-oogg[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]{overflow-y:auto;padding:24px}.isLtr   [_nghost-%COMP%]{margin-right:-24px}html[dir=ltr]   [_nghost-%COMP%]{--dummy4: 0;margin-right:-24px}.isRtl   [_nghost-%COMP%]{margin-left:-24px}html[dir=rtl]   [_nghost-%COMP%]{--dummy4: 0;margin-left:-24px}.active[_ngcontent-%COMP%]{border:2px solid #76b900!important}.preview-panel[_ngcontent-%COMP%]{width:100%;height:100px}.preview-panel__preview-pane[_ngcontent-%COMP%], .preview-panel__preview-pane-basic[_ngcontent-%COMP%]{width:104px;height:104px;border:2px solid rgba(255,255,255,.38);display:inline-block;text-align:center;vertical-align:middle}.isLtr[_nghost-%COMP%]   .preview-panel__preview-pane[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .preview-panel__preview-pane[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .preview-panel__preview-pane-basic[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .preview-panel__preview-pane-basic[_ngcontent-%COMP%]{margin:0 8px 0 0}html[dir=ltr][_ngcontent-%COMP%]   .preview-panel__preview-pane[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .preview-panel__preview-pane-basic[_ngcontent-%COMP%]{--dummy: 0;margin:0 8px 0 0}.isRtl[_nghost-%COMP%]   .preview-panel__preview-pane[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .preview-panel__preview-pane[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .preview-panel__preview-pane-basic[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .preview-panel__preview-pane-basic[_ngcontent-%COMP%]{margin:0 0 0 8px}html[dir=rtl][_ngcontent-%COMP%]   .preview-panel__preview-pane[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .preview-panel__preview-pane-basic[_ngcontent-%COMP%]{--dummy: 0;margin:0 0 0 8px}.preview-panel__preview-pane[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}.preview-panel__preview-pane[_ngcontent-%COMP%]:hover{border:2px solid #76b900;cursor:pointer}.preview-panel__preview-pane[_ngcontent-%COMP%]:focus{border:2px solid #76b900;cursor:pointer}.preview-panel__preview-pane--selected[_ngcontent-%COMP%]{background-color:#76b900}.game-info-section[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px}.filter-section-embed[_ngcontent-%COMP%]{box-sizing:border-box;background-clip:content-box}.max-warning-area[_ngcontent-%COMP%]{margin:16px 0 0}.limit-padding[_ngcontent-%COMP%]{padding:8px 0}']}),ht})();var $e=e(82516),ze=e(53466),_t=e(8095),be=e(85816),pt=e(9170),Ot=e(2984),Kt=e(85013),nn=e(44211),tn=e(90795);function Mn(ht,Vt){if(1&ht){const ne=t.EpF();t.ynx(0),t.TgZ(1,"igo-capture-enhance",3),t.NdJ("toggled",function(vt){return t.CHM(ne),t.oxw().setToggleState(vt)}),t.qZA(),t.BQk()}}function Un(ht,Vt){1&ht&&(t.ynx(0),t._UZ(1,"nv-divider"),t.BQk())}function _n(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",16),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"nv-dropdown",17),t.NdJ("selectionChanged",function(vt){return t.CHM(ne),t.oxw(4).methodChanged(vt)}),t.qZA(),t.qZA()}if(2&ht){const ne=t.oxw(4);t.xp6(2),t.Oqu(t.lcZ(3,4,ne.methodTitle)),t.xp6(2),t.Q6J("selection",ne.methodSelection)("disabled",!1)("input",ne.methodInput)}}function xn(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"div",10),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-slide-toggle",11),t.NdJ("ngModelChange",function(vt){return t.CHM(ne),t.oxw(4).hdrSwitch=vt})("change",function(vt){return t.CHM(ne),t.oxw(4).hdrSwitchChange(vt)}),t.qZA(),t.qZA()}if(2&ht){const ne=t.oxw(4);t.xp6(2),t.Oqu(t.lcZ(3,3,"nvcamera.SaveAsHDR")),t.xp6(2),t.Q6J("ngModel",ne.hdrSwitch)("disabled",ne.restartGame)}}function Fn(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"div"),t._UZ(1,"nv-divider"),t.TgZ(2,"div",16),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"nv-dropdown",17),t.NdJ("selectionChanged",function(vt){return t.CHM(ne),t.oxw(3).captureChanged(vt)}),t.qZA(),t._UZ(6,"div",18),t.YNc(7,_n,5,6,"div",1),t._UZ(8,"div",18),t.TgZ(9,"div",16),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"nv-dropdown",17),t.NdJ("selectionChanged",function(vt){return t.CHM(ne),t.oxw(3).resolutionChanged(vt)}),t.qZA(),t._UZ(13,"div",19),t.YNc(14,xn,5,5,"div",20),t._UZ(15,"div",18),t.qZA()}if(2&ht){const ne=t.oxw(3);t.xp6(3),t.Oqu(t.lcZ(4,12,ne.captureTitle)),t.xp6(2),t.Q6J("selection",ne.captureTypeSelection)("disabled",!1)("input",ne.captureTypeInput)("disabled",ne.restartGame),t.xp6(2),t.Q6J("ngIf",!ne.methodDisabled),t.xp6(3),t.Oqu(t.lcZ(11,14,ne.resolutionTitle)),t.xp6(2),t.Q6J("selection",ne.resolutionSelection)("disabled",!1)("input",ne.resolutionInput)("disabled",ne.restartGame),t.xp6(2),t.Q6J("ngIf",!ne.isGFNClient)}}function yt(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"mat-accordion"),t.TgZ(1,"mat-expansion-panel",21),t.TgZ(2,"mat-expansion-panel-header",22),t.TgZ(3,"div",23),t.TgZ(4,"div",24),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"button",25),t._UZ(8,"mat-icon",26),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",27),t.TgZ(10,"div",28),t.TgZ(11,"div",29),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.TgZ(14,"nv-hig-slider",30),t.NdJ("input",function(vt){return t.CHM(ne),t.oxw(3).onRotationSliderChange(vt.value)})("valueChange",function(vt){return t.CHM(ne),t.oxw(3).onRotationSliderChange(vt)}),t.qZA(),t.qZA(),t._UZ(15,"div",18),t.TgZ(16,"div",27),t.TgZ(17,"div",28),t.TgZ(18,"div",29),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.TgZ(21,"nv-hig-slider",30),t.NdJ("input",function(vt){return t.CHM(ne),t.oxw(3).onFOVSliderChange(vt.value)})("valueChange",function(vt){return t.CHM(ne),t.oxw(3).onFOVSliderChange(vt)}),t.qZA(),t.qZA(),t.qZA(),t._UZ(22,"div",18),t.qZA()}if(2&ht){const ne=t.oxw(3);t.Q6J("@.disabled",ne.disableAnimation),t.xp6(1),t.Q6J("expanded",!1),t.xp6(4),t.Oqu(t.lcZ(6,15,"mainMenu.Webcam")),t.xp6(7),t.hij(" ",t.lcZ(13,17,"nvcamera.Roll")," "),t.xp6(2),t.Q6J("min",ne.rollSlider.min)("max",ne.rollSlider.max)("step",ne.rollSlider.step)("value",ne.rollSlider.value)("disabled",ne.restartGame),t.xp6(5),t.hij(" ",t.lcZ(20,19,"nvcamera.FOV")," "),t.xp6(2),t.Q6J("min",ne.fovSlider.min)("max",ne.fovSlider.max)("step",ne.fovSlider.step)("value",ne.fovSlider.value)("disabled",ne.restartGame)}}function Ht(ht,Vt){1&ht&&t._UZ(0,"nv-divider")}function Ue(ht,Vt){if(1&ht&&(t.TgZ(0,"div",31),t._UZ(1,"app-filter-section",32),t.qZA()),2&ht){const ne=t.oxw(3);t.xp6(1),t.Q6J("filterStack",ne.slots[ne.activeSlotIndex].filterStack)}}function Mt(ht,Vt){1&ht&&(t.TgZ(0,"div",33),t.TgZ(1,"div",28),t.TgZ(2,"div",34),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"nv-item-button",35),t.qZA(),t.qZA()),2&ht&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"nvcamera.HeaderTitleFilters")),t.xp6(2),t.Q6J("disabled",!0))}function ft(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"div",36),t.TgZ(1,"button",37),t.NdJ("click",function(){return t.CHM(ne),t.oxw(3).onSnapClicked()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&ht&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"nvcamera.Snap")," "))}function st(ht,Vt){if(1&ht){const ne=t.EpF();t.TgZ(0,"div",5),t._UZ(1,"div",6),t.YNc(2,Un,2,0,"ng-container",1),t.TgZ(3,"div",7),t.TgZ(4,"nv-item-button",8),t.NdJ("clicked",function(){return t.CHM(ne),t.oxw(2).hideUI()}),t.qZA(),t.YNc(5,Fn,16,16,"div",1),t.TgZ(6,"div",9),t.TgZ(7,"div",10),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"mat-slide-toggle",11),t.NdJ("ngModelChange",function(vt){return t.CHM(ne),t.oxw(2).gridSwitch=vt})("change",function(vt){return t.CHM(ne),t.oxw(2).gridSwitchChange(vt)}),t.qZA(),t.qZA(),t._UZ(11,"nv-divider"),t.YNc(12,yt,23,21,"mat-accordion",1),t.YNc(13,Ht,1,0,"nv-divider",1),t.YNc(14,Ue,2,1,"div",12),t.qZA(),t.YNc(15,Mt,6,4,"div",13),t.TgZ(16,"div",14),t.YNc(17,ft,4,3,"div",15),t.qZA(),t.qZA()}if(2&ht){const ne=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!ne.isGFNClient),t.xp6(1),t.ekj("disabled-opacity",ne.restartGame),t.xp6(1),t.Q6J("subTitle",ne.getHidePanelSubTitle())("disabled",ne.snapDisabled),t.xp6(1),t.Q6J("ngIf",!ne.isGFNClient),t.xp6(3),t.Oqu(t.lcZ(9,14,"nvcamera.ShowGrid")),t.xp6(2),t.Q6J("ngModel",ne.gridSwitch)("disabled",ne.restartGame),t.xp6(2),t.Q6J("ngIf",!ne.isAnselLite),t.xp6(1),t.Q6J("ngIf",!ne.isAnselLite),t.xp6(1),t.Q6J("ngIf",!ne.restartGame),t.xp6(1),t.Q6J("ngIf",ne.restartGame),t.xp6(2),t.Q6J("ngIf",!ne.captureInProgress)}}function Et(ht,Vt){if(1&ht&&(t.ynx(0),t.YNc(1,st,18,16,"div",4),t.BQk()),2&ht){const ne=t.oxw();t.xp6(1),t.Q6J("ngIf",ne.captureEnhanceSwitch)}}function Ee(ht,Vt){if(1&ht&&(t.TgZ(0,"div",38),t._UZ(1,"mat-icon",39),t.TgZ(2,"div",40),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&ht){const ne=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,1,ne.errorMsg))}}const kt=["clientdiv"],Zt={0:1,1:16,2:2,3:32,4:64},dn={ShiftLeft:16,ShiftRight:16,ControlLeft:17,ControlRight:17,Digit1:49,KeyA:65,KeyD:68,KeyE:69,KeyQ:81,KeyR:82,KeyS:83,KeyW:87,KeyX:88,KeyZ:90},Pn=[{path:"game-filters",component:Ie,data:{level:1}},{path:"photo-mode",component:(()=>{class ht{constructor(ne,Be,vt,Ct,gt,At,le,De,nt,bt,Wt,ln){this.loggingService=ne,this.oscNotificationService=Be,this.nvcameraService=vt,this.galleryService=Ct,this.route=gt,this.navigationService=At,this.sidebarComponent=le,this.oscDisplayService=De,this.keyboardService=nt,this.nvIgoComponent=bt,this.appBarService=Wt,this.igoConfig=ln,this.destroy$=new a.xQ,this.rollValEmitter$=new a.xQ,this.fovValEmitter$=new a.xQ,this.sliderThrottleDurationGFN=200,this.sliderThrottleDurationGFE=0,this.snapDisabled=!1,this.methodDisabled=!0,this.hdrSwitch=!1,this.gridSwitch=!1,this.captureTypeSelection=0,this.resolutionSelection=0,this.methodSelection=0,this.captureTitle="nvcamera.Capture",this.captureTypeInput=[],this.methodTitle="nvcamera.Method",this.methodInput=[],this.resolutionTitle="nvcamera.Resolution",this.resolutionInput=["2560 x 1440"],this.enableFOV=!1,this.activeSlotIndex=null,this.ngxSrcFilePathArray=[],this.captureInProgress=!1,this.captureProgress=0,this.positionEnum=l.aM,this.captureEnhanceSwitch=this.nvcameraService.statusOfCaptureEnhance,this.restartGame=!1,this.showError=!1,this.disableAnimation=!0,this.fovSlider={min:0,max:0,step:1,default:0,value:0},this.rollSlider={min:0,max:0,step:1,default:0,value:0},this.uiMode=l.AN.PhotoModeLight,this.isAnselLite=!1,this.currentCapture=null,this.currentMethod=void 0,this.captureMenuMap=new Map([[Ot.Yk.Common.Nvcamera.CaptureTypes.regular,{type:Ot.Yk.Common.Nvcamera.CaptureTypes.regular,title:"nvcamera.screenshot",resolutionsAvailable:[],supported:!0}],[Ot.Yk.Common.Nvcamera.CaptureTypes.highRes,{type:Ot.Yk.Common.Nvcamera.CaptureTypes.highRes,title:"nvcamera.highResolutionPhoto",resolutionsAvailable:[],supported:!0}],[Ot.Yk.Common.Nvcamera.CaptureTypes.sphericalPanorama,{type:Ot.Yk.Common.Nvcamera.CaptureTypes.sphericalPanorama,title:"nvcamera.360PhotoSphere",resolutionsAvailable:[],supported:!0}],[Ot.Yk.Common.Nvcamera.CaptureTypes.stereoRegular,{type:Ot.Yk.Common.Nvcamera.CaptureTypes.stereoRegular,title:"nvcamera.screenshot3D",resolutionsAvailable:[],supported:!0}],[Ot.Yk.Common.Nvcamera.CaptureTypes.stereoSphericalPanorama,{type:Ot.Yk.Common.Nvcamera.CaptureTypes.stereoSphericalPanorama,title:"nvcamera.360PhotoSphere3D",resolutionsAvailable:[],supported:!0}]]),this.HighResMethod=[{id:"nvcamera.MethodStandard",supported:!0},{id:"nvcamera.MethodEnhanced",supported:!0},{id:"nvcamera.MethodAIUpRes",supported:!0}],this.getRollText=function(){const Sn=this.rollSlider.value;return 0===Sn?Sn+"\xb0":this.translateService.instant(Sn<0?"nvcamera.degreeLeft":"nvcamera.degreeRight",{arg1:Math.abs(Sn)})},this.getFOVText=function(){return(Math.round(1e3*this.fovSlider.value)/1e3).toFixed()+"\xb0"},this.logger=this.loggingService.getLogger("PhotoMode"),this.uiMode=this.route.snapshot.params.UIMode,this.isAIUpresEnabled="true"===this.route.snapshot.params.isAIUpresEnabled,this.isAnselLite=this.uiMode===l.AN.PhotoModeLight,this.logger.info("UI Mode",this.isAnselLite,"isRTXEnable",this.isAIUpresEnabled),this.appBarService.setAll({title:"nvcamera.PhotoMode",navButtonArrow:!0,icons:[{id:"closeIgo",icon:"close",tooltip:"tooltips.Close"}]}),this.appBarService.actionClicked$.pipe((0,p.R)(this.destroy$)).subscribe(Sn=>{"nav"===Sn&&this.onBackClicked()})}onKeyDownEvent(ne){("Insert"===ne.key||this.isMacPlatform&&("h"===ne.key||"H"===ne.key))&&this.hideUI(),"Tab"===ne.code&&this.nvcameraService.setNavigationInputDevice([l.uv.Keyboard],[l.Po.yes]),this.nvcameraService.getRedirectionState()&&ne.code in l.CN&&(this.nvcameraService.panningWithKB=!0)}hideUI(){const ne=!this.sidebarComponent.getHideSidebar();this.sidebarComponent.setHideSidebar(ne),this.logger.info("Hide UI",ne)}setupHighResMethodInput(){this.methodInput=[],this.HighResMethod.forEach(ne=>{ne.supported&&(this.methodInput.push(ne.id),void 0===this.currentMethod&&(this.currentMethod=ne))})}setupcaptureTypeInput(){const ne=[];this.isGFNClient?(this.captureTypeInput.push(this.captureMenuMap.get(Ot.Yk.Common.Nvcamera.CaptureTypes.regular).title),this.currentCapture=this.captureMenuMap.get(Ot.Yk.Common.Nvcamera.CaptureTypes.regular),this.setResolutionAvailable(this.currentCapture.type),this.logger.info("valid captures: ",this.captureTypeInput)):this.nvcameraService.getCaptureTypes().subscribe(Be=>{this.captureMenuMap.forEach(vt=>{vt.supported=Be.captureTypesList.captures.includes(vt.type),vt.type===Ot.Yk.Common.Nvcamera.CaptureTypes.highRes&&(this.HighResMethod.forEach(Ct=>{vt.supported||(Ct.supported=!1),"nvcamera.MethodAIUpRes"===Ct.id&&(Ct.supported=this.isAIUpresEnabled,vt.supported=vt.supported||Ct.supported)}),this.setupHighResMethodInput()),vt.supported&&(null===this.currentCapture&&(this.currentCapture=vt),ne.push(vt.title))}),this.captureTypeInput=ne,this.setResolutionAvailable(this.currentCapture.type),this.logger.info("valid captures: ",this.captureTypeInput)})}captureChanged(ne){let Be;this.logger.info("capture changed",ne),this.captureTypeSelection=ne,this.captureMenuMap.forEach(vt=>{vt.title===this.captureTypeInput[ne]&&(Be=vt)}),this.currentCapture=Be,this.currentMethod=void 0,this.methodDisabled=this.currentCapture.type!==Ot.Yk.Common.Nvcamera.CaptureTypes.highRes,this.methodDisabled||this.setupHighResMethodInput(),this.logger.info("capture changed, current capture",this.currentCapture),this.setResolutionAvailable(this.currentCapture.type)}methodChanged(ne){this.logger.info("method changed ",ne),this.methodSelection=ne,this.HighResMethod.forEach(Be=>{Be.id!==this.methodInput[ne]||(this.currentMethod=Be)}),this.setResolutionAvailable(this.currentCapture.type)}setResolutionAvailable(ne){this.logger.info("setResolutionAvailable",ne,this.currentMethod);const Be=this.captureMenuMap.get(ne);if(Be){if(Be.type===Ot.Yk.Common.Nvcamera.CaptureTypes.highRes&&"nvcamera.MethodAIUpRes"===this.currentMethod.id)return this.fillRTXHighResResolutionSlider(Be),this.logger.info("super res ",Be.resolutionsAvailable),this.currentCaptureResolution=Be.resolutionsAvailable[0],void this.updateResolution(Be.type);this.nvcameraService.getCaptureResolutions(Be.type).subscribe(vt=>{switch(this.logger.info("response",Be.type),Be.resolutionsAvailable=[],Be.type){case Ot.Yk.Common.Nvcamera.CaptureTypes.regular:case Ot.Yk.Common.Nvcamera.CaptureTypes.stereoRegular:Be.resolutionsAvailable.push({width:vt.screenResolution.width,height:vt.screenResolution.height,multiplier:void 0}),this.logger.info("regular res ",Be);break;case Ot.Yk.Common.Nvcamera.CaptureTypes.highRes:Be.resolutionsAvailable=vt.highResResolutions.resolutionArray,this.logger.info("super res ",Be.resolutionsAvailable);break;case Ot.Yk.Common.Nvcamera.CaptureTypes.sphericalPanorama:case Ot.Yk.Common.Nvcamera.CaptureTypes.stereoSphericalPanorama:const gt=8,At=ne===Ot.Yk.Common.Nvcamera.CaptureTypes.sphericalPanorama?2:1;this.logger.info("paranoma res",vt);const le=vt.panoramaResolutions.minX,nt=(vt.panoramaResolutions.maxX-le)/8;for(let bt=0;bt<=gt;bt++)Be.resolutionsAvailable.push({width:le+nt*bt,height:(le+nt*bt)/At,multiplier:void 0});this.logger.info("Panaroma res ",Be.resolutionsAvailable)}this.currentCaptureResolution=Be.resolutionsAvailable[0],this.updateResolution(Be.type)},vt=>{this.logger.error("getCaptureResolutions error: ",vt)})}}fillRTXHighResResolutionSlider(ne){let gt=1;ne.resolutionsAvailable=[];const At=this.captureMenuMap.get(Ot.Yk.Common.Nvcamera.CaptureTypes.regular).resolutionsAvailable[0];At.width*At.height>3686400&&(gt=0);for(let le=0;le<=gt;le++){const De={multiplier:0,width:0,height:0};De.multiplier=le>0?2*ne.resolutionsAvailable[le-1].multiplier:le+2,De.width=At.width*De.multiplier,De.height=At.height*De.multiplier,ne.resolutionsAvailable.push(De)}}setUpCameraControls(){this.nvcameraService.getCameraRange(!0,!1).subscribe(ne=>{this.rollSlider.min=ne.rollRange.min,this.rollSlider.max=ne.rollRange.max},ne=>{this.logger.error("getCameraRange error: ",ne)}),this.nvcameraService.getCameraRange(!1,!0).subscribe(ne=>{this.fovSlider.min=ne.fovRange.min,this.fovSlider.max=ne.fovRange.max},ne=>{this.logger.error("getCameraRange error: ",ne)}),this.nvcameraService.GetCameraControlFov(!1).subscribe(ne=>{this.fovSlider.default=Math.round(ne.fovValue.fov),this.fovSlider.value=this.fovSlider.default,this.enableFOV=!0},ne=>{this.logger.error("GetCameraControlFov error: ",ne)})}ngOnInit(){if(this.logger.info("Initializing photo mode component"),this.nvcameraService.changeUIRunning(!0),this.isMacPlatform=navigator.platform.toUpperCase().indexOf("MAC")>=0,this.telemetryInit(),this.navigationService.escapeEvent().pipe((0,p.R)(this.destroy$)).subscribe(()=>{"UI"===this.nvcameraService.sourceTrigger?(this.logger.info("Return to Main Menu"),this.onBackClicked()):"HK"===this.nvcameraService.sourceTrigger&&this.oscDisplayService.closeOSC()}),this.isGFNClient=this.igoConfig.GFNCefClient,this.showError="true"===this.route.snapshot.params.showError,this.errorType=this.route.snapshot.params.errorType,this.showError)return void this.showErrorMessage();if(this.restartGame=this.nvcameraService.restartRequired,this.restartGame)return void(this.snapDisabled=!0);this.nvcameraService.setNvcameraCmsInfo(),this.slots=this.nvcameraService.currentGameSlots.anselSlotsInfo.slots,this.activeSlotIndex=this.nvcameraService.currentGameSlots.anselSlotsInfo.lastSlotIdx,this.setupcaptureTypeInput(),this.isAnselLite||(this.logger.info("Setting cameracontrols"),this.setUpCameraControls()),this.nvcameraService.applySlot(this.activeSlotIndex,!0,this.uiMode).pipe((0,ze.q)(1)).subscribe(vt=>{this.logger.info("initialized successfully: ",vt)},vt=>{this.logger.error("error during init: ",vt)}),this.navigationService.navigate([{outlets:{centerPane:"client-area"}}],{relativeTo:this.route.parent,skipLocationChange:!0}),(0,$e.R)(document,"keydown").pipe((0,p.R)(this.destroy$)).subscribe(vt=>{this.onKeyDownEvent(vt)});const Be=this.isGFNClient?this.sliderThrottleDurationGFN:this.sliderThrottleDurationGFE;this.fovValEmitter$.pipe((0,_t.p)(Be),(0,p.R)(this.destroy$)).subscribe(vt=>{this.nvcameraService.SetCameraControlFovRoll(!0,void 0,vt).subscribe()}),this.rollValEmitter$.pipe((0,_t.p)(Be),(0,p.R)(this.destroy$)).subscribe(vt=>{this.nvcameraService.SetCameraControlFovRoll(!0,vt,void 0).subscribe()}),this.logger.info("Initialization done")}ngAfterViewInit(){setTimeout(()=>this.disableAnimation=!1)}updateResolution(ne){let Be,vt;this.resolutionInput=[];for(let Ct=0;Ct<this.currentCapture.resolutionsAvailable.length;Ct++)switch(this.currentCapture.type){case Ot.Yk.Common.Nvcamera.CaptureTypes.regular:case Ot.Yk.Common.Nvcamera.CaptureTypes.sphericalPanorama:case Ot.Yk.Common.Nvcamera.CaptureTypes.stereoRegular:case Ot.Yk.Common.Nvcamera.CaptureTypes.stereoSphericalPanorama:Be=this.currentCapture.resolutionsAvailable[Ct],vt=Be.width+"x"+Be.height,this.resolutionInput.push(vt);break;case Ot.Yk.Common.Nvcamera.CaptureTypes.highRes:Be=this.currentCapture.resolutionsAvailable[Ct],vt=Be.multiplier+"X - "+Be.width+"x"+Be.height,this.resolutionInput.push(vt)}this.resolutionSelection=0}resolutionChanged(ne){this.logger.info(" resolution changed",ne),this.resolutionSelection=ne,this.currentCaptureResolution=this.currentCapture.resolutionsAvailable[ne],this.logger.info("currentCaptureResolution changed",this.currentCaptureResolution)}close(){return this.logger.info("close"),this.navigationService.navigate([{outlets:{centerPane:null}}],{relativeTo:this.route.parent,skipLocationChange:!0})}ngOnDestroy(){this.logger.info("ngOnDestroy"),this.destroy$.next(!0),this.destroy$.unsubscribe(),this.captureInProgress=!1,this.nvcameraService.closeAlert(),this.nvcameraService.enableAnselRedirection(!1),this.sidebarComponent.setHideSidebar(!1),this.nvIgoComponent.setShowGrid(!1),this.isAnselLite?(0,F.of)(!0):this.nvcameraService.setGridOfThirds(!1).pipe((0,be.zg)(()=>{if(!this.showError&&!this.nvcameraService.restartRequired)return this.nvcameraService.closeMenu(l.AN.PhotoMode,!1);this.nvcameraService.changeUIRunning(!1)})).subscribe(ne=>{this.nvcameraService.changeUIRunning(!1),this.logger.info("menu closed successfully: ",ne)},ne=>{this.nvcameraService.changeUIRunning(!1),this.logger.error("error while closing menu: ",ne)})}gridSwitchChange(ne){this.logger.info("grid of thirds changed",this.gridSwitch),this.isAnselLite||this.igoConfig.GFNCefClient?this.nvIgoComponent.setShowGrid(this.gridSwitch):this.nvcameraService.setGridOfThirds(this.gridSwitch).subscribe()}hdrSwitchChange(ne){this.logger.info("inside hdrSwitchChange",ne)}onRotationSliderChange(ne){this.rollSlider.value!==ne&&(this.rollSlider.value=ne,this.rollValEmitter$.next(this.rollSlider.value))}onFOVSliderChange(ne){!this.enableFOV||this.fovSlider.value===ne||(this.fovSlider.value=ne,this.fovValEmitter$.next(this.fovSlider.value))}onCaptureDone(ne){this.logger.info("Capture Done"),this.captureInProgress=!1,ne?this.nvcameraService.closeAlert():this.nvcameraService.dialogRef&&(this.nvcameraService.dialogRef.componentInstance.dialogData.progressMode="indeterminate",this.nvcameraService.dialogRef.componentInstance.dialogData.query="nvcamera.FinalizingScene",this.nvcameraService.dialogRef.componentInstance.dialogData.progressPercentage=!1)}onCaptureFinished(){this.logger.info("Capture Finished"),this.captureInProgress=!1,this.nvcameraService.closeAlert()}onCaptureCancel(){this.nvcameraService.cancelCurrentCapture().subscribe(),this.captureInProgress=!1,this.nvcameraService.closeAlert(),this.screenshotFinishTime=Date.now(),this.sendAnselScreenshotTelemetry(l.WU.cancelled)}startNGXCapture(){if(this.logger.info("startNGXCapture",this.ngxSrcFilePathArray),this.ngxSrcFilePathArray.length>0){const ne=this.captureMenuMap.get(Ot.Yk.Common.Nvcamera.CaptureTypes.regular);let Be=this.ngxSrcFilePathArray[0];return"png"!==Be.slice(Be.length-3,Be.length)&&(Be=this.ngxSrcFilePathArray[0].slice(0,Be.length-4),Be=Be.concat(".png"),this.ngxSrcFilePathArray.push(Be)),this.nvcameraService.captureScreenshot(!0,{inputFile:Be,upResEffect:2,upResScale:this.currentCaptureResolution.multiplier,width:ne.resolutionsAvailable[0].width,height:ne.resolutionsAvailable[0].height})}}processNGXNotification(ne,Be){ne.ngxAIUpResProgress?(this.logger.info("progress: ",ne.ngxAIUpResProgress.progress),this.captureProgress=ne.ngxAIUpResProgress.progress,this.nvcameraService.dialogRef&&(this.nvcameraService.dialogRef.componentInstance.value=Math.round(this.captureProgress))):ne.ngxAIUpResCaptureDone&&(this.captureProgress=100,this.nvcameraService.dialogRef&&(this.nvcameraService.dialogRef.componentInstance.value=this.captureProgress),setTimeout(()=>{this.galleryService.removeItem(this.ngxSrcFilePathArray.pop()).subscribe(vt=>{this.logger.info("NGX shot src file deleted",vt)})},2e3),setTimeout(()=>{this.onCaptureDone(!0)},500),Be.unsubscribe())}processNvCameraCaptureNotification(ne,Be,vt){ne.captureShotProgress?(this.captureProgress=ne.captureShotProgress.currentShot/Be*100,this.nvcameraService.dialogRef&&(this.nvcameraService.dialogRef.componentInstance.value=Math.round(this.captureProgress))):(ne.captureShotFinished||ne.captureShotProcessingFinished)&&(this.captureProgress=100,this.nvcameraService.dialogRef&&(this.nvcameraService.dialogRef.componentInstance.value=this.captureProgress),ne.captureShotFinished?setTimeout(()=>{this.onCaptureDone(!1)},500):(setTimeout(()=>{this.onCaptureFinished()},500),vt.unsubscribe()))}gfnSnap(){this.logger.info("Capturing GFN Ansel snap"),this.captureProgress=0,this.captureInProgress=!0,this.nvcameraService.showAlert("nvcamera.PhotoMode","nvcamera.PhotographingScene",void 0,"confirmation.cancel",void 0,!1,!0,"determinate",this.destroy$,{next:vt=>{vt===Kt.DX.Action1&&(this.logger.info("User cancelled current capture"),this.onCaptureCancel())},error:vt=>{},complete:()=>{}}),this.screenshotStartTime=Date.now(),this.sendAnselScreenshotTelemetry(l.WU.started),this.nvcameraService.captureScreenshot(!1,void 0).subscribe(vt=>{},vt=>{this.logger.info("GFN screenshot capture failed"),this.onCaptureFinished(),this.nvcameraService.showSnack(l.pL.CaptureFailed),this.screenshotFinishTime=Date.now(),this.sendAnselScreenshotTelemetry(l.WU.failed,l.FC.anselScreenshotTimeoutFailure,vt)},()=>{this.logger.info("GFN screenshot capture successful"),this.captureProgress=100,this.nvcameraService.dialogRef&&(this.nvcameraService.dialogRef.componentInstance.value=this.captureProgress),setTimeout(()=>{this.onCaptureFinished()},500),this.screenshotFinishTime=Date.now(),this.sendAnselScreenshotTelemetry(l.WU.completed)})}onSnapClicked(){if(this.isGFNClient)return void this.gfnSnap();if(null===this.currentCapture||void 0===this.currentCaptureResolution)return void this.logger.info("failed to request capture");this.logger.info("Capturing snap: ",this.currentCapture.type);const ne=!(this.currentCapture.type===Ot.Yk.Common.Nvcamera.CaptureTypes.sphericalPanorama||this.currentCapture.type===Ot.Yk.Common.Nvcamera.CaptureTypes.stereoSphericalPanorama),Be=this.currentCapture.type===Ot.Yk.Common.Nvcamera.CaptureTypes.highRes&&"nvcamera.MethodAIUpRes"===this.currentMethod.id;let vt=Object(),Ct=0;if(Be){const At=this.captureMenuMap.get(Ot.Yk.Common.Nvcamera.CaptureTypes.regular);vt={captureType:At.type,resolutionMultiplier:At.resolutionsAvailable[0].multiplier,width:At.resolutionsAvailable[0].width,height:At.resolutionsAvailable[0].height,panoramaWidth:void 0,panoramaHeight:void 0,saveAsExr:!1,enhance:!1}}else vt={captureType:this.currentCapture.type,resolutionMultiplier:this.currentCaptureResolution.multiplier,width:ne?this.currentCaptureResolution.width:void 0,height:ne?this.currentCaptureResolution.height:void 0,panoramaWidth:ne?void 0:this.currentCaptureResolution.width,panoramaHeight:ne?void 0:this.currentCaptureResolution.height,saveAsExr:this.hdrSwitch,enhance:this.currentMethod?"nvcamera.MethodEnhance"===this.currentMethod.id:void 0};const gt=this.nvcameraService.captureScreenshot(!1,vt).pipe((0,pt.h)(At=>!Be||!!At.captureShotProcessingFinished||!!At.captureShotStarted),(0,be.zg)(At=>{if(At.captureShotStarted)this.captureProgress=0,this.captureInProgress=!0,Ct=At.captureShotStarted.shotCount,this.nvcameraService.showAlert("nvcamera.PhotoMode","nvcamera.PhotographingScene",void 0,"confirmation.cancel",void 0,!1,!0,"determinate",this.destroy$,{next:nt=>{nt===Kt.DX.Action1&&(this.logger.info("User cancelled current capture"),this.onCaptureCancel())},error:nt=>{},complete:()=>{}});else if(Be&&At&&At.captureShotProcessingFinished)return this.logger.info("captureShotProcessingFinished",At.captureShotProcessingFinished.path),this.ngxSrcFilePathArray.push(At.captureShotProcessingFinished.path),this.startNGXCapture();return(0,F.of)(At)})).subscribe(At=>{Be?this.processNGXNotification(At,gt):this.processNvCameraCaptureNotification(At,Ct,gt)},At=>{this.logger.error("error occured",At),gt.unsubscribe()})}onBackClicked(){this.logger.info("Back clicked"),this.close().then(function(){this.navigationService.navigate(["../main-menu"],{relativeTo:this.route.parent,skipLocationChange:!0},l.wB.mainMenu)}.bind(this))}onMouseDown(ne){0===ne.button&&(this.logger.info("Disable Ansel redirection"),window.document.body.style.cursor="auto",this.nvcameraService.enableAnselRedirection(!1),this.nvcameraService.setNavigationInputDevice([l.uv.Mouse],[l.Po.yes]))}onKeyDown(ne,Be){this.keyboardService.onKeyDown(ne,Be)}setToggleState(ne){this.captureEnhanceSwitch=ne.captureEnhanceState,this.captureEnhanceSwitch&&this.nvcameraService.restartRequired&&(this.restartGame=!0)}telemetryInit(){this.nvcameraService.navigationInputDevice.KEYBOARD=!1,this.nvcameraService.navigationInputDevice.MOUSE=!1,this.nvcameraService.panningUsed=!1,this.nvcameraService.panningWithKB=!1,this.nvcameraService.panningWithMouse=!1}sendAnselScreenshotTelemetry(ne,Be,vt){var Ct,gt;let At=Object();At={roll:Math.round(this.rollSlider.value),fov:Math.round(this.fovSlider.value),gridUsed:this.gridSwitch,screenshotResolution:(null===(Ct=this.currentCaptureResolution)||void 0===Ct?void 0:Ct.width.toString())+"x"+(null===(gt=this.currentCaptureResolution)||void 0===gt?void 0:gt.height.toString()),screenshotType:this.currentCapture.type[0].toUpperCase()+this.currentCapture.type.slice(1),mode:l.AN.PhotoMode,errorType:l.FC.anselScreenshotNoFailure,errorString:"",totalMs:0},ne!==l.WU.started&&(At.totalMs=this.screenshotFinishTime-this.screenshotStartTime),ne===l.WU.failed&&(At.errorType=Be,At.errorString=vt||"Unknown error"),this.nvcameraService.sendAnselScreenshotTelemetry(ne,At)}showErrorMessage(){switch(this.errorType){case l.IO.ERROR_TIMEOUT:this.nvcameraService.nvCameraTimedOut=!0,this.errorMsg="notification.WarningGameRequired",this.nvcameraService.sendAnselFreestyleErrorTelemetry(l.NX.anselFreestyleUnsupportedGameError,l.AN.PhotoMode);break;case l.IO.ERROR_SUPPORTED_GAME:this.errorMsg="notification.WarningGameRequired",this.nvcameraService.sendAnselFreestyleErrorTelemetry(l.NX.anselFreestyleUnsupportedGameError,l.AN.PhotoMode);break;case l.IO.ERROR_RESTART:this.errorMsg="notification.ErrorRestartGame",this.nvcameraService.sendAnselFreestyleErrorTelemetry(l.NX.anselFreestyleMenuLaunchError,l.AN.PhotoMode);break;default:this.logger.error("Unknown error msg type: "+this.errorType),this.errorMsg="",this.nvcameraService.sendAnselFreestyleErrorTelemetry(l.NX.anselFreestyleGeneralFailure,l.AN.PhotoMode)}}getHidePanelSubTitle(){return this.isMacPlatform?"H":"nvcamera.Insert"}}return ht.\u0275fac=function(ne){return new(ne||ht)(t.Y36(y.ed),t.Y36(l.nG),t.Y36(l.En),t.Y36(l.rj),t.Y36(i.gz),t.Y36(l.f5),t.Y36(nn.k7),t.Y36(l.vU),t.Y36(l.i8),t.Y36(tn.s),t.Y36(l.ad),t.Y36(l.gs))},ht.\u0275cmp=t.Xpm({type:ht,selectors:[["app-photo-mode"]],decls:4,vars:3,consts:[["fxLayout","column","fxFlex","",3,"mousedown","keydown"],[4,"ngIf"],["class","max-warning-area","fxLayout","row","fxLayoutGap","8px",4,"ngIf"],[3,"toggled"],["fxLayout","column","fxFlex","",4,"ngIf"],["fxLayout","column","fxFlex",""],["fxFlex","none",1,"nv-gap-16"],["fxFlex","grow",1,"photo-mode-layout"],["svgIcon","eye_off","titleString","nvcamera.HidePanel",3,"subTitle","disabled","clicked"],["fxLayout","row","fxLayoutAlign","start center",1,"toggle-height"],["fxFlex","grow",1,"font-body2"],["fxFlex","none",3,"ngModel","disabled","ngModelChange","change"],["class","nv-item","fxLayout","column",4,"ngIf"],["fxLayout","column","class","disabled-opacity",4,"ngIf"],["fxFlex","none"],["fxLayout","row","fxLayoutAlign","end end",4,"ngIf"],[1,"font-body2","nv-label"],[3,"selection","disabled","input","selectionChanged"],[1,"nv-gap-8"],[1,"nv-gap-16"],["fxLayout","row","fxLayoutAlign","start center","class","toggle-height",4,"ngIf"],["hideToggle","true",3,"expanded"],["collapsedHeight","40px","expandedHeight","40px",1,"font-sub1"],["fxLayout","row","fxLayoutAlign","start center","fxFlexFill",""],["fxFlex","",1,"font-sub1"],["mat-button","","fxFlex","none","fxLayout","row","fxLayoutAlign","center center",1,"nv-item-icon","complex-button"],["svgIcon","chevron_down",1,"accordion-chevron"],["fxLayout","column"],["fxLayout","row"],["fxFlex","grow",1,"font-body2","nv-label"],["fxFlex","","valueEntry","true","formatTextAs","Decimal",3,"min","max","step","value","disabled","input","valueChange"],["fxLayout","column",1,"nv-item"],[3,"filterStack"],["fxLayout","column",1,"disabled-opacity"],["fxFlex","grow",1,"font-sub1","nv-label"],["fxFlex","none","svgIcon","add",3,"disabled"],["fxLayout","row","fxLayoutAlign","end end"],["mat-button","",1,"font-button2","hig-button","snap-button",3,"click"],["fxLayout","row","fxLayoutGap","8px",1,"max-warning-area"],["svgIcon","warning",1,"icon-warning","nv-item-icon"],[1,"font-body2","limit-padding"]],template:function(ne,Be){1&ne&&(t.TgZ(0,"div",0),t.NdJ("mousedown",function(Ct){return Be.onMouseDown(Ct)})("keydown",function(Ct){return Be.onKeyDown(Ct)}),t.YNc(1,Mn,2,0,"ng-container",1),t.YNc(2,Et,2,1,"ng-container",1),t.YNc(3,Ee,5,3,"div",2),t.qZA()),2&ne&&(t.xp6(1),t.Q6J("ngIf",!Be.isGFNClient),t.xp6(1),t.Q6J("ngIf",!Be.showError),t.xp6(1),t.Q6J("ngIf",Be.showError&&Be.captureEnhanceSwitch))},directives:[h.xw,h.yH,n.O5,x,Y.n,C.i,h.Wh,u.Rr,o.xZ,c.JJ,c.On,E.n,ae.y,S.pp,S.ib,S.yz,h.s9,se.lW,g.Hw,fe.Q,St,h.SQ],pipes:[w.X$],styles:['.nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-error[_ngcontent-%COMP%]{color:#e02828}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}body[_ngcontent-%COMP%]   nv-oogg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:0;background:rgba(255,255,255,.3)}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:0;background:rgba(255,255,255,.7)}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus, .nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none}nv-oogg[_ngcontent-%COMP%]   [readonly][_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   [type=readonly][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   [readonly][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   [type=readonly][_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;padding:0}nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled), nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled), .nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none}nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   dir[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   dir[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{-webkit-margin-before:0!important;-webkit-margin-after:0!important;-webkit-margin-start:0!important;-webkit-margin-end:0!important;-webkit-padding-start:0!important;-moz-margin-start:0!important;-moz-margin-end:0!important;-moz-padding-start:0!important}nv-oogg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0}nv-oogg[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.photo-mode-layout[_ngcontent-%COMP%]{box-sizing:border-box;background-clip:content-box;overflow-y:overlay}.isLtr[_nghost-%COMP%]   .photo-mode-layout[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .photo-mode-layout[_ngcontent-%COMP%]{margin-right:-24px}html[dir=ltr][_ngcontent-%COMP%]   .photo-mode-layout[_ngcontent-%COMP%]{--dummy4: 0;margin-right:-24px}.isRtl[_nghost-%COMP%]   .photo-mode-layout[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .photo-mode-layout[_ngcontent-%COMP%]{margin-left:-24px}html[dir=rtl][_ngcontent-%COMP%]   .photo-mode-layout[_ngcontent-%COMP%]{--dummy4: 0;margin-left:-24px}.isLtr[_nghost-%COMP%]   .photo-mode-layout[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .photo-mode-layout[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .photo-mode-layout[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .photo-mode-layout[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .photo-mode-layout[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .photo-mode-layout[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}[_nghost-%COMP%]{padding:24px;overflow-y:auto}.limit-padding[_ngcontent-%COMP%]{padding:8px 0}.max-warning-area[_ngcontent-%COMP%]{margin:16px 0 0}.toggle-height[_ngcontent-%COMP%]{height:36px}.snap-button[_ngcontent-%COMP%]{background-color:#76b900}']}),ht})(),data:{level:1}},{path:"client-area",component:(()=>{class ht{constructor(ne,Be,vt){this.loggingService=ne,this.nvcameraService=Be,this.igoConfig=vt,this.destroy$=new a.xQ,this.dragX=0,this.dragY=0,this.logger=this.loggingService.getLogger("client-area")}onMouseDown(ne){this.nvcameraService.getCurrentUIMode()===l.AN.PhotoMode&&0===ne.button&&(this.logger.info("Ansel SDK redirection toggle"),window.document.body.style.cursor="none",this.nvcameraService.enableAnselRedirection(!0),this.nvcameraService.panningUsed=!0,this.nvcameraService.panningWithMouse=!0)}onMouseUp(ne){0===ne.button&&(window.document.body.style.cursor="auto")}onMouseClick(ne){this.nvcameraService.getCurrentUIMode()===l.AN.PhotoModeLight&&0===ne.button&&(this.logger.info("Ansel NoSDK redirection toggle"),window.document.body.style.cursor="none",this.nvcameraService.togglePanning())}ngOnInit(){this.logger.info("Ansel ClientArea initialized")}ngAfterViewInit(){if(this.igoConfig.GFNCefClient){const ne=(0,$e.R)(document,"keydown").pipe((0,_t.p)(200),(0,p.R)(this.destroy$)),Be=(0,$e.R)(document,"keyup").pipe((0,p.R)(this.destroy$)),vt=(0,$e.R)(this.clientRef.nativeElement,"mousedown").pipe((0,p.R)(this.destroy$)),Ct=(0,$e.R)(this.clientRef.nativeElement,"mouseup").pipe((0,p.R)(this.destroy$)),gt=(0,$e.R)(this.clientRef.nativeElement,"mousemove").pipe((0,p.R)(this.destroy$)),At=vt.pipe((0,be.zg)((le,De)=>0===le.button?gt.pipe((0,p.R)(Ct)):(0,F.of)(le)));ne.subscribe(le=>{dn[le.code]&&this.nvcameraService.gfnKBEvent("keyDown",dn[le.code],le.code,le.shiftKey)}),Be.subscribe(le=>{dn[le.code]&&this.nvcameraService.gfnKBEvent("keyUp",dn[le.code],le.code,le.shiftKey)}),At.pipe((0,U.b)(le=>{this.dragX+=le.movementX,this.dragY+=le.movementY}),(0,_t.p)(100)).subscribe(le=>{this.nvcameraService.gfnMouseEvent("drag",Zt[le.button],this.dragX,this.dragY),this.dragX=0,this.dragY=0}),Ct.subscribe(le=>{this.dragX=0,this.dragY=0,this.nvcameraService.gfnMouseEvent("up",Zt[le.button],0,0)}),vt.subscribe(le=>{this.dragX=0,this.dragY=0,this.nvcameraService.gfnMouseEvent("down",Zt[le.button],le.movementX,le.movementY)})}}ngOnDestroy(){this.logger.info("Ansel ClientArea destroyed"),this.destroy$.next(!0),this.destroy$.unsubscribe(),this.nvcameraService.enableAnselRedirection(!1)}}return ht.\u0275fac=function(ne){return new(ne||ht)(t.Y36(y.ed),t.Y36(l.En),t.Y36(l.gs))},ht.\u0275cmp=t.Xpm({type:ht,selectors:[["nv-client-area"]],viewQuery:function(ne,Be){if(1&ne&&t.Gf(kt,5),2&ne){let vt;t.iGM(vt=t.CRH())&&(Be.clientRef=vt.first)}},decls:2,vars:0,consts:[[1,"client-area",3,"mousedown","mouseup","click"],["clientdiv",""]],template:function(ne,Be){1&ne&&(t.TgZ(0,"div",0,1),t.NdJ("mousedown",function(Ct){return Be.onMouseDown(Ct)})("mouseup",function(Ct){return Be.onMouseUp(Ct)})("click",function(Ct){return Be.onMouseClick(Ct)}),t.qZA())},styles:[".client-area[_ngcontent-%COMP%]{position:fixed;width:100vw;height:100vh;overflow:auto}"]}),ht})(),outlet:"centerPane"}];let Ln=(()=>{class ht{}return ht.\u0275fac=function(ne){return new(ne||ht)},ht.\u0275mod=t.oAB({type:ht}),ht.\u0275inj=t.cJS({imports:[[T.m,n.ez,m.o9,D.Cv,r.Q,i.Bz.forChild(Pn),(0,y.zv)()]]}),ht})()},93937:(He,de,e)=>{"use strict";e.d(de,{IR:()=>n.I,gs:()=>G.gs,wt:()=>h,m8:()=>i.m,k7:()=>I.k7});var n=e(14873),i=e(25816),D=e(54364),m=e(66660),y=e(58283),T=e(71258),r=e(51),a=e(6484),s=e(2316);let p=(()=>{class x{}return x.\u0275fac=function(P){return new(P||x)},x.\u0275mod=s.oAB({type:x}),x.\u0275inj=s.cJS({imports:[[D.ez,m.o9,r.Q,i.m,(0,a.zv)()]]}),x})();var l=e(52529),t=e(52825);let w=(()=>{class x{}return x.\u0275fac=function(P){return new(P||x)},x.\u0275mod=s.oAB({type:x}),x.\u0275inj=s.cJS({imports:[[D.ez,l.Ps,m.o9,t.Gp,(0,a.zv)()]]}),x})(),h=(()=>{class x{}return x.\u0275fac=function(P){return new(P||x)},x.\u0275mod=s.oAB({type:x}),x.\u0275inj=s.cJS({imports:[[D.ez,T.Bz,m.o9,r.Q,y.aw.forChild(),p,w]]}),x})();e(39207),e(64067),e(13833),e(18120),e(16661);var I=e(44211),G=e(94377)},18120:(He,de,e)=>{"use strict";e.r(de),e.d(de,{SettingsModule:()=>yo});var n=e(54364),i=e(71258),D=e(66660),m=e(6484),y=e(25816),T=e(51),r=e(42720),a=e(94377),s=e(79441),p=e(22663),l=e(24181),t=e(2316);let w=(()=>{class Ne{constructor(H,pe,Ae,et=null,wt=null){this.navigationService=H,this.route=pe,this.appBarService=Ae,this.dialog=et,this.gfnInfoService=wt,this.destroy$=new s.xQ,this.caller="../settings/settings",this.disableRecordSpecialCase=l.Kk.RECORD_SPECIAL_CASE_NONE}bar(H=""){this.appBarService.setAll({title:H,navButtonArrow:!0,icons:[{id:"closeIgo",icon:"close",tooltip:"tooltips.Close"}]}),this.appBarService.actionClicked$.pipe((0,p.R)(this.destroy$)).subscribe(pe=>{"nav"===pe&&this.onBackClicked()})}ngOnInit(){this.navigationService.escapeEvent().pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.onBackClicked()}),this.caller=this.route.snapshot.paramMap.get("caller")||this.caller,this.gfnInfoService&&this.gfnInfoService.getRecordSpecialCase().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.disableRecordSpecialCase=H})}ngOnDestroy(){this.dialog&&this.dialog.closeSnackBar(),this.destroy$.next(!0),this.destroy$.unsubscribe()}onBackClicked(){this.navigationService.navigate([this.caller],{relativeTo:this.route.parent,skipLocationChange:!0})}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(a.f5),t.Y36(i.gz),t.Y36(a.ad),t.Y36(a.Mb),t.Y36(a.In))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-settings-base"]],decls:0,vars:0,template:function(H,pe){},encapsulation:2}),Ne})();const h_supportedLang=["bg_BG","cs_CZ","da_DK","de_DE","el_GR","en_GB","en_US","es_ES","es_MX","fi_FI","fr_FR","hr_HR","hu_HU","it_IT","ja_JP","ko_KR","nb_NO","nl_NL","pl_PL","pt_BR","pt_PT","ro_RO","ru_RU","sk_SK","sl_SI","sv_SE","th_TH","tr_TR","uk_UA","zh_CN","zh_TW"];var u=e(53466);const f=[{LCID:[1026],code:"bg_BG",name:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 (Bulgerian)",isoThreeLetter:"bgr",countryCode:"BG"},{LCID:[1029],code:"cs_CZ",name:"\u010de\u0161tina (Czech)",isoThreeLetter:"ces",countryCode:"CZ"},{LCID:[1030],code:"da_DK",name:"Dansk (Danish)",isoThreeLetter:"dan",countryCode:"DK"},{LCID:[1031,3079,5127,4103,2055],code:"de_DE",name:"Deutsch (German)",isoThreeLetter:"deu",countryCode:"DE"},{LCID:[1032],code:"el_GR",name:"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac (Greek)",isoThreeLetter:"ell",countryCode:"GR"},{LCID:[1033],code:"en_US",name:"English (United States)",isoThreeLetter:"eng",countryCode:"US"},{LCID:[2057,1078,1052,1118,1067,1101,1068,5146,1026,1109,1050,4122,1125,2067,1126,3081,10249,6153,5129,7177,12297,1061,1127,1071,2108,1084,1079,1129,1039,1136,1137,2144,1120,1087,1153,2128,2068,1048,2074,1091,1093,2117,16393,1081,1121,2145,1094,2118,1113,2137,1115,2080,3081,15369,14345,17417,5129,13321,18441],code:"en_GB",name:"English (United Kingdom)",isoThreeLetter:"eng",countryCode:"GB"},{LCID:[3082,1069,1027,1034],code:"es_ES",name:"Espa\xf1ol (Spanish - Spain)",isoThreeLetter:"spa",countryCode:"ES"},{LCID:[3082,11274,16394,13322,9226,5130,7178,12298,17418,4106,18442,58378,2058,19466,6154,15370,10250,20490,21514,14346,8202],code:"es_MX",name:"Espa\xf1ol (Spanish - Mexico)",isoThreeLetter:"spa",countryCode:"MX"},{LCID:[1035],code:"fi_FI",name:"Suomi (Finnish)",isoThreeLetter:"fin",countryCode:"FI"},{LCID:[1036,2060,11276,3084,9228,12300,15372,5132,13324,6156,14348,58380,8204,10252,4108,7180,1122],code:"fr_FR",name:"Fran\xe7ais (French)",isoThreeLetter:"fra",countryCode:"FR"},{LCID:[1050],code:"hr_HR",name:"Hrvatski (Croatian)",isoThreeLetter:"hrv",countryCode:"HR"},{LCID:[1038],code:"hu_HU",name:"Magyar (Hungarian)",isoThreeLetter:"hun",countryCode:"HU"},{LCID:[1040,2064],code:"it_IT",name:"Italiano (Italian - Italy)",isoThreeLetter:"ita",countryCode:"IT"},{LCID:[1041],code:"ja_JP",name:"\u65e5\u672c\u8a9e (Japanese)",isoThreeLetter:"jpn",countryCode:"JP"},{LCID:[1042],code:"ko_KR",name:"\ud55c\uad6d\uc5b4 (Korean)",isoThreeLetter:"kor",countryCode:"KR"},{LCID:[1043],code:"nl_NL",name:"Nederlands (Dutch - Netherlands)",isoThreeLetter:"nld",countryCode:"NL"},{LCID:[1044,14],code:"nb_NO",name:"Norsk (Norwegian)",isoThreeLetter:"nor",countryCode:"NO"},{LCID:[1045],code:"pl_PL",name:"Polski (Polish)",isoThreeLetter:"pol",countryCode:"PL"},{LCID:[2070],code:"pt_PT",name:"Portugu\xeas (Portuguese - Portugal)",isoThreeLetter:"por",countryCode:"PT"},{LCID:[1046,2070],code:"pt_BR",name:"Portugu\xeas-Brasil (Portuguese - Brazil)",isoThreeLetter:"por",countryCode:"BR"},{LCID:[1048],code:"ro_RO",name:"Rom\xe2n\u0103 (Romanian)",isoThreeLetter:"rou",countryCode:"RO"},{LCID:[1049,2092,1059,1088,1104,2073,3098,2115,1058],code:"ru_RU",name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 (Russian)",isoThreeLetter:"rus",countryCode:"RU"},{LCID:[1051],code:"sk_SK",name:"slovensk\xfdch (Slovak)",isoThreeLetter:"slk",countryCode:"SK"},{LCID:[1060],code:"sl_SI",name:"slovenski (Slovenian)",isoThreeLetter:"slv",countryCode:"SI"},{LCID:[1053],code:"sv_SE",name:"Svenska (Swedish)",isoThreeLetter:"swe",countryCode:"SE"},{LCID:[1054],code:"th_TH",name:"\u0e44\u0e17\u0e22 (Thai)",isoThreeLetter:"tha",countryCode:"TH"},{LCID:[1055],code:"tr_TR",name:"T\xfcrk\xe7e (Turkish)",isoThreeLetter:"tur",countryCode:"TR"},{LCID:[1058],code:"uk_UA",name:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430 (Ukrainian)",isoThreeLetter:"ukr",countryCode:"UA"},{LCID:[2052,804,4],code:"zh_CN",cmsCode:"zh_CN",name:"\u7b80\u4f53\u4e2d\u6587 (Chinese - Simplified)",isoThreeLetter:"zho",countryCode:"CN"},{LCID:[3076,1028,4100,404,5124,31748],code:"zh_TW",cmsCode:"zh_TW",name:"\u7e41\u9ad4\u4e2d\u6587 (Chinese - Traditional)",isoThreeLetter:"zho",countryCode:"CN"}];var c=e(30582),g=e(3794),I=e(34663),G=e(32080),x=e(84622),E=e(78819),P=e(1707),v=e(52529),O=e(85136),C=e(58283);function _(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-item-button",14),t.NdJ("clicked",function(){return t.CHM(H),t.oxw().generalClicked()}),t.qZA()}2&Ne&&t.Q6J("chevron",!0)}function F(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-item-button",15),t.NdJ("clicked",function(){return t.CHM(H),t.oxw().gameplayClicked()}),t.qZA()}2&Ne&&t.Q6J("chevron",!0)}function V(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-item-button",16),t.NdJ("clicked",function(){return t.CHM(H),t.oxw().systemClicked()}),t.qZA()}2&Ne&&t.Q6J("chevron",!0)}function b(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-item-button",17),t.NdJ("clicked",function(){return t.CHM(H),t.oxw().shortcutsClicked()}),t.qZA()}2&Ne&&t.Q6J("chevron",!0)}function B(Ne,Rt){1&Ne&&t._UZ(0,"nv-divider")}function U(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-item-button",18),t.NdJ("clicked",function(){return t.CHM(H),t.oxw().highlightsClicked()}),t.qZA()}2&Ne&&t.Q6J("chevron",!0)}function A(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-item-button",19),t.NdJ("clicked",function(){return t.CHM(H),t.oxw().audioCaptureClicked()}),t.qZA()}2&Ne&&t.Q6J("chevron",!0)}function S(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-item-button",20),t.NdJ("clicked",function(){return t.CHM(H),t.oxw().videoCaptureClicked()}),t.qZA()}2&Ne&&t.Q6J("chevron",!0)}function Y(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-item-button",21),t.NdJ("clicked",function(){return t.CHM(H),t.oxw().storageClicked()}),t.qZA()}2&Ne&&t.Q6J("chevron",!0)}function se(Ne,Rt){1&Ne&&t._UZ(0,"nv-divider")}function fe(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-item-button",22),t.NdJ("clicked",function(){return t.CHM(H),t.oxw().debugClicked()}),t.qZA()}2&Ne&&t.Q6J("chevron",!0)}function $(Ne,Rt){1&Ne&&t._UZ(0,"nv-divider")}function ae(Ne,Rt){1&Ne&&(t.TgZ(0,"div",23),t.TgZ(1,"div",30),t.TgZ(2,"div",31),t._UZ(3,"mat-icon",32),t.qZA(),t.TgZ(4,"div",33),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t._UZ(7,"div",34),t.qZA()),2&Ne&&(t.xp6(5),t.Oqu(t.lcZ(6,1,"settings.StopToChange")))}function me(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div",23),t.TgZ(1,"div",26),t.TgZ(2,"div",27),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-slide-toggle",28),t.NdJ("ngModelChange",function(Ae){return t.CHM(H),t.oxw(2).dtCaptureState=Ae})("change",function(Ae){return t.CHM(H),t.oxw(2).dtCaptureChanged(Ae)}),t.qZA(),t._UZ(6,"div",29),t.qZA(),t._UZ(7,"div",29),t.YNc(8,ae,8,3,"div",13),t.qZA()}if(2&Ne){const H=t.oxw(2);t.xp6(2),t.ekj("disabled-opacity",!H.enableDTCapture),t.xp6(1),t.hij(" ",t.lcZ(4,6,"settings.DesktopCapture")," "),t.xp6(2),t.Q6J("disabled",!H.enableDTCapture)("ngModel",H.dtCaptureState),t.xp6(3),t.Q6J("ngIf",!H.enableDTCapture)}}function ye(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-dropdown",35),t.NdJ("selectionChanged",function(Ae){return t.CHM(H),t.oxw(2).languageChanged(Ae)}),t.qZA()}if(2&Ne){const H=t.oxw(2);t.Q6J("maxHeight",300)("selection",H.initialLangIndex)("input",H.languageNames)}}function ue(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div",23),t.YNc(1,$,1,0,"nv-divider",7),t.YNc(2,me,9,8,"div",13),t.TgZ(3,"div",24),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.YNc(6,ye,1,3,"nv-dropdown",25),t.qZA()),2&Ne){const H=t.oxw();t.xp6(1),t.Q6J("ngIf",H.enableDTCapture&&H.showDTCapture||H.enableLanguage),t.xp6(1),t.Q6J("ngIf",H.showDTCapture),t.xp6(2),t.Oqu(t.lcZ(5,4,"settings.Language")),t.xp6(2),t.Q6J("ngIf",H.enableLanguage)}}let X=(()=>{class Ne extends w{constructor(H,pe,Ae,et,wt,Yt,Xt,In,Tn){super(pe,Ae,et),this.loggingService=H,this.igoConfig=wt,this.localeService=Yt,this.shadowPlayService=Xt,this.sdkHighlightsService=In,this.featureSupportService=Tn,this.dtCaptureState=!1,this.enableDTCapture=!1,this.showDTCapture=!1,this.showGFEExtensions=!1,this.dcSupported=!1,this.mrInProgress=!1,this.irInProgress=!1,this.irEnabled=!1,this.brInProgress=!1,this.highlightsActive=!1,this.enableLanguage=!1,this.languages=h_supportedLang,this.languageNames=[],this.initialLangIndex=5,this.showAudio=!1,this.showSystem=!1,this.shadowPlayEnable=!1,this.sdkGalleryEnable=!1,this.showGeneral=!1,this.showGameplay=!1,this.showDebug=!1,this.showShortcutControls=!1,this.isGamepadOrientedMode=!1,super.bar("settings.Settings"),this.logger=this.loggingService.getLogger("Settings"),this.logger.info("Constructor"),this.shadowPlayEnable=this.featureSupportService.isShadowPlayEnabled(),this.sdkGalleryEnable=this.featureSupportService.isSdkGalleryEnabled(),this.isGamepadOrientedMode=Tn.isGamepadOrientedMode(),this.showShortcutControls=this.featureSupportService.isKeyboardMouseGamesAllowed()}ngOnInit(){super.ngOnInit(),this.clientLocales=f,"GFN"===this.igoConfig.branding&&(this.showGeneral=!0,this.showSystem=!0,this.showGameplay=!0,this.showDebug=!1),"GFE"===this.igoConfig.branding&&(0,r.D)([this.shadowPlayService.getDesktopCaptureSupported(),this.shadowPlayService.getDesktopCaptureEnabled(),this.shadowPlayService.getInstantReplayRunningStatus(),this.shadowPlayService.getInstantReplayEnableStatus(),this.shadowPlayService.getMRState().pipe((0,u.q)(1))]).pipe((0,p.R)(this.destroy$)).subscribe(([H,pe,Ae,et,wt])=>{this.irInProgress=Ae,this.irEnabled=et,this.mrInProgress=wt,this.dcSupported=H,this.checkDTCapture(),this.logger.info("DT Supported: "+H+" DT Enabled: "+pe),this.logger.info("Running IR: "+Ae+" MR: "+wt),H&&(this.dtCaptureState=pe)}),"GFE"===this.igoConfig.branding&&(this.showAudio=!0,this.showGFEExtensions=!0,this.showDTCapture=!this.shadowPlayService.isNotebookCoProcSystem()),"GFN"===this.igoConfig.branding&&this.featureSupportService.isSystemEnabled().pipe((0,p.R)(this.destroy$)).subscribe(H=>this.showSystem=H),this.enableLanguage=this.igoConfig.LanguageSelectionEnabled||"GFE"===this.igoConfig.branding,this.enableLanguage&&this.processLanguage(),this.shadowPlayEnable&&(this.shadowPlayService.getMRState().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.mrInProgress=H,this.checkDTCapture()}),this.shadowPlayService.getIRState().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.irInProgress=H===a.YQ.recording,this.irEnabled=H===a.YQ.on,this.checkDTCapture()})),this.featureSupportService.isSdkGalleryEnabled()&&this.sdkHighlightsService.isHighlightsActive().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.highlightsActive=H,this.checkDTCapture()})}ngOnDestroy(){super.ngOnDestroy(),this.backCallback$&&this.backCallback$.unsubscribe()}generalClicked(){this.logger.info("General clicked"),this.navigationService.navigate(["../settings/general"],{relativeTo:this.route.parent,skipLocationChange:!0},a.wB.general)}systemClicked(){this.logger.info("System clicked"),this.navigationService.navigate(["../settings/system"],{relativeTo:this.route.parent,skipLocationChange:!0},a.wB.system)}gameplayClicked(){this.logger.info("Gameplay clicked"),this.navigationService.navigate(["../settings/gameplay"],{relativeTo:this.route.parent,skipLocationChange:!0},a.wB.gameplay)}debugClicked(){this.logger.info("Debug clicked"),this.navigationService.navigate(["../settings/debug"],{relativeTo:this.route.parent,skipLocationChange:!0},a.wB.debug)}highlightsClicked(){this.logger.info("highlights clicked"),this.navigationService.navigate(["../settings/highlights"],{relativeTo:this.route.parent,skipLocationChange:!0},a.wB.highlights)}videoCaptureClicked(){this.logger.info("video capture clicked"),this.navigationService.navigate(["../settings/video"],{relativeTo:this.route.parent,skipLocationChange:!0},a.wB.videoCapture)}audioCaptureClicked(){this.logger.info("audio capture clicked"),this.navigationService.navigate(["../settings/audio"],{relativeTo:this.route.parent,skipLocationChange:!0},a.wB.audioCapture)}storageClicked(){this.logger.info("storage clicked"),this.navigationService.navigate(["../settings/storage"],{relativeTo:this.route.parent,skipLocationChange:!0},a.wB.storage)}shortcutsClicked(){this.logger.info("shortcuts clicked"),this.navigationService.navigate(["../settings/shortcuts"],{relativeTo:this.route.parent,skipLocationChange:!0},a.wB.shortcuts)}headsupClicked(){this.logger.info("headsup clicked"),this.navigationService.navigate(["../settings/hud"],{relativeTo:this.route.parent,skipLocationChange:!0},a.wB.headsup)}notificationsClicked(){this.logger.info("notifications clicked"),this.navigationService.navigate(["../settings/notifications"],{relativeTo:this.route.parent,skipLocationChange:!0},a.wB.notifications)}onBackClicked(){this.logger.info("Back clicked"),this.navigationService.navigate(["../main-menu"],{relativeTo:this.route.parent,skipLocationChange:!0},a.wB.mainMenu)}dtCaptureChanged(H){this.logger.info("DT Capture changed: ",H.checked);const pe=this.shadowPlayService.SetDesktopCaptureEnabled(H.checked).subscribe(()=>{pe.unsubscribe()})}checkDTCapture(){this.enableDTCapture=this.dcSupported&&!this.irInProgress&&!this.irEnabled&&!this.mrInProgress&&!this.brInProgress&&!this.highlightsActive}processLanguage(){this.languages.forEach((H,pe)=>{const Ae=this.getLanguageName(pe);this.logger.info("Language: "+H+" name: "+Ae),this.languageNames.push(Ae)}),this.localeService.localeChanged.pipe((0,u.q)(1)).subscribe(H=>{this.logger.info("Current Locale: ",H),this.languages.forEach((pe,Ae)=>{pe===H&&(this.initialLangIndex=Ae)})})}languageChanged(H){this.logger.info("Language changed to: "+this.languages[H]+" name: "+this.languageNames[H]),this.localeService.setLocale(this.languages[H])}getLanguageName(H){return this.clientLocales.find(pe=>pe.code===this.languages[H]).name}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(m.ed),t.Y36(a.f5),t.Y36(i.gz),t.Y36(a.ad),t.Y36(a.gs),t.Y36(m.OL),t.Y36(a.dS),t.Y36(a.b5),t.Y36(a.lm))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-settings"]],features:[t.qOj],decls:15,vars:14,consts:[["fxLayout","column","fxFlex","","fxLayoutGap","8px"],["svgIcon","info","titleString","settings.General",3,"chevron","clicked",4,"ngIf"],["svgIcon","gameplay","titleString","settings.Gameplay",3,"chevron","clicked",4,"ngIf"],["svgIcon","desktop","titleString","settings.System",3,"chevron","clicked",4,"ngIf"],["svgIcon","keyboard","titleString","settings.KeyboardShortcuts",3,"chevron","clicked",4,"ngIf"],["svgIcon","heads_up_display","titleString","settings.HeadsUpDisplay",3,"chevron","clicked"],["svgIcon","bell","titleString","settings.Notifications",3,"chevron","clicked"],[4,"ngIf"],["svgIcon","highlights","titleString","commonLabels.Highlights",3,"chevron","clicked",4,"ngIf"],["svgIcon","audio","titleString","audio.Audio",3,"chevron","clicked",4,"ngIf"],["svgIcon","videocam","titleString","settings.VideoCapture",3,"chevron","clicked",4,"ngIf"],["svgIcon","storage","titleString","settings.FilesAndDiskSpace",3,"chevron","clicked",4,"ngIf"],["svgIcon","wrench","titleString","settings.Debug",3,"chevron","clicked",4,"ngIf"],["fxLayout","column",4,"ngIf"],["svgIcon","info","titleString","settings.General",3,"chevron","clicked"],["svgIcon","gameplay","titleString","settings.Gameplay",3,"chevron","clicked"],["svgIcon","desktop","titleString","settings.System",3,"chevron","clicked"],["svgIcon","keyboard","titleString","settings.KeyboardShortcuts",3,"chevron","clicked"],["svgIcon","highlights","titleString","commonLabels.Highlights",3,"chevron","clicked"],["svgIcon","audio","titleString","audio.Audio",3,"chevron","clicked"],["svgIcon","videocam","titleString","settings.VideoCapture",3,"chevron","clicked"],["svgIcon","storage","titleString","settings.FilesAndDiskSpace",3,"chevron","clicked"],["svgIcon","wrench","titleString","settings.Debug",3,"chevron","clicked"],["fxLayout","column"],[1,"font-body2","nv-label"],[3,"maxHeight","selection","input","selectionChanged",4,"ngIf"],["fxFlex","none","fxLayout","row","fxLayoutAlign","start center",1,"toggle-height"],["fxFlex","grow",1,"font-body2"],["fxFlex","none",1,"settings-padding",3,"disabled","ngModel","ngModelChange","change"],[1,"nv-gap-8"],["fxLayout","row","fxLayoutAlign","start center"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"nv-item-icon"],["svgIcon","alert_circle",1,"icon-alert"],[1,"font-body2"],[1,"nv-gap-16"],[3,"maxHeight","selection","input","selectionChanged"]],template:function(H,pe){1&H&&(t.TgZ(0,"div",0),t.YNc(1,_,1,1,"nv-item-button",1),t.YNc(2,F,1,1,"nv-item-button",2),t.YNc(3,V,1,1,"nv-item-button",3),t.YNc(4,b,1,1,"nv-item-button",4),t.TgZ(5,"nv-item-button",5),t.NdJ("clicked",function(){return pe.headsupClicked()}),t.qZA(),t.TgZ(6,"nv-item-button",6),t.NdJ("clicked",function(){return pe.notificationsClicked()}),t.qZA(),t.YNc(7,B,1,0,"nv-divider",7),t.YNc(8,U,1,1,"nv-item-button",8),t.YNc(9,A,1,1,"nv-item-button",9),t.YNc(10,S,1,1,"nv-item-button",10),t.YNc(11,Y,1,1,"nv-item-button",11),t.YNc(12,se,1,0,"nv-divider",7),t.YNc(13,fe,1,1,"nv-item-button",12),t.YNc(14,ue,7,6,"div",13),t.qZA()),2&H&&(t.xp6(1),t.Q6J("ngIf",pe.showGeneral),t.xp6(1),t.Q6J("ngIf",pe.showGameplay),t.xp6(1),t.Q6J("ngIf",pe.showSystem),t.xp6(1),t.Q6J("ngIf",pe.showShortcutControls),t.xp6(1),t.Q6J("chevron",!0),t.xp6(1),t.Q6J("chevron",!0),t.xp6(1),t.Q6J("ngIf",pe.sdkGalleryEnable||pe.shadowPlayEnable),t.xp6(1),t.Q6J("ngIf",pe.sdkGalleryEnable),t.xp6(1),t.Q6J("ngIf",pe.showAudio&&pe.shadowPlayEnable),t.xp6(1),t.Q6J("ngIf",pe.shadowPlayEnable),t.xp6(1),t.Q6J("ngIf",pe.shadowPlayEnable),t.xp6(1),t.Q6J("ngIf",pe.showDebug),t.xp6(1),t.Q6J("ngIf",pe.showDebug),t.xp6(1),t.Q6J("ngIf",pe.showGFEExtensions))},directives:[c.xw,c.yH,c.SQ,n.O5,g.n,I.n,c.Wh,G.Rr,x.xZ,E.i,P.JJ,P.On,v.Hw,O.y],pipes:[C.X$],styles:[".nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-error[_ngcontent-%COMP%]{color:#e02828}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}[_nghost-%COMP%]{padding:24px}.isLtr[_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%]{padding-right:10px}html[dir=ltr][_ngcontent-%COMP%]   .settings-padding[_ngcontent-%COMP%]{--dummy2: 0;padding-right:10px}.isRtl[_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%]{padding-left:10px}html[dir=rtl][_ngcontent-%COMP%]   .settings-padding[_ngcontent-%COMP%]{--dummy2: 0;padding-left:10px}.toggle-height[_ngcontent-%COMP%]{height:36px}"]}),Ne})();var j=e(12556),K=e(43124),Z=e(2984),L=e(2281),W=e(73159),te=e(74058);function ie(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-item-button",17),t.NdJ("clicked",function(){return t.CHM(H),t.oxw().onShowReleaseHighlight()}),t.qZA()}}function Q(Ne,Rt){if(1&Ne&&(t.TgZ(0,"span",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne){const H=t.oxw();t.xp6(1),t.Oqu(t.xi3(2,1,"settings.general.nextBillingDate",H.currentMembership))}}function k(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div"),t._UZ(1,"nv-divider"),t.TgZ(2,"div",18),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"mat-checkbox",19),t.NdJ("ngModelChange",function(Ae){return t.CHM(H),t.oxw().technicalConsentModel=Ae})("change",function(){return t.CHM(H),t.oxw().technicalConsentCheckboxChange()}),t.TgZ(8,"span",20),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&Ne){const H=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,3,t.lcZ(5,5,"settings.Privacy"))," "),t.xp6(4),t.Q6J("ngModel",H.technicalConsentModel),t.xp6(2),t.Oqu(t.lcZ(10,7,"settings.privacy.ShareData"))}}let oe=(()=>{class Ne extends w{constructor(H,pe,Ae,et,wt,Yt,Xt,In,Tn,Qn,Xn,wn,Gi,ci,qn){super(Ae,et,wt,null,Yt),this.injector=H,this.loggingService=pe,this.localeService=Xt,this.appConfig=In,this.oscDisplayService=Tn,this.bridgeService=Qn,this.telemetryUtilService=Xn,this.matIconRegistry=wn,this.userConsentService=Gi,this.gfnSdkService=ci,this.dateFormatterService=qn,this.validMembership=!1,super.bar("commonLabels.General"),this.logger=this.loggingService.getLogger("General"),this.isAnonUser$=this.gfnSdkService.getIsAnonymousUser()}ngOnInit(){this.logger.info("Entered General"),super.ngOnInit(),this.settingsService=this.injector.get(j.gbG),this.ecommerceService=this.injector.get(j.BHV),this.nvSettingsParams={version:this.appConfig.build.version,variant:this.appConfig.build.variant,type:this.appConfig.build.type};let et="",wt="";this.nvSettingsParams.variant.length>0&&(et=this.nvSettingsParams.variant.charAt(0)),this.nvSettingsParams.type.length>0&&(wt=this.nvSettingsParams.type.charAt(0)),this.translateValues={versionValue:this.nvSettingsParams.version+"/"+et+wt},this.currentYear={year:(new Date).getFullYear()},this.enableReleaseHighlights=this.appConfig.featureEnablement.releaseHighlights,this.localeSubscription=this.localeService.localeChanged.subscribe(Yt=>{this.termsConditions=this.settingsService.getLinksUrl(j.qBq.TERMS_CONDITIONS,Yt),this.accountTerms=this.settingsService.getLinksUrl(j.qBq.ACCOUNT_TERMS,Yt),this.ossLicense=this.settingsService.getLinksUrl(j.qBq.OSS_LICENSES,Yt),this.privacyPolicy=this.settingsService.getLinksUrl(j.qBq.PRIVACY_POLICY,Yt)}),this.getUserMembershipInfo(),this.userConsentService.getAnonUserConsentData().pipe((0,p.R)(this.destroy$)).subscribe(Yt=>{var Xt;this.technicalConsentModel=(null===(Xt=Yt.userConsent)||void 0===Xt?void 0:Xt.technical)===K.p6.Full})}ngOnDestroy(){this.localeSubscription&&(this.localeSubscription.unsubscribe(),this.localeSubscription=null),this.ecommerceSubscription&&(this.ecommerceSubscription.unsubscribe(),this.ecommerceSubscription=null),super.ngOnDestroy()}openURL(H){this.logger.info("Open URL: ",H),this.oscDisplayService.closeOSC(),this.bridgeService.executeCommand(Z.Gh.Common.Windowcontrol.Minimize).pipe((0,p.R)(this.destroy$)).subscribe(),window.open(H)}onShowReleaseHighlight(){this.gfnInfoService.showReleaseHighlight(this.appConfig.build.version),this.sendReleaseHighlightsClickedTelemetry()}sendReleaseHighlightsClickedTelemetry(){this.telemetryUtilService.sendClickEvent(j.lzt.ReleaseHighlights,"","General section",!0)}getUserMembershipInfo(){this.ecommerceSubscription=this.ecommerceService.getUserMembership(!0).subscribe(H=>{var pe,Ae;if(this.logger.info("User membership: ",H),this.membership=null!==(Ae=null===(pe=null==H?void 0:H.product)||void 0===pe?void 0:pe.longDescription)&&void 0!==Ae?Ae:"settings.general.membershipStatus",this.validMembership=null!==H.subscription.renewalDateTime,this.validMembership){const et=H.subscription.renewalDateTime;if(L(et,L.ISO_8601).isValid()){const wt=et.toString();this.dateFormatterService.getLocalizedDate(wt).pipe((0,u.q)(1),(0,p.R)(this.destroy$)).subscribe(Yt=>{this.currentMembership={date:Yt}},Yt=>{this.logger.info("Error while getting localized date ",Yt),this.currentMembership={date:L(et).format("LL")}})}else this.logger.error("Invalid date or date format",et)}},H=>{this.logger.error("GetUserMembership error - ",H.toString())})}technicalConsentCheckboxChange(){this.userConsentService.setAnonUserConsentData(this.technicalConsentModel?K.ys:K.l3).pipe((0,p.R)(this.destroy$)).subscribe(()=>this.logger.info("Successfully set consent data"),pe=>this.logger.error("Failed to set consent data",pe)),this.settingsService.sendTelemetry({settingType:"GaaSTechnicalConsent",selectedOption:this.technicalConsentModel})}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(t.zs3),t.Y36(m.ed),t.Y36(a.f5),t.Y36(i.gz),t.Y36(a.ad),t.Y36(a.In),t.Y36(m.OL),t.Y36(j.VKt),t.Y36(a.vU),t.Y36(m.dF),t.Y36(j.wU6),t.Y36(v.jv),t.Y36(j.ZZY),t.Y36(W.s),t.Y36(j.KNS))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-general"]],features:[t.qOj],decls:30,vars:19,consts:[["fxLayout","column","fxFlex","",1,"settings-general"],[1,"settings-container"],["fxLayout","row","fxLayoutAlign","center center"],[1,"setting-about-icon"],["svgIcon","nvidia_symbol","tabindex","-1","fxFlex","grow"],["fxLayout","column"],[1,"font-body1","font-color-primary"],[1,"font-body2","font-color-tertiary"],["fxFlex",""],["titleString","common.releaseHighlights","urlIcon","launch",3,"clicked",4,"ngIf"],["titleString","settings.general.terms","urlIcon","launch",3,"clicked"],["titleString","settings.general.accountTerms","urlIcon","launch",3,"clicked"],["titleString","settings.general.privacyPolicy","urlIcon","launch",3,"clicked"],["titleString","settings.general.osslicense","urlIcon","launch",3,"clicked"],["fxLayout","column","fxLayoutAlign","start start",1,"settings-data1"],["class","font-body2 font-color-tertiary",4,"ngIf"],[4,"ngIf"],["titleString","common.releaseHighlights","urlIcon","launch",3,"clicked"],[1,"settings-privacy-gfn-heading","font-body1","label-color"],[1,"font-body2",3,"ngModel","ngModelChange","change"],[1,"settings-privacy-consent-label"]],template:function(H,pe){1&H&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._UZ(4,"mat-icon",4),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t._UZ(15,"div",8),t.qZA(),t.TgZ(16,"div",5),t.YNc(17,ie,1,0,"nv-item-button",9),t.TgZ(18,"nv-item-button",10),t.NdJ("clicked",function(){return pe.openURL(pe.termsConditions)}),t.qZA(),t.TgZ(19,"nv-item-button",11),t.NdJ("clicked",function(){return pe.openURL(pe.accountTerms)}),t.qZA(),t.TgZ(20,"nv-item-button",12),t.NdJ("clicked",function(){return pe.openURL(pe.privacyPolicy)}),t.qZA(),t.TgZ(21,"nv-item-button",13),t.NdJ("clicked",function(){return pe.openURL(pe.ossLicense)}),t.qZA(),t.qZA(),t._UZ(22,"nv-divider"),t.TgZ(23,"div",14),t.TgZ(24,"span",6),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.YNc(27,Q,3,4,"span",15),t.qZA(),t.YNc(28,k,11,9,"div",16),t.ALo(29,"async"),t.qZA(),t.qZA()),2&H&&(t.xp6(7),t.Oqu(t.lcZ(8,7,"product.NVIDIAGFN")),t.xp6(3),t.hij(" ",t.xi3(11,9,"settings.general.version",pe.translateValues)," "),t.xp6(3),t.hij(" ",t.xi3(14,12,"settings.general.nvidiaRightsReserved",pe.currentYear)," "),t.xp6(4),t.Q6J("ngIf",pe.enableReleaseHighlights),t.xp6(8),t.Oqu(t.lcZ(26,15,pe.membership)),t.xp6(2),t.Q6J("ngIf",pe.validMembership),t.xp6(1),t.Q6J("ngIf",t.lcZ(29,17,pe.isAnonUser$)))},directives:[c.xw,c.yH,c.Wh,v.Hw,n.O5,g.n,I.n,te.oG,x.xZ,P.JJ,P.On],pipes:[C.X$,n.Ov],styles:['.nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-error[_ngcontent-%COMP%]{color:#e02828}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.settings-general[_ngcontent-%COMP%]{max-width:100%;padding:24px;overflow-y:overlay}.isLtr[_nghost-%COMP%]   .settings-general[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-general[_ngcontent-%COMP%]{margin-right:-24px}html[dir=ltr][_ngcontent-%COMP%]   .settings-general[_ngcontent-%COMP%]{--dummy4: 0;margin-right:-24px}.isRtl[_nghost-%COMP%]   .settings-general[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-general[_ngcontent-%COMP%]{margin-left:-24px}html[dir=rtl][_ngcontent-%COMP%]   .settings-general[_ngcontent-%COMP%]{--dummy4: 0;margin-left:-24px}.settings-data1[_ngcontent-%COMP%]{padding:8px 0 14px}.settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background:#76b900;color:#fff;width:60px;height:60px}.isLtr[_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:16px 16px 16px 0}html[dir=ltr][_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{--dummy: 0;margin:16px 16px 16px 0}.isRtl[_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:16px 0 16px 16px}html[dir=rtl][_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{--dummy: 0;margin:16px 0 16px 16px}.settings-privacy-consent-label[_ngcontent-%COMP%]{white-space:normal}.isLtr[_nghost-%COMP%]   .settings-privacy-gfn-heading[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-privacy-gfn-heading[_ngcontent-%COMP%]{margin:12px 0 8px}html[dir=ltr][_ngcontent-%COMP%]   .settings-privacy-gfn-heading[_ngcontent-%COMP%]{--dummy: 0;margin:12px 0 8px}.isRtl[_nghost-%COMP%]   .settings-privacy-gfn-heading[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-privacy-gfn-heading[_ngcontent-%COMP%]{margin:12px 0 8px}html[dir=rtl][_ngcontent-%COMP%]   .settings-privacy-gfn-heading[_ngcontent-%COMP%]{--dummy: 0;margin:12px 0 8px}']}),Ne})();var N=e(36914),q=e(1625),Me=e(772),xe=e(70781);function ct(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div",13),t.TgZ(1,"div",14),t.TgZ(2,"mat-checkbox",15),t.NdJ("ngModelChange",function(Ae){return t.CHM(H).$implicit.value=Ae})("change",function(){const et=t.CHM(H).index,wt=t.oxw().index;return t.oxw().checkChanged(wt,et)}),t.qZA(),t.TgZ(3,"span",16),t.NdJ("click",function(Ae){const wt=t.CHM(H).index,Yt=t.oxw().index;return t.oxw().entryClicked(Ae,Yt,wt)}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&Ne){const H=Rt.$implicit;t.xp6(2),t.Q6J("ngModel",H.value),t.xp6(2),t.Oqu(t.lcZ(5,2,H.label))}}function Se(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"mat-accordion",3),t.TgZ(2,"mat-expansion-panel",4),t.TgZ(3,"mat-expansion-panel-header",5),t.TgZ(4,"div",6),t.TgZ(5,"div",7),t.NdJ("click",function(Ae){const wt=t.CHM(H).index;return t.oxw().entryClicked(Ae,wt,-1)}),t._uU(6),t.qZA(),t.TgZ(7,"button",8),t._UZ(8,"mat-icon",9),t.qZA(),t.qZA(),t.qZA(),t.YNc(9,ct,6,4,"div",10),t.qZA(),t.qZA(),t.TgZ(10,"div",11),t.TgZ(11,"mat-checkbox",12),t.NdJ("ngModelChange",function(Ae){return t.CHM(H).$implicit.value=Ae})("click",function(Ae){return Ae.stopPropagation()})("change",function(){const et=t.CHM(H).index;return t.oxw().checkChanged(et,-1)}),t.qZA(),t.qZA(),t.qZA()}if(2&Ne){const H=Rt.$implicit,pe=Rt.index,Ae=t.oxw();t.xp6(6),t.hij(" ",H.item," "),t.xp6(3),t.Q6J("ngForOf",H.subitems),t.xp6(2),t.Q6J("ngModel",H.value)("indeterminate",Ae.checkIndeterminate(pe))}}let Ge=(()=>{class Ne{constructor(){this.changed=new t.vpe}emitChanged(H,pe,Ae){this.changed.emit({index:H,subindex:pe,value:Ae})}checkChanged(H,pe){const Ae=-1!==pe?this.list[H].subitems[pe].value:this.list[H].value;-1===pe?(this.list[H].subitems.forEach(et=>{et.value!==Ae&&(et.value=Ae)}),this.emitChanged(H,-1,Ae)):this.checkIndeterminate(H)?this.emitChanged(H,pe,Ae):(this.list[H].value!==Ae&&(this.list[H].value=Ae),this.emitChanged(H,-1,Ae))}entryClicked(H,pe,Ae){H.stopPropagation();const et=this.list[pe];if(-1!==Ae){const wt=et.subitems[Ae];wt.value=!wt.value}else et.value=!et.value;this.checkChanged(pe,Ae)}checkIndeterminate(H){if(0===this.list[H].subitems.length)return!1;let pe=!1;const Ae=this.list[H].subitems[0].value;return this.list[H].subitems.forEach(et=>{et.value!==Ae&&(pe=!0)}),pe}}return Ne.\u0275fac=function(H){return new(H||Ne)},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["nv-accordion"]],inputs:{list:"list"},outputs:{changed:"changed"},decls:2,vars:1,consts:[["fxLayout","column","fxLayoutAlign","start start"],["class","accordion-item","fxFlex","grow",4,"ngFor","ngForOf"],["fxFlex","grow",1,"accordion-item"],["multi","","displayMode","flat"],["hideToggle","true"],["collapsedHeight","48px","expandedHeight","48px"],["fxLayout","row","fxLayoutAlign","start center","fxFlexFill",""],["dir","auto","fxFlex","grow",1,"font-body2","accordion-label","accordion-header-label",3,"click"],["mat-button","","fxFlex","none","fxLayout","row","fxLayoutAlign","center center",1,"nv-item-icon","complex-button"],["svgIcon","chevron_down",1,"accordion-chevron"],["class","accordion-subitem","fxLayout","column","fxLayoutAlign","space-between center",4,"ngFor","ngForOf"],[1,"checkbox-overlay"],["fxFlex","none",3,"ngModel","indeterminate","ngModelChange","click","change"],["fxLayout","column","fxLayoutAlign","space-between center",1,"accordion-subitem"],["fxLayout","row","fxLayoutAlign","start center",1,"checkbox-item"],["fxFlex","none",3,"ngModel","ngModelChange","change"],["fxFlex","shrink",1,"font-body2","accordion-label",3,"click"]],template:function(H,pe){1&H&&(t.TgZ(0,"div",0),t.YNc(1,Se,12,4,"div",1),t.qZA()),2&H&&(t.xp6(1),t.Q6J("ngForOf",pe.list))},directives:[c.xw,c.Wh,n.sg,c.yH,q.pp,q.ib,q.yz,c.s9,Me.Lv,xe.lW,v.Hw,te.oG,x.xZ,P.JJ,P.On],pipes:[C.X$],styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}.checkbox-item[_ngcontent-%COMP%]{min-width:0}.accordion-label[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;min-width:0;width:0}.isLtr[_nghost-%COMP%]   .accordion-label[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .accordion-label[_ngcontent-%COMP%]{text-align:left}html[dir=ltr][_ngcontent-%COMP%]   .accordion-label[_ngcontent-%COMP%]{--dummy0: 0;text-align:left}.isRtl[_nghost-%COMP%]   .accordion-label[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .accordion-label[_ngcontent-%COMP%]{text-align:right}html[dir=rtl][_ngcontent-%COMP%]   .accordion-label[_ngcontent-%COMP%]{--dummy0: 0;text-align:right}.isLtr[_nghost-%COMP%]   .accordion-header-label[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .accordion-header-label[_ngcontent-%COMP%]{padding-left:44px}html[dir=ltr][_ngcontent-%COMP%]   .accordion-header-label[_ngcontent-%COMP%]{--dummy1: 0;padding-left:44px}.isRtl[_nghost-%COMP%]   .accordion-header-label[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .accordion-header-label[_ngcontent-%COMP%]{padding-right:44px}html[dir=rtl][_ngcontent-%COMP%]   .accordion-header-label[_ngcontent-%COMP%]{--dummy1: 0;padding-right:44px}.accordion-item[_ngcontent-%COMP%]{width:100%;padding:0;position:relative}.checkbox-overlay[_ngcontent-%COMP%]{position:absolute;top:0}.isLtr[_nghost-%COMP%]   .checkbox-overlay[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .checkbox-overlay[_ngcontent-%COMP%]{left:0}html[dir=ltr][_ngcontent-%COMP%]   .checkbox-overlay[_ngcontent-%COMP%]{--dummy5: 0;left:0}.isRtl[_nghost-%COMP%]   .checkbox-overlay[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .checkbox-overlay[_ngcontent-%COMP%]{right:0}html[dir=rtl][_ngcontent-%COMP%]   .checkbox-overlay[_ngcontent-%COMP%]{--dummy5: 0;right:0}.accordion-subitem[_ngcontent-%COMP%]{display:flex;flex-direction:row}.isLtr[_nghost-%COMP%]   .accordion-subitem[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .accordion-subitem[_ngcontent-%COMP%]{padding:0 0 0 16px}html[dir=ltr][_ngcontent-%COMP%]   .accordion-subitem[_ngcontent-%COMP%]{--dummy: 0;padding:0 0 0 16px}.isRtl[_nghost-%COMP%]   .accordion-subitem[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .accordion-subitem[_ngcontent-%COMP%]{padding:0 16px 0 0}html[dir=rtl][_ngcontent-%COMP%]   .accordion-subitem[_ngcontent-%COMP%]{--dummy: 0;padding:0 16px 0 0}.accordion-subitem[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]}),Ne})();function St(Ne,Rt){1&Ne&&(t.TgZ(0,"span",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"mainMenu.DisabledFor1440")))}function Tt(Ne,Rt){1&Ne&&(t.TgZ(0,"span",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"mainMenu.DisabledForPlaytest")))}function Te(Ne,Rt){1&Ne&&(t.ynx(0),t.TgZ(1,"div",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&Ne&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"settings.HighlightsHelper1")))}function Je(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-accordion",12),t.NdJ("changed",function(Ae){return t.CHM(H),t.oxw(3).accordionChanged(Ae)}),t.qZA()}if(2&Ne){const H=t.oxw(3);t.Q6J("list",H.gamesInfo)}}function xt(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div"),t._UZ(1,"nv-divider"),t.TgZ(2,"div",10),t.YNc(3,Je,1,1,"nv-accordion",11),t.qZA(),t.qZA()),2&Ne){const H=t.oxw(2);t.xp6(3),t.Q6J("ngIf",H.hlCaptureSwitchModel&&H.highlightGamesPresent)}}function Ye(Ne,Rt){if(1&Ne&&t.YNc(0,xt,4,1,"div",9),2&Ne){const H=t.oxw();t.Q6J("ngIf",!H.disableRecordSpecialCase)}}let rt=(()=>{class Ne extends w{constructor(H,pe,Ae,et,wt,Yt,Xt,In,Tn){super(pe,Ae,Xt,null,Tn),this.loggingService=H,this.bridgeService=et,this.sdkHighlightsService=wt,this.telemetry=Yt,this.translateService=In,this.highlightGamesPresent=!1,this.highlightsHelper="",this.gamesInfo=[],this.recordSpecialCase=l.Kk,super.bar("commonLabels.Highlights"),this.logger=this.loggingService.getLogger("Highlights")}ngOnInit(){super.ngOnInit(),this.bridgeService.executeCommand(Z.Gh.Share.Shareserver.GetHighlightsEnable,{}).pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.hlCaptureSwitchModel=H.enable&&!this.disableRecordSpecialCase,this.logger.info("Highlights enabled: ",this.hlCaptureSwitchModel)}),this.bridgeService.executeCommand(Z.Gh.Share.Shareserver.GetApplicationConfigs,{}).pipe((0,p.R)(this.destroy$)).subscribe(H=>{H&&0!==H.apps.length?(this.highlightGamesPresent=!0,this.gameData=H,this.loadHighlightsLists()):this.logger.info("No game data to initialize")})}loadHighlightsLists(){this.gamesInfo.length=0,this.gameData.apps.forEach(H=>{if(0!==H.permissions.length){if(this.sdkHighlightsService.overrideHighlightSettings()&&this.sdkHighlightsService.cachedAHLGameShortName()===H.app.appShortName)return void this.logger.info("Highlights settings not shown for: ",H.app.appShortName);const pe=[];let Ae=!1;for(let wt=0;wt<H.permissions.length;wt++)Ae=H.permissions[wt].permission===Z.Yk.Share.Shareserver.SdkPermissions.granted||Ae;H.highlights.forEach(wt=>{const Yt=`highlightLabels.${wt.name}`;let Xt=this.translateService.instant(Yt);Xt===Yt&&(Xt=wt.name),pe.push({label:Xt,value:wt.userEnabled&&Ae})}),this.gamesInfo.push({item:H.app.profileName||H.app.name,value:Ae,subitems:pe})}})}accordionChanged(H){const pe=this.gamesInfo[H.index];-1!==H.subindex?this.highlightStateChanged(pe,pe.subitems[H.subindex],H.value,!1):this.highlightStateChanged(pe,void 0,H.value,!0)}hlCaptureSwitchChange(H){this.bridgeService.executeCommand(Z.Gh.Share.Shareserver.SetHighlightsEnable,{enable:this.hlCaptureSwitchModel}).pipe((0,p.R)(this.destroy$)).subscribe(Ae=>{this.logger.info("Highlights capture enabled: ",Ae)}),this.telemetry.sendHighlightsGameSetting({shortName:"None",cmsId:"None"},this.hlCaptureSwitchModel,a.lB.settings)}gameStateChanged(H,pe){let Ae,et;this.gameData.apps.forEach(In=>{In.app.profileName===H.item&&(Ae=In.permissions.slice(),et=In.app)});const Xt=this.sdkHighlightsService.setStateOfCurrentGame({permissionParams:{permissions:Ae,app:et},state:pe}).subscribe(()=>{Xt.unsubscribe()})}highlightStateChanged(H,pe,Ae,et){let wt,Yt;this.gameData.apps.forEach(Tn=>{Tn.app.profileName===H.item&&(wt=Tn.highlights.slice(),Yt=Tn.app)});const Xt={app:Yt,highlightDefinitions:wt};let In=!1;Xt.highlightDefinitions.forEach(Tn=>{(et||Tn.name===pe.label||this.translateService.instant(`highlightLabels.${Tn.name}`)===pe.label)&&(this.logger.info(`Highlight state updated ${Tn.name} to: ${Ae}`),Tn.userEnabled=Ae),Tn.userEnabled&&(In=!0)}),this.bridgeService.executeCommand(Z.Gh.Share.Shareserver.SetHighlightsConfig,Xt).pipe((0,p.R)(this.destroy$)).subscribe(()=>{et?this.logger.info("Highlight state updated ALL to: "+Ae):(this.logger.info("Highlight state updated: "+pe.label+" to: "+Ae),this.telemetry.sendHighlightsIndividualGameToggle({shortName:Yt.appShortName},pe.label,pe.value)),this.gameStateChanged(H,In)})}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(m.ed),t.Y36(a.f5),t.Y36(i.gz),t.Y36(m.dF),t.Y36(a.b5),t.Y36(a.l),t.Y36(a.ad),t.Y36(C.sK),t.Y36(a.In))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-highlights"]],features:[t.qOj],decls:11,vars:9,consts:[["fxLayout","column","fxFlex","",1,"settings-highlights","nv-hig"],["fxFlex","none","fxLayout","row","fxLayoutAlign","start center",1,"toggle-height"],["fxFlex","grow",1,"font-sub1"],["fxFlex","none","md-invert","","nvHoverFocus","",1,"settings-padding",3,"ngModel","disabled","ngModelChange","change"],["class","font-body3 disabled-opacity",4,"ngIf"],[4,"ngIf","ngIfElse"],["showHighlights",""],[1,"font-body3","disabled-opacity"],[1,"helper-text-div","font-body2"],[4,"ngIf"],["fxFlex","","fxLayout","row","fxLayoutAlign","start start",1,"settings-layout"],[3,"list","changed",4,"ngIf"],[3,"list","changed"]],template:function(H,pe){if(1&H&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-slide-toggle",3),t.NdJ("ngModelChange",function(et){return pe.hlCaptureSwitchModel=et})("change",function(et){return pe.hlCaptureSwitchChange(et)}),t.qZA(),t.qZA(),t.YNc(6,St,3,3,"span",4),t.YNc(7,Tt,3,3,"span",4),t.YNc(8,Te,4,3,"ng-container",5),t.YNc(9,Ye,1,1,"ng-template",null,6,t.W1O),t.qZA()),2&H){const Ae=t.MAs(10);t.xp6(3),t.Oqu(t.lcZ(4,7,"settings.CaptureHighlights")),t.xp6(2),t.Q6J("ngModel",pe.hlCaptureSwitchModel)("disabled",pe.recordSpecialCase.RECORD_SPECIAL_CASE_NONE!==pe.disableRecordSpecialCase),t.xp6(1),t.Q6J("ngIf",pe.recordSpecialCase.RECORD_SPECIAL_CASE_4K===pe.disableRecordSpecialCase),t.xp6(1),t.Q6J("ngIf",pe.recordSpecialCase.RECORD_SPECIAL_CASE_PLAYTEST===pe.disableRecordSpecialCase),t.xp6(1),t.Q6J("ngIf",!pe.hlCaptureSwitchModel&&!pe.disableRecordSpecialCase)("ngIfElse",Ae)}},directives:[c.xw,c.yH,c.Wh,G.Rr,x.xZ,N.X,P.JJ,P.On,E.i,n.O5,I.n,Ge],pipes:[C.X$],styles:[".nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-error[_ngcontent-%COMP%]{color:#e02828}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}.settings-highlights[_ngcontent-%COMP%]{max-width:100%;padding:24px;overflow-y:overlay}.isLtr[_nghost-%COMP%]   .settings-highlights[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-highlights[_ngcontent-%COMP%]{margin-right:-24px}html[dir=ltr][_ngcontent-%COMP%]   .settings-highlights[_ngcontent-%COMP%]{--dummy4: 0;margin-right:-24px}.isRtl[_nghost-%COMP%]   .settings-highlights[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-highlights[_ngcontent-%COMP%]{margin-left:-24px}html[dir=rtl][_ngcontent-%COMP%]   .settings-highlights[_ngcontent-%COMP%]{--dummy4: 0;margin-left:-24px}.settings-layout[_ngcontent-%COMP%]   nv-accordion[_ngcontent-%COMP%]{width:448px}.isLtr[_nghost-%COMP%]   .settings-layout[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-layout[_ngcontent-%COMP%]{margin-left:15px}html[dir=ltr][_ngcontent-%COMP%]   .settings-layout[_ngcontent-%COMP%]{--dummy3: 0;margin-left:15px}.isRtl[_nghost-%COMP%]   .settings-layout[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-layout[_ngcontent-%COMP%]{margin-right:15px}html[dir=rtl][_ngcontent-%COMP%]   .settings-layout[_ngcontent-%COMP%]{--dummy3: 0;margin-right:15px}.isLtr[_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%]{padding-right:10px}html[dir=ltr][_ngcontent-%COMP%]   .settings-padding[_ngcontent-%COMP%]{--dummy2: 0;padding-right:10px}.isRtl[_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%]{padding-left:10px}html[dir=rtl][_ngcontent-%COMP%]   .settings-padding[_ngcontent-%COMP%]{--dummy2: 0;padding-left:10px}.helper-text-div[_ngcontent-%COMP%]{height:60px;padding:8px 0}.toggle-height[_ngcontent-%COMP%]{height:40px}"]}),Ne})();var ge=e(89460),Ve=e(4597);function at(Ne,Rt){1&Ne&&(t.TgZ(0,"div",11),t._UZ(1,"mat-icon",12),t.qZA())}function ve(Ne,Rt){1&Ne&&(t.TgZ(0,"div",11),t._UZ(1,"mat-icon",13),t.qZA())}function Ze(Ne,Rt){1&Ne&&(t.TgZ(0,"div",11),t._UZ(1,"mat-icon",14),t.qZA())}function Ie(Ne,Rt){1&Ne&&(t.TgZ(0,"div",11),t._UZ(1,"mat-icon",15),t.qZA())}function $e(Ne,Rt){1&Ne&&(t.TgZ(0,"div",11),t._UZ(1,"mat-icon",16),t.qZA())}function ze(Ne,Rt){1&Ne&&(t.TgZ(0,"div",11),t._UZ(1,"mat-icon",17),t.qZA())}function _t(Ne,Rt){1&Ne&&(t.TgZ(0,"div",11),t._UZ(1,"mat-icon",18),t.qZA())}function be(Ne,Rt){1&Ne&&(t.TgZ(0,"div",11),t._UZ(1,"mat-icon",19),t.qZA())}function pt(Ne,Rt){1&Ne&&(t.TgZ(0,"div",11),t._UZ(1,"mat-icon",16),t.qZA())}function Ot(Ne,Rt){1&Ne&&(t.TgZ(0,"div",11),t._UZ(1,"mat-icon",20),t.qZA())}function Kt(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div"),t.TgZ(1,"div",8),t.TgZ(2,"div",9),t.YNc(3,at,2,0,"div",10),t.YNc(4,ve,2,0,"div",10),t.YNc(5,Ze,2,0,"div",10),t.YNc(6,Ie,2,0,"div",10),t.YNc(7,$e,2,0,"div",10),t.YNc(8,ze,2,0,"div",10),t.YNc(9,_t,2,0,"div",10),t.YNc(10,be,2,0,"div",10),t.YNc(11,pt,2,0,"div",10),t.YNc(12,Ot,2,0,"div",10),t.qZA(),t.qZA(),t.qZA()),2&Ne){const H=Rt.$implicit,pe=t.oxw();t.xp6(1),t.Q6J("ngClass",H.value),t.xp6(2),t.Q6J("ngIf",pe.shadowPlayEnabled&&pe.visibility.Recording===H.key),t.xp6(1),t.Q6J("ngIf",pe.sdkGalleryEnabled&&pe.visibility.IR===H.key),t.xp6(1),t.Q6J("ngIf",pe.sdkGalleryEnabled&&pe.visibility.Highlights===H.key),t.xp6(1),t.Q6J("ngIf",pe.showBroadcast&&pe.visibility.Broadcast===H.key),t.xp6(1),t.Q6J("ngIf",pe.micEnabled&&pe.visibility.Mic===H.key),t.xp6(1),t.Q6J("ngIf",pe.showBroadcast&&pe.visibility.ViewerCount===H.key),t.xp6(1),t.Q6J("ngIf",pe.showBroadcast&&pe.visibility.Comments===H.key),t.xp6(1),t.Q6J("ngIf",pe.showWebcam&&pe.visibility.Webcam===H.key),t.xp6(1),t.Q6J("ngIf",pe.gfnMicEnabled&&pe.visibility.GfnMic===H.key),t.xp6(1),t.Q6J("ngIf",pe.showConnectionStatus&&pe.visibility.Network===H.key)}}const nn=function(Ne,Rt){return{"stats-small":Ne,"stats-large":Rt}};function tn(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div",23),t.TgZ(1,"div",24),t._UZ(2,"mat-icon",25),t.qZA(),t.qZA()),2&Ne){const H=t.oxw(2);t.Q6J("ngClass",t.WLB(1,nn,H.statSize===H.statsSizes[0],H.statSize===H.statsSizes[1]))}}const Mn=function(Ne,Rt){return{"padding-left.px":Ne,"padding-right.px":Rt}};function Un(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div"),t.TgZ(1,"div",21),t.YNc(2,tn,3,4,"div",22),t.qZA(),t.qZA()),2&Ne){const H=Rt.$implicit,pe=t.oxw();t.xp6(1),t.Q6J("ngClass",H.value)("ngStyle",t.WLB(3,Mn,pe.statsOffset,pe.statsOffset)),t.xp6(1),t.Q6J("ngIf",pe.showStats&&pe.visibility.Statistics===H.key)}}function _n(Ne,Rt){if(1&Ne){const H=t.EpF();t.ynx(0),t.TgZ(1,"nv-rotary",26),t.NdJ("selectionChanged",function(Ae){t.CHM(H);const et=t.oxw();return et.rotaryChanged(et.indicators.Recording,Ae)}),t.qZA(),t.BQk()}if(2&Ne){const H=t.oxw();t.xp6(1),t.Q6J("input",H.rotaryOptions)("initialState",H.rotaryInit.Recording)}}function xn(Ne,Rt){if(1&Ne){const H=t.EpF();t.ynx(0),t.TgZ(1,"nv-rotary",27),t.NdJ("selectionChanged",function(Ae){t.CHM(H);const et=t.oxw();return et.rotaryChanged(et.indicators.IR,Ae)}),t.qZA(),t.TgZ(2,"nv-rotary",28),t.NdJ("selectionChanged",function(Ae){t.CHM(H);const et=t.oxw();return et.rotaryChanged(et.indicators.Highlights,Ae)}),t.qZA(),t.BQk()}if(2&Ne){const H=t.oxw();t.xp6(1),t.Q6J("input",H.rotaryOptions)("initialState",H.rotaryInit.IR),t.xp6(1),t.Q6J("input",H.rotaryOptions)("initialState",H.rotaryInit.Highlights)}}function Fn(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-rotary",29),t.NdJ("selectionChanged",function(Ae){t.CHM(H);const et=t.oxw();return et.rotaryChanged(et.indicators.Mic,Ae)}),t.qZA()}if(2&Ne){const H=t.oxw();t.Q6J("input",H.rotaryOptions)("initialState",H.rotaryInit.Mic)}}function yt(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-rotary",29),t.NdJ("selectionChanged",function(Ae){t.CHM(H);const et=t.oxw();return et.rotaryChanged(et.indicators.GfnMic,Ae)}),t.qZA()}if(2&Ne){const H=t.oxw();t.Q6J("input",H.rotaryOptions)("initialState",H.rotaryInit.GfnMic)}}function Ht(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div"),t._UZ(1,"div",5),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"nv-rotary",30),t.NdJ("selectionChanged",function(Ae){t.CHM(H);const et=t.oxw();return et.rotaryChanged(et.indicators.Broadcast,Ae)}),t.qZA(),t.TgZ(6,"nv-rotary",31),t.NdJ("selectionChanged",function(Ae){t.CHM(H);const et=t.oxw();return et.rotaryChanged(et.indicators.ViewerCount,Ae)}),t.qZA(),t.TgZ(7,"nv-rotary",32),t.NdJ("selectionChanged",function(Ae){t.CHM(H);const et=t.oxw();return et.rotaryChanged(et.indicators.Comments,Ae)}),t.qZA(),t.qZA()}if(2&Ne){const H=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,7,"settings.Broadcast")),t.xp6(2),t.Q6J("input",H.rotaryOptions)("initialState",H.rotaryInit.Broadcast),t.xp6(1),t.Q6J("input",H.rotaryOptions)("initialState",H.rotaryInit.ViewerCount),t.xp6(1),t.Q6J("input",H.rotaryOptions)("initialState",H.rotaryInit.Comments)}}function Ue(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div"),t._UZ(1,"div",5),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"nv-rotary",33),t.NdJ("selectionChanged",function(Ae){return t.CHM(H),t.oxw().rotaryWebcamPositionChanged(Ae)}),t.qZA(),t.TgZ(6,"nv-rotary",34),t.NdJ("selectionChanged",function(Ae){return t.CHM(H),t.oxw().rotaryWebcamSizeChanged(Ae)}),t.qZA(),t.qZA()}if(2&Ne){const H=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"mainMenu.Webcam")),t.xp6(2),t.Q6J("input",H.rotaryWebcamOptions)("initialState",H.rotaryInit.Webcam),t.xp6(1),t.Q6J("input",H.rotarySizeOptions)("initialState",H.rotaryInit.WebcamSize)}}function Mt(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div"),t._UZ(1,"div",5),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"nv-rotary",35),t.NdJ("selectionChanged",function(Ae){t.CHM(H);const et=t.oxw();return et.rotaryChanged(et.indicators.Network,Ae)}),t.qZA(),t.qZA()}if(2&Ne){const H=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,3,"settings.Network")),t.xp6(2),t.Q6J("input",H.rotaryOptions)("initialState",H.rotaryInit.Network)}}function ft(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div"),t._UZ(1,"div",5),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"nv-rotary",36),t.NdJ("selectionChanged",function(Ae){t.CHM(H);const et=t.oxw();return et.rotaryChanged(et.indicators.Statistics,Ae)}),t.qZA(),t.qZA()}if(2&Ne){const H=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,3,"settings.stats.Statistics")),t.xp6(2),t.Q6J("input",H.rotaryWebcamOptions)("initialState",H.rotaryInit.Statistics)}}let Et=(()=>{class Ne extends w{constructor(H,pe,Ae,et,wt,Yt,Xt,In,Tn,Qn){super(pe,Ae,wt),this.loggingService=H,this.osdService=et,this.igoConfig=Yt,this.webcamService=Xt,this.featureSupportService=In,this.statisticsService=Tn,this.telemetryService=Qn,this.showWebcam=!1,this.showBroadcast=!1,this.showStats=!1,this.showConnectionStatus=!1,this.webcamPosition=Z.Yk.Share.Shareserver.OverlayPositionEnum.rightTop,this.webcamSize=Z.Yk.Share.Shareserver.OverlaySizeEnum.small,this.rotaryOptions=["settings.UpperRight","settings.LowerRight","settings.LowerLeft","settings.UpperLeft","settings.None"],this.rotaryWebcamOptions=["settings.UpperRight","settings.LowerRight","settings.LowerLeft","settings.UpperLeft"],this.rotarySpOptions=[Z.Yk.Share.Shareserver.OverlayPositionEnum.rightTop,Z.Yk.Share.Shareserver.OverlayPositionEnum.rightBottom,Z.Yk.Share.Shareserver.OverlayPositionEnum.leftBottom,Z.Yk.Share.Shareserver.OverlayPositionEnum.leftTop,Z.Yk.Share.Shareserver.OverlayPositionEnum.none],this.rotarySizeOptions=["settings.Small","settings.Medium","settings.Large"],this.rotarySizeSpOptions=[Z.Yk.Share.Shareserver.OverlaySizeEnum.small,Z.Yk.Share.Shareserver.OverlaySizeEnum.medium,Z.Yk.Share.Shareserver.OverlaySizeEnum.large],this.visibility={Recording:a.Fr.none,IR:a.Fr.none,Highlights:a.Fr.none,Broadcast:a.Fr.none,Mic:a.Fr.none,ViewerCount:a.Fr.none,Comments:a.Fr.none,Webcam:a.Fr.none,WebcamSize:a.Fr.none,GfnMic:a.Fr.none,Statistics:a.Fr.none,Network:a.Fr.none},this.active={Recording:!0,IR:!0,Highlights:!0,Broadcast:!1,Mic:!0,ViewerCount:!1,Comments:!1,Webcam:!1,WebcamSize:!1,GfnMic:!0,Statistics:!1,StatsSize:!1,Network:!1},this.quadrants={rightTop:"hud-topright",rightBottom:"hud-bottomright",leftBottom:"hud-bottomleft",leftTop:"hud-topleft"},this.statsQuadrants={rightTop:"stats-topright",rightBottom:"stats-bottomright",leftBottom:"stats-bottomleft",leftTop:"stats-topleft"},this.rotaryInit={Recording:0,IR:0,Highlights:0,Broadcast:0,Mic:0,ViewerCount:0,Comments:0,Webcam:0,WebcamSize:0,GfnMic:0,Statistics:0,StatsSize:0,Network:0},this.initRotaryPosition={Recording:a.Fr.none,IR:a.Fr.none,Highlights:a.Fr.none,Broadcast:a.Fr.none,Mic:a.Fr.none,ViewerCount:a.Fr.none,Comments:a.Fr.none,Webcam:a.Fr.none,WebcamSize:a.Fr.none,BrowserMic:a.Fr.none,Statistics:a.Fr.none,StatsSize:a.Fr.none,Network:a.Fr.none},this.position=[a.Fr.rightTop,a.Fr.rightBottom,a.Fr.leftBottom,a.Fr.leftTop,a.Fr.none],this.size=[a.BH.small,a.BH.medium,a.BH.large],this.indicators=a.Kw,this.shadowPlayEnabled=!1,this.sdkGalleryEnabled=!1,this.micEnabled=!1,this.gfnMicEnabled=!1,this.statisticsEnabled=!1,this.connectionStatusEnabled=!1,this.widgetsChanged=!1,this.statsSizes=[a._C.compact,a._C.standard],this.statSize=a._C.compact,this.statsOffset=5,this.statsChanged=!1,this.initNetworkOverlay={position:a.Fr.none,size:a._C.compact},super.bar("settings.HeadsUpDisplay"),this.sdkGalleryEnabled=this.featureSupportService.isSdkGalleryEnabled(),this.shadowPlayEnabled=this.featureSupportService.isShadowPlayEnabled(),this.micEnabled=this.featureSupportService.isMicrophoneEnabled(),this.statisticsEnabled=this.featureSupportService.isStatisticsEnabled(),this.connectionStatusEnabled=this.featureSupportService.isConnectionStatusEnabled(),this.logger=this.loggingService.getLogger("HUD"),this.logger.info("Constructor")}ngOnInit(){if(super.ngOnInit(),this.featureSupportService.isGfnMicrophoneEnabled().pipe((0,p.R)(this.destroy$),(0,u.q)(1)).subscribe(H=>{this.gfnMicEnabled=H}),"GFE"===this.igoConfig.branding){const H=this.webcamService.getWebcamInfo();this.showWebcam=H.present,this.showWebcam&&(Object.keys(a.Kw).forEach(pe=>{this.active[pe]=!0}),this.webcamPosition=H.position,this.webcamSize=H.size),this.showBroadcast=!0}this.showStats=this.statisticsEnabled,this.active.Statistics=this.statisticsEnabled,this.active.StatsSize=this.statisticsEnabled,this.showConnectionStatus=this.connectionStatusEnabled,this.active.Network=this.connectionStatusEnabled,Object.keys(a.Kw).forEach(H=>{if(this.active[H]){const pe=a.Kw[H],Ae=this.osdService.getPosition(pe),et=this.position.findIndex(wt=>wt===Ae);if(this.logger.info("key: "+H+" type: "+pe+" pos: "+Ae+" index: "+et),-1!==et)this.rotaryInit[H]=et,this.visibility[H]=Ae,this.initRotaryPosition[H]=Ae,H===a.Kw.Statistics&&(this.initNetworkOverlay.position=Ae,this.anyWidgetsInCorner());else{if("Webcam"===H&&"GFE"===this.igoConfig.branding)this.visibility[H]=this.overlayPosToOsdPos(this.webcamPosition),this.rotaryInit[H]=this.position.findIndex(wt=>wt===this.visibility[H]);else if("WebcamSize"===H&&"GFE"===this.igoConfig.branding){this.visibility[H]=this.overlayPosToOsdPos(this.webcamPosition);const wt=this.overlaySizeToOsdSize(this.webcamSize);this.rotaryInit[H]=this.size.findIndex(Yt=>Yt===wt)}else"StatsSize"===H&&this.showStats?(this.visibility[H]=this.visibility[a.Kw.Statistics],this.statSize=this.osdService.getStatsSize(),this.rotaryInit[H]=this.statsSizes.findIndex(wt=>wt===this.statSize),this.initNetworkOverlay.size=this.statSize):(this.visibility[H]=a.Fr.none,this.rotaryInit[H]=this.position.findIndex(wt=>wt===a.Fr.none),this.logger.error("unsupported position: ",Ae));this.initRotaryPosition[H]=this.visibility[H]}}}),this.statisticsService.statisticsHotkeyPressed().pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.visibility.StatsSize=this.visibility[a.Kw.Statistics],this.statSize=this.osdService.getStatsSize(),this.rotaryInit.StatsSize=this.statsSizes.findIndex(H=>H===this.statSize),this.initNetworkOverlay.size=this.statSize})}ngOnDestroy(){this.processHudTelemetry(),super.ngOnDestroy()}overlayPosToOsdPos(H){const pe=Z.Yk.Share.Shareserver.OverlayPositionEnum;switch(H){case pe.rightTop:return a.Fr.rightTop;case pe.rightBottom:return a.Fr.rightBottom;case pe.leftTop:return a.Fr.leftTop;case pe.leftBottom:return a.Fr.leftBottom;case pe.none:return a.Fr.none}}overlaySizeToOsdSize(H){const pe=Z.Yk.Share.Shareserver.OverlaySizeEnum;switch(H){case pe.small:return a.BH.small;case pe.medium:return a.BH.medium;case pe.large:return a.BH.large}}anyWidgetsInCorner(){const H=this.visibility[a.Kw.Statistics];let pe=!1;H===a.Fr.none?pe=!1:(this.visibility[a.Kw.Recording]===H||this.visibility[a.Kw.IR]===H||this.visibility[a.Kw.Highlights]===H||this.visibility[this.gfnMicEnabled?a.Kw.GfnMic:a.Kw.Mic]===H||this.visibility[a.Kw.Network]===H)&&(pe=!0),this.statsOffset=pe?40:8}rotaryChanged(H,pe){this.logger.info("Rotary changed: ",H,this.rotaryOptions[pe]);const Ae=this.position[pe];this.osdService.setPosition(H,Ae),this.visibility[H]=Ae,this.osdService.saveOverlaySettings().subscribe(),this.statisticsService.statisticsLayoutChanged(),this.anyWidgetsInCorner(),H===a.Kw.Statistics?this.statsChanged=!0:this.widgetsChanged=!0}rotaryWebcamPositionChanged(H){this.rotaryChanged(a.Kw.Webcam,H),this.webcamPosition=this.rotarySpOptions[H],this.webcamService.setWebcamOverlaySettings(this.webcamPosition,this.webcamSize)}rotaryWebcamSizeChanged(H){this.rotaryChanged(a.Kw.WebcamSize,H),this.webcamSize=this.rotarySizeSpOptions[H],this.webcamService.setWebcamOverlaySettings(this.webcamPosition,this.webcamSize)}processHudTelemetry(){if(this.statsChanged){const H=this.osdService.getStatsSize(),pe=this.osdService.getPosition(a.Kw.Statistics);if(this.initNetworkOverlay.position!==pe||this.initNetworkOverlay.size!==H){const et=this.statisticsService.getStatsState()!==a.Tj.Off;this.telemetryService.sendStatsViewChanged(et,H,pe)}}if(this.widgetsChanged){this.initRotaryPosition[a.Kw.Network]!==this.visibility[a.Kw.Network]&&this.telemetryService.sendWidgetViewChanged(a.Kw.Network,this.visibility[a.Kw.Network]),this.initRotaryPosition[a.Kw.IR]!==this.visibility[a.Kw.IR]&&this.telemetryService.sendWidgetViewChanged(a.Kw.IR,this.visibility[a.Kw.IR]),this.initRotaryPosition[a.Kw.Recording]!==this.visibility[a.Kw.Recording]&&this.telemetryService.sendWidgetViewChanged(a.Kw.Recording,this.visibility[a.Kw.Recording]),this.initRotaryPosition[a.Kw.Highlights]!==this.visibility[a.Kw.Highlights]&&this.telemetryService.sendWidgetViewChanged(a.Kw.Highlights,this.visibility[a.Kw.Highlights]);const H=this.gfnMicEnabled?a.Kw.GfnMic:a.Kw.Mic;this.initRotaryPosition[H]!==this.visibility[H]&&this.telemetryService.sendWidgetViewChanged(H,this.visibility[H])}}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(m.ed),t.Y36(a.f5),t.Y36(i.gz),t.Y36(a.Ec),t.Y36(a.ad),t.Y36(a.gs),t.Y36(a.cz),t.Y36(a.lm),t.Y36(a._6),t.Y36(a.l))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-hud"]],features:[t.qOj],decls:22,vars:20,consts:[["fxLayout","column","fxFlex",""],["fxFlex","grow"],[1,"font-body3","font-color-tertiary","nv-label"],[1,"hud-window"],[4,"ngFor","ngForOf"],[1,"nv-gap-16"],[4,"ngIf"],["title","settings.Microphone",3,"input","initialState","selectionChanged",4,"ngIf"],["fxLayout","column",3,"ngClass"],["fxLayout","column","fxFlex","none"],["class","hud-icons","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"hud-icons"],["svgIcon","record"],["svgIcon","replay"],["svgIcon","highlights"],["svgIcon","broadcast"],["svgIcon","mic"],["svgIcon","eye"],["svgIcon","comment"],["svgIcon","videocam"],["svgIcon","network_signal"],["fxFlex","none",3,"ngClass","ngStyle"],["fxLayout","row","fxLayoutAlign","center center",3,"ngClass",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",3,"ngClass"],["fxLayoutAlign","center center",1,"hud-icons"],["svgIcon","analytics"],["title","settings.Record",3,"input","initialState","selectionChanged"],["title","settings.InstantReplay",3,"input","initialState","selectionChanged"],["title","commonLabels.Highlights",3,"input","initialState","selectionChanged"],["title","settings.Microphone",3,"input","initialState","selectionChanged"],["title","settings.HUDItemBroadcast",3,"input","initialState","selectionChanged"],["title","settings.ViewerCount",3,"input","initialState","selectionChanged"],["title","settings.Comments",3,"input","initialState","selectionChanged"],["title","settings.WebcamPosition",3,"input","initialState","selectionChanged"],["title","settings.WebcamSize",3,"input","initialState","selectionChanged"],["title","settings.ConnectionStatus",3,"input","initialState","selectionChanged"],["title","settings.stats.Position",3,"input","initialState","selectionChanged"]],template:function(H,pe){1&H&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,Kt,13,11,"div",4),t.ALo(7,"keyvalue"),t.YNc(8,Un,3,6,"div",4),t.ALo(9,"keyvalue"),t.qZA(),t._UZ(10,"div",5),t.TgZ(11,"div",2),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.YNc(14,_n,2,2,"ng-container",6),t.YNc(15,xn,3,4,"ng-container",6),t.YNc(16,Fn,1,2,"nv-rotary",7),t.YNc(17,yt,1,2,"nv-rotary",7),t.YNc(18,Ht,8,9,"div",6),t.YNc(19,Ue,7,7,"div",6),t.YNc(20,Mt,6,5,"div",6),t.YNc(21,ft,6,5,"div",6),t.qZA(),t.qZA()),2&H&&(t.xp6(3),t.Oqu(t.lcZ(4,12,"settings.Layout")),t.xp6(3),t.Q6J("ngForOf",t.lcZ(7,14,pe.quadrants)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(9,16,pe.statsQuadrants)),t.xp6(4),t.Oqu(t.lcZ(13,18,"settings.StatusIndicators")),t.xp6(2),t.Q6J("ngIf",pe.shadowPlayEnabled),t.xp6(1),t.Q6J("ngIf",pe.sdkGalleryEnabled),t.xp6(1),t.Q6J("ngIf",pe.micEnabled),t.xp6(1),t.Q6J("ngIf",pe.gfnMicEnabled),t.xp6(1),t.Q6J("ngIf",pe.showBroadcast),t.xp6(1),t.Q6J("ngIf",pe.showWebcam),t.xp6(1),t.Q6J("ngIf",pe.showConnectionStatus),t.xp6(1),t.Q6J("ngIf",pe.showStats))},directives:[c.xw,c.yH,n.sg,n.O5,n.mk,ge.oO,c.Wh,v.Hw,n.PC,ge.Zl,Ve.T],pipes:[C.X$,n.Nd],styles:[".nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-error[_ngcontent-%COMP%]{color:#e02828}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}.hud-window[_ngcontent-%COMP%]{position:relative;height:264px;width:100%;background-color:#393939}.hud-icons[_ngcontent-%COMP%]{width:24px;height:24px;background-color:#000000b3}.hud-icons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:14px;height:14px;font-size:14px;color:#fff}.hud-topleft[_ngcontent-%COMP%]{left:0;top:0;position:absolute;transform-origin:left top}.hud-topleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{margin-top:8px}.isLtr[_nghost-%COMP%]   .hud-topleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hud-topleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .hud-topleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .hud-topleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hud-topleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .hud-topleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.hud-topright[_ngcontent-%COMP%]{right:0;top:0;position:absolute;transform-origin:right top}.hud-topright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{margin-top:8px}.isLtr[_nghost-%COMP%]   .hud-topright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hud-topright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .hud-topright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .hud-topright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hud-topright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .hud-topright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.hud-bottomleft[_ngcontent-%COMP%]{left:0;bottom:0;position:absolute;flex-direction:column-reverse!important;transform-origin:left bottom}.hud-bottomleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{margin-bottom:8px}.isLtr[_nghost-%COMP%]   .hud-bottomleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hud-bottomleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .hud-bottomleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .hud-bottomleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hud-bottomleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .hud-bottomleft[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.hud-bottomright[_ngcontent-%COMP%]{right:0;bottom:0;position:absolute;flex-direction:column-reverse!important;transform-origin:right bottom}.hud-bottomright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{margin-bottom:8px}.isLtr[_nghost-%COMP%]   .hud-bottomright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hud-bottomright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=ltr][_ngcontent-%COMP%]   .hud-bottomright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-right:8px}.isRtl[_nghost-%COMP%]   .hud-bottomright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hud-bottomright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=rtl][_ngcontent-%COMP%]   .hud-bottomright[_ngcontent-%COMP%]   .hud-icons[_ngcontent-%COMP%]{--dummy4: 0;margin-left:8px}.hud-bottomright[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .hud-bottomleft[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-direction:column-reverse!important}[_nghost-%COMP%]{padding:24px}.stats-small[_ngcontent-%COMP%]{width:49px;height:24px;background-color:#000}.stats-large[_ngcontent-%COMP%]{width:49px;height:88px;background-color:#000}.stats-topleft[_ngcontent-%COMP%]{left:0;top:0;padding-top:8px;position:absolute;transform-origin:left top}.stats-topright[_ngcontent-%COMP%]{right:0;top:0;padding-top:8px;position:absolute;transform-origin:right top}.stats-bottomleft[_ngcontent-%COMP%]{left:0;bottom:0;padding-bottom:8px;position:absolute;flex-direction:column-reverse!important;transform-origin:left bottom}.stats-bottomright[_ngcontent-%COMP%]{right:0;bottom:0;padding-bottom:8px;position:absolute;flex-direction:column-reverse!important;transform-origin:right bottom}"]}),Ne})();function Ee(Ne,Rt){1&Ne&&(t.ynx(0),t._UZ(1,"div",6),t.TgZ(2,"div",7),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.BQk()),2&Ne&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"settings.NotificationsEnable")," "))}function dt(Ne,Rt){1&Ne&&t._UZ(0,"div",13)}function kt(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div",14),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne){const H=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,H.header)," ")}}function Zt(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-checkbox",15),t.NdJ("ngModelChange",function(Ae){return t.CHM(H),t.oxw(2).$implicit.state=Ae})("change",function(){t.CHM(H);const Ae=t.oxw(2).index;return t.oxw(2).onStateChanged(Ae)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&Ne){const H=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngModel",H.state),t.xp6(1),t.Oqu(t.lcZ(3,2,H.text))}}function dn(Ne,Rt){if(1&Ne&&(t.ynx(0),t.YNc(1,dt,1,0,"div",11),t.YNc(2,kt,3,3,"div",12),t.YNc(3,Zt,4,4,"div",10),t.BQk()),2&Ne){const H=t.oxw(),pe=H.$implicit,Ae=H.index;t.xp6(1),t.Q6J("ngIf",pe.header&&Ae>0),t.xp6(1),t.Q6J("ngIf",pe.header),t.xp6(1),t.Q6J("ngIf",pe.text)}}function gn(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div"),t.YNc(1,dn,4,3,"ng-container",10),t.qZA()),2&Ne){const H=Rt.$implicit;t.xp6(1),t.Q6J("ngIf",H.enable)}}function jt(Ne,Rt){if(1&Ne&&(t._UZ(0,"nv-divider"),t.TgZ(1,"div",8),t.YNc(2,gn,2,1,"div",9),t.qZA()),2&Ne){const H=t.oxw();t.xp6(2),t.Q6J("ngForOf",H.notifications)}}let En=(()=>{class Ne extends w{constructor(H,pe,Ae,et,wt,Yt,Xt,In,Tn){super(pe,Ae,wt,null,Tn),this.loggingService=H,this.notificationService=et,this.featureSupportService=Xt,this.telemetryService=In,this.initialState=void 0,this.showNotifications=void 0,this.notifications=[{header:"commonLabels.General",enable:!0},{control:a._R.OpenOverlay,text:"settings.IngameOverlayNoThe",state:this.initialState,enable:!0},{header:"settings.Network",enable:this.featureSupportService.isConnectionStatusEnabled()},{control:a._R.ConnectionStatus,text:"settings.ConnectionStatus",state:this.initialState,enable:this.featureSupportService.isConnectionStatusEnabled()},{header:"gallery.Gallery",enable:this.featureSupportService.isSdkGalleryEnabled()},{control:a._R.SaveHLToGallery,text:"notification.HighlightSaved",state:this.initialState,enable:this.featureSupportService.isSdkGalleryEnabled()},{control:a._R.SaveMRToGallery,text:"notification.ManualRecordStopped",state:this.initialState,enable:this.featureSupportService.isSdkGalleryEnabled()},{control:a._R.SaveIRToGallery,text:"notification.InstantReplaySaved",state:this.initialState,enable:this.featureSupportService.isSdkGalleryEnabled()},{control:a._R.SaveSSToGallery,text:"notification.ScreenshotSaved",state:this.initialState,enable:this.featureSupportService.isSdkGalleryEnabled()},{header:"settings.RecordAndIR",productFilter:"GFN",enable:this.featureSupportService.isShadowPlayEnabled()},{header:"settings.RecordIRAndBroadcast",productFilter:"GFE",enable:!0},{control:a._R.IROnOff,text:"settings.IRStatus",state:this.initialState,enable:this.featureSupportService.isShadowPlayEnabled()},{control:a._R.MROn,text:"settings.MRStatus",state:this.initialState,enable:this.featureSupportService.isShadowPlayEnabled()},{control:a._R.BCOnOff,text:"settings.BCStatus",state:this.initialState,productFilter:"GFE",enable:!0},{control:a._R.BCPauseResume,text:"settings.BCPlayStatus",state:this.initialState,productFilter:"GFE",enable:!0}],this.sdkGalleryEnable=!1,this.shadowplayEnable=!1,super.bar("settings.Notifications"),this.logger=this.loggingService.getLogger("Notifications"),this.sdkGalleryEnable=this.featureSupportService.isSdkGalleryEnabled(),this.shadowplayEnable=this.featureSupportService.isShadowPlayEnabled(),this.init(),this.notifications=this.notifications.filter(Qn=>!Qn.productFilter||Qn.productFilter===Yt.branding)}init(){var H;let pe=[];pe=this.notificationService.getNotificationControls(),this.notifications.forEach(Ae=>{if(Ae.control){const et=pe.find(wt=>wt.control===Ae.control);et&&(Ae.state=et.enable)}}),this.showNotifications=this.notificationService.getGlobalToggle(),null===(H=this.gfnInfoService.settingsService)||void 0===H||H.networkWarningsEnabled$.pipe((0,p.R)(this.destroy$)).subscribe(Ae=>{this.logger.info("Connection Status Indicator is: "+(Ae?"On":"Off"));const et=this.notifications.find(wt=>wt.control===a._R.ConnectionStatus);et&&(et.state=Ae)})}onStateChanged(H){var pe;const Ae=this.notifications[H].state,et=this.notifications[H].control;this.logger.info("Notification Control Changed, Index: "+H+" State: "+Ae),et===a._R.ConnectionStatus&&(null===(pe=this.gfnInfoService.settingsService)||void 0===pe||pe.setNetworkWarningsEnabled(Ae)),this.notificationService.setNotificationControl(et,Ae),this.telemetryService.sendNotificationChanged(et,Ae)}notificationsToggleEvent(H){this.notificationService.setGlobalToggle(H.checked),this.telemetryService.sendNotificationChanged(a._R.Empty,H.checked)}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(m.ed),t.Y36(a.f5),t.Y36(i.gz),t.Y36(a.nG),t.Y36(a.ad),t.Y36(a.gs),t.Y36(a.lm),t.Y36(a.l),t.Y36(a.In))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-notifications"]],features:[t.qOj],decls:9,vars:6,consts:[["fxLayout","column","fxFlex","",1,"nv-hig"],["fxFlex","none","fxLayout","row","fxLayoutAlign","start center",1,"toggle-height"],["fxFlex","grow",1,"font-body1","font-color-primary"],["fxFlex","none",1,"settings-padding",3,"ngModel","ngModelChange","change"],[4,"ngIf","ngIfElse"],["notificationson",""],[1,"nv-gap-8"],[1,"font-body2","font-color-secondary","notification-label"],["fxFlex","grow"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","nv-gap-16",4,"ngIf"],["class","font-body3 font-color-tertiary notification-label",4,"ngIf"],[1,"nv-gap-16"],[1,"font-body3","font-color-tertiary","notification-label"],[1,"font-body1","font-color-primary",3,"ngModel","ngModelChange","change"]],template:function(H,pe){if(1&H&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-slide-toggle",3),t.NdJ("ngModelChange",function(et){return pe.showNotifications=et})("change",function(et){return pe.notificationsToggleEvent(et)}),t.qZA(),t.qZA(),t.YNc(6,Ee,5,3,"ng-container",4),t.YNc(7,jt,3,1,"ng-template",null,5,t.W1O),t.qZA()),2&H){const Ae=t.MAs(8);t.xp6(3),t.Oqu(t.lcZ(4,4,"settings.ShowNotifications")),t.xp6(2),t.Q6J("ngModel",pe.showNotifications),t.xp6(1),t.Q6J("ngIf",!pe.showNotifications)("ngIfElse",Ae)}},directives:[c.xw,c.yH,c.Wh,G.Rr,x.xZ,P.JJ,P.On,n.O5,I.n,n.sg,te.oG],pipes:[C.X$],styles:[".nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-error[_ngcontent-%COMP%]{color:#e02828}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.notification-label[_ngcontent-%COMP%]{padding:8px 0}.isLtr[_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%]{padding-right:10px}html[dir=ltr][_ngcontent-%COMP%]   .settings-padding[_ngcontent-%COMP%]{--dummy2: 0;padding-right:10px}.isRtl[_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%]{padding-left:10px}html[dir=rtl][_ngcontent-%COMP%]   .settings-padding[_ngcontent-%COMP%]{--dummy2: 0;padding-left:10px}.toggle-height[_ngcontent-%COMP%]{height:40px}[_nghost-%COMP%]{padding:24px}"]}),Ne})();var Pn=e(85816),Ln=e(9170),ht=e(98636),Vt=e(202);const ne=["shortcutDiv"],Be=["shortcutSpan"],vt=function(Ne){return{"shortcut-hover-selected":Ne}},Ct=function(Ne,Rt){return{"shortcut-scroll":Ne,"shortcut-noscroll":Rt}};let gt=(()=>{class Ne{constructor(H){this.loggingService=H,this.dimmed=!1,this.selected=!1,this.id=void 0,this.shortcutData=new t.vpe,this.enableScrolling=!1,this.logger=this.loggingService.getLogger("NvShortcut"),this.destroy$=new s.xQ}set shortcutString(H){H&&(this.scString=H,setTimeout(()=>{const pe=this.shortcutdiv.nativeElement.offsetWidth,Ae=this.shortcutspan.nativeElement.offsetWidth;this.logger.info("Div Width: "+pe+" Span Width: ",+Ae),this.enableScrolling=Ae>pe}))}set deviceOS(H){this._deviceOS=H}ngOnInit(){this.comboKeyHelper=new m.n2(this.loggingService,this._deviceOS,!!m.ng.isBrowserPlatform())}selectShortcut(){this.logger.info("Select shortcut: ",this.scString),this.comboKeyHelper.resetCurrentKeyCombo()}isShortcutSelected(){return this.selected}processKeyUpEvent(H){this.comboKeyHelper.isMetaKey(H)||this.comboKeyHelper.isEscapeKey(H)||this.comboKeyHelper.shouldIgnore(H)||this.comboKeyHelper.isKeyDownOnly||(this.comboKeyHelper.isDownSet?(this.comboKeyHelper.resetDownStatus(),this.comboKeyHelper.logEvent(H,!0),this.comboKeyHelper.loadKey(H),this.logger.info("CurrentKeyCombo: ",this.comboKeyHelper.loadedKeyCombo),this.shortcutData.emit(this.comboKeyHelper.loadedKeyCombo.slice()),this.selectShortcut()):this.comboKeyHelper.isResetKey(H)&&(this.logger.info("Resetting key"),this.comboKeyHelper.loadKey(H),this.shortcutData.emit(this.comboKeyHelper.loadedKeyCombo.slice()),this.selectShortcut()))}processKeyDownEvent(H){this.comboKeyHelper.setDown(),this.comboKeyHelper.processKeyDownEvent(H),this.comboKeyHelper.isKeyDownOnly&&this.comboKeyHelper.shortcutData.pipe((0,u.q)(1)).subscribe(pe=>{const Ae=this.getModifierKeys(pe);pe.length!==Ae&&this.shortcutData.emit(this.rearrangeShortcutKeys(pe))})}rearrangeShortcutKeys(H=[]){let pe=[];return pe=H.sort((Ae,et)=>Ae-et),this.cmdKeyIsPresent(H)&&(pe=pe.slice(0,H.length-1),pe.unshift(m.dD.Cmd)),pe}cmdKeyIsPresent(H){return-1!==H.indexOf(m.dD.Cmd)}getModifierKeys(H){let pe=0;return H.forEach(Ae=>{this.checkIfModifierKey(Ae)&&pe++}),pe}checkIfModifierKey(H){let pe=!1;return m.Du.forEach(Ae=>{Ae===H&&(pe=!0)}),pe}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(m.ed))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["nv-shortcut"]],viewQuery:function(H,pe){if(1&H&&(t.Gf(ne,7),t.Gf(Be,7)),2&H){let Ae;t.iGM(Ae=t.CRH())&&(pe.shortcutdiv=Ae.first),t.iGM(Ae=t.CRH())&&(pe.shortcutspan=Ae.first)}},inputs:{shortcutName:"shortcutName",dimmed:"dimmed",shortcutString:"shortcutString",deviceOS:"deviceOS"},outputs:{shortcutData:"shortcutData"},decls:11,vars:13,consts:[["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","16px"],["fxFlex","grow"],[1,"font-body1","font-color-primary"],["fxFlex","none","tabindex","0",1,"shortcut-box","shortcut-hover",3,"ngClass","click","keydown","keyup"],[1,"shortcut-box-nested",3,"ngClass"],["shortcutDiv",""],[1,"font-body2","font-color-secondary"],["shortcutSpan",""]],template:function(H,pe){1&H&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"span",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.NdJ("click",function(){return pe.selectShortcut()})("keydown",function(et){return pe.processKeyDownEvent(et)})("keyup",function(et){return pe.processKeyUpEvent(et)}),t.TgZ(6,"div",4,5),t.TgZ(8,"span",6,7),t._uU(10),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&H&&(t.xp6(3),t.Oqu(t.lcZ(4,6,pe.shortcutName)),t.xp6(2),t.Q6J("ngClass",t.VKq(8,vt,pe.isShortcutSelected())),t.xp6(1),t.Q6J("ngClass",t.WLB(10,Ct,pe.enableScrolling,!pe.enableScrolling)),t.xp6(2),t.ekj("disabled-opacity",pe.dimmed),t.xp6(2),t.Oqu(pe.scString))},directives:[c.xw,c.Wh,c.SQ,c.yH,n.mk,ge.oO],pipes:[C.X$],styles:[".shortcut-box[_ngcontent-%COMP%]{width:140px;height:52px;box-sizing:border-box;border-bottom:1px solid rgba(255,255,255,.3);padding-bottom:1px;background:#393939}.shortcut-box[_ngcontent-%COMP%]:focus:not([disabled]){border-bottom:2px solid #76b900;padding-bottom:0;cursor:pointer}.shortcut-box[_ngcontent-%COMP%]:hover:not([disabled]){cursor:pointer}.isLtr[_nghost-%COMP%]   .shortcut-box-nested[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .shortcut-box-nested[_ngcontent-%COMP%]{margin:16px 8px 16px 16px}html[dir=ltr][_ngcontent-%COMP%]   .shortcut-box-nested[_ngcontent-%COMP%]{--dummy: 0;margin:16px 8px 16px 16px}.isRtl[_nghost-%COMP%]   .shortcut-box-nested[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .shortcut-box-nested[_ngcontent-%COMP%]{margin:16px 16px 16px 8px}html[dir=rtl][_ngcontent-%COMP%]   .shortcut-box-nested[_ngcontent-%COMP%]{--dummy: 0;margin:16px 16px 16px 8px}.shortcut-noscroll[_ngcontent-%COMP%], .shortcut-scroll[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:116px;height:24px}.shortcut-scroll[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:0;left:0;white-space:nowrap;transform:translate(0);transition:1s}.shortcut-scroll[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{transform:translate(calc(116px - 100%))}"]}),Ne})();var At=Z.Yk.Share.Shareserver.HotkeyEnum;function le(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div",11),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne){const H=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,H.header)," ")}}function De(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-shortcut",12),t.NdJ("shortcutData",function(Ae){t.CHM(H);const et=t.oxw(2).index;return t.oxw(2).onShortcutChanged(Ae,et)})("focusin",function(){return t.CHM(H),t.oxw(4).itemClicked()})("focusout",function(){return t.CHM(H),t.oxw(4).itemUnclicked()}),t.qZA()}if(2&Ne){const H=t.oxw(2).$implicit,pe=t.oxw(2);t.Q6J("shortcutName",H.description)("shortcutString",H.key)("deviceOS",pe.deviceOS)("dimmed",H.disabled)}}function nt(Ne,Rt){1&Ne&&t._UZ(0,"div",13)}function bt(Ne,Rt){if(1&Ne&&(t.ynx(0),t.YNc(1,le,3,3,"div",8),t.YNc(2,De,1,4,"nv-shortcut",9),t.YNc(3,nt,1,0,"div",10),t.BQk()),2&Ne){const H=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",H.header),t.xp6(1),t.Q6J("ngIf",H.name),t.xp6(1),t.Q6J("ngIf",H.name)}}function Wt(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div"),t.YNc(1,bt,4,3,"ng-container",7),t.qZA()),2&Ne){const H=Rt.$implicit;t.xp6(1),t.Q6J("ngIf",!H.hide)}}function ln(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.TgZ(2,"div",3),t.YNc(3,Wt,2,1,"div",4),t.qZA(),t._UZ(4,"nv-divider"),t.TgZ(5,"nv-item-button",5),t.NdJ("clicked",function(){return t.CHM(H),t.oxw().resetClicked()}),t.qZA(),t._UZ(6,"div",6),t.qZA(),t.qZA()}if(2&Ne){const H=t.oxw();t.xp6(3),t.Q6J("ngForOf",H.hotkeys)}}let Sn=(()=>{class Ne extends w{constructor(H,pe,Ae,et,wt,Yt,Xt,In,Tn,Qn,Xn,wn,Gi,ci,qn,Hn,Lo,fi){super(pe,Ae,wn),this.loggingService=H,this.hotkeyService=et,this.shadowplayService=wt,this.nvCameraService=Yt,this.translate=Xt,this.dialogHelperService=In,this.gfnBroadcastService=Tn,this.igoConfig=Qn,this.osService=Xn,this.dialogHelper=Gi,this.featureSupportService=ci,this.hotKeyHelper=qn,this.hotkeyShareService=Hn,this.systemInfoService=Lo,this.clientInputService=fi,this.blocking=!1,this.snackBarRef=void 0,this.renderTemplate=!1,this.hotkeys=[{header:"settings.General"},{name:At.OpenIGO,description:"settings.IngameOverlay",key:"",protect:!0},{name:At.PTT,description:"settings.ActivatePushToTalkNoArg",key:"",hide:!0},{name:At.MicToggle,description:"settings.ToggleMic",key:""},{name:At.NativeKeyboardInputDialog,description:"settings.NativeKeyboardInputDialog",key:""},{name:At.FPS,description:"settings.ToggleFPSCounter",key:"",hide:!0},{name:At.QuitGame,description:"settings.QuitGameHotKey",key:""},{header:"settings.Statistics",hide:!0},{name:At.StatisticsToggle,description:"settings.StatisticsChangeFormat",key:"",hide:!0},{header:"settings.Record",hide:!this.featureSupportService.isShadowPlayEnabled()},{name:At.RecordToggle,description:"settings.ToggleManualRecord",key:"",hide:!this.featureSupportService.isShadowPlayEnabled()},{name:At.DVRToggle,description:"settings.ToggleIROnOff",key:"",hide:!this.featureSupportService.isShadowPlayEnabled()},{name:At.DVRSave,description:"settings.SaveLastNMins",key:"",hide:!this.featureSupportService.isShadowPlayEnabled()},{header:"settings.Capture",hide:!this.featureSupportService.isGalleryEnabled()},{name:At.Screenshot,description:"settings.SaveAScreenshot",key:"",hide:!this.featureSupportService.isGalleryEnabled()},{name:At.OpenAnsel,description:"settings.PhotographTheScene",key:"",hide:!0},{header:"settings.Broadcast",hide:!0},{name:At.BroadcastToggle,description:"settings.StartEndBroadcast",key:"",hide:!0},{name:At.BroadcastPauseToggle,description:"settings.PauseResumeBroadcast",key:"",hide:!0},{name:At.CameraToggle,description:"settings.ToggleCamera",key:"",hide:!0},{name:At.CommentsToggle,description:"settings.FacebookComments",key:"",hide:!0},{header:"broadcast.CustomOverlays",hide:!0},{name:At.CustomOverlayA,description:"settings.ToggleCustomOverlay1",key:"",hide:!0},{name:At.CustomOverlayB,description:"settings.ToggleCustomOverlay2",key:"",hide:!0},{name:At.CustomOverlayC,description:"settings.ToggleCustomOverlay3",key:"",hide:!0},{header:"nvcamera.GameFilter",hide:!0},{name:At.FreeStyleToggleStyle1,description:"settings.ToggleStyle1",key:"",hide:!0},{name:At.FreeStyleToggleStyle2,description:"settings.ToggleStyle2",key:"",hide:!0},{name:At.FreeStyleToggleStyle3,description:"settings.ToggleStyle3",key:"",hide:!0}],this.moduleFeatureHkeyItems=[{module:"GFN",feature:"GameFilter",hotkeys:[{header:"nvcamera.GameFilter"},{name:At.FreeStyleToggleStyle1,description:this.translate.instant("settings.ToggleStyleInGF",{styleNo:1}),key:""},{name:At.FreeStyleToggleStyle2,description:this.translate.instant("settings.ToggleStyleInGF",{styleNo:2}),key:""},{name:At.FreeStyleToggleStyle3,description:this.translate.instant("settings.ToggleStyleInGF",{styleNo:3}),key:""}]},{module:"GFN",feature:"PhotoMode",hotkeys:[{header:"nvcamera.PhotoMode"},{name:At.OpenAnsel,description:"settings.PhotographTheScene",key:""}]},{module:"GFN",feature:"GfnBroadcast",hotkeys:[{header:"gfnBroadcast.Broadcast"},{name:At.ConnectGfnBroadcastToggle,description:"gfnBroadcast.Connect",key:""}]},{module:"GFN",feature:"GfnStatistics",hotkeys:[{header:"settings.Statistics"},{name:At.StatisticsToggle,description:"settings.StatisticsChangeFormat",key:""}]}],super.bar("settings.KeyboardShortcuts"),this.logger=this.loggingService.getLogger("Shortcuts"),this.logger.info("Constructor"),this.featureSupportService.isNvcameraEnabled()&&(this.nvCameraService.isGameFilterSupported()&&this.addHotkeysFor(this.igoConfig.branding,"GameFilter"),this.nvCameraService.isPhotoModeSupported()&&this.addHotkeysFor(this.igoConfig.branding,"PhotoMode")),this.featureSupportService.isStatisticsEnabled()&&this.addHotkeysFor(this.igoConfig.branding,"GfnStatistics"),this.featureSupportService.isBroadcastEnabled()&&this.gfnBroadcastService.isGfnBroadcastSupported()&&this.addHotkeysFor(this.igoConfig.branding,"GfnBroadcast")}ngOnInit(){super.ngOnInit(),this.init()}init(){if(this.systemInfoService.getDeviceOSType().pipe((0,p.R)(this.destroy$),(0,u.q)(1)).subscribe(H=>{this.deviceOS=H,this.renderTemplate=!0}),"GFE"===this.igoConfig.branding&&this.hotkeys.forEach(H=>{!0===H.hide&&(H.hide=!1)}),!0===this.igoConfig.GFNCefClient){const H=this.hotkeys.find(pe=>pe.name===At.NativeKeyboardInputDialog);this.clientInputService.isImeEnabled$.pipe((0,p.R)(this.destroy$)).subscribe(pe=>{this.logger.info("Checking ClientIME enablement value ",pe),!0===pe?(this.hotkeyShareService.removeFromHotkeyIgnoreList(At.NativeKeyboardInputDialog),this.hotkeyService.startListeningToHotkey(At.NativeKeyboardInputDialog).pipe((0,p.R)(this.destroy$)).subscribe(Ae=>{Ae&&this.getAllHotkeys()}),""===H.key&&this.hotkeyService.getHotkeyString(H.name).subscribe(Ae=>{H.key=Ae})):(this.hotkeyService.stopListeningToHotkey(At.NativeKeyboardInputDialog),this.getAllHotkeys())},pe=>{this.logger.info("Error getting ClientIME enablement value, hiding the setting",pe),this.hotkeyService.stopListeningToHotkey(At.NativeKeyboardInputDialog)})}else this.hotkeyService.stopListeningToHotkey(At.NativeKeyboardInputDialog),this.getAllHotkeys();if(this.featureSupportService.isShadowPlayEnabled()){const H=this.hotkeys.find(pe=>pe.name===At.DVRSave);if(H)if("en_US"===this.translate.currentLang){const pe=this.shadowplayService.maxIRTime;if(pe<60){const Ae=pe.toString();H.description=this.translate.instant("settings.SaveLastXSecs",{arg1:Ae})}else{const Ae=Math.floor(pe/60),et=(pe-60*Ae).toString(),wt=Ae.toString();H.description=this.translate.instant("settings.SaveLastXMins",{arg1:wt,arg2:et})}}else{let pe=(this.shadowplayService.maxIRTime/60).toString();const Ae=pe.indexOf(".");-1!==Ae&&(pe=pe.slice(0,Ae+3)),H.description=this.translate.instant("settings.SaveLastNMins",{args:pe})}}}getAllHotkeys(){this.hotkeys.forEach(H=>{H.name&&!H.hide&&this.hotkeyService.getHotkeyString(H.name).pipe((0,p.R)(this.destroy$)).subscribe(pe=>{pe&&pe.length&&(this.logger.info("Hotkey: ",pe),"None"===pe?this.translate.get("settings.None").subscribe(Ae=>{H.key=Ae,H.disabled=!0}):(H.key=pe,H.disabled=!1))})})}ngOnDestroy(){this.hotkeyService.blockAllHotkeys(!1).subscribe(()=>{super.ngOnDestroy()})}isResetKey(H){return 1===H.length&&(H[0]===m.dD.Space||H[0]===m.dD.Backspace||H[0]===m.dD.Delete)}itemClicked(){this.logger.info("Item Clicked - Block"),this.blocking||(this.blocking=!0,this.hotkeyService.blockAllHotkeys(!0).pipe((0,p.R)(this.destroy$)).subscribe())}itemUnclicked(){this.logger.info("Item Unclicked - Unblock"),this.blocking&&(this.blocking=!1,this.hotkeyService.blockAllHotkeys(!1).pipe((0,p.R)(this.destroy$)).subscribe())}onShortcutChanged(H,pe){if(!H.length||this.hotkeyService.checkIdenticalEntry(H,this.hotkeys[pe].name))return;if(this.isResetKey(H)){if(this.hotkeys[pe].protect)return;H.length=0,H[0]=0;const Xt=(0,Vt.cloneDeep)(this.hotkeys[pe]);return Xt.disabled=!0,this.translate.get("settings.None").subscribe(In=>{Xt.key=In}),void this.setHotkeyString(H,pe,Xt)}let Ae=0;H.forEach(Xt=>{this.hotkeyService.checkIfModifierKey(Xt)&&Ae++});let et=!1;if(this.osService.getOSType()===m.eJ.Windows&&H.forEach(Xt=>{this.hotkeyService.checkIfWinKey(Xt)&&(et=!0)}),et||H.length-Ae>1)return void this.translate.get("snacks.HotkeyInvalid").subscribe(Xt=>{this.snackBarRef=this.dialogHelperService.openSnackBar(Xt)});const wt=[];if(this.hotkeys.forEach(Xt=>{Xt.name&&!Xt.hide&&wt.push(Xt.name)}),this.hotkeyService.checkForDup(H,wt))return void this.translate.get("snacks.HotkeyInUseInternal").subscribe(Xt=>{this.snackBarRef=this.dialogHelperService.openSnackBar(Xt)});this.snackBarRef&&(this.snackBarRef.dismiss(),this.snackBarRef=void 0);const Yt=(0,Vt.cloneDeep)(this.hotkeys[pe]);Yt.key=this.hotKeyHelper.shortcutToString(H),Yt.disabled=!1,this.setHotkeyString(H,pe,Yt)}setHotkeyString(H,pe,Ae){this.hotkeyService.setHotkeyString(Ae.name,H).pipe((0,p.R)(this.destroy$)).subscribe(et=>{et!==a.z9.Valid?et===a.z9.Invalid?this.translate.get("snacks.HotkeyInvalid").subscribe(wt=>{this.snackBarRef=this.dialogHelperService.openSnackBar(wt)}):et===a.z9.InUse&&"GFN"===this.igoConfig.branding?this.translate.get("snacks.HotkeyInUseByGFE").subscribe(wt=>{this.snackBarRef=this.dialogHelperService.openSnackBar(wt)}):et===a.z9.InUse&&"GFE"===this.igoConfig.branding?this.translate.get("snacks.HotkeyInUseByGFN").subscribe(wt=>{this.snackBarRef=this.dialogHelperService.openSnackBar(wt)}):et===a.z9.Error&&this.logger.error("setHotkeyString failed, should not get here"):setTimeout(()=>{this.hotkeys[pe]=Ae,this.itemUnclicked()})})}addHotkeysFor(H,pe){this.moduleFeatureHkeyItems.filter(Ae=>Ae.feature===pe&&Ae.module===H).forEach(Ae=>{const et=this.hotkeys.find(wt=>wt.header===Ae.hotkeys[0].header);void 0!==et&&et.hide?(et.hide=!1,Ae.hotkeys.forEach(wt=>{const Yt=this.hotkeys.find(Xt=>Xt.name===wt.name);void 0!==Yt&&(Yt.hide=!1,Yt.name=wt.name,Yt.description=wt.description)})):this.hotkeys.push(...Ae.hotkeys)})}resetClicked(){this.dialogHelper.openAlertDialog({title:"confirmation.resetToDefaultsTitle",query:"confirmation.resetToDefaultsDescription",queryParam:"",action1:"confirmation.NotRightNow",action2:"confirmation.yes"}).pipe((0,p.R)(this.destroy$),(0,Pn.zg)(pe=>pe.afterClosed()),(0,Ln.h)(pe=>pe===a.DX.Action2),(0,Pn.zg)(()=>this.hotkeyService.resetToDefaults()),(0,ht.b)(()=>this.init())).subscribe()}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(m.ed),t.Y36(a.f5),t.Y36(i.gz),t.Y36(a.y1),t.Y36(a.dS),t.Y36(a.En),t.Y36(C.sK),t.Y36(a.Mb),t.Y36(a.kq),t.Y36(a.gs),t.Y36(a.HY),t.Y36(a.ad),t.Y36(a.Mb),t.Y36(a.lm),t.Y36(m.d_),t.Y36(a.qp),t.Y36(m.Ob),t.Y36(a.SD))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-shortcuts"]],features:[t.qOj],decls:1,vars:1,consts:[["fxFlex","grow",4,"ngIf"],["fxFlex","grow"],["fxLayout","column","fxFlex",""],["fxFlex","grow",1,"shortcut-list"],[4,"ngFor","ngForOf"],["svgIcon","reset","titleString","settings.ResetToDefaults",3,"clicked"],["fxFlex","none",1,"nv-gap-24"],[4,"ngIf"],["class","font-body3 font-color-tertiary nv-label",4,"ngIf"],[3,"shortcutName","shortcutString","deviceOS","dimmed","shortcutData","focusin","focusout",4,"ngIf"],["class","nv-gap-8",4,"ngIf"],[1,"font-body3","font-color-tertiary","nv-label"],[3,"shortcutName","shortcutString","deviceOS","dimmed","shortcutData","focusin","focusout"],[1,"nv-gap-8"]],template:function(H,pe){1&H&&t.YNc(0,ln,7,1,"div",0),2&H&&t.Q6J("ngIf",pe.renderTemplate)},directives:[n.O5,c.yH,c.xw,n.sg,I.n,g.n,gt],pipes:[C.X$],styles:[".nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-error[_ngcontent-%COMP%]{color:#e02828}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}.header-padding[_ngcontent-%COMP%]{padding:8px 0}[_nghost-%COMP%]{padding:0 24px;overflow-y:auto}.isLtr   [_nghost-%COMP%]{margin-right:-24px}html[dir=ltr]   [_nghost-%COMP%]{--dummy4: 0;margin-right:-24px}.isRtl   [_nghost-%COMP%]{margin-left:-24px}html[dir=rtl]   [_nghost-%COMP%]{--dummy4: 0;margin-left:-24px}.shortcut-list[_ngcontent-%COMP%]{padding-top:24px;overflow-y:overlay}.isLtr[_nghost-%COMP%]   .shortcut-list[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .shortcut-list[_ngcontent-%COMP%]{padding-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .shortcut-list[_ngcontent-%COMP%]{--dummy2: 0;padding-right:24px}.isRtl[_nghost-%COMP%]   .shortcut-list[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .shortcut-list[_ngcontent-%COMP%]{padding-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .shortcut-list[_ngcontent-%COMP%]{--dummy2: 0;padding-left:24px}.isLtr[_nghost-%COMP%]   .shortcut-list[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .shortcut-list[_ngcontent-%COMP%]{margin-right:-24px}html[dir=ltr][_ngcontent-%COMP%]   .shortcut-list[_ngcontent-%COMP%]{--dummy4: 0;margin-right:-24px}.isRtl[_nghost-%COMP%]   .shortcut-list[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .shortcut-list[_ngcontent-%COMP%]{margin-left:-24px}html[dir=rtl][_ngcontent-%COMP%]   .shortcut-list[_ngcontent-%COMP%]{--dummy4: 0;margin-left:-24px}"]}),Ne})();var qe=e(83733),Ut=e(9082);function M(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div",12),t.TgZ(1,"nv-hig-slider",13),t.NdJ("valueChange",function(Ae){return t.CHM(H),t.oxw().diskSpaceSliderValue=Ae})("valueChange",function(Ae){return t.CHM(H),t.oxw().onDiskSpaceSliderChanged(Ae)}),t.qZA(),t.TgZ(2,"span",14),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()}if(2&Ne){const H=t.oxw();t.xp6(1),t.Q6J("min",H.diskSpaceSliderStep)("max",H.diskSpaceSliderMax)("value",H.diskSpaceSliderValue)("step",H.diskSpaceSliderStep),t.xp6(2),t.Oqu(t.xi3(4,5,H.diskSpaceString,H.diskSpaceParams))}}function re(Ne,Rt){1&Ne&&(t.TgZ(0,"div",15),t._UZ(1,"div",16),t.TgZ(2,"div",17),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&Ne&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"settings.DiskSpaceHelper")))}function Ce(Ne,Rt){1&Ne&&(t.TgZ(0,"div",18),t._UZ(1,"mat-icon",19),t.TgZ(2,"div",17),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&Ne&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"settings.IncreaseDiskSpaceLimit")))}let ke=(()=>{class Ne extends w{constructor(H,pe,Ae,et,wt,Yt,Xt,In,Tn,Qn,Xn,wn){super(Xt,In,Qn,Tn),this.loggingService=H,this.bridgeService=pe,this.osService=Ae,this.galleryService=et,this.sdkHighlightsService=wt,this.shadowPlayService=Yt,this.translate=Xn,this.igoConfig=wn,this.initializing=!0,this.highlightsActive=!1,this.disableFolders=!1,this.irInProgress=!1,this.mrInProgress=!1,this.availDiskSpaceSwitchModel=!1,this.diskSpaceSliderValue=100,this.prevDiskSpaceSliderValue=this.diskSpaceSliderValue,this.diskSpaceSliderMax=100,this.diskSpaceSliderStep=10,this.diskSpaceSliderValueDefault=100,this.totalMB=10,this.diskSpaceWarning=!1,this.tickValues=[10,20,30,40,50,60,70,80,90,100],this.sliderInitComplete=!1,this.diskSpaceParams={},this.currentStorageLocation=void 0,this.tempStorageLocation=void 0,this.originalStorageLocation=void 0,this.externalDrivesValid=!1,this.cancelDisabled=!1,this.dialogRef=void 0,super.bar("settings.FilesAndDiskSpace"),this.logger=this.loggingService.getLogger("Storage"),this.logger.info("Constructor"),this.myRoute=In}ngOnInit(){super.ngOnInit(),this.sdkHighlightsService.isHighlightsActive().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.highlightsActive=H,this.checkFolderState()}),this.shadowPlayService.getMRState().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.mrInProgress=H,this.checkFolderState()}),this.shadowPlayService.getIRState().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.irInProgress=H===a.YQ.recording,this.checkFolderState()}),this.startupInit()}startupInit(){const H=this.myRoute.snapshot.paramMap.get("folder"),pe=this.myRoute.snapshot.paramMap.get("source");if(this.dirSeparator=this.osService.getDirSeparator(),this.fileBaseSize=this.osService.getFileBaseSize(),"GFE"===this.igoConfig.branding&&(this.externalDrivesValid=!0),this.galleryService.listenForTrackerEvents().pipe((0,p.R)(this.destroy$)).subscribe(Ae=>{this.trackEventProgress(Ae)}),this.galleryService.updatingTracker)this.originalStorageLocation=this.galleryService.getVideoFolder(),this.currentStorageLocation=this.galleryService.getCurrentLocation(),this.dialog.openAlertDialog({title:"confirmation.confirmFileLocationTitle",query:"confirmation.changingLocation",queryParam:{arg:this.currentStorageLocation},action1:"confirmation.cancel",spinner:!0}).pipe((0,p.R)(this.destroy$),(0,ht.b)(et=>this.dialogRef=et),(0,Pn.zg)(et=>et.afterClosed())).subscribe(et=>{et===a.DX.Action1&&this.onCancelClicked()});else if(H&&pe){let Ae="";pe===a.Sc.Highlights?(this.originalStorageLocation=this.galleryService.getVideoFolder(),this.currentStorageLocation=H,this.galleryService.saveCurrentLocation(H),Ae=this.currentStorageLocation):pe===a.Sc.Temporary&&(this.originalStorageLocation=void 0,this.tempStorageLocation=H,Ae=H),this.dialog.openAlertDialog({title:"confirmation.confirmFileLocationTitle",query:"confirmation.changingLocation",queryParam:{arg:Ae},action1:"confirmation.cancel",spinner:!0}).pipe((0,p.R)(this.destroy$),(0,ht.b)(wt=>this.dialogRef=wt),(0,Pn.zg)(wt=>wt.afterClosed())).subscribe(wt=>{wt===a.DX.Action1&&this.onCancelClicked()}),this.galleryService.updateFolderSync(Ae,pe).pipe((0,p.R)(this.destroy$)).subscribe(()=>{pe===a.Sc.Temporary&&(this.dialogRef&&this.dialogRef.close(),this.init(),this.initializing=!1)})}else this.initializing=!1,this.init()}init(){(0,r.D)([this.bridgeService.executeCommand(Z.Gh.Common.Gallery.GetSettings),this.shadowPlayService.getIRState().pipe((0,u.q)(1)),this.shadowPlayService.getMRState().pipe((0,u.q)(1))]).pipe((0,p.R)(this.destroy$)).subscribe(([H,pe,Ae])=>{this.settingsParams=H,this.availDiskSpaceSwitchModel=H.settings.capacity.enabled,this.totalMB=H.settings.capacity.totalDiskSpaceMB,this.diskSpaceSliderValue=H.settings.capacity.capacityPercent,this.diskSpaceUsage=Math.floor(H.settings.capacity.usageMB),this.prevDiskSpaceSliderValue=this.diskSpaceSliderValue,this.setSliderValue(),void 0===this.currentStorageLocation&&(this.currentStorageLocation=H.settings.path),void 0===this.tempStorageLocation&&(this.tempStorageLocation=H.settings.tempFolderPath),this.sliderInitComplete=!0,this.mrInProgress=Ae,this.irInProgress=pe===a.YQ.recording,this.checkFolderState()})}checkFolderState(){this.disableFolders=this.highlightsActive||this.mrInProgress||this.irInProgress,this.disableFolders&&this.translate.get("snacks.StopRecording").subscribe(H=>{this.dialog.openSnackBar(H)})}availDiskSpaceSwitchChange(H){this.logger.info("availDiskSpace switch changed: ",this.availDiskSpaceSwitchModel),this.setSliderValue(),this.settingsParams.settings.capacity.enabled=this.availDiskSpaceSwitchModel,this.bridgeService.executeCommand(Z.Gh.Common.Gallery.SetSettings,this.settingsParams).pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.prevDiskSpaceSliderValue=this.diskSpaceSliderValue})}formatDiskSpaceString(H){const pe=this.fileBaseSize*this.fileBaseSize;return H<this.fileBaseSize?`\u2066${H.toFixed(1)} MB\u2069`:H<pe?`\u2066${(H/this.fileBaseSize).toFixed(1)} GB\u2069`:`\u2066${(H/pe).toFixed(1)} TB\u2069`}setSliderValue(){if(this.availDiskSpaceSwitchModel){const H=this.diskSpaceSliderValue/100*this.totalMB;this.diskSpaceString="settings.DiskSpaceUsage",this.diskSpaceParams={arg1:this.formatDiskSpaceString(this.diskSpaceUsage),arg2:this.formatDiskSpaceString(H)},this.diskSpaceWarning=!(this.diskSpaceUsage<H)}else this.diskSpaceString="settings.NoMax",this.diskSpaceWarning=!1}onDiskSpaceSliderChanged(H){if(this.sliderInitComplete&&(this.logger.info("Disk Space slider changed to: ",this.diskSpaceSliderValue),this.setSliderValue(),this.prevDiskSpaceSliderValue!==this.diskSpaceSliderValue)){this.settingsParams.settings.capacity.capacityPercent=this.diskSpaceSliderValue;const pe=this.settingsParams;this.logger.info("New disk space settings: ",this.settingsParams),this.bridgeService.executeCommand(Z.Gh.Common.Gallery.SetSettings,pe).pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.prevDiskSpaceSliderValue=this.diskSpaceSliderValue})}}terminateLocationChange(H){this.logger.info("Terminating location change"),H&&(this.logger.info("Undoing location change"),this.currentStorageLocation=this.originalStorageLocation),this.dialogRef&&(this.dialogRef.close(),this.dialogRef=void 0);const pe=this.galleryService.galleryTrackerChangePath().subscribe(()=>{this.init(),this.initializing=!1,this.cancelDisabled=!1,pe.unsubscribe()})}onCancelClicked(){this.cancelDisabled=!0,void 0!==this.originalStorageLocation&&this.bridgeService.executeCommand(Z.Gh.Common.Gallery.CancelPathUpdate).pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.logger.info("Cancel command complete")})}trackEventProgress(H){switch(H.trackerEvent){case Z.Yk.Common.Gallery.GalleryPathUpdateStatus.TrackerUpdateComplete:this.cancelDisabled=!0,this.terminateLocationChange(!1);break;case Z.Yk.Common.Gallery.GalleryPathUpdateStatus.CancelUpdateComplete:this.terminateLocationChange(!0)}}keyUpEvent(H){"Control"===H.key&&"GFN"===this.igoConfig.branding&&(this.externalDrivesValid=!1)}keyDownEvent(H){"Control"===H.key&&"GFN"===this.igoConfig.branding&&(this.externalDrivesValid=!0)}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(m.ed),t.Y36(m.dF),t.Y36(a.HY),t.Y36(a.rj),t.Y36(a.b5),t.Y36(a.dS),t.Y36(a.f5),t.Y36(i.gz),t.Y36(a.Mb),t.Y36(a.ad),t.Y36(C.sK),t.Y36(a.gs))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-storage"]],features:[t.qOj],decls:15,vars:13,consts:[["fxLayout","column","fxFlex",""],["fxFlex","grow"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","grow",1,"font-sub1","limit-padding"],["fxFlex","none",3,"ngModel","ngModelChange","change"],[1,"slider-area"],["fxLayout","column","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start",4,"ngIf"],["class","max-warning-area","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","center center",4,"ngIf"],[1,"nv-gap-16"],["title","settings.TemporaryFilesLocation","showTitle","true","source","temporary","caller","storage",3,"pathLocation","disabled","external","keydown","keyup"],["title","settings.FilesLocation","showTitle","true","source","highlights","caller","storage",3,"pathLocation","disabled","external","keydown","keyup"],["fxLayout","column","fxLayoutAlign","start center"],["fxFlexFill","",3,"min","max","value","step","valueChange"],[1,"font-body2"],["fxLayout","column","fxLayoutAlign","start start"],[1,"nv-gap-8"],[1,"font-body2","limit-padding"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","center center",1,"max-warning-area"],["svgIcon","warning",1,"mat-icon","icon-warning","max-warning-icon"]],template:function(H,pe){1&H&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-slide-toggle",4),t.NdJ("ngModelChange",function(et){return pe.availDiskSpaceSwitchModel=et})("change",function(et){return pe.availDiskSpaceSwitchChange(et)}),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,M,5,8,"div",6),t.YNc(9,re,5,3,"div",7),t.qZA(),t.YNc(10,Ce,5,3,"div",8),t._UZ(11,"div",9),t.TgZ(12,"nv-folder-browser",10),t.NdJ("keydown",function(et){return pe.keyDownEvent(et)})("keyup",function(et){return pe.keyUpEvent(et)}),t.qZA(),t._UZ(13,"div",9),t.TgZ(14,"nv-folder-browser",11),t.NdJ("keydown",function(et){return pe.keyDownEvent(et)})("keyup",function(et){return pe.keyUpEvent(et)}),t.qZA(),t.qZA(),t.qZA()),2&H&&(t.xp6(4),t.Oqu(t.lcZ(5,11,"settings.SetDiskSpaceLimit")),t.xp6(2),t.Q6J("ngModel",pe.availDiskSpaceSwitchModel),t.xp6(2),t.Q6J("ngIf",pe.availDiskSpaceSwitchModel),t.xp6(1),t.Q6J("ngIf",!pe.availDiskSpaceSwitchModel),t.xp6(1),t.Q6J("ngIf",pe.availDiskSpaceSwitchModel&&pe.diskSpaceWarning),t.xp6(2),t.Q6J("pathLocation",pe.tempStorageLocation)("disabled",pe.disableFolders)("external",pe.externalDrivesValid),t.xp6(2),t.Q6J("pathLocation",pe.currentStorageLocation)("disabled",pe.disableFolders)("external",pe.externalDrivesValid))},directives:[c.xw,c.yH,c.Wh,G.Rr,x.xZ,P.JJ,P.On,n.O5,qe.t,E.i,Ut.Q,c.s9,c.SQ,v.Hw],pipes:[C.X$],styles:[".nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-error[_ngcontent-%COMP%]{color:#e02828}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}.limit-padding[_ngcontent-%COMP%]{padding:8px 0}.max-warning-area[_ngcontent-%COMP%]{margin:16px 0 0}.max-warning-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px}[_nghost-%COMP%]{padding:24px}"]}),Ne})();function tt(Ne,Rt){1&Ne&&(t.TgZ(0,"span",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"mainMenu.DisabledFor1440")))}function ut(Ne,Rt){1&Ne&&(t.TgZ(0,"span",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"mainMenu.DisabledForPlaytest")))}function Ft(Ne,Rt){1&Ne&&(t.TgZ(0,"div",10),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"settings.IRTurnOn")," "))}function zt(Ne,Rt){if(1&Ne){const H=t.EpF();t.ynx(0),t.TgZ(1,"div",10),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"nv-hig-slider",11),t.NdJ("valueChange",function(Ae){return t.CHM(H),t.oxw().seconds=Ae})("valueChange",function(){return t.CHM(H),t.oxw().updateIRMaxLength()}),t.qZA(),t.BQk()}if(2&Ne){const H=t.oxw();t.xp6(1),t.ekj("disabled-opacity",H.disableSlider),t.xp6(1),t.hij(" ",t.xi3(3,8,"settings.IRMaxHelp",H.irMaxLenString)," "),t.xp6(2),t.Q6J("min",H.minSeconds)("max",H.maxSeconds)("step",H.step)("disabled",H.disableSlider)("value",H.seconds)}}function $t(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div"),t._UZ(1,"div",12),t.TgZ(2,"div",13),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",10),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"nv-dropdown",14),t.NdJ("selectionChanged",function(Ae){return t.CHM(H),t.oxw().qualityChanged(Ae)}),t.qZA(),t._UZ(9,"div",6),t.TgZ(10,"div",10),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"nv-dropdown",14),t.NdJ("selectionChanged",function(Ae){return t.CHM(H),t.oxw().resolutionChanged(Ae)}),t.qZA(),t._UZ(14,"div",6),t.TgZ(15,"div",10),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"nv-dropdown",14),t.NdJ("selectionChanged",function(Ae){return t.CHM(H),t.oxw().frameRateChanged(Ae)}),t.qZA(),t._UZ(19,"div",6),t.TgZ(20,"div",10),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"nv-hig-slider",15),t.NdJ("valueChange",function(Ae){return t.CHM(H),t.oxw().bitrate=Ae})("valueChange",function(){return t.CHM(H),t.oxw().bitrateChanged()}),t.qZA(),t.qZA()}if(2&Ne){const H=t.oxw();t.xp6(2),t.ekj("disabled-opacity",H.disableUI),t.xp6(1),t.hij(" ",t.lcZ(4,29,"capture.CaptureSpecs")," "),t.xp6(2),t.ekj("disabled-opacity",H.disableUI),t.xp6(1),t.hij(" ",t.lcZ(7,31,"capture.Quality")," "),t.xp6(2),t.Q6J("selection",H.qualityInitState)("input",H.qualityOptions)("disabled",H.disableUI),t.xp6(2),t.ekj("disabled-opacity",H.disableUI),t.xp6(1),t.hij(" ",t.lcZ(12,33,"capture.Resolution")," "),t.xp6(2),t.Q6J("selection",H.resolutionInitState)("input",H.resolutionOptions)("disabled",H.disableUI),t.xp6(2),t.ekj("disabled-opacity",H.disableUI),t.xp6(1),t.hij(" ",t.lcZ(17,35,"capture.FrameRate")," "),t.xp6(2),t.Q6J("selection",H.frameRateInitState)("input",H.frameRateOptions)("disabled",H.disableUI),t.xp6(2),t.ekj("disabled-opacity",H.disableUI),t.xp6(1),t.hij(" ",t.lcZ(22,37,"capture.BitRate")," "),t.xp6(2),t.Q6J("min",H.minBitrate)("max",H.maxBitrate)("step",H.stepBitrate)("disabled",H.disableUI)("value",H.bitrate)}}let yn=(()=>{class Ne extends w{constructor(H,pe,Ae,et,wt,Yt,Xt,In,Tn,Qn){super(pe,Ae,Xt,Tn,Qn),this.loggingService=H,this.shadowPlayService=et,this.sdkHighlightsService=wt,this.igoConfig=Yt,this.translateService=In,this.minSeconds=15,this.maxSeconds=1200,this.step=5,this.seconds=this.minSeconds,this.irEnabled=!1,this.irRunning=!1,this.irMaxLenString={arg:""},this.mrInProgress=!1,this.highlightsActive=!1,this.disableUI=!1,this.disableSlider=!1,this.gfeMode=!1,this.sliderVisible=!1,this.recordSpecialCase=l.Kk,this.qualityOptions=["capture.Low","capture.Medium","capture.High","capture.Custom"],this.qualityValuesIgo=[a.Qy.low,a.Qy.medium,a.Qy.high,a.Qy.custom],this.qualityInitState=0,this.resolutionInitState=0,this.frameRateInitState=0,this.minBitrate=10,this.maxBitrate=130,this.stepBitrate=5,this.bitrate=50,this.bitrateMaxString={},this.bitrateMinString={},this.showVideoSpecs=!1,this.videoSpecs={resolutions:void 0,frameRates:void 0,bitRatesMin:void 0,bitRatesMax:void 0,bitRatesDefault:void 0,recQualitySP:void 0,recQualityIgo:void 0,recResolution:void 0,recFramerate:void 0,recBitrate:void 0,recReplayLength:void 0},super.bar("settings.VideoCapture"),this.logger=this.loggingService.getLogger("Video")}ngOnInit(){super.ngOnInit(),"GFE"===this.igoConfig.branding?(this.maxSeconds=1200,this.showVideoSpecs=!0,this.gfeMode=!0):this.maxSeconds=300,this.irMaxLenString.arg=this.maxSeconds/60+"",this.init()}init(){(0,r.D)([this.shadowPlayService.getInstantReplayEnableStatus(),this.shadowPlayService.getInstantReplayRunningStatus(),this.shadowPlayService.getInstantReplayMaxLength(),this.shadowPlayService.getMRState().pipe((0,u.q)(1))]).pipe((0,p.R)(this.destroy$)).subscribe(([H,pe,Ae,et])=>{this.logger.info("IR Enabled: "+H+" Running: "+pe),"GFE"===this.igoConfig.branding&&(this.irEnabled=H),this.irRunning=pe,this.mrInProgress=et,this.sliderVisible=this.irEnabled&&!this.gfeMode||this.gfeMode,this.checkCurrentState(),this.seconds=void 0===Ae?this.minSeconds:Ae,this.logger.info("IR Length: "+this.seconds)}),this.shadowPlayService.getIRState().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.irEnabled=H!==a.YQ.off,this.irRunning=H===a.YQ.recording,this.sliderVisible=this.irEnabled&&!this.gfeMode||this.gfeMode,this.logger.info("ir state: ",this.irEnabled),this.checkCurrentState()}),this.shadowPlayService.getMRState().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.mrInProgress=H,this.checkCurrentState()}),this.sdkHighlightsService.isHighlightsActive().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.highlightsActive=H,this.checkCurrentState()}),"GFE"===this.igoConfig.branding&&this.initializeVideoSpecs(!0)}checkCurrentState(){"GFE"===this.igoConfig.branding&&(this.disableUI=this.irRunning||this.mrInProgress||this.highlightsActive,this.disableSlider=this.disableUI,this.disableUI&&this.translateService.get("snacks.StopRecording").subscribe(H=>{this.dialog.openSnackBar(H)}))}updateIRMaxLength(){this.seconds<this.minSeconds||this.seconds>this.maxSeconds||(this.logger.info("New IR Length: ",this.seconds),this.videoSpecs.recReplayLength=this.seconds,this.updateVideoSpecs())}irToggleEvent(H){this.logger.info("on toggle IR: ",H.checked),H.checked?this.shadowPlayService.enableInstantReplay():this.shadowPlayService.disableInstantReplay()}setCustomMode(){const H=this.qualityValuesIgo.findIndex(pe=>pe===a.Qy.custom);this.videoSpecs.recQualityIgo=a.Qy.custom,this.qualityInitState=H}updateVideoSpecs(){this.shadowPlayService.setVideoSpecs(this.videoSpecs,this.gfeMode).pipe((0,p.R)(this.destroy$)).subscribe(H=>{H&&"GFE"===this.igoConfig.branding&&this.initializeVideoSpecs(!1)})}qualityChanged(H){this.logger.info("Quality changed value: "+H),this.videoSpecs.recQualityIgo=this.qualityValuesIgo[H],this.qualityInitState=H,this.updateVideoSpecs()}resolutionChanged(H){this.logger.info("Resolution changed value: "+H),this.videoSpecs.recResolution=this.videoSpecs.resolutions[H],this.setCustomMode(),this.updateVideoSpecs()}frameRateChanged(H){this.logger.info("Frame Rate changed value: "+H),this.videoSpecs.recFramerate=this.videoSpecs.frameRates[H],this.setCustomMode(),this.updateVideoSpecs()}bitrateChanged(){this.logger.info("New Bitrate value: ",this.bitrate),this.videoSpecs.recBitrate=1e6*this.bitrate,this.setCustomMode(),this.updateVideoSpecs()}initializeVideoSpecs(H){this.shadowPlayService.getVideoSpecs().pipe((0,p.R)(this.destroy$)).subscribe(pe=>{Object.assign(this.videoSpecs,pe),this.logger.info("VideoSpecs:",this.videoSpecs),this.minBitrate=this.videoSpecs.bitRatesMin/1e6,this.maxBitrate=this.videoSpecs.bitRatesMax/1e6,this.bitrate=this.videoSpecs.recBitrate/1e6,this.bitrateMinString=this.minBitrate+"",this.bitrateMaxString=this.maxBitrate+"",H&&this.qualityValuesIgo.forEach((Xt,In)=>{Xt===this.videoSpecs.recQualityIgo&&(this.qualityInitState=In)});const Ae=[];let et=0;this.videoSpecs.resolutions.forEach((Xt,In)=>{const Tn="In-game"===Xt?this.translateService.instant("capture.InGame"):Xt;Ae.push(Tn),Xt===this.videoSpecs.recResolution&&(et=In)}),this.resolutionOptions=Ae,this.resolutionInitState=et;const wt=[];let Yt=0;this.videoSpecs.frameRates.forEach((Xt,In)=>{wt.push(Xt+" FPS"),Xt===this.videoSpecs.recFramerate&&(Yt=In)}),this.frameRateOptions=wt,this.frameRateInitState=Yt})}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(m.ed),t.Y36(a.f5),t.Y36(i.gz),t.Y36(a.dS),t.Y36(a.b5),t.Y36(a.gs),t.Y36(a.ad),t.Y36(C.sK),t.Y36(a.Mb),t.Y36(a.In))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-video"]],features:[t.qOj],decls:13,vars:10,consts:[["fxLayout","column","fxFlex",""],["fxFlex","grow","fxLayout","column"],["fxFlex","none","fxLayout","row","fxLayoutAlign","start center",1,"toggle-height"],["fxFlex","grow",1,"font-sub1","nv-label"],["fxFlex","none",1,"settings-padding",3,"ngModel","disabled","ngModelChange","change"],["class","font-body3 disabled-opacity",4,"ngIf"],[1,"nv-gap-8"],["class","font-body2 nv-label",4,"ngIf"],[4,"ngIf"],[1,"font-body3","disabled-opacity"],[1,"font-body2","nv-label"],["valueEntry","true","formatTextAs","Time",3,"min","max","step","disabled","value","valueChange"],[1,"nv-gap-16"],[1,"font-sub1","nv-label"],[3,"selection","input","disabled","selectionChanged"],["valueEntry","true","formatTextAs","integer",3,"min","max","step","disabled","value","valueChange"]],template:function(H,pe){1&H&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-slide-toggle",4),t.NdJ("ngModelChange",function(et){return pe.irEnabled=et})("change",function(et){return pe.irToggleEvent(et)}),t.qZA(),t.qZA(),t.YNc(7,tt,3,3,"span",5),t.YNc(8,ut,3,3,"span",5),t._UZ(9,"div",6),t.YNc(10,Ft,3,3,"div",7),t.YNc(11,zt,5,11,"ng-container",8),t.YNc(12,$t,24,39,"div",8),t.qZA(),t.qZA()),2&H&&(t.xp6(4),t.hij(" ",t.lcZ(5,8,"mainMenu.InstantReplay")," "),t.xp6(2),t.Q6J("ngModel",pe.irEnabled)("disabled",pe.recordSpecialCase.RECORD_SPECIAL_CASE_NONE!==pe.disableRecordSpecialCase),t.xp6(1),t.Q6J("ngIf",pe.recordSpecialCase.RECORD_SPECIAL_CASE_4K===pe.disableRecordSpecialCase),t.xp6(1),t.Q6J("ngIf",pe.recordSpecialCase.RECORD_SPECIAL_CASE_PLAYTEST===pe.disableRecordSpecialCase),t.xp6(2),t.Q6J("ngIf",!pe.irEnabled&&!pe.disableRecordSpecialCase),t.xp6(1),t.Q6J("ngIf",pe.sliderVisible&&!pe.disableRecordSpecialCase),t.xp6(1),t.Q6J("ngIf",pe.showVideoSpecs))},directives:[c.xw,c.yH,c.Wh,G.Rr,x.xZ,P.JJ,P.On,E.i,n.O5,Ut.Q,O.y],pipes:[C.X$],styles:[".nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-error[_ngcontent-%COMP%]{color:#e02828}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.isLtr[_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%]{padding-right:10px}html[dir=ltr][_ngcontent-%COMP%]   .settings-padding[_ngcontent-%COMP%]{--dummy2: 0;padding-right:10px}.isRtl[_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-padding[_ngcontent-%COMP%]{padding-left:10px}html[dir=rtl][_ngcontent-%COMP%]   .settings-padding[_ngcontent-%COMP%]{--dummy2: 0;padding-left:10px}.toggle-height[_ngcontent-%COMP%]{height:40px}[_nghost-%COMP%]{padding:24px}"]}),Ne})();function An(Ne,Rt){1&Ne&&(t.TgZ(0,"div",11),t.TgZ(1,"div",12),t._UZ(2,"mat-icon",13),t.qZA(),t.TgZ(3,"div",14),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA()),2&Ne&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"audio.StopToChange")))}let Pt=(()=>{class Ne extends w{constructor(H,pe,Ae,et,wt,Yt,Xt,In){super(pe,Ae,In),this.loggingService=H,this.igoConfig=et,this.shadowPlayService=wt,this.sdkHighlightsService=Yt,this.translateService=Xt,this.minVolume=0,this.maxVolume=100,this.stepVolume=1,this.systemVolume=100,this.volume=100,this.volumeDisabled=!1,this.boost=0,this.boostDisabled=!0,this.audioTracks=["audio.SingleTrack","audio.SeparateTrack"],this.audioTracksInitState=0,this.micSelection=0,this.dropdownDisabled=!1,this.mrInProgress=!1,this.irInProgress=!1,this.brInProgress=!1,this.highlightsActive=!1,this.audioTracksDisabled=!1,this.audioSpecs={systemVolumePercent:0,separateTracks:!1},super.bar("audio.Audio"),this.logger=this.loggingService.getLogger("Audio"),this.logger.info("Constructor")}ngOnInit(){super.ngOnInit(),this.initializeMicData(),this.shadowPlayService.getMICDeviceState().pipe((0,p.R)(this.destroy$)).subscribe(H=>{(H===a.uP.plugged_in||H===a.uP.plugged_out)&&this.initializeMicData()}),this.shadowPlayService.getAudioSettings().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.audioSpecs=H,this.systemVolume=H.systemVolumePercent,this.audioTracksInitState=H.separateTracks?1:0}),this.shadowPlayService.getMRState().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.mrInProgress=H,this.audioTracksDisabled=this.mrInProgress||this.irInProgress||this.brInProgress||this.highlightsActive}),this.shadowPlayService.getIRState().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.irInProgress=H===a.YQ.recording,this.audioTracksDisabled=this.mrInProgress||this.irInProgress||this.brInProgress||this.highlightsActive}),this.sdkHighlightsService.isHighlightsActive().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.highlightsActive=H,this.audioTracksDisabled=this.mrInProgress||this.irInProgress||this.brInProgress||this.highlightsActive})}initializeMicData(){this.shadowPlayService.getMicrophoneData().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.allMicSpecs=H;const pe=H.index;if(-1===pe){this.boostDisabled=!0,this.volumeDisabled=!0,this.dropdownDisabled=!0;const wt=[];return wt[0]={id:"",text:this.translateService.instant("audio.NoMic")},this.microphone=wt,void(this.micSelection=0)}this.volume=H.micSpecs[pe].volumePercent,this.boost=H.micSpecs[pe].boostPercent,this.boostDisabled=this.volume<this.maxVolume;const Ae=[];let et=0;this.allMicSpecs.micSpecs.forEach((wt,Yt)=>{Ae[Yt]=wt.name,!1===wt.enabled&&(Ae[Yt]+=" - "+this.translateService.instant("audio.Disabled")),Yt===pe+1&&(et=Yt)}),this.microphone=Ae,this.micSelection=et})}systemVolumeChanged(){this.logger.info("System Volume Changed: ",this.systemVolume),this.audioSpecs.systemVolumePercent=this.systemVolume,this.shadowPlayService.setAudioSettings(this.audioSpecs).pipe((0,p.R)(this.destroy$)).subscribe()}audioTracksChanged(H){this.logger.info("Audio Tracks Changed: ",H),this.audioSpecs.separateTracks=0!==H,this.shadowPlayService.setAudioSettings(this.audioSpecs).pipe((0,p.R)(this.destroy$)).subscribe()}micChanged(H){this.logger.info("Microphone Changed: ",H),this.allMicSpecs.index=H,this.volume=this.allMicSpecs.micSpecs[H].volumePercent,this.boost=this.allMicSpecs.micSpecs[H].boostPercent,this.boostDisabled=this.volume<this.maxVolume,this.allMicSpecs.micSpecs[H].muted=!1,this.shadowPlayService.setMicSettings(this.allMicSpecs).pipe((0,p.R)(this.destroy$)).subscribe()}volumeChanged(){this.logger.info("Volume Changed: ",this.volume),this.allMicSpecs.micSpecs[this.allMicSpecs.index].volumePercent=this.volume,this.boostDisabled=this.volume<this.maxVolume,this.shadowPlayService.setMicSettings(this.allMicSpecs).pipe((0,p.R)(this.destroy$)).subscribe()}boostChanged(){this.logger.info("Boost Changed: ",this.boost),this.allMicSpecs.micSpecs.forEach(H=>{H.boostPercent=this.boost}),this.shadowPlayService.setMicSettings(this.allMicSpecs).pipe((0,p.R)(this.destroy$)).subscribe()}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(m.ed),t.Y36(a.f5),t.Y36(i.gz),t.Y36(a.gs),t.Y36(a.dS),t.Y36(a.b5),t.Y36(C.sK),t.Y36(a.ad))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-audio"]],features:[t.qOj],decls:33,vars:47,consts:[["fxLayout","column","fxFlex",""],["fxFlex","grow","fxLayout","column"],[1,"font-sub1","nv-label"],[1,"font-body2","nv-label"],["valueEntry","true","formatTextAs","integer",3,"min","max","step","value","valueChange"],[1,"nv-gap-16"],[3,"selection","input","disabled","selectionChanged"],[1,"nv-gap-8"],["valueEntry","true","formatTextAs","integer",3,"min","max","step","value","disabled","valueChange"],[3,"maxHeight","selection","input","disabled","selectionChanged"],["fxLayout","row","fxLayoutAlign","start",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"nv-item-icon"],["svgIcon","info",1,"icon-alert"],[1,"font-body2","audio-disabled"]],template:function(H,pe){1&H&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"nv-hig-slider",4),t.NdJ("valueChange",function(et){return pe.systemVolume=et})("valueChange",function(){return pe.systemVolumeChanged()}),t.qZA(),t._UZ(9,"div",5),t.TgZ(10,"div",2),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",3),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"nv-dropdown",6),t.NdJ("selectionChanged",function(et){return pe.micChanged(et)}),t.qZA(),t._UZ(17,"div",7),t.TgZ(18,"div",3),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"nv-hig-slider",8),t.NdJ("valueChange",function(et){return pe.volume=et})("valueChange",function(){return pe.volumeChanged()}),t.qZA(),t._UZ(22,"div",7),t.TgZ(23,"div",3),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"nv-hig-slider",8),t.NdJ("valueChange",function(et){return pe.boost=et})("valueChange",function(){return pe.boostChanged()}),t.qZA(),t._UZ(27,"div",5),t.TgZ(28,"div",2),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"nv-dropdown",9),t.NdJ("selectionChanged",function(et){return pe.audioTracksChanged(et)}),t.qZA(),t.YNc(32,An,6,3,"div",10),t.qZA(),t.qZA()),2&H&&(t.xp6(3),t.Oqu(t.lcZ(4,33,"audio.System")),t.xp6(3),t.Oqu(t.lcZ(7,35,"audio.SoundsVolume")),t.xp6(2),t.Q6J("min",pe.minVolume)("max",pe.maxVolume)("step",pe.stepVolume)("value",pe.systemVolume),t.xp6(3),t.Oqu(t.lcZ(12,37,"settings.Microphone")),t.xp6(3),t.Oqu(t.lcZ(15,39,"audio.Source")),t.xp6(2),t.Q6J("selection",pe.micSelection)("input",pe.microphone)("disabled",pe.dropdownDisabled),t.xp6(2),t.ekj("disabled-opacity",pe.volumeDisabled),t.xp6(1),t.hij(" ",t.lcZ(20,41,"audio.Volume")," "),t.xp6(2),t.Q6J("min",pe.minVolume)("max",pe.maxVolume)("step",pe.stepVolume)("value",pe.volume)("disabled",pe.volumeDisabled),t.xp6(2),t.ekj("disabled-opacity",pe.boostDisabled),t.xp6(1),t.Oqu(t.lcZ(25,43,"audio.Boost")),t.xp6(2),t.Q6J("min",pe.minVolume)("max",pe.maxVolume)("step",pe.stepVolume)("value",pe.boost)("disabled",pe.boostDisabled),t.xp6(3),t.Oqu(t.lcZ(30,45,"audio.AudioTracks")),t.xp6(2),t.Q6J("maxHeight",300)("selection",pe.audioTracksInitState)("input",pe.audioTracks)("disabled",pe.audioTracksDisabled),t.xp6(1),t.Q6J("ngIf",pe.audioTracksDisabled))},directives:[c.xw,c.yH,Ut.Q,O.y,E.i,n.O5,c.Wh,v.Hw],pipes:[C.X$],styles:[".nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-error[_ngcontent-%COMP%]{color:#e02828}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}[_nghost-%COMP%]{padding:24px}.audio-disabled[_ngcontent-%COMP%]{height:56px;margin-top:8px}"]}),Ne})();var Ke=e(11889),Pe=e(6381);function it(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",6),t.TgZ(2,"div",7),t.TgZ(3,"div",8),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"div",9),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"mat-slide-toggle",10),t.NdJ("ngModelChange",function(Ae){return t.CHM(H),t.oxw().isClipboardPasteOn=Ae})("change",function(){return t.CHM(H),t.oxw().onSettingsChanged()}),t.qZA(),t.qZA(),t.TgZ(9,"nv-item-button",11),t.NdJ("clicked",function(){t.CHM(H);const Ae=t.oxw();return Ae.openURL(Ae.learnMoreUrl)}),t.qZA(),t._UZ(10,"nv-divider"),t.qZA()}if(2&Ne){const H=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,3,"clipboardPaste.title")," "),t.xp6(2),t.Q6J("innerHtml",t.lcZ(7,5,H.clipboardPasteDescription),t.oJD),t.xp6(2),t.Q6J("ngModel",H.isClipboardPasteOn)}}const Lt=function(Ne){return{shortcutKey:Ne}};function Dt(Ne,Rt){if(1&Ne&&(t.ynx(0),t.TgZ(1,"div",12),t._UZ(2,"mat-icon",13),t.qZA(),t._UZ(3,"span",14),t.ALo(4,"translate"),t.BQk()),2&Ne){const H=t.oxw();t.xp6(3),t.Q6J("innerHTML",t.xi3(4,1,H.otherLayoutDescription,t.VKq(4,Lt,H.imeHotkeyCombo)),t.oJD)}}let cn=(()=>{class Ne extends w{constructor(H,pe,Ae,et,wt,Yt,Xt,In,Tn,Qn,Xn,wn){super(Ae,et,Yt,wt),this.loggingService=H,this.bridgeService=pe,this.keyboardLayoutService=Xt,this.clipboardService=In,this.settingsService=Tn,this.oscDisplayService=Qn,this.appConfig=Xn,this.localeService=wn,this.kbLayoutDisabled=!1,this.isOtherKBLayoutSelected=!1,this.nvPlaceholderIndex=-1,this.isPlatformBrowser=m.ng.isBrowserPlatform(),this.learnMoreUrl="",super.bar("settings.System"),this.logger=this.loggingService.getLogger("System"),this.logger.info("Constructor"),this.myRoute=et}ngOnInit(){super.ngOnInit(),this.otherLayoutDescription="settings.keyboardLayout.otherLayoutDescription",this.keyboardLayoutService.fetchClientIMEHotkeys.pipe((0,p.R)(this.destroy$)).subscribe(Ae=>{this.imeHotkeyCombo=`<b> ${Ae} </b>`}),this.keyboardLayoutService.readCachedKeyboardLayout().pipe((0,p.R)(this.destroy$)).subscribe(Ae=>this.onKBLayoutChange(Ae)),this.initialize(),this.clipboardService.gxtClipboardPasteConfig().pipe((0,u.q)(1)).subscribe(Ae=>{this.isClipboardPasteEnable=(null==Ae?void 0:Ae.isEnabled)||!1}),this.settingsService.getSettingsData().pipe((0,u.q)(1)).subscribe(Ae=>{this.isClipboardPasteOn=(null==Ae?void 0:Ae.clipboardPaste)||!1,this.clipboardPasteDescription=this.isClipboardPasteOn?"clipboardPaste.turnOff":"clipboardPaste.turnOn"});const H=this.appConfig.redirect.serverUrl,pe=j.qBq.GFN_PC_HELP_PASTE;this.localeService.localeChanged.pipe((0,p.R)(this.destroy$)).subscribe(Ae=>{this.learnMoreUrl=`${H}${Ae}&page=${pe}`},Ae=>{this.logger.error("Locale info errored out",Ae)})}openURL(H){this.logger.info("Open URL: ",H),this.oscDisplayService.closeOSC(),this.bridgeService.executeCommand(Z.Gh.Common.Windowcontrol.Minimize).pipe((0,p.R)(this.destroy$)).subscribe(),window.open(H)}initialize(){this.keyboardLayoutService.getKeyboardLayoutsList().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.keyboardLayouts=H,this.setDataForNvDropdown(),this.isPlatformBrowser?this.addPlaceholderOption(this.keyboardLayoutService.getBrowserPlaceholder()):this.initializeNativePlaceholder(),this.initializeSelectionFromCache()},H=>{this.logger.info("Error getting the list of keyboard layouts : ",H)})}onSettingsChanged(){var H;this.clipboardPasteDescription=this.isClipboardPasteOn?"clipboardPaste.turnOff":"clipboardPaste.turnOn",this.isClipboardPasteOn?null===(H=this.clipboardService.detectClipboardChange)||void 0===H||H.next(!0):this.clipboardService.sendClientDataAvailable(!1).pipe((0,u.q)(1)).subscribe(),this.saveClipboardConfigToSharedStorage(this.isClipboardPasteOn)}saveClipboardConfigToSharedStorage(H){this.settingsService.storeChangedSettings({settingType:j.BqE.ClipboardPaste,selectedOption:H})}onKBLayoutChange(H){this.logger.info("IGO Keyboard layout changed to: "+((null==H?void 0:H.code)||"Auto/Default"));const pe={};(null==H?void 0:H.code)?(pe.kbLayout=H.code,pe.allowKeyboardLayoutChange=!1):m.ng.isBrowserPlatform()?pe.kbLayout=this.keyboardLayoutService.getDefaultKBLayoutCode():(pe.kbLayout="",pe.allowKeyboardLayoutChange=!0),this.logger.info(`Params: kbLayout:${pe.kbLayout}, allowKeyboardLayoutChange:${pe.allowKeyboardLayoutChange}`),(0,Vt.isEmpty)(pe)||this.bridgeService.executeCommand(Z.Gh.Gfn.Streaming.SetKeyboardLayout,pe).pipe((0,p.R)(this.destroy$)).subscribe(Ae=>{this.logger.info("Keyboard layout changed from IGO response: "+Ae)},Ae=>{this.logger.info("Some error while changing keyboard layout from IGO : "+Ae)})}onKBLayoutSelect(H){if(this.logger.info("Keyboard layout changed from IGO selectedIndex: "+H),H>=0){const pe=this.nvKeyboardLayouts.filter((Ae,et)=>et===H)[0];if(this.logger.info("selectedVal: "+pe),pe){const Ae=this.getKeyboardLayoutByName(pe);this.logger.info("selectedKeyboardLayout: "+Ae),this.selectKeyboardLayout(Ae)}}}addPlaceholderOption(H){if(this.logger.info("adding Auto/Default option: "+H),H)if(-1!==this.nvPlaceholderIndex&&this.nvKeyboardLayouts[this.nvPlaceholderIndex]){const pe=this.nvKeyboardLayouts.slice();pe[this.nvPlaceholderIndex]=H,this.nvKeyboardLayouts=pe.slice()}else this.nvKeyboardLayouts=[H,...this.nvKeyboardLayouts],this.nvPlaceholderIndex=0,this.kbLayoutSelection>0&&this.kbLayoutSelection++}getKeyboardLayoutByName(H){var pe;return null===(pe=this.keyboardLayouts)||void 0===pe?void 0:pe.filter(Ae=>Ae.name===H)[0]}setDataForNvDropdown(){const H=this.keyboardLayouts;H&&H.length>0&&(this.nvKeyboardLayouts=H.map(pe=>pe.name))}setKBLayoutSelection(H){(null==H?void 0:H.name)?(this.logger.info(`Selecting ${H.name} option in nv-dropdown.`),this.kbLayoutSelection=this.nvKeyboardLayouts.indexOf(H.name)):H||(this.logger.info("Selecting Auto/Default option in nv-dropdown."),this.nvPlaceholderIndex>=0&&(this.kbLayoutSelection=this.nvPlaceholderIndex))}selectKeyboardLayout(H){var pe,Ae,et;this.logger.info("Keyboard layout override event triggered"),this.keyboardLayoutService.selectKeyboardLayout(H,this.previousKeyboardLayout,this.detectedKeyboardLayout),H?(this.setOtherKBLayoutFlag(null===(pe=H.params)||void 0===pe?void 0:pe.isOtherLayout),this.previousKeyboardLayout=H):m.ng.isBrowserPlatform()?(this.setOtherKBLayoutFlag(this.keyboardLayoutService.isOtherDefaultLayout),this.previousKeyboardLayout=this.keyboardLayoutService.getDefaultKBLayout(),this.logger.info(`Default (${null===(Ae=this.previousKeyboardLayout)||void 0===Ae?void 0:Ae.name})  ${null===(et=this.previousKeyboardLayout)||void 0===et?void 0:et.code} keyboard layout selected.`)):(this.previousKeyboardLayout=this.detectedKeyboardLayout,this.logger.info("Auto keyboard layout selected."),this.keyboardLayoutService.isAutoOtherKBLayout(this.keyboardLayouts).pipe((0,p.R)(this.destroy$)).subscribe(wt=>{this.setOtherKBLayoutFlag(wt)})),this.setKBLayoutSelection(H)}initializeNativePlaceholder(){let H;this.keyboardLayoutService.onAutoPlaceholderChange().pipe((0,p.R)(this.destroy$)).subscribe(([pe,Ae])=>{H=Ae,this.logger.info("Detected Keyboard Layout from OS: ",pe),this.logger.info("Keyboard Layout Config from GXT: ",Ae),this.detectedKeyboardLayout=this.keyboardLayouts.find(et=>{var wt;return et.code===pe&&!(null===(wt=et.params)||void 0===wt?void 0:wt.isOtherLayout)}),this.logger.info("detectedKeyboardLayout: ",this.detectedKeyboardLayout),(0,Vt.isNil)(this.detectedKeyboardLayout)?(this.addPlaceholderOption(this.keyboardLayoutService.getNativePlaceholder(null,H)),this.detectedKeyboardLayout={name:"",code:pe}):this.addPlaceholderOption(this.keyboardLayoutService.getNativePlaceholder(this.detectedKeyboardLayout,H)),this.previousKeyboardLayout=this.detectedKeyboardLayout},pe=>{this.logger.info("Failed to detect Keyboard Layout from OS. Defaulting to fallback placeholder.",pe),this.addPlaceholderOption(this.keyboardLayoutService.getNativePlaceholder(this.detectedKeyboardLayout,H))})}setOtherKBLayoutFlag(H){this.isOtherKBLayoutSelected=H}initializeSelectionFromCache(){this.keyboardLayoutService.readCachedKeyboardLayout().pipe((0,u.q)(1)).subscribe(H=>{var pe;let Ae;if(this.logger.info("Keyboard layout cache read response : ",H),(0,Vt.isEmpty)(H))this.isPlatformBrowser?(this.setOtherKBLayoutFlag(this.keyboardLayoutService.isOtherDefaultLayout),this.logger.info("Browser Platform detected with empty cache."),this.previousKeyboardLayout=this.keyboardLayoutService.getDefaultKBLayout()):this.keyboardLayoutService.isAutoOtherKBLayout(this.keyboardLayouts).pipe((0,p.R)(this.destroy$)).subscribe(et=>{this.setOtherKBLayoutFlag(et)});else{const et=null===(pe=H.params)||void 0===pe?void 0:pe.isOtherLayout;this.setOtherKBLayoutFlag(et),Ae=this.keyboardLayouts.find(et?wt=>{var Yt;return wt.code===H.code&&(null===(Yt=wt.params)||void 0===Yt?void 0:Yt.isOtherLayout)}:wt=>{var Yt;return wt.code===H.code&&!(null===(Yt=wt.params)||void 0===Yt?void 0:Yt.isOtherLayout)}),Ae?this.previousKeyboardLayout=Ae:this.isPlatformBrowser?(this.setOtherKBLayoutFlag(this.keyboardLayoutService.isOtherDefaultLayout),this.logger.info(`Browser Platform - cached ${H.code} keyboardLayout not found in keyboardLayouts list. Applying Default keyboard layout.`),this.keyboardLayoutService.removeCachedKeyboardLayout().pipe((0,p.R)(this.destroy$)).subscribe(wt=>this.logger.info("Keyboard layout cache cleared : ",wt),wt=>this.logger.info("Keyboard layout cache clear failed : ",wt)),this.previousKeyboardLayout=this.keyboardLayoutService.getDefaultKBLayout()):this.previousKeyboardLayout=this.detectedKeyboardLayout}this.setKBLayoutSelection(Ae)},H=>this.logger.info("Keyboard layout cache read error : ",H))}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(m.ed),t.Y36(m.dF),t.Y36(a.f5),t.Y36(i.gz),t.Y36(a.Mb),t.Y36(a.ad),t.Y36(Ke.G),t.Y36(j.YvH),t.Y36(j.gbG),t.Y36(a.vU),t.Y36(j.VKt),t.Y36(m.OL))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-system"]],features:[t.qOj],decls:9,vars:10,consts:[["fxLayout","column","fxFlex","",1,"settings-system","nv-hig"],[4,"ngIf"],[1,"igo-keyboard-layout-container"],[1,"font-body2","nv-label"],[3,"selection","disabled","input","dividerIndex","maxHeight","selectionChanged"],["fxLayout","row",1,"settings-desc","font-body2","nv-label"],["fxLayout","row","fxLayoutAlign","start"],["fxLayout","column"],[1,"font-sub2","clipboard-title","nv-label"],[1,"font-body2",3,"innerHtml"],[1,"clipboard-toggle",3,"ngModel","ngModelChange","change"],["titleString","common.learnMore","urlIcon","launch",3,"clicked"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"nv-item-icon"],["svgIcon","info",1,"icon-info"],[3,"innerHTML"]],template:function(H,pe){1&H&&(t.TgZ(0,"div",0),t.YNc(1,it,11,7,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"nv-dropdown",4),t.NdJ("selectionChanged",function(et){return pe.onKBLayoutSelect(et)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,Dt,5,6,"ng-container",1),t.qZA(),t.qZA(),t.qZA()),2&H&&(t.xp6(1),t.Q6J("ngIf",pe.isClipboardPasteEnable),t.xp6(3),t.hij(" ",t.lcZ(5,8,"settings.KeyboardLayout")," "),t.xp6(2),t.Q6J("selection",pe.kbLayoutSelection)("disabled",pe.kbLayoutDisabled)("input",pe.nvKeyboardLayouts)("dividerIndex",1)("maxHeight",350),t.xp6(2),t.Q6J("ngIf",pe.isOtherKBLayoutSelected))},directives:[c.xw,c.yH,n.O5,O.y,E.i,c.Wh,G.Rr,x.xZ,P.JJ,P.On,g.n,I.n,v.Hw,Pe.E],pipes:[C.X$],styles:[".nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-error[_ngcontent-%COMP%]{color:#e02828}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}.clipboard-title[_ngcontent-%COMP%]{text-transform:lowercase}.clipboard-title[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}.learn-more[_ngcontent-%COMP%]{margin-top:16px}.settings-system[_ngcontent-%COMP%]{max-width:100%;padding:24px;overflow-y:overlay}.isLtr[_nghost-%COMP%]   .settings-system[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-system[_ngcontent-%COMP%]{margin-right:-24px}html[dir=ltr][_ngcontent-%COMP%]   .settings-system[_ngcontent-%COMP%]{--dummy4: 0;margin-right:-24px}.isRtl[_nghost-%COMP%]   .settings-system[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-system[_ngcontent-%COMP%]{margin-left:-24px}html[dir=rtl][_ngcontent-%COMP%]   .settings-system[_ngcontent-%COMP%]{--dummy4: 0;margin-left:-24px}.settings-system[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{color:#ffffffb3}.clipboard-toggle[_ngcontent-%COMP%]{padding-top:10px}.settings-desc[_ngcontent-%COMP%]   .icon-info[_ngcontent-%COMP%]{color:#fff9!important}"]}),Ne})();var Rn=e(61486),Wn=e(81134),so=e(18293),ki=e(33927);function zi(Ne,Rt){if(1&Ne&&(t.TgZ(0,"span",23),t._uU(1),t.qZA()),2&Ne){const H=t.oxw();t.xp6(1),t.Oqu(H.bitRateString)}}function Ki(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"mat-slide-toggle",24),t.NdJ("ngModelChange",function(Ae){return t.CHM(H),t.oxw().enableBitRateSlider=Ae})("change",function(Ae){return t.CHM(H),t.oxw().maxBitRateToggleEvent(Ae)}),t.qZA()}if(2&Ne){const H=t.oxw();t.Q6J("ngModel",H.enableBitRateSlider)}}function $i(Ne,Rt){1&Ne&&(t.TgZ(0,"div",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"settings.gameplay.MaxBitRateHelp")," "))}const Ei=function(Ne){return{bitRateValue:Ne}};function Yi(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div",26),t.TgZ(1,"div",27),t.TgZ(2,"nv-hig-slider",28),t.NdJ("valueChange",function(Ae){return t.CHM(H),t.oxw().bitRate=Ae})("input",function(Ae){return t.CHM(H),t.oxw().onBitRateSliderChanged(Ae)}),t.qZA(),t.qZA(),t.TgZ(3,"span",29),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA()}if(2&Ne){const H=t.oxw();t.xp6(2),t.Q6J("min",H.BitRateValues.bitRateMin)("max",H.BitRateValues.bitRateMax)("value",H.bitRate)("step",H.bitRateStep),t.xp6(2),t.Oqu(t.xi3(5,5,"settings.gameplay.bitRateValue",t.VKq(8,Ei,H.bitRate)))}}function ao(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div",32),t.TgZ(1,"span",33),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",7),t.TgZ(5,"span",34),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA()),2&Ne){const H=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"settings.gameplay.VSync")),t.xp6(4),t.Oqu(t.lcZ(7,4,H.vsyncString))}}function Qi(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div",35),t.TgZ(1,"nv-rotary",36),t.NdJ("selectionChanged",function(Ae){return t.CHM(H),t.oxw(2).rotaryVSyncChanged(Ae)}),t.qZA(),t.qZA()}if(2&Ne){const H=t.oxw(2);t.xp6(1),t.Q6J("input",H.rotaryVSyncOptions)("initialState",H.vSyncSelection)("disabled",H.vsyncDisabled1||H.vsyncDisabled2)}}function lo(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div"),t.YNc(1,ao,8,6,"div",30),t.YNc(2,Qi,2,3,"div",31),t.qZA()),2&Ne){const H=t.oxw();t.xp6(1),t.Q6J("ngIf",!H.custom),t.xp6(1),t.Q6J("ngIf",H.custom)}}function co(Ne,Rt){1&Ne&&(t.TgZ(0,"span",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"commonLabels.On")))}function go(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"mat-slide-toggle",42),t.NdJ("ngModelChange",function(Ae){return t.CHM(H),t.oxw(2).adjustPoorNetwork=Ae})("change",function(Ae){return t.CHM(H),t.oxw(2).adjustPoorNetworkToggleEvent(Ae)}),t.qZA()}if(2&Ne){const H=t.oxw(2);t.Q6J("ngModel",H.adjustPoorNetwork)}}function Ui(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div",37),t.TgZ(1,"div",38),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,co,3,3,"span",39),t.YNc(5,go,1,1,"mat-slide-toggle",40),t.qZA()),2&Ne){const H=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"settings.gameplay.AdjustPoorNetwork")," "),t.xp6(2),t.Q6J("ngIf",!H.custom),t.xp6(1),t.Q6J("ngIf",H.custom)}}function Si(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"nv-rotary",46),t.NdJ("selectionChanged",function(Ae){return t.CHM(H),t.oxw(2).rotaryDetailEnhancementChanged(Ae,!0)}),t.qZA()}if(2&Ne){const H=t.oxw(2);t.Q6J("input",H.detailEnhancementOptions)("initialState",H.activeSharpnessSetting.id)}}function ui(Ne,Rt){if(1&Ne){const H=t.EpF();t.TgZ(0,"div",43),t._UZ(1,"nv-divider"),t.TgZ(2,"span",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"nv-rotary",44),t.NdJ("selectionChanged",function(Ae){return t.CHM(H),t.oxw().rotaryUpscaleModeChanged(Ae,!0)}),t.qZA(),t.YNc(6,Si,1,2,"nv-rotary",45),t.qZA()}if(2&Ne){const H=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,4,"settings.gameplay.ResolutionUpscaling")),t.xp6(2),t.Q6J("input",H.upscaleModeRotaryOptions)("initialState",H.upscaleMode.id),t.xp6(1),t.Q6J("ngIf",H.showSharpnessEnhanced||H.isAiSelected)}}function Ji(Ne,Rt){1&Ne&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"commonLabels.On")))}function ho(Ne,Rt){1&Ne&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"commonLabels.Off")))}function ji(Ne,Rt){1&Ne&&(t.TgZ(0,"span",4),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"settings.gameplay.IggsDescription")))}function Po(Ne,Rt){1&Ne&&(t.TgZ(0,"span",4),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Ne&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"settings.gameplay.IggsDescriptionOff")))}function Xi(Ne,Rt){if(1&Ne&&(t.TgZ(0,"div",47),t._UZ(1,"nv-divider"),t.TgZ(2,"div",48),t.TgZ(3,"span",49),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",50),t.YNc(7,Ji,3,3,"span",19),t.YNc(8,ho,3,3,"span",19),t.qZA(),t.qZA(),t.YNc(9,ji,3,3,"span",51),t.YNc(10,Po,3,3,"span",51),t.qZA()),2&Ne){const H=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,5,"settings.gameplay.InGameGraphicsSettings")),t.xp6(3),t.Q6J("ngIf",H.saveInGameGraphics),t.xp6(1),t.Q6J("ngIf",!H.saveInGameGraphics),t.xp6(1),t.Q6J("ngIf",H.saveInGameGraphics),t.xp6(1),t.Q6J("ngIf",!H.saveInGameGraphics)}}const uo=function(Ne){return{arg:Ne}},Mi=function(Ne){return{"standard-holder24":Ne}},Fi=function(Ne,Rt){return{"left-data":Ne,header3:Rt}},Mo=[{path:"settings",component:X,data:{level:1}},{path:"general",component:oe,data:{level:2}},{path:"system",component:cn,data:{level:2}},{path:"gameplay",component:(()=>{class Ne extends w{constructor(H,pe,Ae,et,wt,Yt,Xt,In,Tn,Qn,Xn){super(Ae,et,wt),this.injector=H,this.loggingService=pe,this.translateService=Yt,this.bridgeService=Xt,this.ecommerceService=In,this.cloudVarService=Tn,this.telemetryHelperService=Qn,this.resolutionUpscaleService=Xn,this.custom=!1,this.qualityHeader="",this.qualityHelper="",this.gbPerHour=0,this.enableBitRateSlider=!1,this.hideBitRateSlider=!1,this.bitRateString="",this.BitRateValues=j.gK6,this.bitRateStep=1,this.resolution="",this.frameRate="",this.adjustPoorNetwork=void 0,this.vsyncString="",this.vSyncSelection=0,this.rotaryVSyncOptions=["commonLabels.Off","commonLabels.On","settings.gameplay.Adaptive"],this.vsyncDisabled1=!1,this.vsyncDisabled2=!1,this.showVsync=!0,this.showDrc=!0,this.showInGameGraphicsSection=!1,this.upscalingShow=!1,this.showSharpnessEnhanced=!1,this.isAiSelected=!1,this.upscaleFilters=[],this.upscaleModeRotaryOptions=[],this.telemetryUpscalingData={upscaleMode:0,detailEnhancement:0},this.telemetryUpscalingDataUponEntry={upscaleMode:0,detailEnhancement:0},this.detailEnhancementOptions=[],this.sharpnessTurnedOff=!1,this.bitRateChange=new t.vpe,this._bitRate=0,super.bar("settings.Gameplay"),this.logger=this.loggingService.getLogger("Gameplay")}get bitRate(){return this._bitRate}set bitRate(H){H!==this._bitRate&&(this._bitRate=H,this.logger.info("BitRate Slider value: ",H),this.bitRateChange.emit(this._bitRate))}ngOnInit(){super.ngOnInit(),this.streamingProfileService=this.injector.get(j.GKb),this.settingsService=this.injector.get(j.gbG),this.getSettingsData(),(0,Rn.aj)([this.cloudVarService.getFeatureToggle(j._P4.ENABLE_RESERVED_SKU_FEATURES),this.ecommerceService.getUserMembership()]).pipe((0,p.R)(this.destroy$)).subscribe(([H,pe])=>{H&&this.detectInGameGraphics(pe)})}ngOnDestroy(){this.streamingQualityCheckExitTelemetry(),this.resolutionUpscalingCheckExitTelemetry(),super.ngOnDestroy()}getSettingsData(){(0,Rn.aj)([this.settingsService.getSettingsData(),this.streamingProfileService.getStreamingProfile()]).pipe((0,p.R)(this.destroy$)).subscribe(([H,pe])=>{this.logger.info("Shared Settings: ",H),this.logger.info("Current Profile: ",pe),this.selectedProfile=(0,Vt.isNil)(H.streamingProfiles)?j.M1b.Balanced:H.streamingProfiles,this.selectedProfile!==j.M1b.Custom?(this.custom=!1,this.presetProfileData=pe,this.presetProfileData.maxBitrate/=1e3,this.logger.info("Preset Profile Data: ",this.presetProfileData),this.streamingProfileService.calculateDataUsage(this.presetProfileData.width,this.presetProfileData.height,this.presetProfileData.fps,this.presetProfileData.maxBitrate).subscribe(Ae=>{this.presetProfileData.dataUsage=Ae,this.processPresetData()})):(this.custom=!0,this.presetProfileData=null,this.getCustomData()),this.telemetryHelperService.sendGameplayEntrySetting(this.selectedProfile),this.queryUpscalingFilters(H.upScalingResolutionId,H.aiSharpnessValue)})}processPresetData(){m.ng.isBrowserPlatform()&&(this.showDrc=this.showVsync=!1),this.selectedProfile===j.M1b.Balanced?(this.qualityHeader="settings.gameplay.Balanced",this.qualityHelper="settings.gameplay.BalancedHelp",this.vsyncString="settings.gameplay.Adaptive",this.translateService.get("commonLabels.Auto").subscribe(Ae=>{this.bitRateString=Ae})):this.selectedProfile===j.M1b.DataSaver?(this.qualityHeader="settings.gameplay.DataSaver",this.qualityHelper="settings.gameplay.DataSaverHelp",this.vsyncString="settings.gameplay.Adaptive",this.translateService.get("settings.gameplay.bitRateValue",{bitRateValue:this.presetProfileData.maxBitrate}).subscribe(Ae=>{this.bitRateString=Ae})):this.selectedProfile===j.M1b.Competitive&&(this.qualityHeader="settings.gameplay.Competitive",this.qualityHelper="settings.gameplay.CompetitiveHelp",this.vsyncString="commonLabels.Off",this.translateService.get("commonLabels.Auto").subscribe(Ae=>{this.bitRateString=Ae})),this.gbPerHour=this.presetProfileData.dataUsage;const H=this.getResolution(this.presetProfileData.width,this.presetProfileData.height);this.setResolution(H),this.frameRate=this.presetProfileData.fps.toString()}getCustomData(){this.streamingProfileService.readCustomProfileData().pipe((0,p.R)(this.destroy$)).subscribe(H=>{this.customData=H,this.customData||(this.customData=this.streamingProfileService.getDefaultProfileData()),this.logger.info("Custom Data: ",this.customData),this.customDataUponEntry=(0,Vt.cloneDeep)(this.customData),this.processCustomData()})}storeCustomProfileData(){return this.logger.info("StoreCustomProfileData: ",this.customData),this.streamingProfileService.storeCustomProfileData(this.customData).pipe((0,ht.b)(H=>H))}updateDataUsage(){return this.streamingProfileService.calculateDataUsage(this.customData.width,this.customData.height,this.customData.fps,this.customData.maxBitrateAuto?0:this.customData.maxBitrate).pipe((0,p.R)(this.destroy$),(0,Pn.zg)(H=>(this.customData.dataUsage=H,this.gbPerHour=this.customData.dataUsage,this.storeCustomProfileData().pipe((0,u.q)(1),(0,ht.b)(()=>this.logger.info("Custom profile data stored successfully")),(0,so.K)(pe=>(this.logger.error("Error storing custom profile data: ",pe),(0,Wn.of)(!1)))))))}storeVSyncInStreamerConfig(H){this.settingsService.setVsyncValue(H),this.streamingProfileService.saveVSyncInStreamerConfig(H)}getResolution(H,pe){return{width:H,height:pe,ratio:this.streamingProfileService.calculateAspectRatio(H,pe),enabled:!0}}setResolution(H){this.translateService.get("settings.gameplay.ResView",{resWidth:H.width,resHeight:H.height,aspectRatio:H.ratio}).subscribe(pe=>{this.resolution=pe}),this.logger.info("Resolution String: ",this.resolution)}onCustomProfileFieldChange(H){let pe=!0;switch(H){case j.EG8.maxBitrateValue:pe=!1,this.streamingProfileService.getAutoMaxBitrateValue(this.customData.width,this.customData.height,this.customData.fps).pipe((0,p.R)(this.destroy$),(0,Pn.zg)(Ae=>(this.customData.maxBitrate=Ae,this.bitRate=this.customData.maxBitrate,this.customData.maxBitrateAuto?this.bridgeService.executeCommand(Z.Gh.Gfn.Streaming.SetStreamingMaxBitrate,{streamIdx:0,kbps:1e3*this.customData.maxBitrate}):(0,Wn.of)(!0))),(0,Pn.zg)(()=>(this.customData.maxBitrateAuto&&(this.customData.maxBitrate=0,this.bitRate=0),this.updateDataUsage()))).subscribe();break;case j.EG8.vSync:this.storeVSyncInStreamerConfig(this.customData.vSync)}pe&&this.updateDataUsage().pipe((0,p.R)(this.destroy$)).subscribe()}processCustomData(){this.qualityHeader="settings.gameplay.Custom",this.qualityHelper="settings.gameplay.CustomHelp",this.gbPerHour=this.customData.dataUsage,this.bitRate=this.customData.maxBitrate;const H=this.getResolution(this.customData.width,this.customData.height);this.setResolution(H);const pe=this.customData.fps;this.frameRate=pe.toString(),m.ng.isBrowserPlatform()?(this.showDrc=this.showVsync=!1,this.hideBitRateSlider=!0,0===this.bitRate&&this.translateService.get("commonLabels.Auto").subscribe(Ae=>{this.bitRateString=Ae})):(this.enableBitRateSlider=!this.customData.maxBitrateAuto&&!this.hideBitRateSlider,this.bridgeService.executeCommand(Z.Gh.Gfn.Streaming.VsyncToggle).pipe((0,p.R)(this.destroy$)).subscribe(Ae=>{this.vsyncDisabled1=!Ae,this.logger.info("VsyncDisabled1 is: ",this.vsyncDisabled1)},Ae=>{this.logger.error("vSyncToggle failed: "+Ae)}),(0,Rn.aj)([this.bridgeService.executeCommand(Z.Gh.Gfn.Streaming.GetDisplayMode),this.bridgeService.executeCommand(Z.Gh.Gfn.Streaming.GetVSyncAutoDisableThresholdStreamingFPS),this.bridgeService.executeCommand(Z.Gh.Gfn.Streaming.GetVSyncAutoDisableThresholdDisplayHz)]).pipe((0,p.R)(this.destroy$)).subscribe(([Ae,et,wt])=>{this.logger.info("GetVSyncAutoDisableThresholdStreamingFPS: ",et),this.logger.info("GetVSyncAutoDisableThresholdDisplayHz: ",wt),this.logger.info("RefreshRate: ",Ae.refreshRate),this.vsyncDisabled2=pe===et&&Ae.refreshRate<wt,this.logger.info("VsyncDisabled2 is: ",this.vsyncDisabled2)}),this.vsyncString="commonLabels.Off",this.vSyncSelection=this.customData.vSync,this.logger.info("VSync init state: ",this.vSyncSelection),this.adjustPoorNetwork=this.customData.drc),this.hideBitRateSlider&&0!==this.bitRate&&this.translateService.get("settings.gameplay.bitRateValue",{bitRateValue:this.bitRate}).subscribe(Ae=>{this.bitRateString=Ae})}queryUpscalingFilters(H,pe){this.upscaleFilters=[j.JrW.STANDARD,j.JrW.ENHANCED],(0,Rn.aj)([this.resolutionUpscaleService.getUpscalingVisibility(),this.resolutionUpscaleService.getAiSupport(),this.resolutionUpscaleService.getUpScaleDisplaySetting(),this.resolutionUpscaleService.getAiSharpnessSetting(),this.resolutionUpscaleService.getEnhSharpnessSetting()]).pipe((0,u.q)(1),(0,p.R)(this.destroy$)).subscribe(([Ae,et,wt,Yt,Xt])=>{if(this.upscaleModeRotaryOptions=[],this.detailEnhancementOptions=[],wt){switch(this.upscalingShow=Ae,this.upscaleMode=wt,this.aiSharpnessId=null==Yt?void 0:Yt.id,this.enhancedSharpnessId=null==Xt?void 0:Xt.id,(null==et?void 0:et.isAiSupported)&&this.upscaleFilters.push(j.JrW.AI_ENHANCED),this.upscaleModeRotaryOptions=this.upscaleFilters.map(Tn=>Tn.displayName),this.telemetryUpscalingData.upscaleMode=this.upscaleModeRotaryOptions.findIndex(Tn=>Tn===this.upscaleMode.displayName),this.detailEnhancementOptions=[],j.DIV.getSharpnessList().forEach(Tn=>{this.detailEnhancementOptions.push(Tn.label)}),this.upscaleMode.id){case j.JrW.AI_ENHANCED.id:this.telemetryUpscalingData.detailEnhancement=this.aiSharpnessId,this.activeSharpnessSetting=j.DIV.getSharpnessbyId(this.aiSharpnessId);break;case j.JrW.ENHANCED.id:case j.JrW.NV_SCALER.id:case j.JrW.NV_SHARP.id:this.telemetryUpscalingData.detailEnhancement=this.enhancedSharpnessId,this.activeSharpnessSetting=j.DIV.getSharpnessbyId(this.enhancedSharpnessId)}this.telemetryUpscalingDataUponEntry=(0,Vt.cloneDeep)(this.telemetryUpscalingData),this.rotaryUpscaleModeChanged(this.upscaleMode.id,!1)}else this.upscalingShow=!1},Ae=>{this.logger.error("Failed to get resoultion upscale information ",Ae)})}maxBitRateToggleEvent(H){this.logger.info("Max Bit Rate changed: ",H.checked),this.customData.maxBitrateAuto=!H.checked,this.onCustomProfileFieldChange(j.EG8.maxBitrateValue)}onBitRateSliderChanged(H){H.value!==this.customData.maxBitrate&&(this.logger.info("BitRate slider changed to: ",H.value),this.customData.maxBitrate=this.bitRate=H.value,this.bridgeService.executeCommand(Z.Gh.Gfn.Streaming.SetStreamingMaxBitrate,{streamIdx:0,kbps:1e3*H.value}).pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.logger.info("Set Max BitRate: ",this.customData.maxBitrate),this.onCustomProfileFieldChange()},et=>{this.logger.error("Failed to change Max Bitrate : "+et)}))}rotaryVSyncChanged(H){this.logger.info("VSync Rotary changed: ",this.rotaryVSyncOptions[H]);const pe=this.vSyncSelection;this.vSyncSelection=H,this.customData.vSync=H,this.onCustomProfileFieldChange(j.EG8.vSync);const Ae=this.rotaryVSyncOptions[pe]===this.rotaryVSyncOptions[0]||this.rotaryVSyncOptions[H]===this.rotaryVSyncOptions[0],et=this.rotaryVSyncOptions[pe]===this.rotaryVSyncOptions[0],wt=this.rotaryVSyncOptions[H]!==this.rotaryVSyncOptions[0];this.logger.info("CurrentState: "+pe+" RotaryValue: "+H),this.logger.info("ChangeEnable: ",Ae+" NewEnable: "+et),this.logger.info("ChangeState: "+wt+" NewState: "+H),Ae?this.setVsyncEnabled(et).pipe((0,p.R)(this.destroy$)).subscribe(()=>{wt&&this.controlVsyncState(H)}):this.controlVsyncState(H)}controlVsyncState(H){this.toggleVsyncOnAdaptive(H).pipe((0,p.R)(this.destroy$)).subscribe(()=>{})}setVsyncEnabled(H){return this.bridgeService.executeCommand(Z.Gh.Gfn.Streaming.SetVsyncEnabled,{enabled:H}).pipe((0,ki.U)(()=>(this.logger.info("Enable Vsync: ",H),!0)))}toggleVsyncOnAdaptive(H){return this.bridgeService.executeCommand(Z.Gh.Gfn.Streaming.SetAdaptiveFramePacingEnabled,{enabled:"settings.gameplay.Adaptive"===this.rotaryVSyncOptions[H]}).pipe((0,ki.U)(()=>(this.logger.info("Set Vsync to: ",this.rotaryVSyncOptions[H]),!0)))}adjustPoorNetworkToggleEvent(H){this.logger.info("Adjust Poor Network changed: ",H.checked),this.customData.drc=H.checked,this.bridgeService.executeCommand(Z.Gh.Gfn.Streaming.SetDrcDfcState,{streamIdx:0,enabled:H.checked}).pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.logger.info("AdjustPoorNetwork: ",this.customData.drc),this.onCustomProfileFieldChange()},et=>{this.logger.error("Failed to change Adjust Poor Network Conditions : "+et)})}rotaryUpscaleModeChanged(H,pe,Ae){this.logger.info("Upscale Mode Rotary changed index: ",H),this.telemetryUpscalingData.upscaleMode=H,this.upscaleMode=this.upscaleFilters.find(et=>et.displayName===this.upscaleModeRotaryOptions[H]),this.resolutionUpscaleService.setMagnificationFilter(this.upscaleMode.id),Ae||this.resolutionUpscaleService.saveSetting(j.QZM.Resolution,this.upscaleMode.id,pe),this.showSharpnessEnhanced=!1,this.isAiSelected=!1,j.DIV.isEnhanced(this.upscaleMode.id)&&this.resolutionUpscaleService.getNvScalerNvSharpSupport().pipe((0,u.q)(1),(0,p.R)(this.destroy$)).subscribe(et=>{this.showSharpnessEnhanced=et.isNvScalerSupported||et.isNvSharpenSupported,this.showSharpnessEnhanced&&this.rotaryDetailEnhancementChanged(this.enhancedSharpnessId,!1)}),j.DIV.isAiEnhanced(this.upscaleMode.id)&&(this.rotaryDetailEnhancementChanged(this.aiSharpnessId,!1),this.isAiSelected=!0)}rotaryDetailEnhancementChanged(H,pe,Ae){let et;switch(this.logger.info("Detail Enhancement Rotary changed, index: ",H),this.telemetryUpscalingData.detailEnhancement=H,this.activeSharpnessSetting=j.DIV.getSharpnessbyId(H),this.sharpnessTurnedOff=j.DIV.isSharpnessOff(this.activeSharpnessSetting),this.upscaleMode.id){case j.JrW.AI_ENHANCED.id:this.aiSharpnessId=this.activeSharpnessSetting.id,this.resolutionUpscaleService.setAiSharpnessSetting(this.activeSharpnessSetting),et=j.QZM.AiSharpness;break;case j.JrW.ENHANCED.id:case j.JrW.NV_SCALER.id:case j.JrW.NV_SHARP.id:this.enhancedSharpnessId=this.activeSharpnessSetting.id,this.resolutionUpscaleService.setEnhSharpnessSetting(this.activeSharpnessSetting),et=j.QZM.EnhSharpness,this.showSharpnessEnhanced&&this.resolutionUpscaleService.setMagnificationFilter(this.sharpnessTurnedOff?j.JrW.ENHANCED.id:this.upscaleMode.id)}this.resolutionUpscaleService.setSharpnessFilter(this.activeSharpnessSetting),Ae||this.resolutionUpscaleService.saveSetting(et,this.activeSharpnessSetting.value,!0)}detectInGameGraphics(H){var pe,Ae,et,wt;const Yt=null===(wt=null===(et=null===(Ae=null===(pe=H.subscription)||void 0===pe?void 0:pe.features)||void 0===Ae?void 0:Ae.features)||void 0===et?void 0:et.find(Xt=>Xt.key===j.xAh.IN_GAME_SETTINGS_PERSISTENCE_ENABLED))||void 0===wt?void 0:wt.textValue;this.logger.info("Setting availability received from subscrption: ",Yt),this.saveInGameGraphics=!1,this.saveInGameGraphicsEnabled="true"===Yt,this.showInGameGraphicsSection=H.membershipStatus===j.Tn6.Entitled,this.saveInGameGraphicsEnabled&&this.settingsService.persistInGameGraphicsEnabled().pipe((0,p.R)(this.destroy$)).subscribe(Xt=>{this.logger.info("Setting updated from storage: ",Xt),this.saveInGameGraphics=Xt})}streamingQualityCheckExitTelemetry(){if(!(0,Vt.isEqual)(this.customData,this.customDataUponEntry)){this.logger.info("Streaming Quality Changed!");const H={maxBitrateAuto:this.customData.maxBitrateAuto,maxBitrateAutoChanged:!1,maxBitrate:this.customData.maxBitrate,MaxBitrateChanged:!1,vSync:this.customData.vSync,vSyncChanged:!1,drc:this.customData.drc,drcChanged:!1};this.customData.drc!==this.customDataUponEntry.drc&&(H.drcChanged=!0),this.customData.vSync!==this.customDataUponEntry.vSync&&(H.vSyncChanged=!0),this.customData.maxBitrateAuto!==this.customDataUponEntry.maxBitrateAuto&&(H.maxBitrateAutoChanged=!0),this.customData.maxBitrate!==this.customDataUponEntry.maxBitrate&&(H.MaxBitrateChanged=!0),this.telemetryHelperService.sendStreamingQualityChanged(H)}}resolutionUpscalingCheckExitTelemetry(){this.upscalingShow&&!(0,Vt.isEqual)(this.telemetryUpscalingData,this.telemetryUpscalingDataUponEntry)&&(this.logger.info("Resolution Upscaling Changed!"),this.telemetryUpscalingData.upscaleMode!==this.telemetryUpscalingDataUponEntry.upscaleMode&&this.logger.info("Upscale Selection Changed: ",this.telemetryUpscalingData.upscaleMode),this.telemetryUpscalingData.detailEnhancement!==this.telemetryUpscalingDataUponEntry.detailEnhancement&&this.logger.info("Upscale Detail Enhancement Changed: ",this.telemetryUpscalingData.detailEnhancement),this.telemetryHelperService.sendResolutionUpscalingChanged(this.telemetryUpscalingData))}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(t.zs3),t.Y36(m.ed),t.Y36(a.f5),t.Y36(i.gz),t.Y36(a.ad),t.Y36(C.sK),t.Y36(m.dF),t.Y36(j.BHV),t.Y36(j.$lO),t.Y36(a.l),t.Y36(j.zrw))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-gameplay"]],inputs:{bitRate:"bitRate"},outputs:{bitRateChange:"bitRateChange"},features:[t.qOj],decls:49,vars:47,consts:[["fxLayout","column","fxFlex","",1,"settings-gameplay"],["fxLayout","column",1,"settings-container"],[1,"font-body3","font-color-tertiary","left-data"],[1,"font-body1","font-color-primary","header1"],[1,"font-body2","font-color-tertiary","header2"],["fxLayout","row",1,"standard-holder24"],["fxFlex","",1,"font-body1","font-color-primary","left-data"],["fxLayoutAlign","end start",1,"standard-data"],[1,"standard-base","font-sub2","font-color-secondary","right-data"],["fxFlex","","fxLayout","column"],["fxFlex","","fxLayout","row",3,"ngClass"],["fxFlex","",1,"font-body1","font-color-primary",3,"ngClass"],["class","font-sub2 font-color-secondary right-data","fxLayoutAlign","center",4,"ngIf"],["fxFlex","none","class","toggle-padding header3",3,"ngModel","ngModelChange","change",4,"ngIf"],["fxFlex","grow","class","font-body2 font-color-tertiary header4",4,"ngIf"],["fxLayout","column","fxFlex","grow","class","font-body2 font-color-tertiary",4,"ngIf"],["fxLayoutAlign","end start",1,"standard-data","font-sub2","font-color-secondary"],[1,"standard-base","right-data"],[1,"standard-post","right-data"],[4,"ngIf"],["fxFlex","none","fxLayoutAlign","start center",4,"ngIf"],["fxFlex","none","fxLayout","column",4,"ngIf"],["fxLayout","column",4,"ngIf"],["fxLayoutAlign","center",1,"font-sub2","font-color-secondary","right-data"],["fxFlex","none",1,"toggle-padding","header3",3,"ngModel","ngModelChange","change"],["fxFlex","grow",1,"font-body2","font-color-tertiary","header4"],["fxLayout","column","fxFlex","grow",1,"font-body2","font-color-tertiary"],["fxFlex","grow","fxLayoutAlign","space-between center"],["fxFlexFill","",3,"min","max","value","step","valueChange","input"],["fxLayoutAlign","center",1,"font-body2","font-color-tertiary","slider-text"],["class","font-body1 font-color-primary standard-holder24","fxLayout","row",4,"ngIf"],["fxFlex","grow",4,"ngIf"],["fxLayout","row",1,"font-body1","font-color-primary","standard-holder24"],["fxFlex","",1,"left-data"],[1,"font-body1","font-color-secondary","standard-post","left-data"],["fxFlex","grow"],["title","settings.gameplay.VSync",3,"input","initialState","disabled","selectionChanged"],["fxFlex","none","fxLayoutAlign","start center"],["fxFlex","grow",1,"font-body1","font-color-primary","left-data"],["class","standard-post font-sub2 font-color-secondary right-data",4,"ngIf"],["fxFlex","none","class","toggle-padding",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"standard-post","font-sub2","font-color-secondary","right-data"],["fxFlex","none",1,"toggle-padding",3,"ngModel","ngModelChange","change"],["fxFlex","none","fxLayout","column"],["title","settings.gameplay.UpscaleMode",3,"input","initialState","selectionChanged"],["title","settings.gameplay.DetailEnhancement",3,"input","initialState","selectionChanged",4,"ngIf"],["title","settings.gameplay.DetailEnhancement",3,"input","initialState","selectionChanged"],["fxLayout","column"],["fxLayout","row"],["fxFlex","",1,"font-body1","font-color-primary","header1"],["fxFlex","none","fxLayoutAlign","end start",1,"standard-base","font-sub2","font-color-secondary","header1a"],["class","font-body2 font-color-tertiary header2",4,"ngIf"]],template:function(H,pe){1&H&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"span",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span",3),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"span",4),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",5),t.TgZ(12,"span",6),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",7),t.TgZ(16,"span",8),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",9),t.TgZ(20,"div",10),t.TgZ(21,"span",11),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,zi,2,1,"span",12),t.YNc(25,Ki,1,1,"mat-slide-toggle",13),t.qZA(),t.YNc(26,$i,3,3,"div",14),t.YNc(27,Yi,6,10,"div",15),t.qZA(),t.TgZ(28,"div",5),t.TgZ(29,"span",6),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",7),t.TgZ(33,"span",8),t._uU(34),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",5),t.TgZ(36,"span",6),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"div",16),t.TgZ(40,"span",17),t._uU(41),t.qZA(),t.TgZ(42,"span",18),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(45,lo,3,2,"div",19),t.YNc(46,Ui,6,5,"div",20),t.qZA(),t.YNc(47,ui,7,6,"div",21),t.YNc(48,Xi,11,7,"div",22),t.qZA()),2&H&&(t.xp6(3),t.Oqu(t.lcZ(4,21,"settings.gameplay.StreamingQuality")),t.xp6(3),t.Oqu(t.lcZ(7,23,pe.qualityHeader)),t.xp6(3),t.Oqu(t.lcZ(10,25,pe.qualityHelper)),t.xp6(4),t.Oqu(t.lcZ(14,27,"settings.gameplay.GameplayData")),t.xp6(4),t.Oqu(t.xi3(18,29,"settings.gameplay.GBPerHour",t.VKq(40,uo,pe.gbPerHour))),t.xp6(3),t.Q6J("ngClass",t.VKq(42,Mi,pe.hideBitRateSlider)),t.xp6(1),t.Q6J("ngClass",t.WLB(44,Fi,pe.hideBitRateSlider,!pe.hideBitRateSlider)),t.xp6(1),t.hij(" ",t.lcZ(23,32,"settings.gameplay.MaxBitRate")," "),t.xp6(2),t.Q6J("ngIf",!pe.custom||pe.hideBitRateSlider),t.xp6(1),t.Q6J("ngIf",pe.custom&&!pe.hideBitRateSlider),t.xp6(1),t.Q6J("ngIf",pe.custom&&!pe.enableBitRateSlider&&!pe.hideBitRateSlider),t.xp6(1),t.Q6J("ngIf",pe.enableBitRateSlider&&!pe.hideBitRateSlider),t.xp6(3),t.Oqu(t.lcZ(31,34,"settings.gameplay.Resolution")),t.xp6(4),t.Oqu(pe.resolution),t.xp6(3),t.Oqu(t.lcZ(38,36,"settings.gameplay.FrameRate")),t.xp6(4),t.Oqu(pe.frameRate),t.xp6(2),t.Oqu(t.lcZ(44,38,"settings.gameplay.FPS")),t.xp6(2),t.Q6J("ngIf",pe.showVsync),t.xp6(1),t.Q6J("ngIf",pe.showDrc),t.xp6(1),t.Q6J("ngIf",pe.upscalingShow),t.xp6(1),t.Q6J("ngIf",pe.showInGameGraphicsSection))},directives:[c.xw,c.yH,c.Wh,n.mk,ge.oO,n.O5,G.Rr,x.xZ,P.JJ,P.On,Ut.Q,c.s9,Ve.T,E.i,I.n],pipes:[C.X$],styles:['.nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-error[_ngcontent-%COMP%]{color:#e02828}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.settings-gameplay[_ngcontent-%COMP%]{max-width:100%;padding:24px;overflow-y:overlay}.isLtr[_nghost-%COMP%]   .settings-gameplay[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-gameplay[_ngcontent-%COMP%]{margin-right:-24px}html[dir=ltr][_ngcontent-%COMP%]   .settings-gameplay[_ngcontent-%COMP%]{--dummy4: 0;margin-right:-24px}.isRtl[_nghost-%COMP%]   .settings-gameplay[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-gameplay[_ngcontent-%COMP%]{margin-left:-24px}html[dir=rtl][_ngcontent-%COMP%]   .settings-gameplay[_ngcontent-%COMP%]{--dummy4: 0;margin-left:-24px}.settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px}.isLtr[_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.right-data[_ngcontent-%COMP%]{margin-top:14px;margin-bottom:14px}.left-data[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px}.slider-text[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px}.header1[_ngcontent-%COMP%]{margin-top:12px}.header1a[_ngcontent-%COMP%]{margin-top:14px}.header2[_ngcontent-%COMP%]{margin-top:0;margin-bottom:4px}.header3[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:4px}.header4[_ngcontent-%COMP%]{margin-bottom:14px}.standard-holder24[_ngcontent-%COMP%]{line-height:24px!important;margin-bottom:9px}.isLtr[_nghost-%COMP%]   .standard-data[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .standard-data[_ngcontent-%COMP%]{margin-left:26px}html[dir=ltr][_ngcontent-%COMP%]   .standard-data[_ngcontent-%COMP%]{--dummy3: 0;margin-left:26px}.isRtl[_nghost-%COMP%]   .standard-data[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .standard-data[_ngcontent-%COMP%]{margin-right:26px}html[dir=rtl][_ngcontent-%COMP%]   .standard-data[_ngcontent-%COMP%]{--dummy3: 0;margin-right:26px}.isLtr[_nghost-%COMP%]   .standard-base[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .standard-base[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%]{text-align:right}html[dir=ltr][_ngcontent-%COMP%]   .standard-base[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .standard-post[_ngcontent-%COMP%]{--dummy0: 0;text-align:right}.isRtl[_nghost-%COMP%]   .standard-base[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .standard-base[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%]{text-align:left}html[dir=rtl][_ngcontent-%COMP%]   .standard-base[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .standard-post[_ngcontent-%COMP%]{--dummy0: 0;text-align:left}.isLtr[_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%]{padding-left:3px}html[dir=ltr][_ngcontent-%COMP%]   .standard-post[_ngcontent-%COMP%]{--dummy1: 0;padding-left:3px}.isRtl[_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .standard-post[_ngcontent-%COMP%]{padding-right:3px}html[dir=rtl][_ngcontent-%COMP%]   .standard-post[_ngcontent-%COMP%]{--dummy1: 0;padding-right:3px}.isLtr[_nghost-%COMP%]   .toggle-padding[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .toggle-padding[_ngcontent-%COMP%]{padding-right:10px}html[dir=ltr][_ngcontent-%COMP%]   .toggle-padding[_ngcontent-%COMP%]{--dummy2: 0;padding-right:10px}.isRtl[_nghost-%COMP%]   .toggle-padding[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .toggle-padding[_ngcontent-%COMP%]{padding-left:10px}html[dir=rtl][_ngcontent-%COMP%]   .toggle-padding[_ngcontent-%COMP%]{--dummy2: 0;padding-left:10px}']}),Ne})(),data:{level:2}},{path:"debug",component:(()=>{class Ne extends w{constructor(H,pe,Ae,et,wt){super(pe,Ae,et),this.loggingService=H,this.localeService=wt,this.languages=h_supportedLang,this.languageNames=[],this.initialLangIndex=5,super.bar("settings.Debug"),this.logger=this.loggingService.getLogger("Debug")}ngOnInit(){super.ngOnInit(),this.clientLocales=f,this.processLanguage()}processLanguage(){this.languages.forEach((H,pe)=>{const Ae=this.getLanguageName(pe);this.logger.info("Language: "+H+" name: "+Ae),this.languageNames.push(Ae)}),this.localeService.localeChanged.pipe((0,u.q)(1)).subscribe(H=>{this.logger.info("Current Locale: ",H),this.languages.forEach((pe,Ae)=>{pe===H&&(this.initialLangIndex=Ae)})})}getLanguageName(H){return this.clientLocales.find(pe=>pe.code===this.languages[H]).name}languageChanged(H){this.logger.info("Language changed to: "+this.languages[H]+" name: "+this.languageNames[H]),this.localeService.setLocale(this.languages[H])}}return Ne.\u0275fac=function(H){return new(H||Ne)(t.Y36(m.ed),t.Y36(a.f5),t.Y36(i.gz),t.Y36(a.ad),t.Y36(m.OL))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["igo-debug"]],features:[t.qOj],decls:6,vars:6,consts:[["fxLayout","column","fxFlex","",1,"settings-debug"],[1,"settings-container"],[1,"font-body1","nv-label","label-color"],[3,"maxHeight","selection","input","selectionChanged"]],template:function(H,pe){1&H&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"nv-dropdown",3),t.NdJ("selectionChanged",function(et){return pe.languageChanged(et)}),t.qZA(),t.qZA(),t.qZA()),2&H&&(t.xp6(3),t.Oqu(t.lcZ(4,4,"settings.general.displayLanguage")),t.xp6(2),t.Q6J("maxHeight",300)("selection",pe.initialLangIndex)("input",pe.languageNames))},directives:[c.xw,c.yH,O.y],pipes:[C.X$],styles:['.nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.icon-preview[_ngcontent-%COMP%]{color:#fff}.icon-error[_ngcontent-%COMP%]{color:#e02828}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}[_nghost-%COMP%]{flex:1;position:absolute;width:100%;height:100%;box-sizing:border-box}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.settings-debug[_ngcontent-%COMP%]{max-width:100%;padding:24px;overflow-y:overlay}.isLtr[_nghost-%COMP%]   .settings-debug[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-debug[_ngcontent-%COMP%]{margin-right:-24px}html[dir=ltr][_ngcontent-%COMP%]   .settings-debug[_ngcontent-%COMP%]{--dummy4: 0;margin-right:-24px}.isRtl[_nghost-%COMP%]   .settings-debug[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-debug[_ngcontent-%COMP%]{margin-left:-24px}html[dir=rtl][_ngcontent-%COMP%]   .settings-debug[_ngcontent-%COMP%]{--dummy4: 0;margin-left:-24px}.label-color[_ngcontent-%COMP%]{color:#ffffffe6}.settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px}.isLtr[_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]   .setting-about-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}']}),Ne})(),data:{level:2}},{path:"highlights",component:rt,data:{level:2}},{path:"hud",component:Et,data:{level:2}},{path:"notifications",component:En,data:{level:2}},{path:"shortcuts",component:Sn,data:{level:2}},{path:"storage",component:ke,data:{level:2}},{path:"video",component:yn,data:{level:2}},{path:"audio",component:Pt,data:{level:2}},{path:"system",component:cn,data:{level:2}}];let yo=(()=>{class Ne{}return Ne.\u0275fac=function(H){return new(H||Ne)},Ne.\u0275mod=t.oAB({type:Ne}),Ne.\u0275inj=t.cJS({imports:[[n.ez,y.m,D.o9,T.Q,i.Bz.forChild(Mo),(0,m.zv)()]]}),Ne})()},1558:(He,de,e)=>{"use strict";e.d(de,{vq:()=>D,u3:()=>m,Vi:()=>y,Sk:()=>T});const i=e(2984).Yk.Share.Shareserver.HotkeyEnum,D=new Map([[i.OpenIGO,[17,71]],[i.Screenshot,[17,49]],[i.OpenAnsel,[17,50]],[i.RecordToggle,[17,57]],[i.DVRSave,[17,48]],[i.DVRToggle,[17,16,48]],[i.MicToggle,[17,77]],[i.FreeStyleToggleStyle1,[]],[i.FreeStyleToggleStyle2,[]],[i.FreeStyleToggleStyle3,[]],[i.NativeKeyboardInputDialog,[17,75]],[i.ConnectGfnBroadcastToggle,[]],[i.QuitGame,[18,115]]]),m=new Map([[i.OpenIGO,[65335,71]],[i.Screenshot,[65335,49]],[i.OpenAnsel,[65335,50]],[i.RecordToggle,[65335,57]],[i.DVRSave,[65335,48]],[i.DVRToggle,[65335,16,48]],[i.MicToggle,[65335,77]],[i.FreeStyleToggleStyle1,[]],[i.FreeStyleToggleStyle2,[]],[i.FreeStyleToggleStyle3,[]],[i.NativeKeyboardInputDialog,[65335,75]],[i.ConnectGfnBroadcastToggle,[]],[i.QuitGame,[65335,81]]]),y="IgoShareSettings";var T=(()=>((T||(T={})).Shortcuts="shortcuts",T))()},3603:(He,de,e)=>{"use strict";e.d(de,{x:()=>G});var n=e(75428),i=e(20088),D=e(85816),m=e(2316),y=e(94377),T=e(58283),r=e(42118),a=e(54364),s=e(89460),p=e(30582),l=e(80181),t=e(52529);function w(x,E){if(1&x&&(m.TgZ(0,"div",9),m.TgZ(1,"span",10),m._uU(2),m.qZA(),m.qZA()),2&x){const P=m.oxw();m.xp6(2),m.Oqu(P.highlightName)}}function h(x,E){if(1&x&&(m.TgZ(0,"div",11),m.TgZ(1,"span",10),m._uU(2),m.qZA(),m.qZA()),2&x){const P=m.oxw();m.xp6(2),m.Oqu(P.duration)}}function u(x,E){if(1&x&&m._UZ(0,"img",12),2&x){const P=m.oxw();m.Q6J("src",P.item.data,m.LSH)}}function o(x,E){1&x&&(m.TgZ(0,"div",13),m.NdJ("click",function(v){return v.stopPropagation()}),m.qZA())}function f(x,E){1&x&&m._UZ(0,"mat-spinner",14)}function c(x,E){1&x&&m._UZ(0,"mat-icon",15)}function g(x,E){1&x&&m._UZ(0,"div",16)}const I=function(x,E){return{"width.px":x,"height.px":E}};let G=(()=>{class x{constructor(P,v){this.galleryService=P,this.translateService=v,this.initialDelay=!1}ngAfterViewInit(){this.item&&!this.item.data&&this.scrolling&&(this.metadataReq$=this.scrolling.pipe((0,n.g)(this.initialDelay?300:0),(0,i.P)(P=>!1===P),(0,D.zg)(()=>this.galleryService.fillInFileData(this.item))).subscribe())}ngOnDestroy(){this.metadataReq$&&this.metadataReq$.unsubscribe()}get highlightName(){const P=`highlightLabels.${this.item.hlName}`;let v=this.translateService.instant(P);return v===P&&(v=this.item.hlName),v}get duration(){let P="";return void 0!==this.item.duration&&(P="00:"===this.item.duration.slice(0,3)?this.item.duration.slice(3):this.item.duration.slice(0)),P}}return x.\u0275fac=function(P){return new(P||x)(m.Y36(y.rj),m.Y36(T.sK))},x.\u0275cmp=m.Xpm({type:x,selectors:[["nv-gallery-item"]],inputs:{item:"item",scrolling:"scrolling",activeItem:"activeItem",thumbSize:"thumbSize",initialDelay:"initialDelay"},decls:10,vars:11,consts:[[1,"gallery-item",3,"ngStyle"],["class","gallery-overlay-hlname-div gallery-overlay",4,"ngIf"],["class","gallery-overlay-duration-div gallery-overlay",4,"ngIf"],[3,"src",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"gallery-overlay"],["class","gallery-inprogress",3,"click",4,"ngIf"],["diameter","32","tabindex","-1","color","accent",4,"ngIf"],["svgIcon","alert_circle","class","icon-normal gallery-overlay-play-icon","tabindex","-1",4,"ngIf"],["class","gallery-active",4,"ngIf"],[1,"gallery-overlay-hlname-div","gallery-overlay"],[1,"font-body2"],[1,"gallery-overlay-duration-div","gallery-overlay"],[3,"src"],[1,"gallery-inprogress",3,"click"],["diameter","32","tabindex","-1","color","accent"],["svgIcon","alert_circle","tabindex","-1",1,"icon-normal","gallery-overlay-play-icon"],[1,"gallery-active"]],template:function(P,v){1&P&&(m.TgZ(0,"mat-card",0),m.TgZ(1,"mat-card-content"),m.YNc(2,w,3,1,"div",1),m.YNc(3,h,3,1,"div",2),m.YNc(4,u,1,1,"img",3),m.TgZ(5,"div",4),m.YNc(6,o,1,0,"div",5),m.YNc(7,f,1,0,"mat-spinner",6),m.YNc(8,c,1,0,"mat-icon",7),m.qZA(),m.YNc(9,g,1,0,"div",8),m.qZA(),m.qZA()),2&P&&(m.Q6J("ngStyle",m.WLB(8,I,v.thumbSize,v.thumbSize)),m.xp6(2),m.Q6J("ngIf",v.item.hlName),m.xp6(1),m.Q6J("ngIf",v.item.duration),m.xp6(1),m.Q6J("ngIf",v.item.data),m.xp6(2),m.Q6J("ngIf",!v.item.data),m.xp6(1),m.Q6J("ngIf",!v.item.data&&!v.item.cancel),m.xp6(1),m.Q6J("ngIf",v.item.cancel),m.xp6(1),m.Q6J("ngIf",v.item===v.activeItem))},directives:[r.a8,a.PC,s.Zl,r.dn,a.O5,p.xw,p.Wh,l.$g,t.Hw],styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.gallery-item[_ngcontent-%COMP%]{padding:0;box-sizing:border-box;background-color:#191919;box-shadow:none;border-radius:0}.gallery-overlay[_ngcontent-%COMP%], .gallery-active[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}.gallery-inprogress[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;z-index:99;height:100%;width:100%;box-sizing:border-box;border-style:dashed;border-width:2px;color:#ffffff61}.gallery-overlay-play-icon[_ngcontent-%COMP%]{width:33px;height:33px;font-size:33px;margin:0;opacity:.95}.gallery-overlay-common[_ngcontent-%COMP%], .gallery-overlay-duration-div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .gallery-overlay-hlname-div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:absolute;color:#fff;white-space:normal;background-color:#00000080;padding:0}.gallery-active[_ngcontent-%COMP%]{border:2px solid #76b900;z-index:1}.gallery-overlay-hlname-div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin:0 2px 2px;padding:0 5px;max-width:calc(100% - 14px);bottom:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.gallery-overlay-duration-div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{padding:0 5px}.isLtr[_nghost-%COMP%]   .gallery-overlay-duration-div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .gallery-overlay-duration-div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin:2px 0 0 2px}html[dir=ltr][_ngcontent-%COMP%]   .gallery-overlay-duration-div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{--dummy: 0;margin:2px 0 0 2px}.isRtl[_nghost-%COMP%]   .gallery-overlay-duration-div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .gallery-overlay-duration-div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir=rtl][_ngcontent-%COMP%]   .gallery-overlay-duration-div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{--dummy: 0;margin:2px 2px 0 0}"]}),x})()},34663:(He,de,e)=>{"use strict";e.d(de,{n:()=>D});var n=e(2316),i=e(1124);let D=(()=>{class m{}return m.\u0275fac=function(T){return new(T||m)},m.\u0275cmp=n.Xpm({type:m,selectors:[["nv-divider"]],decls:1,vars:0,consts:[[1,"nv-divider"]],template:function(T,r){1&T&&n._UZ(0,"mat-divider",0)},directives:[i.d],styles:[".nv-divider[_ngcontent-%COMP%]{margin:16px 0}"]}),m})()},85136:(He,de,e)=>{"use strict";e.d(de,{y:()=>f});var n=e(2316),i=e(80221),D=e(94377),m=e(30582),y=e(24298),T=e(78819),r=e(772),a=e(52529),s=e(54364),p=e(89460),l=e(1124),t=e(58283);const w=["dropdownContainer"];function h(c,g){1&c&&n._UZ(0,"mat-divider")}function u(c,g){if(1&c){const I=n.EpF();n.ynx(0),n.TgZ(1,"button",10),n.NdJ("click",function(){const E=n.CHM(I).index;return n.oxw().itemSelect(E)}),n.TgZ(2,"div",11),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.qZA(),n.YNc(5,h,1,0,"mat-divider",12),n.BQk()}if(2&c){const I=g.$implicit,G=g.index,x=n.oxw();n.xp6(1),n.ekj("active",G==x.selection),n.xp6(2),n.Oqu(n.lcZ(4,4,I)),n.xp6(2),n.Q6J("ngIf",G===x.dividerIndex)}}const o=function(c){return{"max-height.px":c}};let f=(()=>{class c{constructor(I){this.navigationService=I,this.disabledState=void 0,this.disable=!1,this.menuOpen=!1,this._input=[],this._dividerIndex=-1,this._selection=0,this.selectionChanged=new n.vpe}set disabled(I){this.disabledState=I,this.disable=I||!!(this.input&&this.input.length<2)}get input(){return this._input}set input(I){this._input=I,this.setEntry()}set dividerIndex(I){this._dividerIndex=I}get dividerIndex(){return this._dividerIndex}set selection(I){this._selection=I,this.setEntry()}get selection(){return this._selection}setEntry(){this.input&&this.input.length>0?((this.selection<0||this.selection>=this.input.length)&&(this.selection=0),this.entry=this.input[this.selection],this.disable=!!this.disabledState||this.input.length<2):(this.entry="",this.disable=!0)}ngOnInit(){this.setEntry()}itemSelect(I){this.selection!==I&&(this.selection=I,this.selectionChanged.emit(I),this.navigationService.disableEscapeEvent(!1),this.setEntry())}buttonToggle(I){setTimeout(()=>{if(this.menuOpen=I,this.navigationService.disableEscapeEvent(I),I){const G=this.dropdownContainer.nativeElement.offsetWidth;this.menuItems.forEach((x,E)=>{x._getHostElement().style.width=G+"px",this.selection===E&&x.focus()})}})}}return c.\u0275fac=function(I){return new(I||c)(n.Y36(D.f5))},c.\u0275cmp=n.Xpm({type:c,selectors:[["nv-dropdown"]],viewQuery:function(I,G){if(1&I&&(n.Gf(w,5),n.Gf(i.OP,5)),2&I){let x;n.iGM(x=n.CRH())&&(G.dropdownContainer=x.first),n.iGM(x=n.CRH())&&(G.menuItems=x)}},inputs:{maxHeight:"maxHeight",disabled:"disabled",input:"input",dividerIndex:"dividerIndex",selection:"selection"},outputs:{selectionChanged:"selectionChanged"},decls:12,vars:11,consts:[["fxFlex","grow",1,"nv-dropdown"],["dropdownContainer",""],["fxFlex","","matRipple","","fxLayout","row","fxLayoutAlign","start center",1,"nv-dropdown-label","hig-button-overlay",3,"matMenuTriggerFor","disabled","menuOpened","menuClosed"],["dir","auto","fxFlex","",1,"font-body2","menu-text"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"nv-item-icon","arrow-icon"],["svgIcon","chevron_down",1,"icon-normal","osc-item-icon","arrow-icon"],["xPosition","after","yPosition","below","overlapTrigger","false",1,"nv-igo","mat-menu-max-height"],["menu","matMenu"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["mat-menu-item","","fxLayout","row","fxLayoutAlign","start center",1,"nv-dropdown-menu","hig-button-overlay",3,"click"],["dir","auto",1,"font-body2"],[4,"ngIf"]],template:function(I,G){if(1&I&&(n.TgZ(0,"div",0,1),n.TgZ(2,"button",2),n.NdJ("menuOpened",function(){return G.buttonToggle(!0)})("menuClosed",function(){return G.buttonToggle(!1)}),n.TgZ(3,"div",3),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.TgZ(6,"div",4),n._UZ(7,"mat-icon",5),n.qZA(),n.qZA(),n.TgZ(8,"mat-menu",6,7),n.TgZ(10,"div",8),n.YNc(11,u,6,6,"ng-container",9),n.qZA(),n.qZA(),n.qZA()),2&I){const x=n.MAs(9);n.ekj("nv-dropdown-z",G.menuOpen),n.xp6(2),n.Q6J("matMenuTriggerFor",x)("disabled",G.disable),n.xp6(2),n.Oqu(n.lcZ(5,7,G.entry)),n.xp6(6),n.Q6J("ngStyle",n.VKq(9,o,G.maxHeight)),n.xp6(1),n.Q6J("ngForOf",G.input)}},directives:[m.yH,y.wG,m.xw,m.Wh,i.p6,T.i,r.Lv,a.Hw,i.VK,s.PC,p.Zl,s.sg,i.OP,s.O5,l.d],pipes:[t.X$],styles:[".icon-normal{color:#ffffffb3}.icon-highlighted{color:#76b900}.icon-green-bg{background:#76b900}.icon-preview-visible{color:#fff}.icon-preview-hidden{opacity:0}.icon-warning{color:#ffb43e}.icon-alert{color:#0b8abc!important}:host[disabled] .nv-item *{cursor:default}.nv-item-icon{width:36px;height:36px}.nv-item-icon mat-icon{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row{padding:0 24px}.nv-item-labels{padding:8px 0;height:100%}.nv-label{padding:8px 0}.default-cursor{cursor:default}.disabled-opacity{opacity:.38}.nv-dropdown{width:100%;height:100%}.nv-dropdown-label{background-color:#393939}.nv-dropdown-label .menu-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:412px}:host-context(.isLtr) .nv-dropdown-label .menu-text{text-align:left}html[dir=ltr] .nv-dropdown-label .menu-text{--dummy0: 0;text-align:left}:host-context(.isRtl) .nv-dropdown-label .menu-text{text-align:right}html[dir=rtl] .nv-dropdown-label .menu-text{--dummy0: 0;text-align:right}:host-context(.isLtr) .nv-dropdown-label .menu-text{padding:16px 0 16px 8px}html[dir=ltr] .nv-dropdown-label .menu-text{--dummy: 0;padding:16px 0 16px 8px}:host-context(.isRtl) .nv-dropdown-label .menu-text{padding:16px 8px 16px 0}html[dir=rtl] .nv-dropdown-label .menu-text{--dummy: 0;padding:16px 8px 16px 0}.nv-dropdown-z{z-index:9999}button.nv-dropdown-menu{box-sizing:border-box;margin:0;width:100%;height:unset}button.nv-dropdown-menu div{padding:8px 16px;overflow:hidden;text-overflow:ellipsis}:host-context(.isLtr) button.nv-dropdown-menu div{text-align:left}html[dir=ltr] button.nv-dropdown-menu div{--dummy0: 0;text-align:left}:host-context(.isRtl) button.nv-dropdown-menu div{text-align:right}html[dir=rtl] button.nv-dropdown-menu div{--dummy0: 0;text-align:right}button.nv-dropdown-menu.active div{color:#76b900}.nv-igo.mat-menu-max-height{max-height:872px}.nv-igo.mat-menu-max-height .mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}\n"],encapsulation:2}),c})()},83733:(He,de,e)=>{"use strict";e.d(de,{t:()=>g});var n=e(2316),i=e(94377),D=e(71258),m=e(6484),y=e(30582),T=e(54364),r=e(89460),a=e(3794),s=e(78819),p=e(58283);const l=["browser"],t=["locspan"],w=["entireItem"];function h(I,G){if(1&I){const x=n.EpF();n.TgZ(0,"nv-item-button",12),n.NdJ("clicked",function(){return n.CHM(x),n.oxw(2).openBrowser()}),n.qZA()}if(2&I){const x=n.oxw(2);n.Q6J("svgIcon",x.useIcon)("disabled",x.disabled)}}function u(I,G){if(1&I&&(n.TgZ(0,"div",9),n.TgZ(1,"div",10),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,h,1,2,"nv-item-button",11),n.qZA()),2&I){const x=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,2,x.title)),n.xp6(2),n.Q6J("ngIf",x.openFunction)}}function o(I,G){if(1&I){const x=n.EpF();n.TgZ(0,"nv-item-button",13,14),n.NdJ("clicked",function(){return n.CHM(x),n.oxw().goUpOneLevel()}),n.qZA()}}function f(I,G){if(1&I){const x=n.EpF();n.TgZ(0,"nv-item-button",21),n.NdJ("clicked",function(){return n.CHM(x),n.oxw(2).clearEntry()}),n.qZA()}}function c(I,G){if(1&I){const x=n.EpF();n.TgZ(0,"div",15),n._UZ(1,"div",16),n.YNc(2,f,1,0,"nv-item-button",17),n.TgZ(3,"div",18),n._UZ(4,"div",16),n.TgZ(5,"div",19),n.TgZ(6,"nv-item-button",20),n.NdJ("clicked",function(){return n.CHM(x),n.oxw().openBrowser()}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&I){const x=n.oxw();n.xp6(2),n.Q6J("ngIf",x.showClose),n.xp6(4),n.Q6J("disabled",x.disabled)}}let g=(()=>{class I{constructor(x,E,P,v){this.route=x,this.navigationService=E,this.renderer=P,this.loggingService=v,this.enableScrolling=!1,this.useIcon="folder",this.validEntry=!1,this.fileMode=!1,this.showClose=!1,this.textLarge=!0,this.textMedium=!1,this.textSmall=!1,this._openFunction=!0,this._files="",this.clicked=new n.vpe,this.selected=new n.vpe,this.goUpOneLevel=function(){this.clicked.emit()},this.logger=this.loggingService.getLogger("NvFolderBrowser")}get showTitle(){return this._showTitle}set showTitle(x){this._showTitle=x,this.checkOverrides()}get openFunction(){return this._openFunction}set openFunction(x){this._openFunction=x,this.checkOverrides()}get files(){return this._files}set files(x){this._files=x,this.useIcon="true"===x?"file":"folder",this.fileMode="true"===x}set pathLocation(x){x&&setTimeout(()=>{this.location=x,this.validEntry=""!==x,this.showClose=this.validEntry&&this.openFunction&&this.fileMode,this.checkOverrides();const E=this.getWidthOfText(this.location,"Roboto","14px"),v=this.locspan.nativeElement.offsetWidth-(this.entireItem.nativeElement.offsetWidth-this.locspan.nativeElement.offsetWidth)-8;this.enableScrolling=E>v,this.logger.info("Text Width: "+E+" Element Width: "+v+" Enable scroll: "+this.enableScrolling)})}get pathLocation(){return this.location}checkOverrides(){this.textMedium=this.showClose||!this._openFunction||this._openFunction&&!this._showTitle,this.textSmall=this.showClose&&(!this._openFunction||this._openFunction&&!this._showTitle),this.textLarge=!this.textMedium&&!this.textSmall,this.logger.info("Large: "+this.textLarge+" Medium: "+this.textMedium+" Small: "+this.textSmall)}getFormat(){switch(this.caller){case"storage":return"font-body2 disabled-opacity";case"browser":return"font-sub1";case"broadcast":return"font-body2 disabled-opacity"}}openBrowser(){this.logger.info("Folder Browser source:",this.source),this.logger.info("Folder Browser caller:",this.caller),this.navigationService.navigate(["../browser",{title:this.title,location:this.pathLocation,source:this.source,external:this.external,caller:this.caller,files:this.files}],{relativeTo:this.route.parent,skipLocationChange:!0},i.wB.browser)}clearEntry(){setTimeout(()=>{this.location="",this.validEntry=!1,this.showClose=!1,this.enableScrolling=!1,this.checkOverrides(),this.selected.emit(this.source)})}focus(){this.element.nativeElement.focus()}getWidthOfText(x,E,P){const O=this.renderer.createElement("canvas").getContext("2d");return O.font=P+" "+E,O.measureText(x).width}}return I.\u0275fac=function(x){return new(x||I)(n.Y36(D.gz),n.Y36(i.f5),n.Y36(n.Qsj),n.Y36(m.ed))},I.\u0275cmp=n.Xpm({type:I,selectors:[["nv-folder-browser"]],viewQuery:function(x,E){if(1&x&&(n.Gf(l,5),n.Gf(t,7),n.Gf(w,7)),2&x){let P;n.iGM(P=n.CRH())&&(E.element=P.first),n.iGM(P=n.CRH())&&(E.locspan=P.first),n.iGM(P=n.CRH())&&(E.entireItem=P.first)}},inputs:{title:"title",source:"source",placeholder:"placeholder",caller:"caller",disabled:"disabled",external:"external",showTitle:"showTitle",openFunction:"openFunction",files:"files",pathLocation:"pathLocation"},outputs:{clicked:"clicked",selected:"selected"},decls:10,vars:17,consts:[["fxLayout","column","fxLayoutAlign","start center"],["class","title","fxFlexFill","","fxFlex","grow","fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],["fxFlex","grow","fxLayout","row","fxLayoutAlign","start center"],["entireItem",""],["fxFlex","none",1,"text-pad"],["locspan",""],["tabindex","-1",1,"text-pad",3,"ngClass"],["svgIcon","browser_nav_up","class","browse-btn","tooltip","tooltips.ParentFolder",3,"clicked",4,"ngIf"],["fxLayoutAlign","start center",4,"ngIf"],["fxFlexFill","","fxFlex","grow","fxLayout","row","fxLayoutAlign","start center",1,"title"],["fxFlex","grow",1,"font-sub1","text-pad"],["tooltip","tooltips.ChangeLocation",3,"svgIcon","disabled","clicked",4,"ngIf"],["tooltip","tooltips.ChangeLocation",3,"svgIcon","disabled","clicked"],["svgIcon","browser_nav_up","tooltip","tooltips.ParentFolder",1,"browse-btn",3,"clicked"],["browser",""],["fxLayoutAlign","start center"],["fxFlex","none",1,"nv-horizontal-gap-8"],["svgIcon","close",3,"clicked",4,"ngIf"],[1,"open-btn-area"],[1,"open-btn-hover"],["svgIcon","image","tooltip","tooltips.SelectImage",3,"disabled","clicked"],["svgIcon","close",3,"clicked"]],template:function(x,E){1&x&&(n.TgZ(0,"div",0),n.YNc(1,u,5,4,"div",1),n.TgZ(2,"div",2,3),n.TgZ(4,"div",4,5),n.TgZ(6,"span",6),n._uU(7),n.qZA(),n.qZA(),n.YNc(8,o,2,0,"nv-item-button",7),n.YNc(9,c,7,2,"div",8),n.qZA(),n.qZA()),2&x&&(n.xp6(1),n.Q6J("ngIf",E.showTitle),n.xp6(1),n.ekj("nv-folder-browser-selector","broadcast"===E.caller),n.xp6(2),n.ekj("nv-folder-text",E.enableScrolling)("nv-folder-text-noscroll",!E.enableScrolling)("nv-folder-text-large",E.textLarge)("nv-folder-text-medium",E.textMedium)("nv-folder-text-small",E.textSmall),n.xp6(2),n.Q6J("ngClass",E.getFormat()),n.xp6(1),n.Oqu(E.location?E.location:E.placeholder),n.xp6(1),n.Q6J("ngIf",!E.openFunction),n.xp6(1),n.Q6J("ngIf","broadcast"===E.caller))},directives:[y.xw,y.Wh,T.O5,y.yH,T.mk,r.oO,y.s9,a.n,s.i],pipes:[p.X$],styles:['@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}body[_ngcontent-%COMP%]   nv-oogg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:0;background:rgba(255,255,255,.3)}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:0;background:rgba(255,255,255,.7)}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus, .nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none}nv-oogg[_ngcontent-%COMP%]   [readonly][_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   [type=readonly][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   [readonly][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   [type=readonly][_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;padding:0}nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled), nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled), .nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none}nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   dir[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   dir[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{-webkit-margin-before:0!important;-webkit-margin-after:0!important;-webkit-margin-start:0!important;-webkit-margin-end:0!important;-webkit-padding-start:0!important;-moz-margin-start:0!important;-moz-margin-end:0!important;-moz-padding-start:0!important}nv-oogg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0}nv-oogg[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}.text-pad[_ngcontent-%COMP%]{padding:8px 0}.nv-folder-browser-selector[_ngcontent-%COMP%]{background-color:#393939;height:52px}.isLtr[_nghost-%COMP%]   .nv-folder-browser-selector[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-folder-browser-selector[_ngcontent-%COMP%]{padding-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-folder-browser-selector[_ngcontent-%COMP%]{--dummy1: 0;padding-left:8px}.isRtl[_nghost-%COMP%]   .nv-folder-browser-selector[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-folder-browser-selector[_ngcontent-%COMP%]{padding-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-folder-browser-selector[_ngcontent-%COMP%]{--dummy1: 0;padding-right:8px}.nv-folder-text-noscroll[_ngcontent-%COMP%], .nv-folder-text[_ngcontent-%COMP%]{border:0;margin:0;height:36px;box-sizing:border-box;overflow:hidden;position:relative}.nv-folder-text-noscroll[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .nv-folder-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap}.nv-folder-text-noscroll.nv-folder-text-large[_ngcontent-%COMP%], .nv-folder-text.nv-folder-text-large[_ngcontent-%COMP%]{width:448px}.nv-folder-text-noscroll.nv-folder-text-medium[_ngcontent-%COMP%], .nv-folder-text.nv-folder-text-medium[_ngcontent-%COMP%]{width:396px}.nv-folder-text-noscroll.nv-folder-text-small[_ngcontent-%COMP%], .nv-folder-text.nv-folder-text-small[_ngcontent-%COMP%]{width:360px}.nv-folder-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;transform:translate(0);transition:1s;top:0;left:0}.nv-folder-text[_ngcontent-%COMP%]:hover.nv-folder-text-large   span[_ngcontent-%COMP%]{transform:translate(calc(448px - 100%))}.nv-folder-text[_ngcontent-%COMP%]:hover.nv-folder-text-medium   span[_ngcontent-%COMP%]{transform:translate(calc(396px - 100%))}.nv-folder-text[_ngcontent-%COMP%]:hover.nv-folder-text-small   span[_ngcontent-%COMP%]{transform:translate(calc(360px - 100%))}.isLtr[_nghost-%COMP%]   .browse-btn[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .browse-btn[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .browse-btn[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .browse-btn[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .browse-btn[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .browse-btn[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.browse-btn[disabled][_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{opacity:.38}.open-btn-area[_ngcontent-%COMP%]{background-color:#191919;height:52px}.open-btn-hover[_ngcontent-%COMP%]{margin-top:8px;height:36px}']}),I})()},9442:(He,de,e)=>{"use strict";e.d(de,{_:()=>t});var n=e(2316),i=e(30582),D=e(55519),m=e(1707),y=e(78819),T=e(54364),r=e(65788),a=e(58283);function s(w,h){if(1&w&&(n.TgZ(0,"div",5),n.TgZ(1,"mat-hint"),n._uU(2),n.qZA(),n.qZA()),2&w){const u=n.oxw(),o=n.MAs(3);n.xp6(2),n.AsE("",(null==o.value?null:o.value.length)||0,"/",u.textMaxLength,"")}}const p=function(w){return{arg:w}};let t=(()=>{class w{constructor(){this.characterCounter=!1,this.textChange=new n.vpe,this.stringChange=new n.vpe,this.focus=new n.vpe,this.blur=new n.vpe}updateSource(){this.textChange.emit(this.text)}textInput(u){const o=u.target;o&&this.textMaxLength<=o.value.length?o.value=this.text=o.value.slice(0,this.textMaxLength):this.text=o.value,this.stringChange.emit(this.text)}onFocus(){this.focus.emit()}onBlur(){this.blur.emit()}}return w.\u0275fac=function(u){return new(u||w)},w.\u0275cmp=n.Xpm({type:w,selectors:[["nv-input"]],inputs:{textMaxLength:"textMaxLength",text:"text",disabled:"disabled",characterCounter:"characterCounter",readonly:"readonly",tabindex:"tabindex",placeholderText:"placeholderText"},outputs:{textChange:"textChange",stringChange:"stringChange",focus:"focus",blur:"blur"},decls:6,vars:11,consts:[["fxLayout","row","fxLayoutAlign","start center"],["fxLayout","column","fxFlex",""],["type","text","fxLayoutAlign","center center","matInput","","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"font-body2","nv-input",3,"placeholder","ngModel","disabled","readonly","tabindex","ngModelChange","change","input","focus","blur"],["input",""],["fxLayoutAlign","end","class","font-body2",4,"ngIf"],["fxLayoutAlign","end",1,"font-body2"]],template:function(u,o){1&u&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"input",2,3),n.NdJ("ngModelChange",function(c){return o.text=c})("change",function(){return o.updateSource()})("input",function(c){return o.textInput(c)})("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()}),n.ALo(4,"translate"),n.qZA(),n.YNc(5,s,3,2,"div",4),n.qZA(),n.qZA()),2&u&&(n.xp6(2),n.Q6J("placeholder",n.xi3(4,6,null==o.placeholderText?null:o.placeholderText.text,n.VKq(9,p,null==o.placeholderText?null:o.placeholderText.arg)))("ngModel",o.text)("disabled",o.disabled)("readonly",o.readonly)("tabindex",o.tabindex),n.xp6(3),n.Q6J("ngIf",o.characterCounter))},directives:[i.xw,i.Wh,i.yH,D.Nt,m.Fj,m.JJ,m.On,y.i,T.O5,r.bx],pipes:[a.X$],styles:[".nv-input[_ngcontent-%COMP%]{height:52px;width:100%;margin:8px 0;background-color:#393939;border:0;caret-color:#76b900;box-sizing:border-box;padding:16px 16px 15px;border-bottom:1px solid rgba(255,255,255,.3);color:#ffffffbf}.nv-input[_ngcontent-%COMP%]:disabled{color:#ffffff61;cursor:default}.nv-input[_ngcontent-%COMP%]:focus{padding-bottom:14px;border-bottom:2px solid #76b900}[_ngcontent-%COMP%]::placeholder{color:#ffffff61}input[_ngcontent-%COMP%]:focus::-webkit-input-placeholder{color:transparent}"]}),w})()},3794:(He,de,e)=>{"use strict";e.d(de,{n:()=>G});var n=e(2316),i=e(70781),D=e(30582),m=e(78819),y=e(54364),T=e(89460),r=e(50298),a=e(52529),s=e(58283);const p=["button"];function l(x,E){if(1&x&&(n.TgZ(0,"div",6),n._UZ(1,"mat-icon",7),n.qZA()),2&x){const P=n.oxw();n.xp6(1),n.s9C("svgIcon",P.svgIcon)}}const t=function(x,E){return{"font-body1 nv-url-color":x,"font-body2":E}};function w(x,E){if(1&x&&n._UZ(0,"span",11),2&x){const P=n.oxw(2);n.Q6J("ngClass",n.WLB(3,t,P.urlIcon,!P.urlIcon))("translate",P.titleString)("translateParams",P.titleArg)}}function h(x,E){if(1&x&&n._UZ(0,"span",12),2&x){const P=n.oxw(2);n.ekj("disabled-opacity",!P.disabled),n.Q6J("translate",P.subTitle)("translateParams",P.subTitleArg)}}const u=function(x,E){return{"nv-url-labels":x,"nv-item-labels":E}};function o(x,E){if(1&x&&(n.TgZ(0,"div",8),n.YNc(1,w,1,6,"span",9),n.YNc(2,h,1,4,"span",10),n.qZA()),2&x){const P=n.oxw();n.Q6J("ngClass",n.WLB(3,u,P.urlIcon,!P.urlIcon)),n.xp6(1),n.Q6J("ngIf",P.titleString),n.xp6(1),n.Q6J("ngIf",P.subTitle&&P.subtitleVisible)}}function f(x,E){if(1&x&&(n.TgZ(0,"div",6),n._UZ(1,"mat-icon",7),n.qZA()),2&x){const P=n.oxw();n.xp6(1),n.s9C("svgIcon",P.svgIcon)}}function c(x,E){1&x&&(n.TgZ(0,"div",6),n._UZ(1,"mat-icon",13),n.qZA())}function g(x,E){if(1&x&&(n.TgZ(0,"div",14),n._UZ(1,"mat-icon",7),n.qZA()),2&x){const P=n.oxw();n.xp6(1),n.s9C("svgIcon",P.urlIcon)}}const I=function(x){return{"default-cursor":x}};let G=(()=>{class x{constructor(){this.svgIcon=void 0,this.urlIcon=void 0,this.iconOnRight=!1,this.disabled=!1,this.focusEnabled=!0,this.titleString=void 0,this.titleArg=void 0,this.tooltip=void 0,this.subTitle=void 0,this.subTitleArg=void 0,this.chevron=!1,this.subtitleVisible=!0,this.clicked=new n.vpe,this.onClick=function(){this.clicked.emit()}}focus(){this.element.nativeElement.focus()}}return x.\u0275fac=function(P){return new(P||x)},x.\u0275cmp=n.Xpm({type:x,selectors:[["nv-item-button"]],viewQuery:function(P,v){if(1&P&&n.Gf(p,7),2&P){let O;n.iGM(O=n.CRH())&&(v.element=O.first)}},inputs:{svgIcon:"svgIcon",urlIcon:"urlIcon",iconOnRight:"iconOnRight",disabled:"disabled",focusEnabled:"focusEnabled",titleString:"titleString",titleArg:"titleArg",tooltip:"tooltip",subTitle:"subTitle",subTitleArg:"subTitleArg",chevron:"chevron",subtitleVisible:"subtitleVisible"},outputs:{clicked:"clicked"},decls:9,vars:14,consts:[["mat-button","","fxFlex","","tabIndex","0","matTooltipClass","nv-igo igo-tooltip",1,"nv-item-button-container","complex-button","font-body2",3,"disabled","ngClass","matTooltip","click"],["button",""],["fxFlex","","fxLayout","row","fxLayoutAlign","start start",1,"nv-url-width"],["class","nv-item-icon","fxLayout","row","fxLayoutAlign","center center","fxFlex","none",4,"ngIf"],["class","nv-url-titles","fxFlexAlign","center","fxLayout","column","fxLayoutAlign","start start","fxFlex","",3,"ngClass",4,"ngIf"],["class","nv-url-icon","fxLayout","row","fxLayoutAlign","center center","fxFlex","none",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"nv-item-icon"],[3,"svgIcon"],["fxFlexAlign","center","fxLayout","column","fxLayoutAlign","start start","fxFlex","",1,"nv-url-titles",3,"ngClass"],[3,"ngClass","translate","translateParams",4,"ngIf"],["class","font-body3",3,"disabled-opacity","translate","translateParams",4,"ngIf"],[3,"ngClass","translate","translateParams"],[1,"font-body3",3,"translate","translateParams"],["svgIcon","chevron_right"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"nv-url-icon"]],template:function(P,v){1&P&&(n.TgZ(0,"button",0,1),n.NdJ("click",function(){return v.onClick()}),n.ALo(2,"translate"),n.TgZ(3,"div",2),n.YNc(4,l,2,1,"div",3),n.YNc(5,o,3,6,"div",4),n.YNc(6,f,2,1,"div",3),n.YNc(7,c,2,0,"div",3),n.YNc(8,g,2,1,"div",5),n.qZA(),n.qZA()),2&P&&(n.ekj("disabled-opacity",v.disabled),n.Q6J("disabled",v.disabled)("ngClass",n.VKq(12,I,!v.focusEnabled))("matTooltip",n.lcZ(2,10,v.tooltip)),n.xp6(4),n.Q6J("ngIf",v.svgIcon&&!v.iconOnRight),n.xp6(1),n.Q6J("ngIf",v.titleString||v.subTitle),n.xp6(1),n.Q6J("ngIf",v.svgIcon&&v.iconOnRight),n.xp6(1),n.Q6J("ngIf",v.chevron),n.xp6(1),n.Q6J("ngIf",v.urlIcon))},directives:[i.lW,D.yH,m.i,y.mk,T.oO,r.gM,D.xw,D.Wh,y.O5,a.Hw,D.XD,s.Pi],pipes:[s.X$],styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}.nv-item-button-container[_ngcontent-%COMP%]{width:100%}.nv-item-button-container[disabled][_ngcontent-%COMP%]{opacity:.38}.nv-url-color[_ngcontent-%COMP%]{color:#ffffffe6}.isLtr[_nghost-%COMP%]   .nv-url-labels[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-url-labels[_ngcontent-%COMP%]{padding-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .nv-url-labels[_ngcontent-%COMP%]{--dummy1: 0;padding-left:8px}.isRtl[_nghost-%COMP%]   .nv-url-labels[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-url-labels[_ngcontent-%COMP%]{padding-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .nv-url-labels[_ngcontent-%COMP%]{--dummy1: 0;padding-right:8px}.nv-url-icon[_ngcontent-%COMP%]{margin:6px 0;width:36px;height:36px}.nv-url-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffe6;width:24px;height:24px;font-size:24px}.nv-url-width[_ngcontent-%COMP%]{max-width:100%}.nv-url-titles[_ngcontent-%COMP%]{white-space:normal}.isLtr[_nghost-%COMP%]   .nv-url-titles[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .nv-url-titles[_ngcontent-%COMP%]{text-align:left}html[dir=ltr][_ngcontent-%COMP%]   .nv-url-titles[_ngcontent-%COMP%]{--dummy0: 0;text-align:left}.isRtl[_nghost-%COMP%]   .nv-url-titles[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .nv-url-titles[_ngcontent-%COMP%]{text-align:right}html[dir=rtl][_ngcontent-%COMP%]   .nv-url-titles[_ngcontent-%COMP%]{--dummy0: 0;text-align:right}"]}),x})()},4597:(He,de,e)=>{"use strict";e.d(de,{T:()=>h});var n=e(2316),i=e(97175),D=e(6484),m=e(30582),y=e(54364),T=e(3794),r=e(78819),a=e(58283);const s=["button"],p=["container"],l=["items"];function t(u,o){if(1&u&&(n.TgZ(0,"div",9),n.TgZ(1,"span",10),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.qZA()),2&u){const f=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,1,f.title))}}function w(u,o){if(1&u&&(n.TgZ(0,"div",11),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&u){const f=o.$implicit,c=n.oxw();n.Udp("width",c.width,"px"),n.ekj("disabled-opacity",c.disabled),n.xp6(1),n.hij(" ",n.lcZ(2,5,f)," ")}}let h=(()=>{class u{constructor(f,c){this.animationBuilder=f,this.disabled=!1,this.width=120,this.title=void 0,this._initialState=0,this.continuous=!0,this.selectionChanged=new n.vpe,this.displayIndex=0,this.selectedIndex=-1,this.initialized=!1,this.isRTLLayout=!1,this.isRTLLayout=c.isRTLLayoutEnabled}set input(f){this._input=f,this.displayList=f.slice()}get input(){return this._input}set initialState(f){this._initialState=f,this.initialized&&f!==this.selectedIndex&&(this.ngOnInit(),this.ngAfterViewInit())}get initialState(){return this._initialState}moveToLeft(){if(!(!1===this.continuous&&0===this.selectedIndex||this.disabled||0===this.input.length)){if(0===this.displayIndex){const f=this.displayList.pop();this.displayList.unshift(f),this.displayIndex=1,this.animateTo(this.displayIndex,!0)}this.displayIndex--,this.selectedIndex=(this.input.length+this.selectedIndex-1)%this.input.length,this.selectionChanged.emit(this.selectedIndex),this.animateTo(this.displayIndex,!1)}}moveToRight(){if(!(!1===this.continuous&&this.selectedIndex===this.input.length-1||this.disabled||0===this.input.length)){if(this.displayIndex+1===this.displayList.length){const f=this.displayList.shift();this.displayList.push(f),this.displayIndex--,this.animateTo(this.displayIndex,!0)}this.displayIndex++,this.selectedIndex=(this.selectedIndex+1)%this.input.length,this.selectionChanged.emit(this.selectedIndex),this.animateTo(this.displayIndex,!1)}}goLeft(){this.isRTLLayout?this.moveToRight():this.moveToLeft()}goRight(){this.isRTLLayout?this.moveToLeft():this.moveToRight()}ngOnChanges(f){for(const c of Object.keys(f))"input"===c&&f[c].currentValue.length-1<this.initialState&&(this.initialState=0)}ngOnInit(){this.displayIndex=this.selectedIndex=this.initialState,this.displayList=this.input?this.input.slice():void 0}ngAfterViewInit(){this.animateTo(this.displayIndex,!0),this.initialized=!0}animateTo(f,c){let g=f*this.container.nativeElement.offsetWidth;this.isRTLLayout||(g*=-1),this.animationBuilder.build([(0,i.jt)(c?0:"250ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,i.oB)({transform:`translateX(${g}px)`}))]).create(this.itemContainer.nativeElement).play()}focus(){this.element.nativeElement.focus()}}return u.\u0275fac=function(f){return new(f||u)(n.Y36(i._j),n.Y36(D.OL))},u.\u0275cmp=n.Xpm({type:u,selectors:[["nv-rotary"]],viewQuery:function(f,c){if(1&f&&(n.Gf(s,5),n.Gf(p,7),n.Gf(l,7)),2&f){let g;n.iGM(g=n.CRH())&&(c.element=g.first),n.iGM(g=n.CRH())&&(c.container=g.first),n.iGM(g=n.CRH())&&(c.itemContainer=g.first)}},inputs:{input:"input",disabled:"disabled",width:"width",title:"title",initialState:"initialState",continuous:"continuous"},outputs:{selectionChanged:"selectionChanged"},features:[n.TTD],decls:10,vars:6,consts:[["fxFlex","","fxLayout","row",3,"keydown.arrowleft","keydown.arrowright"],["class","nv-item-rotary","fxFlex","grow","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center"],["svgIcon","chevron_left",3,"disabled","clicked"],[1,"nv-rotary-data-container"],["container",""],["items",""],["class","font-sub2 font-color-primary nv-rotary-item","fxFlex","none",3,"disabled-opacity","width",4,"ngFor","ngForOf"],["svgIcon","chevron_right",3,"disabled","clicked"],["fxFlex","grow","fxLayoutAlign","start center",1,"nv-item-rotary"],[1,"font-body1","font-color-primary"],["fxFlex","none",1,"font-sub2","font-color-primary","nv-rotary-item"]],template:function(f,c){1&f&&(n.TgZ(0,"div",0),n.NdJ("keydown.arrowleft",function(){return c.goLeft()})("keydown.arrowright",function(){return c.goRight()}),n.YNc(1,t,4,3,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"nv-item-button",3),n.NdJ("clicked",function(){return c.goLeft()}),n.qZA(),n.TgZ(4,"div",4,5),n.TgZ(6,"div",2,6),n.YNc(8,w,3,7,"div",7),n.qZA(),n.qZA(),n.TgZ(9,"nv-item-button",8),n.NdJ("clicked",function(){return c.goRight()}),n.qZA(),n.qZA(),n.qZA()),2&f&&(n.xp6(1),n.Q6J("ngIf",c.title),n.xp6(2),n.Q6J("disabled",c.disabled),n.xp6(1),n.Udp("width",c.width,"px"),n.xp6(4),n.Q6J("ngForOf",c.displayList),n.xp6(1),n.Q6J("disabled",c.disabled))},directives:[m.yH,m.xw,y.O5,m.Wh,T.n,r.i,y.sg],pipes:[a.X$],styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}.nv-rotary-data-container[_ngcontent-%COMP%]{text-align:center;display:block;overflow:hidden}.nv-rotary-data-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:6000px}.nv-item-rotary[_ngcontent-%COMP%]{padding:8px 0}"]}),u})()},24877:(He,de,e)=>{"use strict";e.d(de,{nb:()=>f});var n=e(2316),i=e(24298),D=e(36145),m=e(54364),y=e(89460),T=e(30582);const r=["thumb"],a=["trackContainer"],s=["ticksContainer"];function p(I,G){if(1&I&&(n.TgZ(0,"div"),n._uU(1),n.qZA()),2&I){const x=n.oxw().$implicit;n.xp6(1),n.Oqu(x)}}const l=function(I,G){return{position:"absolute",width:I,left:G}};function t(I,G){if(1&I&&(n.TgZ(0,"div",11),n.TgZ(1,"div"),n._uU(2,"|"),n.qZA(),n.YNc(3,p,2,1,"div",12),n.qZA()),2&I){const x=G.index,E=n.oxw();n.Q6J("ngStyle",n.WLB(2,l,E.tickWidth+"px",E.ticksOffset[x])),n.xp6(3),n.Q6J("ngIf",!E.noTickText)}}const w=(0,D.i$)({passive:!1}),h=-4294967295,o=(0,i.sb)((0,i.Id)(class{constructor(G){this.el=G}}));let f=(()=>{class I extends o{constructor(x,E,P,v,O){super(x),this.renderer=E,this.changeDetector=P,this._ngZone=O,this.min=h,this.max=h,this.value=h,this.valueChange=new n.vpe,this.lastValue=h,this.sliderPercent=0,this.isBeingDestroyed=!1,this.step=1,this.defaultValue=h,this.rangeMin=h,this.rangeMax=h,this.isRangeSlider=!1,this.ticks=[],this.activeTrackHidden=!1,this.onlyThumbs=!1,this.snapToDefault=!1,this.skipSnapWhenKbInput=!1,this.setWidthOnMin=!1,this.noTickText=!1,this.colorLeftActive=!1,this.sliderDimensions=null,this.initialized=!1,this.isSliding=!1,this.trackTicks=[],this.ticksOffset=[],this.tickWidth=0,this.padLeft="0",this.padRight="0",this.pointerMove=C=>{if(this.isSliding){C.preventDefault();const _=g(C);this.setSliderFromPosition(_.x)}},this.pointerUp=C=>{this.isSliding&&(C.preventDefault(),this.removeGlobalEvents(),this.isSliding=!1)},this.pointerDown=C=>{this.disabled||this.isSliding||!c(C)&&0!==C.button||this.runInsideZone(()=>{this.isSliding=!0,C.preventDefault(),this.onmouseenter(),this.bindGlobalEvents(C);const _=g(C);this.setSliderFromPosition(_.x)})},this.tabIndex=parseInt(v,10)||0,this.changeDetector.detach(),this.runOutsizeZone(()=>{const C=this.el.nativeElement;C.addEventListener("mousedown",this.pointerDown,w),C.addEventListener("touchstart",this.pointerDown,w)})}get tabIndexReal(){return this.tabIndex.toString()}onFocus(){this.sliderDimensions=this.getSliderDimensions()}onmouseenter(){this.disabled||this.el.nativeElement.focus()}onclick(x){if(this.disabled)return;this.el.nativeElement.focus(),this.sliderDimensions=this.getSliderDimensions();const E=this.percentToValue(this.positionToPercent(x.clientX)),P=this.minMaxValidator(this.stepValidator(E));this.setValue(P)}onkeydown(x){if(this.disabled)return;if("."===x.key&&this.defaultValue!==h)return x.preventDefault(),x.stopPropagation(),void this.setValue(this.defaultValue);let E;"ArrowLeft"===x.key?E=-this.step:"ArrowRight"===x.key&&(E=this.step),E&&((x.metaKey||x.ctrlKey||x.altKey)&&(E*=4),x.preventDefault(),x.stopPropagation(),this.setValue(this.value+E,this.skipSnapWhenKbInput))}get activeTrackStyle(){return this.colorLeftActive?{left:"0",width:100*this.clamp(this.sliderPercent)+"%"}:this.activeTrackHidden||!this.isRangeSlider?{width:"0"}:{left:100*(this.clamp((this.rangeMin-this.min)/(this.max-this.min))||0)+"%",width:100*(this.clamp((this.rangeMax-this.rangeMin)/(this.max-this.min))||0)+"%"}}get thumbContainerStyle(){let x=this.sliderPercent;return x=this.clamp(x),{left:100*x+"%"}}get ticksStyle(){return{left:0-this.tickWidth/2+"px",width:this.tickWidth*this.trackTicks.length+"px"}}updateValue(){!this.initialized||this.isBeingDestroyed||(this.sanitizeMinMax(),this.sliderDimensions=this.getSliderDimensions(),this.setWidthOnMin&&(this.hostWidth=100-this.min+"%"),this.setValue(this.value),this.changeDetector.detectChanges())}ngOnInit(){this.initialized=!0,this.updateValue(),this.redrawTicks(),this.isBeingDestroyed=!1}ngOnDestroy(){this.isBeingDestroyed=!0;const x=this.el.nativeElement;x.removeEventListener("mousedown",this.pointerDown,w),x.removeEventListener("touchstart",this.pointerDown,w),this.removeGlobalEvents()}ngOnChanges(x){for(const E of Object.keys(x))"rangeMin"===E&&(this.isRangeSlider=!0),this.initialized&&(("min"===E||"max"===E||"ticks"===E||"step"===E)&&this.redrawTicks(),("min"===E||"max"===E||"value"===E||"rangeMin"===E||"rangeMax"===E)&&setTimeout(()=>this.updateValue(),0))}clamp(x){return Math.max(0,Math.min(x||0,1))}getSliderDimensions(){return this.trackContainer?this.trackContainer.nativeElement.getBoundingClientRect():null}positionToPercent(x){return this.sliderDimensions?Math.max(0,Math.min(1,(x-this.sliderDimensions.left)/this.sliderDimensions.width)):0}percentToValue(x){return this.min+x*(this.max-this.min)}valueToPercent(x){return this.min===this.max?1:(x-this.min)/(this.max-this.min)||0}minMaxValidator(x){return Math.max(this.rangeMin,Math.min(this.rangeMax,x))}stepValidator(x){const E=Math.round((x-this.min)/this.step)*this.step+this.min;return Math.round(1e3*E)/1e3}endSetValue(x){this.value=x,this.sliderPercent=this.valueToPercent(this.value),this.initialized&&this.value!==this.lastValue&&(this.lastValue!==h&&(this.valueChange.emit(this.value),this.changeDetector.detectChanges()),this.lastValue=this.value)}setValue(x,E=!1){if(x=this.minMaxValidator(this.stepValidator(x)),this.snapToDefault&&!E&&this.defaultValue!==h&&this.max!==h&&this.min!==h){if(this.defaultValue===this.min||this.defaultValue===this.max)return void this.endSetValue(x);const P=(this.max-this.min)/20;x>this.defaultValue-P&&x<this.defaultValue+P&&(x=this.minMaxValidator(this.stepValidator(this.defaultValue)))}this.endSetValue(x)}setSliderFromPosition(x){this.setValue(this.percentToValue(this.positionToPercent(x)))}sanitizeMinMax(){this.min!==h&&this.max!==h&&(this.rangeMin!==h&&(this.rangeMin=Math.max(this.min,Math.min(this.max,this.rangeMin))),this.rangeMax!==h&&(this.rangeMax=Math.max(this.min,Math.min(this.max,this.rangeMax))),this.isRangeSlider||(this.rangeMin=this.min,this.rangeMax=this.max),this.rangeMin>this.value&&this.setValue(this.rangeMin),this.rangeMax<this.value&&this.setValue(this.rangeMax))}getWidthOfText(x,E){const v=this.renderer.createElement("canvas").getContext("2d");return v.font=E,v.measureText(x).width}redrawTicks(){if(this.min===h||this.max===h||0===this.ticks.length||this.step===h||!this.thumb||!this.ticksContainer)return;const x=Math.floor((this.max-this.min)/this.step);this.trackTicks=[];for(let b=0;b<=x;b++){const B=b*this.step+this.min;this.ticks.indexOf(B)<0||this.trackTicks.push(B)}const E=this.thumb.nativeElement.offsetWidth/2,v=window.getComputedStyle(this.ticksContainer.nativeElement).font||"12px Roboto",C=Math.max(this.getWidthOfText(this.trackTicks[0]+"",v)/2,E);this.padLeft=C+"px";const F=Math.max(this.getWidthOfText(this.trackTicks[this.trackTicks.length-1]+"",v)/2,E);this.padRight=F+"px";const V=this.getSliderDimensions().width-C-F;this.tickWidth=V/(this.trackTicks.length-1);for(let b=0;b<this.trackTicks.length;b++)this.ticksOffset[b]=(this.trackTicks[b]-this.min)/(this.max-this.min)*V+"px";this.changeDetector.detectChanges()}bindGlobalEvents(x){if("undefined"!=typeof document&&document){const E=document.body,P=c(x),O=P?"touchend":"mouseup";E.addEventListener(P?"touchmove":"mousemove",this.pointerMove,w),E.addEventListener(O,this.pointerUp,w),P&&E.addEventListener("touchcancel",this.pointerUp,w)}}removeGlobalEvents(){if("undefined"!=typeof document&&document){const x=document.body;x.removeEventListener("mousemove",this.pointerMove,w),x.removeEventListener("mouseup",this.pointerUp,w),x.removeEventListener("touchmove",this.pointerMove,w),x.removeEventListener("touchend",this.pointerUp,w),x.removeEventListener("touchcancel",this.pointerUp,w)}}runInsideZone(x){this._ngZone?this._ngZone.run(x):x()}runOutsizeZone(x){this._ngZone?this._ngZone.runOutsideAngular(x):x()}}return I.\u0275fac=function(x){return new(x||I)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(n.sBO),n.$8M("tabindex"),n.Y36(n.R0b))},I.\u0275cmp=n.Xpm({type:I,selectors:[["nv-slider"]],viewQuery:function(x,E){if(1&x&&(n.Gf(r,7),n.Gf(a,7),n.Gf(s,7)),2&x){let P;n.iGM(P=n.CRH())&&(E.thumb=P.first),n.iGM(P=n.CRH())&&(E.trackContainer=P.first),n.iGM(P=n.CRH())&&(E.ticksContainer=P.first)}},hostVars:7,hostBindings:function(x,E){1&x&&n.NdJ("focus",function(){return E.onFocus()})("mouseenter",function(){return E.onmouseenter()})("click",function(v){return E.onclick(v)})("keydown",function(v){return E.onkeydown(v)}),2&x&&(n.Ikx("tabIndex",E.tabIndexReal),n.Udp("width",E.hostWidth)("padding-left",E.padLeft)("padding-right",E.padRight))},inputs:{min:"min",max:"max",value:"value",step:"step",defaultValue:"defaultValue",rangeMin:"rangeMin",rangeMax:"rangeMax",ticks:"ticks",activeTrackHidden:"activeTrackHidden",onlyThumbs:"onlyThumbs",snapToDefault:"snapToDefault",skipSnapWhenKbInput:"skipSnapWhenKbInput",setWidthOnMin:"setWidthOnMin",noTickText:"noTickText",colorLeftActive:"colorLeftActive",disabled:"disabled"},outputs:{valueChange:"valueChange"},features:[n.qOj,n.TTD],decls:11,vars:4,consts:[[1,"nv-slider-wrapper"],[1,"nv-track-container"],["trackContainer",""],[1,"nv-track"],[1,"nv-track-fill",3,"ngStyle"],["fxLayout","row","fxLayoutAlign","start start",1,"nv-track-ticks",3,"ngStyle"],["ticksContainer",""],["fxLayout","column","fxLayoutAlign","start center",3,"ngStyle",4,"ngFor","ngForOf"],[1,"nv-thumb-container",3,"ngStyle"],[1,"nv-thumb"],["thumb",""],["fxLayout","column","fxLayoutAlign","start center",3,"ngStyle"],[4,"ngIf"]],template:function(x,E){1&x&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1,2),n._UZ(3,"div",3),n._UZ(4,"div",4),n.TgZ(5,"div",5,6),n.YNc(7,t,4,5,"div",7),n.qZA(),n.qZA(),n.TgZ(8,"div",8),n._UZ(9,"div",9,10),n.qZA(),n.qZA()),2&x&&(n.xp6(4),n.Q6J("ngStyle",E.activeTrackStyle),n.xp6(1),n.Q6J("ngStyle",E.ticksStyle),n.xp6(2),n.Q6J("ngForOf",E.trackTicks),n.xp6(1),n.Q6J("ngStyle",E.thumbContainerStyle))},directives:[m.PC,y.Zl,T.xw,T.Wh,m.sg,m.O5],styles:['[_nghost-%COMP%]{min-height:24px;min-width:14px;position:relative;display:block;cursor:pointer}[_nghost-%COMP%]   *[_ngcontent-%COMP%], [_nghost-%COMP%]   *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]   .nv-slider-wrapper[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .nv-track-container[_ngcontent-%COMP%]{width:100%;position:absolute;top:10px;height:4px}[_nghost-%COMP%]   .nv-track[_ngcontent-%COMP%], [_nghost-%COMP%]   .nv-track-fill[_ngcontent-%COMP%]{position:absolute;left:0;right:0;height:100%;background-color:#393939}[_nghost-%COMP%]   .nv-track-fill[_ngcontent-%COMP%]{background-color:#fff}[_nghost-%COMP%]   .nv-track-ticks[_ngcontent-%COMP%]{position:absolute;height:32px;top:0;font-size:14px;font-weight:normal;line-height:16px;color:#393939;text-align:center}[_nghost-%COMP%]   .nv-thumb-container[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translate(-50%,-50%);border-radius:50%}[_nghost-%COMP%]   .nv-thumb[_ngcontent-%COMP%]{z-index:1;position:absolute;left:-8px;top:4px;box-sizing:border-box;width:16px;height:16px;border:1px solid #000000;background-color:#fff;border-radius:50%}[_nghost-%COMP%]:focus   .nv-thumb[_ngcontent-%COMP%]{background-color:#76b900}.gif-right-bar[_nghost-%COMP%]   .nv-thumb[_ngcontent-%COMP%]{width:0}.gif-right-bar[_nghost-%COMP%]   .nv-thumb[_ngcontent-%COMP%]:before{top:-17px;left:4px;border-bottom:4px solid #76b900;border-right:1px solid #76b900;border-left:1px solid #76b900;border-top:4px solid #76b900}.trim-slider[_nghost-%COMP%]{cursor:default}.trim-slider[_nghost-%COMP%]   .nv-track[_ngcontent-%COMP%], .trim-slider[_nghost-%COMP%]   .nv-track-fill[_ngcontent-%COMP%]{background-color:transparent}.trim-slider[_nghost-%COMP%]   .nv-thumb[_ngcontent-%COMP%]{border:none}.trim-slider[_nghost-%COMP%]   .nv-thumb[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:-5px;height:0;left:3px;box-sizing:border-box;border-bottom:5px solid #393939;border-right:5px solid transparent;border-left:5px solid transparent}.trim-slider[_nghost-%COMP%]:focus   .nv-thumb[_ngcontent-%COMP%]:before{border-bottom:5px solid #76b900}[_nghost-%COMP%]:not([disabled])   .nv-thumb[_ngcontent-%COMP%]{cursor:pointer}[disabled][_nghost-%COMP%]{cursor:default;opacity:.35}[disabled][_nghost-%COMP%]   .nv-thumb[_ngcontent-%COMP%]{background-color:#393939}'],changeDetection:0}),I})();function c(I){return"t"===I.type[0]}function g(I){const G=c(I)?I.touches[0]||I.changedTouches[0]:I;return{x:G.clientX,y:G.clientY}}},94371:(He,de,e)=>{"use strict";e.d(de,{e:()=>E});var n=e(2316),i=e(202),m=e(76491),y=e(89919),T=e(80639),r=e(67202),a=e(2281);const p=["scroller"],l=["labeloverlay"];function t(P,v){if(1&P&&n._UZ(0,"div"),2&P){const O=n.oxw(2);n.Udp("padding-top",O.topBottomPad,"px")("width","100%")}}function w(P,v){if(1&P&&(n.TgZ(0,"div",10),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&P){const O=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,O[0].divider))}}function h(P,v){}const u=function(P,v){return{$implicit:P,scroll:v}};function o(P,v){if(1&P&&(n.TgZ(0,"nv-virtual-grid-item",13),n.YNc(1,h,0,0,"ng-template",14),n.qZA()),2&P){const O=v.$implicit,C=n.oxw(3);n.Q6J("useOutline",C.useFocusOutline)("showFocusAlways",C.showFocusAlways)("item",O)("selectedItemIndex",C.selectedItemIndex)("itemWidth",C.itemWidth)("itemHeight",C.itemHeight)("multiSelectAvailable",C.multiSelect)("multiSelectModeOn",C.multiSelectModeOn),n.xp6(1),n.Q6J("ngTemplateOutlet",C.template)("ngTemplateOutletContext",n.WLB(10,u,O.item,C.scrolling$.asObservable()))}}function f(P,v){if(1&P&&(n.TgZ(0,"div",11),n.YNc(1,o,2,13,"nv-virtual-grid-item",12),n.qZA()),2&P){const O=n.oxw().$implicit,C=n.oxw();n.Q6J("fxLayoutGap",C.marginRight+"px"),n.xp6(1),n.Q6J("ngForOf",O)}}function c(P,v){if(1&P&&n._UZ(0,"div"),2&P){const O=n.oxw(2);n.Udp("padding-bottom",O.topBottomPad,"px")("width","100%")}}function g(P,v){if(1&P&&(n.TgZ(0,"div"),n.YNc(1,t,1,4,"div",6),n.YNc(2,w,3,3,"div",7),n.YNc(3,f,2,2,"div",8),n.YNc(4,c,1,4,"div",9),n.qZA()),2&P){const O=v.$implicit,C=v.last,_=v.first,F=n.oxw();n.Udp("margin-bottom",C?0:F.marginBottom,"px"),n.xp6(1),n.Q6J("ngIf",_),n.xp6(1),n.Q6J("ngIf",O[0].divider),n.xp6(1),n.Q6J("ngIf",!O[0].divider),n.xp6(1),n.Q6J("ngIf",C)}}function I(P,v){if(1&P&&n._UZ(0,"div"),2&P){const O=n.oxw(2);n.Udp("height",O.topBottomPad,"px")}}function G(P,v){if(1&P&&n._UZ(0,"div"),2&P){const O=n.oxw(2);n.Udp("height",O.topBottomPad,"px")}}function x(P,v){if(1&P&&(n.TgZ(0,"div"),n.YNc(1,I,1,2,"div",15),n.TgZ(2,"div",16),n._uU(3),n.ALo(4,"translate"),n.qZA(),n._UZ(5,"div"),n.YNc(6,G,1,2,"div",15),n.qZA()),2&P){const O=v.$implicit,C=v.first,_=v.last;n.xp6(1),n.Q6J("ngIf",C),n.xp6(2),n.Oqu(n.lcZ(4,5,O.text)),n.xp6(2),n.Udp("height",O.contentHeight,"px"),n.xp6(1),n.Q6J("ngIf",_)}}let E=(()=>{class P{constructor(O){this.element=O,this.itemsPerRow=1,this.topIndex=0,this.initialized=!1,this.scrolling$=new m.X(!1),this.maxRows=6,this.marginBottom=0,this.marginRight=0,this.multiSelect=!1,this.useFocusOutline=!0,this.showFocusAlways=!1,this.chunkFileMetadata=!1,this.stickyHeaders=!0,this.topBottomPad=0,this.headerSize=28,this._selectedItem=void 0,this.selectedItemIndex=-1,this.selectedItemChange=new n.vpe,this._multiSelectList=[],this.multiSelectModeOn=!1,this.multiSelectMode=new n.vpe,this.multiSelectList=new n.vpe,this.handleKeyPress=void 0,this.handleKeyPress=(0,i.throttle)(this._handleKeyPress,100)}get selectedItem(){return this._selectedItem}set selectedItem(O){const C=this._selectedItem;if(this._selectedItem=O,this.initialized&&C!==this._selectedItem){const _=this.list.findIndex(F=>F.item===O);_>=0&&(this.setCurrentItem(this.list[_]),this.ensureItemVisible(_))}}set items(O){O&&this.list&&0===O.length&&0===this.list.length||(this.list=O?O.map((C,_)=>(C===this._selectedItem&&(this.selectedItemIndex=_),{index:_,selected:C===this._selectedItem,element:void 0,divider:void 0,item:C})):O,this.refresh())}onkeydown(O){this.handleKeyPress(O)}onFocus(){if(!this.list||this.list.length<=0)return;let O=this.selectedItemIndex;O<0&&(O=0),this.setCurrentItem(this.list[O])}setContent(O,C){this.list=O,this.itemsPerRow=C}setTopIndex(O){this.topIndex=O}setCurrentItem(O){const C=this._multiSelectList.length>0,_=this.getItem(this.selectedItemIndex);if(!C){if(_){if(_.index===O.index)return;_.selected=!1}O&&(O.selected=!0)}this._selectedItem=O.item,this.selectedItemIndex=O.index,this.selectedItemChange.emit(this._selectedItem)}multiSelectClick(O){if(!O)return;if(!this.multiSelectModeOn){const _=this.getItem(this.selectedItemIndex);_&&(_.selected=!1)}this._multiSelectList.includes(O)?((0,i.pull)(this._multiSelectList,O),O.selected=!1):(O.selected=!0,O.element&&(this._selectedItem=O.item,this.selectedItemIndex=O.index),this._multiSelectList.push(O));const C=this.multiSelectModeOn;this.multiSelectModeOn=this._multiSelectList.length>0,C!==this.multiSelectModeOn&&this.multiSelectMode.emit(this.multiSelectModeOn),this.multiSelectList.emit(this._multiSelectList.map(_=>_.item))}cancelMultiSelect(){this._multiSelectList.slice(0).forEach(O=>this.multiSelectClick(O)),this.selectedItem&&(this.selectedItem.selected=!0)}nullTime(O){return O.startOf("day")}getStringForDay(O){const C=this.nullTime(a());if(O.isSame(C,"day"))return"commonLabels.Today";if(C.subtract(1,"days"),O.isSame(C,"day"))return"commonLabels.Yesterday";C.add(1,"days");const _=a().startOf("month").subtract(1,"month");return O.isSameOrAfter(_,"month")?O.isSame(C,"year")?O.format("dddd, MMMM D"):O.format("dddd, LL"):O.isSame(C,"year")?O.format("MMMM"):O.format("MMMM YYYY")}newHeader(O){return{index:-1,selected:!1,element:void 0,divider:O,item:void 0}}isSameRow(O,C){const _=a().startOf("month").subtract(1,"month");return O.isSameOrAfter(_,"month")?O.isSame(C,"day"):O.isSame(C,"month")}pushRow(O,C,_=!1){const F=this.itemHeight+this.marginBottom;return this.rows.push(O),this.itemOffsets.push(C+=F),this.stickyHeaders&&(this.dividers[this.dividers.length-1].contentHeight+=F),C}chunkFiles(){let O=this.nullTime(a()).add(1,"years"),C=[],_=0;this.itemOffsets=[0],this.rows=[],this.dividers=[],this.list.sort((F,V)=>new Date(V.item.date).getTime()-new Date(F.item.date).getTime()),this.list.map((F,V)=>(F.index=V,F)),this.list.forEach((F,V)=>{if(!F.item)return;(0===V||V===this.list.length-1)&&(_+=this.topBottomPad);const B=a(F.item.date);this.isSameRow(B,O)?(C.push(F),C.length>=this.itemsPerRow&&(_=this.pushRow(C,_),C=[])):(C.length>0&&(_=this.pushRow(C,_),C=[]),this.stickyHeaders?(this.dividers.push({text:this.getStringForDay(B),contentHeight:0}),this.rows.push([this.newHeader(" ")])):this.rows.push([this.newHeader(this.getStringForDay(B))]),_+=this.headerSize+this.marginBottom,this.itemOffsets.push(_),O=B,C.push(F))}),C.length>0&&(_=this.pushRow(C,_,!0)),this.rows=this.rows.slice(),this.itemOffsets=this.itemOffsets.slice()}refresh(){if(!this.initialized)return;const O=this.element.nativeElement.offsetWidth;this.itemsPerRow=Math.floor(O/this.itemWidth),this.itemsPerRow*this.itemWidth+(this.itemsPerRow-1)*this.marginRight>O&&(this.itemsPerRow-=1),this.maxRows=Math.floor(this.element.nativeElement.offsetHeight/(this.itemHeight+this.marginBottom)),setTimeout(()=>{if(this.chunkFileMetadata)this.chunkFiles();else{this.rows=(0,i.chunk)(this.list,this.itemsPerRow),this.itemOffsets=[0];let _=0;this.rows.forEach((F,V)=>{_+=this.itemHeight+this.marginBottom,(V===this.rows.length-1||0===V)&&(_+=this.topBottomPad),this.itemOffsets.push(_)})}this.list&&this.list.length>0?(this.selectedItemIndex=this.list.findIndex(_=>_.item===this._selectedItem),!this.selectedItemIndex&&this.list&&this.setCurrentItem(this.list[0])):this.selectedItemIndex=0,setTimeout(()=>this.ensureItemVisible(this.selectedItemIndex),0)},0)}getNewIndexRow(O,C,_){let F=C+O;for(;F>0&&F<this.rows.length&&this.rows[F][0].divider;)F+=O;return F<0?0:F>=this.rows.length?this.list.length-1:(_=Math.min(this.rows[F].length-1,_),this.rows[F][_].index)}_handleKeyPress(O){if(!this.list)return;let C=this.list.findIndex(b=>b.item===this._selectedItem);const _=this.rows.findIndex(b=>b.findIndex(B=>B.item===this._selectedItem)>=0),F=this.rows[_].findIndex(b=>b.item===this._selectedItem);C=-1===C?0:C;const V=this.list.length-1;if("ArrowLeft"===O.key)C-=1;else if("ArrowRight"===O.key)C+=1;else if("ArrowUp"===O.key)C=this.getNewIndexRow(-1,_,F);else if("ArrowDown"===O.key)C=this.getNewIndexRow(1,_,F);else if("Home"===O.key)C=0;else if("End"===O.key)C=V;else if("PageDown"===O.key)C+=this.itemsPerRow*this.maxRows;else if("PageUp"===O.key)C-=this.itemsPerRow*this.maxRows;else if(" "===O.key)return void this.multiSelectClick(this.list[C]);C=Math.max(0,Math.min(C,V)),this.selectedItemIndex!==C&&(this.setCurrentItem(this.list[C]),this.ensureItemVisible(C))}ensureItemVisible(O,C="auto"){if(null==O||O<0||O>=this.list.length)return;const _=this.rows.findIndex(B=>B.findIndex(U=>U.item===this._selectedItem)>=0);this.maxRows=Math.floor(this.element.nativeElement.offsetHeight/(this.itemHeight+this.marginBottom));const b=_-Math.round(this.maxRows/2);if(this.topIndex<b||this.topIndex>_-2*this.maxRows){const U=Math.max(0,Math.min(b,this.rows.length-this.maxRows+1));this.scroller.scrollToOffset(this.itemOffsets[U],C)}}getItem(O=this.selectedItemIndex){return null!=O&&O>=0&&O<this.list.length?this.list[O]:null}ngAfterViewInit(){this.initialized=!0;const O=this.scroller.elementScrolled().pipe((0,T.b)(250),(0,r.h)(!1)),C=this.scroller.elementScrolled().pipe((0,r.h)(!0));this.scrollingSub$=(0,y.T)(C,O).subscribe(_=>this.scrolling$.next(_)),setTimeout(()=>{this.viewportElement.nativeElement.appendChild(this.labelElement.nativeElement),this.refresh()},0)}ngOnDestroy(){this.scrollingSub$&&this.scrollingSub$.unsubscribe()}}return P.\u0275fac=function(O){return new(O||P)(n.Y36(n.SBq))},P.\u0275cmp=n.Xpm({type:P,selectors:[["nv-virtual-grid-container"]],viewQuery:function(O,C){if(1&O&&(n.Gf(p,7),n.Gf(p,7,n.SBq),n.Gf(l,7,n.SBq)),2&O){let _;n.iGM(_=n.CRH())&&(C.scroller=_.first),n.iGM(_=n.CRH())&&(C.viewportElement=_.first),n.iGM(_=n.CRH())&&(C.labelElement=_.first)}},hostBindings:function(O,C){1&O&&n.NdJ("keydown",function(F){return C.onkeydown(F)})("focus",function(){return C.onFocus()})},inputs:{itemHeight:"itemHeight",itemWidth:"itemWidth",marginBottom:"marginBottom",marginRight:"marginRight",multiSelect:"multiSelect",template:"template",useFocusOutline:"useFocusOutline",showFocusAlways:"showFocusAlways",chunkFileMetadata:"chunkFileMetadata",stickyHeaders:"stickyHeaders",topBottomPad:"topBottomPad",selectedItem:"selectedItem",items:"items"},outputs:{selectedItemChange:"selectedItemChange",multiSelectMode:"multiSelectMode",multiSelectList:"multiSelectList"},decls:7,vars:3,consts:[["fxFlex","",1,"scroll-container",3,"itemOffsets","scrolledIndexChange"],["scroller",""],[3,"margin-bottom",4,"cdkVirtualFor","cdkVirtualForOf"],["labeloverlay",""],[1,"labels"],[4,"ngFor","ngForOf"],[3,"paddingTop","width",4,"ngIf"],["class","font-body2 divider-pad",4,"ngIf"],["fxLayout","row",3,"fxLayoutGap",4,"ngIf"],[3,"paddingBottom","width",4,"ngIf"],[1,"font-body2","divider-pad"],["fxLayout","row",3,"fxLayoutGap"],[3,"useOutline","showFocusAlways","item","selectedItemIndex","itemWidth","itemHeight","multiSelectAvailable","multiSelectModeOn",4,"ngFor","ngForOf"],[3,"useOutline","showFocusAlways","item","selectedItemIndex","itemWidth","itemHeight","multiSelectAvailable","multiSelectModeOn"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"height",4,"ngIf"],[1,"font-body2","divider-pad","divider-sticky"]],template:function(O,C){1&O&&(n.TgZ(0,"cdk-virtual-scroll-viewport",0,1),n.NdJ("scrolledIndexChange",function(F){return C.setTopIndex(F)}),n.YNc(2,g,5,6,"div",2),n.qZA(),n.TgZ(3,"div",null,3),n.TgZ(5,"div",4),n.YNc(6,x,7,7,"div",5),n.qZA(),n.qZA()),2&O&&(n.Q6J("itemOffsets",C.itemOffsets),n.xp6(2),n.Q6J("cdkVirtualForOf",C.rows),n.xp6(4),n.Q6J("ngForOf",C.dividers))},styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.scroll-container[_ngcontent-%COMP%]{height:100%}.isLtr[_nghost-%COMP%]   .scroll-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .scroll-container[_ngcontent-%COMP%]{margin-right:-24px}html[dir=ltr][_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{--dummy4: 0;margin-right:-24px}.isRtl[_nghost-%COMP%]   .scroll-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .scroll-container[_ngcontent-%COMP%]{margin-left:-24px}html[dir=rtl][_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{--dummy4: 0;margin-left:-24px}.scroll-container[_ngcontent-%COMP%]   .cdk-virtual-scroll-content-wrapper[_ngcontent-%COMP%]{height:100%}.labels[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;pointer-events:none}.divider-pad[_ngcontent-%COMP%]{padding:8px 0 0;height:20px}.divider-sticky[_ngcontent-%COMP%]{position:sticky;top:0;padding-bottom:8px;background-color:#191919}"]}),P})()},59798:(He,de,e)=>{"use strict";e.d(de,{H:()=>l});var n=e(2316),i=e(94371),D=e(54364),m=e(89460),y=e(30582),T=e(52529);function r(t,w){if(1&t&&n._UZ(0,"div",3),2&t){const h=n.oxw();n.ekj("selected",h.item.index==h.selectedItemIndex)("showFocusAlways",h.showFocusAlways)}}function a(t,w){if(1&t){const h=n.EpF();n.TgZ(0,"div",4),n.TgZ(1,"mat-icon",5),n.NdJ("click",function(o){return n.CHM(h),n.oxw().onMultiSelectClick(o)}),n.qZA(),n.qZA()}if(2&t){const h=n.oxw();n.ekj("checked",h.multiSelectModeOn&&h.item.selected)("multiOn",h.multiSelectModeOn)("multiFocus",h.item.index==h.selectedItemIndex)}}const s=function(t,w){return{"width.px":t,"height.px":w,position:"relative"}},p=["*"];let l=(()=>{class t{constructor(h,u){this.el=h,this.parent=u,this.multiSelectAvailable=!1,this.multiSelectModeOn=!1,this.useOutline=!0,this.selectedItemIndex=-1,this.showFocusAlways=!1}get item(){return this._item}set item(h){this._item=h,this._item.element=this.el}onMouseDown(){this.parent&&this.parent.setCurrentItem(this.item)}onClick(h){this.parent&&this.multiSelectModeOn&&this.parent.multiSelectClick(this.item)}onMultiSelectClick(h){this.parent&&this.parent.multiSelectClick(this.item),h.stopImmediatePropagation(),h.preventDefault()}}return t.\u0275fac=function(h){return new(h||t)(n.Y36(n.SBq),n.Y36(i.e,8))},t.\u0275cmp=n.Xpm({type:t,selectors:[["nv-virtual-grid-item"]],inputs:{itemWidth:"itemWidth",itemHeight:"itemHeight",multiSelectAvailable:"multiSelectAvailable",multiSelectModeOn:"multiSelectModeOn",useOutline:"useOutline",selectedItemIndex:"selectedItemIndex",showFocusAlways:"showFocusAlways",item:"item"},ngContentSelectors:p,decls:4,vars:6,consts:[[3,"ngStyle","mousedown","click"],["class","overlay selected-overlay",3,"selected","showFocusAlways",4,"ngIf"],["class","overlay hover-overlay","fxLayout","row","fxLayoutAlign","end start",3,"checked","multiOn","multiFocus",4,"ngIf"],[1,"overlay","selected-overlay"],["fxLayout","row","fxLayoutAlign","end start",1,"overlay","hover-overlay"],[1,"multi-select-circle",3,"click"]],template:function(h,u){1&h&&(n.F$t(),n.TgZ(0,"div",0),n.NdJ("mousedown",function(){return u.onMouseDown()})("click",function(f){return u.onClick(f)}),n.Hsn(1),n.YNc(2,r,1,4,"div",1),n.YNc(3,a,2,6,"div",2),n.qZA()),2&h&&(n.Q6J("ngStyle",n.WLB(3,s,u.itemWidth,u.itemHeight)),n.xp6(2),n.Q6J("ngIf",u.useOutline),n.xp6(1),n.Q6J("ngIf",u.multiSelectAvailable))},directives:[D.PC,m.Zl,D.O5,y.xw,y.Wh,T.Hw],styles:['.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.overlay[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}:focus[_nghost-%COMP%]   .selected[_ngcontent-%COMP%], :focus   [_nghost-%COMP%]   .selected[_ngcontent-%COMP%], .showFocusAlways.selected[_ngcontent-%COMP%]{background:rgba(0,0,0,.36)}.hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]{color:transparent;width:20px;height:20px;font-size:20px;pointer-events:auto}.isLtr[_nghost-%COMP%]   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]{margin:5px 5px 0 0}html[dir=ltr][_ngcontent-%COMP%]   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]{--dummy: 0;margin:5px 5px 0 0}.isRtl[_nghost-%COMP%]   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]{margin:5px 0 0 5px}html[dir=rtl][_ngcontent-%COMP%]   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]{--dummy: 0;margin:5px 0 0 5px}.hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:before{content:"radio_button_unchecked"}.hover-overlay.checked[_ngcontent-%COMP%]{background:rgba(0,0,0,.24)!important}.hover-overlay.checked[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:before{color:#fff!important;content:"check_circle"!important}.hover-overlay.multiOn[_ngcontent-%COMP%], :focus[_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%], :focus   [_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%]{background:rgba(0,0,0,.12)}.hover-overlay.multiOn[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%], :focus[_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%], :focus   [_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]{color:#ffffffb3}.hover-overlay.multiOn[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:hover:before, .hover-overlay.multiOn[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:focus:before, :focus[_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:hover:before, :focus   [_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:hover:before, :focus[_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:focus:before, :focus   [_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:focus:before, [_nghost-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:hover:before, [_nghost-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:focus:before{color:#fff}']}),t})()},53833:(He,de,e)=>{"use strict";e.d(de,{B:()=>te});var n=e(79441),i=e(81134),D=e(22663),m=e(98636),y=e(85816),T=e(18293),r=e(33927),a=e(6484),s=e(2984),p=e(94377),l=e(2316),t=e(71258),w=e(58283);const h=["image"],u=["video"],o=["previewMeme"];function f(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"nv-item-button",13),l.NdJ("clicked",function(){return l.CHM(k),l.oxw().closePreview()}),l.qZA()}}function c(ie,Q){1&ie&&l._UZ(0,"mat-icon",26)}function g(ie,Q){1&ie&&l._UZ(0,"mat-icon",27)}function I(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"div",21),l.TgZ(1,"button",22),l.NdJ("click",function(){return l.CHM(k),l.oxw(2).navLeft()}),l.YNc(2,c,1,0,"mat-icon",23),l.qZA(),l.TgZ(3,"button",24),l.NdJ("click",function(){return l.CHM(k),l.oxw(2).navRight()}),l.YNc(4,g,1,0,"mat-icon",25),l.qZA(),l.qZA()}if(2&ie){const k=l.oxw(2);l.xp6(2),l.Q6J("ngIf",k.chevronVisible),l.xp6(2),l.Q6J("ngIf",k.chevronVisible)}}function G(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"nv-item-button",32),l.NdJ("clicked",function(){return l.CHM(k),l.oxw(3).editMeme()}),l.qZA()}}function x(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"div",28),l.YNc(1,G,1,0,"nv-item-button",29),l.TgZ(2,"nv-item-button",30),l.NdJ("clicked",function(){return l.CHM(k),l.oxw(2).openInFolder()}),l.qZA(),l.TgZ(3,"nv-item-button",31),l.NdJ("clicked",function(){return l.CHM(k),l.oxw(2).deleteItem()}),l.qZA(),l.qZA()}if(2&ie){const k=l.oxw(2);l.xp6(1),l.Q6J("ngIf",k.showEditControls)}}function E(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"button",36),l.NdJ("click",function(){return l.CHM(k),l.oxw(3).cancelEdit()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}2&ie&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"confirmation.cancel")," "))}function P(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"button",37),l.NdJ("click",function(){return l.CHM(k),l.oxw(3).save()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&ie){const k=l.oxw(3);l.Q6J("disabled",!k.enableSaveButton),l.xp6(1),l.hij(" ",l.lcZ(2,2,"confirmation.save")," ")}}function v(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"button",36),l.NdJ("click",function(){return l.CHM(k),l.oxw(3).previewDone()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}2&ie&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"confirmation.done")," "))}function O(ie,Q){if(1&ie&&(l.TgZ(0,"div",33),l.YNc(1,E,3,3,"button",34),l.YNc(2,P,3,4,"button",35),l.YNc(3,v,3,3,"button",34),l.qZA()),2&ie){const k=l.oxw(2);l.xp6(1),l.Q6J("ngIf",k.memeOn),l.xp6(1),l.Q6J("ngIf",k.memeOn),l.xp6(1),l.Q6J("ngIf",!k.memeOn)}}function C(ie,Q){if(1&ie){const k=l.EpF();l.ynx(0),l.TgZ(1,"div",14),l.NdJ("mouseenter",function(){return l.CHM(k),l.oxw().mouseInPreview(!0)})("mouseleave",function(){return l.CHM(k),l.oxw().mouseInPreview(!1)}),l._UZ(2,"img",15,16),l._UZ(4,"nv-preview-meme",null,17),l.YNc(6,I,5,2,"div",18),l.qZA(),l.YNc(7,x,4,1,"div",19),l.YNc(8,O,4,3,"div",20),l.BQk()}if(2&ie){const k=l.oxw();l.xp6(2),l.Udp("width",k.contentDimensions.width,"px")("height",k.contentDimensions.height,"px"),l.Q6J("src",k.fileSrc,l.LSH),l.xp6(4),l.Q6J("ngIf",!k.memeOn),l.xp6(1),l.Q6J("ngIf",!k.memeOn),l.xp6(1),l.Q6J("ngIf",k.showEditControls)}}function _(ie,Q){1&ie&&l._UZ(0,"mat-icon",26)}function F(ie,Q){1&ie&&l._UZ(0,"mat-icon",58)}function V(ie,Q){1&ie&&l._UZ(0,"mat-progress-spinner",59)}function b(ie,Q){1&ie&&l._UZ(0,"mat-icon",60)}function B(ie,Q){if(1&ie&&(l.TgZ(0,"div",61),l.TgZ(1,"span",62),l._uU(2),l.qZA(),l.qZA()),2&ie){const k=l.oxw(3);l.xp6(2),l.Oqu(k.videoErrorString)}}function U(ie,Q){1&ie&&l._UZ(0,"mat-icon",27)}function A(ie,Q){if(1&ie){const k=l.EpF();l.ynx(0),l.TgZ(1,"div",51),l.NdJ("click",function(){return l.CHM(k),l.oxw(2).toggleMediaPlay()}),l.TgZ(2,"button",52),l.NdJ("click",function(N){l.CHM(k);const q=l.oxw(2);return N.stopPropagation(),q.navLeft()})("keydown",function(N){return N.stopPropagation()}),l.YNc(3,_,1,0,"mat-icon",23),l.qZA(),l.YNc(4,F,1,0,"mat-icon",53),l.YNc(5,V,1,0,"mat-progress-spinner",54),l.YNc(6,b,1,0,"mat-icon",55),l.YNc(7,B,3,1,"div",56),l.TgZ(8,"button",57),l.NdJ("click",function(N){l.CHM(k);const q=l.oxw(2);return N.stopPropagation(),q.navRight()})("keydown",function(N){return N.stopPropagation()}),l.YNc(9,U,1,0,"mat-icon",25),l.qZA(),l.qZA(),l.BQk()}if(2&ie){const k=l.oxw(2);l.xp6(3),l.Q6J("ngIf",k.chevronVisible),l.xp6(1),l.Q6J("ngIf",k.isPaused&&k.useDisplay===k.displayTypes.NORMAL&&!k.sliderMoving),l.xp6(1),l.Q6J("ngIf",k.useDisplay===k.displayTypes.SPINNER),l.xp6(1),l.Q6J("ngIf",k.useDisplay===k.displayTypes.ERROR),l.xp6(1),l.Q6J("ngIf",k.useDisplay===k.displayTypes.ERROR),l.xp6(2),l.Q6J("ngIf",k.chevronVisible)}}function S(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"nv-hig-slider",63),l.NdJ("valueChange",function(N){return l.CHM(k),l.oxw(2).sliderPosition=N})("input",function(N){return l.CHM(k),l.oxw(2).sliderChanged(N)})("mousedown",function(){return l.CHM(k),l.oxw(2).sliderInteraction(!0)})("mouseup",function(){return l.CHM(k),l.oxw(2).sliderInteraction(!1)},!1,l.Jf7),l.qZA()}if(2&ie){const k=l.oxw(2);l.Q6J("step",k.step)("value",k.sliderPosition)("animating",!k.isPaused)}}function Y(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"nv-ranged-slider",64),l.NdJ("valueChange",function(N){return l.CHM(k),l.oxw(2).sliderPosition=N})("leftPositionChange",function(N){return l.CHM(k),l.oxw(2).sliderTrimLeft=N})("rightPositionChange",function(N){return l.CHM(k),l.oxw(2).sliderTrimRight=N})("leftPositionChange",function(N){return l.CHM(k),l.oxw(2).onLeftSliderChange(N)})("rightPositionChange",function(N){return l.CHM(k),l.oxw(2).onRightSliderChange(N)})("valueChange",function(N){return l.CHM(k),l.oxw(2).sliderChanged(N)}),l.qZA()}if(2&ie){const k=l.oxw(2);l.Q6J("value",k.sliderPosition)("leftPosition",k.sliderTrimLeft)("rightPosition",k.sliderTrimRight)("disableTrim",k.disableTrimSliders)}}function se(ie,Q){1&ie&&l._UZ(0,"div",65)}function fe(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"nv-item-button",32),l.NdJ("clicked",function(){return l.CHM(k),l.oxw(3).editMeme()}),l.qZA()}}function $(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"nv-item-button",30),l.NdJ("clicked",function(){return l.CHM(k),l.oxw(3).openInFolder()}),l.qZA()}}function ae(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"nv-item-button",31),l.NdJ("clicked",function(){return l.CHM(k),l.oxw(3).deleteItem()}),l.qZA()}}function me(ie,Q){if(1&ie&&(l.ynx(0),l._UZ(1,"div",66),l.TgZ(2,"div",67),l.YNc(3,fe,1,0,"nv-item-button",29),l.YNc(4,$,1,0,"nv-item-button",68),l.YNc(5,ae,1,0,"nv-item-button",69),l.qZA(),l.BQk()),2&ie){const k=l.oxw(2);l.xp6(3),l.Q6J("ngIf",k.showEditControls),l.xp6(1),l.Q6J("ngIf",!k.showShareButton),l.xp6(1),l.Q6J("ngIf",!k.showShareButton)}}function ye(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"button",36),l.NdJ("click",function(){return l.CHM(k),l.oxw(3).cancelEdit()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}2&ie&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"confirmation.cancel")," "))}function ue(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"button",37),l.NdJ("click",function(){return l.CHM(k),l.oxw(3).save()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&ie){const k=l.oxw(3);l.Q6J("disabled",!k.enableSaveButton),l.xp6(1),l.hij(" ",l.lcZ(2,2,"confirmation.save")," ")}}function X(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"button",36),l.NdJ("click",function(){return l.CHM(k),l.oxw(3).previewDone()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}2&ie&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"confirmation.done")," "))}function j(ie,Q){if(1&ie&&(l.TgZ(0,"div",33),l.YNc(1,ye,3,3,"button",34),l.YNc(2,ue,3,4,"button",35),l.YNc(3,X,3,3,"button",34),l.qZA()),2&ie){const k=l.oxw(2);l.xp6(1),l.Q6J("ngIf",k.memeOn),l.xp6(1),l.Q6J("ngIf",k.memeOn),l.xp6(1),l.Q6J("ngIf",!k.memeOn)}}const K=function(ie,Q){return{"width.px":ie,"height.px":Q}},Z=function(ie,Q){return{"viewer-video-counter-short":ie,"viewer-video-counter-long":Q}};function L(ie,Q){if(1&ie){const k=l.EpF();l.TgZ(0,"div",38),l.TgZ(1,"div",39),l.NdJ("keydown",function(N){return l.CHM(k),l.oxw().processToggleMedia(N)})("mouseenter",function(){return l.CHM(k),l.oxw().mouseInPreview(!0)})("mouseleave",function(){return l.CHM(k),l.oxw().mouseInPreview(!1)}),l.TgZ(2,"video",40,41),l.NdJ("loadeddata",function(){return l.CHM(k),l.oxw().onLoadedData()})("error",function(){return l.CHM(k),l.oxw().loadFromDragNDrop()}),l.qZA(),l._UZ(4,"nv-preview-meme",null,17),l.YNc(6,A,10,6,"ng-container",11),l.qZA(),l.TgZ(7,"div",42),l.TgZ(8,"nv-item-button",43),l.NdJ("clicked",function(){return l.CHM(k),l.oxw().toggleMediaPlay()}),l.qZA(),l.YNc(9,S,1,3,"nv-hig-slider",44),l.YNc(10,Y,1,4,"nv-ranged-slider",45),l.TgZ(11,"div",46),l.TgZ(12,"span",47),l._uU(13),l.qZA(),l.qZA(),l.TgZ(14,"nv-item-button",48),l.NdJ("clicked",function(){return l.CHM(k),l.oxw().muteUnmute()}),l.qZA(),l.TgZ(15,"nv-hig-slider",49),l.NdJ("valueChange",function(N){return l.CHM(k),l.oxw().volume=N})("valueChange",function(){return l.CHM(k),l.oxw().volumeChanged()}),l.qZA(),l.YNc(16,se,1,0,"div",50),l.YNc(17,me,6,3,"ng-container",11),l.qZA(),l.YNc(18,j,4,3,"div",20),l.qZA()}if(2&ie){const k=l.oxw();l.xp6(2),l.Q6J("src",k.fileSrc,l.LSH)("ngStyle",l.WLB(15,K,k.contentDimensions.width,k.contentDimensions.height)),l.xp6(4),l.Q6J("ngIf",!k.memeOn),l.xp6(2),l.Q6J("svgIcon",k.isPaused?"play_arrow":"pause")("tooltip",k.isPaused?"tooltips.Play":"tooltips.Pause"),l.xp6(1),l.Q6J("ngIf",!k.memeOn),l.xp6(1),l.Q6J("ngIf",k.memeOn),l.xp6(1),l.Q6J("ngClass",l.WLB(18,Z,!k.longDuration,k.longDuration)),l.xp6(2),l.Oqu(k.videoTime),l.xp6(1),l.Q6J("svgIcon",0===k.volume?"volume_off":"volume")("tooltip",0===k.volume?"tooltips.Unmute":"tooltips.Mute"),l.xp6(1),l.Q6J("value",k.volume),l.xp6(1),l.Q6J("ngIf",k.memeOn&&k.showEditControls),l.xp6(1),l.Q6J("ngIf",!k.memeOn),l.xp6(1),l.Q6J("ngIf",k.showEditControls)}}let te=(()=>{class ie{constructor(k,oe,N,q,Me,xe,ct,Se,Ge,St,Tt,Te,Je){this.loggingService=k,this.galleryService=oe,this.bridgeService=N,this.renderer=q,this.route=Me,this.telemetry=xe,this.navigationService=ct,this.osService=Se,this.oscDisplayService=Ge,this.igoConfig=St,this.trimService=Tt,this.dialogHelper=Te,this.translateService=Je,this.destroy$=new n.xQ,this.fileMetaData=void 0,this.videoParams={trimmed:!1,startMs:0,durationMs:0,sliderPosition:0,sliderTrimRight:100,sliderTrimLeft:0,start:0,stop:0,volumeChanged:!1,volume:100,mute:!1},this.description="",this.fileName="",this.fullFilename="",this.dimensions="",this.contentDimensions={width:1280,height:720},this.fileSize="",this.volume=100,this.savedVolume=100,this.step=.1,this.sliderTrimLeft=0,this.sliderTrimRight=100,this.sliderPosition=0,this.spaceBetween=4,this.sliderTrimLeftMax=100-this.spaceBetween,this.sliderTrimRightMin=this.spaceBetween,this.trimmed=!1,this.trimCounter=0,this.isPaused=!0,this.playbackTimer=null,this.displayTypes={NORMAL:0,SPINNER:1,ERROR:2},this.useDisplay=this.displayTypes.SPINNER,this.videoErrorString="",this.sliderMoving=!1,this.longDuration=!1,this.hasPlayedVideo=!1,this.storedStreamVolume=1,this.showEditControls=!1,this.showShareButton=!1,this.enableShareButton=!1,this.enableSaveButton=!1,this.disableTrimSliders=!1,this.memeOn=!1,this.memed=!1,this.chevronVisible=!1,this.dialogRef=void 0,this.logger=this.loggingService.getLogger("Gallery/Preview")}set imageRef(k){this.image=k?k.nativeElement:null}set videoRef(k){this.video&&""!==this.video.src&&(!k||this.video!==k.nativeElement)&&(this.video.src="",this.hasPlayedVideo=!1,this.video.load()),k?(this.video=k.nativeElement,this.video.focus()):this.video=null}ngOnInit(){this.logger.info("Initializing Preview Component"),"GFE"===this.igoConfig.branding&&(this.showEditControls=!0),this.showShareButton?this.navigationService.disableCenterPaneCallback():this.navigationService.centerPaneClosedEvent().pipe((0,D.R)(this.destroy$)).subscribe(()=>{this.closePreview()}),this.galleryService.fileDataChangeListener.pipe((0,D.R)(this.destroy$)).subscribe(k=>{this.initializeData(k),this.checkIfDataIsEdited()})}ngOnDestroy(){this.logger.info("Destroying view!"),this.destroy$.next(!0),this.destroy$.complete(),this.navigationService.openCenterPane(!1),this.restoreVolume(),this.playbackTimer&&(clearInterval(this.playbackTimer),this.playbackTimer=null),this.video&&""!==this.video.src&&(this.video.src="",this.video.load())}rampVolumeDown(k=1){!this.igoConfig.GFNCefClient||this.bridgeService.executeCommand(s.Gh.Gfn.Streaming.GetStreamVolume).pipe((0,m.b)(oe=>{this.storedStreamVolume=oe}),(0,y.zg)(()=>this.bridgeService.executeCommand(s.Gh.Gfn.Streaming.SetStreamVolume,{volume:.1,rampDurationSeconds:k})),(0,T.K)(()=>(0,i.of)("Error ramping volume down"))).subscribe()}restoreVolume(k=1){!this.igoConfig.GFNCefClient||this.bridgeService.executeCommand(s.Gh.Gfn.Streaming.SetStreamVolume,{volume:this.storedStreamVolume,rampDurationSeconds:k}).pipe((0,T.K)(()=>(0,i.of)("Error restoring volume"))).subscribe()}formatFilesizeString(k){return k<1e3?k+" KB":k<1e6?(k/1e3).toFixed(2)+" MB":(k/1e6).toFixed(2)+" GB"}initializeData(k){if(k){if(this.logger.info("Loading preview file"),(void 0===this.fileMetaData||k.fullFilename!==this.fileMetaData.fullFilename)&&(this.useDisplay=this.displayTypes.SPINNER),this.video&&!this.isPaused&&this.pauseMedia(),this.fileMetaData=k,this.isVideo=k.file.type===p.A2.Video,this.fileName=k.file.name,k.hlName){const oe=`highlightLabels.${k.hlName}`,N=this.translateService.instant(oe);this.description=k.folder+" - "+(N===oe?k.hlName:N)}else this.description=k.folder;this.fileSize=this.formatFilesizeString(parseInt(k.fileSize,10)),this.fileSrc=a.qR+k.fullFilename,this.fullFilename=k.fullFilename,this.isVideo?this.updateContentDimensions(this.galleryService.mostLikelyResolution):this.galleryService.getImageFileDimensions(k.fullFilename).subscribe(oe=>{oe&&oe.width&&oe.height?(this.dimensions=oe.width+"x"+oe.height,this.galleryService.mostLikelyResolution.width=oe.width,this.galleryService.mostLikelyResolution.height=oe.height,this.updateContentDimensions({width:oe.width,height:oe.height})):this.dimensions="",this.onLoadedMeme()}),this.playbackTimer&&(clearInterval(this.playbackTimer),this.playbackTimer=null),this.restoreVolume(),this.isPaused=!0,this.sliderPosition=this.sliderTrimLeft=0,this.sliderTrimRight=100,this.contextIcon=this.isVideo?"video":"image"}}loadFromDragNDrop(){if(this.logger.info("Loading via dragNdrop"),!this.galleryService.currentFileData)return void this.logger.error("Loading a file after gallery moved on");const k=this.renderer.listen("document","dragover",N=>{N.stopPropagation(),N.preventDefault(),N.dataTransfer.dropEffect="copy"}),oe=this.renderer.listen("document","drop",N=>{if(N.stopPropagation(),N.preventDefault(),!N.dataTransfer.files||!N.dataTransfer.files[0])return void this.logger.error("bad drop, no file list");if(!this.galleryService.currentFileData)return this.logger.error("Loading a file after gallery moved on"),k(),void oe();const q=N.dataTransfer.files[0];if(q.name===this.galleryService.currentFileData.fullFilename){this.logger.info("Loading file");const Me=URL.createObjectURL(q);this.isVideo?(this.video.src=Me,this.video.onerror=xe=>{this.logger.error("A video error occured",xe),this.useDisplay=this.displayTypes.ERROR},this.video.load()):this.image.src=Me}else this.logger.error("bad drag file: "+this.galleryService.currentFileData.fullFilename+"-"+q.name);k(),oe()});this.bridgeService.executeCommand(s.Gh.Share.Osc.DropUrl,{url:this.galleryService.currentFileData.fullFilename}).subscribe()}updateContentDimensions(k){const oe=k.width/k.height,N=this.contentDimensions.width/this.contentDimensions.height;Math.round(1e3*oe)!==Math.round(1e3*N)&&(oe>=Math.round(16/9)?(this.contentDimensions.width=1280,this.contentDimensions.height=Math.round(this.contentDimensions.width/oe)):(this.contentDimensions.height=720,this.contentDimensions.width=Math.round(this.contentDimensions.height*oe)),this.logger.info("Updating content dimensions to ",this.contentDimensions))}onLoadedData(){this.logger.info("Video ready"),this.volume=100*this.video.volume,this.useDisplay=this.displayTypes.NORMAL,this.dimensions=this.video.videoWidth+"x"+this.video.videoHeight,this.galleryService.mostLikelyResolution.width=this.video.videoWidth,this.galleryService.mostLikelyResolution.height=this.video.videoHeight,this.setVideoTime(),this.updateContentDimensions(this.galleryService.mostLikelyResolution),this.onLoadedMeme()}onLoadedMeme(){this.showMeme({filename:this.fullFilename,contentWidth:this.contentDimensions.width,contentHeight:this.contentDimensions.height,duration:this.isVideo?this.video.duration:0,videoWidth:this.isVideo?this.video.videoWidth:this.contentDimensions.width,videoHeight:this.isVideo?this.video.videoHeight:this.contentDimensions.height})}sliderChanged(k){this.video&&this.useDisplay===this.displayTypes.NORMAL&&(k&&k.value&&(this.sliderPosition=k.value),this.sliderPosition!==this.lastPosition&&Math.round(this.sliderPosition/this.step)!==Math.round(this.lastPosition/this.step)&&(this.calculateVideoTime(this.sliderPosition),this.setVideoTime()),this.sliderTrimRight<=this.sliderPosition&&!this.isPaused&&setTimeout(()=>{this.logger.info("Video end reached, pausing"),this.pauseMedia()}))}toggleMediaPlay(){if(this.video)if(this.video.paused){this.hasPlayedVideo||(this.hasPlayedVideo=!0,this.telemetry.sendGalleryPlayedVideo(this.galleryService.currentFileData.fullFilename,this.galleryService.currentFileData.hlName)),Math.ceil(this.video.currentTime/this.video.duration*100/this.step)>=this.sliderTrimRight/this.step&&(this.logger.info("Restarting video..."),this.calculateVideoTime(this.sliderTrimLeft)),this.logger.info("Starting video"),this.rampVolumeDown(),this.video.play(),this.isPaused=!1,this.setEditPlayState();const k=this.getTrimStopPosition();this.playbackTimer=setInterval(()=>{this.video?(this.sliderMoving||(this.sliderPosition=this.lastPosition=this.video.currentTime/this.video.duration*100),this.setVideoTime(),(this.trimmed&&this.video.currentTime>=k||!this.trimmed&&this.video.currentTime>=this.video.duration)&&this.pauseMedia()):this.pauseMedia()})}else this.pauseMedia()}pauseMedia(){this.logger.info("Pausing video"),this.video.pause(),this.isPaused=!0,this.setEditPlayState(),this.restoreVolume(),this.playbackTimer&&(this.logger.info("Clearing Interval on pause"),clearInterval(this.playbackTimer),this.playbackTimer=null)}processToggleMedia(k){this.memeOn||("Enter"===k.key||" "===k.key)&&this.toggleMediaPlay()}setEditPlayState(){this.memeOn&&this.previewMeme&&(this.previewMeme.editMeme(),this.disableTrimSliders=!this.isPaused)}setVideoTime(){this.longDuration=!(this.video.duration<3600);const k=Math.floor(this.video.duration),oe=k*(this.sliderTrimRight-this.sliderTrimLeft)/100,N=Math.floor(oe/3600),q=Math.floor(oe/60-60*N),Me=Math.floor(oe-3600*N-60*q),xe=("00"+N).slice(-2).toString(),ct=("00"+q).slice(-2).toString(),Se=("00"+Me).slice(-2).toString(),Ge=Math.abs(this.sliderPosition-this.sliderTrimLeft)*k/100,St=Math.floor(Ge/3600),Tt=Math.floor(Ge/60-60*St),Te=Math.floor(Ge-3600*St-60*Tt);if(this.longDuration){const Je=xe+":"+ct+":"+Se,xt=("00"+St).slice(-2).toString()+":"+("00"+Tt).slice(-2).toString()+":"+("00"+Te).slice(-2).toString();this.videoTime=xt+" / "+Je}else{const Je=ct+":"+Se,xt=("00"+Tt).slice(-2).toString()+":"+("00"+Te).slice(-2).toString();this.videoTime=xt+" / "+Je}}volumeChanged(){this.video&&(this.logger.info("Volume changed to "+this.volume),this.video.volume=this.volume/100)}processToggleMute(k){("Enter"===k.key||" "===k.key)&&this.muteUnmute()}muteUnmute(){this.video&&(this.volume?(this.logger.info("Muting video"),this.savedVolume=this.volume,this.volume=0):(this.logger.info("UnMuting video"),this.volume=this.savedVolume||50),this.volumeChanged())}sliderInteraction(k){k&&this.video&&!this.isPaused?this.sliderMoving=!0:!k&&this.sliderMoving&&(this.sliderMoving=!1,this.isPaused&&this.toggleMediaPlay())}closePreview(){this.navigationService.navigate([{outlets:{centerPane:null}}],{relativeTo:this.route.parent.parent,skipLocationChange:!0},p.wB.galleryMain)}openInFolder(){let k=this.fullFilename;const oe=this.osService.getDirSeparator(),N=k.lastIndexOf(oe);if(-1!==N&&(k=k.slice(0,N)),""!==k){this.oscDisplayService.closeOSC();const q=this.bridgeService.executeCommand(s.Gh.Common.Applicationinfo.OpenDirectoryBrowser,{name:k}).subscribe(()=>{q.unsubscribe()});this.telemetry.sendGalleryOpenedFileLocation()}}editMeme(){this.logger.info("Editing Open"),!this.memeOn&&!this.isPaused&&this.isVideo&&this.toggleMediaPlay(),this.showEditControls&&this.previewMeme&&(this.memeOn=!0,this.previewMeme.editMeme(),this.checkIfDataIsEdited())}checkIfDataIsEdited(){this.trimmed=0!==this.sliderTrimLeft||100!==this.sliderTrimRight,this.enableSaveButton=this.trimmed||this.memed,this.previewMeme&&this.previewMeme.editStartedEvent().pipe((0,D.R)(this.destroy$)).subscribe(k=>{this.memed=k,this.enableSaveButton=this.trimmed||this.memed})}showMeme(k){this.logger.info("Show Meme"),(this.showEditControls||this.showShareButton)&&this.previewMeme&&setTimeout(()=>{this.memeOn=!1,this.previewMeme.displayMeme(k),this.checkIfDataIsEdited()})}cancelEdit(){this.logger.info("Cancel Editing"),this.memed=this.memeOn=!1,this.previewMeme.cancelMeme(),this.sliderPosition=this.sliderTrimLeft=0,this.sliderTrimRight=100,this.trimmed=!1}previewDone(){this.logger.info("Preview Done"),this.closePreview()}navLeft(){this.galleryService.previewPaneSendEvent(p.T7.BackNav)}navRight(){this.galleryService.previewPaneSendEvent(p.T7.ForwardNav)}deleteItem(){this.galleryService.previewPaneSendEvent(p.T7.DeleteFile)}trim(k,oe){return this.trimService.trim({input:this.fileMetaData.fullFilename,output:k,headTrimMs:this.videoParams.startMs,lengthMs:this.videoParams.durationMs}).pipe((0,y.zg)(()=>(this.logger.info("Trim complete!"),this.trimService.getMetaData(this.fileMetaData.fullFilename))),(0,r.U)(q=>(this.logger.info("Return Data: ",q),oe&&(this.fileMetaData.date=q.date,this.fileMetaData.fileSize=q.fileSizeKB.toString(),this.fileMetaData.duration=q.duration.slice(q.duration.indexOf(":")+1)),this.logger.info("Trim post processing complete!"),this.initializeData(this.fileMetaData),this.checkIfDataIsEdited(),this.useDisplay=this.displayTypes.NORMAL,this.sliderPosition=0,this.calculateVideoTime(this.sliderPosition),this.setVideoTime(),oe&&setTimeout(()=>{this.video.src="",this.video.load(),this.trimCounter++,this.video.src=this.fileSrc+"?"+this.trimCounter.toString(),this.video.load()},10),setTimeout(()=>{this.galleryService.updateAfterFileCreation(this.fileMetaData.folder)},10),!0)))}save(){if(0===this.sliderTrimLeft&&100===this.sliderTrimRight)return this.memed=this.memeOn=!1,void this.previewMeme.editMeme();this.dialogHelper.openAlertDialog({title:"confirmation.TrimVideo",query:"confirmation.ConfirmSaveChanges",queryParam:"",action1:"confirmation.cancel",action2:"confirmation.TrimOriginal",action3:"confirmation.SaveANewClip"},!1).pipe((0,D.R)(this.destroy$),(0,m.b)(oe=>this.dialogRef=oe),(0,y.zg)(oe=>oe.afterClosed())).subscribe(oe=>{if(oe===p.DX.Action2||oe===p.DX.Action3){this.useDisplay=this.displayTypes.SPINNER;const N=oe===p.DX.Action2;this.memed=this.memeOn=!1,this.setVideoTrimParams(!0);let q=this.fileMetaData.fullFilename;N||(q=this.createOutputFilename(this.fileMetaData.fullFilename,this.videoParams.start,this.videoParams.stop)),this.previewMeme.editMeme(N?void 0:q,!0),this.trim(q,N).pipe((0,D.R)(this.destroy$)).subscribe()}})}sliderUpdate(k){setTimeout(()=>{this.sliderPosition=k,this.checkIfDataIsEdited(),this.calculateVideoTime(k),this.setVideoTime()})}calculateVideoTime(k){isNaN(k)&&(k=0);const oe=k/100*this.video.duration;this.video.currentTime=isFinite(oe)?oe:0}onLeftSliderChange(k){this.logger.info("L-SliderChange: ",k),this.sliderUpdate(k)}onRightSliderChange(k){this.logger.info("R-SliderChange: ",k),this.sliderUpdate(k)}setVideoTrimParams(k){const oe=this.sliderTrimLeft*this.video.duration*10,N=oe/1e3,q=(this.sliderTrimRight-this.sliderTrimLeft)*this.video.duration*10;this.videoParams={trimmed:k,startMs:oe,durationMs:q,sliderPosition:this.sliderPosition,sliderTrimRight:this.sliderTrimRight,sliderTrimLeft:this.sliderTrimLeft,start:N,stop:N+q/1e3,volume:this.volume,mute:0===this.volume,volumeChanged:100!==this.volume},this.logger.info("Video Parameters for Trim: ",this.videoParams)}getTrimStopPosition(){return(this.sliderTrimLeft*this.video.duration*10+(this.sliderTrimRight-this.sliderTrimLeft)*this.video.duration*10)/1e3}createOutputFilename(k,oe,N){let q="";const Me=k.lastIndexOf(".");return Me>=0&&(q=k.slice(0,Me)),q+="-"+Math.floor(oe)+"-"+Math.floor(N)+"-"+Date.now()+".mp4",q}mouseInPreview(k){this.chevronVisible=k}}return ie.\u0275fac=function(k){return new(k||ie)(l.Y36(a.ed),l.Y36(p.rj),l.Y36(a.dF),l.Y36(l.Qsj),l.Y36(t.gz),l.Y36(p.l),l.Y36(p.f5),l.Y36(p.HY),l.Y36(p.vU),l.Y36(p.gs),l.Y36(p.Sp),l.Y36(p.Mb),l.Y36(w.sK))},ie.\u0275cmp=l.Xpm({type:ie,selectors:[["igo-preview"]],viewQuery:function(k,oe){if(1&k&&(l.Gf(h,5),l.Gf(u,5),l.Gf(o,5)),2&k){let N;l.iGM(N=l.CRH())&&(oe.imageRef=N.first),l.iGM(N=l.CRH())&&(oe.videoRef=N.first),l.iGM(N=l.CRH())&&(oe.previewMeme=N.first)}},decls:18,vars:8,consts:[["fxLayout","row","fxFill","","fxLayoutAlign","center center",1,"right-half"],["fxLayout","column","fxLayoutAlign","start start","cdkTrapFocus","",1,"center-pane","mat-elevation-z16"],["fxLayout","column","fxLayoutAlign","start stretch",1,"infopanel"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","none","fxLayout","row","fxLayoutAlign","center center",1,"nv-item-icon"],[3,"svgIcon"],["fxFlex","grow",1,"preview-info-title","font-body2"],["svgIcon","close",3,"clicked",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","24px",1,"info-subtext"],["fxFlex","",1,"font-body2","disabled-opacity"],["fxFlex","none",1,"font-body2","disabled-opacity"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start",4,"ngIf"],["svgIcon","close",3,"clicked"],[1,"preview-container",3,"mouseenter","mouseleave"],["alt","","tabIndex","-1",1,"preview-content",3,"src"],["image",""],["previewMeme",""],["class","navigation-buttons","fxLayout","row","fxLayoutAlign","space-between center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px","class","viewer-media-toolbar",4,"ngIf"],["class","viewer-bottom-toolbar","fxFlexFill","","fxLayout","row","fxLayoutAlign","end end",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"navigation-buttons"],["fxFlex","none","mat-button","",1,"complex-button","button-left",3,"click"],["svgIcon","chevron_left","class","nav-button",4,"ngIf"],["fxFlex","none","mat-button","",1,"complex-button","button-right",3,"click"],["svgIcon","chevron_right","class","nav-button",4,"ngIf"],["svgIcon","chevron_left",1,"nav-button"],["svgIcon","chevron_right",1,"nav-button"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"viewer-media-toolbar"],["fxFlex","none","svgIcon","edit","tooltip","tooltips.Edit",3,"clicked",4,"ngIf"],["fxFlex","none","svgIcon","folder_open","tooltip","tooltips.OpenLocation",3,"clicked"],["fxFlex","none","svgIcon","delete_forever","tooltip","tooltips.Remove",3,"clicked"],["fxFlex","none","svgIcon","edit","tooltip","tooltips.Edit",3,"clicked"],["fxFlexFill","","fxLayout","row","fxLayoutAlign","end end",1,"viewer-bottom-toolbar"],["mat-button","","class","font-button2 hig-button",3,"click",4,"ngIf"],["mat-button","","class","font-button2 hig-button",3,"disabled","click",4,"ngIf"],["mat-button","",1,"font-button2","hig-button",3,"click"],["mat-button","",1,"font-button2","hig-button",3,"disabled","click"],["fxLayout","column","fxLayoutAlign","start start"],[1,"preview-container",3,"keydown","mouseenter","mouseleave"],["type","video/mp4","tabIndex","-1",1,"preview-content",3,"src","ngStyle","loadeddata","error"],["video",""],["dir","ltr","fxFlexFill","","fxLayout","row","fxLayoutAlign","start center",1,"viewer-media-toolbar"],["fxFlex","none",1,"viewer-playpause-button",3,"svgIcon","tooltip","clicked"],["fxFlex","grow","min","0","max","100",3,"step","value","animating","valueChange","input","mousedown","mouseup",4,"ngIf"],["fxFlex","grow",3,"value","leftPosition","rightPosition","disableTrim","valueChange","leftPositionChange","rightPositionChange",4,"ngIf"],["fxLayout","","fxLayoutAlign","center center",3,"ngClass"],[1,"font-body2"],["fxFlex","none",1,"viewer-video-volume-button",3,"svgIcon","tooltip","clicked"],["min","0","max","100",1,"viewer-video-volume-slider",3,"value","valueChange"],["fxFlex","none","class","nv-horizontal-gap-24",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"video-overlay-button",3,"click"],["fxFlex","none","mat-button","",1,"complex-button","button-left",3,"click","keydown"],["svgIcon","play_arrow","class","icon-preview video-overlay-button-icon circle-play",4,"ngIf"],["id","progressIndicator","class","md-accent","mode","indeterminate",4,"ngIf"],["svgIcon","alert_circle","class","icon-normal icon48 video-moment-error",4,"ngIf"],["class","video-box-error",4,"ngIf"],["fxFlex","none","mat-button","",1,"complex-button","button-right",3,"click","keydown"],["svgIcon","play_arrow",1,"icon-preview","video-overlay-button-icon","circle-play"],["id","progressIndicator","mode","indeterminate",1,"md-accent"],["svgIcon","alert_circle",1,"icon-normal","icon48","video-moment-error"],[1,"video-box-error"],[1,"video-text-error","font-body1"],["fxFlex","grow","min","0","max","100",3,"step","value","animating","valueChange","input","mousedown","mouseup"],["fxFlex","grow",3,"value","leftPosition","rightPosition","disableTrim","valueChange","leftPositionChange","rightPositionChange"],["fxFlex","none",1,"nv-horizontal-gap-24"],["fxFlex","none",1,"nv-horizontal-gap-32"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px"],["fxFlex","none","svgIcon","folder_open","tooltip","tooltips.OpenLocation",3,"clicked",4,"ngIf"],["fxFlex","none","svgIcon","delete_forever","tooltip","tooltips.Remove",3,"clicked",4,"ngIf"]],template:function(k,oe){1&k&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l._UZ(5,"mat-icon",5),l.qZA(),l.TgZ(6,"div",6),l._uU(7),l.qZA(),l.YNc(8,f,1,0,"nv-item-button",7),l.qZA(),l.TgZ(9,"div",8),l.TgZ(10,"span",9),l._uU(11),l.qZA(),l.TgZ(12,"span",10),l._uU(13),l.qZA(),l.TgZ(14,"span",10),l._uU(15),l.qZA(),l.qZA(),l.qZA(),l.YNc(16,C,9,8,"ng-container",11),l.YNc(17,L,19,21,"div",12),l.qZA(),l.qZA()),2&k&&(l.xp6(5),l.Q6J("svgIcon",oe.contextIcon),l.xp6(2),l.Oqu(oe.description),l.xp6(1),l.Q6J("ngIf",!oe.showShareButton),l.xp6(3),l.Oqu(oe.fileName),l.xp6(2),l.Oqu(oe.dimensions),l.xp6(2),l.Oqu(oe.fileSize),l.xp6(1),l.Q6J("ngIf",!oe.isVideo),l.xp6(1),l.Q6J("ngIf",oe.isVideo))},styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.isLtr[_nghost-%COMP%]   .right-half[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .right-half[_ngcontent-%COMP%]{padding-left:48px}html[dir=ltr][_ngcontent-%COMP%]   .right-half[_ngcontent-%COMP%]{--dummy1: 0;padding-left:48px}.isRtl[_nghost-%COMP%]   .right-half[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .right-half[_ngcontent-%COMP%]{padding-right:48px}html[dir=rtl][_ngcontent-%COMP%]   .right-half[_ngcontent-%COMP%]{--dummy1: 0;padding-right:48px}.center-pane[_ngcontent-%COMP%]{min-width:768px;max-width:1328px;min-height:656px;max-height:960px;display:inline-block;background:#191919}.infopanel[_ngcontent-%COMP%]{margin:16px 16px 0;width:calc(100% - 32px)}.info-subtext[_ngcontent-%COMP%]{margin:0 8px}.preview-content[_ngcontent-%COMP%]{max-width:1280px;min-width:960px;max-height:720px;min-height:536px;margin:24px 24px 0;object-fit:contain!important;transition:width .15s ease-out,height .15s ease-out}.preview-container[_ngcontent-%COMP%]{position:relative}.navigation-buttons[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;margin:24px 24px 0}.video-overlay-button[_ngcontent-%COMP%]{position:absolute;top:24px;left:24px;right:24px;bottom:4px;opacity:.95}.video-overlay-button-icon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px;padding:16px}.circle-play[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background-color:#191919}.isLtr[_nghost-%COMP%]   .button-left[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .button-left[_ngcontent-%COMP%]{margin-left:16px}html[dir=ltr][_ngcontent-%COMP%]   .button-left[_ngcontent-%COMP%]{--dummy3: 0;margin-left:16px}.isRtl[_nghost-%COMP%]   .button-left[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .button-left[_ngcontent-%COMP%]{margin-right:16px}html[dir=rtl][_ngcontent-%COMP%]   .button-left[_ngcontent-%COMP%]{--dummy3: 0;margin-right:16px}.isLtr[_nghost-%COMP%]   .button-right[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .button-right[_ngcontent-%COMP%]{margin-right:16px}html[dir=ltr][_ngcontent-%COMP%]   .button-right[_ngcontent-%COMP%]{--dummy4: 0;margin-right:16px}.isRtl[_nghost-%COMP%]   .button-right[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .button-right[_ngcontent-%COMP%]{margin-left:16px}html[dir=rtl][_ngcontent-%COMP%]   .button-right[_ngcontent-%COMP%]{--dummy4: 0;margin-left:16px}.icon48[_ngcontent-%COMP%]{width:48px;height:48px;font-size:48px}.nav-button[_ngcontent-%COMP%]{color:#ffffffb3;padding:6px;font-size:32px;width:36px;height:36px;border-radius:50%;background-color:#191919}.video-moment-error[_ngcontent-%COMP%]{position:absolute;text-align:center;vertical-align:middle}.video-box-error[_ngcontent-%COMP%]{margin-top:80px;text-align:center;display:table}.video-box-error[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle!important}.viewer-media-toolbar[_ngcontent-%COMP%]{width:100%;max-height:calc(36px + 32px);padding:16px 24px}.viewer-bottom-toolbar[_ngcontent-%COMP%]{width:100%;height:40px;padding:0 8px 8px 24px}.viewer-playpause-button[_ngcontent-%COMP%]{margin:0 8px 0 0}.viewer-video-counter-short[_ngcontent-%COMP%]{min-width:100px;margin:0 0 0 16px}.viewer-video-counter-long[_ngcontent-%COMP%]{min-width:130px;margin:0 0 0 16px}.viewer-video-volume-slider[_ngcontent-%COMP%]{min-width:80px}.viewer-video-volume-button[_ngcontent-%COMP%]{margin:0 0 0 16px}"]}),ie})()},38060:(He,de,e)=>{"use strict";e.d(de,{k:()=>p});var n=e(2316),i=e(97175),D=e(71258),m=e(79441),y=e(80226),T=e(22663),r=e(6484),a=e(22573);const s=["content"];let p=(()=>{class l{constructor(w,h,u){this.spatialNavigationService=h,this.router=u,this.hideSidebar=!1,this.isRTLLayout=!1,this.destroy$=new m.xQ,this.sideBarVisible$=new y.t(1),this.isRTLLayout=w.isRTLLayoutEnabled}setHideSidebar(w){this.hideSidebar=w,this.hideSidebar||this.sideBarVisible$.next()}getHideSidebar(){return this.hideSidebar}ngOnInit(){this.setHideSidebar(!1)}ngAfterViewInit(){this.spatialNavigationService.enabled&&(this.sideBarVisible$.pipe((0,T.R)(this.destroy$)).subscribe(()=>{this.spatialNavigationService.focusFirstChild(this.content.nativeElement)}),this.router.events.pipe((0,T.R)(this.destroy$)).subscribe(w=>{if(w instanceof D.m2){const h=Array.from(this.content.nativeElement.children).reverse().find(u=>u instanceof HTMLElement&&u.tagName.includes("IGO-"));h instanceof HTMLElement&&this.spatialNavigationService.focusFirstChild(h)}}))}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}prepareRoute(w){return!this.isRTLLayout&&w&&w.activatedRouteData&&w.activatedRouteData.level}prepareRouteRtl(w){return this.isRTLLayout&&w&&w.activatedRouteData&&w.activatedRouteData.level}}return l.\u0275fac=function(w){return new(w||l)(n.Y36(r.OL),n.Y36(a.jr),n.Y36(D.F0))},l.\u0275cmp=n.Xpm({type:l,selectors:[["nv-sidebar"]],viewQuery:function(w,h){if(1&w&&n.Gf(s,5,n.SBq),2&w){let u;n.iGM(u=n.CRH())&&(h.content=u.first)}},decls:8,vars:4,consts:[["fxLayout","row","fxFill",""],["fxLayout","column",1,"sidebar"],["fxFlex","","fxLayout","column","nvSpatialNavigationContainer","","containFocus","false","captureAndRestore","false","captureFocusForChild","true",1,"sidebar-content"],["content",""],["outlet","outlet"],["name","centerPane"]],template:function(w,h){if(1&w&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"nv-app-bar"),n.TgZ(3,"div",2,3),n._UZ(5,"router-outlet",null,4),n.qZA(),n.qZA(),n._UZ(7,"router-outlet",5),n.qZA()),2&w){const u=n.MAs(6);n.xp6(1),n.Udp("display",h.getHideSidebar()?"none":"inherit"),n.xp6(2),n.Q6J("@slideFadeAnimation",h.prepareRoute(u))("@slideFadeAnimationRtl",h.prepareRouteRtl(u))}},styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[_nghost-%COMP%]{pointer-events:auto;position:absolute;width:100%;height:100%}.sidebar[_ngcontent-%COMP%]{display:inline-block;height:100%;width:496px;min-width:496px;box-shadow:2px 0 8px 1px #000000bf}.sidebar-content[_ngcontent-%COMP%]{background:#191919!important;overflow:hidden;position:relative}"],data:{animation:[(0,i.X$)("slideFadeAnimation",[(0,i.eR)("void => 0, 0 => void",[]),(0,i.eR)(":increment",[(0,i.IO)(":leave",[(0,i.oB)({opacity:1})]),(0,i.IO)(":enter",[(0,i.oB)({opacity:1,left:"-100%","background-color":"inherit","z-index":999,"box-shadow":"2px 0 8px 1px rgba(0, 0, 0, 0.75)"}),(0,i.jt)("300ms cubic-bezier(0.0, 0.0, 0.2, 1)",(0,i.oB)({left:"0"}))]),(0,i.IO)(":leave",[(0,i.oB)({opacity:"0"})]),(0,i.IO)(":enter",[(0,i.oB)({"background-color":"unset","z-index":"unset","box-shadow":"unset"})])]),(0,i.eR)(":decrement",[(0,i.IO)(":leave",[(0,i.oB)({opacity:1,left:"0","background-color":"inherit","z-index":999,"box-shadow":"2px 0 8px 1px rgba(0, 0, 0, 0.75)"}),(0,i.jt)("300ms cubic-bezier(0.4, 0.0, 1, 1)",(0,i.oB)({left:"-100%"})),(0,i.oB)({"background-color":"unset"})],{optional:!0})])]),(0,i.X$)("slideFadeAnimationRtl",[(0,i.eR)("void => 0, 0 => void",[]),(0,i.eR)(":increment",[(0,i.IO)(":leave",[(0,i.oB)({opacity:1})]),(0,i.IO)(":enter",[(0,i.oB)({opacity:1,right:"-100%","background-color":"inherit","z-index":999,"box-shadow":"2px 0 8px 1px rgba(0, 0, 0, 0.75)"}),(0,i.jt)("300ms cubic-bezier(0.0, 0.0, 0.2, 1)",(0,i.oB)({right:"0"}))]),(0,i.IO)(":leave",[(0,i.oB)({opacity:"0"})]),(0,i.IO)(":enter",[(0,i.oB)({"background-color":"unset","z-index":"unset","box-shadow":"unset"})])]),(0,i.eR)(":decrement",[(0,i.IO)(":leave",[(0,i.oB)({opacity:1,right:"0","background-color":"inherit","z-index":999,"box-shadow":"2px 0 8px 1px rgba(0, 0, 0, 0.75)"}),(0,i.jt)("300ms cubic-bezier(0.4, 0.0, 1, 1)",(0,i.oB)({right:"-100%"})),(0,i.oB)({"background-color":"unset"})],{optional:!0})])])]}}),l})()},78819:(He,de,e)=>{"use strict";e.d(de,{i:()=>D});var n=e(20657),i=e(2316);let D=(()=>{class m{constructor(T){this.el=T,this._disabled=!1}get disabled(){return this._disabled}set disabled(T){this._disabled=(0,n.Ig)(T),this._disabled?this.el.nativeElement.setAttribute("disabled",""):this.el.nativeElement.removeAttribute("disabled")}}return m.\u0275fac=function(T){return new(T||m)(i.Y36(i.SBq))},m.\u0275dir=i.lG2({type:m,selectors:[["disabled"],["","disabled",""]],inputs:{disabled:"disabled"}}),m})()},36914:(He,de,e)=>{"use strict";e.d(de,{X:()=>i});var n=e(2316);let i=(()=>{class D{constructor(y){this.element=y,this.focusEnabled=!0}onmouseenter(){!1!==this.focusEnabled&&this.element.nativeElement.focus()}onmouseleave(){!1!==this.focusEnabled&&this.element.nativeElement.blur()}}return D.\u0275fac=function(y){return new(y||D)(n.Y36(n.SBq))},D.\u0275dir=n.lG2({type:D,selectors:[["","nvHoverFocus",""]],hostBindings:function(y,T){1&y&&n.NdJ("mouseenter",function(){return T.onmouseenter()})("mouseleave",function(){return T.onmouseleave()})},inputs:{focusEnabled:["nvHoverFocus","focusEnabled"]}}),D})()},44211:(He,de,e)=>{"use strict";e.d(de,{LD:()=>y,BP:()=>p.B,k7:()=>i.k}),e(25816);var i=e(38060),D=e(2316),m=e(71258);let y=(()=>{class w{constructor(){}ngOnInit(){}}return w.\u0275fac=function(u){return new(u||w)},w.\u0275cmp=D.Xpm({type:w,selectors:[["nv-center-pane"]],decls:1,vars:0,template:function(u,o){1&u&&D._UZ(0,"router-outlet")},directives:[m.lC],encapsulation:2}),w})();e(85136),e(24877),e(4597),e(83733);var p=e(53833);e(94371),e(88106)},25816:(He,de,e)=>{"use strict";e.d(de,{m:()=>Q});var n=e(54364),i=e(71258),D=e(66660),m=e(51),y=e(22573),T=e(38060),r=e(3794),a=e(2316),s=e(24877),p=e(78819);let l=(()=>{class k{constructor(){this._leftPosition=0,this.leftPositionChange=new a.vpe,this._rightPosition=100,this.rightPositionChange=new a.vpe,this.valueChange=new a.vpe,this._value=0,this.step=1,this.disabled=!1,this.disableTrim=!1,this.spaceBetween=4,this.leftMax=100-this.spaceBetween,this.rightMin=this.spaceBetween}get leftPosition(){return this._leftPosition}set leftPosition(N){this._leftPosition!==N&&(this._leftPosition=N,this.trimChanged(),this.leftPositionChange.emit(this._leftPosition))}get rightPosition(){return this._rightPosition}set rightPosition(N){this._rightPosition!==N&&(this._rightPosition=N,this.trimChanged(),this.rightPositionChange.emit(this._rightPosition))}get value(){return this._value}set value(N){N!==this._value&&(this._value=N,this.valueChange.emit(this._value))}trimChanged(){this.leftMax=this.rightPosition-this.spaceBetween,this.rightMin=this.leftPosition+this.spaceBetween}}return k.\u0275fac=function(N){return new(N||k)},k.\u0275cmp=a.Xpm({type:k,selectors:[["nv-ranged-slider"]],inputs:{leftPosition:"leftPosition",rightPosition:"rightPosition",value:"value",step:"step",disabled:"disabled",disableTrim:"disableTrim"},outputs:{leftPositionChange:"leftPositionChange",rightPositionChange:"rightPositionChange",valueChange:"valueChange"},decls:5,vars:22,consts:[[1,"ranged-slider-padding"],[1,"ranged-slider-wrapper"],[3,"disabled","min","max","step","value","rangeMin","rangeMax","valueChange"],[1,"trim-slider","left-slider",3,"disabled","onlyThumbs","min","max","step","rangeMin","rangeMax","value","valueChange"],[1,"trim-slider","right-slider",3,"setWidthOnMin","disabled","onlyThumbs","min","max","step","value","valueChange"]],template:function(N,q){1&N&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"nv-slider",2),a.NdJ("valueChange",function(xe){return q.value=xe}),a.qZA(),a.TgZ(3,"nv-slider",3),a.NdJ("valueChange",function(xe){return q.leftPosition=xe})("valueChange",function(){return q.trimChanged()}),a.qZA(),a.TgZ(4,"nv-slider",4),a.NdJ("valueChange",function(xe){return q.rightPosition=xe})("valueChange",function(){return q.trimChanged()}),a.qZA(),a.qZA(),a.qZA()),2&N&&(a.xp6(2),a.Q6J("disabled",q.disabled)("min",0)("max",100)("step",q.step)("value",q.value)("rangeMin",q.leftPosition)("rangeMax",q.rightPosition),a.xp6(1),a.Q6J("disabled",q.disableTrim)("onlyThumbs",!0)("min",0)("max",100)("step",q.step)("rangeMin",0)("rangeMax",q.leftMax)("value",q.leftPosition),a.xp6(1),a.Q6J("setWidthOnMin",!0)("disabled",q.disableTrim)("onlyThumbs",!0)("min",q.rightMin)("max",100)("step",q.step)("value",q.rightPosition))},directives:[s.nb,p.i],styles:[".ranged-slider-padding[_ngcontent-%COMP%]{padding:0 5px}.ranged-slider-wrapper[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;position:relative}.ranged-slider-wrapper[_ngcontent-%COMP%]   nv-slider[_ngcontent-%COMP%]{padding:0!important}.ranged-slider-wrapper[_ngcontent-%COMP%]   .left-slider[_ngcontent-%COMP%], .ranged-slider-wrapper[_ngcontent-%COMP%]   .right-slider[_ngcontent-%COMP%]{position:absolute;top:20px;width:100%}.ranged-slider-wrapper[_ngcontent-%COMP%]   .left-slider[_ngcontent-%COMP%]{left:0}.ranged-slider-wrapper[_ngcontent-%COMP%]   .right-slider[_ngcontent-%COMP%]{min-width:14px;right:0}"]}),k})();var t=e(94371),w=e(59798),h=e(6484),u=e(94377),o=e(79441),f=e(22663),c=e(30582),g=e(89460),I=e(9442);const G=["memeTopString"],x=["memeBottomString"],E=["memeTopSpan"],P=["memeBottomSpan"],v=function(k){return{top:k}};function O(k,oe){if(1&k&&(a.TgZ(0,"div",2),a.TgZ(1,"div",3,4),a.TgZ(3,"span",null,5),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"div",6,7),a.TgZ(8,"span",null,8),a._uU(10),a.qZA(),a.qZA(),a.qZA()),2&k){const N=a.oxw();a.xp6(1),a.Q6J("ngStyle",a.VKq(4,v,N.topOffset)),a.xp6(4),a.Oqu(N.upperMeme),a.xp6(1),a.Q6J("ngStyle",a.VKq(6,v,N.bottomOffset)),a.xp6(4),a.Oqu(N.lowerMeme)}}function C(k,oe){if(1&k){const N=a.EpF();a.TgZ(0,"div",9),a.TgZ(1,"div",10),a.TgZ(2,"nv-input",11),a.NdJ("textChange",function(Me){return a.CHM(N),a.oxw().upperMeme=Me})("stringChange",function(Me){return a.CHM(N),a.oxw().upperMemeChanged(Me)}),a.qZA(),a.TgZ(3,"nv-input",11),a.NdJ("textChange",function(Me){return a.CHM(N),a.oxw().lowerMeme=Me})("stringChange",function(Me){return a.CHM(N),a.oxw().lowerMemeChanged(Me)}),a.qZA(),a.qZA(),a.qZA()}if(2&k){const N=a.oxw();a.xp6(2),a.Q6J("text",N.upperMeme)("placeholderText",N.upperPlaceHolder)("disabled",!1)("textMaxLength",N.topMeme.maxLength),a.xp6(1),a.Q6J("text",N.lowerMeme)("placeholderText",N.lowerPlaceHolder)("disabled",!1)("textMaxLength",N.bottomMeme.maxLength)}}let V=(()=>{class k{constructor(N,q,Me){this.loggingService=N,this.renderer=q,this.memeService=Me,this.destroy$=new o.xQ,this.memeData={filename:"",duration:0,videoWidth:0,videoHeight:0,contentWidth:0,contentHeight:0},this.memeStringsOnOpenUpper="",this.memeStringsOnOpenLower="",this.memeChanged=!1,this.memeOn=!1,this.memesValid=!1,this.DefaultMemeMaxLength=80,this.upperMeme="",this.lowerMeme="",this.upperPlaceHolder={text:"gallery.TopTextHere",arg:""},this.lowerPlaceHolder={text:"gallery.BottomTextHere",arg:""},this.topOffset="",this.bottomOffset="",this.maxFontSizeUI=65,this.minFontSizeUI=40,this.topOffsetDefault=0,this.bottomOffsetDefault=640,this.totalLRMargin=80,this.usableWidth=0,this.memeColor="white",this.strokeColor="black",this.topMeme=void 0,this.bottomMeme=void 0,this.editStartedEvent$=new o.xQ,this.logger=this.loggingService.getLogger("Gallery/Preview-Meme")}editStartedEvent(){return this.editStartedEvent$.asObservable()}ngOnInit(){this.logger.info("Initializing Preview-Meme Component")}ngOnDestroy(){this.logger.info("Destroying view!"),this.destroy$.next(!0),this.destroy$.complete()}ngAfterViewInit(){this.topMeme={string:this.upperMeme,fontSize:this.maxFontSizeUI,previousWidth:0,maxLength:this.DefaultMemeMaxLength,id:this.upperString},this.bottomMeme={string:this.lowerMeme,fontSize:this.maxFontSizeUI,previousWidth:0,maxLength:this.DefaultMemeMaxLength,id:this.lowerString}}editMeme(N,q){this.memeOn=!this.memeOn,this.memeOn?this.setupMemeUI():(this.memeChanged||N)&&(q?this.memeService.queueToUpdateMeme(N||this.memeData.filename,this.topMeme.string,this.bottomMeme.string):this.saveMeme(this.memeData.filename))}share(N,q){this.destination=N,this.metaData=q,this.memesValid?this.processMeme(q.file.type===u.A2.Image):this.processGIF()}displayMeme(N){this.memeOn=!1,this.memeData=N,this.setupMemeUI()}cancelMeme(){this.memeOn=!1,this.topMeme.string=this.upperMeme=this.memeStringsOnOpenUpper,this.bottomMeme.string=this.lowerMeme=this.memeStringsOnOpenLower,this.setMemeDataTop(),this.setMemeDataBottom(),this.checkMemeValidity()}upperMemeChanged(N){this.logger.info("Upper Meme changed: ",N),this.topMeme.string=this.upperMeme=N,this.setMemeDataTop(),this.checkMemeValidity(),this.editingStarted()}lowerMemeChanged(N){this.logger.info("Lower Meme changed: ",N),this.bottomMeme.string=this.lowerMeme=N,this.setMemeDataBottom(),this.checkMemeValidity(),this.editingStarted()}editingStarted(){this.memeChanged=this.topMeme.string!==this.memeStringsOnOpenUpper||this.bottomMeme.string!==this.memeStringsOnOpenLower,this.editStartedEvent$.next(this.memeChanged)}checkMemeValidity(){this.memesValid=0!==this.upperMeme.length||0!==this.lowerMeme.length}saveMeme(N){if(""===this.topMeme.string&&""===this.bottomMeme.string)return void this.memeService.clearMemeStrings(N);const q={top:this.topMeme.string,bottom:this.bottomMeme.string,source:N,color:this.memeColor};this.logger.info("Saving meme data: ",q),this.memeService.saveMemeStrings(q).pipe((0,f.R)(this.destroy$)).subscribe()}processMeme(N){let q=this.memeData.contentWidth,Me=this.memeData.contentHeight;this.logger.info("Meme max height: ",720),q>720&&(q=720,Me=q*(this.memeData.contentWidth/this.memeData.contentHeight)),this.logger.info("Meme size: "+Me+"x"+q),this.memeService.createMeme({file:this.memeData.filename,duration:N?1:this.memeData.duration,width:Me,height:q,clientWidth:this.memeData.videoWidth,clientHeight:this.memeData.videoHeight,topString:this.upperMeme,topFontSize:this.topMeme.fontSize,bottomString:this.lowerMeme,bottomFontSize:this.bottomMeme.fontSize,fillColor:this.memeColor,strokeColor:this.strokeColor,destination:this.destination,metaData:this.metaData})}processGIF(){let N=this.memeData.contentWidth,q=this.memeData.contentHeight;this.logger.info("GIF max height: ",720),N>720&&(N=720,q=N*(this.memeData.contentWidth/this.memeData.contentHeight)),this.logger.info("Meme size: "+q+"x"+N),this.memeService.createGIF({file:this.memeData.filename,duration:this.memeData.duration,width:q,height:N,clientWidth:this.memeData.videoWidth,clientHeight:this.memeData.videoHeight,destination:this.destination,metaData:this.metaData})}setMemeDataTop(){if(this.logger.info("MemeTop: ",this.upperMeme),""===this.upperMeme)return;this.topMeme.fontSize=this.adjustFontSize(this.topMeme,!0);const N=this.upperString.nativeElement;null!==N&&(N.style.fontSize=this.topMeme.fontSize+"px"),this.upperMeme=this.topMeme.string,this.logger.info("MemeTop Processed: ",this.upperMeme),this.logger.info("MemeTop Offset: ",this.topOffset)}setMemeDataBottom(){if(this.logger.info("MemeBottom: ",this.lowerMeme),""===this.lowerMeme)return;this.bottomMeme.fontSize=this.adjustFontSize(this.bottomMeme,!1);const N=this.lowerString.nativeElement;null!==N&&(N.style.fontSize=this.bottomMeme.fontSize+"px",this.bottomOffset=this.bottomOffsetDefault+(this.maxFontSizeUI-this.bottomMeme.fontSize)+"px"),this.lowerMeme=this.bottomMeme.string,this.logger.info("MemeBottom Processed: ",this.lowerMeme),this.logger.info("MemeBottom Offset: ",this.bottomOffset)}adjustFontSize(N,q){let Me=N.fontSize,xe=this.getWidthOfText(N.string,Me);const ct=Me;if(this.logger.info("length: "+xe+" UsableWidth: "+this.usableWidth+" fontSize: "+Me+" minFontSize: "+this.minFontSizeUI),xe>this.usableWidth&&Me===this.minFontSizeUI)return this.truncateString(N),this.setMax(N,q),Me;if(N.maxLength=this.DefaultMemeMaxLength,this.setMax(N,q),xe>this.usableWidth&&Me>this.minFontSizeUI){for(;xe>this.usableWidth&&Me>this.minFontSizeUI;)Me--,xe=this.getWidthOfText(N.string,Me);ct!==Me&&this.logger.info("shrink meme font from: "+ct+"px to: "+Me+"px"),xe>this.usableWidth&&Me===this.minFontSizeUI&&(this.logger.info("Special case. Length: "+xe+" usableWidth: "+this.usableWidth),xe=this.truncateString(N))}else if(xe<N.previousWidth&&Me<this.maxFontSizeUI){for(;xe<this.usableWidth&&Me<this.maxFontSizeUI;)Me++,xe=this.getWidthOfText(N.string,Me);Me=xe>this.usableWidth?Me-1:Me,ct!==Me&&this.logger.info("Grow meme font from: "+ct+"px to: "+Me+"px")}return N.previousWidth=xe,Me}setupMemeUI(){this.initViewer(),this.memeService.getMemeStrings(this.memeData.filename).pipe((0,f.R)(this.destroy$)).subscribe(N=>{this.memeStringsOnOpenUpper=N.top,this.memeStringsOnOpenLower=N.bottom,void 0!==N.source&&N.source===this.memeData.filename&&(""!==N.top||""!==N.bottom?(this.logger.info("Using previous meme strings: ",N),this.upperMeme=this.topMeme.string=N.top,this.lowerMeme=this.bottomMeme.string=N.bottom,this.initViewer(),this.checkMemeValidity()):this.memeReset())})}initViewer(){this.usableWidth=this.memeData.contentWidth-this.totalLRMargin-100,this.logger.info("Video Width: "+this.memeData.contentWidth+" Height: "+this.memeData.contentHeight),this.logger.info("Usable Width: ",this.usableWidth),setTimeout(()=>{this.setMemeDataTop(),this.setMemeDataBottom(),this.setupMemeColor()})}memeReset(){this.topMeme.string=this.upperMeme="",this.bottomMeme.string=this.lowerMeme="",this.memeService.createMeme({file:"",duration:0,width:0,height:0,clientWidth:0,clientHeight:0,topString:"",topFontSize:0,bottomString:"",bottomFontSize:0,fillColor:"",strokeColor:"",destination:"",metaData:void 0})}getWidthOfText(N,q){const xe=this.renderer.createElement("canvas").getContext("2d");return xe.font=q+"px Roboto",xe.measureText(N).width}truncateString(N){let q=this.getWidthOfText(N.string,this.minFontSizeUI);for(;q>this.usableWidth;)N.string=N.string.substring(0,N.string.length-1),q=this.getWidthOfText(N.string,this.minFontSizeUI),this.logger.info("Trunc meme chars: "+N.string.length+" width: "+q+" String: "+N.string);return N.maxLength=N.string.length,q}setMax(N,q){q?this.memeService.setUpperMemeMaxed(N.maxLength):this.memeService.setLowerMemeMaxed(N.maxLength)}setupMemeColor(){if(void 0===this.upperSpan||void 0===this.lowerSpan)return;const N=this.memeColor,q=[];q[0]=this.upperSpan.nativeElement,q[1]=this.lowerSpan.nativeElement,q.forEach(function(Me){null!==Me&&("white"===N?(Me.style.textShadow="-3px -3px 0 black, 3px -3px 0 black, -3px 3px 0 black, 3px 3px 0 black",Me.style.color="white"):(Me.style.textShadow="-3px -3px 0 white, 3px -3px 0 white, -3px 3px 0 white, 3px 3px 0 white",Me.style.color="black"))})}}return k.\u0275fac=function(N){return new(N||k)(a.Y36(h.ed),a.Y36(a.Qsj),a.Y36(u.WD))},k.\u0275cmp=a.Xpm({type:k,selectors:[["nv-preview-meme"]],viewQuery:function(N,q){if(1&N&&(a.Gf(G,5),a.Gf(x,5),a.Gf(E,5),a.Gf(P,5)),2&N){let Me;a.iGM(Me=a.CRH())&&(q.upperString=Me.first),a.iGM(Me=a.CRH())&&(q.lowerString=Me.first),a.iGM(Me=a.CRH())&&(q.upperSpan=Me.first),a.iGM(Me=a.CRH())&&(q.lowerSpan=Me.first)}},decls:2,vars:2,consts:[["class","video-overlay-button","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["class","video-overlay-button","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"video-overlay-button"],[1,"meme-text","meme-top",3,"ngStyle"],["memeTopString",""],["memeTopSpan",""],[1,"meme-text","meme-bottom",3,"ngStyle"],["memeBottomString",""],["memeBottomSpan",""],["fxLayoutAlign","center center",1,"video-overlay-button"],["fxLayout","column",1,"meme-overlay"],[3,"text","placeholderText","disabled","textMaxLength","textChange","stringChange"]],template:function(N,q){1&N&&(a.YNc(0,O,11,8,"div",0),a.YNc(1,C,4,8,"div",1)),2&N&&(a.Q6J("ngIf",q.memeOn||q.memesValid),a.xp6(1),a.Q6J("ngIf",q.memeOn))},directives:[n.O5,c.xw,c.Wh,n.PC,g.Zl,I._,p.i],styles:[".video-overlay-button[_ngcontent-%COMP%]{position:absolute;top:24px;left:24px;right:24px;bottom:4px;opacity:.95}.meme-overlay[_ngcontent-%COMP%]{position:absolute;width:800px;z-index:9999}.meme-text[_ngcontent-%COMP%], .meme-text[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;text-align:center}.meme-top[_ngcontent-%COMP%]{top:0;position:absolute}.meme-bottom[_ngcontent-%COMP%]{top:640px;position:absolute}"]}),k})();var b=e(53833),B=e(97175),U=e(70781),A=e(52529),S=e(50298),Y=e(58283);const se=["activecolor"],fe=["defaultcolor"];function $(k,oe){if(1&k){const N=a.EpF();a.TgZ(0,"button",10),a.NdJ("click",function(){a.CHM(N);const Me=a.oxw().$implicit;return a.oxw().iconClicked(Me)}),a.ALo(1,"translate"),a._UZ(2,"mat-icon",6),a.qZA()}if(2&k){const N=a.oxw().$implicit;a.Q6J("@icon",void 0)("matTooltipDisabled",!N.tooltip)("matTooltip",a.lcZ(1,4,N.tooltip)),a.xp6(2),a.Q6J("svgIcon",N.icon)}}function ae(k,oe){if(1&k&&(a.ynx(0),a.YNc(1,$,3,6,"button",9),a.BQk()),2&k){const N=oe.$implicit;a.xp6(1),a.Q6J("ngIf",N.icon)}}const me=function(k,oe){return{active_color:k,default_color:oe}},ye=function(k,oe){return{value:k,params:oe}},ue=function(k){return{navButton_margin:k}};let X=(()=>{class k{constructor(N,q){this.appBarService=N,this.localeService=q,this.destroy$=new o.xQ,this.icons=[{},{},{},{},{}],this.title="",this.titleParams={},this.navButton="",this.showNavButton=!1,this.activeColor="",this.defaultColor="",this.navButtonMarginValue=""}setupListeners(){this.appBarService.icons$.pipe((0,f.R)(this.destroy$)).subscribe(N=>{let q=4;for(N.forEach(Me=>{q>=0&&(this.icons[q--]=Me)});q>=0;)this.icons[q--]={}}),this.appBarService.title$.pipe((0,f.R)(this.destroy$)).subscribe(N=>{this.title=N.title,this.titleParams=N.params}),this.appBarService.navButton$.pipe((0,f.R)(this.destroy$)).subscribe(N=>{this.navButton=N,this.showNavButton=""!==this.navButton}),this.appBarService.active$.pipe((0,f.R)(this.destroy$)).subscribe(N=>{this.active=N})}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.activeColor=getComputedStyle(this.activeElement.nativeElement).backgroundColor,this.defaultColor=getComputedStyle(this.defaultElement.nativeElement).backgroundColor,this.navButtonMarginValue=this.localeService.isRTLLayoutEnabled?"0 0 0 8px":"0 8px 0 0",this.setupListeners()},0)}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}backClicked(){this.appBarService.clickBack()}iconClicked(N){this.appBarService.clickIcon(N.id)}iconTrack(N,q){return N}}return k.\u0275fac=function(N){return new(N||k)(a.Y36(u.ad),a.Y36(h.OL))},k.\u0275cmp=a.Xpm({type:k,selectors:[["nv-app-bar"]],viewQuery:function(N,q){if(1&N&&(a.Gf(se,7),a.Gf(fe,7)),2&N){let Me;a.iGM(Me=a.CRH())&&(q.activeElement=Me.first),a.iGM(Me=a.CRH())&&(q.defaultElement=Me.first)}},decls:11,vars:23,consts:[[1,"dummy-color-getter"],["activecolor",""],[1,"default-color"],["defaultcolor",""],["fxLayout","row","fxLayoutAlign","start center",1,"appbar","default-color","mat-elevation-z4"],["mat-button","","fxLayout","row","fxLayoutAlign","center center",1,"item-empty","nv-item-icon","font-body1","complex-button",3,"tabIndex","click"],[1,"flip-rtl-element",3,"svgIcon"],["fxFlex","",1,"title","font-body1"],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-button","","matTooltipClass","nv-igo igo-tooltip","class","app-bar-icons font-body1 nv-item-icon complex-button","fxLayout","row","fxLayoutAlign","center center","fxFlex","none",3,"matTooltipDisabled","matTooltip","click",4,"ngIf"],["mat-button","","matTooltipClass","nv-igo igo-tooltip","fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"app-bar-icons","font-body1","nv-item-icon","complex-button",3,"matTooltipDisabled","matTooltip","click"]],template:function(N,q){1&N&&(a._UZ(0,"div",0,1),a._UZ(2,"div",2,3),a.TgZ(4,"div",4),a.TgZ(5,"button",5),a.NdJ("click",function(){return q.backClicked()}),a._UZ(6,"mat-icon",6),a.qZA(),a.TgZ(7,"div",7),a._uU(8),a.ALo(9,"translate"),a.qZA(),a.YNc(10,ae,2,1,"ng-container",8),a.qZA()),2&N&&(a.xp6(4),a.ekj("active",q.active),a.Q6J("@active",a.WLB(15,ye,q.active,a.WLB(12,me,q.activeColor,q.defaultColor))),a.xp6(1),a.Q6J("@navButton",a.WLB(20,ye,q.showNavButton,a.VKq(18,ue,q.navButtonMarginValue)))("tabIndex",q.showNavButton?"0":"-1"),a.xp6(1),a.Q6J("svgIcon",q.navButton),a.xp6(2),a.Oqu(a.xi3(9,9,q.title,q.titleParams)),a.xp6(2),a.Q6J("ngForOf",q.icons)("ngForTrackBy",q.iconTrack))},directives:[c.xw,c.Wh,U.lW,A.Hw,c.yH,n.sg,n.O5,S.gM],pipes:[Y.X$],styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}.isRtl[_nghost-%COMP%]   .flip-rtl-element[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .flip-rtl-element[_ngcontent-%COMP%]{transform:scaleX(-1)}html[dir=rtl][_ngcontent-%COMP%]   .flip-rtl-element[_ngcontent-%COMP%]{--dummy: 0;transform:scaleX(-1)}.appbar[_ngcontent-%COMP%]{padding:10px 16px;transition:background-color .15s linear}.dummy-color-getter[_ngcontent-%COMP%]{background:#76b900}.default-color[_ngcontent-%COMP%]{background:#393939}.item-empty[_ngcontent-%COMP%]{width:0;max-width:36px}.isLtr[_nghost-%COMP%]   .app-bar-icons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .app-bar-icons[_ngcontent-%COMP%]{margin-left:8px}html[dir=ltr][_ngcontent-%COMP%]   .app-bar-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-left:8px}.isRtl[_nghost-%COMP%]   .app-bar-icons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .app-bar-icons[_ngcontent-%COMP%]{margin-right:8px}html[dir=rtl][_ngcontent-%COMP%]   .app-bar-icons[_ngcontent-%COMP%]{--dummy3: 0;margin-right:8px}.appbar.active[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#fff}"],data:{animation:[(0,B.X$)("navButton",[(0,B.SB)("true",(0,B.oB)({"flex-basis":"36px",margin:"{{ navButton_margin }}",opacity:1}),{params:{navButton_margin:"0 8px 0 0"}}),(0,B.SB)("false",(0,B.oB)({"flex-basis":"0",margin:"0 0 0 0",opacity:0})),(0,B.eR)("true <=> false",(0,B.jt)(150))]),(0,B.X$)("icon",[(0,B.eR)(":enter",[(0,B.oB)({opacity:0}),(0,B.jt)(150,(0,B.oB)({opacity:1}))]),(0,B.eR)(":leave",[(0,B.jt)(150,(0,B.oB)({opacity:0}))])]),(0,B.X$)("active",[(0,B.SB)("true",(0,B.oB)({"background-color":"{{active_color}}"}),{params:{active_color:"transparent"}}),(0,B.SB)("false",(0,B.oB)({"background-color":"{{default_color}}"}),{params:{default_color:"transparent"}}),(0,B.eR)("true <=> false",[(0,B.ru)([(0,B.IO)("@*",[(0,B.pV)()]),(0,B.jt)(150)])])])]}}),k})();var j=e(47420),K=e(42791),Z=e(28587),L=e(51606),W=e(80181),te=e(772),ie=e(9082);let Q=(()=>{class k{}return k.\u0275fac=function(N){return new(N||k)},k.\u0275mod=a.oAB({type:k}),k.\u0275inj=a.cJS({imports:[[n.ez,i.Bz,D.o9,m.Q,h.it,y.hp,(0,h.zv)()]]}),k})();a.B6R(T.k,[c.xw,c.s9,X,c.yH,j.N,i.lC],[]),a.B6R(t.e,[K.N7,Z.Yx,c.yH,K.x0,n.O5,c.xw,c.SQ,n.sg,w.H,n.tP],[Y.X$]),a.B6R(b.B,[c.xw,c.s9,c.Wh,L.mK,c.yH,A.Hw,n.O5,r.n,c.SQ,V,U.lW,p.i,n.PC,g.Zl,W.Ou,te.Lv,ie.Q,l,n.mk,g.oO],[Y.X$])},70542:(He,de,e)=>{"use strict";e.d(de,{DX:()=>G,Qr:()=>x});var n=e(22213),i=e(2316),D=e(54364),m=e(30582),y=e(89460),T=e(80181),r=e(365),a=e(70781),s=e(58283);function p(E,P){if(1&E&&i._UZ(0,"mat-progress-spinner",8),2&E){const v=i.oxw(2);i.Q6J("diameter",48)("mode",v.data.progressMode)("value",v.value)}}const l=function(E){return{spinnerContent:E}};function t(E,P){if(1&E&&(i.TgZ(0,"div",5),i.YNc(1,p,1,3,"mat-progress-spinner",6),i._UZ(2,"span",7),i.ALo(3,"translate"),i.qZA()),2&E){const v=i.oxw();i.Q6J("ngClass",i.VKq(6,l,v.data.spinner)),i.xp6(1),i.Q6J("ngIf",v.data.spinner),i.xp6(1),i.Q6J("innerHtml",i.xi3(3,3,v.data.query,v.data.queryParam),i.oJD)}}function w(E,P){if(1&E&&i._UZ(0,"mat-progress-bar",12),2&E){const v=i.oxw(2);i.Q6J("mode",v.data.progressMode)("value",v.value)}}function h(E,P){if(1&E&&(i.TgZ(0,"div",13),i._uU(1),i.qZA()),2&E){const v=i.oxw(2);i.xp6(1),i.hij("",v.value,"%")}}const u=function(){return{progressBarContent:!0}};function o(E,P){if(1&E&&(i.TgZ(0,"div",9),i._UZ(1,"span",7),i.ALo(2,"translate"),i.YNc(3,w,1,2,"mat-progress-bar",10),i.YNc(4,h,2,1,"div",11),i.qZA()),2&E){const v=i.oxw();i.Q6J("ngClass",i.DdM(7,u)),i.xp6(1),i.Q6J("innerHtml",i.xi3(2,4,v.data.query,v.data.queryParam),i.oJD),i.xp6(2),i.Q6J("ngIf",v.data.progressBar),i.xp6(1),i.Q6J("ngIf",v.data.progressPercentage)}}function f(E,P){if(1&E&&(i.TgZ(0,"button",14),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&E){const v=i.oxw();i.Q6J("mat-dialog-close",v.retVals.Action1),i.xp6(1),i.hij(" ",i.lcZ(2,2,v.data.action1)," ")}}function c(E,P){if(1&E&&(i.TgZ(0,"button",14),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&E){const v=i.oxw();i.Q6J("mat-dialog-close",v.retVals.Action2),i.xp6(1),i.hij(" ",i.lcZ(2,2,v.data.action2)," ")}}function g(E,P){if(1&E&&(i.TgZ(0,"button",14),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&E){const v=i.oxw();i.Q6J("mat-dialog-close",v.retVals.Action3),i.xp6(1),i.hij(" ",i.lcZ(2,2,v.data.action3)," ")}}var G=(()=>{return(E=G||(G={})).Action1="action1",E.Action2="action2",E.Action3="action3",G;var E})();let x=(()=>{class E{constructor(v){this.data=v,this.retVals=G,this.value=0,v.spinner&&(v.progressBar=!1),void 0===v.progressMode&&(v.progressMode="indeterminate")}set dialogData(v){this.data=v}get dialogData(){return this.data}}return E.\u0275fac=function(v){return new(v||E)(i.Y36(n.WI))},E.\u0275cmp=i.Xpm({type:E,selectors:[["nv-hig-alert-dialog"]],inputs:{value:"value",dialogData:"dialogData"},decls:9,vars:9,consts:[["mat-dialog-title","",1,"font-header6"],["mat-dialog-content","","class","font-body2","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","14px",3,"ngClass",4,"ngIf"],["mat-dialog-content","","class","font-body2","fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","8px",3,"ngClass",4,"ngIf"],["mat-dialog-actions","",3,"align"],["mat-button","","class","font-button2 hig-button",3,"mat-dialog-close",4,"ngIf"],["mat-dialog-content","","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","14px",1,"font-body2",3,"ngClass"],["color","accent","fxFlex","none",3,"diameter","mode","value",4,"ngIf"],[3,"innerHtml"],["color","accent","fxFlex","none",3,"diameter","mode","value"],["mat-dialog-content","","fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","8px",1,"font-body2",3,"ngClass"],["class","mat-accent",3,"mode","value",4,"ngIf"],["fxLayoutAlign","start start",4,"ngIf"],[1,"mat-accent",3,"mode","value"],["fxLayoutAlign","start start"],["mat-button","",1,"font-button2","hig-button",3,"mat-dialog-close"]],template:function(v,O){1&v&&(i.TgZ(0,"span",0),i._uU(1),i.ALo(2,"translate"),i.qZA(),i.YNc(3,t,4,8,"div",1),i.YNc(4,o,5,8,"div",2),i.TgZ(5,"div",3),i.YNc(6,f,3,4,"button",4),i.YNc(7,c,3,4,"button",4),i.YNc(8,g,3,4,"button",4),i.qZA()),2&v&&(i.xp6(1),i.Oqu(i.lcZ(2,7,O.data.title)),i.xp6(2),i.Q6J("ngIf",void 0===O.data.progressBar||O.data.spinner),i.xp6(1),i.Q6J("ngIf",O.data.progressBar),i.xp6(1),i.Q6J("align","end"),i.xp6(1),i.Q6J("ngIf",O.data.action1),i.xp6(1),i.Q6J("ngIf",O.data.action2),i.xp6(1),i.Q6J("ngIf",O.data.action3))},directives:[n.uh,D.O5,n.H8,n.xY,m.xw,m.Wh,m.SQ,D.mk,y.oO,T.Ou,m.yH,r.pW,a.lW,n.ZT],pipes:[s.X$],styles:[".spinnerContent[_ngcontent-%COMP%]{overflow:hidden!important}.progressBarContent[_ngcontent-%COMP%]{padding-top:16px}"]}),E})()},84051:(He,de,e)=>{"use strict";e.d(de,{I:()=>r});var n=e(54364),i=e(66660),D=e(18137),m=e(6484),y=e(2316);let r=(()=>{class a{constructor(p){if(p)throw new Error("CoreModule already loaded; Import in root module only.")}}return a.\u0275fac=function(p){return new(p||a)(y.LFG(a,12))},a.\u0275mod=y.oAB({type:a}),a.\u0275inj=y.cJS({imports:[[n.ez,i.o9,D.Q,(0,m.zv)()]]}),a})()},99520:(He,de,e)=>{"use strict";e.d(de,{Vu:()=>i.V,HY:()=>D.H,rj:()=>y.rj,Mb:()=>T.M,wz:()=>r.w,Sp:()=>a.S,dM:()=>s.dM,dz:()=>s.dz,A2:()=>s.A2,ER:()=>s.ER,k7:()=>s.k7,DX:()=>p.DX}),e(84051);var i=e(49436),D=e(66201),y=(e(92732),e(1198)),T=e(92770),r=e(62522),a=e(77305),s=e(36511),p=e(70542)},36511:(He,de,e)=>{"use strict";e.d(de,{dz:()=>D,dO:()=>m,A2:()=>y,Sc:()=>T,$K:()=>r,dM:()=>a,k7:()=>p,uc:()=>o,ER:()=>C,DW:()=>V});var n=e(2984);const D={width:296,height:167},m=32;var y=(()=>{return(b=y||(y={})).Video="video",b.Image="image",b.Other="other",y;var b})(),T=(()=>{return(b=T||(T={})).Temporary="temporary",b.Highlights="highlights",T;var b})(),r=n.Yk.Common.Gallery.AudioType,a=(()=>{return(b=a||(a={})).Normal="Normal",b.SuperResolution="SuperResolution",b.SuperResolutionOversized="SuperResolution_Oversized",b.Mono360="360Mono",b.Stereo="Stereo",b.Stereo360="360Stereo",b.Exr="Exr",b.Live="Live",b.Offline="Offline",b.Highlights="Highlight",b.Mta="MTA",b.NormalAnsel="Normal_Ansel",b.Gif="AnimatedGif",b.Montage="Montage",b.InstantReplay="InstantReplay",b.Manual="Manual",b.Screenshot="Screenshot",a;var b})(),p=(()=>{return(b=p||(p={})).off="Off",b.inPlace="InPlace",b.toNew="ToNew",p;var b})();class o{constructor(){this.total=0,this.highlights=0,this.videos=0,this.instantReplays=0,this.images=0,this.montages=0,this.highlightBreakDown=[]}}var C=(()=>{return(b=C||(C={})).newest="newest",b.oldest="oldest",b.atoz="atoz",b.ztoa="ztoa",C;var b})(),V=(()=>{return(b=V||(V={})).Highlight="Highlight",b.InstantReplay="InstantReplay",b.Recording="Recording",b.Montage="Montage",b.Screenshot="Screenshot",V;var b})()},92732:(He,de,e)=>{"use strict";e.d(de,{Q:()=>t});var n=e(2984),i=e(41618),D=e(81134),m=e(33927),y=e(18293),T=e(85816),r=e(98636),a=e(2316),s=e(6484),p=e(66201),l=(()=>{return(w=l||(l={}))[w.Empty=0]="Empty",w[w.Partial=1]="Partial",w[w.Full=2]="Full",l;var w})();let t=(()=>{class w{constructor(u,o,f){this.osService=o,this.bridgeService=f,this.videoPath="",this.directoryListOutdated=!0,this.directoryListUpdateCounts=!1,this.files=[],this.directoryList=[],this.directories=[],this.populatedFolder=[[],[],[],[],[]],this.folderData=[],this.fileData=[],this.mainCache=[],this.folderCache=[],this.cacheEntries=5,this.initialized=!1,this.ageCounter=0,this.dataIndex=0,this.freeInterval=3e5,this.minEntryAge=12e5,this.active=!1,this.logger=u.getLogger("CacheService")}resetCacheEntry(u){this.folderCache[u]={dirty:!0,crc:0,path:"",age:0,time:0,loaded:l.Empty}}init(){if(this.logger.info("Initialize"),this.dirSeparator=this.osService.getDirSeparator(),!this.initialized){this.directoryListOutdated=!0,this.mainCache[0]={dirty:!0,crc:0,path:""};for(let u=0;u<this.cacheEntries;u++)this.resetCacheEntry(u);this.cacheTimerOn(),this.initialized=!0,this.logger.info("Initialize complete")}}reInit(){this.cacheTimerOff(),this.initialized=!1,this.init()}galleryActive(u){this.active=u}cacheTimerOn(){this.cacheTimer||(this.cacheTimer=(0,i.F)(this.freeInterval).subscribe(()=>{if(this.logger.info("cacheTimer called"),this.active)return;let u=2147483647,o=-1;const c=(new Date).getTime();for(let g=0;g<this.cacheEntries;g++){const G=c-this.folderCache[g].time;0!==this.folderCache[g].age&&this.folderCache[g].age<u&&G>this.minEntryAge&&(o=g,u=this.folderCache[g].age)}0!==u&&-1!==o&&(this.logger.info("resetting cache entry: "+o+" age was: "+u),this.folderData[o].directories.length=0,this.folderData[o].files.length=0,this.folderCache[o].loaded===l.Full&&(this.fileData[o].popFolder.length=0),this.resetCacheEntry(o)),this.checkCacheState()}))}cacheTimerOff(){this.logger.info("cacheTimerOff called"),this.cacheTimer&&(this.cacheTimer.unsubscribe(),this.cacheTimer=void 0)}checkCacheState(){let u=!0;this.folderCache.forEach(o=>{o.loaded!==l.Empty&&(u=!1)}),u&&this.cacheTimerOff()}setRecordingPaths(u){this.videoPath=u,this.reInit()}getCurrentPopFolder(){return this.populatedFolder[this.dataIndex]}resetCurrentPopFolder(){this.populatedFolder[this.dataIndex].length=0}useCacheData(u,o){let f=!1;if(u!==this.videoPath){const c=this.folderCache.findIndex(E=>E.path===u);if(-1===c)return!1;f=!this.folderCache[c].dirty&&this.folderCache[c].path===u;const g=f&&this.folderCache[c].loaded!==l.Empty,I=f&&this.folderCache[c].loaded===l.Full;this.dataIndex=c;const x=(new Date).getTime();return o?(g&&(this.logger.info("useCacheData, updating partial!"),this.files=this.folderData[c].files,this.directories=this.folderData[c].directories,this.counts=this.folderData[c].counts,this.logger.info("useCacheData, updating partial - DONE!!"),this.folderCache[c].time=x),g):(I&&(this.logger.info("useCacheData, updating full!"),this.populatedFolder[c]=this.fileData[c].popFolder,this.counts=this.folderData[c].counts,this.logger.info("useCacheData, updating full - DONE!!"),this.folderCache[c].time=x),I)}return f=!this.mainCache[0].dirty&&this.mainCache[0].path===u,f}setCacheNotDirty(u){if(u===this.videoPath)this.mainCache[0].dirty=!1;else{const o=this.folderCache.findIndex(f=>f.path===u);-1!==o&&(this.folderCache[o].dirty=!1)}}setCacheLoadedPartial(u){const o=this.folderCache.findIndex(f=>f.path===u);-1!==o&&(this.folderCache[o].loaded=l.Partial,this.folderData[o]={files:this.files,directories:this.directories,counts:this.counts})}setCacheLoaded(u){const o=this.folderCache.findIndex(f=>f.path===u);-1!==o&&(this.folderCache[o].loaded=l.Full,this.fileData[o]={popFolder:this.populatedFolder[o]})}setFileCounts(u,o){const f=this.folderCache.findIndex(c=>c.path===o);-1!==f?this.folderData[f].counts=u:this.logger.error("Could not find cache entry")}getVideoPathCRC(){return this.logger.info("Getting video path CRC: ",this.videoPath),this.getGalleryFolderCRC(this.videoPath).pipe((0,m.U)(u=>{const o=this.mainCache[0].crc!==u.crc;return this.mainCache[0]={dirty:o,crc:u.crc,path:this.videoPath},o}),(0,y.K)(u=>(this.logger.info("getVideoPathCRC error: ",u),(0,D.of)(!0))))}getCachedDataCRC(u){return void 0===u&&(this.logger.info("getCachedDataCRC: input undefined will use video path"),u=this.videoPath),u===this.videoPath?this.getVideoPathCRC():this.getGalleryFolderCRC(u).pipe((0,T.zg)(o=>{let f=-1;if(f=this.folderCache.findIndex(E=>E.path===u),-1===f&&(f=this.folderCache.findIndex(E=>0===E.crc)),-1===f){let E=2147483647;for(let P=0;P<this.cacheEntries;P++)this.folderCache[P].dirty&&this.folderCache[P].age<E&&(f=P,E=this.folderCache[P].age)}if(-1===f){let E=2147483647;for(let P=0;P<this.cacheEntries;P++)this.folderCache[P].age<E&&(f=P,E=this.folderCache[P].age)}f>=this.cacheEntries&&(this.logger.error("folder cache has bad indexing! ",f),f=0),this.logger.info("Using index: "+f);const c=this.folderCache[f].crc!==o.crc,I=c||this.folderCache[f].loaded===l.Empty;this.ageCounter++;const x=(new Date).getTime();return this.folderCache[f]={dirty:I,crc:o.crc,path:u,age:this.ageCounter,time:x,loaded:c?l.Empty:this.folderCache[f].loaded},this.cacheTimerOn(),(0,D.of)(!0)}),(0,y.K)(o=>(this.logger.info("getCachedDataCRC error: ",o),(0,D.of)(!1))))}getGalleryFolderCRC(u){return this.bridgeService.executeCommand(n.Gh.Common.Gallery.GetFolderCRC,{directory:u})}getDirectoryListCRC(){return this.getVideoPathCRC().pipe((0,r.b)(u=>{this.directoryListOutdated=u}))}getNewDirectoryList(){return this.directoryListOutdated?(this.directoryList.length=0,this.directoryListUpdateCounts=!0,this.bridgeService.executeCommand(n.Gh.Common.Gallery.GetFolderListing,{directory:this.videoPath,shouldGetOnlyNv:!0,excludeDirectoryType:n.Yk.Common.Gallery.ExcludeDirectoryType.empty}).pipe((0,m.U)(o=>(this.setDirectoryList(o.directories),this.logger.info("New Directories: ",this.directoryList),this.directoryList)))):(this.logger.info("Current Directories: ",this.directoryList),this.directoryListUpdateCounts=!1,(0,D.of)(this.directoryList))}getDirectoryList(){return this.getDirectoryListCRC().pipe((0,T.zg)(()=>this.getNewDirectoryList()))}setDirectoryList(u){this.directoryList=u.slice(),this.directoryListOutdated=!1}updateDirectoryList(u){if(this.directoryList.length){let o=u.lastIndexOf(this.dirSeparator);const f=u.substr(0,o);o=f.lastIndexOf(this.dirSeparator)+1;const c=f.substr(o);this.directoryList.find(g=>g===c)||this.flushDirectoryList()}}flushDirectoryList(){this.directoryListOutdated=!0}}return w.\u0275fac=function(u){return new(u||w)(a.LFG(s.ed),a.LFG(p.H),a.LFG(s.dF))},w.\u0275prov=a.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},92770:(He,de,e)=>{"use strict";e.d(de,{M:()=>T});var n=e(81134),i=e(70542),D=e(2316),m=e(22213),y=e(68456);let T=(()=>{class r{constructor(s,p){this.dialog=s,this.snackbar=p}openAlertDialog(s,p=!0){const t=this.dialog.open(i.Qr,{panelClass:["nv-hig","nv-oogg"],disableClose:p,autoFocus:!1,data:s});return(0,n.of)(t)}openSnackBar(s,p="",l=5e3){return this.snackbar.open(s,p,{duration:l,horizontalPosition:"left",panelClass:["nv-hig","nv-oogg"]})}closeSnackBar(){this.snackbar.dismiss()}}return r.\u0275fac=function(s){return new(s||r)(D.LFG(m.uw),D.LFG(y.ux))},r.\u0275prov=D.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},1198:(He,de,e)=>{"use strict";e.d(de,{rj:()=>Y});var n=e(76491),i=e(79441),D=e(81134),m=e(90490),y=e(61786),T=e(61486),r=e(34361),a=e(83972),s=e(85816),p=e(98636),l=e(33927),t=e(29845),w=e(75428),h=e(20088),u=e(18293),o=e(67202),f=e(27153),c=e(9170),g=e(2984),I=e(36511),G=e(70542),x=e(12556),E=e(2281),v=e(2316),O=e(6484),C=e(66201),_=e(92732),F=e(58283),V=e(92770),b=e(54364),B=e(43124);let Y=(()=>{class se{constructor($,ae,me,ye,ue,X,j,K,Z){this.bridgeService=ae,this.osService=me,this.dbService=ye,this.cacheService=ue,this.translateService=X,this.dialogHelper=j,this.datePipe=K,this.telemetryService=Z,this.testMode=!1,this.dbStorageName="OoggData",this.sortKey="Sort",this.videoPath="",this.thumbWidth=I.dz.width,this.thumbHeight=I.dz.height,this.directories=[],this.workingFolder="",this.montageMode=!1,this.currentFileData$=new n.X(null),this.currentSelectedFilesData$=new n.X([]),this.allItems=[],this.modifiedItems=[],this.filteredItems=[],this.galleryDataIsInitialized=!1,this.trimInProgess=I.k7.off,this.activeFilter=0,this.fileCounts=new I.uc,this.topLevelCounts=[],this.trackerReady=!1,this.sortType=I.ER.newest,this.noDataExists=!1,this.montageAvailable=!0,this.filterInit=!1,this.gameItems=[],this.mediaItems=[],this.highlightItems=[],this.globalHighlightCount=0,this.activityItems=[],this.activityEvents=[],this.activityVolume=100,this.trackerCallback$=new i.xQ,this.filteredData$=new i.xQ,this.emptyStateChanged$=new n.X(!1),this.deleteCompleted$=new i.xQ,this.logger=$.getLogger("GalleryService")}get fileDataChangeListener(){return this.currentFileData$.asObservable()}get currentFileData(){return this.currentFileData$.getValue()}set currentFileData($){this.logger.info("Updating metadata"),this.currentFileData$.next($)}get filesSelectedDataChangeListener(){return this.currentSelectedFilesData$.asObservable()}get currentSelectedFilesData(){return this.currentSelectedFilesData$.getValue()}set currentSelectedFilesData($){this.currentSelectedFilesData$.next($)}listenForFilteredDataChange(){return this.filteredData$.asObservable()}listenForTrackerEvents(){return this.trackerCallback$.asObservable()}listenForEmptyStateChanged(){return this.emptyStateChanged$.asObservable()}listenForDeleteCompletion(){return this.deleteCompleted$.asObservable()}init(){return this.logger.info("Initialize"),this.dirSeparator=this.osService.getDirSeparator(),this.dBStore=this.dbService.getGlobalStore(this.dbStorageName),this.getSortKey().subscribe($=>{void 0!==$&&(this.sortType=$)}),this.bridgeService.executeCommand(g.Gh.Common.Applicationcontrol.IsCefGpuModeSupported).subscribe($=>{this.logger.info("IsGpuModeSupported (Montage supported): ",$),this.montageAvailable=$}),this.bridgeService.executeCommand(g.Gh.Common.Gallery.GalleryNotifications).subscribe($=>this.galleryEvent($)),this.bridgeService.executeCommand(g.Gh.Common.Gallery.GetSettings).pipe((0,s.zg)($=>($&&$.settings&&$.settings.trackerStatus&&(this.trackerReady=$.settings.trackerStatus===g.Yk.Common.Gallery.GalleryPathUpdateStatus.TrackerUpdateComplete),$&&$.settings&&$.settings.path?this.initPathItems($.settings.path):(0,D.of)())))}hasAnyEntries(){if(this.topLevelCounts.length>0){let $=0;return this.topLevelCounts.forEach(ae=>{$+=ae.totalCount}),console.log("gallery entries: ",$),$>0}return!1}setMontageMode($){this.montageMode=$}getMontageMode(){return this.montageMode}initPathItems($){return this.videoPath=$,this.logger.info("Recording Path: ",this.videoPath),this.cacheService.setRecordingPaths(this.videoPath),(0,D.of)(null)}initGalleryData(){return this.galleryDataIsInitialized?(this.logger.info("Gallery Initialization skipped!"),(0,D.of)(!0)):this.isTrackerReady().pipe((0,s.zg)(()=>this.getFolders()),(0,s.zg)(()=>this.getAllData()),(0,p.b)(()=>(this.galleryDataIsInitialized=!0,(0,D.of)(!0))))}isTrackerReady(){return this.bridgeService.executeCommand(g.Gh.Common.Gallery.GetSettings).pipe((0,l.U)($=>{if($&&$.settings&&$.settings.trackerStatus&&(this.trackerReady=$.settings.trackerStatus===g.Yk.Common.Gallery.GalleryPathUpdateStatus.TrackerUpdateComplete),!this.trackerReady)throw new Error("Tracker not ready");return this.trackerReady}),(0,t.a)($=>$.pipe((0,p.b)(()=>this.logger.info("Retrying isTrackerReady")),(0,w.g)(300))))}getGalleryData(){return this.filteredItems}getISOTime($,ae){const me=E.duration(ae),ye=E($,E.ISO_8601);return ye.add(me),ye}fillActivityFeed($){return this.logger.info("EdgeData: ",$),this.activityItems.length=0,$.recents.forEach((ae,me)=>{this.activityItems.push({identity:me,gameName:"",session:0,playStarted:ae.startTime,playTime:ae.endTime,startTime:"00:00:00.0",endTime:ae.endTime,mapFileName:"",events:ae.events,rounds:ae.rounds,metaData:[]})}),this.activityItems}populateActivityFeed(){const $=this.getGalleryData().slice(),ae=[];$.sort((X,j)=>new Date(X.date).getTime()-new Date(j.date).getTime());const me=this.translateService.instant("montage.Montage");let ye=0;this.activityItems.forEach(X=>{const j=E(X.playStarted,E.ISO_8601),K=this.getISOTime(j,X.playTime);this.activityEvents=X.events,X.events=[],X.rounds&&(ye=0),ae.length=0,$.forEach(Z=>{Z.folder!==me&&E(""===Z.eventTimeStamp?Z.date:Z.eventTimeStamp,E.ISO_8601).isBetween(j,K)&&ae.push(Z)}),ae.sort((Z,L)=>{const te=""===L.eventTimeStamp?L.date:L.eventTimeStamp;return E(""===Z.eventTimeStamp?Z.date:Z.eventTimeStamp).diff(E(te))}),ae.forEach(Z=>{this.logger.info("Capture Data to map: "+Z.file.name+" hlName: "+Z.hlName+" eventTime: "+Z.eventTimeStamp+" dateTime: "+Z.date)}),ae.forEach((Z,L)=>{X.metaData.push(Z),""===X.gameName&&(X.gameName=Z.folder,X.session=Z.session),"Map"===Z.hlDefinitionId&&""===X.mapFileName&&(X.mapFileName=Z.fullFilename);const W="video"===Z.file.type&&("InstantReplay"===Z.file.subtype||"Manual"===Z.file.subtype),te="image"===Z.file.type&&"Highlight"!==Z.file.subtype;if("Highlight"===Z.file.subtype){const Q=E(Z.eventTimeStamp);this.logger.info("UGC item time: ",Q.toISOString());let k=!1;this.activityEvents.forEach((oe,N)=>{if(!k&&"sessionStarted"!==oe.name&&"sessionEnded"!==oe.name){const q=this.getISOTime(j,oe.time);this.logger.info("Activity entry index: "+N+" time: "+oe.time+" true time: "+q.toISOString()),Q.toISOString()===q.toISOString()&&(this.activityEvents[N].name=Z.hlName,X.events.push(this.activityEvents[N]),this.logger.info("Type3 Event: ",this.activityEvents[N]),k=!0)}}),k||this.logger.error("Could not match Highlight to log event! TimeStamp: ",Q)}else if(W||te){this.logger.info((W?"Type1: IR or MR: ":"Type2: Screenshot: ")+Z.hlName+" index: "+L);const k=""===Z.eventTimeStamp?Z.date:Z.eventTimeStamp;""===k&&this.logger.info("TimeStamp missing for: ",Z.file.name);const oe=E.utc(E(k).diff(E(j))).format("HH:mm:ss.SSS");this.logger.info("Duration: ",oe);let N=0;if(X.rounds&&X.rounds.length>0){let Me=!1;X.rounds.forEach(xe=>{const ct=this.getISOTime(j,xe.time),Se=E(k,E.ISO_8601);!Me&&Se.isBetween(j,ct)&&(N=xe.number-1,Me=!0)})}const q={time:oe,name:W?Z.file.subtype:"Screenshot",info:"",round:N};X.events.push(q),this.logger.info("Type1/2 Event: ",q)}})});for(let X=this.activityItems.length-1;X>=0;X--)""===this.activityItems[X].gameName?(this.logger.info("Removing Activity, Not populated: ",this.activityItems[X]),this.activityItems.splice(X,1)):0===this.activityItems[X].events.length&&(this.logger.info("Removing Activity, No events present ",this.activityItems[X]),this.activityItems.splice(X,1));return this.sortFilteredActivity(this.sortType),this.logger.info("Number of Activity Cards: ",this.activityItems.length),this.logger.info("Activity Data: ",this.activityItems),this.activityItems}getActivityData(){return this.testMode?this.getActivityFeedDataTest():this.getActivityFeedData()}getActivityFeedData(){return this.bridgeService.executeCommand(g.Gh.Common.Gallery.GetEventData).pipe((0,l.U)($=>$.recents&&0!==$.recents.length?(this.fillActivityFeed($),this.populateActivityFeed(),this.logger.info("Executed the bridge call to get activity data"),this.activityItems):null))}getActivityFeedDataTest(){const $=this.getGalleryData(),ae=this.translateService.instant("montage.Montage");this.activityItems.length=0;let me=0;return $.forEach((ue,X)=>{ue.folder===ae||0!==this.activityItems.length&&this.activityItems.find(j=>j.gameName===ue.folder)||(this.activityItems.push({identity:X,gameName:ue.folder,session:0,playStarted:"2020-12-09T03:30:00."+me,playTime:"",startTime:"00:00:00.0",endTime:"",mapFileName:"",events:[],rounds:[],metaData:[]}),me++)}),this.activityItems.forEach((ue,X)=>{let K=0,Z=10,L=0,W=0,te=10,ie=0;$.forEach(ct=>{if(ct.folder===ue.gameName){ct.session=ue.session,ue.metaData.push(ct),"Map"===ct.hlDefinitionId&&""===ue.mapFileName&&(ue.mapFileName=ct.fullFilename);const Se=K.toString()+":"+Z.toString()+":00.000";let Ge;if("video"===ct.file.type&&(Ge=ct.file.subtype,"Highlight"===Ge)){const Te=ct.hlName,Je=`highlightLabels.${Te}`;Ge=this.translateService.instant(Je),Ge===Je&&(Ge=Te)}ue.events.push({time:Se,name:"image"===ct.file.type?"Screenshot":Ge,round:-1,info:""}),W=K,te=Z,ie=L,Z+=10,60===Z&&(Z=0,K+=1,L+=0)}}),this.activityItems[X].endTime=W.toString()+":"+te.toString()+":00.000",this.activityItems[X].playTime=W>0?W.toString()+":"+te.toString()+":00.000":te>0?"00:"+te.toString()+":00.000":"00:00:"+ie.toString();let Q=0,k=0,oe=0,q=1;const Me=ue.events.length-1,xe=ue.events.length>6;ue.events.forEach((ct,Se)=>{ct.round=q-1,!xe||5!==oe&&Se!==Me?oe++:(Q+=Math.floor(10*Math.random()),k+=Math.floor(10*Math.random()),ue.rounds.push({number:q,time:ct.time,score1:Q,score2:k}),q++,oe=0)})}),this.logger.info("Number of Activity Cards: ",this.activityItems.length),this.logger.info("Activity Data: ",this.activityItems),(0,D.of)(this.activityItems)}getActivityItem($,ae,me,ye){let ue;return this.logger.info("Activity Game: "+$+" Session: "+me+" File: "+ae),this.activityItems.forEach(X=>{if(X.gameName===$&&X.session===me){const j=X.metaData.length-1;X.metaData.forEach((K,Z)=>{if(K.fullFilename===ae){let L=0;L=ye?Z<j?Z+1:0:0===Z?j:Z-1,ue=X.metaData[L]}})}}),ue||this.logger.error("Could not find next item!"),ue}buildPath($){return""===$?this.videoPath:this.videoPath+this.dirSeparator+$}setWorkingFolder($){const ae=this.buildPath($);return this.cacheService.getCachedDataCRC(ae).pipe((0,s.zg)(me=>this.getUsableData($)),(0,s.zg)(me=>(this.cacheService.useCacheData(ae,!1),(0,D.of)(this.cacheService.files.length))))}getWorkingFolder(){return""!==this.workingFolder&&this.directories.length&&(this.directories.find(ae=>ae===this.workingFolder)||(this.workingFolder="")),""===this.workingFolder&&this.directories.length&&(this.workingFolder=this.directories[0]),this.workingFolder}getVideoFolder(){return this.videoPath}saveCurrentLocation($){this.currentLocation=$}getCurrentLocation(){return this.currentLocation}setGalleryThumbSize($,ae){this.thumbWidth=$,this.thumbHeight=ae}populateDirectoryStats(){if(this.directories.length>0&&this.cacheService.directoryListUpdateCounts){this.topLevelCounts=[];const $=[];return this.directories.forEach(ae=>{$.push(this.getAppStats(ae))}),(0,m.$R)(...$).pipe((0,l.U)(()=>this.directories))}return(0,D.of)(this.directories)}getFolders(){return this.cacheService.getDirectoryList().pipe((0,s.zg)($=>(this.directories=$,this.populateDirectoryStats())))}showFolderContents($){return""===$?""===this.workingFolder?this.workingFolder=$=this.directories[0]:$=this.workingFolder:this.workingFolder=$,this.logger.info("Working Folder: ",this.workingFolder),this.setWorkingFolder($).pipe((0,l.U)(()=>this.cacheService.getCurrentPopFolder()))}getAllItemsCount(){return this.allItems.length}unselectAllItems(){this.allItems.forEach($=>$.selected=!1),this.filteredItems.forEach($=>$.selected=!1)}getUsableData($){this.logger.info("GetUsableData Dir: ",$);const ae=this.buildPath($);if(this.cacheService.useCacheData(ae,!0))return this.logger.info("GetUsableData - Using cached data"),this.fileCounts=this.cacheService.counts,(0,D.of)(!0);const me=[];return this.bridgeService.executeCommand(g.Gh.Common.Gallery.GetAppUGC,{appName:$}).pipe((0,l.U)(ye=>{this.cacheService.resetCurrentPopFolder();const ue=[],X=this.cacheService.getCurrentPopFolder();let j=0,K=0,Z=0,L=0,W=0;return ye.ugc&&ye.ugc.forEach((te,ie)=>{K+=te.fileSubType===g.Yk.Common.Gallery.SubType.InstantReplay?1:0,j+=te.fileSubType===g.Yk.Common.Gallery.SubType.Manual?1:0,te.fileType===g.Yk.Common.Gallery.FileType.video&&te.fileSubType!==g.Yk.Common.Gallery.SubType.InstantReplay&&te.fileSubType!==g.Yk.Common.Gallery.SubType.Manual&&te.fileSubType!==g.Yk.Common.Gallery.SubType.Montage&&te.fileSubType!==g.Yk.Common.Gallery.SubType.Highlight&&(j+=1),Z+=te.fileType===g.Yk.Common.Gallery.FileType.image?1:0,L+=te.fileSubType===g.Yk.Common.Gallery.SubType.Highlight?1:0,W+=te.fileSubType===g.Yk.Common.Gallery.SubType.Montage?1:0;const Q=te.path.lastIndexOf(this.dirSeparator),oe={name:te.path.substr(Q+1),type:te.fileType,subtype:te.fileSubType,source:te.fileSource,drsProfileName:te.DRSProfileName,thumbnail:""};ue.push(oe);const N={fullFilename:te.path,selected:!1,file:oe,folder:$,cmsId:te.cmsId,index:ie,duration:te.duration,msDuration:te.msDuration,date:te.date,fileSize:te.fileSizeKB.toString(),audiotype:te.audiotype,hlName:""!==te.highlightName?te.highlightName:te.highlightDefinitionId,hlDefinitionId:te.highlightDefinitionId,hlId:te.id,hlGroup:te.highlightGroupId,cancel:!1,eventTimeStamp:te.eventTimeStamp,data:null,errorType:null,errorDetails:null};X.push(N),me.some(q=>{if(q.name===te.highlightName)return q.count++,!0})}),this.cacheService.files=ue,this.cacheService.setCacheLoadedPartial(ae),this.logger.info("Files: "+ye.ugc.length+" Highlights : "+L+" Recordings: "+j+" IR: "+K+" Images: "+Z+" Montages: "+W),this.fileCounts={total:ye.ugc.length,highlights:L,videos:j,instantReplays:K,images:Z,montages:W,highlightBreakDown:me},!0}))}getAppStats($){return this.bridgeService.executeCommand(g.Gh.Common.Gallery.GetAppStats,{appName:$}).pipe((0,l.U)(me=>{this.logger.info("App Stats: "+$+" SS: "+me.screenshots+" V: "+me.videos);const ye=this.topLevelCounts.findIndex(ue=>ue.folder===$);return ye>=0?this.topLevelCounts[ye].totalCount=me.screenshots+me.videos:this.topLevelCounts.push({folder:$,totalCount:me.screenshots+me.videos}),me}))}getMetaData($,ae=!0){return this.bridgeService.executeCommand(g.Gh.Common.Gallery.GetFileMetadata,{file:$,width:ae?this.thumbWidth:void 0,height:ae?this.thumbHeight:void 0})}getImageFileDimensions($){return this.bridgeService.executeCommand(g.Gh.Common.Gallery.GetImageFileDimensions,{file:$})}getFileData($,ae){return this.getMetaData($.fullFilename,ae).pipe((0,h.P)(),(0,l.U)(me=>($.audiotype=void 0===me.audiotype?I.$K.Unknown:me.audiotype,$.duration=void 0===me.duration?"":me.duration,$.memeTop=me.memeInfo?me.memeInfo.topBarText:"",$.memeBottom=me.memeInfo?me.memeInfo.bottomBarText:"",$.data=void 0===me.thumbnail?null:me.thumbnail,$)),(0,u.K)(me=>(this.logger.error("GetMetaData failed: ",me),(0,D.of)(void 0))))}fillInFileData($){return this.getFileData($,!0)}removeItem($){return this.bridgeService.executeCommand(g.Gh.Common.Gallery.RemoveGalleryItem,{file:$,forceDelete:!1}).pipe((0,s.zg)(me=>{const ye=$.lastIndexOf(this.dirSeparator),ue=$.substr(ye+1,$.length-1);return this.logger.info("File deleted: ",ue),this.checkIfThereIsNoData(),(0,D.of)(!0)}),(0,u.K)(me=>(this.logger.info("File remove failed: ",me),(0,D.of)(!1))))}getThumbnailForFile($,ae=70,me=70){return this.bridgeService.executeCommand(g.Gh.Common.Gallery.GetThumbnail,{file:$,width:ae,height:me}).pipe((0,l.U)(ue=>ue.thumbnail))}getCurrentDropdownCount($){return this.getAppStats($).pipe((0,l.U)(ae=>{const me=this.topLevelCounts.findIndex(ye=>ye.folder===$);return-1!==me?(this.topLevelCounts[me].totalCount=ae.screenshots+ae.videos,this.topLevelCounts[me].totalCount):0}))}updateFolderSync($,ae){return new y.y(me=>{this.updateFolder($,ae).subscribe(()=>{me.next(),me.complete(),this.logger.info("Complete")})})}updateFolder($,ae){let me={};if(ae===I.Sc.Highlights)me={userGalleryPath:$};else if(ae===I.Sc.Temporary){const ue=$.lastIndexOf(this.dirSeparator),X=$.length-1;ue===X&&($=$.slice(0,X)),me={tempFolderPath:$}}return this.bridgeService.executeCommand(g.Gh.Common.Gallery.SetSettings,{settings:me}).pipe((0,l.U)(()=>!0),(0,o.h)(!0))}galleryEvent($){if($)if($.captureSaved)this.logger.info("Gallery event: CaptureSaved"),this.eventCaptureSaved($);else if($.ugcDeleted)this.logger.info("Gallery event: UgcDeleted"),this.eventUGCDeleted($);else if($.galleryPathUpdateStatus){switch(this.logger.info("Gallery event UpdateStatus: ",$.galleryPathUpdateStatus.status),$.galleryPathUpdateStatus.status){case g.Yk.Common.Gallery.GalleryPathUpdateStatus.TrackerUpdateInProgress:this.trackerReady=!1;break;case g.Yk.Common.Gallery.GalleryPathUpdateStatus.TrackerUpdateComplete:case g.Yk.Common.Gallery.GalleryPathUpdateStatus.CancelUpdateComplete:this.trackerReady=!0}this.trackerCallback$.next({trackerEvent:$.galleryPathUpdateStatus.status})}else this.logger.info("Unknown or unhandled Event Type: ",$);else this.logger.info("Event: undefined or null")}eventCaptureSaved($){if(this.allItems&&this.allItems.find(K=>K.fullFilename===$.captureSaved.ugc.path))return void this.logger.info("Extraneous capture event received!");this.cacheService.updateDirectoryList($.captureSaved.ugc.path);const ae=$.captureSaved.ugc,me=ae.path.lastIndexOf(this.dirSeparator),ye=ae.path.slice(me+1),ue={fullFilename:ae.path,selected:!1,file:{name:ye,type:ae.fileType,subtype:ae.fileSubType,source:ae.fileSource,drsProfileName:ae.DRSProfileName,thumbnail:""},folder:ae.DRSProfileName,cmsId:ae.cmsId,index:0,duration:ae.duration,msDuration:ae.msDuration,date:ae.date,fileSize:ae.fileSizeKB.toString(),audiotype:ae.audiotype,hlName:""!==ae.highlightName?ae.highlightName:ae.highlightDefinitionId,hlDefinitionId:ae.highlightDefinitionId,hlId:-1,hlGroup:ae.highlightGroupId,cancel:!1,eventTimeStamp:ae.eventTimeStamp,data:"",errorType:"",errorDetails:""};this.logger.info("New UGC Data: ",ue);const X=this.allItems.length===this.filteredItems.length;let j;switch(this.allItems.unshift(ue),this.checkIfThereIsNoData(),this.filterAll(X),this.trimInProgess){case I.k7.off:j=x.ryx.Add;break;case I.k7.toNew:j=x.ryx.TrimNew;break;case I.k7.inPlace:j=x.ryx.TrimReplace}this.galleryCaptureAction(j,ae)}eventUGCDeleted($){const ae=$.ugcDeleted.ugc,me=ae.path,ye=this.allItems.find(X=>X.fullFilename===me),ue=this.allItems.length===this.filteredItems.length;this.arrayDeleteFile(ye,this.allItems),this.filterAll(ue),this.checkIfThereIsNoData(),this.galleryCaptureAction(x.ryx.Delete,ae),this.deleteCompleted$.next(!0)}checkIfThereIsNoData(){this.noDataExists!==(0===this.allItems.length)&&(this.noDataExists=!this.allItems.length,this.emptyStateChanged$.next(this.noDataExists))}getNextFile(){const $=this.filteredItems.findIndex(me=>me.fullFilename===this.currentFileData.fullFilename);this.currentFileData=this.filteredItems[$===this.filteredItems.length-1?0:$+1],this.galleryViewAction(x.ryx.Preview,this.currentFileData)}getPreviousFile(){const $=this.filteredItems.findIndex(me=>me.fullFilename===this.currentFileData.fullFilename);this.currentFileData=this.filteredItems[0===$?this.filteredItems.length-1:$-1],this.galleryViewAction(x.ryx.Preview,this.currentFileData)}generateGalleryFilename($,ae,me=new Date){return`${this.videoPath}${this.dirSeparator}${$}${this.dirSeparator}${$} ${this.datePipe.transform(me,"yyyy.MM.dd - HH.mm.ss.SS")}.${ae}`}generateTempFilename($,ae,me,ye=new Date){return $[$.length-1]===this.dirSeparator&&($=$.slice(0,$.length-1)),`${$}${this.dirSeparator}${ae} ${this.datePipe.transform(ye,"yyyy.MM.dd - HH.mm.ss.SS")}.${me}`}showDeleteSnackbar($){let ae=!0;const me=$.length,ye=1===me?"confirmation.deletedTitle":"confirmation.deletedTitleMulti";return $.length<=0?(0,D.of)(!1):new y.y(j=>{(0,T.aj)([this.translateService.get(ye,{arg:me}),this.translateService.get("confirmation.undo")]).pipe((0,s.zg)(([K,Z])=>{const L=this.dialogHelper.openSnackBar(K,Z);return L.onAction().subscribe(()=>{ae=!1}),L.afterDismissed()}),(0,s.zg)(()=>(ae&&this.galleryDeleteCountEvent($.length),(0,D.of)(!0))),(0,s.zg)(()=>(0,r.D)($)),(0,s.zg)(K=>ae?this.removeItem(K.fullFilename):(0,D.of)(!1)),(0,f.Z)()).subscribe(K=>{j.next(K),j.complete()})})}getFolderContents($){return this.setWorkingFolder($).pipe((0,l.U)(()=>this.cacheService.getCurrentPopFolder()))}getAllData(){const $=this.cacheService.directoryList,ae=[];return this.allItems.length=0,0===$.length?(this.checkIfThereIsNoData(),(0,D.of)([])):($.forEach(me=>{ae.push(this.getFolderContents(me))}),(0,a.z)(...ae).pipe((0,l.U)(me=>{me.forEach(ye=>{this.allItems.push(ye)})}),(0,f.Z)(),(0,l.U)(()=>this.filterAll(!0))))}deleteItems($){if(this.logger.info("Remove clicked"),0===$.length)return void this.logger.info("no selected item");const ae=$.length>1,X={title:ae?"confirmation.confirmDeleteTitleMulti":"confirmation.confirmDeleteTitle",query:ae?"confirmation.confirmDeleteMulti":"confirmation.confirmDelete",queryParam:{arg1:ae?$.length:"0"},action1:"confirmation.NotRightNow",action2:"confirmation.remove"};let j=!1;const K=this.filteredItems.slice(),Z=this.modifiedItems.slice(),L=this.allItems.slice(),W=()=>{setTimeout(()=>{this.allItems=L,this.modifiedItems=Z,this.filteredItems=K,this.filterAll(this.allItems.length===this.filteredItems.length),this.filteredData$.next(this.filteredItems),this.checkIfThereIsNoData(),this.galleryAction(x.DCd.DeleteUndo),this.deleteCompleted$.next(!0)},0)};this.dialogHelper.openAlertDialog(X).pipe((0,s.zg)(te=>te.afterClosed()),(0,c.h)(te=>te===G.DX.Action2),(0,p.b)(()=>this.deleteCompleted$.next(!0)),(0,s.zg)(()=>(0,r.D)($)),(0,p.b)(te=>{this.arrayDeleteFile(te,this.filteredItems),this.arrayDeleteFile(te,this.modifiedItems),this.arrayDeleteFile(te,this.allItems),this.filterAll(this.allItems.length===this.filteredItems.length),this.filteredData$.next(this.filteredItems),this.checkIfThereIsNoData()}),(0,f.Z)(),(0,p.b)(()=>this.filteredItems=this.filteredItems.slice()),(0,s.zg)(()=>this.showDeleteSnackbar($)),(0,p.b)(te=>j=te),(0,c.h)(te=>!0===te),(0,p.b)(()=>{})).subscribe(()=>{},()=>{j||W()},()=>{j||W()})}arrayDeleteFile($,ae){const me=ae.indexOf($);me>=0&&ae.splice(me,1)}initializeFilters(){this.initializeGameFilters(),this.initializeMediaFilters(),this.initializeHighlightsFilters(!0)}initializeGameFilters(){this.gameItems.length=0,this.allItems.sort(($,ae)=>$.fullFilename.localeCompare(ae.fullFilename)),this.allItems.forEach($=>{this.gameItems.find(ae=>ae.label===$.folder)||this.gameItems.push({label:$.folder,value:0,filtered:!1,children:null,cmsId:$.cmsId})})}initializeMediaFilters(){const $=g.Yk.Common.Gallery.FileType.video,me=[{menu:"filter.Highlight",type:$,subtype:g.Yk.Common.Gallery.SubType.Highlight},{menu:"filter.InstantReplay",type:$,subtype:g.Yk.Common.Gallery.SubType.InstantReplay},{menu:"filter.Recording",type:$,subtype:g.Yk.Common.Gallery.SubType.Manual},{menu:"filter.Montage",type:$,subtype:g.Yk.Common.Gallery.SubType.Montage},{menu:"filter.Screenshot",type:g.Yk.Common.Gallery.FileType.image,subtype:g.Yk.Common.Gallery.SubType.Normal}];this.mediaItems.length=0,me.forEach(ye=>{this.mediaItems.push({label:ye.menu,type:ye.type,subtype:ye.subtype,value:0,filtered:!1,children:null})})}tryTranslateHighlightLabel($){const ae=`highlightLabels.${$}`;let me=this.translateService.instant(ae);return me===ae&&(me=$),me}initializeHighlightsFilters($){$&&(this.highlightItems.length=0),this.allItems.forEach(ae=>{const me=this.tryTranslateHighlightLabel(ae.hlName);this.highlightItems.find(ye=>ye.label===me)||""!==ae.hlName&&this.highlightItems.push({label:me,value:0,filtered:!1,children:null,hlDefId:ae.hlDefinitionId})}),this.globalHighlightCount=this.highlightItems.length}filterAll($){return $&&(this.initializeFilters(),this.filterInit=!0),this.modifiedItems=this.allItems.slice(),this.filterBasedOnGames(),this.modifiedItems=this.filteredItems.slice(),this.filterBasedOnMedia(),this.modifiedItems=this.filteredItems.slice(),this.filterBasedOnHighlight(),this.filterInit&&(this.filterInit=!1),this.sortFilteredData(this.sortType,!1),this.filteredItems}filterBasedOnGames(){this.filteredItems.length=0;let $=!0;return this.gameItems.forEach(ae=>{ae.filtered&&($=!1),ae.value=0}),this.modifiedItems.forEach(ae=>{const me=this.gameItems.find(ye=>ye.label===ae.folder);me&&(($||me||this.filterInit)&&me.value++,($||me.filtered)&&this.filteredItems.push(ae))}),this.filteredItems}filterBasedOnMedia(){this.filteredItems.length=0;let $=!0;return this.mediaItems.forEach(ae=>{ae.filtered&&($=!1),ae.value=0}),this.modifiedItems.forEach(ae=>{let me=this.mediaItems.find(ye=>ye.type===ae.file.type&&ye.subtype===ae.file.subtype);me||ae.file.type===g.Yk.Common.Gallery.FileType.video&&ae.file.subtype===g.Yk.Common.Gallery.SubType.Normal&&(me=this.mediaItems.find(ye=>ye.subtype===g.Yk.Common.Gallery.SubType.Manual)),me||ae.file.type===g.Yk.Common.Gallery.FileType.image&&ae.file.subtype===g.Yk.Common.Gallery.SubType.Highlight&&(me=this.mediaItems.find(ye=>ye.subtype===g.Yk.Common.Gallery.SubType.Highlight)),me||ae.file.type===g.Yk.Common.Gallery.FileType.image&&(ae.file.subtype===g.Yk.Common.Gallery.SubType.Normal_Ansel||ae.file.subtype===g.Yk.Common.Gallery.SubType.SuperResolution||ae.file.subtype===g.Yk.Common.Gallery.SubType.SuperResolution_Oversized||ae.file.subtype===g.Yk.Common.Gallery.SubType.SubType_360Mono||ae.file.subtype===g.Yk.Common.Gallery.SubType.Stereo||ae.file.subtype===g.Yk.Common.Gallery.SubType.SubType_360Stereo||ae.file.subtype===g.Yk.Common.Gallery.SubType.Exr)&&(me=this.mediaItems.find(ye=>ye.type===g.Yk.Common.Gallery.FileType.image)),me||this.logger.error("An unknown type was encountered: ",ae.file.type),($||me||this.filterInit)&&me.value++,($||me.filtered)&&this.filteredItems.push(ae)}),this.filteredItems}filterBasedOnHighlight(){const $=this.highlightItems.slice();this.initializeHighlightsFilters(!1);const ae=this.highlightItems.filter(ye=>this.modifiedItems.find(ue=>this.tryTranslateHighlightLabel(ue.hlName)===ye.label));this.highlightItems=ae.slice();let me=!0;return this.highlightItems.forEach(ye=>{const ue=$.findIndex(X=>ye.label===X.label);ue>=0&&(ye.filtered=$[ue].filtered),ye.filtered&&(me=!1),ye.value=0}),this.filteredItems.length=0,this.modifiedItems.forEach(ye=>{const ue=this.tryTranslateHighlightLabel(ye.hlName),X=this.highlightItems.find(j=>j.label===ue);(X||!X&&me)&&(X&&X.value++,(me||X&&X.filtered)&&this.filteredItems.push(ye))}),this.highlightItems.sort((ye,ue)=>ye.label.localeCompare(ue.label)),this.filteredItems}gameFilterChanged($){this.logger.info("Game Filter: ",$);const ae=this.gameItems.find(me=>me.label===$.label);ae&&(ae.filtered=$.filtered),this.filterAll(!1),this.galleryFilterEvent(x.NlQ.Game,$.label,$.filtered,$.cmsId)}mediaFilterChanged($){this.logger.info("Media Filter: ",$);const ae=this.mediaItems.find(ye=>ye.label===$.label);let me;switch(ae&&(ae.filtered=$.filtered),this.filterAll(!1),$.type){case"image":me=I.DW.Screenshot;break;case"video":switch($.subtype){case"Highlight":me=I.DW.Highlight;break;case"InstantReplay":me=I.DW.InstantReplay;break;case"Manual":me=I.DW.Recording;break;case"Montage":me=I.DW.Montage}}this.galleryFilterEvent(x.NlQ.Media,me,$.filtered)}highlightFilterChanged($){this.logger.info("Highlight Filter: ",$);const ae=this.highlightItems.find(me=>me.label===$.label);ae&&(ae.filtered=$.filtered),this.filterAll(!1),this.galleryFilterEvent(x.NlQ.Highlights,$.hlDefId,$.filtered)}sortFilteredData($,ae){$===I.ER.newest?(this.filteredItems.sort((me,ye)=>new Date(ye.date).getTime()-new Date(me.date).getTime()),ae&&this.gallerySortEvent(x._LZ.Newest)):$===I.ER.oldest?(this.filteredItems.sort((me,ye)=>new Date(me.date).getTime()-new Date(ye.date).getTime()),ae&&this.gallerySortEvent(x._LZ.Oldest)):$===I.ER.atoz?(this.filteredItems.sort((me,ye)=>me.fullFilename.localeCompare(ye.fullFilename)),ae&&this.gallerySortEvent(x._LZ.AtoZ)):$===I.ER.ztoa&&(this.filteredItems.sort((me,ye)=>ye.fullFilename.localeCompare(me.fullFilename)),ae&&this.gallerySortEvent(x._LZ.ZtoA)),this.sortType!==$&&(this.sortType=$,this.dBStore.setItem(this.sortKey,this.sortType).subscribe(()=>{this.logger.info("Sort Key storage updated")},me=>{this.logger.error("Error while updating Sort Key storage: ",me)})),this.sortFilteredActivity($),this.filteredData$.next(this.filteredItems)}sortFilteredActivity($){0!==this.activityItems.length&&($===I.ER.newest?this.activityItems.sort((ae,me)=>new Date(me.playStarted).getTime()-new Date(ae.playStarted).getTime()):$===I.ER.oldest?this.activityItems.sort((ae,me)=>new Date(ae.playStarted).getTime()-new Date(me.playStarted).getTime()):$===I.ER.atoz?this.activityItems.sort((ae,me)=>ae.gameName.localeCompare(me.gameName)):$===I.ER.ztoa&&this.activityItems.sort((ae,me)=>me.gameName.localeCompare(ae.gameName)))}getSortKey(){return this.dBStore.getItem(this.sortKey).pipe((0,l.U)($=>{if($)return this.logger.info("Sort Key: ",$),$;this.logger.info("SortType not found in the storage")}),(0,u.K)($=>(this.logger.error("Could not load SortType from the storage: ",JSON.stringify($)),(0,D.of)(void 0))))}galleryAction($){const ae={userAction:$};this.logger.info("Telemetry Gallery User Action: ",ae),this.telemetryService.push(new x.yOt(ae))}getTelemetrySubtype($){let ae;switch($){case"Highlight":ae=x.MsO.Highlight;break;case"Normal":ae=x.MsO.Normal;break;case"Manual":ae=x.MsO.Manual;break;case"InstantReplay":ae=x.MsO.InstantReplay;break;case"Montage":ae=x.MsO.Montage;break;default:this.logger.error("Unknown subtype: ",$),ae=x.MsO.Normal}return ae}getAge($){let ae=0;const ye=void 0!==$&&E($).isValid()?Date.parse($):0;return ae=Date.now()-ye,ae}galleryCaptureAction($,ae){let me=0;$!==x.ryx.Add&&(me=this.getAge(ae.date));const ye="video"===ae.fileType?x.hAb.Video:x.hAb.Image,ue=this.getTelemetrySubtype(ae.fileSubType.toString());this.galleryContentEvent({eventType:$,mediaType:ye,mediaSubtype:ue,game:ae.DRSProfileName,cmsId:ae.cmsId||-1,filesizeKB:ae.fileSizeKB,durationMs:ae.msDuration,ageMs:me,errorType:"",errorDetails:""})}galleryViewAction($,ae){const me=this.getAge(ae.date),X={eventType:$,mediaType:"video"===ae.file.type?x.hAb.Video:x.hAb.Image,mediaSubtype:this.getTelemetrySubtype(ae.file.subtype),game:ae.file.drsProfileName,cmsId:ae.cmsId||-1,filesizeKB:Number(ae.fileSize),durationMs:ae.msDuration,ageMs:me,errorType:"",errorDetails:""};this.galleryContentEvent(X)}galleryContentEvent($){this.logger.info("Telemetry ContentEventInfo: ",$),this.telemetryService.push(new x.HyT($))}galleryDeleteCountEvent($){const ae={count:$};this.logger.info("Telemetry Delete count: ",ae),this.telemetryService.push(new x.tZp(ae))}gallerySortEvent($){const ae={type:$};this.logger.info("Telemetry Gallery Sort: ",ae),this.telemetryService.push(new x.DUy(ae))}galleryFilterEvent($,ae,me,ye){const ue={type:$,item:ae,filtered:me?x.wye.TRUE:x.wye.FALSE,cmsId:void 0!==ye?ye:0};this.logger.info("Telemetry Gallery Filter: ",ue),this.telemetryService.push(new x.AVX(ue))}}return se.\u0275fac=function($){return new($||se)(v.LFG(O.ed),v.LFG(O.dF),v.LFG(C.H),v.LFG(O.MC),v.LFG(_.Q),v.LFG(F.sK),v.LFG(V.M),v.LFG(b.uU),v.LFG(B.y0))},se.\u0275prov=v.Yz7({token:se,factory:se.\u0275fac,providedIn:"root"}),se})()},62522:(He,de,e)=>{"use strict";e.d(de,{w:()=>o});var n=e(81134),i=e(61786),D=e(45871),m=e(33927),y=e(18293),T=e(6484),r=e(2984),a=e(12556),s=e(2316),p=e(58283),l=e(43124);let o=(()=>{class f{constructor(g,I,G,x){this.bridgeService=g,this.loggingService=I,this.translateService=G,this.telemetryService=x,this.resList=[],this.title="",this.defaultTitle="",this.subtitle="",this.defaultSubtitle="",this.celebrationIndex=0,this.transitionIndex=0,this.filterIndex=0,this.montageCloudDataValid=!1,this.username=this.translateService.instant("montage.Unknown"),this.processStart=0,this.logger=this.loggingService.getLogger("MontageService"),this.mediaDirectory=""}get mediaDir(){return this.mediaDirectory}set mediaDir(g){this.mediaDirectory=g.slice(-1).match(/[/\\]/)?g:g+"/"}cancelMontage(){const g={userAction:a.bOD.Cancel,timeSinceStart:Date.now()-this.processStart};return this.telemetryService.push(new a.Mbw(g)),this.bridgeService.executeCommand(r.Gh.Common.Gallery.CancelMontage).pipe((0,m.U)(()=>(this.metrics.state=a._cC.Cancel,this.metrics.durationToCreateMs=Date.now()-this.processStart,this.logger.info("Montage Cancel Metrics: ",this.metrics),this.telemetryService.push(new a.DL8(this.metrics)),!0)),(0,y.K)(I=>(this.metrics.errorDetails=JSON.stringify(I),this.logger.error(`Error canceling montage: ${I}`),this.telemetryService.push(new a.DL8(this.metrics)),(0,n.of)(!1))))}init(){return this.logger.info("Initialize"),Promise.resolve(!0)}getMontageCloudData(){return this.bridgeService.executeCommand(r.Gh.Common.Gallery.GetMontageCloudConfig,{}).pipe((0,m.U)(g=>(this.logger.info("Montage Cloud Data: ",g),this.montageCloudData=g,this.montageCloudDataValid=!0,!0),g=>(this.logger.error(`Error fetching montage cloud data. ${g.message}`),!1)),(0,y.K)(g=>(this.logger.error(`Error fetching montage cloud data. ${g.message}`),(0,n.of)(!1))))}initializeMontageMetrics(){this.logger.info("Initialize Montage Session"),this.metrics={state:a._cC.Unknown,numberOfClips:0,numberOfDifferentGames:0,itemsDeleted:0,itemsRearranged:0,titleSequenceChanged:a.wye.FALSE,subtitleSequenceChanged:a.wye.FALSE,averageClipLengthMs:0,lengthOfMontageMs:0,durationToCreateMs:0,celebration:"",mediaTypeCountHighlight:0,mediaTypeCountNormal:0,mediaTypeCountManual:0,mediaTypeCountMontage:0,games:"",errorDetails:""}}updateMetrics(g){this.telemetryService.push(new a.Mbw({userAction:a.bOD.Create,timeSinceStart:0})),this.processStart=Date.now(),this.metrics.numberOfClips=g.length;const G=[];let x=0;this.metrics.mediaTypeCountHighlight=0,this.metrics.mediaTypeCountNormal=0,this.metrics.mediaTypeCountManual=0,this.metrics.mediaTypeCountMontage=0,g.forEach(P=>{switch(void 0===G.find(v=>v===P.cmsId)&&G.push(P.cmsId),x+=P.videoDuration,P.mediaType){case a.MsO.Highlight:this.metrics.mediaTypeCountHighlight++;break;case a.MsO.Normal:this.metrics.mediaTypeCountNormal++;break;case a.MsO.Manual:this.metrics.mediaTypeCountManual++;break;case a.MsO.Montage:this.metrics.mediaTypeCountMontage++}});const E=G.length-1;this.metrics.games="",G.forEach((P,v)=>{this.metrics.games+=(P="0"===P?"-1":P)+(v!==E?",":"")}),this.metrics.numberOfDifferentGames=G.length,this.metrics.averageClipLengthMs=Math.round(x/this.metrics.numberOfClips),this.metrics.celebration=this.getCelebration()}montageComplete(g){this.metrics.lengthOfMontageMs=g,this.logger.info("Telemetry Montage Metrics: ",this.metrics),this.telemetryService.push(new a.DL8(this.metrics))}getCelebration(){var g,I,G;return(null===(G=null===(I=null===(g=this.montageCloudData)||void 0===g?void 0:g.montageConfig)||void 0===I?void 0:I.celebrations)||void 0===G?void 0:G.length)>0?this.montageCloudData.montageConfig.celebrations[this.celebrationIndex].id:"none"}getVideoDimensionsOf(g){return new i.y(I=>{const G=document.createElement("video");G.addEventListener("loadedmetadata",()=>{this.resList.push({filename:g,resolution:{width:G.videoWidth,height:G.videoHeight}}),G.src="",I.next(!0),I.complete()},!1),G.src=T.qR+g})}launchMontageRecipe(g,I,G,x){return this.logger.info("Montage Inputs: ",g),this.logger.info("Montage Story : ",I),this.logger.info("Montage Recipe: ",G),this.logger.info("Montage Output: ",x),this.bridgeService.executeCommand(r.Gh.Common.Gallery.CreateMontageFromRecipe,{inputs:g,storyboard:I,recipe:G,output:x}).pipe((0,y.K)(E=>(this.logger.info("CreateMontage Error1: ",E),this.metrics.state=a._cC.Failure,this.metrics.errorDetails=JSON.stringify(E),this.telemetryService.push(new a.DL8(this.metrics)),(0,D._)(E))),(0,m.U)(()=>(this.logger.info("CreateMontage Success!"),this.metrics.state=a._cC.Create,this.metrics.durationToCreateMs=Date.now()-this.processStart,x),E=>(this.logger.info("CreateMontage Error2: ",E),this.metrics.state=a._cC.Failure,this.metrics.errorDetails=JSON.stringify(E),this.telemetryService.push(new a.DL8(this.metrics)),(0,D._)(E))))}createMontageFromRecipe(g,I,G){this.updateMetrics(g);const x=[];for(const O of g){const C=this.resList.find(_=>_.filename===O.video);x.push({details:{path:O.video,duration:O.videoDuration,width:C.resolution.width,height:C.resolution.height,highlightType:O.highlightName,filter:this.montageCloudData.montageConfig.filters[this.filterIndex].id,source:{app:"Source app string here",method:"Source method string here"},transition:{kind:this.montageCloudData.montageConfig.transitions[this.transitionIndex].id,speed:1},cmsid:O.cmsId},inputFileType:r.Yk.Common.Gallery.InputFileType.video,edgeLog:O.edgeLog})}const E=""!==this.title?this.title:this.translateService.instant("montage.BestGamingMoments"),P=""!==this.subtitle?this.subtitle:this.translateService.instant("montage.ByUsername",{arg:this.username}),v={titleSequence:{seqType:r.Yk.Common.Gallery.SeqType.titleBasic,seqDetails:{txtTitle:E,txtSubtitle:P}},celebration:this.getCelebration(),brandNV:{brandType:r.Yk.Common.Gallery.BrandType.brandSliderInOnly,brandDetails:{position:r.Yk.Common.Gallery.Position.atEnd}}};return this.launchMontageRecipe(x,v,G,I)}}return f.\u0275fac=function(g){return new(g||f)(s.LFG(T.dF),s.LFG(T.ed),s.LFG(p.sK),s.LFG(l.y0))},f.\u0275prov=s.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},66201:(He,de,e)=>{"use strict";e.d(de,{H:()=>y});var n=e(33927),i=e(2316),D=e(6484),m=(()=>{return(T=m||(m={})).Windows="Windows",T.Mac="Mac",m;var T})();let y=(()=>{class T{constructor(a,s){this.systemInfoService=s,this.logger=a.getLogger("OsService")}init(){return this.logger.info("Initialize"),this.systemInfoService.getSystemInfo().pipe((0,n.U)(a=>(this.logger.info("Platform: ",a.Platform),this.isWindows=a.Platform===m.Windows,!0)))}getDirSeparator(){return this.isWindows?"\\":"/"}getFileBaseSize(){return this.isWindows?1024:1e3}getOSType(){return this.isWindows?m.Windows:m.Mac}}return T.\u0275fac=function(a){return new(a||T)(i.LFG(D.ed),i.LFG(D.Ob))},T.\u0275prov=i.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},49436:(He,de,e)=>{"use strict";e.d(de,{V:()=>t});var n=e(54364),i=e(76491),D=e(85816),m=e(98636),y=e(2316),T=e(6484),r=e(66201),a=e(92732),s=e(1198),p=e(62522),l=e(77305);let t=(()=>{class w{constructor(u,o,f,c,g,I,G){this.injector=u,this.loggingService=o,this.osService=f,this.cacheService=c,this.galleryService=g,this.montage=I,this.trimService=G,this.initComplete$=new i.X(!1)}init(){return this.logger=this.loggingService.getLogger("OOGG ServiceLoader"),this.logger.info("OOGG InitData Started"),this.injector.get(n.V_,Promise.resolve(null)).finally(()=>this.initBaseServices().toPromise())}initBaseServices(){return this.montage.init(),this.osService.init().pipe((0,D.zg)(()=>(this.cacheService.init(),this.trimService.init(),this.galleryService.init())),(0,m.b)(()=>{this.initComplete$.next(!0),this.logger.info("OOGG InitData complete")}))}isInitComplete(){return this.initComplete$.asObservable()}}return w.\u0275fac=function(u){return new(u||w)(y.LFG(y.zs3),y.LFG(T.ed),y.LFG(r.H),y.LFG(a.Q),y.LFG(s.rj),y.LFG(p.w),y.LFG(l.S))},w.\u0275prov=y.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},77305:(He,de,e)=>{"use strict";e.d(de,{S:()=>a});var n=e(2984),i=e(33927),D=e(18293),m=e(85816),y=e(81134),T=e(2316),r=e(6484);let a=(()=>{class s{constructor(l,t){this.loggingService=l,this.bridgeService=t,this.logger=this.loggingService.getLogger("TrimService")}init(){this.logger.info("Initializing Trim Service")}trim(l){return this.bridgeService.executeCommand(n.Gh.Common.Gallery.Trim,l).pipe((0,i.U)(t=>(this.logger.info("Trim complete: ",t),!0),t=>(this.logger.error("Trim failed: ",t),!0)),(0,D.K)(t=>(this.logger.error("Trim error: ",t),(0,y.of)(!1))))}moveFile(l,t){return this.bridgeService.executeCommand(n.Gh.Common.Gallery.MoveFile,{source:l,destination:t})}copyFile(l,t){return this.bridgeService.executeCommand(n.Gh.Common.Gallery.CopyFile,{source:l,destination:t})}deleteFile(l){return this.bridgeService.executeCommand(n.Gh.Common.Gallery.RemoveGalleryItem,{file:l})}overwriteOriginal(l,t){return this.logger.info("Overwriting original!"),this.deleteFile(t).pipe((0,m.zg)(()=>(this.logger.info("Original deleted!"),this.moveFile(l,t))))}getMetaData(l){return this.bridgeService.executeCommand(n.Gh.Common.Gallery.GetFileMetadata,{file:l})}}return s.\u0275fac=function(l){return new(l||s)(T.LFG(r.ed),T.LFG(r.dF))},s.\u0275prov=T.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},51711:(He,de,e)=>{"use strict";e.r(de),e.d(de,{GalleryModule:()=>at});var n=e(54364),i=e(71258),D=e(66660),m=e(18137),y=e(6484),T=e(83469),r=e(9170),a=e(20088),s=e(2316),p=e(99520);let l=(()=>{class ve{constructor(Ie,$e){this.cs=Ie,this.router=$e}resolve(Ie,$e){return this.cs.isInitComplete().pipe((0,r.h)(ze=>!0===ze),(0,a.P)())}}return ve.\u0275fac=function(Ie){return new(Ie||ve)(s.LFG(p.Vu),s.LFG(i.F0))},ve.\u0275prov=s.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})();var t=e(79441),w=e(90490),h=e(22663),u=e(33927),o=e(12556),f=e(2281),c=e(74984),g=e(58283),I=e(71570),G=e(52529);const x=["filterSideNav"],E=["grid"];function P(ve,Ze){if(1&ve&&(s.TgZ(0,"span",24),s._uU(1),s.qZA()),2&ve){const Ie=s.oxw(2);s.xp6(1),s.Oqu(Ie.countDisplay)}}function v(ve,Ze){if(1&ve){const Ie=s.EpF();s.TgZ(0,"div",25),s.TgZ(1,"button",26),s.NdJ("click",function(){return s.CHM(Ie),s.oxw(2).onShowGallery()}),s.ALo(2,"translate"),s._UZ(3,"mat-icon",10),s.qZA(),s.TgZ(4,"button",26),s.NdJ("click",function(){return s.CHM(Ie),s.oxw(2).onShowActivity()}),s.ALo(5,"translate"),s._UZ(6,"mat-icon",10),s.qZA(),s.qZA()}2&ve&&(s.xp6(1),s.Q6J("matTooltip",s.lcZ(2,4,"tooltips.Grid")),s.xp6(2),s.Q6J("svgIcon","view_grid"),s.xp6(1),s.Q6J("matTooltip",s.lcZ(5,6,"tooltips.Summary")),s.xp6(2),s.Q6J("svgIcon","view_summary"))}function O(ve,Ze){if(1&ve){const Ie=s.EpF();s.ynx(0),s.TgZ(1,"button",31),s.NdJ("click",function(){const _t=s.CHM(Ie).$implicit;return s.oxw(3).onSortClicked(_t.type)}),s.TgZ(2,"div",15),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.BQk()}if(2&ve){const Ie=Ze.$implicit,$e=s.oxw(3);s.xp6(1),s.ekj("active",Ie.type==$e.sortType),s.xp6(2),s.Oqu(s.lcZ(4,3,Ie.label))}}function C(ve,Ze){if(1&ve&&(s.TgZ(0,"div",27),s.TgZ(1,"button",28),s._UZ(2,"mat-icon",10),s._uU(3),s.qZA(),s.TgZ(4,"mat-menu",29,30),s.YNc(6,O,5,5,"ng-container",16),s.qZA(),s.qZA()),2&ve){const Ie=s.MAs(5),$e=s.oxw(2);s.xp6(1),s.Q6J("matMenuTriggerFor",Ie),s.xp6(1),s.Q6J("svgIcon","sort"),s.xp6(1),s.hij(" ",$e.sortLabel," "),s.xp6(3),s.Q6J("ngForOf",$e.sortMenu)}}function _(ve,Ze){if(1&ve){const Ie=s.EpF();s.TgZ(0,"div",32),s.TgZ(1,"button",26),s.NdJ("click",function(){return s.CHM(Ie),s.oxw(2).onFilterToggle()}),s.ALo(2,"translate"),s._UZ(3,"mat-icon",10),s.qZA(),s.qZA()}2&ve&&(s.xp6(1),s.Q6J("matTooltip",s.lcZ(2,2,"tooltips.Filter")),s.xp6(2),s.Q6J("svgIcon","filter_list"))}function F(ve,Ze){if(1&ve&&(s.TgZ(0,"div",19),s.YNc(1,P,2,1,"span",20),s.YNc(2,v,7,8,"div",21),s.YNc(3,C,7,4,"div",22),s.YNc(4,_,4,4,"div",23),s.qZA()),2&ve){const Ie=s.oxw();s.xp6(1),s.Q6J("ngIf",Ie.showSortMenu),s.xp6(1),s.Q6J("ngIf",Ie.activityFeedEnabled),s.xp6(1),s.Q6J("ngIf",Ie.showSortMenu),s.xp6(1),s.Q6J("ngIf",Ie.showFilterMenu)}}function V(ve,Ze){if(1&ve){const Ie=s.EpF();s.ynx(0),s.TgZ(1,"div",33),s.TgZ(2,"mat-checkbox",34),s.NdJ("ngModelChange",function(ze){return s.CHM(Ie).$implicit.filtered=ze})("change",function(){const _t=s.CHM(Ie).$implicit;return s.oxw().onGameItemChanged(_t)}),s.qZA(),s.TgZ(3,"span",35),s._uU(4),s.qZA(),s.TgZ(5,"span",36),s._uU(6),s.qZA(),s.qZA(),s.BQk()}if(2&ve){const Ie=Ze.$implicit;s.xp6(2),s.Q6J("ngModel",Ie.filtered),s.xp6(2),s.Oqu(Ie.label),s.xp6(2),s.hij("(",Ie.value,")")}}function b(ve,Ze){if(1&ve){const Ie=s.EpF();s.ynx(0),s.TgZ(1,"div",33),s.TgZ(2,"mat-checkbox",37),s.NdJ("ngModelChange",function(ze){return s.CHM(Ie).$implicit.filtered=ze})("change",function(){const _t=s.CHM(Ie).$implicit;return s.oxw().onMediaItemChanged(_t)}),s.qZA(),s.TgZ(3,"span",38),s._uU(4),s.ALo(5,"translate"),s.qZA(),s.TgZ(6,"span",36),s._uU(7),s.qZA(),s.qZA(),s.BQk()}if(2&ve){const Ie=Ze.$implicit;s.xp6(2),s.Q6J("ngModel",Ie.filtered)("disabled",0===Ie.value),s.xp6(1),s.ekj("disabled-opacity",0===Ie.value),s.xp6(1),s.Oqu(s.lcZ(5,8,Ie.label)),s.xp6(2),s.ekj("disabled-opacity",0===Ie.value),s.xp6(1),s.hij("(",Ie.value,")")}}function B(ve,Ze){if(1&ve){const Ie=s.EpF();s.ynx(0),s.TgZ(1,"div",33),s.TgZ(2,"mat-checkbox",34),s.NdJ("ngModelChange",function(ze){return s.CHM(Ie).$implicit.filtered=ze})("change",function(){const _t=s.CHM(Ie).$implicit;return s.oxw().onHighlightItemChanged(_t)}),s.qZA(),s.TgZ(3,"span",38),s._uU(4),s.ALo(5,"translate"),s.qZA(),s.TgZ(6,"span",36),s._uU(7),s.qZA(),s.qZA(),s.BQk()}if(2&ve){const Ie=Ze.$implicit;s.xp6(2),s.Q6J("ngModel",Ie.filtered),s.xp6(2),s.Oqu(s.lcZ(5,3,Ie.label)),s.xp6(3),s.hij("(",Ie.value,")")}}function U(ve,Ze){1&ve&&(s.TgZ(0,"div"),s.TgZ(1,"span",39),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.qZA()),2&ve&&(s.xp6(2),s.Oqu(s.lcZ(3,1,"filter.NoHighlightsAtAll")))}function A(ve,Ze){1&ve&&(s.TgZ(0,"div"),s.TgZ(1,"span",39),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.qZA()),2&ve&&(s.xp6(2),s.Oqu(s.lcZ(3,1,"filter.NoHighlights")))}function S(ve,Ze){1&ve&&s._UZ(0,"div")}const Y=function(ve){return{emptyWithWorkbar:ve}};function se(ve,Ze){if(1&ve&&(s.TgZ(0,"div",47),s._UZ(1,"mat-icon",48),s.TgZ(2,"div",49),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA()),2&ve){const Ie=s.oxw(3);s.Q6J("ngClass",s.VKq(5,Y,Ie.showFilterMenu)),s.xp6(3),s.hij(" ",s.xi3(4,2,Ie.emptyContainerString,Ie.emptyContainerParams)," ")}}function fe(ve,Ze){1&ve&&(s.TgZ(0,"div",50),s._UZ(1,"mat-spinner",51),s.qZA())}function $(ve,Ze){if(1&ve&&(s.YNc(0,se,5,7,"div",45),s.YNc(1,fe,2,0,"div",46)),2&ve){const Ie=s.oxw(2);s.Q6J("ngIf",Ie.dataInitialized),s.xp6(1),s.Q6J("ngIf",!Ie.dataInitialized)}}function ae(ve,Ze){if(1&ve){const Ie=s.EpF();s.TgZ(0,"nv-gallery-item",55),s.NdJ("dblclick",function(){const _t=s.CHM(Ie).$implicit;return s.oxw(3).openFile(_t)}),s.qZA()}if(2&ve){const Ie=Ze.$implicit,$e=Ze.scroll,ze=s.oxw(3);s.Q6J("item",Ie)("scrolling",$e)("activeItem",ze.galleryOpenItem)("thumbWidth",ze.thumbWidth)("thumbHeight",ze.thumbHeight)("initialDelay",ze.delay)("multiSelect",ze.multiSelectMode)}}function me(ve,Ze){if(1&ve){const Ie=s.EpF();s.TgZ(0,"nv-virtual-grid-container",52,53),s.NdJ("multiSelectMode",function(ze){return s.CHM(Ie),s.oxw(2).onMultiSelectMode(ze)})("multiSelectList",function(ze){return s.CHM(Ie),s.oxw(2).onMultiSelectList(ze)})("selectedItemChange",function(ze){return s.CHM(Ie),s.oxw(2).gallerySelection=ze})("selectedItemChange",function(ze){return s.CHM(Ie),s.oxw(2).selectedItemChanged(ze)})("keydown",function(ze){return s.CHM(Ie),s.oxw(2).openGalleryItem(ze)}),s.YNc(2,ae,1,7,"ng-template",null,54,s.W1O),s.qZA()}if(2&ve){const Ie=s.MAs(3),$e=s.oxw(2);s.Q6J("items",$e.galleryItems)("selectedItem",$e.gallerySelection)("itemHeight",$e.thumbHeight)("marginBottom",8)("itemWidth",$e.thumbWidth)("marginRight",8)("template",Ie)("topBottomPad",0)("sortType",$e.sortType)}}function ye(ve,Ze){if(1&ve&&(s.TgZ(0,"mat-sidenav-content",40),s.TgZ(1,"div",41),s.YNc(2,S,1,0,"div",42),s.YNc(3,$,2,2,"ng-template",null,43,s.W1O),s.YNc(5,me,4,9,"ng-template",null,44,s.W1O),s.qZA(),s.qZA()),2&ve){const Ie=s.MAs(4),$e=s.MAs(6),ze=s.oxw();s.xp6(2),s.Q6J("ngIf",ze.emptyContainerVisible||!ze.dataInitialized)("ngIfThen",Ie)("ngIfElse",$e)}}function ue(ve,Ze){1&ve&&s._UZ(0,"div")}function X(ve,Ze){if(1&ve&&(s.TgZ(0,"div",47),s._UZ(1,"mat-icon",48),s.TgZ(2,"div",49),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA()),2&ve){const Ie=s.oxw(2);s.Q6J("ngClass",s.VKq(4,Y,Ie.showFilterMenu)),s.xp6(3),s.hij(" ",s.lcZ(4,2,Ie.noActivityString)," ")}}function j(ve,Ze){if(1&ve&&(s.TgZ(0,"div",60),s._UZ(1,"nv-activity-item",61),s.qZA()),2&ve){const Ie=Ze.$implicit,$e=s.oxw(4);s.xp6(1),s.Q6J("item",Ie)("itemWidth",$e.panelWidth)("itemHeight",$e.panelHeight)("initialDelay",$e.delay)}}function K(ve,Ze){if(1&ve&&(s.TgZ(0,"div",58),s.YNc(1,j,2,4,"div",59),s.qZA()),2&ve){const Ie=s.oxw(3);s.xp6(1),s.Q6J("ngForOf",Ie.activityItems)}}function Z(ve,Ze){if(1&ve&&(s.TgZ(0,"div",60),s._UZ(1,"nv-activity-item",61),s.qZA()),2&ve){const Ie=Ze.$implicit,$e=s.oxw(4);s.xp6(1),s.Q6J("item",Ie)("itemWidth",$e.panelWidth)("itemHeight",$e.panelHeight)("initialDelay",$e.delay)}}function L(ve,Ze){if(1&ve&&(s.TgZ(0,"cdk-virtual-scroll-viewport",62,63),s.YNc(2,Z,2,4,"div",64),s.qZA()),2&ve){const Ie=s.oxw(3);s.Q6J("itemSize",Ie.panelHeight),s.xp6(2),s.Q6J("cdkVirtualForOf",Ie.activityItems)("cdkVirtualForTrackBy",Ie.activityIdentity)}}function W(ve,Ze){if(1&ve&&(s.YNc(0,K,2,1,"div",56),s.YNc(1,L,3,3,"cdk-virtual-scroll-viewport",57)),2&ve){const Ie=s.oxw(2);s.Q6J("ngIf",!Ie.useVirtualScrolling),s.xp6(1),s.Q6J("ngIf",Ie.useVirtualScrolling)}}function te(ve,Ze){if(1&ve&&(s.TgZ(0,"mat-sidenav-content",40),s.TgZ(1,"div",41),s.YNc(2,ue,1,0,"div",42),s.YNc(3,X,5,6,"ng-template",null,43,s.W1O),s.YNc(5,W,2,2,"ng-template",null,44,s.W1O),s.qZA(),s.qZA()),2&ve){const Ie=s.MAs(4),$e=s.MAs(6),ze=s.oxw();s.xp6(2),s.Q6J("ngIf",ze.noActivityData)("ngIfThen",Ie)("ngIfElse",$e)}}let Q=(()=>{class ve{constructor(Ie,$e,ze,_t,be,pt,Ot,Kt,nn,tn){this.appConfig=Ie,this.loggingService=$e,this.appBarService=ze,this.galleryService=_t,this.montageService=be,this.route=pt,this.router=Ot,this.translateService=Kt,this.domSanitizer=nn,this.matIconRegistry=tn,this.destroy$=new t.xQ,this.dataInitialized=!1,this.activityFeedEnabled=!1,this.useVirtualScrolling=!1,this.galleryItems=[],this.multiSelectMode=!1,this.multiSelectList=void 0,this.emptyContainerVisible=!1,this.emptyContainerString="gallery.NoEntriesYet",this.emptyContainerParams={},this.thumbWidth=p.dz.width,this.thumbHeight=p.dz.height,this.delay=!0,this.previewOpen=!1,this.montageEnabled=!1,this.showSortMenu=!0,this.showFilterMenu=!0,this.showActivity=!1,this.totalCount=0,this.countDisplay="",this.sortType=p.ER.newest,this.sortLabel="",this.sortMenu=[{type:p.ER.newest,label:"filter.NewestFirst"},{type:p.ER.oldest,label:"filter.OldestFirst"},{type:p.ER.atoz,label:"filter.GameAtoZ"},{type:p.ER.ztoa,label:"filter.GameZtoA"}],this.gameItems=[],this.mediaItems=[],this.highlightItems=[],this.globalHighlightCount=0,this.disableFilterClearButton=!0,this.activityItems=[],this.noActivityData=!0,this.noActivityString="summary.NoSummaryItems",this.panelWidth=1600,this.panelHeight=970,this.eventTimeout=null,this.logger=this.loggingService.getLogger("Gallery"),this.logger.info("Gallery started"),this.setAppBarInitial(),this.appBarService.actionClicked$.pipe((0,h.R)(this.destroy$)).subscribe(Mn=>{this.appBarClicked(Mn)}),this.matIconRegistry.addSvgIcon("hexBackground",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/img/hex_bg.svg"))}ngOnInit(){this.logger.info("ngOnInit started"),this.startTiming=f(),this.initializeGallery()}initializeGallery(){this.galleryService.initGalleryData().pipe((0,h.R)(this.destroy$)).subscribe(()=>{this.initialize();const Ie=f().diff(this.startTiming);this.logger.info("Time to initialize gallery: "+Ie+" ms"),this.dataInitialized=!0})}initialize(){var Ie;(null===(Ie=this.appConfig.oogg)||void 0===Ie?void 0:Ie.activityFeedEnabled)&&(this.activityFeedEnabled=!0),this.appBarService.setAppBarState(!0),this.montageEnabled=this.galleryService.montageAvailable,this.sortType=this.galleryService.sortType,this.sortLabel=this.translateService.instant(this.sortMenu.find($e=>$e.type===this.sortType).label)+"\u25be",this.galleryService.unselectAllItems(),this.galleryService.listenForFilteredDataChange().pipe((0,h.R)(this.destroy$)).subscribe($e=>{this.processData($e)}),this.galleryService.listenForEmptyStateChanged().pipe((0,h.R)(this.destroy$)).subscribe($e=>{this.showFilterMenu=!$e}),this.galleryService.listenForDeleteCompletion().pipe((0,h.R)(this.destroy$)).subscribe($e=>{$e&&this.onCancelMultiSelectClicked()}),this.montageEnabled&&!this.montageService.montageCloudDataValid&&this.montageService.getMontageCloudData().pipe((0,h.R)(this.destroy$)).subscribe($e=>{$e||(this.montageEnabled=!1),this.logger.info("Montage is "+(this.montageEnabled?"available":"not available"))}),this.processData(this.galleryService.getGalleryData()),this.galleryService.galleryAction(o.DCd.Enter)}ngAfterViewInit(){this.logger.info("Entry panelHeight: "+this.panelHeight),this.panelWidth=window.innerWidth-32,this.panelHeight=window.innerHeight-120,this.logger.info("Inner Window: "+window.innerHeight+" panelHeight: "+this.panelHeight)}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}onResize(Ie){const $e=window.innerWidth-32,ze=window.innerHeight-120;this.resizeThrottler(100,$e,ze)}resizeThrottler(Ie,$e,ze){this.eventTimeout||(this.eventTimeout=setTimeout(()=>{this.eventTimeout=null,this.panelWidth=$e,this.panelHeight=ze},Ie))}processData(Ie){this.galleryItems=Ie.slice(),this.galleryItems=this.galleryItems.filter(ze=>""!==ze.fullFilename),this.totalCount=this.galleryItems.length;const $e=this.galleryService.getAllItemsCount();if(this.disableFilterClearButton=this.totalCount===$e,this.countDisplay=this.totalCount===$e?this.translateService.instant("gallery.All",{arg:this.totalCount}):this.translateService.instant("gallery.ShowNofMItems",{arg1:this.totalCount,arg2:$e}),this.getFilters(),this.emptyContainerVisible=0===this.galleryItems.length,this.showSortMenu=!this.emptyContainerVisible,this.gallerySelection&&this.galleryItems.findIndex(ze=>ze===this.gallerySelection)<0&&(this.gallerySelection=void 0),this.multiSelectList&&this.multiSelectList.length>0){this.changeAppBarSelected(),this.galleryService.currentSelectedFilesData=this.getFinalMultiSelectList();const ze=this.galleryService.currentSelectedFilesData.length>0;this.onMultiSelectMode(ze),this.virtualGrid.refreshMultiSelectList(!ze)}return this.processActivityData(),!0}processActivityData(){!this.activityFeedEnabled||this.galleryService.getActivityData().pipe((0,h.R)(this.destroy$)).subscribe(Ie=>{null!==Ie?(this.activityItems=Ie.slice(),0===this.activityItems.length?this.noActivityData=!0:(this.activitySelection=this.activityItems[0],this.noActivityData=!1)):this.noActivityData=!0})}selectedItemChanged(Ie){this.gallerySelection=Ie,this.multiSelectMode||(this.galleryService.currentSelectedFilesData=[Ie])}selectedActivityChanged(Ie){this.activitySelection=Ie}onMultiSelectMode(Ie){this.multiSelectMode=Ie}onMultiSelectList(Ie){this.multiSelectList=Ie.slice(0),this.changeAppBarSelected(),this.galleryService.currentSelectedFilesData=this.getFinalMultiSelectList()}onCancelMultiSelectClicked(){var Ie;this.galleryService.unselectAllItems(),this.galleryItems.forEach($e=>$e.selected=!1),null===(Ie=this.virtualGrid)||void 0===Ie||Ie.cancelMultiSelect(),this.multiSelectList&&(this.multiSelectList.length=0)}getFinalMultiSelectList(){const Ie=[];return this.galleryItems.forEach($e=>{var ze;(null===(ze=this.multiSelectList)||void 0===ze?void 0:ze.find(_t=>_t.fullFilename===$e.fullFilename))&&Ie.push($e)}),Ie}openGalleryItem(Ie){"Enter"===Ie.key&&this.gallerySelection?this.openFile(this.gallerySelection):"Delete"===Ie.key&&this.onRemoveClicked()}openActivityItem(Ie){}openFile(Ie){this.logger.info("OpenFile: ",Ie),Ie.fullFilename&&!this.multiSelectMode&&(this.galleryService.currentFileData=this.gallerySelection,this.galleryOpenItem=this.gallerySelection,this.previewOpen||(this.galleryService.setMontageMode(!1),this.galleryService.galleryViewAction(o.ryx.Preview,Ie),this.router.navigate(["../preview"],{relativeTo:this.route.parent,skipLocationChange:!0}).then(()=>{})))}setAppBarInitial(){this.appBarService.clearIcons(),this.appBarService.setTitle({entry:"gallery.Gallery",params:{}}),this.appBarService.setInfo({entry:"",params:{}}),this.appBarService.setActive(!1),this.appBarService.setNavButtonToDefault(),this.appBarService.setTemplate({id:"",params:{}})}appBarClicked(Ie){"close"===Ie?this.multiSelectMode&&this.onCancelMultiSelectClicked():"delete"===Ie?this.onRemoveClicked():"montage"===Ie&&this.onMontageClicked()}changeAppBarSelected(){let Ie=0,$e=0;this.galleryItems.forEach(_t=>{this.multiSelectList.find(be=>be.fullFilename===_t.fullFilename)&&(Ie++,"image"!==_t.file.type&&$e++)});const ze=Ie===$e&&$e>1;0===Ie?this.setAppBarInitial():(this.appBarService.setActive(!0),this.appBarService.setNavButtonClose("common.cancelTitleCase"),this.appBarService.setTitle(1===Ie?{entry:"gallery.OneSelected",params:{}}:{entry:"gallery.XSelected",params:{arg:Ie}}),this.appBarService.setIcons([{id:"delete",icon:"delete_forever",tooltip:"tooltips.Remove",end:!0}])),this.montageEnabled&&(ze?this.appBarService.addIcon({id:"montage",icon:"montage",tooltip:"tooltips.Montage",end:!0}):this.appBarService.deleteIcon("montage"))}onFilterToggle(){this.filterSideNav.toggle().then(()=>{this.showActivity||this.processData(this.galleryService.getGalleryData())})}onFilterClearToggle(){this.galleryService.galleryAction(o.DCd.FiltersCleared),this.galleryService.filterAll(!0)}onSortClicked(Ie){this.sortType=Ie,this.sortLabel=this.translateService.instant(this.sortMenu.find($e=>$e.type===this.sortType).label)+"\u25be",this.galleryService.sortFilteredData(Ie,!0)}onMontageClicked(){this.logger.info("Montage clicked with "+this.multiSelectList.length+" items");let Ie=0;const $e=[];this.multiSelectList.forEach(ze=>{null===ze.data&&(Ie++,$e.push(this.getMissingThumb(ze)))}),Ie>0?(this.logger.info("Getting thumbs for "+Ie+" items"),(0,w.$R)(...$e).subscribe(()=>{this.logger.info("Completed updating montage thumbs!"),this.gotoMontage()})):this.gotoMontage()}getMissingThumb(Ie){return this.galleryService.getThumbnailForFile(Ie.fullFilename,this.thumbWidth,this.thumbHeight).pipe((0,u.U)($e=>(Ie.data=$e,!0)))}gotoMontage(){this.previewOpen||(this.galleryService.setMontageMode(!0),this.galleryService.galleryAction(o.DCd.Montage),this.router.navigate(["../preview"],{relativeTo:this.route.parent,skipLocationChange:!0}).then(()=>{}))}onRemoveClicked(){this.logger.info("Remove clicked"),this.galleryService.deleteItems(this.getFinalMultiSelectList())}getFilters(){this.gameItems=this.galleryService.gameItems,this.mediaItems=this.galleryService.mediaItems,this.globalHighlightCount=this.galleryService.globalHighlightCount,this.highlightItems=this.galleryService.highlightItems}onGameItemChanged(Ie){this.logger.info("Game menu changed to: ",Ie),this.galleryService.gameFilterChanged(Ie),this.processActivityData()}onMediaItemChanged(Ie){this.logger.info("Media menu changed to: ",Ie),this.galleryService.mediaFilterChanged(Ie),this.processActivityData()}onHighlightItemChanged(Ie){this.logger.info("Highlight menu changed to: ",Ie),this.galleryService.highlightFilterChanged(Ie),this.processActivityData()}onShowGallery(){this.logger.info("Loading Gallery"),this.showActivity=!1}onShowActivity(){this.logger.info("Loading Activity"),this.setAppBarInitial(),this.showActivity=!0}activityIdentity(Ie,$e){return console.log("Gallery index: "+Ie+" started: ",$e.gameName+" identity: "+$e.identity),$e.identity}}return ve.\u0275fac=function(Ie){return new(Ie||ve)(s.Y36(o.VKt),s.Y36(y.ed),s.Y36(c.ad),s.Y36(p.rj),s.Y36(p.wz),s.Y36(i.gz),s.Y36(i.F0),s.Y36(g.sK),s.Y36(I.H7),s.Y36(G.jv))},ve.\u0275cmp=s.Xpm({type:ve,selectors:[["oogg-gallery"]],viewQuery:function(Ie,$e){if(1&Ie&&(s.Gf(x,7),s.Gf(E,5)),2&Ie){let ze;s.iGM(ze=s.CRH())&&($e.filterSideNav=ze.first),s.iGM(ze=s.CRH())&&($e.virtualGrid=ze.first)}},hostBindings:function(Ie,$e){1&Ie&&s.NdJ("resize",function(_t){return $e.onResize(_t)},!1,s.Jf7)},decls:45,vars:25,consts:[["fxLayout","column","fxFlexFill","",1,"nv-oogg","oogg-gallery"],["fxLayout","row","class","work-bar",4,"ngIf"],["fxFlexFill","",1,"grid-offset"],["mode","side","position","end",1,"filter-area"],["filterSideNav",""],[1,"filter-data"],["fxLayout","column"],["fxLayout","row"],[1,"font-header6","filterHeader"],["mat-button","","fxFlex","none",1,"font-body1","nv-item-icon","complex-button","filter-close",3,"click"],[3,"svgIcon"],["fxFlex","grow"],["fxFlex","none","mat-button","",1,"font-body1","complex-button","hig-button-overlay",3,"disabled","click"],[1,"font-body2","clear-filter"],[1,"hig-button-overlay","filter-header"],[1,"font-body2"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","gallery-area",4,"ngIf"],["fxLayout","row",1,"work-bar"],["class","font-body2 count-display",4,"ngIf"],["class","activity-buttons","fxLayout","row",4,"ngIf"],["class","sortmenu",4,"ngIf"],["class","filtermenu",4,"ngIf"],[1,"font-body2","count-display"],["fxLayout","row",1,"activity-buttons"],["mat-button","","matTooltipClass","nv-oogg oogg-tooltip","fxFlex","none",1,"font-body1","nv-item-icon","complex-button",3,"matTooltip","click"],[1,"sortmenu"],["mat-button","","fxLayout","row",1,"font-body2",3,"matMenuTriggerFor"],["xPosition","after","yPosition","below","overlapTrigger","false",1,"max-width-menu-class"],["menu","matMenu"],["mat-menu-item","","fxLayout","row","fxLayoutAlign","start center",1,"nv-dropdown-menu","hig-button-overlay",3,"click"],[1,"filtermenu"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","none","nvAddKeyboardActivate","",3,"ngModel","ngModelChange","change"],["dir","auto","fxFlex","none",1,"font-body2","check-label"],["fxFlex","grow",1,"font-body2"],["fxFlex","none","nvAddKeyboardActivate","",3,"ngModel","disabled","ngModelChange","change"],["fxFlex","none",1,"font-body2","check-label"],["fxFlex","shrink",1,"font-body2","nohightlights-label"],[1,"gallery-area"],["fxFlex","","fxLayout","column"],[4,"ngIf","ngIfThen","ngIfElse"],["noGrid",""],["useGrid",""],["class","emptyContainer","fxLayout","column","fxLayoutAlign","center center",3,"ngClass",4,"ngIf"],["class","galleryInitializing","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"emptyContainer",3,"ngClass"],["svgIcon","hexBackground",1,"emptyBackground"],[1,"font-body2","emptyMessage"],["fxLayout","column","fxLayoutAlign","center center",1,"galleryInitializing"],["diameter","48","tabindex","-1","color","accent"],["tabIndex","0","fxFlex","","fxLayout","row","multiSelect","true","chunkFileMetadata","true",1,"nv-item-row",3,"items","selectedItem","itemHeight","marginBottom","itemWidth","marginRight","template","topBottomPad","sortType","multiSelectMode","multiSelectList","selectedItemChange","keydown"],["grid",""],["galleryTemplate",""],[3,"item","scrolling","activeItem","thumbWidth","thumbHeight","initialDelay","multiSelect","dblclick"],["class","scroll-container","fxLayout","column",4,"ngIf"],["class","scroll-container","orientation","vertical","tabIndex","0",3,"itemSize",4,"ngIf"],["fxLayout","column",1,"scroll-container"],["class","activity-item",4,"ngFor","ngForOf"],[1,"activity-item"],[3,"item","itemWidth","itemHeight","initialDelay"],["orientation","vertical","tabIndex","0",1,"scroll-container",3,"itemSize"],["scroller",""],["class","activity-item",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"]],template:function(Ie,$e){1&Ie&&(s.TgZ(0,"div",0),s.YNc(1,F,5,4,"div",1),s.TgZ(2,"mat-sidenav-container",2),s.TgZ(3,"mat-sidenav",3,4),s.TgZ(5,"div",5),s.TgZ(6,"div",6),s.TgZ(7,"div",7),s.TgZ(8,"div",8),s._uU(9),s.ALo(10,"translate"),s.qZA(),s.TgZ(11,"button",9),s.NdJ("click",function(){return $e.onFilterToggle()}),s._UZ(12,"mat-icon",10),s.qZA(),s.qZA(),s.TgZ(13,"div",7),s._UZ(14,"div",11),s.TgZ(15,"button",12),s.NdJ("click",function(){return $e.onFilterClearToggle()}),s.TgZ(16,"div",13),s._uU(17),s.ALo(18,"translate"),s.qZA(),s.qZA(),s.qZA(),s._UZ(19,"nv-divider"),s.qZA(),s.TgZ(20,"mat-expansion-panel"),s.TgZ(21,"mat-expansion-panel-header",14),s.TgZ(22,"mat-panel-title",15),s._uU(23),s.ALo(24,"translate"),s.qZA(),s.qZA(),s.YNc(25,V,7,3,"ng-container",16),s.qZA(),s._UZ(26,"nv-divider"),s.TgZ(27,"mat-expansion-panel"),s.TgZ(28,"mat-expansion-panel-header",14),s.TgZ(29,"mat-panel-title",15),s._uU(30),s.ALo(31,"translate"),s.qZA(),s.qZA(),s.YNc(32,b,8,10,"ng-container",16),s.qZA(),s._UZ(33,"nv-divider"),s.TgZ(34,"mat-expansion-panel"),s.TgZ(35,"mat-expansion-panel-header",14),s.TgZ(36,"mat-panel-title",15),s._uU(37),s.ALo(38,"translate"),s.qZA(),s.qZA(),s.YNc(39,B,8,5,"ng-container",16),s.YNc(40,U,4,3,"div",17),s.YNc(41,A,4,3,"div",17),s.qZA(),s._UZ(42,"nv-divider"),s.qZA(),s.qZA(),s.YNc(43,ye,7,3,"mat-sidenav-content",18),s.YNc(44,te,7,3,"mat-sidenav-content",18),s.qZA(),s.qZA()),2&Ie&&(s.xp6(1),s.Q6J("ngIf",$e.showSortMenu||$e.showFilterMenu),s.xp6(8),s.Oqu(s.lcZ(10,15,"filter.Filter")),s.xp6(3),s.Q6J("svgIcon","close"),s.xp6(3),s.Q6J("disabled",$e.disableFilterClearButton),s.xp6(2),s.Oqu(s.lcZ(18,17,"filter.ClearAllFilters")),s.xp6(6),s.Oqu(s.lcZ(24,19,"filter.Game")),s.xp6(2),s.Q6J("ngForOf",$e.gameItems),s.xp6(5),s.Oqu(s.lcZ(31,21,"filter.Media")),s.xp6(2),s.Q6J("ngForOf",$e.mediaItems),s.xp6(5),s.Oqu(s.lcZ(38,23,"filter.Highlights")),s.xp6(2),s.Q6J("ngForOf",$e.highlightItems),s.xp6(1),s.Q6J("ngIf",0===$e.globalHighlightCount),s.xp6(1),s.Q6J("ngIf",0!==$e.globalHighlightCount&&0===$e.highlightItems.length),s.xp6(2),s.Q6J("ngIf",!$e.showActivity),s.xp6(1),s.Q6J("ngIf",$e.showActivity))},styles:['@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}body[_ngcontent-%COMP%]   nv-oogg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:0;background:rgba(255,255,255,.3)}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:0;background:rgba(255,255,255,.7)}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus, .nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none}nv-oogg[_ngcontent-%COMP%]   [readonly][_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   [type=readonly][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   [readonly][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   [type=readonly][_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;padding:0}nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled), nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled), .nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none}nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   dir[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   dir[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{-webkit-margin-before:0!important;-webkit-margin-after:0!important;-webkit-margin-start:0!important;-webkit-margin-end:0!important;-webkit-padding-start:0!important;-moz-margin-start:0!important;-moz-margin-end:0!important;-moz-padding-start:0!important}nv-oogg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0}nv-oogg[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}.oogg-gallery[_ngcontent-%COMP%]{overflow-y:hidden!important;background-color:#000}.grid-offset[_ngcontent-%COMP%]{padding-top:56px;margin-top:56px;height:calc(100% - 56px - 56px)}.gallery-area[_ngcontent-%COMP%]{top:-56px;overflow-x:hidden}.filter-area[_ngcontent-%COMP%]{min-width:320px;max-width:320px;height:calc(100% - 56px);background:#191919;border-left:none}.filter-header[_ngcontent-%COMP%]{height:36px}.emptyContainer[_ngcontent-%COMP%]{height:238px}.emptyWithWorkbar[_ngcontent-%COMP%]{margin-top:56px}.emptyMessage[_ngcontent-%COMP%]{height:52px;width:478px;text-align:center;vertical-align:middle;position:absolute}.isLtr[_nghost-%COMP%]   .emptyMessage[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .emptyMessage[_ngcontent-%COMP%]{margin-right:24px}html[dir=ltr][_ngcontent-%COMP%]   .emptyMessage[_ngcontent-%COMP%]{--dummy4: 0;margin-right:24px}.isRtl[_nghost-%COMP%]   .emptyMessage[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .emptyMessage[_ngcontent-%COMP%]{margin-left:24px}html[dir=rtl][_ngcontent-%COMP%]   .emptyMessage[_ngcontent-%COMP%]{--dummy4: 0;margin-left:24px}.emptyBackground[_ngcontent-%COMP%]{width:261px;height:238px}.check-label[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:180px}.isLtr[_nghost-%COMP%]   .check-label[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .check-label[_ngcontent-%COMP%]{margin-right:3px}html[dir=ltr][_ngcontent-%COMP%]   .check-label[_ngcontent-%COMP%]{--dummy4: 0;margin-right:3px}.isRtl[_nghost-%COMP%]   .check-label[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .check-label[_ngcontent-%COMP%]{margin-left:3px}html[dir=rtl][_ngcontent-%COMP%]   .check-label[_ngcontent-%COMP%]{--dummy4: 0;margin-left:3px}.nohightlights-label[_ngcontent-%COMP%]{white-space:wrap;min-width:0;width:0}.active[_ngcontent-%COMP%]{color:#76b900}.filter-data[_ngcontent-%COMP%]{padding:24px}.isLtr[_nghost-%COMP%]   .filter-close[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .filter-close[_ngcontent-%COMP%]{margin-right:-12px}html[dir=ltr][_ngcontent-%COMP%]   .filter-close[_ngcontent-%COMP%]{--dummy4: 0;margin-right:-12px}.isRtl[_nghost-%COMP%]   .filter-close[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .filter-close[_ngcontent-%COMP%]{margin-left:-12px}html[dir=rtl][_ngcontent-%COMP%]   .filter-close[_ngcontent-%COMP%]{--dummy4: 0;margin-left:-12px}.work-bar[_ngcontent-%COMP%]{position:absolute;height:56px;width:100%;background:#292929;z-index:999}.count-display[_ngcontent-%COMP%]{display:block;position:absolute;top:20px}.isLtr[_nghost-%COMP%]   .count-display[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .count-display[_ngcontent-%COMP%]{left:24px}html[dir=ltr][_ngcontent-%COMP%]   .count-display[_ngcontent-%COMP%]{--dummy5: 0;left:24px}.isRtl[_nghost-%COMP%]   .count-display[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .count-display[_ngcontent-%COMP%]{right:24px}html[dir=rtl][_ngcontent-%COMP%]   .count-display[_ngcontent-%COMP%]{--dummy5: 0;right:24px}.sortmenu[_ngcontent-%COMP%]{display:block;position:absolute}.isLtr[_nghost-%COMP%]   .sortmenu[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .sortmenu[_ngcontent-%COMP%]{right:60px}html[dir=ltr][_ngcontent-%COMP%]   .sortmenu[_ngcontent-%COMP%]{--dummy6: 0;right:60px}.isRtl[_nghost-%COMP%]   .sortmenu[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .sortmenu[_ngcontent-%COMP%]{left:60px}html[dir=rtl][_ngcontent-%COMP%]   .sortmenu[_ngcontent-%COMP%]{--dummy6: 0;left:60px}.sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#ffffffb3;text-decoration:none;display:block;margin:12px 0 16px;padding:0 16px;text-transform:none!important}.isLtr[_nghost-%COMP%]   .sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:none}html[dir=ltr][_ngcontent-%COMP%]   .sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--dummy0: 0;float:none}.isRtl[_nghost-%COMP%]   .sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:none}html[dir=rtl][_ngcontent-%COMP%]   .sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--dummy0: 0;float:none}.isLtr[_nghost-%COMP%]   .sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left}html[dir=ltr][_ngcontent-%COMP%]   .sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--dummy0: 0;text-align:left}.isRtl[_nghost-%COMP%]   .sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:right}html[dir=rtl][_ngcontent-%COMP%]   .sortmenu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--dummy0: 0;text-align:right}.filterHeader[_ngcontent-%COMP%]{width:100%}.filtermenu[_ngcontent-%COMP%]{display:block;position:absolute;top:10px}.isLtr[_nghost-%COMP%]   .filtermenu[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .filtermenu[_ngcontent-%COMP%]{right:20px}html[dir=ltr][_ngcontent-%COMP%]   .filtermenu[_ngcontent-%COMP%]{--dummy6: 0;right:20px}.isRtl[_nghost-%COMP%]   .filtermenu[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .filtermenu[_ngcontent-%COMP%]{left:20px}html[dir=rtl][_ngcontent-%COMP%]   .filtermenu[_ngcontent-%COMP%]{--dummy6: 0;left:20px}button.nv-dropdown-menu[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;width:100%;height:unset}button.nv-dropdown-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:8px 16px;overflow:hidden;text-overflow:ellipsis}.isLtr[_nghost-%COMP%]   button.nv-dropdown-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   button.nv-dropdown-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:left}html[dir=ltr][_ngcontent-%COMP%]   button.nv-dropdown-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{--dummy0: 0;text-align:left}.isRtl[_nghost-%COMP%]   button.nv-dropdown-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   button.nv-dropdown-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:right}html[dir=rtl][_ngcontent-%COMP%]   button.nv-dropdown-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{--dummy0: 0;text-align:right}button.nv-dropdown-menu.active[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#76b900}.nv-oogg.max-width-menu-class[_ngcontent-%COMP%]{width:100px}.nv-oogg.max-width-menu-class[_ngcontent-%COMP%]   .mat-menu-content[_ngcontent-%COMP%]:not(:empty){padding-top:8px;padding-bottom:8px}.clear-filter[_ngcontent-%COMP%]{text-transform:uppercase;padding:8px}.galleryInitializing[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none;align-items:center}.activity-buttons[_ngcontent-%COMP%]{display:block;position:absolute;top:10px}.isLtr[_nghost-%COMP%]   .activity-buttons[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .activity-buttons[_ngcontent-%COMP%]{right:250px}html[dir=ltr][_ngcontent-%COMP%]   .activity-buttons[_ngcontent-%COMP%]{--dummy6: 0;right:250px}.isRtl[_nghost-%COMP%]   .activity-buttons[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .activity-buttons[_ngcontent-%COMP%]{left:250px}html[dir=rtl][_ngcontent-%COMP%]   .activity-buttons[_ngcontent-%COMP%]{--dummy6: 0;left:250px}.activity-item[_ngcontent-%COMP%]{width:100%;height:100%}.scroll-container[_ngcontent-%COMP%]{height:100%;overflow-x:hidden}.scroll-container[_ngcontent-%COMP%]   .cdk-virtual-scroll-content-wrapper[_ngcontent-%COMP%]{height:100%}']}),ve})();const k=[{path:"",component:Q,resolve:{GalleryResolverService:l}}];var oe=e(30582),N=e(70781),q=e(50298),Me=e(80221),xe=e(86608),ct=e(41225),Se=e(1625),Ge=e(74058),St=e(84622),Tt=e(1707),Te=e(772),Je=e(89460),xt=e(80181),Ye=e(95280),rt=e(80129),ge=e(174),Ve=e(42791);let at=(()=>{class ve{}return ve.\u0275fac=function(Ie){return new(Ie||ve)},ve.\u0275mod=s.oAB({type:ve}),ve.\u0275inj=s.cJS({imports:[[n.ez,y.it,T.m,D.o9,m.Q,i.Bz.forChild(k),(0,y.zv)()]]}),ve})();s.B6R(Q,[oe.xw,oe.s9,n.O5,N.lW,oe.yH,q.gM,G.Hw,Me.p6,Me.VK,n.sg,Me.OP,oe.Wh,xe.TM,xe.JX,ct.n,Se.ib,Se.yz,Se.yK,Ge.oG,St.xZ,Tt.JJ,Tt.On,Te.Lv,xe.Rh,n.mk,Je.oO,xt.$g,Ye.e,rt.x,ge.$,Ve.N7,Ve.xd,Ve.x0],[g.X$])},18137:(He,de,e)=>{"use strict";e.d(de,{Q:()=>C});var n=e(1707),i=e(42118),D=e(80181),m=e(365),y=e(70781),T=e(28417),r=e(80221),a=e(64106),s=e(1124),p=e(52529),l=e(37007),t=e(32080),w=e(1625),h=e(55519),u=e(74058),o=e(22213),f=e(42791),c=e(68456),g=e(50298),I=e(24298),G=e(51606),x=e(86608),E=e(80395),P=e(22573),v=e(2316);const O=[n.u5,y.ot,i.QW,T.ie,r.Tx,a.g0,D.Cq,m.Cv,s.t,p.Ps,l.LD,t.rP,h.c,f.Cl,w.To,u.p9,o.Is,c.ZX,g.AV,I.si,G.rt,x.SJ,P.hp,E._t];let C=(()=>{class _{}return _.\u0275fac=function(V){return new(V||_)},_.\u0275mod=v.oAB({type:_}),_.\u0275inj=v.cJS({imports:[[n.u5,...O],n.u5,y.ot,i.QW,T.ie,r.Tx,a.g0,D.Cq,m.Cv,s.t,p.Ps,l.LD,t.rP,h.c,f.Cl,w.To,u.p9,o.Is,c.ZX,g.AV,I.si,G.rt,x.SJ,P.hp,E._t]}),_})()},68716:(He,de,e)=>{"use strict";e.r(de),e.d(de,{PreviewModule:()=>Ct});var n=e(54364),i=e(71258),D=e(66660),m=e(18137),y=e(6484),T=e(83469),r=e(79441),a=e(22663),s=e(85816),p=e(9170),l=e(98636),t=e(33927),w=e(2984),h=e(2281),u=e(99520),o=e(202),f=e(12556),c=e(2316),g=e(74984),I=e(58283);const G=["image"],x=["video"],E=["infoSideNav"];function P(gt,At){1&gt&&c._UZ(0,"nv-montage",13)}function v(gt,At){1&gt&&c._UZ(0,"mat-icon",22)}function O(gt,At){1&gt&&c._UZ(0,"mat-icon",23)}function C(gt,At){if(1&gt){const le=c.EpF();c.TgZ(0,"div",14),c.TgZ(1,"button",15),c.NdJ("click",function(){return c.CHM(le),c.oxw().navLeft()}),c.YNc(2,v,1,0,"mat-icon",16),c.qZA(),c.TgZ(3,"div",17),c.TgZ(4,"div",18),c._UZ(5,"img",19,20),c.qZA(),c.qZA(),c.TgZ(7,"button",15),c.NdJ("click",function(){return c.CHM(le),c.oxw().navRight()}),c.YNc(8,O,1,0,"mat-icon",21),c.qZA(),c.qZA()}if(2&gt){const le=c.oxw();c.xp6(2),c.Q6J("ngIf",le.chevronVisible),c.xp6(3),c.Q6J("src",le.fileSrc,c.LSH),c.xp6(3),c.Q6J("ngIf",le.chevronVisible)}}function _(gt,At){1&gt&&c._UZ(0,"mat-icon",22)}function F(gt,At){if(1&gt){const le=c.EpF();c.TgZ(0,"button",15),c.NdJ("click",function(nt){c.CHM(le);const bt=c.oxw(2);return nt.stopPropagation(),bt.navLeft()}),c.YNc(1,_,1,0,"mat-icon",16),c.qZA()}if(2&gt){const le=c.oxw(2);c.xp6(1),c.Q6J("ngIf",le.chevronVisible)}}const V=function(gt,At){return{"icon-preview-visible":gt,"icon-preview-hidden":At}};function b(gt,At){if(1&gt&&c._UZ(0,"mat-icon",43),2&gt){const le=c.oxw(3);c.Q6J("ngClass",c.WLB(1,V,le.showPlayButton,!le.showPlayButton))}}function B(gt,At){1&gt&&c._UZ(0,"mat-progress-spinner",44)}function U(gt,At){1&gt&&c._UZ(0,"mat-icon",45)}function A(gt,At){if(1&gt&&(c.TgZ(0,"div",46),c.TgZ(1,"span",47),c._uU(2),c.qZA(),c.qZA()),2&gt){const le=c.oxw(3);c.xp6(2),c.Oqu(le.videoErrorString)}}function S(gt,At){if(1&gt){const le=c.EpF();c.ynx(0),c.TgZ(1,"div",38),c.NdJ("click",function(){return c.CHM(le),c.oxw(2).toggleMediaPlay()}),c.YNc(2,b,1,4,"mat-icon",39),c.YNc(3,B,1,0,"mat-progress-spinner",40),c.YNc(4,U,1,0,"mat-icon",41),c.YNc(5,A,3,1,"div",42),c.qZA(),c.BQk()}if(2&gt){const le=c.oxw(2);c.xp6(2),c.Q6J("ngIf",le.isPaused&&le.useDisplay===le.displayTypes.NORMAL&&!le.sliderMoving),c.xp6(1),c.Q6J("ngIf",le.useDisplay===le.displayTypes.SPINNER),c.xp6(1),c.Q6J("ngIf",le.useDisplay===le.displayTypes.ERROR),c.xp6(1),c.Q6J("ngIf",le.useDisplay===le.displayTypes.ERROR)}}function Y(gt,At){1&gt&&c._UZ(0,"mat-icon",23)}function se(gt,At){if(1&gt){const le=c.EpF();c.TgZ(0,"button",15),c.NdJ("click",function(nt){c.CHM(le);const bt=c.oxw(2);return nt.stopPropagation(),bt.navRight()}),c.YNc(1,Y,1,0,"mat-icon",21),c.qZA()}if(2&gt){const le=c.oxw(2);c.xp6(1),c.Q6J("ngIf",le.chevronVisible)}}function fe(gt,At){if(1&gt){const le=c.EpF();c.TgZ(0,"nv-hig-slider",48),c.NdJ("valueChange",function(nt){return c.CHM(le),c.oxw(2).sliderPosition=nt})("input",function(nt){return c.CHM(le),c.oxw(2).sliderChanged(nt)})("mousedown",function(){return c.CHM(le),c.oxw(2).sliderInteraction(!0)})("mouseup",function(){return c.CHM(le),c.oxw(2).sliderInteraction(!1)},!1,c.Jf7),c.qZA()}if(2&gt){const le=c.oxw(2);c.Q6J("step",le.step)("value",le.sliderPosition)("animating",!le.isPaused)}}const $=function(gt,At){return{"short-ranged-time":gt,"long-ranged-time":At}};function ae(gt,At){if(1&gt){const le=c.EpF();c.TgZ(0,"div",49),c.TgZ(1,"nv-input",50),c.NdJ("textChange",function(nt){return c.CHM(le),c.oxw(2).minTime=nt})("stringChange",function(nt){return c.CHM(le),c.oxw(2).timeChanged(nt,!0,"")})("incDecChange",function(nt){return c.CHM(le),c.oxw(2).modifyTime(nt,!0)}),c.qZA(),c.TgZ(2,"nv-mat-ranged-slider",51),c.NdJ("valueChange",function(nt){return c.CHM(le),c.oxw(2).sliderPosition=nt})("valueChange",function(nt){return c.CHM(le),c.oxw(2).sliderChanged(nt)})("leftPositionChange",function(nt){return c.CHM(le),c.oxw(2).sliderTrimLeft=nt})("rightPositionChange",function(nt){return c.CHM(le),c.oxw(2).sliderTrimRight=nt})("leftPositionChange",function(nt){return c.CHM(le),c.oxw(2).onLeftSliderChange(nt)})("rightPositionChange",function(nt){return c.CHM(le),c.oxw(2).onRightSliderChange(nt)}),c.qZA(),c.TgZ(3,"nv-input",50),c.NdJ("textChange",function(nt){return c.CHM(le),c.oxw(2).maxTime=nt})("stringChange",function(nt){return c.CHM(le),c.oxw(2).timeChanged(nt,!1,"")})("incDecChange",function(nt){return c.CHM(le),c.oxw(2).modifyTime(nt,!1)}),c.qZA(),c.qZA()}if(2&gt){const le=c.oxw(2);c.xp6(1),c.Akn(le.timeStyle),c.Q6J("ngClass",c.WLB(26,$,!le.longDuration,le.longDuration))("text",le.minTime)("placeholderText",le.timePlaceHolder)("disabled",!1)("textMaxLength",le.timeTextMaxLength)("tooltip",le.editToolTip)("pattern",le.editPattern)("rangeCheck",le.rangeCheckLeft),c.xp6(1),c.Q6J("value",le.sliderPosition)("leftPosition",le.sliderTrimLeft)("rightPosition",le.sliderTrimRight)("disableTrim",le.disableTrimSliders)("spaceBetween",le.spaceBetween)("step",.1),c.xp6(1),c.Akn(le.timeStyle),c.Q6J("ngClass",c.WLB(29,$,!le.longDuration,le.longDuration))("text",le.maxTime)("placeholderText",le.timePlaceHolder)("disabled",!1)("textMaxLength",le.timeTextMaxLength)("tooltip",le.editToolTip)("pattern",le.editPattern)("rangeCheck",le.rangeCheckRight)}}const me=function(gt,At){return{"viewer-video-counter-short":gt,"viewer-video-counter-long":At}};function ye(gt,At){if(1&gt){const le=c.EpF();c.TgZ(0,"div",24),c.TgZ(1,"div",25),c.NdJ("keydown",function(nt){return c.CHM(le),c.oxw().processToggleMedia(nt)}),c.YNc(2,F,2,1,"button",26),c.TgZ(3,"div",17),c.TgZ(4,"div",18),c.TgZ(5,"video",27,28),c.NdJ("loadeddata",function(){return c.CHM(le),c.oxw().onLoadedData()})("error",function(){return c.CHM(le),c.oxw().loadFromDragNDrop()}),c.qZA(),c.qZA(),c.YNc(7,S,6,4,"ng-container",29),c.qZA(),c.YNc(8,se,2,1,"button",26),c.qZA(),c.TgZ(9,"div",30),c.TgZ(10,"nv-item-button",31),c.NdJ("clicked",function(){return c.CHM(le),c.oxw().toggleMediaPlay()}),c.qZA(),c.YNc(11,fe,1,3,"nv-hig-slider",32),c.YNc(12,ae,4,32,"div",33),c.TgZ(13,"div",34),c.TgZ(14,"span",35),c._uU(15),c.qZA(),c.qZA(),c.TgZ(16,"nv-item-button",36),c.NdJ("clicked",function(){return c.CHM(le),c.oxw().muteUnmute()}),c.qZA(),c.TgZ(17,"nv-hig-slider",37),c.NdJ("valueChange",function(nt){return c.CHM(le),c.oxw().volume=nt})("valueChange",function(){return c.CHM(le),c.oxw().volumeChanged()}),c.qZA(),c.qZA(),c.qZA()}if(2&gt){const le=c.oxw();c.xp6(2),c.Q6J("ngIf",!le.montageMode),c.xp6(3),c.Q6J("src",le.fileSrc,c.LSH),c.xp6(2),c.Q6J("ngIf",!le.editOn),c.xp6(1),c.Q6J("ngIf",!le.montageMode),c.xp6(2),c.Q6J("svgIcon",le.isPaused?"play_arrow":"pause")("tooltip",le.isPaused?"tooltips.Play":"tooltips.Pause"),c.xp6(1),c.Q6J("ngIf",!le.editOn),c.xp6(1),c.Q6J("ngIf",le.editOn),c.xp6(1),c.Q6J("ngClass",c.WLB(13,me,!le.longDuration,le.longDuration)),c.xp6(2),c.Oqu(le.videoTime),c.xp6(1),c.Q6J("svgIcon",0===le.volume?"volume_off":"volume")("tooltip",0===le.volume?"tooltips.Unmute":"tooltips.Mute"),c.xp6(1),c.Q6J("value",le.volume)}}const ue=function(gt,At){return{preview:gt,montage:At}},X=function(gt,At){return{infopanel:gt,previewpanel:At}};let K=(()=>{class gt{constructor(le,De,nt,bt,Wt,ln,Sn,qe,Ut,M,re){this.loggingService=le,this.galleryService=De,this.bridgeService=nt,this.renderer=bt,this.router=Wt,this.route=ln,this.osService=Sn,this.trimService=qe,this.dialogHelper=Ut,this.appBarService=M,this.translate=re,this.destroy$=new r.xQ,this.fileMetaData=void 0,this.previewItems=[],this.videoParams={trimmed:!1,startMs:0,durationMs:0,sliderPosition:0,sliderTrimRight:100,sliderTrimLeft:0,start:0,stop:0,volumeChanged:!1,volume:100,mute:!1},this.description="",this.fileName="",this.fullFilename="",this.dimensions="",this.contentDimensions={width:1280,height:720},this.fileDate="",this.fileTime="",this.fileSize="",this.volume=100,this.savedVolume=100,this.step=.1,this.sliderTrimLeft=0,this.sliderTrimRight=100,this.sliderPosition=0,this.minTrimDefault=5,this.spaceBetween=0,this.trimmed=!1,this.trimCounter=0,this.isPaused=!0,this.playbackTimer=null,this.displayTypes={NORMAL:0,SPINNER:1,ERROR:2},this.useDisplay=this.displayTypes.SPINNER,this.videoErrorString="",this.sliderMoving=!1,this.longDuration=!1,this.hasPlayedVideo=!1,this.showEditControls=!1,this.showShareButton=!1,this.enableShareButton=!1,this.enableSaveButton=!1,this.badInputDataMin=!1,this.badInputDataMax=!1,this.disableTrimSliders=!1,this.editOn=!1,this.chevronVisible=!0,this.montageMode=!1,this.showPlayButton=!0,this.mouseDown=!1,this.snackBarRef=void 0,this.minTime="",this.maxTime="",this.timePlaceHolderShort={text:"00:00.0",arg:""},this.timePlaceHolderLong={text:"00:00:00.0",arg:""},this.timePlaceHolder=this.timePlaceHolderShort,this.trimSeparation=1,this.timeStyle=["20px","16px 0 0 0","0 0 0 6px"],this.shortDurationLength=7,this.longDurationLength=10,this.timeTextMaxLength=this.shortDurationLength,this.editToolTip="",this.editPattern="",this.rangeCheckLeft=void 0,this.rangeCheckRight=void 0,this.dontAllowEdit=!1,this.dialogRef=void 0,this.logger=this.loggingService.getLogger("Preview")}set imageRef(le){this.image=le?le.nativeElement:null}set videoRef(le){this.video&&""!==this.video.src&&(!le||this.video!==le.nativeElement)&&(this.video.src="",this.hasPlayedVideo=!1,this.video.load()),le?(this.video=le.nativeElement,this.video.focus()):this.video=null}ngOnInit(){this.logger.info("Initializing Preview Component"),this.showEditControls=!0,this.appBarService.actionClicked$.pipe((0,a.R)(this.destroy$)).subscribe(le=>{this.logger.info("Action clicked: ",le),"arrow_left"===le?this.closePreview():"edit"===le?this.editVideo():"delete"===le?this.deleteItem():"open"===le?this.openInFolder():"save"===le&&this.save()}),this.galleryService.fileDataChangeListener.pipe((0,a.R)(this.destroy$)).subscribe(le=>{this.montageMode=this.galleryService.getMontageMode(),this.minTime=this.maxTime="",le&&le.file&&le.file.name&&this.montageMode&&(this.logger.info("Montage FileDataChange: ",le.file.name),this.initializeData(le)),this.montageMode||(this.initAppBar(le),this.infoSideNav.close(),this.initializeData(le),this.checkIfDataIsEdited())}),this.montageMode=this.galleryService.getMontageMode(),this.montageMode&&(this.previewItems=(0,o.cloneDeep)(this.galleryService.currentSelectedFilesData),this.initializeData(this.previewItems[0]),this.infoSideNav.open())}initAppBar(le){const De=this.getTitle(le),nt=[];nt.push({id:"delete",icon:"delete_forever",tooltip:"tooltips.Remove",end:!0}),nt.push({id:"open",icon:"folder",tooltip:"tooltips.OpenLocation",end:!0}),le.file.type===u.A2.Video&&nt.push({id:"edit",icon:"edit",tooltip:"tooltips.Edit",end:!0}),this.appBarService.setAll({title:{entry:De,params:{}},navButtonArrow:!0,icons:nt})}editAppBar(le,De){const nt=this.getTitle(le),bt=[];bt.push({id:"save",text:"confirmation.save",tooltip:"tooltips.SaveTrim",button:!0,disabled:!De}),this.appBarService.setAll({title:{entry:nt,params:{}},navButtonArrow:!0,icons:bt})}getTitle(le){let De=le.folder;if(le.hlName){const nt=`highlightLabels.${le.hlName}`;let bt=this.translate.instant(nt);bt===nt&&(bt=le.hlName),De+=" - "+bt}return De}ngOnDestroy(){this.logger.info("Destroying view!"),this.galleryService.trimInProgess=u.k7.off,this.destroy$.next(!0),this.destroy$.complete(),this.snackBarRef&&(this.snackBarRef.dismiss(),this.snackBarRef=void 0),this.playbackTimer&&(clearInterval(this.playbackTimer),this.playbackTimer=null),this.video&&""!==this.video.src&&setTimeout(()=>{this.video.src="",this.video.load()})}formatFilesizeString(le){return le<1e3?le+" KB":le<1e6?(le/1e3).toFixed(2)+" MB":(le/1e6).toFixed(2)+" GB"}initializeData(le){this.logger.info("Loading preview file"),le&&((void 0===this.fileMetaData||le.fullFilename!==this.fileMetaData.fullFilename)&&(this.useDisplay=this.displayTypes.SPINNER),this.video&&!this.isPaused&&this.pauseMedia(),this.fileMetaData=le,this.isVideo=le.file.type===u.A2.Video,this.fileName=le.file.name,""!==le.date&&(this.fileDate=h(le.date).format("MMM D, YYYY"),this.fileTime=h(le.date).format("ddd LT")),this.description=le.file.name+(""!==le.hlName?" - "+le.hlName:""),this.fileSize=this.formatFilesizeString(parseInt(le.fileSize,10)),this.fileSrc=y.qR+le.fullFilename,this.fullFilename=le.fullFilename,this.isVideo||this.galleryService.getImageFileDimensions(le.fullFilename).subscribe(De=>{this.dimensions=De&&De.width&&De.height?De.width+" x "+De.height:""}),this.playbackTimer&&(clearInterval(this.playbackTimer),this.playbackTimer=null),this.isPaused=!0,this.sliderPosition=this.sliderTrimLeft=0,this.sliderTrimRight=100,this.isVideo&&""!==this.minTime&&""!==this.maxTime&&(this.minTime=this.getTrimTime(this.sliderTrimLeft),this.maxTime=this.getTrimTime(this.sliderTrimRight),this.initializeRanges()),this.contextIcon=this.isVideo?"video":"image")}initializeRanges(){this.rangeCheckLeft={min:0,max:100-this.spaceBetween,total:this.video.duration},this.rangeCheckRight={min:0+this.spaceBetween,max:100,total:this.video.duration}}loadFromDragNDrop(){if(this.logger.info("Loading via dragNdrop"),!this.galleryService.currentFileData)return void this.logger.error("Loading a file after gallery moved on");const le=this.renderer.listen("document","dragover",nt=>{nt.stopPropagation(),nt.preventDefault(),nt.dataTransfer.dropEffect="copy"}),De=this.renderer.listen("document","drop",nt=>{if(nt.stopPropagation(),nt.preventDefault(),!nt.dataTransfer.files||!nt.dataTransfer.files[0])return void this.logger.error("bad drop, no file list");if(!this.galleryService.currentFileData)return this.logger.error("Loading a file after gallery moved on"),le(),void De();const bt=nt.dataTransfer.files[0];if(bt.name===this.galleryService.currentFileData.fullFilename){this.logger.info("Loading file");const Wt=URL.createObjectURL(bt);this.isVideo?(this.video.src=Wt,this.video.onerror=ln=>{this.logger.error("A video error occured",ln),this.useDisplay=this.displayTypes.ERROR},this.video.load()):this.image.src=Wt}else this.logger.error("bad drag file: "+this.galleryService.currentFileData.fullFilename+"-"+bt.name);le(),De()});this.bridgeService.executeCommand(w.Gh.Share.Osc.DropUrl,{url:this.galleryService.currentFileData.fullFilename}).subscribe()}calculateSpaceBetween(){let le=Math.ceil(1e3/(this.video.duration/this.minTrimDefault))/10;this.dontAllowEdit=!1,this.video.duration<=this.minTrimDefault?(le=100,this.dontAllowEdit=!0):le<this.trimSeparation&&(le=this.trimSeparation),this.spaceBetween=le,this.logger.info("Duration: "+this.video.duration+" SpaceBetween: "+this.spaceBetween+"%")}onLoadedData(){this.logger.info("Video ready"),this.volume=100*this.video.volume,this.useDisplay=this.displayTypes.NORMAL,this.dimensions=this.video.videoWidth+" x "+this.video.videoHeight,this.checkPlayButton(),this.setVideoTime(),this.minTime=this.getTrimTime(0),this.maxTime=this.getTrimTime(100),this.calculateSpaceBetween(),this.initializeRanges()}changeVideoCurrentTime(le){const De=parseFloat((le/100*this.video.duration).toFixed(2));isNaN(De)?this.logger.error("ChangeVideoCurrentTime, NaN Error!"):this.video.currentTime=De}sliderChanged(le){this.video&&this.useDisplay===this.displayTypes.NORMAL&&((this.isPaused||!this.isPaused&&!this.editOn)&&(le&&le.value&&(this.sliderPosition=le.value),this.sliderPosition!==this.lastPosition&&Math.round(this.sliderPosition/this.step)!==Math.round(this.lastPosition/this.step)&&(this.changeVideoCurrentTime(this.sliderPosition),this.setVideoTime())),!this.isPaused&&this.sliderTrimRight<=this.sliderPosition&&setTimeout(()=>{this.logger.info("Video end reached, pausing"),this.pauseMedia()}))}toggleMediaPlay(){if(this.video)if(this.video.paused){this.hasPlayedVideo||(this.hasPlayedVideo=!0),Math.ceil(this.video.currentTime/this.video.duration*100/this.step)>=this.sliderTrimRight/this.step&&(this.logger.info("Restarting video..."),this.changeVideoCurrentTime(this.sliderTrimLeft)),this.logger.info("Starting video"),this.video.play(),this.isPaused=!1,this.checkPlayButton();const le=this.getTrimStopPosition();this.galleryService.galleryViewAction(f.ryx.Play,this.fileMetaData),this.playbackTimer=setInterval(()=>{this.video?(this.sliderMoving||(this.sliderPosition=this.lastPosition=this.video.currentTime/this.video.duration*100),this.setVideoTime(),(this.trimmed&&this.video.currentTime>=le||!this.trimmed&&this.video.currentTime>=this.video.duration)&&this.pauseMedia()):this.pauseMedia()})}else this.pauseMedia()}checkPlayButton(){this.showPlayButton=this.isPaused&&this.useDisplay===this.displayTypes.NORMAL&&!this.sliderMoving}pauseMedia(){this.logger.info("Pausing video"),this.video.pause(),this.isPaused=!0,this.checkPlayButton(),this.playbackTimer&&(this.logger.info("Clearing Interval on pause"),clearInterval(this.playbackTimer),this.playbackTimer=null)}processToggleMedia(le){this.editOn||("Enter"===le.key||" "===le.key)&&this.toggleMediaPlay()}setVideoTime(){this.longDuration=!(this.video.duration<3600);const le=this.video.duration,nt=le*((this.sliderTrimRight-this.sliderTrimLeft)/100),bt=Math.floor(nt/3600),Wt=Math.floor(nt/60-60*bt),ln=Math.floor(nt-3600*bt-60*Wt),Sn=Math.floor(10*nt)-10*Math.floor(nt),qe=("00"+bt).slice(-2).toString(),Ut=("00"+Wt).slice(-2).toString(),M=("00"+ln).slice(-2).toString(),re=("0"+Sn).slice(-1).toString(),ke=Math.abs(le*((this.sliderPosition-this.sliderTrimLeft)/100)),tt=Math.floor(ke/3600),ut=Math.floor(ke/60-60*tt),Ft=Math.floor(ke-3600*tt-60*ut),zt=Math.floor(10*ke)-10*Math.floor(ke),$t=("00"+ut).slice(-2).toString()+":"+("00"+Ft).slice(-2).toString()+"."+("0"+zt).slice(-1).toString(),fn=Ut+":"+M+"."+re;if(this.longDuration){this.timePlaceHolder=this.timePlaceHolderLong,this.timeTextMaxLength=this.longDurationLength;const Jt=("00"+tt).slice(-2).toString()+":";this.videoTime=Jt+$t+" / "+qe+":"+fn,this.editToolTip="tooltips.LimitLong",this.editPattern="[0-9]{2}[:]{1}[0-9]{2}[:]{1}[0-9]{2}[.]{1}[0-9]{1}"}else this.timePlaceHolder=this.timePlaceHolderShort,this.timeTextMaxLength=this.shortDurationLength,this.videoTime=$t+" / "+fn,this.editToolTip="tooltips.LimitShort",this.editPattern="[0-9]{2}[:]{1}[0-9]{2}[.]{1}[0-9]{1}"}volumeChanged(){this.video&&(this.logger.info("Volume changed to "+this.volume),this.video.volume=this.volume/100)}processToggleMute(le){("Enter"===le.key||" "===le.key)&&this.muteUnmute()}muteUnmute(){this.video&&(this.volume?(this.logger.info("Muting video"),this.savedVolume=this.volume,this.volume=0):(this.logger.info("UnMuting video"),this.volume=this.savedVolume||50),this.volumeChanged())}sliderInteraction(le){le&&this.video&&!this.isPaused?this.sliderMoving=!0:!le&&this.sliderMoving&&(this.sliderMoving=!1,this.isPaused&&this.toggleMediaPlay())}closePreview(){this.editOn?(this.editOn=!1,this.chevronVisible=!this.editOn,this.initAppBar(this.fileMetaData)):this.router.navigate(["../gallery"],{relativeTo:this.route.parent,skipLocationChange:!0}).then(()=>{})}openInFolder(){let le=this.fullFilename;const De=this.osService.getDirSeparator(),nt=le.lastIndexOf(De);if(-1!==nt&&(le=le.slice(0,nt)),""!==le){const bt=this.bridgeService.executeCommand(w.Gh.Common.Applicationinfo.OpenDirectoryBrowser,{name:le}).subscribe(()=>{bt.unsubscribe()});this.galleryService.galleryViewAction(f.ryx.OpenLocation,this.fileMetaData)}}editVideo(){!this.editOn&&!this.isPaused&&this.isVideo&&this.toggleMediaPlay(),this.showEditControls&&(this.editOn=!this.editOn,this.chevronVisible=!this.editOn,this.checkIfDataIsEdited(),this.disableTrimSliders=this.dontAllowEdit,this.galleryService.galleryAction(f.DCd.Edit))}checkIfDataIsEdited(){this.enableSaveButton=!(0===this.sliderTrimLeft&&100===this.sliderTrimRight||this.badInputDataMin||this.badInputDataMax),this.editOn&&this.editAppBar(this.fileMetaData,this.enableSaveButton)}cancelEdit(){this.logger.info("Cancel Editing"),this.editOn=!1,this.sliderPosition=this.sliderTrimLeft=0,this.sliderTrimRight=100,this.trimmed=!1}navLeft(){this.isPaused||this.pauseMedia(),this.galleryService.getPreviousFile()}navRight(){this.isPaused||this.pauseMedia(),this.galleryService.getNextFile()}deleteItem(){this.logger.info("Remove clicked"),this.dialogHelper.openAlertDialog({title:"confirmation.confirmDeleteTitle",query:"confirmation.confirmDelete",queryParam:"",action1:"confirmation.NotRightNow",action2:"confirmation.remove"}).pipe((0,a.R)(this.destroy$),(0,s.zg)(De=>De.afterClosed()),(0,p.h)(De=>De===u.DX.Action2),(0,s.zg)(()=>this.galleryService.showDeleteSnackbar([this.fileMetaData])),(0,l.b)(()=>{this.closePreview()}),(0,p.h)(De=>!1===De)).subscribe()}trim(le,De){return this.trimService.trim({input:this.fileMetaData.fullFilename,output:le,headTrimMs:this.videoParams.startMs,lengthMs:this.videoParams.durationMs}).pipe((0,s.zg)(()=>(this.logger.info("Trim complete!"),this.trimService.getMetaData(this.fileMetaData.fullFilename))),(0,t.U)(bt=>(this.logger.info("Return Data: ",bt),De&&(this.fileMetaData.date=bt.date,this.fileMetaData.fileSize=bt.fileSizeKB.toString(),this.fileMetaData.duration=bt.duration.slice(bt.duration.indexOf(":")+1)),this.logger.info("Trim post processing complete!"),this.initializeData(this.fileMetaData),this.checkIfDataIsEdited(),this.useDisplay=this.displayTypes.NORMAL,this.sliderPosition=0,this.changeVideoCurrentTime(this.sliderPosition),this.setVideoTime(),this.galleryService.trimInProgess=u.k7.off,De&&(setTimeout(()=>{this.video.src="",this.video.load()},100),setTimeout(()=>{this.trimCounter++,this.video.src=this.fileSrc+"?"+this.trimCounter.toString(),this.video.load(),this.logger.info("VideoSrc: ",this.video.src)},300)),!0)))}save(){0!==this.sliderTrimLeft||100!==this.sliderTrimRight?this.dialogHelper.openAlertDialog({title:"confirmation.TrimVideo",query:"confirmation.ConfirmSaveChanges",queryParam:"",action1:"confirmation.cancel",action2:"confirmation.TrimOriginal",action3:"confirmation.SaveANewClip"},!1).pipe((0,a.R)(this.destroy$),(0,l.b)(De=>this.dialogRef=De),(0,s.zg)(De=>De.afterClosed())).subscribe(De=>{if(De===u.DX.Action2||De===u.DX.Action3){this.useDisplay=this.displayTypes.SPINNER;const nt=De===u.DX.Action2;this.galleryService.trimInProgess=nt?u.k7.inPlace:u.k7.toNew,this.closePreview(),this.setVideoTrimParams(!0);let bt=this.fileMetaData.fullFilename;nt||(bt=this.createOutputFilename(this.fileMetaData.fullFilename)),this.trim(bt,nt).pipe((0,a.R)(this.destroy$)).subscribe(()=>this.trimComplete(nt))}else this.galleryService.galleryAction(f.DCd.TrimCancel)}):this.editOn=!1}trimComplete(le){setTimeout(()=>{this.translate.get(le?"confirmation.OriginalTrimmed":"confirmation.ShorterSaved").subscribe(nt=>{this.snackBarRef=this.dialogHelper.openSnackBar(nt)})})}sliderUpdate(le,De){setTimeout(()=>{this.sliderPosition=le,this.checkIfDataIsEdited(),this.changeVideoCurrentTime(le),this.setVideoTime(),De?(this.minTime=this.getTrimTime(le),this.rangeCheckRight.min=le+this.spaceBetween):(this.maxTime=this.getTrimTime(le),this.rangeCheckLeft.max=le-this.spaceBetween)})}onLeftSliderChange(le){this.badInputDataMin&&(this.badInputDataMin=!1,this.checkIfDataIsEdited()),this.sliderUpdate(le,!0)}onRightSliderChange(le){this.badInputDataMax&&(this.badInputDataMax=!1,this.checkIfDataIsEdited()),this.sliderUpdate(le,!1)}getTrimTime(le){const De=this.video.duration*le/100+.01,nt=Math.floor(De/3600),bt=Math.floor(De/60-60*nt),Wt=Math.floor(De-3600*nt-60*bt),ln=Math.floor(10*De)-10*Math.floor(De),Sn=("00"+nt).slice(-2).toString(),qe=("00"+bt).slice(-2).toString(),Ut=("00"+Wt).slice(-2).toString(),M=("0"+ln).slice(-1).toString();let re=this.longDuration?Sn+":":"";return re+=qe+":"+Ut+"."+M,re}isTimeStringValid(le,De){let bt=!1;return new RegExp(this.editPattern).test(le)||(bt=!0),De?this.badInputDataMin=bt:this.badInputDataMax=bt,!bt}timeStringToSeconds(le){const De=le.split(":");let nt=0;if(2===De.length){const bt=De[1];nt=60*Number(De[0])+Number(bt)}else if(3===De.length){const bt=De[2],Wt=De[1];nt=3600*Number(De[0])+60*Number(Wt)+Number(bt)}return nt}secondsToTimeString(le){const De=Math.floor(le/3600),nt=Math.floor(le/60-60*De),bt=Math.floor(le-3600*De-60*nt),Wt=Math.floor(10*le)-10*Math.floor(le),ln=("00"+De).slice(-2).toString(),Sn=("00"+nt).slice(-2).toString(),qe=("00"+bt).slice(-2).toString(),Ut=("0"+Wt).slice(-1).toString();let M=this.longDuration?ln+":":"";return M+=Sn+":"+qe+"."+Ut,M}calculateNewPercentage(le){return le/this.video.duration*100}timeChanged(le,De,nt){if(!this.isTimeStringValid(le,De))return void this.checkIfDataIsEdited();this.checkIfDataIsEdited();const bt=this.timeStringToSeconds(le),Wt=this.calculateNewPercentage(bt);if(De){if("decrement"===nt&&this.sliderTrimLeft<=0||Wt+this.spaceBetween>=this.sliderTrimRight)return!1;this.sliderTrimLeft=Wt,this.rangeCheckRight.min=Wt+this.spaceBetween}else{if("increment"===nt&&Wt>=100)return this.sliderTrimRight=100,!1;if(Wt-this.spaceBetween<=this.sliderTrimLeft)return!1;this.sliderTrimRight=Wt,this.rangeCheckLeft.max=Wt-this.spaceBetween}return!0}modifyTime(le,De){const bt="increment"===le?this.step:-this.step;if(De){let Wt=this.timeStringToSeconds(this.minTime)+bt;Wt=Math.round(10*Wt)/10,Wt=Math.floor(10*Wt)/10;const ln=this.secondsToTimeString(Wt);this.timeChanged(ln.toString(),De,le)&&(this.minTime=ln)}else{let Wt=this.timeStringToSeconds(this.maxTime)+bt;Wt=Math.round(10*Wt)/10,Wt=Math.floor(10*Wt)/10;const ln=this.secondsToTimeString(Wt);this.timeChanged(ln.toString(),De,le)&&(this.maxTime=ln)}}setVideoTrimParams(le){const De=this.sliderTrimLeft*this.video.duration*10,nt=De/1e3,bt=(this.sliderTrimRight-this.sliderTrimLeft)*this.video.duration*10;this.videoParams={trimmed:le,startMs:De,durationMs:bt,sliderPosition:this.sliderPosition,sliderTrimRight:this.sliderTrimRight,sliderTrimLeft:this.sliderTrimLeft,start:nt,stop:nt+bt/1e3,volume:this.volume,mute:0===this.volume,volumeChanged:100!==this.volume},this.logger.info("Video Parameters for Trim: ",this.videoParams)}getTrimStopPosition(){return(this.sliderTrimLeft*this.video.duration*10+(this.sliderTrimRight-this.sliderTrimLeft)*this.video.duration*10)/1e3}verifyDateAndTime(le,De){return!!(/^\d{4}.\d{2}.\d{2}$/.test(le)&&/^\d{2}.\d{2}.\d{2}.\d{2}$/.test(De)&&h(le,"YYYY.MM.DD",!0).isValid()&&h(De,"HH.mm.ss.SS",!0).isValid())}createOutputFilename(le){let De="";const nt=le.lastIndexOf(".");nt>=0&&(De=le.slice(0,nt));const bt=Date.now(),Wt=h(bt).format("YYYY.MM.DD - HH.mm.ss.SS"),ln=De.length-24,Sn=De.length-11,qe=De.slice(ln,ln+10),Ut=De.slice(Sn);return this.verifyDateAndTime(qe,Ut)&&(De=De.slice(0,ln))," "!==De[De.length-1]&&(De+=" "),De+Wt+".mp4"}}return gt.\u0275fac=function(le){return new(le||gt)(c.Y36(y.ed),c.Y36(u.rj),c.Y36(y.dF),c.Y36(c.Qsj),c.Y36(i.F0),c.Y36(i.gz),c.Y36(u.HY),c.Y36(u.Sp),c.Y36(u.Mb),c.Y36(g.ad),c.Y36(I.sK))},gt.\u0275cmp=c.Xpm({type:gt,selectors:[["oogg-preview"]],viewQuery:function(le,De){if(1&le&&(c.Gf(G,5),c.Gf(x,5),c.Gf(E,7)),2&le){let nt;c.iGM(nt=c.CRH())&&(De.imageRef=nt.first),c.iGM(nt=c.CRH())&&(De.videoRef=nt.first),c.iGM(nt=c.CRH())&&(De.infoSideNav=nt.first)}},decls:17,vars:14,consts:[["fxLayout","column","fxFlexFill","",1,"nv-oogg"],["fxFlexFill",""],["mode","side","position","end",1,"sidepanel-area"],["infoSideNav",""],["class","montage-item","fxFlex","","cdkScrollable","",4,"ngIf"],[1,"preview-container"],["fxLayout","row","fxFlexFill","",3,"ngClass"],["fxLayout","column","fxFlex",""],["fxFlex","none","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",3,"ngClass"],["fxFlex","grow",1,"font-body3"],["dir","auto","fxFlex","none",1,"font-body3"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],["fxFlex","","fxLayout","column",4,"ngIf"],["fxFlex","","cdkScrollable","",1,"montage-item"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","none","mat-button","",1,"complex-button",3,"click"],["svgIcon","chevron_left","class","nav-button",4,"ngIf"],["fxFlex","","fxFlexAlign","stretch",1,"content-container"],[1,"content-absolute"],["alt","","tabIndex","-1",1,"preview-content",3,"src"],["image",""],["svgIcon","chevron_right","class","nav-button",4,"ngIf"],["svgIcon","chevron_left",1,"nav-button"],["svgIcon","chevron_right",1,"nav-button"],["fxFlex","","fxLayout","column"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"content-container",3,"keydown"],["fxFlex","none","mat-button","","class","complex-button",3,"click",4,"ngIf"],["type","video/mp4","tabIndex","-1",1,"preview-content",3,"src","loadeddata","error"],["video",""],[4,"ngIf"],["dir","ltr","fxFlex","none","fxLayout","row","fxLayoutAlign","start center",1,"viewer-media-toolbar"],["fxFlex","none",1,"viewer-playpause-button",3,"svgIcon","tooltip","clicked"],["fxFlex","grow","min","0","max","100",3,"step","value","animating","valueChange","input","mousedown","mouseup",4,"ngIf"],["fxLayout","row","fxFlex","grow","fxLayoutGap","16px",4,"ngIf"],["fxLayout","","fxLayoutAlign","center center",3,"ngClass"],[1,"font-body2"],["fxFlex","none",1,"viewer-video-volume-button",3,"svgIcon","tooltip","clicked"],["min","0","max","100",1,"viewer-video-volume-slider",3,"value","valueChange"],["fxLayout","row","fxLayoutAlign","center center",1,"video-overlay-button",3,"click"],["svgIcon","play_arrow","class","video-overlay-button-icon circle-play",3,"ngClass",4,"ngIf"],["id","progressIndicator","class","md-accent","mode","indeterminate",4,"ngIf"],["svgIcon","alert_circle","class","icon-normal icon48 video-moment-error",4,"ngIf"],["class","video-box-error",4,"ngIf"],["svgIcon","play_arrow",1,"video-overlay-button-icon","circle-play",3,"ngClass"],["id","progressIndicator","mode","indeterminate",1,"md-accent"],["svgIcon","alert_circle",1,"icon-normal","icon48","video-moment-error"],[1,"video-box-error"],[1,"video-text-error","font-body1"],["fxFlex","grow","min","0","max","100",3,"step","value","animating","valueChange","input","mousedown","mouseup"],["fxLayout","row","fxFlex","grow","fxLayoutGap","16px"],["fxFlex","auto",3,"ngClass","text","placeholderText","disabled","textMaxLength","tooltip","pattern","rangeCheck","textChange","stringChange","incDecChange"],["fxFlex","grow",3,"value","leftPosition","rightPosition","disableTrim","spaceBetween","step","valueChange","leftPositionChange","rightPositionChange"]],template:function(le,De){1&le&&(c.TgZ(0,"div",0),c.TgZ(1,"mat-sidenav-container",1),c.TgZ(2,"mat-sidenav",2,3),c.YNc(4,P,1,0,"nv-montage",4),c.qZA(),c.TgZ(5,"mat-sidenav-content",5),c.TgZ(6,"div",6),c.TgZ(7,"div",7),c.TgZ(8,"div",8),c.TgZ(9,"div",9),c._uU(10),c.qZA(),c.TgZ(11,"span",10),c._uU(12),c.qZA(),c.TgZ(13,"span",10),c._uU(14),c.qZA(),c.qZA(),c.YNc(15,C,9,3,"div",11),c.YNc(16,ye,18,16,"div",12),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&le&&(c.xp6(4),c.Q6J("ngIf",De.montageMode),c.xp6(2),c.Q6J("ngClass",c.WLB(8,ue,!De.montageMode,De.montageMode)),c.xp6(2),c.Q6J("ngClass",c.WLB(11,X,De.montageMode,!De.montageMode)),c.xp6(2),c.Oqu(De.description),c.xp6(2),c.Oqu(De.dimensions),c.xp6(2),c.Oqu(De.fileSize),c.xp6(1),c.Q6J("ngIf",!De.isVideo),c.xp6(1),c.Q6J("ngIf",De.isVideo))},styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.nv-gap-4[_ngcontent-%COMP%]{height:4px}.nv-horizontal-gap-4[_ngcontent-%COMP%]{width:4px}.nv-gap-8[_ngcontent-%COMP%]{height:8px}.nv-horizontal-gap-8[_ngcontent-%COMP%]{width:8px}.nv-gap-12[_ngcontent-%COMP%]{height:12px}.nv-gap-16[_ngcontent-%COMP%]{height:16px}.nv-gap-24[_ngcontent-%COMP%]{height:24px}.nv-horizontal-gap-24[_ngcontent-%COMP%]{width:24px}.nv-gap-32[_ngcontent-%COMP%]{height:32px}.nv-horizontal-gap-32[_ngcontent-%COMP%]{width:32px}.nv-gap-40[_ngcontent-%COMP%]{height:40px}.nv-gap-48[_ngcontent-%COMP%]{height:48px}.infopanel[_ngcontent-%COMP%]{margin:16px 24px 8px;width:calc(100% - 48px)}.previewpanel[_ngcontent-%COMP%]{margin-bottom:8px}.preview-container[_ngcontent-%COMP%]{overflow:hidden}.preview[_ngcontent-%COMP%]{padding:16px}.montage[_ngcontent-%COMP%]{padding:0 16px}.montage-item[_ngcontent-%COMP%]{overflow-y:auto}.content-container[_ngcontent-%COMP%]{position:relative}.content-absolute[_ngcontent-%COMP%]{top:0;right:0;left:0;bottom:0;position:absolute}.preview-content[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.video-overlay-button[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;opacity:.95}.video-overlay-button-icon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px;padding:16px}.circle-play[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background-color:#191919}.icon48[_ngcontent-%COMP%]{width:48px;height:48px;font-size:48px}.nav-button[_ngcontent-%COMP%]{color:#ffffffb3;padding:6px;font-size:32px;width:36px;height:36px;border-radius:50%}.video-moment-error[_ngcontent-%COMP%]{position:absolute;text-align:center;vertical-align:middle}.video-box-error[_ngcontent-%COMP%]{margin-top:80px;text-align:center;display:table}.video-box-error[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle!important}.viewer-media-toolbar[_ngcontent-%COMP%]{width:100%;max-height:calc(36px + 32px);min-height:68px!important;padding:16px 24px}.viewer-bottom-toolbar[_ngcontent-%COMP%]{width:100%;height:40px;padding:0 8px 8px 24px}.viewer-playpause-button[_ngcontent-%COMP%]{margin:0 8px 0 0}.viewer-video-counter-short[_ngcontent-%COMP%]{min-width:110px;margin:0 0 0 16px}.viewer-video-counter-long[_ngcontent-%COMP%]{min-width:150px;margin:0 0 0 16px}.viewer-video-volume-slider[_ngcontent-%COMP%]{min-width:80px}.viewer-video-volume-button[_ngcontent-%COMP%]{margin:0 0 0 16px}.sidepanel-area[_ngcontent-%COMP%]{min-width:354px;max-width:354px;background-color:#191919;border-left:none}.short-ranged-time[_ngcontent-%COMP%]{max-width:60px;min-width:60px}.long-ranged-time[_ngcontent-%COMP%]{max-width:80px;min-width:80px}"]}),gt})();const Z=[{path:"",component:K}];var L=e(80395),W=e(90490),te=e(28416),ie=e(81134),Q=e(53466),k=e(18293),oe=e(99533);function N(gt,At){1&gt&&(c.TgZ(0,"mat-label",3),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&gt&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"montage.Celebration")))}function q(gt,At){if(1&gt){const le=c.EpF();c.TgZ(0,"nv-dropdown",10),c.NdJ("selectionChanged",function(nt){return c.CHM(le),c.oxw().onCelebrationChanged(nt)}),c.qZA()}if(2&gt){const le=c.oxw();c.Q6J("selection",le.celebrationIndex)("input",le.celebrationInput)}}function Me(gt,At){if(1&gt){const le=c.EpF();c.TgZ(0,"div",11),c.NdJ("click",function(){const bt=c.CHM(le).$implicit;return c.oxw().itemSelected(bt)}),c.TgZ(1,"nv-gallery-item",12),c.NdJ("selectedItemDeleted",function(nt){return c.CHM(le),c.oxw().removeItem(nt)}),c.qZA(),c.qZA()}if(2&gt){const le=At.$implicit,De=c.oxw();c.xp6(1),c.Q6J("item",le)("thumbWidth",De.thumbWidth)("thumbHeight",De.thumbHeight)("activeItem",De.activeItem===le?le:void 0)("deleteVisible",!0)}}let xe=(()=>{class gt{constructor(le,De,nt,bt,Wt,ln,Sn,qe,Ut,M,re,Ce,ke){this.bridgeService=le,this.dialogHelper=De,this.galleryService=nt,this.trimService=bt,this.loggingService=Wt,this.montageService=ln,this.osService=Sn,this.router=qe,this.route=Ut,this.appBarService=M,this.translateService=re,this.ipcService=Ce,this.idmService=ke,this.destroy$=new r.xQ,this.postMontageMessage="",this.tempDirectory="",this.tempOutput="",this.finalOutput="",this.thumbWidth=u.dz.width,this.thumbHeight=u.dz.height,this.title="",this.titlePlaceHolder={text:"montage.EnterTitle",arg:""},this.subtitle="",this.subtitlePlaceHolder={text:"montage.EnterSubtitle",arg:""},this.editStyle=["","","8px 0 0 0"],this.celebrationIndex=0,this.celebrationInput=[],this.celebrationValid=!1,this.logger=this.loggingService.getLogger("Montage")}ngOnInit(){this.montageItems=(0,o.cloneDeep)(this.galleryService.currentSelectedFilesData).sort((De,nt)=>{const bt=Date.parse(De.date),Wt=Date.parse(nt.date);return bt<Wt?-1:bt>Wt?1:0}),this.setupAppBar(!0),setTimeout(()=>{this.itemSelected(this.montageItems[0])}),this.bridgeService.executeCommand(w.Gh.Common.Gallery.GetSettings).pipe((0,a.R)(this.destroy$)).subscribe(De=>{this.tempDirectory=De.settings.tempFolderPath}),this.montageService.title=this.title=this.translateService.instant("montage.BestGamingMoments"),this.montageService.defaultTitle=this.titlePlaceHolder.text,this.montageService.defaultSubtitle=this.subtitlePlaceHolder.text,this.celebrationIndex=this.montageService.celebrationIndex,this.idmService.cachedUser.subscribe(De=>{var nt;let bt=null===(nt=De.data)||void 0===nt?void 0:nt.displayName;bt||(bt=this.translateService.instant("montage.Unknown")),this.montageService.username=bt,this.montageService.subtitle=this.subtitle=this.translateService.instant("montage.ByUsername",{arg:this.montageService.username})}),this.montageService.resList.length=0,this.montageService.initializeMontageMetrics();const le=[];this.montageItems.forEach(De=>{le.push(this.montageService.getVideoDimensionsOf(De.fullFilename))}),setTimeout(()=>{(0,W.$R)(...le).pipe((0,a.R)(this.destroy$)).subscribe(()=>{this.logger.info("Size of resList: ",this.montageService.resList.length),this.setupAppBar(!1)})}),this.appBarService.actionClicked$.pipe((0,a.R)(this.destroy$)).subscribe(De=>{this.logger.info("Action clicked: ",De),"montage"===De&&this.onMontageClicked()}),this.initializeCloudData()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}closeMontage(){this.router.navigate(["../gallery"],{relativeTo:this.route.parent,skipLocationChange:!0}).then(()=>{})}setupAppBar(le){this.appBarService.setAll({title:{entry:"montage.Montage",params:{}},navButtonArrow:!0,icons:[{id:"montage",text:"montage.Create",tooltip:"montage.CreateMontage",button:!0,disabled:le}]})}getFileSize(le){return 1024*parseInt(le.fileSize,10)}reset(){this.tempOutput="",this.finalOutput=""}initializeCloudData(){const le=this.montageService.montageCloudData.montageConfig.celebrations;void 0!==le&&le.length>0&&(this.celebrationValid=!0,le.forEach(De=>{const nt=`celebrations.${De.id}`;let bt=this.translateService.instant(nt);bt===nt&&(bt=De.name),this.celebrationInput.push(bt)}))}onMontageClicked(){this.logger.info("Create Montage clicked"),this.galleryService.currentSelectedFilesData?(this.postMontageMessage="",this.reset(),this.ipcService.get$(oe.oI.ProgressUpdate).pipe((0,a.R)(this.destroy$)).subscribe(De=>{this.progressDialogRef&&(this.progressDialogRef.componentInstance.value=Math.floor(Number(De)))},De=>{this.logger.error("Failed to initialize Experience Context with error: ",De)}),this.dialogHelper.openAlertDialog({title:"montage.Montage",query:"montage.Progress",queryParam:{},action1:"confirmation.cancel",progressBar:!0,progressMode:"determinate",progressPercentage:!0}).pipe((0,a.R)(this.destroy$)).subscribe(De=>{this.progressDialogRef=De,(0,te.S3)(De.afterClosed(),this.launchMontage(this.montageItems,De)).pipe((0,a.R)(this.destroy$),(0,Q.q)(1)).subscribe(nt=>{this.progressDialogRef=void 0,nt!==u.DX.Action1?(De.close(),this.postMontageMessage?(this.cleanup(),this.showError(this.postMontageMessage)):this.loadPreviewWithMontage()):this.cancel()},nt=>{this.progressDialogRef=void 0,this.cancel()})})):this.logger.info("No files selected in the gallery for use in the montage")}loadPreviewWithMontage(){this.trimService.getMetaData(this.finalOutput).subscribe(le=>{const De=this.osService.getDirSeparator(),nt=this.finalOutput.lastIndexOf(De),bt=this.finalOutput.slice(nt+1),Wt={fullFilename:this.finalOutput,selected:!1,file:{name:bt,type:le.fileType,subtype:le.fileSubType,source:le.fileSource,drsProfileName:le.DRSProfileName,thumbnail:""},folder:le.DRSProfileName,cmsId:le.cmsId,index:0,duration:le.duration,msDuration:le.msDuration,date:le.date,fileSize:le.fileSizeKB?le.fileSizeKB.toString():"0",audiotype:le.audiotype,hlName:"",hlDefinitionId:"",hlId:-1,hlGroup:"",cancel:!1,data:"",errorType:"",errorDetails:""};this.galleryService.setMontageMode(!1),this.montageService.montageComplete(le.msDuration),this.itemSelected(Wt),this.router.navigate(["../preview"],{relativeTo:this.route.parent,skipLocationChange:!0}).then(()=>{})},le=>{this.logger.info("Failed to get MetaData to load montage preview, returning to gallery"),this.closeMontage()})}cancel(){this.montageService.cancelMontage().subscribe(()=>this.cleanup())}cleanup(){this.finalOutput&&this.bridgeService.executeCommand(w.Gh.Common.Gallery.RemoveGalleryItem,{file:this.finalOutput,forceDelete:!0}).pipe((0,k.K)(()=>{})).subscribe()}showError(le){this.dialogHelper.openAlertDialog({title:"montage.Error",query:le,queryParam:{},action1:"confirmation.cancel"}).pipe((0,a.R)(this.destroy$)).subscribe()}removeItem(le){const De=this.montageItems.indexOf(le),nt=le===this.activeItem;this.montageItems.splice(De,1),this.montageService.metrics.itemsDeleted++,0===this.montageItems.length?this.closeMontage():nt&&this.itemSelected(this.montageItems[0])}itemSelected(le){this.activeItem=le,this.galleryService.currentFileData=le}checkMontageButtonState(){this.setupAppBar(0===this.montageService.title.length||0===this.montageService.subtitle.length)}titleChanged(le){this.logger.info("New title: ",le),this.montageService.title=le,this.montageService.metrics.titleSequenceChanged=f.wye.TRUE,this.checkMontageButtonState()}subtitleChanged(le){this.logger.info("New subtitle: ",le),this.montageService.subtitle=le,this.montageService.metrics.subtitleSequenceChanged=f.wye.TRUE,this.checkMontageButtonState()}onCelebrationChanged(le){this.logger.info("New Celebration: ",le),this.montageService.celebrationIndex=le}drop(le){this.montageService.metrics.itemsRearranged++,(0,L.bA)(le.container.data,le.previousIndex,le.currentIndex)}launchMontage(le,De){const nt=[];le.forEach(Wt=>{nt.push({video:Wt.fullFilename,videoDuration:Wt.msDuration,highlightName:Wt.hlName,edgeLog:"",description:Wt.date,cmsId:Wt.cmsId?Wt.cmsId.toString():"0",mediaType:Wt.file.subtype})});const bt=this.translateService.instant("montage.Montage");return this.tempOutput=this.galleryService.generateTempFilename(`${this.tempDirectory}`,"nvmontage","mp4"),this.logger.info("Montage temp output: ",this.tempOutput),this.montageService.mediaDir="C:/Montage/MontageMedia",this.logger.info("Montage Media Dir: ",this.montageService.mediaDir),this.montageService.createMontageFromRecipe(nt,this.tempOutput,"release/nvuniversal.html").pipe((0,s.zg)(Wt=>(this.logger.info("Intermediate Result: ",Wt),this.finalOutput=this.galleryService.generateGalleryFilename(bt,"mp4"),this.logger.info("Montage final output: ",this.finalOutput),this.progressDialogRef.componentInstance.dialogData={title:"montage.CreatingMontage",query:"montage.Completing",queryParam:{},action1:"confirmation.cancel",progressBar:!0,progressMode:"indeterminate"},this.bridgeService.executeCommand(w.Gh.Common.Gallery.MoveFile,{source:Wt,destination:this.finalOutput}))),(0,k.K)(Wt=>(this.postMontageMessage=Wt.message,(0,ie.of)(u.DX.Action2))))}}return gt.\u0275fac=function(le){return new(le||gt)(c.Y36(y.dF),c.Y36(u.Mb),c.Y36(u.rj),c.Y36(u.Sp),c.Y36(y.ed),c.Y36(u.wz),c.Y36(u.HY),c.Y36(i.F0),c.Y36(i.gz),c.Y36(g.ad),c.Y36(I.sK),c.Y36(oe.uC),c.Y36(f.No2))},gt.\u0275cmp=c.Xpm({type:gt,selectors:[["nv-montage"]],decls:23,vars:27,consts:[["multi","true","fxLayout","column",1,"montage","nv-oogg"],[1,"font-sub1"],["fxLayout","column"],[1,"font-sub2","title"],[3,"label","text","placeholderText","disabled","textMaxLength","textChange","stringChange"],["class","font-sub2 title",4,"ngIf"],[3,"selection","input","selectionChanged",4,"ngIf"],["cdkDropList","","cdkDropListOrientation","vertical",1,"montage-container",3,"cdkDropListData","cdkDropListDropped"],["montageList","cdkDropList"],["class","item montage-item","fxLayout","column","cdkDrag","",3,"click",4,"ngFor","ngForOf"],[3,"selection","input","selectionChanged"],["fxLayout","column","cdkDrag","",1,"item","montage-item",3,"click"],[3,"item","thumbWidth","thumbHeight","activeItem","deleteVisible","selectedItemDeleted"]],template:function(le,De){1&le&&(c.TgZ(0,"mat-accordion",0),c.TgZ(1,"mat-expansion-panel"),c.TgZ(2,"mat-expansion-panel-header"),c.TgZ(3,"mat-panel-title",1),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.qZA(),c.TgZ(6,"div",2),c.TgZ(7,"mat-label",3),c._uU(8),c.ALo(9,"translate"),c.qZA(),c.TgZ(10,"nv-input",4),c.NdJ("textChange",function(bt){return De.title=bt})("stringChange",function(bt){return De.titleChanged(bt)}),c.qZA(),c.TgZ(11,"nv-input",4),c.NdJ("textChange",function(bt){return De.subtitle=bt})("stringChange",function(bt){return De.subtitleChanged(bt)}),c.qZA(),c.YNc(12,N,3,3,"mat-label",5),c.YNc(13,q,1,2,"nv-dropdown",6),c.qZA(),c.qZA(),c._UZ(14,"nv-divider"),c.TgZ(15,"mat-expansion-panel"),c.TgZ(16,"mat-expansion-panel-header"),c.TgZ(17,"mat-panel-title",1),c._uU(18),c.ALo(19,"translate"),c.qZA(),c.qZA(),c.TgZ(20,"div",7,8),c.NdJ("cdkDropListDropped",function(bt){return De.drop(bt)}),c.YNc(22,Me,2,5,"div",9),c.qZA(),c.qZA(),c.qZA()),2&le&&(c.xp6(4),c.Oqu(c.lcZ(5,21,"montage.Properties")),c.xp6(4),c.Oqu(c.lcZ(9,23,"montage.TitleSequence")),c.xp6(2),c.Akn(De.editStyle),c.Q6J("label","montage.Title")("text",De.title)("placeholderText",De.titlePlaceHolder)("disabled",!1)("textMaxLength",80),c.xp6(1),c.Akn(De.editStyle),c.Q6J("label","montage.Subtitle")("text",De.subtitle)("placeholderText",De.subtitlePlaceHolder)("disabled",!1)("textMaxLength",80),c.xp6(1),c.Q6J("ngIf",De.celebrationValid),c.xp6(1),c.Q6J("ngIf",De.celebrationValid),c.xp6(5),c.Oqu(c.lcZ(19,25,"montage.Media")),c.xp6(2),c.Q6J("cdkDropListData",De.montageItems),c.xp6(2),c.Q6J("ngForOf",De.montageItems))},styles:['.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.font-body1[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body3-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body3-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body1-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body3-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body1-link[_ngcontent-%COMP%]:active{opacity:.45}.font-button2[_ngcontent-%COMP%], .font-button1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}body[_ngcontent-%COMP%]   nv-oogg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:0;background:rgba(255,255,255,.3)}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:0;background:rgba(255,255,255,.7)}nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus, .nv-oogg[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none}nv-oogg[_ngcontent-%COMP%]   [readonly][_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   [type=readonly][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   [readonly][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   [type=readonly][_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;padding:0}nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled), nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled), .nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none}nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   dir[_ngcontent-%COMP%], nv-oogg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   dir[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{-webkit-margin-before:0!important;-webkit-margin-after:0!important;-webkit-margin-start:0!important;-webkit-margin-end:0!important;-webkit-padding-start:0!important;-moz-margin-start:0!important;-moz-margin-end:0!important;-moz-padding-start:0!important}nv-oogg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0}nv-oogg[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .nv-oogg[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:400;src:url(assets/hashed/NVIDIASans_W_Rg.8ae82cb5ee5f81bd6aae.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:500;src:url(assets/hashed/NVIDIASans_W_Md.01967ddb8c30c4ae00cd.woff2) format("woff2")}@font-face{font-family:"NVIDIA";font-style:normal;font-weight:700;src:url(assets/hashed/NVIDIASans_W_Bd.944051b1e910134743b5.woff2) format("woff2")}.font-header1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:96px;line-height:128px;letter-spacing:-1.5px;font-weight:500}.font-header2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:60px;line-height:80px;letter-spacing:0;font-weight:700}.font-header3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:48px;line-height:64px;letter-spacing:0;font-weight:700}.font-header4[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:34px;line-height:48px;letter-spacing:.25px;font-weight:700}.font-header5[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:24px;line-height:32px;letter-spacing:0;font-weight:500}.font-header6[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:20px;line-height:28px;letter-spacing:.15px;font-weight:500}.font-header7[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:0px;font-weight:500}.font-sub1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.6px}.font-sub2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.5px}.font-sub3[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffe6;font-weight:500;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.5px}.font-body1[_ngcontent-%COMP%], .font-body1-italic[_ngcontent-%COMP%], .font-body1-link[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:16px;line-height:24px;letter-spacing:.5px}.font-body2[_ngcontent-%COMP%], .font-body2-italic[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:14px;line-height:20px;letter-spacing:.25px}.font-body3[_ngcontent-%COMP%], .font-body3-italic[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%], .font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;color:#ffffffb3;font-weight:400;font-style:normal;text-transform:none;font-size:12px;line-height:16px;letter-spacing:.25px}.font-body1-italic[_ngcontent-%COMP%]{font-style:italic}.font-body2-italic[_ngcontent-%COMP%]{font-style:italic}.font-body3-italic[_ngcontent-%COMP%]{font-style:italic}.font-body1-link[_ngcontent-%COMP%], .font-body2-link[_ngcontent-%COMP%], .font-body3-link[_ngcontent-%COMP%]{text-decoration:none;border-bottom:1px solid transparent}.font-body1-link[_ngcontent-%COMP%]:hover, .font-body2-link[_ngcontent-%COMP%]:hover, .font-body3-link[_ngcontent-%COMP%]:hover, .font-body1-link[_ngcontent-%COMP%]:focus, .font-body2-link[_ngcontent-%COMP%]:focus, .font-body3-link[_ngcontent-%COMP%]:focus, .cdk-keyboard-focused.font-body1-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body2-link[_ngcontent-%COMP%], .cdk-keyboard-focused.font-body3-link[_ngcontent-%COMP%]{cursor:pointer;outline:none;border-bottom:1px dotted #76b900}.font-body1-link[_ngcontent-%COMP%]:active, .font-body2-link[_ngcontent-%COMP%]:active, .font-body3-link[_ngcontent-%COMP%]:active{opacity:.45}.font-body1-link[_ngcontent-%COMP%]{color:#76b900}.font-body2-link[_ngcontent-%COMP%]{color:#76b900}.font-body3-link[_ngcontent-%COMP%]{color:#76b900}.font-caption1[_ngcontent-%COMP%], .font-overline1[_ngcontent-%COMP%]{color:#fff9;letter-spacing:.4px}.font-overline1[_ngcontent-%COMP%]{text-transform:uppercase}.font-button1[_ngcontent-%COMP%], .font-button2[_ngcontent-%COMP%]{font-family:"NVIDIA",sans-serif;font-size:14px;line-height:20px;letter-spacing:.4px;font-weight:500;font-style:normal;text-transform:uppercase;text-decoration:none}.font-button1[_ngcontent-%COMP%]{color:#76b900}.font-button2[_ngcontent-%COMP%]{color:#fff}.font-color-primary[_ngcontent-%COMP%]{color:#ffffffe6}.font-color-secondary[_ngcontent-%COMP%]{color:#ffffffb3}.font-color-tertiary[_ngcontent-%COMP%]{color:#fff9}.montage-container[_ngcontent-%COMP%]{cursor:move}.montage-container[_ngcontent-%COMP%]   .montage-item[_ngcontent-%COMP%]{padding-bottom:18px}.cdk-drag-animating[_ngcontent-%COMP%], .montage-container.cdk-drop-list-dragging[_ngcontent-%COMP%]   .montage-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .3s cubic-bezier(0,0,.2,1)}.title[_ngcontent-%COMP%]{margin:8px 0 0;height:32px}.montage[_ngcontent-%COMP%]{padding:24px;overflow-y:auto}']}),gt})();var ct=e(30582),Se=e(86608),Ge=e(42791),St=e(89460),Tt=e(772),Te=e(70781),Je=e(52529),xt=e(80181),Ye=e(96351),rt=e(9082),ge=e(65788),Ve=e(55519),at=e(1707),ve=e(50298);const Ze=function(gt){return{arg:gt}};function Ie(gt,At){if(1&gt){const le=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"mat-form-field",2),c.TgZ(2,"mat-label",3),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"input",4,5),c.NdJ("ngModelChange",function(nt){return c.CHM(le),c.oxw().text=nt})("change",function(){return c.CHM(le),c.oxw().updateSource()})("input",function(nt){return c.CHM(le),c.oxw().textInput(nt)}),c.ALo(7,"translate"),c.ALo(8,"translate"),c.qZA(),c.qZA(),c.qZA()}if(2&gt){const le=c.oxw();c.xp6(3),c.Oqu(c.lcZ(4,9,le.label)),c.xp6(2),c.Q6J("placeholder",c.xi3(7,11,null==le.placeholderText?null:le.placeholderText.text,c.VKq(16,Ze,null==le.placeholderText?null:le.placeholderText.arg)))("ngModel",le.text)("ngStyle",le.itemStyle)("matTooltip",c.lcZ(8,14,le.tooltip))("pattern",le.pattern)("disabled",le.disabled)("readonly",le.readonly)("tabindex",le.tabindex)}}function $e(gt,At){if(1&gt){const le=c.EpF();c.TgZ(0,"div",6),c.TgZ(1,"input",7,5),c.NdJ("ngModelChange",function(nt){return c.CHM(le),c.oxw().text=nt})("change",function(){return c.CHM(le),c.oxw().updateSource()})("input",function(nt){return c.CHM(le),c.oxw().textInput(nt)}),c.ALo(3,"translate"),c.ALo(4,"translate"),c.qZA(),c.qZA()}if(2&gt){const le=c.oxw();c.xp6(1),c.Q6J("placeholder",c.xi3(3,8,null==le.placeholderText?null:le.placeholderText.text,c.VKq(13,Ze,null==le.placeholderText?null:le.placeholderText.arg)))("ngModel",le.text)("ngStyle",le.itemStyle)("matTooltip",c.lcZ(4,11,le.tooltip))("pattern",le.pattern)("disabled",le.disabled)("readonly",le.readonly)("tabindex",le.tabindex)}}let _t=(()=>{class gt{constructor(){this.underlinecolor="",this.style=[],this.tooltip=void 0,this.pattern=void 0,this.rangeCheck=void 0,this.textChange=new c.vpe,this.stringChange=new c.vpe,this.incDecChange=new c.vpe}get text(){return this._text}set text(le){this._text=le,void 0!==this.rangeCheck&&this.setUnderlineColor()}updateSource(){this.textChange.emit(this.text)}validateInputText(){return!this.pattern||!!new RegExp(this.pattern).test(this.text)}durationToSeconds(le){const De=le.length>7,nt=le.lastIndexOf(":"),bt=le.slice(nt+1),Wt=le.slice(0,nt);if(De){const ln=Wt.lastIndexOf(":"),Sn=Wt.slice(ln+1),qe=le.slice(0,ln);return Number(bt)+60*Number(Sn)+3600*Number(qe)}return Number(bt)+60*Number(Wt)}validateInputRange(){if(!this.rangeCheck)return!0;const De=this.durationToSeconds(this.text)/this.rangeCheck.total*100;return!(De<this.rangeCheck.min||De>this.rangeCheck.max)}textInput(le){const De=le.target;De&&this.textMaxLength<=De.value.length?De.value=this.text=De.value.slice(0,this.textMaxLength):this.text=De.value,this.pattern&&this.setUnderlineColor(),this.stringChange.emit(this.text)}setUnderlineColor(){this.underlinecolor=this.validateInputText()&&this.validateInputRange()?"1px solid #76b900":"1px solid red"}get itemStyle(){return{height:this.style[0],margin:this.style[1],padding:this.style[2],"border-bottom":this.underlinecolor}}onkeydown(le){if(this.disabled)return;let De;"ArrowDown"===le.key?De="decrement":"ArrowUp"===le.key&&(De="increment"),De&&(le.preventDefault(),le.stopPropagation(),this.incDecChange.emit(De))}}return gt.\u0275fac=function(le){return new(le||gt)},gt.\u0275cmp=c.Xpm({type:gt,selectors:[["nv-input"]],hostBindings:function(le,De){1&le&&c.NdJ("keydown",function(bt){return De.onkeydown(bt)})},inputs:{label:"label",textMaxLength:"textMaxLength",disabled:"disabled",readonly:"readonly",tabindex:"tabindex",placeholderText:"placeholderText",style:"style",tooltip:"tooltip",pattern:"pattern",rangeCheck:"rangeCheck",text:"text"},outputs:{textChange:"textChange",stringChange:"stringChange",incDecChange:"incDecChange"},decls:2,vars:2,consts:[[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],["color","accent","appearance","fill",1,"nv-input-form"],[1,"font-body3","font-nocolor"],["type","text","matTooltipClass","nv-oogg oogg-tooltip","fxLayoutAlign","center center","matInput","","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"font-body2",3,"placeholder","ngModel","ngStyle","matTooltip","pattern","disabled","readonly","tabindex","ngModelChange","change","input"],["input",""],["fxLayout","row","fxLayoutAlign","start center"],["type","text","matTooltipClass","nv-oogg oogg-tooltip","fxLayoutAlign","center center","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"font-body2","nv-input-raw",3,"placeholder","ngModel","ngStyle","matTooltip","pattern","disabled","readonly","tabindex","ngModelChange","change","input"]],template:function(le,De){1&le&&(c.YNc(0,Ie,9,18,"div",0),c.YNc(1,$e,5,15,"div",1)),2&le&&(c.Q6J("ngIf",De.label),c.xp6(1),c.Q6J("ngIf",!De.label))},directives:[n.O5,ge.KE,ge.hX,Ve.Nt,at.Fj,ct.Wh,at.JJ,at.On,n.PC,St.Zl,ve.gM,at.c5,ct.xw],pipes:[I.X$],styles:[".nv-input-form[_ngcontent-%COMP%]{width:100%}.nv-input-raw[_ngcontent-%COMP%]{width:100%;background-color:transparent;border:0;caret-color:#76b900;box-sizing:border-box;border-bottom:1px solid rgba(255,255,255,.3)}.nv-input-raw[_ngcontent-%COMP%]:disabled{opacity:.38;cursor:default}.nv-input-raw[_ngcontent-%COMP%]:focus{padding-bottom:0;border-bottom:1px solid #76b900}.nv-input-raw[_ngcontent-%COMP%]:not(:focus){padding-bottom:0;border-bottom:1px solid rgba(255,255,255,.3)!important}.font-nocolor[_ngcontent-%COMP%]{color:unset}"]}),gt})();var be=e(20657),pt=e(90084),Ot=e(24298),Kt=e(71918),nn=e(36145),tn=e(94283),Mn=e(51606);const Un=["sliderWrapper"];function _n(gt,At){if(1&gt&&(c.TgZ(0,"div",6),c._UZ(1,"div",7),c._UZ(2,"div",8),c._UZ(3,"div",9),c._UZ(4,"div",10),c.qZA()),2&gt){const le=c.oxw();c.xp6(1),c.Q6J("ngStyle",le._trackBackgroundStyles),c.xp6(1),c.Q6J("ngStyle",le._trackMaxRangeBackgroundStyles),c.xp6(1),c.Q6J("ngStyle",le._trackFillStyles),c.xp6(1),c.Q6J("ngStyle",le._trackMinRangeBackgroundStyles)}}function xn(gt,At){if(1&gt&&(c.TgZ(0,"div",11),c._UZ(1,"div",12),c.qZA()),2&gt){const le=c.oxw();c.Q6J("ngStyle",le._ticksContainerStyles),c.xp6(1),c.Q6J("ngStyle",le._ticksStyles)}}function Fn(gt,At){if(1&gt&&(c.TgZ(0,"div",13),c._UZ(1,"div",14),c._UZ(2,"div",15),c.TgZ(3,"div",16),c.TgZ(4,"span",17),c._uU(5),c.qZA(),c.qZA(),c.qZA()),2&gt){const le=c.oxw();c.Q6J("ngStyle",le._thumbContainerStyles),c.xp6(5),c.Oqu(le.displayValue)}}function yt(gt,At){if(1&gt&&(c.TgZ(0,"div",6),c._UZ(1,"div",18),c._UZ(2,"div",19),c.qZA()),2&gt){const le=c.oxw();c.xp6(2),c.Q6J("ngStyle",le._activeTrackStyle)}}function Ht(gt,At){if(1&gt){const le=c.EpF();c.TgZ(0,"div",20),c.NdJ("mousedown",function(){return c.CHM(le),c.oxw().leftDown=!0})("mouseup",function(){return c.CHM(le),c.oxw().leftDown=!1},!1,c.Jf7),c._UZ(1,"div",21),c._UZ(2,"div",22),c.qZA()}if(2&gt){const le=c.oxw();c.Q6J("ngStyle",le._thumbContainerStyle),c.xp6(1),c.ekj("clicked",le.leftDown),c.xp6(1),c.ekj("clicked",le.leftDown)}}function Ue(gt,At){if(1&gt){const le=c.EpF();c.TgZ(0,"div",20),c.NdJ("mousedown",function(){return c.CHM(le),c.oxw().rightDown=!0})("mouseup",function(){return c.CHM(le),c.oxw().rightDown=!1},!1,c.Jf7),c._UZ(1,"div",23),c._UZ(2,"div",24),c.qZA()}if(2&gt){const le=c.oxw();c.Q6J("ngStyle",le._thumbContainerStyle),c.xp6(1),c.ekj("clicked",le.rightDown),c.xp6(1),c.ekj("clicked",le.rightDown)}}const Mt=(0,nn.i$)({passive:!1}),dt={provide:at.JU,useExisting:(0,c.Gpc)(()=>gn),multi:!0};class kt{}const Zt=(0,Ot.sb)((0,Ot.pj)((0,Ot.Id)(class{constructor(gt){this._elementRef=gt}}),"accent")),dn=-4294967295;let gn=(()=>{class gt extends Zt{constructor(le,De,nt,bt,Wt,ln,Sn,qe){super(le),this._focusMonitor=De,this._changeDetectorRef=nt,this._dir=bt,this._ngZone=ln,this._animationMode=qe,this.leftDown=!1,this.rightDown=!1,this.trimThumb=!1,this.setWidthOnMin=!1,this.leftThumb=!1,this.rightThumb=!1,this._rangeMin=dn,this._rangeMax=dn,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new c.vpe,this.input=new c.vpe,this.valueChange=new c.vpe,this.onTouched=()=>{},this._percent=0,this._percentLeft=0,this._percentRight=100,this._isSliding=!1,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=tn.w.EMPTY,this._pointerDown=Ut=>{this.disabled||this._isSliding||!jt(Ut)&&0!==Ut.button||this._ngZone.run(()=>{const M=this.value,re=En(Ut);this._isSliding=!0,this._lastPointerEvent=Ut,Ut.preventDefault(),this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(Ut),this._focusHostElement(),this._updateValueFromPosition(re),this._valueOnSlideStart=this.value,this._pointerPositionOnStart=re,M!==this.value&&(this._emitInputEvent(),this._emitChangeEvent())})},this._pointerMove=Ut=>{if(this._isSliding){Ut.preventDefault();const M=this.value;this._lastPointerEvent=Ut,this._updateValueFromPosition(En(Ut)),M!==this.value&&this._emitInputEvent()}},this._pointerUp=Ut=>{if(this._isSliding){const M=this._pointerPositionOnStart,re=En(Ut);Ut.preventDefault(),this._removeGlobalEvents(),this._valueOnSlideStart=this._pointerPositionOnStart=this._lastPointerEvent=null,this._isSliding=!1,this._valueOnSlideStart!==this.value&&!this.disabled&&M&&(M.x!==re.x||M.y!==re.y)&&this._emitChangeEvent()}},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=Sn,this.tabIndex=parseInt(Wt)||0,ln.runOutsideAngular(()=>{const Ut=le.nativeElement;Ut.addEventListener("mousedown",this._pointerDown,Mt),Ut.addEventListener("touchstart",this._pointerDown,Mt)})}get rangeMin(){return this._rangeMin}set rangeMin(le){const De=(0,be.su)(le,this._min);this._rangeMin=this._calculatePercentage(De)}get rangeMax(){return this._rangeMax}set rangeMax(le){const De=(0,be.su)(le,this._max);this._rangeMax=this._calculatePercentage(De)}get invert(){return this._invert}set invert(le){this._invert=(0,be.Ig)(le)}get max(){return this._max}set max(le){this._max=(0,be.su)(le,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(le){this._min=(0,be.su)(le,this._min),this.setWidthOnMin&&(this.hostWidth=100-this._min+"%"),null===this._value&&(this.value=this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(le){this._step=(0,be.su)(le,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(le){this._thumbLabel=(0,be.Ig)(le)}get tickInterval(){return this._tickInterval}set tickInterval(le){this._tickInterval="auto"===le?"auto":"number"==typeof le||"string"==typeof le?(0,be.su)(le,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(le){if(le!==this._value){let De=(0,be.su)(le);const nt=De/100;if(this._isSliding&&(nt<this.rangeMin||nt>this.rangeMax))return;this._roundToDecimal&&(De=parseFloat(De.toFixed(this._roundToDecimal))),this._value=De,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(le){this._vertical=(0,be.Ig)(le)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(le){this._focusHostElement(le)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}get percentLeft(){return this._clamp(this._percentLeft)}get percentRight(){return this._clamp(this._percentRight)}get _invertAxis(){return this.vertical?!this.invert:this.invert}get _isMinValue(){return 0===this.percent}get _thumbGap(){return this.disabled?7:this._isMinValue&&!this.thumbLabel?this._isActive?10:7:0}get _thumbContainerStyle(){return{left:100*this._clamp(this.percent)+"%"}}get _activeTrackStyle(){return{left:"0",width:100*this._clamp(this.percent)+"%",color:"#76b900"}}get _trackMaxRangeBackgroundStyles(){return{transform:`scale3d(${1-this.rangeMax+", 1, 1"})`}}get _trackMinRangeBackgroundStyles(){return{transform:`scale3d(${this.rangeMin}, 1, 1)`}}get _trackBackgroundStyles(){return{transform:`scale3d(${1-this.percent+", 1, 1"})`}}get _trackFillStyles(){const le=this.percent;return{transform:`scale3d(${le}, 1, 1)`,display:0===le?"none":""}}get _ticksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!==this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}get _ticksStyles(){const le=100*this._tickIntervalPercent,De=this.vertical?`2px ${le}%`:`${le}% 2px`,nt=this.vertical?"Y":"X",bt=this.vertical||"rtl"!==this._getDirection()?"":"-",Wt=this.vertical||"rtl"!==this._getDirection()?"":" rotate(180deg)";let ln;if(ln=0!==le?{backgroundSize:De,transform:`translateZ(0) translate${nt}(${bt}${le/2}%)${Wt}`}:{backgroundSize:De,transform:`${Wt}`},this._isMinValue&&this._thumbGap){let Sn;Sn=this.vertical?this._invertAxis?"Bottom":"Top":this._invertAxis?"Right":"Left",ln[`padding${Sn}`]=`${this._thumbGap}px`}return ln}get _thumbContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!==this._getDirection()||this.vertical?this._invertAxis:!this._invertAxis)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){return"rtl"!==this._getDirection()||this.vertical?this._invertAxis:!this._invertAxis}_getDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}ngOnInit(){this.trimThumb=this.leftThumb||this.rightThumb,this._focusMonitor.monitor(this._elementRef,!0).subscribe(le=>{this._isActive=!!le&&"keyboard"!==le,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const le=this._elementRef.nativeElement;le.removeEventListener("mousedown",this._pointerDown,Mt),le.removeEventListener("touchstart",this._pointerDown,Mt),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(le){if(this.disabled||(0,pt.Vb)(le))return;const De=this.value;switch(le.keyCode){case pt.Ku:this._increment(10);break;case pt.VM:this._increment(-10);break;case pt.uR:this.value=100*this.rangeMax;break;case pt.Sd:this.value=100*this.rangeMin;break;case pt.oh:this._increment("rtl"===this._getDirection()?1:-1);break;case pt.LH:this._increment(1);break;case pt.SV:this._increment("rtl"===this._getDirection()?-1:1);break;case pt.JH:this._increment(-1);break;default:return}De!==this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding=!0,le.preventDefault()}_onKeyup(){this._isSliding=!1}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(le){const De=this._document,nt=jt(le),Wt=nt?"touchend":"mouseup";De.addEventListener(nt?"touchmove":"mousemove",this._pointerMove,Mt),De.addEventListener(Wt,this._pointerUp,Mt),nt&&De.addEventListener("touchcancel",this._pointerUp,Mt);const ln=this._getWindow();void 0!==ln&&ln&&ln.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const le=this._document;void 0!==le&&le&&(le.removeEventListener("mousemove",this._pointerMove,Mt),le.removeEventListener("mouseup",this._pointerUp,Mt),le.removeEventListener("touchmove",this._pointerMove,Mt),le.removeEventListener("touchend",this._pointerUp,Mt),le.removeEventListener("touchcancel",this._pointerUp,Mt));const De=this._getWindow();void 0!==De&&De&&De.removeEventListener("blur",this._windowBlur)}_increment(le){const De=this._clamp((this.value||0)+this.step*le,this.min,this.max),nt=De/100;this.value=nt<this.rangeMin?100*this.rangeMin:nt>this.rangeMax?100*this.rangeMax:De}_updateValueFromPosition(le){if(!this._sliderDimensions)return;let Wt=this._clamp(((this.vertical?le.y:le.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(Wt=1-Wt),0===Wt)this.value=this.min;else if(1===Wt)this.value=this.max;else{const ln=this._calculateValue(Wt),Sn=Math.round((ln-this.min)/this.step)*this.step+this.min;this.value=this._clamp(Sn,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(this.tickInterval&&this._sliderDimensions)if("auto"===this.tickInterval){const le=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width,bt=Math.ceil(30/(le*this.step/(this.max-this.min)))*this.step;this._tickIntervalPercent=bt/le}else this._tickIntervalPercent=this.tickInterval*this.step/(this.max-this.min)}_createChangeEvent(le=this.value){const De=new kt;return De.source=this,De.value=le,De}_calculatePercentage(le){return((le||0)-this.min)/(this.max-this.min)}_calculateValue(le){return this.min+le*(this.max-this.min)}_clamp(le,De=0,nt=1){return Math.max(De,Math.min(le,nt))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(le){this._elementRef.nativeElement.focus(le)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(le){this.value=le}registerOnChange(le){this._controlValueAccessorChangeFn=le}registerOnTouched(le){this.onTouched=le}setDisabledState(le){this.disabled=le}}return gt.\u0275fac=function(le){return new(le||gt)(c.Y36(c.SBq),c.Y36(Mn.tE),c.Y36(c.sBO),c.Y36(Tt.Is,8),c.$8M("tabindex"),c.Y36(c.R0b),c.Y36(n.K0),c.Y36(Kt.Qb,8))},gt.\u0275cmp=c.Xpm({type:gt,selectors:[["nv-mat-slider"]],viewQuery:function(le,De){if(1&le&&c.Gf(Un,5),2&le){let nt;c.iGM(nt=c.CRH())&&(De._sliderWrapper=nt.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:30,hostBindings:function(le,De){1&le&&c.NdJ("focus",function(){return De._onFocus()})("blur",function(){return De._onBlur()})("keydown",function(bt){return De._onKeydown(bt)})("keyup",function(){return De._onKeyup()})("mouseenter",function(){return De._onMouseenter()})("selectstart",function(bt){return bt.preventDefault()}),2&le&&(c.Ikx("tabIndex",De.tabIndex),c.uIk("aria-disabled",De.disabled)("aria-valuemax",De.max)("aria-valuemin",De.min)("aria-valuenow",De.value)("aria-orientation",De.vertical?"vertical":"horizontal"),c.Udp("width",De.hostWidth),c.ekj("mat-slider-disabled",De.disabled)("mat-slider-has-ticks",De.tickInterval)("mat-slider-horizontal",!De.vertical)("mat-slider-axis-inverted",De._invertAxis)("mat-slider-invert-mouse-coords",De._shouldInvertMouseCoords())("mat-slider-sliding",De._isSliding)("mat-slider-thumb-label-showing",De.thumbLabel)("mat-slider-vertical",De.vertical)("mat-slider-min-value",De._isMinValue)("mat-slider-hide-last-tick",De.disabled||De._isMinValue&&De._thumbGap&&De._invertAxis)("_mat-animation-noopable","NoopAnimations"===De._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",setWidthOnMin:"setWidthOnMin",leftThumb:"leftThumb",rightThumb:"rightThumb",rangeMin:"rangeMin",rangeMax:"rangeMax",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["nvMatSlider"],features:[c._Bn([dt]),c.qOj],decls:9,vars:6,consts:[[1,"mat-slider-wrapper"],["slider","","sliderWrapper",""],["class","mat-slider-track-wrapper",4,"ngIf"],["class","mat-slider-ticks-container",3,"ngStyle",4,"ngIf"],["class","mat-slider-thumb-container",3,"ngStyle",4,"ngIf"],["class","nv-thumb-container",3,"ngStyle","mousedown","mouseup",4,"ngIf"],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-max-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-track-min-background",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"],[1,"nv-track"],[1,"nv-track-fill",3,"ngStyle"],[1,"nv-thumb-container",3,"ngStyle","mousedown","mouseup"],[1,"nv-thumb-left"],[1,"nv-thumb-left-base"],[1,"nv-thumb-right"],[1,"nv-thumb-right-base"]],template:function(le,De){1&le&&(c.TgZ(0,"div",0,1),c.YNc(3,_n,5,4,"div",2),c.YNc(4,xn,2,2,"div",3),c.YNc(5,Fn,6,2,"div",4),c.YNc(6,yt,3,1,"div",2),c.YNc(7,Ht,3,5,"div",5),c.YNc(8,Ue,3,5,"div",5),c.qZA()),2&le&&(c.xp6(3),c.Q6J("ngIf",!De.trimThumb),c.xp6(1),c.Q6J("ngIf",!De.trimThumb),c.xp6(1),c.Q6J("ngIf",!De.trimThumb),c.xp6(1),c.Q6J("ngIf",De.trimThumb),c.xp6(1),c.Q6J("ngIf",De.leftThumb),c.xp6(1),c.Q6J("ngIf",De.rightThumb))},directives:[n.O5,n.PC,St.Zl],styles:['.mat-slider-horizontal{min-width:0;height:20px}.mat-slider-horizontal .mat-slider-wrapper{left:0;right:0;top:9px}.mat-slider-vertical{min-height:0}.hig-slider-no-animation .mat-slider-track-fill,.hig-slider-no-animation .mat-slider-track-background,.hig-slider-no-animation .mat-slider-thumb-container{transition:none!important}.mat-slider-thumb{right:-6px;bottom:-6px;width:12px;height:12px;border-width:2px;transform:scale(1)}.mat-slider-min-value .mat-slider-thumb{background-color:#76b900!important;border-color:transparent!important}.mat-slider-min-value .mat-slider-thumb-label{background-color:#76b900!important}.mat-slider-disabled .mat-slider-thumb{border-width:2px;background-color:#76b90061!important;transform:scale(.85)}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(1)}.mat-accent .mat-slider-thumb-label-text{color:#fff}.mat-slider-focus-ring,.mat-slider-min-value .mat-slider-focus-ring{width:36px;height:36px;background-color:#76b90052;z-index:1}.mat-slider-focus-ring:active,.mat-slider-min-value .mat-slider-focus-ring:active{background-color:#76b90066}.mat-slider-horizontal .mat-slider-focus-ring{top:-18px;right:-18px}.mat-slider:not(.mat-slider-disabled):hover .mat-slider-focus-ring{transform:scale(1);opacity:.33}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-focus-ring,.mat-slider:not(.mat-slider-disabled).cdk-keyboard-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled).nv-mouse-down .mat-slider-focus-ring{transform:scale(1.33);opacity:1;cursor:grabbing}.mat-slider-disabled .mat-slider-track-fill{background-color:#76b90061}.mat-slider-disabled .mat-slider-track-background{background-color:#ffffff61}.mat-slider:not(.mat-slider-disabled) .mat-slider-track-background,.mat-slider:not(.mat-slider-disabled):hover .mat-slider-track-background,.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-track-background{background-color:#afafaf}.mat-slider:not(.mat-slider-disabled) .mat-slider-track-max-background,.mat-slider:not(.mat-slider-disabled) .mat-slider-track-min-background,.mat-slider:not(.mat-slider-disabled):hover .mat-slider-track-max-background,.mat-slider:not(.mat-slider-disabled):hover .mat-slider-track-min-background,.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-track-max-background,.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-track-min-background{background-color:#636363}.mat-slider-horizontal:not(.mat-slider-disabled).mat-slider-min-value .mat-slider-track-background{transform:translate(0)!important}.mat-slider-horizontal:not(.mat-slider-disabled).mat-slider-min-value .mat-slider-track-fill{transform:translate(0) scaleX(0)!important}.mat-slider-vertical:not(.mat-slider-disabled).mat-slider-min-value .mat-slider-track-background{transform:translateY(0)!important}.mat-slider-vertical:not(.mat-slider-disabled).mat-slider-min-value .mat-slider-track-fill{transform:translateY(0) scaleX(0)!important}.mat-slider-has-ticks .mat-slider-ticks{opacity:1}.mat-slider-has-ticks .mat-slider-wrapper:after{border-color:transparent}.mat-slider-horizontal .mat-slider-ticks{background-image:repeating-linear-gradient(to right,#191919,#191919 2px,transparent 0,transparent)}.mat-slider-vertical .mat-slider-ticks{background-image:repeating-linear-gradient(to bottom,#191919,#191919 2px,transparent 0,transparent)}.nv-thumb-container{position:absolute;left:0;top:50%;transform:translate(-50%,-50%);border-radius:50%;z-index:999}.nv-thumb-common,.nv-thumb-right-base,.nv-thumb-right,.nv-thumb-left-base,.nv-thumb-left,.nv-thumb{z-index:1;position:absolute;box-sizing:border-box}.nv-thumb{left:-8px;top:5px;width:14px;height:14px;border:2px solid #76b900;background-color:#76b900;border-radius:50%}.nv-thumb.cdk-focused,.nv-thumb:focus{background-color:#76b900;border:2px solid #76b900}.nv-thumb[disabled]{background-color:#393939}.nv-thumb:not([disabled]):not(.nv-mouse-down){cursor:grab}.nv-thumb:not([disabled]).nv-mouse-down{cursor:grabbing}.nv-thumb-left{left:-8px;top:4px;width:0;height:0;border-left:8px solid transparent;border-bottom:8px solid rgba(255,255,255,.7)}.cdk-focused .nv-thumb-left{left:-8px;top:4px;width:0;height:0}.cdk-focused .nv-thumb-left.clicked{border-bottom:8px solid #ffffff}.nv-thumb-left-base{left:-8px;top:12px;width:8px;height:4px;background:rgba(255,255,255,.7)}.cdk-focused .nv-thumb-left-base{left:-8px;top:12px;width:8px;height:10px}.cdk-focused .nv-thumb-left-base.clicked{background-color:#fff}.nv-thumb-right{left:0;top:4px;width:0;height:0;border-right:8px solid transparent;border-bottom:8px solid rgba(255,255,255,.7)}.cdk-focused .nv-thumb-right{left:0;top:4px;width:0;height:0}.cdk-focused .nv-thumb-right.clicked{border-bottom:8px solid #ffffff}.nv-thumb-right-base{left:0;top:12px;width:8px;height:4px;background:rgba(255,255,255,.7)}.cdk-focused .nv-thumb-right-base{left:0;top:12px;width:8px;height:10px}.cdk-focused .nv-thumb-right-base.clicked{background-color:#fff}.nv-track,.nv-track-fill{position:absolute;left:0;right:0;height:100%;background-color:#393939}.nv-track-fill{background-color:#76b900}.trim-slider{cursor:default}.trim-slider .nv-track,.trim-slider .nv-track-fill{background-color:transparent}.trim-slider .nv-thumb{border:none}.trim-slider .nv-thumb:before{content:"";display:block;position:absolute;top:-5px;height:0;left:3px;box-sizing:border-box;border-bottom:5px solid #393939;border-right:5px solid transparent;border-left:5px solid transparent}.trim-slider:focus .nv-thumb:before{border-bottom:5px solid #76b900}.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:0;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-min-background,.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:none!important}.mat-slider-track-max-background,.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:none!important}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{background-repeat:repeat;background-clip:content-box;box-sizing:border-box;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:none!important}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-6px;bottom:-6px;box-sizing:border-box;width:12px;height:12px;border:3px solid transparent;border-radius:50%;transform:scale(.7);transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1),border-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform .4s cubic-bezier(.25,.8,.25,1),border-radius .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper:after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper:after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper:after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-min-background,.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-max-background,.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:0;right:0}.mat-slider-horizontal .mat-slider-wrapper:after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-min-background,.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-max-background,.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:0;bottom:0;left:23px}.mat-slider-vertical .mat-slider-wrapper:after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.mat-slider-vertical .mat-slider-focus-ring{bottom:-18px;left:-18px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translate(26px) scale(.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper:after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-min-background,[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-max-background,[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-min-background,[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-max-background,[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-min-background,.mat-slider._mat-animation-noopable .mat-slider-track-max-background,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper:after{transition:none}\n'],encapsulation:2,changeDetection:0}),gt})();function jt(gt){return"t"===gt.type[0]}function En(gt){const At=jt(gt)?gt.touches[0]||gt.changedTouches[0]:gt;return{x:At.clientX,y:At.clientY}}let Pn=(()=>{class gt{constructor(){this.mouseDown=!1,this._leftPosition=0,this.leftPositionChange=new c.vpe,this._rightPosition=100,this.rightPositionChange=new c.vpe,this.valueChange=new c.vpe,this._value=0,this.step=1,this.disabled=!1,this.disableTrim=!1,this.spaceBetween=0,this.leftMax=100,this.rightMin=0}get leftPosition(){return this._leftPosition}set leftPosition(le){this._leftPosition!==le&&le<=this.rightPosition-this.spaceBetween&&(this._leftPosition=le,this.trimChanged(),this.leftPositionChange.emit(this._leftPosition))}get rightPosition(){return this._rightPosition}set rightPosition(le){this._rightPosition!==le&&le>=this.leftPosition+this.spaceBetween&&(this._rightPosition=le,this.trimChanged(),this.rightPositionChange.emit(this._rightPosition))}get value(){return this._value}set value(le){le!==this._value&&(this._value=le,this.valueChange.emit(this._value))}trimChanged(){this.leftMax=this.rightPosition-this.spaceBetween,this.rightMin=this.leftPosition+this.spaceBetween}sliderChanged(le){this.value=le.value}leftChanged(le){this.leftPosition=le.value}rightChanged(le){this.rightPosition=le.value}}return gt.\u0275fac=function(le){return new(le||gt)},gt.\u0275cmp=c.Xpm({type:gt,selectors:[["nv-mat-ranged-slider"]],inputs:{leftPosition:"leftPosition",rightPosition:"rightPosition",value:"value",step:"step",disabled:"disabled",disableTrim:"disableTrim",spaceBetween:"spaceBetween"},outputs:{leftPositionChange:"leftPositionChange",rightPositionChange:"rightPositionChange",valueChange:"valueChange"},decls:5,vars:26,consts:[[1,"ranged-slider-padding"],[1,"ranged-slider-wrapper"],["fxFlex","grow",3,"disabled","min","max","step","value","rangeMin","rangeMax","valueChange","input","mousedown","mouseup"],[1,"trim-slider","left-slider",3,"disabled","min","max","step","rangeMin","rangeMax","value","leftThumb","valueChange","input"],[1,"trim-slider","right-slider",3,"setWidthOnMin","disabled","min","max","step","rangeMin","rangeMax","value","rightThumb","valueChange","input"]],template:function(le,De){1&le&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"nv-mat-slider",2),c.NdJ("valueChange",function(bt){return De.value=bt})("input",function(bt){return De.sliderChanged(bt)})("mousedown",function(){return De.mouseDown=!0})("mouseup",function(){return De.mouseDown=!1},!1,c.Jf7),c.qZA(),c.TgZ(3,"nv-mat-slider",3),c.NdJ("valueChange",function(bt){return De.leftPosition=bt})("valueChange",function(){return De.trimChanged()})("input",function(bt){return De.leftChanged(bt)}),c.qZA(),c.TgZ(4,"nv-mat-slider",4),c.NdJ("valueChange",function(bt){return De.rightPosition=bt})("valueChange",function(){return De.trimChanged()})("input",function(bt){return De.rightChanged(bt)}),c.qZA(),c.qZA(),c.qZA()),2&le&&(c.xp6(2),c.ekj("nv-mouse-down",De.mouseDown),c.Q6J("disabled",De.disabled)("min",0)("max",100)("step",De.step)("value",De.value)("rangeMin",De.leftPosition)("rangeMax",De.rightPosition),c.xp6(1),c.Q6J("disabled",De.disableTrim)("min",0)("max",100)("step",De.step)("rangeMin",0)("rangeMax",De.leftMax)("value",De.leftPosition)("leftThumb",!0),c.xp6(1),c.Q6J("setWidthOnMin",!0)("disabled",De.disableTrim)("min",0)("max",100)("step",De.step)("rangeMin",De.rightMin)("rangeMax",100)("value",De.rightPosition)("rightThumb",!0))},directives:[gn,ct.yH],styles:["ranged-slider-padding[_ngcontent-%COMP%]{padding:0 8px}.ranged-slider-wrapper[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;position:relative}.ranged-slider-wrapper[_ngcontent-%COMP%]   .left-slider[_ngcontent-%COMP%], .ranged-slider-wrapper[_ngcontent-%COMP%]   .right-slider[_ngcontent-%COMP%]{position:absolute;width:100%}.ranged-slider-wrapper[_ngcontent-%COMP%]   .left-slider[_ngcontent-%COMP%]{left:0}.ranged-slider-wrapper[_ngcontent-%COMP%]   .right-slider[_ngcontent-%COMP%]{right:0}"]}),gt})();var Ln=e(1625),ht=e(80221);function Vt(gt,At){if(1&gt){const le=c.EpF();c.ynx(0),c.TgZ(1,"button",8),c.NdJ("click",function(){const bt=c.CHM(le).index;return c.oxw().itemSelect(bt)}),c.TgZ(2,"div",9),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.qZA(),c.BQk()}if(2&gt){const le=At.$implicit,De=At.index,nt=c.oxw();c.xp6(1),c.ekj("active",De==nt.selection),c.xp6(2),c.Oqu(c.lcZ(4,3,le))}}let ne=(()=>{class gt{constructor(){this.disabledState=void 0,this.disable=!1,this.menuOpen=!1,this._input=[],this._selection=0,this.selectionChanged=new c.vpe}set disabled(le){this.disabledState=le,this.disable=le||!!(this.input&&this.input.length<2)}get input(){return this._input}set input(le){this._input=le,this.setEntry()}set selection(le){this._selection=le,this.setEntry()}get selection(){return this._selection}setEntry(){this.input&&this.input.length>0?((this.selection<0||this.selection>=this.input.length)&&(this.selection=0),this.entry=this.input[this.selection],this.disable=!!this.disabledState||this.input.length<2):(this.entry="",this.disable=!0)}ngOnInit(){this.setEntry()}itemSelect(le){this.selection!==le&&(this.selection=le,this.selectionChanged.emit(le),this.setEntry())}buttonToggle(le){setTimeout(()=>{this.menuOpen=le})}}return gt.\u0275fac=function(le){return new(le||gt)},gt.\u0275cmp=c.Xpm({type:gt,selectors:[["nv-dropdown"]],inputs:{maxHeight:"maxHeight",disabled:"disabled",input:"input",selection:"selection"},outputs:{selectionChanged:"selectionChanged"},decls:10,vars:10,consts:[["fxFlex","grow",1,"nv-dropdown"],["matRipple","","fxLayout","row","fxLayoutAlign","start center","fxFlex","grow",1,"nv-dropdown-label","hig-button-overlay",3,"matMenuTriggerFor","disabled","menuOpened","menuClosed"],["fxFlex","grow",1,"font-body2","menu-text"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"nv-item-icon"],["svgIcon","chevron_down",1,"icon-normal"],["xPosition","after","yPosition","below","overlapTrigger","false",1,"nv-oogg","max-width-menu-class"],["menu","matMenu"],[4,"ngFor","ngForOf"],["mat-menu-item","","fxLayout","row","fxLayoutAlign","start center",1,"nv-dropdown-menu","hig-button-overlay",3,"click"],[1,"font-body2"]],template:function(le,De){if(1&le&&(c.TgZ(0,"div",0),c.TgZ(1,"button",1),c.NdJ("menuOpened",function(){return De.buttonToggle(!0)})("menuClosed",function(){return De.buttonToggle(!1)}),c.TgZ(2,"div",2),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"div",3),c._UZ(6,"mat-icon",4),c.qZA(),c.qZA(),c.TgZ(7,"mat-menu",5,6),c.YNc(9,Vt,5,5,"ng-container",7),c.qZA(),c.qZA()),2&le){const nt=c.MAs(8);c.ekj("nv-dropdown-z",De.menuOpen),c.xp6(1),c.Q6J("matMenuTriggerFor",nt)("disabled",De.disable),c.xp6(2),c.Oqu(c.lcZ(4,8,De.entry)),c.xp6(4),c.Udp("max-height",De.maxHeight,"px"),c.xp6(2),c.Q6J("ngForOf",De.input)}},directives:[ct.yH,Ot.wG,ct.xw,ct.Wh,ht.p6,Je.Hw,ht.VK,n.sg,ht.OP],pipes:[I.X$],styles:[".icon-normal{color:#ffffffb3}.icon-highlighted{color:#76b900}.icon-green-bg{background:#76b900}.icon-preview-visible{color:#fff}.icon-preview-hidden{opacity:0}.icon-warning{color:#ffb43e}.icon-alert{color:#0b8abc!important}:host[disabled] .nv-item *{cursor:default}.nv-item-icon{width:36px;height:36px}.nv-item-icon mat-icon{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row{padding:0 24px}.nv-item-labels{padding:8px 0;height:100%}.nv-label{padding:8px 0}.default-cursor{cursor:default}.disabled-opacity{opacity:.38}.nv-dropdown{width:100%;height:100%}.nv-dropdown-label{background-color:#393939}.nv-dropdown-label .menu-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host-context(.isLtr) .nv-dropdown-label .menu-text{text-align:left}html[dir=ltr] .nv-dropdown-label .menu-text{--dummy0: 0;text-align:left}:host-context(.isRtl) .nv-dropdown-label .menu-text{text-align:right}html[dir=rtl] .nv-dropdown-label .menu-text{--dummy0: 0;text-align:right}:host-context(.isLtr) .nv-dropdown-label .menu-text{padding:16px 0 16px 8px}html[dir=ltr] .nv-dropdown-label .menu-text{--dummy: 0;padding:16px 0 16px 8px}:host-context(.isRtl) .nv-dropdown-label .menu-text{padding:16px 8px 16px 0}html[dir=rtl] .nv-dropdown-label .menu-text{--dummy: 0;padding:16px 8px 16px 0}.nv-dropdown-z{z-index:9999}button.nv-dropdown-menu{box-sizing:border-box;margin:0;width:100%;height:unset}button.nv-dropdown-menu div{padding:8px 16px;overflow:hidden;text-overflow:ellipsis}:host-context(.isLtr) button.nv-dropdown-menu div{text-align:left}html[dir=ltr] button.nv-dropdown-menu div{--dummy0: 0;text-align:left}:host-context(.isRtl) button.nv-dropdown-menu div{text-align:right}html[dir=rtl] button.nv-dropdown-menu div{--dummy0: 0;text-align:right}button.nv-dropdown-menu.active div{color:#76b900}.nv-oogg.max-width-menu-class{width:306px}.nv-oogg.max-width-menu-class .mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}\n"],encapsulation:2}),gt})();var Be=e(41225),vt=e(80129);let Ct=(()=>{class gt{}return gt.\u0275fac=function(le){return new(le||gt)},gt.\u0275mod=c.oAB({type:gt}),gt.\u0275inj=c.cJS({imports:[[n.ez,y.it,T.m,D.o9,m.Q,i.Bz.forChild(Z),(0,y.zv)()]]}),gt})();c.B6R(K,[ct.xw,ct.s9,Se.TM,Se.JX,n.O5,xe,ct.yH,Ge.PQ,Se.Rh,n.mk,St.oO,ct.Wh,ct.SQ,Tt.Lv,Te.lW,Je.Hw,ct.XD,xt.Ou,Ye.n,rt.Q,_t,Pn],[]),c.B6R(xe,[Ln.pp,ct.xw,Ln.ib,Ln.yz,Ln.yK,ge.hX,_t,n.O5,ne,Be.n,L.Wj,n.sg,L.Zt,vt.x],[I.X$])},174:(He,de,e)=>{"use strict";e.d(de,{$:()=>E});var n=e(36511),i=e(202),m=e(2281),T=e(2316),r=e(6484),a=e(99520),s=e(12556),p=e(71570),l=e(52529),t=e(58283);const w=["scroller"],h=["recent"];function u(P,v){if(1&P){const O=T.EpF();T.TgZ(0,"button",22),T.NdJ("click",function(_){T.CHM(O);const F=T.oxw();return _.stopPropagation(),F.recentGoLeft()}),T._UZ(1,"mat-icon",23),T.qZA()}}const o=function(){return{"width.px":8}};function f(P,v){if(1&P){const O=T.EpF();T.TgZ(0,"div",24),T.TgZ(1,"nv-gallery-item",25),T.NdJ("click",function(){const F=T.CHM(O).$implicit;return T.oxw().openFile(F)}),T.qZA(),T._UZ(2,"div",26),T.qZA()}if(2&P){const O=v.$implicit,C=T.oxw();T.xp6(1),T.Q6J("item",O)("activeItem",C.itemSelection)("thumbWidth",C.recentThumbWidth)("thumbHeight",C.recentThumbHeight)("activity",!0),T.xp6(1),T.Q6J("ngStyle",T.DdM(6,o))}}function c(P,v){if(1&P){const O=T.EpF();T.TgZ(0,"button",22),T.NdJ("click",function(_){T.CHM(O);const F=T.oxw();return _.stopPropagation(),F.recentGoRight()}),T._UZ(1,"mat-icon",27),T.qZA()}}function g(P,v){if(1&P&&(T.TgZ(0,"div",28),T._UZ(1,"nv-preview",29),T.qZA()),2&P){const O=T.oxw();T.xp6(1),T.Q6J("activeItem",O.mapSelection)("mapView",!0)}}const I=function(P,v){return{"width.px":P,"height.px":v}},G=function(P){return{arg:P}},x=function(P,v){return{"sv-activity-withoutrounds":P,"sv-activity-withrounds":v}};let E=(()=>{class P{constructor(O,C,_,F,V,b,B){this.loggingService=O,this.galleryService=C,this.lcarsService=_,this.imageFormatService=F,this.domSanitizer=V,this.matIconRegistry=b,this.translateService=B,this.initialized=!1,this.recentThumbWidth=n.dz.width,this.recentThumbHeight=n.dz.height,this.selectedItemIndex=0,this.sortType=n.ER.newest,this.itemSelection=void 0,this.mapSelection=void 0,this.leftDisabled=!1,this.rightDisabled=!1,this.itemsVisible=5,this.roundDataPresent=!1,this.mapDataPresent=!1,this.hour="",this.hours="",this.minute="",this.minutes="",this.second="",this.seconds="",this.initialDelay=!1,this.logger=this.loggingService.getLogger("Activity"),this.logger.info("Constructor"),this.hour=this.translateService.instant("commonLabels.Hour"),this.hours=this.translateService.instant("commonLabels.Hours"),this.minute=this.translateService.instant("commonLabels.Minute"),this.minutes=this.translateService.instant("commonLabels.Minutes"),this.second=this.translateService.instant("commonLabels.Second"),this.seconds=this.translateService.instant("commonLabels.Seconds")}get item(){return this._item}set item(O){this._item&&this.initialized?setTimeout(()=>{this._item=(0,i.cloneDeep)(O),this.initialize()}):this._item=O}ngOnInit(){this.logger.info("OnInit")}ngAfterViewInit(){this.logger.info("ngAfterViewInit: ",this.initialized),setTimeout(()=>{this.initialized||(this.initialize(),this.initialized=!0)})}ngOnDestroy(){this.logger.info("ngOnDestroy"),this.metadataReq$&&this.metadataReq$.unsubscribe()}initialize(){this.logger.info("Initialize Activity Item Data: ",this.item),this.itemSelection=this.item.metaData[0],this.roundDataPresent=this.item.rounds&&this.item.rounds.length>0,""!==this.item.mapFileName&&this.item.metaData.forEach(C=>{C.fullFilename===this.item.mapFileName&&(this.mapSelection=C)}),this.mapDataPresent=void 0!==this.mapSelection,this.scroller&&this.scroller.scrollToIndex(0,"smooth"),setTimeout(()=>{this.chevronControl()}),this.logger.info("AI FillData for: "+this.item.gameName+" Number of items: "+this.item.metaData.length),this.item.metaData.forEach(C=>this.galleryService.fillInFileData(C).subscribe());const O=this.item.metaData.find(C=>0!==C.cmsId);if(O){const C=O.cmsId;this.logger.info("Initialize Activity for cmsID: ",C),this.lcarsService.getMetadataByCmsId(C).subscribe(_=>{if(this.logger.info("NesLayout AppMetaData: ",_),(0,i.isNil)(_))throw new Error("Invalid asset data received: "+JSON.stringify(_));{this.appMetaData=_;const F=this.imageFormatService.formatImageServiceUrl(_.images.KEY_ART,{w:n.dO});this.logger.info("Game Icon: ",F),this.activityGameIcon=this.domSanitizer.bypassSecurityTrustResourceUrl(F)}})}else this.logger.error("CmsId Not found for: ",this.item.gameName)}getFormattedTime(O){return m(O).format("LT MMM D, YYYY")}getFormattedDuration(O){let C="";const _=O.split(":"),F=Number(_[0]),V=Number(_[1]),b=Math.floor(Number(_[2]));return F>0&&(C+=F.toString()+" "+(1===F?this.hour:this.hours)),V>0&&(""!==C&&(C+=" "),C+=V.toString()+" "+(1===V?this.minute:this.minutes)),b>0&&(""!==C&&(C+=" "),C+=b.toString()+" "+(1===b?this.second:this.seconds)),C}openFile(O){this.logger.info("Open Item in preview: ",O.file.name),this.item.metaData.forEach((C,_)=>{C.fullFilename===O.fullFilename&&this.updateScroller(_)})}recentNav(O,C=!1){let _=this.selectedItemIndex;this.item.metaData[this.selectedItemIndex].selected=!1,O?_--:_++,_=C?_>=this.item.metaData.length?0:_<0?this.item.metaData.length-1:_:_>=this.item.metaData.length?this.item.metaData.length-1:_<0?0:_,this.updateScroller(_)}updateScroller(O){this.scroller.scrollToIndex(O,"smooth"),this.selectedItemIndex=O,this.item.metaData[this.selectedItemIndex].selected=!0,this.itemSelection=this.item.metaData[O],this.chevronControl()}recentGoLeft(){this.recentNav(!0)}recentGoRight(){this.recentNav(!1)}chevronControl(){const O=this.recent.nativeElement.getBoundingClientRect().width;this.itemsVisible=Math.floor(O/(this.recentThumbWidth+8)),this.item.metaData.length<=this.itemsVisible?(this.leftDisabled=!0,this.rightDisabled=!0):0===this.selectedItemIndex?(this.leftDisabled=!0,this.rightDisabled=!1):this.selectedItemIndex===this.item.metaData.length-1?(this.leftDisabled=!1,this.rightDisabled=!0):(this.leftDisabled=!1,this.rightDisabled=!1),this.logger.info("Chevrons active Left: "+!this.leftDisabled+" Right: "+!this.rightDisabled)}keydownRecent(O){this.logger.info("Keydown Key: ",O.key),("Enter"===O.key||" "===O.key)&&this.item.metaData.length>0&&this.selectedItemIndex>=0&&this.selectedItemIndex<this.item.metaData.length?this.openFile(this.item.metaData[this.selectedItemIndex]):"ArrowLeft"===O.key?this.recentGoLeft():"ArrowRight"===O.key&&this.recentGoRight()}activeItemChanged(O){this.itemSelection=O;const C=this.item.metaData.findIndex(_=>_===O);-1!==C&&(this.selectedItemIndex=C,this.scroller.scrollToIndex(C,"smooth"))}activeItemIndexChanged(O){this.logger.info("ActiveItemIndexChanged: ",O),this.itemSelection=this.item.metaData[O],this.selectedItemIndex=O,this.scroller.scrollToIndex(O,"smooth")}activityIdentity(O,C){return C.file.name}}return P.\u0275fac=function(O){return new(O||P)(T.Y36(r.ed),T.Y36(a.rj),T.Y36(s.zcQ),T.Y36(s.CQ2),T.Y36(p.H7),T.Y36(l.jv),T.Y36(t.sK))},P.\u0275cmp=T.Xpm({type:P,selectors:[["nv-activity-item"]],viewQuery:function(O,C){if(1&O&&(T.Gf(w,5),T.Gf(h,5)),2&O){let _;T.iGM(_=T.CRH())&&(C.scroller=_.first),T.iGM(_=T.CRH())&&(C.recent=_.first)}},inputs:{scrolling:"scrolling",itemWidth:"itemWidth",itemHeight:"itemHeight",initialDelay:"initialDelay",item:"item"},decls:30,vars:39,consts:[["fxLayout","column",1,"sv-top-level",3,"ngStyle"],["fxLayout","column","fxFlexFill","",1,"sv-card-offset"],[1,"font-body1","sv-activity-gap"],[1,"sv-activity-divider"],["fxLayout","row"],[1,"icon-normal","sv-activity-icon",3,"src"],["fxLayout","column","fxFlex","none",1,"sv-activity-header"],[1,"font-body2"],[1,"sv-activity-space"],[1,"sv-nav-left-position"],["fxFlex","none","mat-button","","class","complex-button",3,"click",4,"ngIf"],[1,"sv-recent-layout"],["recent",""],["orientation","horizontal","tabIndex","0",1,"sv-recent-container",3,"itemSize","keydown"],["scroller",""],["class","sv-recent-item",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],[1,"sv-nav-right-position"],["fxLayout","row","fxFlexFill","","fxFlex","",1,"nv-oogg","sv-preview-window"],["fxFlex","","fxFlexFill","",3,"activeItem","mapPresent","roundsPresent","mapsPresent","activeItemChange"],["fxFlex","","fxFlexFill","",4,"ngIf"],["fxFlex","","fxFlexFill","",1,"nv-oogg","sv-activity-window",3,"ngClass"],[3,"rounds","events","metadata","start","end","activeItemIndex","activeItemIndexChange"],["fxFlex","none","mat-button","",1,"complex-button",3,"click"],["svgIcon","chevron_left",1,"sv-nav-button"],[1,"sv-recent-item"],[3,"item","activeItem","thumbWidth","thumbHeight","activity","click"],[3,"ngStyle"],["svgIcon","chevron_right",1,"sv-nav-button"],["fxFlex","","fxFlexFill",""],["fxFlex","","fxFlexFill","",3,"activeItem","mapView"]],template:function(O,C){1&O&&(T.TgZ(0,"div",0),T.TgZ(1,"div",1),T.TgZ(2,"div",2),T._uU(3),T.ALo(4,"translate"),T.qZA(),T._UZ(5,"mat-divider",3),T.TgZ(6,"div",4),T._UZ(7,"img",5),T.TgZ(8,"div",6),T.TgZ(9,"div",7),T._uU(10),T.qZA(),T.TgZ(11,"div",7),T._uU(12),T.ALo(13,"translate"),T.qZA(),T.qZA(),T.qZA(),T._UZ(14,"div",8),T.TgZ(15,"div",4),T.TgZ(16,"div",9),T.YNc(17,u,2,0,"button",10),T.qZA(),T.TgZ(18,"div",11,12),T.TgZ(20,"cdk-virtual-scroll-viewport",13,14),T.NdJ("keydown",function(F){return C.keydownRecent(F)}),T.YNc(22,f,3,7,"div",15),T.qZA(),T.qZA(),T.TgZ(23,"div",16),T.YNc(24,c,2,0,"button",10),T.qZA(),T.qZA(),T.TgZ(25,"div",17),T.TgZ(26,"nv-preview",18),T.NdJ("activeItemChange",function(F){return C.itemSelection=F})("activeItemChange",function(F){return C.activeItemChanged(F)}),T.qZA(),T.YNc(27,g,2,2,"div",19),T.qZA(),T.TgZ(28,"div",20),T.TgZ(29,"nv-edge-log-item",21),T.NdJ("activeItemIndexChange",function(F){return C.selectedItemIndex=F})("activeItemIndexChange",function(F){return C.activeItemIndexChanged(F)}),T.qZA(),T.qZA(),T.qZA(),T.qZA()),2&O&&(T.Q6J("ngStyle",T.WLB(29,I,C.itemWidth,C.itemHeight)),T.xp6(3),T.hij(" ",T.xi3(4,23,"summary.PlayedAt",T.VKq(32,G,C.getFormattedTime(C.item.playStarted)))," "),T.xp6(4),T.Q6J("src",C.activityGameIcon,T.LSH),T.xp6(3),T.Oqu(C.item.gameName),T.xp6(2),T.hij(" ",T.xi3(13,26,"summary.PlayTime",T.VKq(34,G,C.getFormattedDuration(C.item.playTime)))," "),T.xp6(5),T.Q6J("ngIf",!C.leftDisabled),T.xp6(3),T.Q6J("itemSize",C.recentThumbWidth+8),T.xp6(2),T.Q6J("cdkVirtualForOf",C.item.metaData)("cdkVirtualForTrackBy",C.activityIdentity)("cdkVirtualForTemplateCacheSize",0),T.xp6(2),T.Q6J("ngIf",!C.rightDisabled),T.xp6(2),T.Q6J("activeItem",C.itemSelection)("mapPresent",C.mapSelection)("roundsPresent",C.roundDataPresent)("mapsPresent",C.mapDataPresent),T.xp6(1),T.Q6J("ngIf",void 0!==C.mapSelection&&"image"!==C.itemSelection.file.type),T.xp6(1),T.Q6J("ngClass",T.WLB(36,x,!C.roundDataPresent,C.roundDataPresent)),T.xp6(1),T.Q6J("rounds",C.item.rounds)("events",C.item.events)("metadata",C.item.metaData)("start",C.item.startTime)("end",C.item.endTime)("activeItemIndex",C.selectedItemIndex))},styles:[".icon-normal{color:#ffffffb3}.icon-highlighted{color:#76b900}.icon-green-bg{background:#76b900}.icon-preview-visible{color:#fff}.icon-preview-hidden{opacity:0}.icon-warning{color:#ffb43e}.icon-alert{color:#0b8abc!important}.sv-top-level{position:relative}.sv-recent-layout{height:167px;width:100%}.sv-recent-container{height:167px;width:100%;overflow:hidden}.sv-recent-container .cdk-virtual-scroll-content-wrapper{display:flex;flex-direction:row}.sv-recent-item{width:304px;height:100%}.sv-activity-header{height:60px}.sv-activity-gap{margin-top:16px}.sv-activity-space{margin-top:26px}.sv-preview-window{width:100%;height:100%;object-fit:contain}.sv-activity-window{width:100%;background-color:#29292952}.sv-activity-divider{margin:16px 0}.sv-activity-withrounds{max-height:211px}.sv-activity-withoutrounds{max-height:88px}.sv-activity-icon{font-size:32px;width:36px;height:36px}:host-context(.isLtr) .sv-activity-icon{margin-right:8px}html[dir=ltr] .sv-activity-icon{--dummy4: 0;margin-right:8px}:host-context(.isRtl) .sv-activity-icon{margin-left:8px}html[dir=rtl] .sv-activity-icon{--dummy4: 0;margin-left:8px}.sv-card-offset{padding:24px;background:linear-gradient(to bottom,rgba(175,175,175,0) 30%,#191919 80%)}.sv-nav-button{color:#a0a0a0;padding:6px;font-size:32px;width:36px;height:36px;border-radius:50%;background-color:#191919}.sv-nav-common-position,.sv-nav-right-position,.sv-nav-left-position{position:absolute;padding-top:60px;z-index:2000}.sv-nav-left-position{left:26px}.sv-nav-right-position{right:26px}\n"],encapsulation:2}),P})()},80129:(He,de,e)=>{"use strict";e.d(de,{x:()=>E});var n=e(2316),i=e(75428),D=e(20088),m=e(85816),y=e(99520),T=e(58283),r=e(42118),a=e(54364),s=e(89460),p=e(30582),l=e(80181),t=e(52529);const w=["img"];function h(P,v){1&P&&n._UZ(0,"div",12)}function u(P,v){if(1&P&&n._UZ(0,"img",13,14),2&P){const O=n.oxw();n.Q6J("src",O.item.data,n.LSH)}}function o(P,v){1&P&&(n.TgZ(0,"div",15),n.NdJ("click",function(C){return C.stopPropagation()}),n.qZA())}function f(P,v){1&P&&n._UZ(0,"mat-spinner",16)}function c(P,v){1&P&&n._UZ(0,"mat-icon",17)}function g(P,v){if(1&P){const O=n.EpF();n.TgZ(0,"mat-icon",18),n.NdJ("click",function(_){return n.CHM(O),n.oxw().onRemoveClick(_)}),n.qZA()}}function I(P,v){1&P&&n._UZ(0,"div",19)}function G(P,v){1&P&&n._UZ(0,"div",20)}const x=function(P,v){return{"width.px":P,"height.px":v}};let E=(()=>{class P{constructor(O,C){this.galleryService=O,this.translateService=C,this.initialDelay=!1,this.deleteVisible=!1,this.multiSelect=!1,this.activity=!1,this.selectedItemDeleted=new n.vpe}ngAfterViewInit(){this.item&&!this.item.data&&this.scrolling&&(this.metadataReq$=this.scrolling.pipe((0,i.g)(this.initialDelay?300:0),(0,D.P)(O=>!1===O),(0,m.zg)(()=>this.galleryService.fillInFileData(this.item))).subscribe())}ngOnDestroy(){this.metadataReq$&&this.metadataReq$.unsubscribe()}onRemoveClick(O){this.selectedItemDeleted.emit(this.item),O.stopImmediatePropagation(),O.preventDefault()}get displayInfo(){const O=`highlightLabels.${this.item.hlName}`;let C=this.translateService.instant(O);C===O&&(C=this.item.hlName);let _="";return void 0!==this.item.duration&&(_="00:"===this.item.duration.slice(0,3)?this.item.duration.slice(3):this.item.duration.slice(0)),this.item.file.type===y.A2.Image?C:this.item.file.subtype===y.dM.Montage?_+" - "+this.translateService.instant("montage.Montage"):this.item.file.subtype===y.dM.Highlights&&this.item.hlName?_+" - "+C:_}handleDrag(O){O.dataTransfer.setData("text/plain","ooggStartDrag"),O.dataTransfer.setData("text/html",this.item.fullFilename),O.dataTransfer.setDragImage(this.imgRef.nativeElement,0,0),O.dataTransfer.dropEffect="copy"}}return P.\u0275fac=function(O){return new(O||P)(n.Y36(y.rj),n.Y36(T.sK))},P.\u0275cmp=n.Xpm({type:P,selectors:[["nv-gallery-item"]],viewQuery:function(O,C){if(1&O&&n.Gf(w,5,n.SBq),2&O){let _;n.iGM(_=n.CRH())&&(C.imgRef=_.first)}},inputs:{item:"item",scrolling:"scrolling",activeItem:"activeItem",thumbWidth:"thumbWidth",thumbHeight:"thumbHeight",initialDelay:"initialDelay",deleteVisible:"deleteVisible",multiSelect:"multiSelect",activity:"activity"},outputs:{selectedItemDeleted:"selectedItemDeleted"},decls:14,vars:14,consts:[[1,"gallery-item",3,"ngStyle","draggable","dragstart"],["class","gallery-overlay-bkgnd gallery-overlay",4,"ngIf"],[1,"gallery-overlay-info","gallery-overlay"],[1,"font-body2"],[3,"src",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"gallery-overlay"],["class","gallery-inprogress",3,"click",4,"ngIf"],["diameter","32","tabindex","-1","color","accent",4,"ngIf"],["svgIcon","alert_circle","class","icon-normal gallery-overlay-play-icon","tabindex","-1",4,"ngIf"],["svgIcon","remove_circle","class","remove-circle",3,"click",4,"ngIf"],["class","gallery-active",4,"ngIf"],["class","activity-active",4,"ngIf"],[1,"gallery-overlay-bkgnd","gallery-overlay"],[3,"src"],["img",""],[1,"gallery-inprogress",3,"click"],["diameter","32","tabindex","-1","color","accent"],["svgIcon","alert_circle","tabindex","-1",1,"icon-normal","gallery-overlay-play-icon"],["svgIcon","remove_circle",1,"remove-circle",3,"click"],[1,"gallery-active"],[1,"activity-active"]],template:function(O,C){1&O&&(n.TgZ(0,"mat-card",0),n.NdJ("dragstart",function(F){return C.handleDrag(F)}),n.TgZ(1,"mat-card-content"),n.YNc(2,h,1,0,"div",1),n.TgZ(3,"div",2),n.TgZ(4,"span",3),n._uU(5),n.qZA(),n.qZA(),n.YNc(6,u,2,1,"img",4),n.TgZ(7,"div",5),n.YNc(8,o,1,0,"div",6),n.YNc(9,f,1,0,"mat-spinner",7),n.YNc(10,c,1,0,"mat-icon",8),n.qZA(),n.YNc(11,g,1,0,"mat-icon",9),n.YNc(12,I,1,0,"div",10),n.YNc(13,G,1,0,"div",11),n.qZA(),n.qZA()),2&O&&(n.Q6J("ngStyle",n.WLB(11,x,C.thumbWidth,C.thumbHeight))("draggable",!C.multiSelect),n.xp6(2),n.Q6J("ngIf",""!=C.displayInfo),n.xp6(3),n.Oqu(C.displayInfo),n.xp6(1),n.Q6J("ngIf",C.item.data),n.xp6(2),n.Q6J("ngIf",!C.item.data),n.xp6(1),n.Q6J("ngIf",!C.item.data&&!C.item.cancel),n.xp6(1),n.Q6J("ngIf",C.item.cancel),n.xp6(1),n.Q6J("ngIf",C.deleteVisible),n.xp6(1),n.Q6J("ngIf",!C.activity&&C.item===C.activeItem),n.xp6(1),n.Q6J("ngIf",C.activity&&C.item===C.activeItem))},directives:[r.a8,a.PC,s.Zl,r.dn,a.O5,p.xw,p.Wh,l.$g,t.Hw],styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.gallery-item[_ngcontent-%COMP%]{padding:0;box-sizing:border-box;background-color:#191919;box-shadow:none;border-radius:0}.gallery-overlay[_ngcontent-%COMP%], .activity-active[_ngcontent-%COMP%], .gallery-active[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}.gallery-inprogress[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;z-index:99;height:100%;width:100%;box-sizing:border-box;border-style:dashed;border-width:2px;color:#ffffff61}.gallery-overlay-play-icon[_ngcontent-%COMP%]{width:33px;height:33px;font-size:33px;margin:0;opacity:.95}.gallery-overlay-common[_ngcontent-%COMP%], .gallery-overlay-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .gallery-overlay-bkgnd[_ngcontent-%COMP%]{position:absolute;color:#fff;white-space:normal;padding:0}.gallery-active[_ngcontent-%COMP%]{border:2px solid #76b900;z-index:1}.activity-active[_ngcontent-%COMP%]{border-bottom:3px solid #76b900;z-index:1}.gallery-overlay-bkgnd[_ngcontent-%COMP%]{background-color:#00000080;height:27px;top:140px}.gallery-overlay-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{padding:0 5px;bottom:2px}.isLtr[_nghost-%COMP%]   .gallery-overlay-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .gallery-overlay-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin:2px 0 0 2px}html[dir=ltr][_ngcontent-%COMP%]   .gallery-overlay-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{--dummy: 0;margin:2px 0 0 2px}.isRtl[_nghost-%COMP%]   .gallery-overlay-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .gallery-overlay-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir=rtl][_ngcontent-%COMP%]   .gallery-overlay-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{--dummy: 0;margin:2px 2px 0 0}.remove-circle-widget[_ngcontent-%COMP%], .remove-circle[_ngcontent-%COMP%]{position:absolute;color:#fff;width:20px;height:20px;top:0;right:0;z-index:999}.isLtr[_nghost-%COMP%]   .remove-circle-widget[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .remove-circle-widget[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .remove-circle[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .remove-circle[_ngcontent-%COMP%]{margin:5px 5px 0 0}html[dir=ltr][_ngcontent-%COMP%]   .remove-circle-widget[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .remove-circle[_ngcontent-%COMP%]{--dummy: 0;margin:5px 5px 0 0}.isRtl[_nghost-%COMP%]   .remove-circle-widget[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .remove-circle-widget[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .remove-circle[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .remove-circle[_ngcontent-%COMP%]{margin:5px 0 0 5px}html[dir=rtl][_ngcontent-%COMP%]   .remove-circle-widget[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .remove-circle[_ngcontent-%COMP%]{--dummy: 0;margin:5px 0 0 5px}[_nghost-%COMP%]:hover   .remove-circle[_ngcontent-%COMP%]{opacity:1;cursor:default}[_nghost-%COMP%]:not(:hover)   .remove-circle[_ngcontent-%COMP%]{opacity:0;cursor:none}"]}),P})()},41225:(He,de,e)=>{"use strict";e.d(de,{n:()=>D});var n=e(2316),i=e(1124);let D=(()=>{class m{}return m.\u0275fac=function(T){return new(T||m)},m.\u0275cmp=n.Xpm({type:m,selectors:[["nv-divider"]],decls:1,vars:0,consts:[[1,"nv-divider"]],template:function(T,r){1&T&&n._UZ(0,"mat-divider",0)},directives:[i.d],styles:[".nv-divider[_ngcontent-%COMP%]{margin:16px -24px}"]}),m})()},96351:(He,de,e)=>{"use strict";e.d(de,{n:()=>o});var n=e(2316),i=e(70781),D=e(30582),m=e(54364),y=e(89460),T=e(50298),r=e(52529),a=e(58283);const s=["button"];function p(f,c){if(1&f&&(n.TgZ(0,"div",5),n._UZ(1,"mat-icon",6),n.qZA()),2&f){const g=n.oxw();n.xp6(1),n.s9C("svgIcon",g.svgIcon)}}function l(f,c){if(1&f&&n._UZ(0,"span",10),2&f){const g=n.oxw(2);n.Q6J("translate",g.title)("translateParams",g.titleArg)}}function t(f,c){if(1&f&&n._UZ(0,"span",11),2&f){const g=n.oxw(2);n.Q6J("translate",g.subTitle)("translateParams",g.subTitleArg)}}function w(f,c){if(1&f&&(n.TgZ(0,"div",7),n.YNc(1,l,1,2,"span",8),n.YNc(2,t,1,2,"span",9),n.qZA()),2&f){const g=n.oxw();n.xp6(1),n.Q6J("ngIf",g.title),n.xp6(1),n.Q6J("ngIf",g.subTitle)}}function h(f,c){1&f&&(n.TgZ(0,"div",5),n._UZ(1,"mat-icon",12),n.qZA())}const u=function(f){return{"default-cursor":f}};let o=(()=>{class f{constructor(){this.svgIcon=void 0,this.disabled=!1,this.focusEnabled=!0,this.title=void 0,this.titleArg=void 0,this.tooltip=void 0,this.subTitle=void 0,this.subTitleArg=void 0,this.chevron=!1,this.clicked=new n.vpe,this.onClick=function(){this.clicked.emit()}}focus(){this.element.nativeElement.focus()}}return f.\u0275fac=function(g){return new(g||f)},f.\u0275cmp=n.Xpm({type:f,selectors:[["nv-item-button"]],viewQuery:function(g,I){if(1&g&&n.Gf(s,7),2&g){let G;n.iGM(G=n.CRH())&&(I.element=G.first)}},inputs:{svgIcon:"svgIcon",disabled:"disabled",focusEnabled:"focusEnabled",title:"title",titleArg:"titleArg",tooltip:"tooltip",subTitle:"subTitle",subTitleArg:"subTitleArg",chevron:"chevron"},outputs:{clicked:"clicked"},decls:7,vars:10,consts:[["mat-button","","fxFlex","","tabIndex","0","matTooltipClass","nv-oogg oogg-tooltip",1,"nv-item-button-container","complex-button","font-body2",3,"disabled","ngClass","matTooltip","click"],["button",""],["fxFlex","","fxLayout","row","fxLayoutAlign","start start"],["class","nv-item-icon","fxLayout","row","fxLayoutAlign","center center","fxFlex","none",4,"ngIf"],["class","nv-item-labels","fxFlexAlign","center","fxLayout","column","fxLayoutAlign","start start","fxFlex","",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","none",1,"nv-item-icon"],[3,"svgIcon"],["fxFlexAlign","center","fxLayout","column","fxLayoutAlign","start start","fxFlex","",1,"nv-item-labels"],["class","font-body2",3,"translate","translateParams",4,"ngIf"],["class","font-body3 disabled-opacity",3,"translate","translateParams",4,"ngIf"],[1,"font-body2",3,"translate","translateParams"],[1,"font-body3","disabled-opacity",3,"translate","translateParams"],["svgIcon","chevron_right"]],template:function(g,I){1&g&&(n.TgZ(0,"button",0,1),n.NdJ("click",function(){return I.onClick()}),n.ALo(2,"translate"),n.TgZ(3,"div",2),n.YNc(4,p,2,1,"div",3),n.YNc(5,w,3,2,"div",4),n.YNc(6,h,2,0,"div",3),n.qZA(),n.qZA()),2&g&&(n.Q6J("disabled",I.disabled)("ngClass",n.VKq(8,u,!I.focusEnabled))("matTooltip",n.lcZ(2,6,I.tooltip)),n.xp6(4),n.Q6J("ngIf",I.svgIcon),n.xp6(1),n.Q6J("ngIf",I.title||I.subTitle),n.xp6(1),n.Q6J("ngIf",I.chevron))},directives:[i.lW,D.yH,m.mk,y.oO,T.gM,D.xw,D.Wh,m.O5,r.Hw,D.XD,a.Pi],pipes:[a.X$],styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}[disabled][_nghost-%COMP%]   .nv-item[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.nv-item-icon[_ngcontent-%COMP%]{width:36px;height:36px}.nv-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffb3;width:24px;height:24px;font-size:24px}.nv-item-row[_ngcontent-%COMP%]{padding:0 24px}.nv-item-labels[_ngcontent-%COMP%]{padding:8px 0;height:100%}.nv-label[_ngcontent-%COMP%]{padding:8px 0}.default-cursor[_ngcontent-%COMP%]{cursor:default}.disabled-opacity[_ngcontent-%COMP%]{opacity:.38}.nv-item-button-container[_ngcontent-%COMP%]{width:100%}.nv-item-button-container[disabled][_ngcontent-%COMP%]{opacity:.38}"]}),f})()},95280:(He,de,e)=>{"use strict";e.d(de,{e:()=>v});var n=e(2316),i=e(202),m=e(76491),y=e(89919),T=e(80639),r=e(67202),a=e(99520),s=e(2281),l=e(58283);const t=["scroller"],w=["labeloverlay"];function h(O,C){if(1&O&&n._UZ(0,"div"),2&O){const _=n.oxw(2);n.Udp("padding-top",_.topBottomPad,"px")("width","100%")}}function u(O,C){if(1&O&&(n.TgZ(0,"div",10),n.TgZ(1,"div",11),n._UZ(2,"mat-icon",12),n.TgZ(3,"div",13),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.qZA(),n.qZA()),2&O){const _=n.oxw().$implicit,F=n.oxw();n.xp6(1),n.ekj("checked",_[0].selected)("partial",_[0].partial)("multiOn",F.multiSelectModeOn),n.xp6(3),n.Oqu(n.lcZ(5,7,_[0].divider))}}function o(O,C){}const f=function(O,C){return{$implicit:O,scroll:C}};function c(O,C){if(1&O&&(n.TgZ(0,"nv-virtual-grid-item",16),n.YNc(1,o,0,0,"ng-template",17),n.qZA()),2&O){const _=C.$implicit,F=n.oxw(3);n.Q6J("useOutline",F.useFocusOutline)("showFocusAlways",F.showFocusAlways)("item",_)("selectedItemIndex",F.selectedItemIndex)("itemWidth",F.itemWidth)("itemHeight",F.itemHeight)("multiSelectAvailable",F.multiSelect)("multiSelectModeOn",F.multiSelectModeOn),n.xp6(1),n.Q6J("ngTemplateOutlet",F.template)("ngTemplateOutletContext",n.WLB(10,f,_.item,F.scrolling$.asObservable()))}}function g(O,C){if(1&O&&(n.TgZ(0,"div",14),n.YNc(1,c,2,13,"nv-virtual-grid-item",15),n.qZA()),2&O){const _=n.oxw().$implicit,F=n.oxw();n.Q6J("fxLayoutGap",F.marginRight+"px"),n.xp6(1),n.Q6J("ngForOf",_)}}function I(O,C){if(1&O&&n._UZ(0,"div"),2&O){const _=n.oxw(2);n.Udp("padding-bottom",_.topBottomPad,"px")("width","100%")}}function G(O,C){if(1&O&&(n.TgZ(0,"div"),n.YNc(1,h,1,4,"div",6),n.YNc(2,u,6,9,"div",7),n.YNc(3,g,2,2,"div",8),n.YNc(4,I,1,4,"div",9),n.qZA()),2&O){const _=C.$implicit,F=C.last,V=C.first,b=n.oxw();n.Udp("margin-bottom",F?0:b.marginBottom,"px"),n.xp6(1),n.Q6J("ngIf",V),n.xp6(1),n.Q6J("ngIf",_[0].divider),n.xp6(1),n.Q6J("ngIf",!_[0].divider),n.xp6(1),n.Q6J("ngIf",F)}}function x(O,C){if(1&O&&n._UZ(0,"div"),2&O){const _=n.oxw(2);n.Udp("height",_.topBottomPad,"px")}}function E(O,C){if(1&O&&n._UZ(0,"div"),2&O){const _=n.oxw(2);n.Udp("height",_.topBottomPad,"px")}}function P(O,C){if(1&O){const _=n.EpF();n.TgZ(0,"div"),n.YNc(1,x,1,2,"div",18),n.TgZ(2,"div",19),n.TgZ(3,"div",20),n.NdJ("click",function(V){const B=n.CHM(_).index;return n.oxw().onLabelClick(V,B)}),n._UZ(4,"mat-icon",12),n.TgZ(5,"div",13),n._uU(6),n.ALo(7,"translate"),n.qZA(),n.qZA(),n.qZA(),n._UZ(8,"div"),n.YNc(9,E,1,2,"div",18),n.qZA()}if(2&O){const _=C.$implicit,F=C.first,V=C.last,b=n.oxw();n.xp6(1),n.Q6J("ngIf",F),n.xp6(2),n.ekj("checked",_.checked)("partial",_.partial)("multiOn",b.multiSelectModeOn),n.xp6(3),n.Oqu(n.lcZ(7,11,_.text)),n.xp6(2),n.Udp("height",_.contentHeight,"px"),n.xp6(1),n.Q6J("ngIf",V)}}let v=(()=>{class O{constructor(_,F){this.element=_,this.translateService=F,this.itemsPerRow=1,this.topIndex=0,this.initialized=!1,this.eventTimeout=null,this.rows=[],this.scrolling$=new m.X(!1),this.today="",this.yesterday="",this.maxRows=6,this.marginBottom=0,this.marginRight=0,this.multiSelect=!1,this.useFocusOutline=!0,this.showFocusAlways=!1,this.chunkFileMetadata=!1,this.stickyHeaders=!0,this.showCounts=!0,this.topBottomPad=0,this.headerSize=28,this._selectedItem=void 0,this.selectedItemIndex=-1,this.selectedItemChange=new n.vpe,this._multiSelectList=[],this._savedMultiSelectList=[],this.multiSelectModeOn=!1,this.multiSelectMode=new n.vpe,this.multiSelectList=new n.vpe,this.handleKeyPress=void 0,this.handleKeyPress=(0,i.throttle)(this._handleKeyPress,100),this.today=this.translateService.instant("commonLabels.Today"),this.yesterday=this.translateService.instant("commonLabels.Yesterday")}get selectedItem(){return this._selectedItem}set selectedItem(_){const F=this._selectedItem;if(this._selectedItem=_,this.initialized&&F!==this._selectedItem){const V=this.list.findIndex(b=>b.item===_);V>=0&&(this.setCurrentItem(this.list[V]),this.ensureItemVisible(V))}}set items(_){_&&this.list&&0===_.length&&0===this.list.length||(this.list=_?_.map((F,V)=>(F===this._selectedItem&&(this.selectedItemIndex=V),{index:V,selected:_[V].selected,element:void 0,divider:void 0,item:F})):_,this.refresh())}onkeydown(_){this.handleKeyPress(_)}onFocus(){if(!this.list||this.list.length<=0)return;let _=this.selectedItemIndex;_<0&&(_=0),this.setCurrentItem(this.list[_])}onResize(_){this.resizeThrottler(100)}resizeThrottler(_){this.eventTimeout||(this.eventTimeout=setTimeout(()=>{this.eventTimeout=null,this.refresh()},_))}setContent(_,F){this.list=_,this.itemsPerRow=F}setTopIndex(_){this.topIndex=_}setCurrentItem(_){const F=this._multiSelectList.length>0,V=this.getItem(this.selectedItemIndex);if(!F){if(V){if(V.index===_.index)return;V.selected=!1}_&&(_.selected=!0)}this._selectedItem=_.item,this.selectedItemIndex=_.index,this.selectedItemChange.emit(this._selectedItem)}multiSelectClick(_,F){if(!_)return;if(!this.multiSelectModeOn){const B=this.getItem(this.selectedItemIndex);B&&(B.selected=!1)}const V=this._multiSelectList.find(B=>B.item===_.item);V?((0,i.pull)(this._multiSelectList,V),_.selected=!1,_.item.selected=!1):(_.selected=!0,_.item.selected=!0,_.element&&(this._selectedItem=_.item,this.selectedItemIndex=_.index),this._multiSelectList.push(_));const b=this.multiSelectModeOn;this.multiSelectModeOn=this._multiSelectList.length>0,b!==this.multiSelectModeOn&&this.multiSelectMode.emit(this.multiSelectModeOn),F||this.checkAllLabelCircles(_),this.multiSelectList.emit(this._multiSelectList.map(B=>B.item))}cancelMultiSelect(){this.list.slice(0).forEach(_=>_.selected=!1),this._multiSelectList.slice(0).forEach(_=>this.multiSelectClick(_))}refreshMultiSelectList(_){setTimeout(()=>{this.list.forEach(F=>{this.checkAllLabelCircles(F)})},100),this.multiSelectModeOn=!_}nullTime(_){return _.startOf("day")}getStringForDay(_){const F=this.nullTime(s());if(_.isSame(F,"day"))return this.today;if(F.subtract(1,"days"),_.isSame(F,"day"))return this.yesterday;F.add(1,"days");const V=s().startOf("month").subtract(1,"month");return _.isSameOrAfter(V,"month")?_.isSame(F,"year")?_.format("dddd, MMMM D"):_.format("dddd, LL"):_.isSame(F,"year")?_.format("MMMM"):_.format("MMMM YYYY")}newHeader(_){return{index:-1,selected:!1,element:void 0,divider:_,item:void 0}}isSameRow(_,F){const V=s().startOf("month").subtract(1,"month");return _.isSameOrAfter(V,"month")?_.isSame(F,"day"):_.isSame(F,"month")}pushRow(_,F,V=!1){const b=this.itemHeight+this.marginBottom;return this.rows.push(_),this.itemOffsets.push(F+=b),this.stickyHeaders&&(this.dividers[this.dividers.length-1].contentHeight+=b),F}chunkFiles(){let _=this.nullTime(s()).add(1,"years");const F=this.sortType===a.ER.newest||this.sortType===a.ER.oldest;let V="",b=[],B=0,U=0,A=0;if(this.itemOffsets=[0],this.rows=[],this.dividers=[],this.list.map((S,Y)=>(S.index=Y,S)),this.list.forEach((S,Y)=>{const se=S.item;if(!S.item)return;(0===Y||Y===this.list.length-1)&&(B+=this.topBottomPad);const fe=s(se.date),$=se.folder;if(F?this.isSameRow(fe,_):0===$.localeCompare(V))U++,b.push(S),b.length>=this.itemsPerRow&&(B=this.pushRow(b,B),b=[]);else{b.length>0&&(B=this.pushRow(b,B),b=[]);const me=F?this.getStringForDay(fe):$;if(this.stickyHeaders){if(this.dividers.length>0){if(this.showCounts){const ye=U+1;this.dividers[this.dividers.length-1].text+=" ("+ye+")",this.dividers[this.dividers.length-1].count=ye}U=0}this.dividers.push({text:me,contentHeight:0}),this.rows.push([this.newHeader(" ")])}else{if(this.rows.length>0){if(this.showCounts){const ye=U+1;this.rows[A-1][0].divider+=" ("+ye+")",this.rows[A-1][0].count=ye}U=0}this.rows.push([this.newHeader(me)]),A=this.rows.length}B+=this.headerSize+this.marginBottom,this.itemOffsets.push(B),_=fe,V=$,b.push(S)}}),b.length>0&&(B=this.pushRow(b,B,!0)),this.showCounts&&this.stickyHeaders&&this.dividers.length>0){const S=U+1;this.dividers[this.dividers.length-1].text+=" ("+S+")",this.dividers[this.dividers.length-1].count=S}else if(this.showCounts&&!this.stickyHeaders&&A>0){const S=U+1;this.rows[A-1][0].divider+=" ("+S+")",this.rows[A-1][0].count=S}this.rows=this.rows.slice(),this.itemOffsets=this.itemOffsets.slice()}refresh(){if(!this.initialized)return;const V=this.element.nativeElement.offsetWidth-32;this.itemsPerRow=Math.floor(V/this.itemWidth),this.itemsPerRow*this.itemWidth+(this.itemsPerRow-1)*this.marginRight>V&&(this.itemsPerRow-=1),this.maxRows=Math.floor(this.element.nativeElement.offsetHeight/(this.itemHeight+this.marginBottom)),setTimeout(()=>{if(this.chunkFileMetadata)this.chunkFiles();else{this.rows=(0,i.chunk)(this.list,this.itemsPerRow),this.itemOffsets=[0];let B=0;this.rows.forEach((U,A)=>{B+=this.itemHeight+this.marginBottom,(A===this.rows.length-1||0===A)&&(B+=this.topBottomPad),this.itemOffsets.push(B)})}this.list&&this.list.length>0?(this.selectedItemIndex=this.list.findIndex(B=>B.item===this._selectedItem),!this.selectedItemIndex&&this.list&&this.setCurrentItem(this.list[0])):this.selectedItemIndex=0,setTimeout(()=>this.ensureItemVisible(this.selectedItemIndex),0)},0)}getNewIndexRow(_,F,V){let b=F+_;for(;b>0&&b<this.rows.length&&this.rows[b][0].divider;)b+=_;return b<0?0:b>=this.rows.length?this.list.length-1:(V=Math.min(this.rows[b].length-1,V),this.rows[b][V].index)}_handleKeyPress(_){if(!this.list)return;let F=this.list.findIndex(S=>S.item===this._selectedItem);const V=this.rows.findIndex(S=>S.findIndex(Y=>Y.item===this._selectedItem)>=0),b=this.rows[V].findIndex(S=>S.item===this._selectedItem);F=-1===F?0:F;const B=F,U=this.list.length-1;let A=!0;if("ArrowLeft"===_.key)F-=1;else if("ArrowRight"===_.key)F+=1;else if("ArrowUp"===_.key)F=this.getNewIndexRow(-1,V,b),(F===B||-1===F)&&(A=!1);else if("ArrowDown"===_.key)F=this.getNewIndexRow(1,V,b),F===B&&(A=!1);else if("Home"===_.key)F=0;else if("End"===_.key)F=U;else if("PageDown"===_.key)F+=this.itemsPerRow*this.maxRows;else if("PageUp"===_.key)F-=this.itemsPerRow*this.maxRows;else{if(" "===_.key)return this.multiSelectClick(this.list[F]),void _.preventDefault();A=!1}A&&_.preventDefault(),F=Math.max(0,Math.min(F,U)),this.selectedItemIndex!==F&&(this.setCurrentItem(this.list[F]),this.ensureItemVisible(F))}ensureItemVisible(_,F="auto"){if(null==_||_<0||_>=this.list.length)return;const V=this.rows.findIndex(A=>A.findIndex(S=>S.item===this._selectedItem)>=0);this.maxRows=Math.floor(this.element.nativeElement.offsetHeight/(this.itemHeight+this.marginBottom));const U=V-Math.round(this.maxRows/2);if(this.topIndex<U||this.topIndex>V-2*this.maxRows){const S=Math.max(0,Math.min(U,this.rows.length-this.maxRows+1));this.scroller.scrollToOffset(this.itemOffsets[S],F)}}getItem(_=this.selectedItemIndex){return null!=_&&_>=0&&_<this.list.length?this.list[_]:null}ngAfterViewInit(){this.initialized=!0;const _=this.scroller.elementScrolled().pipe((0,T.b)(250),(0,r.h)(!1)),F=this.scroller.elementScrolled().pipe((0,r.h)(!0));this.scrollingSub$=(0,y.T)(F,_).subscribe(V=>this.scrolling$.next(V)),setTimeout(()=>{this.viewportElement.nativeElement.appendChild(this.labelElement.nativeElement),this.refresh()},0)}ngOnDestroy(){this.scrollingSub$&&this.scrollingSub$.unsubscribe()}checkAllLabelCircles(_){let F=0;this.list.forEach((Y,se)=>{Y.item===_.item&&(F=se)});let V=0,b=0,B=0,U=0;this.stickyHeaders?this.dividers.forEach((Y,se)=>{F>=V&&F<V+Y.count&&(b=se,B=Y.count,U=V),V+=Y.count}):this.rows.forEach((Y,se)=>{if(Y[0].count>0){const fe=V+Y[0].count;F>=V&&F<fe&&(b=se,B=Y[0].count,U=V),V+=Y[0].count}});let A=!0,S=!1;for(let Y=0;Y<B;Y++){const se=U+Y;void 0===this.list[se]?(A=!1,S=!1):!1===this.list[se].selected?A=!1:S=!0}S=!A&&S,this.stickyHeaders?(this.dividers[b].checked=A,this.dividers[b].partial=S):(this.rows[b][0].selected=A,this.rows[b][0].partial=S)}onLabelClick(_,F){let V=0,b=0,B=!1;if(this.stickyHeaders){B=!this.dividers[F].checked,this.dividers[F].partial=!1,this.dividers[F].checked=!this.dividers[F].checked,V=this.dividers[F].count;for(let S=0;S<F;S++)b+=this.dividers[S].count}else{B=!this.rows[F][0].selected,this.rows[F][0].partial=!1,this.rows[F][0].selected=!this.rows[F][0].selected,V=this.rows[F][0].count;for(let S=0;S<F;S++)this.rows[S][0].count>0&&(b+=this.rows[S][0].count)}const U=b+V;if(!this.multiSelectModeOn){const S=this.getItem(this.selectedItemIndex);S&&(S.selected=!1)}let A=0;this.rows.forEach(S=>{-1!==S[0].index&&(A>=b&&A<U&&S.forEach(Y=>{Y.selected!==B&&this.multiSelectClick(Y,!0)}),A+=S.length)}),_.stopImmediatePropagation(),_.preventDefault()}}return O.\u0275fac=function(_){return new(_||O)(n.Y36(n.SBq),n.Y36(l.sK))},O.\u0275cmp=n.Xpm({type:O,selectors:[["nv-virtual-grid-container"]],viewQuery:function(_,F){if(1&_&&(n.Gf(t,7),n.Gf(t,7,n.SBq),n.Gf(w,7,n.SBq)),2&_){let V;n.iGM(V=n.CRH())&&(F.scroller=V.first),n.iGM(V=n.CRH())&&(F.viewportElement=V.first),n.iGM(V=n.CRH())&&(F.labelElement=V.first)}},hostBindings:function(_,F){1&_&&n.NdJ("keydown",function(b){return F.onkeydown(b)})("focus",function(){return F.onFocus()})("resize",function(b){return F.onResize(b)},!1,n.Jf7)},inputs:{itemHeight:"itemHeight",itemWidth:"itemWidth",marginBottom:"marginBottom",marginRight:"marginRight",multiSelect:"multiSelect",template:"template",useFocusOutline:"useFocusOutline",showFocusAlways:"showFocusAlways",chunkFileMetadata:"chunkFileMetadata",stickyHeaders:"stickyHeaders",showCounts:"showCounts",topBottomPad:"topBottomPad",sortType:"sortType",selectedItem:"selectedItem",items:"items"},outputs:{selectedItemChange:"selectedItemChange",multiSelectMode:"multiSelectMode",multiSelectList:"multiSelectList"},decls:7,vars:3,consts:[["fxFlex","",1,"scroll-container",3,"itemOffsets","scrolledIndexChange"],["scroller",""],[3,"margin-bottom",4,"cdkVirtualFor","cdkVirtualForOf"],["labeloverlay",""],[1,"labels"],[4,"ngFor","ngForOf"],[3,"paddingTop","width",4,"ngIf"],["class","divider-pad",4,"ngIf"],["fxLayout","row",3,"fxLayoutGap",4,"ngIf"],[3,"paddingBottom","width",4,"ngIf"],[1,"divider-pad"],["fxLayout","row",1,"hover-label"],[1,"label-circle"],[1,"font-body2"],["fxLayout","row",3,"fxLayoutGap"],[3,"useOutline","showFocusAlways","item","selectedItemIndex","itemWidth","itemHeight","multiSelectAvailable","multiSelectModeOn",4,"ngFor","ngForOf"],[3,"useOutline","showFocusAlways","item","selectedItemIndex","itemWidth","itemHeight","multiSelectAvailable","multiSelectModeOn"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"height",4,"ngIf"],[1,"divider-pad","divider-sticky"],["fxLayout","row",1,"hover-label",3,"click"]],template:function(_,F){1&_&&(n.TgZ(0,"cdk-virtual-scroll-viewport",0,1),n.NdJ("scrolledIndexChange",function(b){return F.setTopIndex(b)}),n.YNc(2,G,5,6,"div",2),n.qZA(),n.TgZ(3,"div",null,3),n.TgZ(5,"div",4),n.YNc(6,P,10,13,"div",5),n.qZA(),n.qZA()),2&_&&(n.Q6J("itemOffsets",F.itemOffsets),n.xp6(2),n.Q6J("cdkVirtualForOf",F.rows),n.xp6(4),n.Q6J("ngForOf",F.dividers))},styles:['.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.scroll-container[_ngcontent-%COMP%]{height:100%}.isLtr[_nghost-%COMP%]   .scroll-container[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .scroll-container[_ngcontent-%COMP%]{margin-right:-24px}html[dir=ltr][_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{--dummy4: 0;margin-right:-24px}.isRtl[_nghost-%COMP%]   .scroll-container[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .scroll-container[_ngcontent-%COMP%]{margin-left:-24px}html[dir=rtl][_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{--dummy4: 0;margin-left:-24px}.scroll-container[_ngcontent-%COMP%]   .cdk-virtual-scroll-content-wrapper[_ngcontent-%COMP%]{height:100%}.labels[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;pointer-events:none}.divider-pad[_ngcontent-%COMP%]{padding:8px 0 0;height:20px}.divider-sticky[_ngcontent-%COMP%]{position:sticky;top:0;padding-bottom:8px;background-color:#000}.hover-label[_ngcontent-%COMP%]{pointer-events:auto}.hover-label[_ngcontent-%COMP%]   .label-circle[_ngcontent-%COMP%]{width:0;height:0;font-size:16px;margin:0}.hover-label[_ngcontent-%COMP%]   .label-circle[_ngcontent-%COMP%]:before{color:#000;content:"radio_button_unchecked"}.hover-label.checked[_ngcontent-%COMP%]{background:rgba(0,0,0,.24)}.hover-label.checked[_ngcontent-%COMP%]   .label-circle[_ngcontent-%COMP%]:before{color:#fff;content:"check_circle"}.hover-label.partial[_ngcontent-%COMP%]{background:rgba(0,0,0,.24)}.hover-label.partial[_ngcontent-%COMP%]   .label-circle[_ngcontent-%COMP%]:before{color:#ffffff4d!important;content:"check_circle"}.hover-label.multiOn[_ngcontent-%COMP%]   .label-circle[_ngcontent-%COMP%], .hover-label[_ngcontent-%COMP%]:hover   .label-circle[_ngcontent-%COMP%], .hover-label[_ngcontent-%COMP%]:focus   .label-circle[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px}.isLtr[_nghost-%COMP%]   .hover-label.multiOn[_ngcontent-%COMP%]   .label-circle[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hover-label.multiOn[_ngcontent-%COMP%]   .label-circle[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .hover-label[_ngcontent-%COMP%]:hover   .label-circle[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hover-label[_ngcontent-%COMP%]:hover   .label-circle[_ngcontent-%COMP%], .isLtr[_nghost-%COMP%]   .hover-label[_ngcontent-%COMP%]:focus   .label-circle[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hover-label[_ngcontent-%COMP%]:focus   .label-circle[_ngcontent-%COMP%]{margin:0 5px 0 0}html[dir=ltr][_ngcontent-%COMP%]   .hover-label.multiOn[_ngcontent-%COMP%]   .label-circle[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .hover-label[_ngcontent-%COMP%]:hover   .label-circle[_ngcontent-%COMP%], html[dir=ltr][_ngcontent-%COMP%]   .hover-label[_ngcontent-%COMP%]:focus   .label-circle[_ngcontent-%COMP%]{--dummy: 0;margin:0 5px 0 0}.isRtl[_nghost-%COMP%]   .hover-label.multiOn[_ngcontent-%COMP%]   .label-circle[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hover-label.multiOn[_ngcontent-%COMP%]   .label-circle[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .hover-label[_ngcontent-%COMP%]:hover   .label-circle[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hover-label[_ngcontent-%COMP%]:hover   .label-circle[_ngcontent-%COMP%], .isRtl[_nghost-%COMP%]   .hover-label[_ngcontent-%COMP%]:focus   .label-circle[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hover-label[_ngcontent-%COMP%]:focus   .label-circle[_ngcontent-%COMP%]{margin:0 0 0 5px}html[dir=rtl][_ngcontent-%COMP%]   .hover-label.multiOn[_ngcontent-%COMP%]   .label-circle[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .hover-label[_ngcontent-%COMP%]:hover   .label-circle[_ngcontent-%COMP%], html[dir=rtl][_ngcontent-%COMP%]   .hover-label[_ngcontent-%COMP%]:focus   .label-circle[_ngcontent-%COMP%]{--dummy: 0;margin:0 0 0 5px}.hover-label.multiOn[_ngcontent-%COMP%]   .label-circle[_ngcontent-%COMP%]:before, .hover-label[_ngcontent-%COMP%]:hover   .label-circle[_ngcontent-%COMP%]:before, .hover-label[_ngcontent-%COMP%]:focus   .label-circle[_ngcontent-%COMP%]:before{color:#fff}']}),O})()},83469:(He,de,e)=>{"use strict";e.d(de,{m:()=>Fn});var n=e(54364),i=e(71258),D=e(66660),m=e(18137),y=e(6484),T=e(96351),r=e(95280),a=e(2316),s=e(89460),p=e(30582),l=e(52529);function t(yt,Ht){if(1&yt&&a._UZ(0,"div",3),2&yt){const Ue=a.oxw();a.ekj("selected",Ue.item.index==Ue.selectedItemIndex)("showFocusAlways",Ue.showFocusAlways)}}function w(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"div",4),a.TgZ(1,"mat-icon",5),a.NdJ("click",function(ft){return a.CHM(Ue),a.oxw().onMultiSelectClick(ft)}),a.qZA(),a.qZA()}if(2&yt){const Ue=a.oxw();a.ekj("checked",Ue.multiSelectModeOn&&Ue.item.selected)("multiOn",Ue.multiSelectModeOn)("multiFocus",Ue.item.index==Ue.selectedItemIndex)}}const h=function(yt,Ht){return{"width.px":yt,"height.px":Ht,position:"relative"}},u=["*"];let o=(()=>{class yt{constructor(Ue,Mt){this.el=Ue,this.parent=Mt,this.multiSelectAvailable=!1,this.multiSelectModeOn=!1,this.useOutline=!0,this.selectedItemIndex=-1,this.showFocusAlways=!1}get item(){return this._item}set item(Ue){this._item=Ue,this._item.element=this.el}onMouseDown(){this.parent&&this.parent.setCurrentItem(this.item)}onClick(Ue){this.parent&&this.multiSelectModeOn&&this.parent.multiSelectClick(this.item)}onMultiSelectClick(Ue){this.parent&&this.parent.multiSelectClick(this.item),Ue.stopImmediatePropagation(),Ue.preventDefault()}}return yt.\u0275fac=function(Ue){return new(Ue||yt)(a.Y36(a.SBq),a.Y36(r.e,8))},yt.\u0275cmp=a.Xpm({type:yt,selectors:[["nv-virtual-grid-item"]],inputs:{itemWidth:"itemWidth",itemHeight:"itemHeight",multiSelectAvailable:"multiSelectAvailable",multiSelectModeOn:"multiSelectModeOn",useOutline:"useOutline",selectedItemIndex:"selectedItemIndex",showFocusAlways:"showFocusAlways",item:"item"},ngContentSelectors:u,decls:4,vars:6,consts:[[3,"ngStyle","mousedown","click"],["class","overlay selected-overlay",3,"selected","showFocusAlways",4,"ngIf"],["class","overlay hover-overlay","fxLayout","row","fxLayoutAlign","end start",3,"checked","multiOn","multiFocus",4,"ngIf"],[1,"overlay","selected-overlay"],["fxLayout","row","fxLayoutAlign","end start",1,"overlay","hover-overlay"],[1,"multi-select-circle",3,"click"]],template:function(Ue,Mt){1&Ue&&(a.F$t(),a.TgZ(0,"div",0),a.NdJ("mousedown",function(){return Mt.onMouseDown()})("click",function(st){return Mt.onClick(st)}),a.Hsn(1),a.YNc(2,t,1,4,"div",1),a.YNc(3,w,2,6,"div",2),a.qZA()),2&Ue&&(a.Q6J("ngStyle",a.WLB(3,h,Mt.itemWidth,Mt.itemHeight)),a.xp6(2),a.Q6J("ngIf",Mt.useOutline),a.xp6(1),a.Q6J("ngIf",Mt.multiSelectAvailable))},directives:[n.PC,s.Zl,n.O5,p.xw,p.Wh,l.Hw],styles:['.icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.overlay[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}:focus[_nghost-%COMP%]   .selected[_ngcontent-%COMP%], :focus   [_nghost-%COMP%]   .selected[_ngcontent-%COMP%], .showFocusAlways.selected[_ngcontent-%COMP%]{background:rgba(0,0,0,.36)}.hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]{color:transparent;width:20px;height:20px;font-size:20px;pointer-events:auto}.isLtr[_nghost-%COMP%]   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%], .isLtr   [_nghost-%COMP%]   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]{margin:5px 5px 0 0}html[dir=ltr][_ngcontent-%COMP%]   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]{--dummy: 0;margin:5px 5px 0 0}.isRtl[_nghost-%COMP%]   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%], .isRtl   [_nghost-%COMP%]   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]{margin:5px 0 0 5px}html[dir=rtl][_ngcontent-%COMP%]   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]{--dummy: 0;margin:5px 0 0 5px}.hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:before{content:"radio_button_unchecked"}.hover-overlay.checked[_ngcontent-%COMP%]{background:rgba(0,0,0,.24)!important}.hover-overlay.checked[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:before{color:#fff!important;content:"check_circle"!important}.hover-overlay.multiOn[_ngcontent-%COMP%], :focus[_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%], :focus   [_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%]{background:rgba(0,0,0,.12)}.hover-overlay.multiOn[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%], :focus[_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%], :focus   [_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%], [_nghost-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]{color:#ffffffb3}.hover-overlay.multiOn[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:hover:before, .hover-overlay.multiOn[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:focus:before, :focus[_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:hover:before, :focus   [_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:hover:before, :focus[_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:focus:before, :focus   [_nghost-%COMP%]   .hover-overlay.multiFocus[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:focus:before, [_nghost-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:hover:before, [_nghost-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%]   .multi-select-circle[_ngcontent-%COMP%]:focus:before{color:#fff}']}),yt})();var f=e(80129),c=e(174),g=e(79441),I=e(2984),G=e(2281),x=e(202),E=e(99520),P=e(12556),v=e(70781),O=e(80181),C=e(772),_=e(9082);const F=["image"],V=["video"],b=function(yt){return{"left.px":yt}},B=function(yt,Ht,Ue){return{"width.px":yt,"height.px":Ht,"font-size.px":Ue}};function U(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"button",12),a.NdJ("click",function(ft){a.CHM(Ue);const st=a.oxw(2);return ft.stopPropagation(),st.navLeft()}),a._UZ(1,"mat-icon",13),a.qZA()}if(2&yt){const Ue=a.oxw(2);a.Q6J("ngStyle",a.VKq(2,b,Ue.chevronLeftPos)),a.xp6(1),a.Q6J("ngStyle",a.kEZ(4,B,Ue.chevronButtonSize,Ue.chevronButtonSize,Ue.chevronFontSize))}}function A(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"button",12),a.NdJ("click",function(ft){a.CHM(Ue);const st=a.oxw(2);return ft.stopPropagation(),st.navRight()}),a._UZ(1,"mat-icon",14),a.qZA()}if(2&yt){const Ue=a.oxw(2);a.Q6J("ngStyle",a.VKq(2,b,Ue.chevronRightPos)),a.xp6(1),a.Q6J("ngStyle",a.kEZ(4,B,Ue.chevronButtonSize,Ue.chevronButtonSize,Ue.chevronFontSize))}}function S(yt,Ht){if(1&yt&&(a.TgZ(0,"div",6),a.YNc(1,U,2,8,"button",7),a.TgZ(2,"div",8),a.TgZ(3,"div",9),a._UZ(4,"img",10,11),a.qZA(),a.qZA(),a.YNc(6,A,2,8,"button",7),a.qZA()),2&yt){const Ue=a.oxw();a.xp6(1),a.Q6J("ngIf",!Ue.mapView&&!Ue.iconPreview),a.xp6(3),a.Q6J("src",Ue.fileSrc,a.LSH),a.xp6(2),a.Q6J("ngIf",!Ue.mapView&&!Ue.iconPreview)}}const Y=function(yt){return{"view-on-hover":yt}};function se(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"button",20),a.NdJ("click",function(ft){a.CHM(Ue);const st=a.oxw(2);return ft.stopPropagation(),st.navLeft()}),a._UZ(1,"mat-icon",13),a.qZA()}if(2&yt){const Ue=a.oxw(2);a.Q6J("ngClass",a.VKq(3,Y,!Ue.isPaused))("ngStyle",a.VKq(5,b,Ue.chevronLeftPos)),a.xp6(1),a.Q6J("ngStyle",a.kEZ(7,B,Ue.chevronButtonSize,Ue.chevronButtonSize,Ue.chevronFontSize))}}const fe=function(yt,Ht){return{"icon-preview-visible":yt,"icon-preview-hidden":Ht}},$=function(yt,Ht){return{"width.px":yt,"height.px":Ht}};function ae(yt,Ht){if(1&yt&&a._UZ(0,"mat-icon",26),2&yt){const Ue=a.oxw(3);a.Q6J("ngClass",a.WLB(2,fe,Ue.showPlayButton,!Ue.showPlayButton))("ngStyle",a.WLB(5,$,Ue.playButtonSize,Ue.playButtonSize))}}function me(yt,Ht){1&yt&&a._UZ(0,"mat-progress-spinner",27)}function ye(yt,Ht){1&yt&&a._UZ(0,"mat-icon",28)}function ue(yt,Ht){if(1&yt&&(a.TgZ(0,"div",29),a.TgZ(1,"span",30),a._uU(2),a.qZA(),a.qZA()),2&yt){const Ue=a.oxw(3);a.xp6(2),a.Oqu(Ue.videoErrorString)}}function X(yt,Ht){if(1&yt){const Ue=a.EpF();a.ynx(0),a.TgZ(1,"div",21),a.NdJ("click",function(){return a.CHM(Ue),a.oxw(2).toggleMediaPlay()}),a.YNc(2,ae,1,8,"mat-icon",22),a.YNc(3,me,1,0,"mat-progress-spinner",23),a.YNc(4,ye,1,0,"mat-icon",24),a.YNc(5,ue,3,1,"div",25),a.qZA(),a.BQk()}if(2&yt){const Ue=a.oxw(2);a.xp6(2),a.Q6J("ngIf",Ue.isPaused&&Ue.useDisplay===Ue.displayTypes.NORMAL&&!Ue.sliderMoving),a.xp6(1),a.Q6J("ngIf",Ue.useDisplay===Ue.displayTypes.SPINNER),a.xp6(1),a.Q6J("ngIf",Ue.useDisplay===Ue.displayTypes.ERROR),a.xp6(1),a.Q6J("ngIf",Ue.useDisplay===Ue.displayTypes.ERROR)}}function j(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"button",20),a.NdJ("click",function(ft){a.CHM(Ue);const st=a.oxw(2);return ft.stopPropagation(),st.navRight()}),a._UZ(1,"mat-icon",14),a.qZA()}if(2&yt){const Ue=a.oxw(2);a.Q6J("ngClass",a.VKq(3,Y,!Ue.isPaused))("ngStyle",a.VKq(5,b,Ue.chevronRightPos)),a.xp6(1),a.Q6J("ngStyle",a.kEZ(7,B,Ue.chevronButtonSize,Ue.chevronButtonSize,Ue.chevronFontSize))}}const K=function(yt,Ht){return{"width.px":yt,"top.px":Ht}},Z=function(yt,Ht){return{"viewer-video-counter-short":yt,"viewer-video-counter-long":Ht}};function L(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"div",31),a.TgZ(1,"nv-item-button",32),a.NdJ("clicked",function(){return a.CHM(Ue),a.oxw(2).toggleMediaPlay()}),a.qZA(),a.TgZ(2,"nv-hig-slider",33),a.NdJ("valueChange",function(ft){return a.CHM(Ue),a.oxw(2).sliderPosition=ft})("input",function(ft){return a.CHM(Ue),a.oxw(2).sliderChanged(ft)})("mousedown",function(){return a.CHM(Ue),a.oxw(2).sliderInteraction(!0)})("mouseup",function(){return a.CHM(Ue),a.oxw(2).sliderInteraction(!1)},!1,a.Jf7),a.qZA(),a.TgZ(3,"div",34),a.TgZ(4,"span",35),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"nv-item-button",36),a.NdJ("clicked",function(){return a.CHM(Ue),a.oxw(2).muteUnmute()}),a.qZA(),a.TgZ(7,"nv-hig-slider",37),a.NdJ("valueChange",function(ft){return a.CHM(Ue),a.oxw(2).volume=ft})("valueChange",function(){return a.CHM(Ue),a.oxw(2).volumeChanged()}),a.qZA(),a.qZA()}if(2&yt){const Ue=a.oxw(2);a.Q6J("ngClass",a.VKq(12,Y,!Ue.isPaused))("ngStyle",a.WLB(14,K,Ue.toolbarWidth,Ue.toolbarTopLoc)),a.xp6(1),a.Q6J("svgIcon",Ue.isPaused?"play_arrow":"pause")("tooltip",Ue.isPaused?"tooltips.Play":"tooltips.Pause"),a.xp6(1),a.Q6J("step",Ue.step)("value",Ue.sliderPosition)("animating",!Ue.isPaused),a.xp6(1),a.Q6J("ngClass",a.WLB(17,Z,!Ue.longDuration,Ue.longDuration)),a.xp6(2),a.Oqu(Ue.videoTime),a.xp6(1),a.Q6J("svgIcon",0===Ue.volume?"volume_off":"volume")("tooltip",0===Ue.volume?"tooltips.Unmute":"tooltips.Mute"),a.xp6(1),a.Q6J("value",Ue.volume)}}function W(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"div",15),a.TgZ(1,"div",16),a.NdJ("keydown",function(ft){return a.CHM(Ue),a.oxw().processToggleMedia(ft)}),a.YNc(2,se,2,11,"button",17),a.TgZ(3,"div",8),a._UZ(4,"div",9),a.YNc(5,X,6,4,"ng-container",18),a.qZA(),a.YNc(6,j,2,11,"button",17),a.qZA(),a.YNc(7,L,8,20,"div",19),a.qZA()}if(2&yt){const Ue=a.oxw();a.xp6(2),a.Q6J("ngIf",!Ue.iconPreview),a.xp6(3),a.Q6J("ngIf",!Ue.iconPreview),a.xp6(1),a.Q6J("ngIf",!Ue.iconPreview),a.xp6(1),a.Q6J("ngIf",!Ue.iconPreview&&Ue.showToolbar)}}const te=function(yt,Ht){return{preview:yt,iconview:Ht}};let ie=(()=>{class yt{constructor(Ue,Mt,ft,st,Et,Ee){this.loggingService=Ue,this.galleryService=Mt,this.bridgeService=ft,this.renderer=st,this.router=Et,this.route=Ee,this.destroy$=new g.xQ,this.fileMetaData=void 0,this.description="",this.fileName="",this.fullFilename="",this.dimensions="",this.contentDimensions={width:1280,height:720},this.fileDate="",this.fileTime="",this.fileSize="",this.volume=0,this.savedVolume=0,this.step=.1,this.sliderPosition=0,this.isPaused=!0,this.playbackTimer=null,this.displayTypes={NORMAL:0,SPINNER:1,ERROR:2},this.useDisplay=this.displayTypes.SPINNER,this.videoErrorString="",this.sliderMoving=!1,this.longDuration=!1,this.toolbarTopLoc=0,this.toolbarWidth=0,this.showToolbar=!0,this.chevronLeftPos=0,this.chevronRightPos=0,this.chevronImageLeftPos=0,this.chevronImageRightPos=0,this.playButtonSize=48,this.chevronButtonSize=36,this.chevronFontSize=32,this.imageDimensions={width:0,height:0},this.eventTimeout=null,this.hasPlayedVideo=!1,this.showPlayButton=!0,this.mouseDown=!1,this.timePlaceHolderShort={text:"00:00.0",arg:""},this.timePlaceHolderLong={text:"00:00:00.0",arg:""},this.timePlaceHolder=this.timePlaceHolderShort,this.timeStyle=["20px","16px 0 0 0","0 0 0 6px"],this.shortDurationLength=7,this.longDurationLength=10,this.timeTextMaxLength=this.shortDurationLength,this.mapView=!1,this.mapPresent=!1,this.roundsPresent=!1,this.mapsPresent=!1,this.iconPreview=!1,this.activeItemChange=new a.vpe,this.iconPreviewRatio=new a.vpe,this.logger=this.loggingService.getLogger("Activity/Preview")}set imageRef(Ue){this.image=Ue?Ue.nativeElement:null}set videoRef(Ue){this.video&&""!==this.video.src&&(!Ue||this.video!==Ue.nativeElement)&&(this.video.src="",this.hasPlayedVideo=!1,this.video.load()),Ue?(this.video=Ue.nativeElement,this.video.focus()):this.video=null}set activeItem(Ue){this._activeItem=Ue,this.initPreviewData()}ngOnInit(){this.logger.info("Initializing Preview Component")}initPreviewData(){(0,x.isNil)(this._activeItem)?this.logger.info("New Preview Data Undefined - Not processing!"):this.initializeData(this._activeItem)}ngOnDestroy(){this.logger.info("Destroying view!"),this.destroy$.next(!0),this.destroy$.complete(),this.playbackTimer&&(clearInterval(this.playbackTimer),this.playbackTimer=null),this.video&&""!==this.video.src&&setTimeout(()=>{this.video.src="",this.video.load()})}onResize(Ue){this.resizeThrottler(100)}resizeThrottler(Ue){this.eventTimeout||(this.eventTimeout=setTimeout(()=>{this.eventTimeout=null,this.isVideo?this.calculateVideoOverlayParameters(0):this.calculateImageOverlayParameters(0)},Ue))}formatFilesizeString(Ue){return Ue<1e3?Ue+" KB":Ue<1e6?(Ue/1e3).toFixed(2)+" MB":(Ue/1e6).toFixed(2)+" GB"}initializeData(Ue){this.logger.info("Loading preview file"),Ue&&((void 0===this.fileMetaData||Ue.fullFilename!==this.fileMetaData.fullFilename)&&(this.useDisplay=this.displayTypes.SPINNER),this.video&&!this.isPaused&&this.pauseMedia(),this.fileMetaData=Ue,this.isVideo=Ue.file.type===E.A2.Video,this.fileName=Ue.file.name,""!==Ue.date&&(this.fileDate=G(Ue.date).format("MMM D, YYYY"),this.fileTime=G(Ue.date).format("ddd LT")),this.description=Ue.file.name+(""!==Ue.hlName?" - "+Ue.hlName:""),this.fileSize=this.formatFilesizeString(parseInt(Ue.fileSize,10)),this.fileSrc=y.qR+Ue.fullFilename,this.fullFilename=Ue.fullFilename,this.isVideo||this.galleryService.getImageFileDimensions(Ue.fullFilename).subscribe(Mt=>{Mt&&Mt.width&&Mt.height?(this.imageDimensions=Mt,this.dimensions=Mt.width+" x "+Mt.height,this.iconPreview&&this.iconPreviewRatio.emit(Mt.width/Mt.height),this.calculateImageOverlayParameters(100)):this.dimensions=""}),this.playbackTimer&&(clearInterval(this.playbackTimer),this.playbackTimer=null),this.isPaused=!0,this.sliderPosition=0,this.volume=this.savedVolume=this.galleryService.activityVolume,this.contextIcon=this.isVideo?"video":"image")}calculateVideoOverlayParameters(Ue){this.iconPreview||setTimeout(()=>{const ft=this.video.getBoundingClientRect().width,st=this.video.getBoundingClientRect().height,Et=this.video.videoWidth/this.video.videoHeight,Ee=ft/st,dt=Et>Ee;this.logger.info("Video: "+this.video.videoWidth+" x "+this.video.videoHeight+" ratio: "+Et),this.logger.info("Visual: "+ft+" x "+st+" ratio: "+Ee);const kt=dt?ft/Et:st,Zt=dt?ft:st*Et;this.logger.info("Actual W x H: "+Zt+" x "+kt);const dn=Math.max(0,(st-kt)/2),gn=Math.max(0,(ft-Zt)/2);this.logger.info("TopBarHeight: "+dn+" SideBarWidth: "+gn);const jt=dt?Math.floor(kt+dn):kt;this.toolbarTopLoc=jt-68,this.logger.info("toolbarTopLoc: ",this.toolbarTopLoc),this.toolbarWidth=Math.min(Zt,ft),this.showToolbar=!(this.toolbarWidth<300),this.chevronCommonArea(gn,Zt,kt,!0)},Ue)}calculateImageOverlayParameters(Ue){this.iconPreview||setTimeout(()=>{const Mt=this.image.getBoundingClientRect().width,ft=this.image.getBoundingClientRect().height,st=this.imageDimensions.width/this.imageDimensions.height,Et=Mt/ft,Ee=st>Et;this.logger.info("Image: "+this.imageDimensions.width+" x "+this.imageDimensions.height+" ratio: "+st),this.logger.info("Visual: "+Mt+" x "+ft+" ratio: "+Et);const dt=Ee?Mt/st:ft,kt=Ee?Mt:ft*st;this.logger.info("Actual W x H: "+kt+" x "+dt);const Zt=Math.max(0,(Mt-kt)/2);this.logger.info("SideBarWidth: "+Zt),this.chevronCommonArea(Zt+40,kt,dt,!1)},Ue)}chevronCommonArea(Ue,Mt,ft,st){const Et=Mt<400||ft<250;if(st){const Zt=48;this.playButtonSize=Et?Zt/2:Zt}this.chevronLeftPos=Ue,this.chevronRightPos=Ue+Mt-(Et?30:48),this.chevronButtonSize=Et?18:36,this.chevronFontSize=Et?16:32}loadFromDragNDrop(){if(this.logger.info("Loading via dragNdrop"),!this.galleryService.currentFileData)return void this.logger.error("Loading a file after gallery moved on");const Ue=this.renderer.listen("document","dragover",ft=>{ft.stopPropagation(),ft.preventDefault(),ft.dataTransfer.dropEffect="copy"}),Mt=this.renderer.listen("document","drop",ft=>{if(ft.stopPropagation(),ft.preventDefault(),!ft.dataTransfer.files||!ft.dataTransfer.files[0])return void this.logger.error("bad drop, no file list");if(!this.galleryService.currentFileData)return this.logger.error("Loading a file after gallery moved on"),Ue(),void Mt();const st=ft.dataTransfer.files[0];if(st.name===this.galleryService.currentFileData.fullFilename){this.logger.info("Loading file");const Et=URL.createObjectURL(st);this.isVideo?(this.video.src=Et,this.video.onerror=Ee=>{this.logger.error("A video error occured",Ee),this.useDisplay=this.displayTypes.ERROR},this.video.load()):this.image.src=Et}else this.logger.error("bad drag file: "+this.galleryService.currentFileData.fullFilename+"-"+st.name);Ue(),Mt()});this.bridgeService.executeCommand(I.Gh.Share.Osc.DropUrl,{url:this.galleryService.currentFileData.fullFilename}).subscribe()}onLoadedData(){this.logger.info("Video ready"),this.volumeChanged(),this.useDisplay=this.displayTypes.NORMAL,this.dimensions=this.video.videoWidth+" x "+this.video.videoHeight,this.checkPlayButton(),this.setVideoTime(),this.calculateVideoOverlayParameters(100),this.iconPreview&&(this.iconPreviewRatio.emit(this.video.videoWidth/this.video.videoHeight),this.toggleMediaPlay())}sliderChanged(Ue){if(this.video&&this.useDisplay===this.displayTypes.NORMAL&&(Ue&&Ue.value&&(this.sliderPosition=Ue.value),this.sliderPosition!==this.lastPosition&&Math.round(this.sliderPosition/this.step)!==Math.round(this.lastPosition/this.step))){const Mt=parseFloat((this.sliderPosition/100*this.video.duration).toFixed(2));isNaN(Mt)?this.logger.error("sliderChanged, NaN Error!"):this.video.currentTime=Mt,this.setVideoTime()}}toggleMediaPlay(){this.video&&(this.video.paused?(this.hasPlayedVideo||(this.hasPlayedVideo=!0),this.logger.info("Starting video"),this.video.play(),this.isPaused=!1,this.checkPlayButton(),this.galleryService.galleryViewAction(P.ryx.Play,this.fileMetaData),this.playbackTimer=setInterval(()=>{this.video?(this.sliderMoving||(this.sliderPosition=this.lastPosition=this.video.currentTime/this.video.duration*100),this.setVideoTime(),this.video.currentTime>=this.video.duration&&this.pauseMedia()):this.pauseMedia()})):this.pauseMedia())}checkPlayButton(){this.showPlayButton=this.isPaused&&this.useDisplay===this.displayTypes.NORMAL&&!this.sliderMoving}pauseMedia(){this.logger.info("Pausing video"),this.video.pause(),this.isPaused=!0,this.checkPlayButton(),this.playbackTimer&&(this.logger.info("Clearing Interval on pause"),clearInterval(this.playbackTimer),this.playbackTimer=null)}processToggleMedia(Ue){("Enter"===Ue.key||" "===Ue.key)&&this.toggleMediaPlay()}setVideoTime(){this.longDuration=!(this.video.duration<3600);const Ue=this.video.duration,Mt=Math.floor(Ue/3600),ft=Math.floor(Ue/60-60*Mt),st=Math.floor(Ue-3600*Mt-60*ft),Et=Math.floor(10*Ue)-10*Math.floor(Ue),Ee=("00"+Mt).slice(-2).toString(),dt=("00"+ft).slice(-2).toString(),kt=("00"+st).slice(-2).toString(),Zt=("0"+Et).slice(-1).toString(),gn=Math.abs(this.video.duration*(this.sliderPosition/100)),jt=Math.floor(gn/3600),En=Math.floor(gn/60-60*jt),Pn=Math.floor(gn-3600*jt-60*En),Ln=Math.floor(10*gn)-10*Math.floor(gn),ht=("00"+En).slice(-2).toString()+":"+("00"+Pn).slice(-2).toString()+"."+("0"+Ln).slice(-1).toString(),Vt=dt+":"+kt+"."+Zt;if(this.longDuration){this.timePlaceHolder=this.timePlaceHolderLong,this.timeTextMaxLength=this.longDurationLength;const ne=("00"+jt).slice(-2).toString()+":";this.videoTime=ne+ht+" / "+Ee+":"+Vt}else this.timePlaceHolder=this.timePlaceHolderShort,this.timeTextMaxLength=this.shortDurationLength,this.videoTime=ht+" / "+Vt}volumeChanged(){this.video&&(this.logger.info("Volume changed to "+this.volume),this.video.volume=this.volume/100,this.galleryService.activityVolume=this.volume)}processToggleMute(Ue){("Enter"===Ue.key||" "===Ue.key)&&this.muteUnmute()}muteUnmute(){this.video&&(this.volume?(this.logger.info("Muting video"),this.savedVolume=this.volume,this.volume=0):(this.logger.info("UnMuting video"),this.volume=this.savedVolume||50),this.volumeChanged())}sliderInteraction(Ue){Ue&&this.video&&!this.isPaused?this.sliderMoving=!0:!Ue&&this.sliderMoving&&(this.sliderMoving=!1,this.isPaused&&this.toggleMediaPlay())}closePreview(){this.router.navigate(["../gallery"],{relativeTo:this.route.parent,skipLocationChange:!0}).then(()=>{})}navLeft(){this.getItem(!1)}navRight(){this.getItem(!0)}getItem(Ue){this.isPaused||this.pauseMedia(),this._activeItem=this.galleryService.getActivityItem(this._activeItem.folder,this._activeItem.fullFilename,this._activeItem.session,Ue),this.activeItemChange.emit(this._activeItem),this.initPreviewData()}}return yt.\u0275fac=function(Ue){return new(Ue||yt)(a.Y36(y.ed),a.Y36(E.rj),a.Y36(y.dF),a.Y36(a.Qsj),a.Y36(i.F0),a.Y36(i.gz))},yt.\u0275cmp=a.Xpm({type:yt,selectors:[["nv-preview"]],viewQuery:function(Ue,Mt){if(1&Ue&&(a.Gf(F,5),a.Gf(V,5)),2&Ue){let ft;a.iGM(ft=a.CRH())&&(Mt.imageRef=ft.first),a.iGM(ft=a.CRH())&&(Mt.videoRef=ft.first)}},hostBindings:function(Ue,Mt){1&Ue&&a.NdJ("resize",function(st){return Mt.onResize(st)},!1,a.Jf7)},inputs:{mapView:"mapView",mapPresent:"mapPresent",roundsPresent:"roundsPresent",mapsPresent:"mapsPresent",iconPreview:"iconPreview",activeItem:"activeItem"},outputs:{activeItemChange:"activeItemChange",iconPreviewRatio:"iconPreviewRatio"},decls:6,vars:6,consts:[["fxLayout","column","fxFlexFill","",1,"nv-oogg"],["fxLayout","row","fxFlexFill","",3,"ngClass"],["fxLayout","column","fxFlex",""],["fxLayoutGap","8px"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],["fxFlex","","fxLayout","column","class","video-container",4,"ngIf"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","none","mat-button","","class","complex-button view-on-hover nav-common",3,"ngStyle","click",4,"ngIf"],["fxFlex","","fxFlexAlign","stretch",1,"content-container"],[1,"content-absolute"],["alt","","tabIndex","-1",1,"preview-content",3,"src"],["image",""],["fxFlex","none","mat-button","",1,"complex-button","view-on-hover","nav-common",3,"ngStyle","click"],["svgIcon","chevron_left",1,"nav-button",3,"ngStyle"],["svgIcon","chevron_right",1,"nav-button",3,"ngStyle"],["fxFlex","","fxLayout","column",1,"video-container"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",3,"keydown"],["fxFlex","none","mat-button","","class","complex-button nav-common",3,"ngClass","ngStyle","click",4,"ngIf"],[4,"ngIf"],["class","viewer-media-toolbar","dir","ltr","fxFlex","none","fxLayout","row","fxLayoutAlign","start center",3,"ngClass","ngStyle",4,"ngIf"],["fxFlex","none","mat-button","",1,"complex-button","nav-common",3,"ngClass","ngStyle","click"],["fxLayout","row","fxLayoutAlign","center center",1,"video-overlay-button",3,"click"],["svgIcon","play_arrow","class","video-overlay-button-icon circle-play",3,"ngClass","ngStyle",4,"ngIf"],["id","progressIndicator","class","md-accent","mode","indeterminate",4,"ngIf"],["svgIcon","alert_circle","class","icon-normal icon48 video-moment-error",4,"ngIf"],["class","video-box-error",4,"ngIf"],["svgIcon","play_arrow",1,"video-overlay-button-icon","circle-play",3,"ngClass","ngStyle"],["id","progressIndicator","mode","indeterminate",1,"md-accent"],["svgIcon","alert_circle",1,"icon-normal","icon48","video-moment-error"],[1,"video-box-error"],[1,"video-text-error","font-body1"],["dir","ltr","fxFlex","none","fxLayout","row","fxLayoutAlign","start center",1,"viewer-media-toolbar",3,"ngClass","ngStyle"],["fxFlex","none",1,"viewer-playpause-button",3,"svgIcon","tooltip","clicked"],["fxFlex","grow","min","0","max","100",3,"step","value","animating","valueChange","input","mousedown","mouseup"],["fxLayout","","fxLayoutAlign","center center",3,"ngClass"],[1,"font-body2"],["fxFlex","none",1,"viewer-video-volume-button",3,"svgIcon","tooltip","clicked"],["min","0","max","100",1,"viewer-video-volume-slider",3,"value","valueChange"]],template:function(Ue,Mt){1&Ue&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a._UZ(3,"div",3),a.YNc(4,S,7,3,"div",4),a.YNc(5,W,8,4,"div",5),a.qZA(),a.qZA(),a.qZA()),2&Ue&&(a.xp6(1),a.Q6J("ngClass",a.WLB(3,te,!Mt.iconPreview,Mt.iconPreview)),a.xp6(3),a.Q6J("ngIf",!Mt.isVideo),a.xp6(1),a.Q6J("ngIf",Mt.isVideo))},directives:[p.xw,p.s9,n.mk,s.oO,p.yH,p.SQ,n.O5,p.Wh,p.XD,v.lW,n.PC,s.Zl,l.Hw,O.Ou,C.Lv,T.n,_.Q],styles:[".icon-normal[_ngcontent-%COMP%]{color:#ffffffb3}.icon-highlighted[_ngcontent-%COMP%]{color:#76b900}.icon-green-bg[_ngcontent-%COMP%]{background:#76b900}.icon-preview-visible[_ngcontent-%COMP%]{color:#fff}.icon-preview-hidden[_ngcontent-%COMP%]{opacity:0}.icon-warning[_ngcontent-%COMP%]{color:#ffb43e}.icon-alert[_ngcontent-%COMP%]{color:#0b8abc!important}.preview[_ngcontent-%COMP%]{padding:16px}.iconview[_ngcontent-%COMP%]{padding:1px;background-color:#ffffffbf}.video-container[_ngcontent-%COMP%]{position:relative}.content-container[_ngcontent-%COMP%]{position:relative}.content-absolute[_ngcontent-%COMP%]{top:0;right:0;left:0;bottom:0;position:absolute}.preview-content[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.video-overlay-button[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;opacity:.95}.video-overlay-button-icon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px;padding:16px}.circle-play[_ngcontent-%COMP%]{border-radius:50%;background-color:#191919}.icon48[_ngcontent-%COMP%]{width:48px;height:48px;font-size:48px}.nav-button[_ngcontent-%COMP%]{color:#a0a0a0;padding:6px;border-radius:50%;background-color:#191919}.nav-common[_ngcontent-%COMP%]{position:absolute;z-index:1000}.video-moment-error[_ngcontent-%COMP%]{position:absolute;text-align:center;vertical-align:middle}.video-box-error[_ngcontent-%COMP%]{margin-top:80px;text-align:center;display:table}.video-box-error[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle!important}.viewer-media-toolbar[_ngcontent-%COMP%]{max-height:calc(36px + 32px);min-height:68px!important;padding:16px 24px 16px 0;position:absolute;align-self:center;background:rgba(57,57,57,.32)}.viewer-playpause-button[_ngcontent-%COMP%]{margin:0 8px 0 0}.viewer-video-counter-short[_ngcontent-%COMP%]{min-width:110px;margin:0 0 0 16px}.viewer-video-counter-long[_ngcontent-%COMP%]{min-width:150px;margin:0 0 0 16px}.viewer-video-volume-slider[_ngcontent-%COMP%]{width:20%}.viewer-video-volume-button[_ngcontent-%COMP%]{margin:0 0 0 16px}[_nghost-%COMP%]:hover   .view-on-hover[_ngcontent-%COMP%]{opacity:1;cursor:default}[_nghost-%COMP%]:not(:hover)   .view-on-hover[_ngcontent-%COMP%]{opacity:0;cursor:none}"]}),yt})();var Q=e(58283);const k=["scroller"],oe=["timeline"],N=function(yt,Ht){return{"icon-normal":yt,"icon-highlighted":Ht}},q=function(yt){return{"left.px":yt}};function Me(yt,Ht){if(1&yt&&a._UZ(0,"mat-icon",14),2&yt){const Ue=a.oxw(),Mt=Ue.index,ft=Ue.$implicit,st=a.oxw(2);a.Q6J("ngClass",a.WLB(3,N,st.activeItemIndex!==Mt,st.activeItemIndex===Mt))("ngStyle",a.VKq(6,q,ft.iconLoc))("svgIcon",ft.icon)}}function xe(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"div",15),a.NdJ("previewStateChange",function(ft){return a.CHM(Ue),a.oxw(3).previewStateChanged(ft)})("click",function(){a.CHM(Ue);const ft=a.oxw().index;return a.oxw(2).onEventClick(ft)}),a.qZA()}if(2&yt){const Ue=a.oxw(),ft=Ue.$implicit;a.Q6J("itemIndex",Ue.index)("ngStyle",a.VKq(3,q,ft.iconLoc))("matTooltip",ft.name)}}const ct=function(yt,Ht){return{"el-edgelog-preview1":yt,"el-edgelog-preview2":Ht}};function Se(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"div",16),a.TgZ(1,"nv-preview",17),a.NdJ("activeItemChange",function(ft){a.CHM(Ue);const st=a.oxw().index;return a.oxw(2).metadata[st]=ft})("iconPreviewRatio",function(ft){return a.CHM(Ue),a.oxw(3).ratioChanged(ft)}),a.qZA(),a.qZA()}if(2&yt){const Ue=a.oxw(),Mt=Ue.$implicit,ft=Ue.index,st=a.oxw(2);a.Q6J("ngClass",a.WLB(4,ct,!st.ratio,st.ratio))("ngStyle",a.VKq(7,q,Mt.previewLoc)),a.xp6(1),a.Q6J("activeItem",st.metadata[ft])("iconPreview",!0)}}function Ge(yt,Ht){if(1&yt&&(a.ynx(0),a.YNc(1,Me,1,8,"mat-icon",11),a.YNc(2,xe,1,5,"div",12),a.YNc(3,Se,2,9,"div",13),a.BQk()),2&yt){const Ue=Ht.$implicit,Mt=a.oxw(2);a.xp6(1),a.Q6J("ngIf",Ue.round===Mt.roundItemIndex),a.xp6(1),a.Q6J("ngIf",Ue.round===Mt.roundItemIndex),a.xp6(1),a.Q6J("ngIf",Ue.round===Mt.roundItemIndex&&Ue.previewVisible)}}function St(yt,Ht){if(1&yt&&(a.TgZ(0,"div",10),a.YNc(1,Ge,4,3,"ng-container",8),a.qZA()),2&yt){const Ue=a.oxw();a.xp6(1),a.Q6J("ngForOf",Ue.eventData)}}const Tt=function(yt,Ht){return{"el-circle-selected":yt,"el-diamond-selected":Ht}};function Te(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"div",20),a.NdJ("click",function(){a.CHM(Ue);const ft=a.oxw().index;return a.oxw(2).onEventClick(ft)}),a.qZA()}if(2&yt){const Ue=a.oxw().$implicit;a.Q6J("ngClass",a.WLB(3,Tt,"circle"===Ue.marker,"diamond"==Ue.marker))("ngStyle",a.VKq(6,q,Ue.location))("matTooltip",Ue.name)}}const Je=function(yt,Ht){return{"el-circle":yt,"el-diamond":Ht}};function xt(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"div",20),a.NdJ("click",function(){a.CHM(Ue);const ft=a.oxw().index;return a.oxw(2).onEventClick(ft)}),a.qZA()}if(2&yt){const Ue=a.oxw().$implicit;a.Q6J("ngClass",a.WLB(3,Je,"circle"===Ue.marker,"diamond"==Ue.marker))("ngStyle",a.VKq(6,q,Ue.location))("matTooltip",Ue.name)}}function Ye(yt,Ht){if(1&yt&&(a.ynx(0),a.YNc(1,Te,1,8,"div",19),a.YNc(2,xt,1,8,"div",19),a.BQk()),2&yt){const Ue=Ht.$implicit,Mt=Ht.index,ft=a.oxw(2);a.xp6(1),a.Q6J("ngIf",ft.activeItemIndex===Mt&&Ue.round===ft.roundItemIndex),a.xp6(1),a.Q6J("ngIf",ft.activeItemIndex!==Mt&&Ue.round===ft.roundItemIndex)}}function rt(yt,Ht){if(1&yt&&(a.TgZ(0,"div",18),a.YNc(1,Ye,3,2,"ng-container",8),a.qZA()),2&yt){const Ue=a.oxw();a.xp6(1),a.Q6J("ngForOf",Ue.eventData)}}function ge(yt,Ht){1&yt&&(a.TgZ(0,"div",21),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&yt&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"summary.EmptyRound")))}function Ve(yt,Ht){if(1&yt&&(a.ynx(0),a.TgZ(1,"div",0),a.TgZ(2,"div",22),a._uU(3),a.qZA(),a.TgZ(4,"div",23),a._uU(5,"|"),a.qZA(),a.qZA(),a.BQk()),2&yt){const Ue=Ht.$implicit;a.xp6(2),a.Q6J("ngStyle",a.VKq(3,q,Ue.labelLoc)),a.xp6(1),a.hij(" ",Ue.tag," "),a.xp6(1),a.Q6J("ngStyle",a.VKq(5,q,Ue.tickLoc))}}function at(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"nv-item-button",30),a.NdJ("clicked",function(){return a.CHM(Ue),a.oxw(2).recentGoLeft()}),a.qZA()}}function ve(yt,Ht){1&yt&&a._UZ(0,"div",38)}const Ze=function(yt){return{arg:yt}};function Ie(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"div",31),a.NdJ("click",function(){const st=a.CHM(Ue).index;return a.oxw(2).onRoundClick(st)}),a.TgZ(2,"div",32),a.TgZ(3,"div"),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA(),a.TgZ(6,"div",33),a.TgZ(7,"div",34),a._uU(8),a.ALo(9,"translate"),a.qZA(),a.TgZ(10,"div",35),a._uU(11),a.qZA(),a._UZ(12,"div",36),a.TgZ(13,"div",35),a._uU(14),a.qZA(),a.qZA(),a.YNc(15,ve,1,0,"div",37),a.qZA(),a.qZA()}if(2&yt){const Ue=Ht.$implicit,Mt=Ht.index,ft=a.oxw(2);a.xp6(4),a.Oqu(a.xi3(5,5,"summary.Round",a.VKq(10,Ze,Ue.number))),a.xp6(4),a.Oqu(a.lcZ(9,8,"summary.Score")),a.xp6(3),a.Oqu(Ue.score1),a.xp6(3),a.Oqu(Ue.score2),a.xp6(1),a.Q6J("ngIf",Mt===ft.roundItemIndex)}}function $e(yt,Ht){if(1&yt){const Ue=a.EpF();a.TgZ(0,"nv-item-button",39),a.NdJ("clicked",function(){return a.CHM(Ue),a.oxw(2).recentGoRight()}),a.qZA()}}function ze(yt,Ht){if(1&yt&&(a.TgZ(0,"div",24),a.YNc(1,at,1,0,"nv-item-button",25),a.TgZ(2,"cdk-virtual-scroll-viewport",26,27),a.YNc(4,Ie,16,12,"div",28),a.qZA(),a.YNc(5,$e,1,0,"nv-item-button",29),a.qZA()),2&yt){const Ue=a.oxw();a.xp6(1),a.Q6J("ngIf",!Ue.leftDisabled),a.xp6(1),a.Q6J("itemSize",Ue.roundsItemSize),a.xp6(2),a.Q6J("cdkVirtualForOf",Ue.rounds),a.xp6(1),a.Q6J("ngIf",!Ue.rightDisabled)}}const _t=function(yt,Ht){return{"el-time-axis1":yt,"el-time-axis2":Ht}};let nn=(()=>{class yt{constructor(Ue,Mt){this.loggingService=Ue,this.translateService=Mt,this.roundDataPresent=!1,this.eventData=[],this.overlapEvents=void 0,this.timeAxisData=[],this.totalTimeAxisItems=7,this.lineWidth=0,this.startTime=0,this.leftDisabled=!1,this.rightDisabled=!1,this.itemsVisible=8,this.roundsItemSize=188,this.ratio=!1,this.emptyRound=!1,this.eventTimeout=null,this._activeItemIndex=0,this.activeItemIndexChange=new a.vpe,this._roundItemIndex=0,this.logger=this.loggingService.getLogger("EdgeLog"),this.logger.info("Constructor")}get activeItemIndex(){return this._activeItemIndex}set activeItemIndex(Ue){if(this._activeItemIndex=Ue,this.logger.info("ActiveItem Index: ",Ue),this.events[Ue].round!==this._roundItemIndex){this._roundItemIndex=this.events[Ue].round,this.calculateTimeAxis();const Mt=this.events.findIndex(ft=>ft.round===this._roundItemIndex);this.emptyRound=-1===Mt,this.roundDataPresent&&!this.emptyRound&&(this.scroller.scrollToIndex(this._roundItemIndex,"smooth"),this.chevronControl())}}get roundItemIndex(){return this._roundItemIndex}set roundItemIndex(Ue){this._roundItemIndex=Ue,this.logger.info("RoundItem Index: ",Ue)}ngOnInit(){this.roundDataPresent=!!(this.rounds&&this.rounds.length>0),this.logger.info("RoundDataPresent: ",this.roundDataPresent),this.logger.info("Events: ",this.events),this.logger.info("Rounds: ",this.rounds),setTimeout(()=>{this.initializeEdgeLogData()})}ngOnDestroy(){}initializeEdgeLogData(){this.lineWidth=this.timeline.nativeElement.getBoundingClientRect().width,this.logger.info("Timeline width: ",this.lineWidth),this.calculateTimeAxis();const Ue=this.events.findIndex(Mt=>Mt.round===this.roundItemIndex);this.emptyRound=-1===Ue,this.emptyRound||this.calculateTimeLine(),this.chevronControl()}onResize(Ue){this.resizeThrottler(100)}resizeThrottler(Ue){this.eventTimeout||(this.eventTimeout=setTimeout(()=>{this.eventTimeout=null,this.initializeEdgeLogData(),this.scroller&&this.roundDataPresent&&setTimeout(()=>{this.updateScroller(this._roundItemIndex)})},Ue))}calculateRange(Ue){let Mt=0,ft=0,st=0;if(this.roundDataPresent){let Et="";Et=0===Ue?this.start:this.rounds[Ue-1].time;const Ee=this.rounds[Ue].time;ft=this.convertTimeStringToNumber(Et),st=this.convertTimeStringToNumber(Ee)}else ft=this.convertTimeStringToNumber(this.start),st=this.convertTimeStringToNumber(this.end);return Mt=st-ft,this.startTime=ft,this.logger.info("StartTime: "+ft+" EndTime: "+st+" Range: "+Mt),Mt}calculateTimeLine(){let Ue,Mt=0,ft=this.calculateRange(Mt);this.eventData.length=0,this.events.forEach(Et=>{Et.round!==Mt&&(ft=this.calculateRange(Et.round),Mt=Et.round);const dt=(this.convertTimeStringToNumber(Et.time)-this.startTime)/ft,kt="Screenshot"===Et.name||"InstantReplay"===Et.name||"Manual"===Et.name||"Normal"===Et.name||"Map"===Et.name||"Team"===Et.name||"Montage"===Et.name,Zt=44+Math.round(this.lineWidth*dt),dn=Math.round(Zt-11),gn=dn-48,jt=kt?"blank":this.getHighlightIcon(Et.name),En=kt?"diamond":"circle";Et.name="Normal"===Et.name?"Manual":Et.name;const Pn=`highlightLabels.${Et.name}`;let Ln=this.translateService.instant(Pn);Ln===Pn&&(Ln=Et.name),Ue={round:Et.round,location:Zt,iconLoc:dn,previewLoc:gn,previewVisible:!1,name:Ln,icon:jt,marker:En},this.eventData.push(Ue)}),this.logger.info("EventData: ",this.eventData)}getHighlightIcon(Ue){switch(Ue){case"Kill":case"Jefe Mata":case"killed":return"gun";case"killed.2":case"Double Kill":case"DOUBLE_KILL":return"gun2x";case"killed.3":case"killed.n":case"Triple Kill":return"gun3x";case"Death":case"died":case"died.2":case"died.3":case"died.n":return"death";case"Team Score":case"Opponent Score":return"goal";case"Achievements":case"Champion":case"Victory":case"We Ran Out of Medals":return"medal";case"Slayer":case"Stealth Kill":return"sword";case"Bomb Planted":default:return"highlights"}}calculateTimeAxis(){this.timeAxisData.length=0;const Mt=this.totalTimeAxisItems-1,st=this.calculateRange(this.roundItemIndex)/Mt,Et=st<60?1:60,Ee=this.lineWidth/Mt,dt=1===Et,kt=[-10,3,0,-5,0,3,3,10,15];for(let Zt=0;Zt<this.totalTimeAxisItems;Zt++){const dn=st*Zt+this.startTime;let gn=Math.floor(dn/Et);const jt=Math.floor(dn-60*gn);let En="",Pn=0;if(dt)if(gn<60)En=gn+"s";else{let Be=0;for(;gn>60;)Be++,gn-=60;En=Be+"m "+gn+"s"}else En=gn+"m "+jt+"s",Pn=1;this.timeAxisData.push({labelLoc:33+Ee*Zt-kt[0===Zt?Pn:En.length],tickLoc:33+Ee*Zt+15,tag:En})}this.logger.info("TimeAxisItems: ",this.timeAxisData)}convertTimeStringToNumber(Ue){return G.duration(Ue).asSeconds()}onEventClick(Ue){this.logger.info("EventClick index: ",Ue);const Mt=this.eventData[Ue].iconLoc,ft=[];if(this.eventData.forEach((st,Et)=>{st.iconLoc===Mt&&st.round===this.roundItemIndex&&ft.push(Et)}),ft.length>1)if(this.overlapEvents&&this.overlapEvents.location===Mt)Ue=this.getNextClickIndex();else{const st=[];ft.forEach(Et=>{st.push({item:Et,state:!1})}),st[ft.length-1].state=!0,this.overlapEvents={location:Mt,icon:st},Ue===this._activeItemIndex&&(Ue=this.getNextClickIndex()),this.logger.info("New Overlap: ",this.overlapEvents)}else this.overlapEvents=void 0;this._activeItemIndex=Ue,this.activeItemIndexChange.emit(this._activeItemIndex)}getNextClickIndex(){const Ue=this.overlapEvents.icon.findIndex(st=>!0===st.state),Mt=Ue===this.overlapEvents.icon.length-1?0:Ue+1,ft=this.overlapEvents.icon[Mt].item;return this.overlapEvents.icon[Ue].state=!1,this.overlapEvents.icon[Mt].state=!0,this.logger.info("Overlap Params LastIndex: "+Ue+" NewIndex: "+Mt+" UseIndex: "+ft),this.logger.info("Update Overlap: ",this.overlapEvents),ft}onRoundClick(Ue){this.logger.info("RoundClick index: ",Ue),this._roundItemIndex=Ue,this.calculateTimeAxis();const Mt=this.events.findIndex(ft=>ft.round===this.roundItemIndex);this.emptyRound=-1===Mt,this.emptyRound||this.onEventClick(Mt)}recentNav(Ue,Mt=!1){let ft=this._roundItemIndex;Ue?ft--:ft++,ft=Mt?ft>=this.rounds.length?0:ft<0?this.rounds.length-1:ft:ft>=this.rounds.length?this.rounds.length-1:ft<0?0:ft,this.updateScroller(ft)}updateScroller(Ue){this.scroller.scrollToIndex(Ue,"smooth"),this.onRoundClick(Ue),this.chevronControl()}recentGoLeft(){this.recentNav(!0)}recentGoRight(){this.recentNav(!1)}chevronControl(){const Ue=this.timeline.nativeElement.getBoundingClientRect().width;this.itemsVisible=Math.floor(Ue/this.roundsItemSize),!this.roundDataPresent||this.rounds.length<=this.itemsVisible?(this.leftDisabled=!0,this.rightDisabled=!0):0===this._roundItemIndex?(this.leftDisabled=!0,this.rightDisabled=!1):this._roundItemIndex===this.rounds.length-1?(this.leftDisabled=!1,this.rightDisabled=!0):(this.leftDisabled=!1,this.rightDisabled=!1),this.logger.info("Chevrons active Left: "+!this.leftDisabled+" Right: "+!this.rightDisabled)}previewStateChanged(Ue){this.logger.info("PreviewState: ",Ue),this.eventData[Ue.index].previewVisible=Ue.state}ratioChanged(Ue){this.logger.info("Preview icon ratio: ",Ue),this.ratio=1.6===Ue}}return yt.\u0275fac=function(Ue){return new(Ue||yt)(a.Y36(y.ed),a.Y36(Q.sK))},yt.\u0275cmp=a.Xpm({type:yt,selectors:[["nv-edge-log-item"]],viewQuery:function(Ue,Mt){if(1&Ue&&(a.Gf(k,5),a.Gf(oe,5)),2&Ue){let ft;a.iGM(ft=a.CRH())&&(Mt.scroller=ft.first),a.iGM(ft=a.CRH())&&(Mt.timeline=ft.first)}},hostBindings:function(Ue,Mt){1&Ue&&a.NdJ("resize",function(st){return Mt.onResize(st)},!1,a.Jf7)},inputs:{rounds:"rounds",events:"events",metadata:"metadata",start:"start",end:"end",activeItemIndex:"activeItemIndex",roundItemIndex:"roundItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"},decls:10,vars:9,consts:[["fxLayout","column"],["fxLayout","column",1,"el-timeline-area"],[1,"el-line-horizontal"],["timeline",""],["fxLayout","row","class","el-icon-area",4,"ngIf"],["fxLayout","row","class","el-mark-area",4,"ngIf"],["class","font-body1 el-round-empty",4,"ngIf"],["fxLayout","row",3,"ngClass"],[4,"ngFor","ngForOf"],["class","el-rounds-container","fxLayout","row",4,"ngIf"],["fxLayout","row",1,"el-icon-area"],["class","icon-normal el-edgelog-icon",3,"ngClass","ngStyle","svgIcon",4,"ngIf"],["nvHoverPreview","","class","el-edgelog-icon",3,"itemIndex","ngStyle","matTooltip","previewStateChange","click",4,"ngIf"],[3,"ngClass","ngStyle",4,"ngIf"],[1,"icon-normal","el-edgelog-icon",3,"ngClass","ngStyle","svgIcon"],["nvHoverPreview","",1,"el-edgelog-icon",3,"itemIndex","ngStyle","matTooltip","previewStateChange","click"],[3,"ngClass","ngStyle"],["fxFlex","","fxFlexFill","",3,"activeItem","iconPreview","activeItemChange","iconPreviewRatio"],["fxLayout","row",1,"el-mark-area"],[3,"ngClass","ngStyle","matTooltip","click",4,"ngIf"],[3,"ngClass","ngStyle","matTooltip","click"],[1,"font-body1","el-round-empty"],[1,"font-body3","el-time-axis-text",3,"ngStyle"],[1,"font-body3","el-time-axis-tick",3,"ngStyle"],["fxLayout","row",1,"el-rounds-container"],["svgIcon","chevron_left",3,"clicked",4,"ngIf"],["fxFlex","","fxLayout","row","orientation","horizontal","tabIndex","0",1,"el-rounds-scroll-container",3,"itemSize"],["scroller",""],[4,"cdkVirtualFor","cdkVirtualForOf"],["svgIcon","chevron_right",3,"clicked",4,"ngIf"],["svgIcon","chevron_left",3,"clicked"],["fxLayout","column",1,"el-rounds-area",3,"click"],[1,"el-round-box-area"],["fxLayout","row",1,"el-round-score-area"],[1,"el-round-score"],[1,"el-round-score-data"],[1,"el-round-spacer"],["class","el-round-active",4,"ngIf"],[1,"el-round-active"],["svgIcon","chevron_right",3,"clicked"]],template:function(Ue,Mt){1&Ue&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a._UZ(2,"div",2,3),a.YNc(4,St,2,1,"div",4),a.YNc(5,rt,2,1,"div",5),a.YNc(6,ge,3,3,"div",6),a.TgZ(7,"div",7),a.YNc(8,Ve,6,7,"ng-container",8),a.qZA(),a.qZA(),a.YNc(9,ze,6,4,"div",9),a.qZA()),2&Ue&&(a.xp6(4),a.Q6J("ngIf",!Mt.emptyRound),a.xp6(1),a.Q6J("ngIf",!Mt.emptyRound),a.xp6(1),a.Q6J("ngIf",Mt.emptyRound),a.xp6(1),a.Q6J("ngClass",a.WLB(6,_t,!Mt.emptyRound,Mt.emptyRound)),a.xp6(1),a.Q6J("ngForOf",Mt.timeAxisData),a.xp6(1),a.Q6J("ngIf",Mt.roundDataPresent))},styles:['.icon-normal{color:#ffffffb3}.icon-highlighted{color:#76b900}.icon-green-bg{background:#76b900}.icon-preview-visible{color:#fff}.icon-preview-hidden{opacity:0}.icon-warning{color:#ffb43e}.icon-alert{color:#0b8abc!important}.el-timeline-area{height:88px;padding:0 24px;background-color:#292929}.el-icon-area{margin-top:-32px}.el-mark-area{margin-top:19px}.el-rounds-scroll-container{height:123px;overflow:hidden}.el-rounds-scroll-container .cdk-virtual-scroll-content-wrapper{display:flex;flex-direction:row}.el-rounds-container{background-color:#494949}:host-context(.isLtr) .el-rounds-container{padding-left:16px}html[dir=ltr] .el-rounds-container{--dummy1: 0;padding-left:16px}:host-context(.isRtl) .el-rounds-container{padding-right:16px}html[dir=rtl] .el-rounds-container{--dummy1: 0;padding-right:16px}.el-rounds-area{height:123px;background-color:#494949;z-index:1000}:host-context(.isLtr) .el-rounds-area{padding:24px 0 24px 8px}html[dir=ltr] .el-rounds-area{--dummy: 0;padding:24px 0 24px 8px}:host-context(.isRtl) .el-rounds-area{padding:24px 8px 24px 0}html[dir=rtl] .el-rounds-area{--dummy: 0;padding:24px 8px 24px 0}.el-round-box-area{width:168px;background-color:#393939}:host-context(.isLtr) .el-round-box-area{padding:5px 0 4px 12px}html[dir=ltr] .el-round-box-area{--dummy: 0;padding:5px 0 4px 12px}:host-context(.isRtl) .el-round-box-area{padding:5px 12px 4px 0}html[dir=rtl] .el-round-box-area{--dummy: 0;padding:5px 12px 4px 0}.el-round-score-area{width:180px;height:46px;background-color:#292929}.el-round-score{width:86px;background-color:#292929}:host-context(.isLtr) .el-round-score{padding:12px 0 0 12px}html[dir=ltr] .el-round-score{--dummy: 0;padding:12px 0 0 12px}:host-context(.isRtl) .el-round-score{padding:12px 12px 0 0}html[dir=rtl] .el-round-score{--dummy: 0;padding:12px 12px 0 0}.el-round-score-data{width:46px;background-color:#191919}:host-context(.isLtr) .el-round-score-data{padding:12px 0 0 16px}html[dir=ltr] .el-round-score-data{--dummy: 0;padding:12px 0 0 16px}:host-context(.isRtl) .el-round-score-data{padding:12px 16px 0 0}html[dir=rtl] .el-round-score-data{--dummy: 0;padding:12px 16px 0 0}.el-round-spacer{width:2px;background-color:#292929}.el-round-empty{position:absolute;width:100%;height:52px;margin-top:16px;text-align:center;vertical-align:middle}.el-line-horizontal{background-color:#919191;width:100%;height:2px;margin-top:50px}.el-circle-common,.el-circle-selected,.el-circle{width:10px;height:10px;border-radius:50%;position:absolute;margin-top:7px}.el-circle{background:#919191}.el-circle-selected{background:#76b900}.el-diamond1-common,.el-diamond-selected,.el-diamond{width:0;height:0;border:6px solid transparent;position:absolute}.el-diamond2-common,.el-diamond-selected:after,.el-diamond:after{content:"";position:absolute;left:-6px;top:6px;width:0;height:0;border:6px solid transparent}.el-diamond{border-bottom-color:#919191}.el-diamond:after{border-top-color:#919191}.el-diamond-selected{border-bottom-color:#76b900}.el-diamond-selected:after{border-top-color:#76b900}.el-time-axis1{padding-top:31px}.el-time-axis2{padding-top:18px}.el-time-axis-text{color:#ffffff4d;line-height:10px;position:absolute}.el-time-axis-tick{color:#ffffff4d;line-height:8px;font-size:8px;margin-top:10px;position:absolute}.el-edgelog-icon{font-size:48px;width:32px;height:32px;position:absolute;margin-top:-4px}.el-round-active{box-sizing:border-box;width:100%;pointer-events:none;border-bottom:3px solid #76b900}.el-edgelog-preview1{width:125px;height:71px;position:absolute;margin-top:-100px}.el-edgelog-preview2{width:127px;height:80px;position:absolute;margin-top:-100px}\n'],encapsulation:2}),yt})(),tn=(()=>{class yt{constructor(Ue){this.element=Ue,this.previewStateChange=new a.vpe}onmouseenter(){this.previewStateChange.emit({state:!0,index:this.itemIndex})}onmouseleave(){this.previewStateChange.emit({state:!1,index:this.itemIndex})}}return yt.\u0275fac=function(Ue){return new(Ue||yt)(a.Y36(a.SBq))},yt.\u0275dir=a.lG2({type:yt,selectors:[["","nvHoverPreview",""]],hostBindings:function(Ue,Mt){1&Ue&&a.NdJ("mouseenter",function(){return Mt.onmouseenter()})("mouseleave",function(){return Mt.onmouseleave()})},inputs:{itemIndex:"itemIndex"},outputs:{previewStateChange:"previewStateChange"}}),yt})();var Mn=e(42791),Un=e(28587),_n=e(1124),xn=e(50298);let Fn=(()=>{class yt{}return yt.\u0275fac=function(Ue){return new(Ue||yt)},yt.\u0275mod=a.oAB({type:yt}),yt.\u0275inj=a.cJS({imports:[[n.ez,y.it,i.Bz,D.o9,m.Q,(0,y.zv)()]]}),yt})();a.B6R(r.e,[Mn.N7,Un.Yx,p.yH,Mn.x0,n.O5,p.xw,l.Hw,p.SQ,n.sg,o,n.tP],[Q.X$]),a.B6R(c.$,[p.xw,n.PC,s.Zl,p.s9,_n.d,p.yH,n.O5,v.lW,l.Hw,Mn.N7,Mn.xd,Mn.x0,f.x,ie,n.mk,s.oO,nn],[Q.X$]),a.B6R(nn,[p.xw,n.O5,n.sg,l.Hw,n.mk,s.oO,n.PC,s.Zl,tn,xn.gM,ie,p.yH,p.s9,T.n,Mn.N7,Mn.xd,Mn.x0],[Q.X$])},46700:(He,de,e)=>{var n={"./af":62275,"./af.js":62275,"./ar":90857,"./ar-dz":11218,"./ar-dz.js":11218,"./ar-kw":14754,"./ar-kw.js":14754,"./ar-ly":66680,"./ar-ly.js":66680,"./ar-ma":92178,"./ar-ma.js":92178,"./ar-sa":56522,"./ar-sa.js":56522,"./ar-tn":95682,"./ar-tn.js":95682,"./ar.js":90857,"./az":70164,"./az.js":70164,"./be":79774,"./be.js":79774,"./bg":60947,"./bg.js":60947,"./bm":21832,"./bm.js":21832,"./bn":89650,"./bn-bd":74477,"./bn-bd.js":74477,"./bn.js":89650,"./bo":66005,"./bo.js":66005,"./br":98492,"./br.js":98492,"./bs":70534,"./bs.js":70534,"./ca":52061,"./ca.js":52061,"./cs":84737,"./cs.js":84737,"./cv":61167,"./cv.js":61167,"./cy":77996,"./cy.js":77996,"./da":9528,"./da.js":9528,"./de":14540,"./de-at":49430,"./de-at.js":49430,"./de-ch":67978,"./de-ch.js":67978,"./de.js":14540,"./dv":83426,"./dv.js":83426,"./el":6616,"./el.js":6616,"./en-au":63816,"./en-au.js":63816,"./en-ca":32162,"./en-ca.js":32162,"./en-gb":83305,"./en-gb.js":83305,"./en-ie":61954,"./en-ie.js":61954,"./en-il":43060,"./en-il.js":43060,"./en-in":59923,"./en-in.js":59923,"./en-nz":13540,"./en-nz.js":13540,"./en-sg":16505,"./en-sg.js":16505,"./eo":41907,"./eo.js":41907,"./es":86640,"./es-do":41246,"./es-do.js":41246,"./es-mx":56131,"./es-mx.js":56131,"./es-us":36430,"./es-us.js":36430,"./es.js":86640,"./et":62551,"./et.js":62551,"./eu":32711,"./eu.js":32711,"./fa":54572,"./fa.js":54572,"./fi":33390,"./fi.js":33390,"./fil":87860,"./fil.js":87860,"./fo":48216,"./fo.js":48216,"./fr":99291,"./fr-ca":98527,"./fr-ca.js":98527,"./fr-ch":58407,"./fr-ch.js":58407,"./fr.js":99291,"./fy":47054,"./fy.js":47054,"./ga":49540,"./ga.js":49540,"./gd":73917,"./gd.js":73917,"./gl":51486,"./gl.js":51486,"./gom-deva":56245,"./gom-deva.js":56245,"./gom-latn":48868,"./gom-latn.js":48868,"./gu":59652,"./gu.js":59652,"./he":89019,"./he.js":89019,"./hi":42040,"./hi.js":42040,"./hr":63402,"./hr.js":63402,"./hu":79322,"./hu.js":79322,"./hy-am":27609,"./hy-am.js":27609,"./id":57942,"./id.js":57942,"./is":98275,"./is.js":98275,"./it":73053,"./it-ch":4378,"./it-ch.js":4378,"./it.js":73053,"./ja":46176,"./ja.js":46176,"./jv":679,"./jv.js":679,"./ka":92726,"./ka.js":92726,"./kk":72953,"./kk.js":72953,"./km":86957,"./km.js":86957,"./kn":59181,"./kn.js":59181,"./ko":47148,"./ko.js":47148,"./ku":27752,"./ku.js":27752,"./ky":65675,"./ky.js":65675,"./lb":41263,"./lb.js":41263,"./lo":65746,"./lo.js":65746,"./lt":11143,"./lt.js":11143,"./lv":38753,"./lv.js":38753,"./me":44054,"./me.js":44054,"./mi":31573,"./mi.js":31573,"./mk":30202,"./mk.js":30202,"./ml":68523,"./ml.js":68523,"./mn":79794,"./mn.js":79794,"./mr":56681,"./mr.js":56681,"./ms":56975,"./ms-my":39859,"./ms-my.js":39859,"./ms.js":56975,"./mt":3691,"./mt.js":3691,"./my":5152,"./my.js":5152,"./nb":7607,"./nb.js":7607,"./ne":21526,"./ne.js":21526,"./nl":86368,"./nl-be":40076,"./nl-be.js":40076,"./nl.js":86368,"./nn":68420,"./nn.js":68420,"./oc-lnc":51906,"./oc-lnc.js":51906,"./pa-in":94504,"./pa-in.js":94504,"./pl":54721,"./pl.js":54721,"./pt":74645,"./pt-br":54548,"./pt-br.js":54548,"./pt.js":74645,"./ro":71977,"./ro.js":71977,"./ru":26042,"./ru.js":26042,"./sd":78849,"./sd.js":78849,"./se":27739,"./se.js":27739,"./si":50084,"./si.js":50084,"./sk":92449,"./sk.js":92449,"./sl":23086,"./sl.js":23086,"./sq":33139,"./sq.js":33139,"./sr":30607,"./sr-cyrl":30063,"./sr-cyrl.js":30063,"./sr.js":30607,"./ss":40131,"./ss.js":40131,"./sv":21665,"./sv.js":21665,"./sw":5642,"./sw.js":5642,"./ta":33622,"./ta.js":33622,"./te":74825,"./te.js":74825,"./tet":48336,"./tet.js":48336,"./tg":39238,"./tg.js":39238,"./th":99463,"./th.js":99463,"./tk":39986,"./tk.js":39986,"./tl-ph":29672,"./tl-ph.js":29672,"./tlh":40043,"./tlh.js":40043,"./tr":51212,"./tr.js":51212,"./tzl":50110,"./tzl.js":50110,"./tzm":80482,"./tzm-latn":38309,"./tzm-latn.js":38309,"./tzm.js":80482,"./ug-cn":42495,"./ug-cn.js":42495,"./uk":54157,"./uk.js":54157,"./ur":80984,"./ur.js":80984,"./uz":64141,"./uz-latn":43662,"./uz-latn.js":43662,"./uz.js":64141,"./vi":12607,"./vi.js":12607,"./x-pseudo":66460,"./x-pseudo.js":66460,"./yo":92948,"./yo.js":92948,"./zh-cn":62658,"./zh-cn.js":62658,"./zh-hk":39352,"./zh-hk.js":39352,"./zh-mo":38274,"./zh-mo.js":38274,"./zh-tw":98451,"./zh-tw.js":98451};function i(m){var y=D(m);return e(y)}function D(m){if(!e.o(n,m)){var y=new Error("Cannot find module '"+m+"'");throw y.code="MODULE_NOT_FOUND",y}return n[m]}i.keys=function(){return Object.keys(n)},i.resolve=D,He.exports=i,i.id=46700},27230:He=>{function de(e){return Promise.resolve().then(()=>{var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n})}de.keys=()=>[],de.resolve=de,de.id=27230,He.exports=de},26863:He=>{"use strict";He.exports=JSON.parse('{"components/menu-item":"Verbose"}')},54996:He=>{"use strict";He.exports=JSON.parse('{"ar_SA":"82266175895c26aec148","sk_SK":"381a0779ccea4567ff16","fr_FR":"0f215367b94b3e13b58c","fi_FI":"ab9dc94bcb0629e545ea","pt_PT":"36a3dc1a26b0eaec1a5f","it_IT":"8344ec554e089312547f","uk_UA":"47304d365232c5a560e2","nl_NL":"1b5a82ee53f8dcdf565d","en_US":"d9231b36885f918a3695","el_GR":"1f7e8cf48f1961c56030","th_TH":"fc9652e3a8836e0c12df","ro_RO":"b9193511e8a744c17f98","hu_HU":"4285a154fd46d9cfb0ba","ja_JP":"7c024e7615211680a5fc","sl_SI":"fb2327709a832a38fb16","hr_HR":"d78ba65b06e29e3a3966","es_ES":"175faea740e132b77c55","ru_RU":"a5c45745dc656f532235","en_GB":"b7b71fb1342122333a16","bg_BG":"dfee3fec4813700326b9","ko_KR":"d8ec9dbc61720f380aa1","pt_BR":"c0eb494cd128beaf2b27","da_DK":"b48252f08cafe46b3cd0","zh_TW":"229916b52d0831ba679e","cs_CZ":"2cdbd7a06d1b79dabe45","tr_TR":"a5750d9bccf2eea37829","de_DE":"d6fa2f2160c9332029e8","es_MX":"f4e6d43ce2b1faafea1e","zh_CN":"8d055ab51bf6882f6f14","sv_SE":"9a2c15bd5f5b9a11537d","pl_PL":"b473fef686d0f5625081","nb_NO":"3e1968777ed0b39616e3"}')}},He=>{He.O(0,[736],()=>He(He.s=69798)),He.O()}]);